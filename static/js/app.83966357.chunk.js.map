{"version":3,"sources":["web-build/register-service-worker.js","assets/fonts/Raleway-Regular.ttf","assets/fonts/Raleway-Thin.ttf","assets/fonts/Raleway-Light.ttf","assets/fonts/Raleway-SemiBold.ttf","assets/fonts/Raleway-Bold.ttf","assets/fonts/ComicBold.ttf","src/constants/config.ts","src/constants/http-status.ts","src/api/utils.ts","src/state/types.ts","src/constants/universities.ts","src/api/converters.ts","src/state/profile/actions.ts","src/state/persistent-storage/static.ts","src/state/auth/actions.ts","src/api/errors.ts","src/state/persistent-storage/auth.ts","src/state/settings/actions.ts","src/model/utils.ts","src/state/auth/reducer.ts","src/constants/profile-constants.ts","src/validators/index.ts","src/constants/translations.ts","src/localization.ts","src/model/languages.ts","src/state/settings/reducer.ts","src/state/profile/reducer.ts","src/api/dto.ts","src/state/matching/actions.ts","src/state/matching/reducer.ts","src/api/chat-socket.ts","src/state/messaging/actions.ts","src/state/messaging/reducer.ts","src/state/notifications/reducer.ts","src/state/reports/reducer.ts","src/state/groups/reducer.ts","src/navigation/utils.ts","src/screens/onboarding/index.ts","src/state/static-storage-middleware.ts","src/state/auth-storage-middleware.ts","src/state/notifications/actions.ts","src/notifications-utils.ts","src/state/store.ts","src/state/navigation-middleware.ts","src/state/notifications-middleware.ts","src/state/messaging-middleware.ts","src/hooks/useCachedResources.ts","src/constants/layout.ts","src/constants/themes.ts","src/styles/utils.ts","src/screens/ScreenWrapper.tsx","src/styles/general.ts","src/screens/NotFoundScreen.tsx","src/screens/ValidateEmailScreen.tsx","src/screens/ValidationEmailSentScreen.tsx","src/navigation/linking-config.ts","src/components/InputLabel.tsx","src/components/InputErrorText.tsx","src/components/ValidatedTextInput.tsx","src/components/forms/FormTextInput.tsx","src/styles/onboarding.ts","src/styles/forms.ts","src/components/forms/FormError.tsx","src/components/Button.tsx","src/components/forms/FormSubmitButton.tsx","src/components/modals/ModalImpl.tsx","src/components/modals/CustomModal.tsx","src/components/modals/RecoverAccountModal.tsx","src/components/forms/LoginForm.tsx","src/components/forms/ForgotPasswordForm.tsx","src/components/forms/ScrollFormWrapper.tsx","src/components/forms/SignupForm.tsx","src/components/SvgPlaceholder.tsx","src/assets.ts","src/components/headers/LoginHeader.tsx","src/screens/LoginScreens.tsx","src/components/SemiHighlightedText.tsx","src/components/LocalImage.tsx","src/components/MobileStoreButton.tsx","src/screens/WelcomeScreen.tsx","src/components/DebugMenu.tsx","src/components/VersionInfo.tsx","src/navigation/LoginNavigator.tsx","src/components/cards/SwipeableCard.tsx","src/styles/picker.ts","src/constants/reports.ts","src/components/PopUpSelector.tsx","src/state/reports/actions.ts","src/components/forms/QuickForm.tsx","src/components/forms/QuickFormReport.tsx","src/components/cards/ChatRoomCard.tsx","src/components/utility/LocaleAware.tsx","src/components/InfiniteScroller.tsx","src/screens/messaging/ChatRoomsScreen.tsx","src/components/ProfileAvatar.tsx","src/styles/headers.ts","src/components/headers/MainHeader.tsx","src/components/headers/ChatScreenHeader.tsx","src/screens/messaging/ChatScreen.tsx","src/polyfills.ts","src/constants/route-settings.ts","src/navigation/MessagingNavigator.tsx","src/components/LogOutButton.tsx","src/screens/TabHomeScreen.tsx","src/components/modals/BlockProfileModal.tsx","src/components/FormattedUniversity.tsx","src/components/Chips.tsx","src/components/utility/FocusAware.tsx","src/components/SwipeTip.tsx","src/components/cards/MatchProfileCard.tsx","src/components/AsyncButton.tsx","src/components/Wave.tsx","src/components/modals/MatchSuccessModal.tsx","src/screens/TabMatchingScreen.tsx","src/components/headers/MatchScreenHeader.tsx","src/components/MultiPicker.tsx","src/components/MultiUniversityPicker.tsx","src/styles/toggles.ts","src/components/DegreeToggleMulti.tsx","src/components/LanguagePicker.tsx","src/components/RoleToggleMulti.tsx","src/components/FormattedOfferCategory.tsx","src/components/SectionedMultiPicker.tsx","src/model/education-fields.ts","src/components/EducationFieldPicker.tsx","src/components/StaffRolePicker.tsx","src/screens/MatchFilteringScreen.tsx","src/components/headers/FilteringScreenHeader.tsx","src/components/FormattedMatchStatus.tsx","src/components/cards/HistoryProfileCard.tsx","src/components/BufferedSearchBar.tsx","src/screens/MatchHistoryScreen.tsx","src/navigation/TabMatchingNavigator.tsx","src/components/tabs/MainTabBar.tsx","src/components/tabs/MessagingTabIcon.tsx","src/navigation/MainNavigator.tsx","src/components/OnboardingProgressBar.tsx","src/components/GenderToggleMulti.tsx","src/components/CustomTooltip.tsx","src/components/OfferControl.tsx","src/screens/onboarding/helpers.tsx","src/screens/onboarding/OnboardingSlide.tsx","src/screens/onboarding/OnboardingNameScreen.tsx","src/components/GenderToggle.tsx","src/components/NationalityPicker.tsx","src/components/FormattedNationality.tsx","src/components/NationalityControl.tsx","src/components/FormattedDate.tsx","src/components/DateInput.tsx","src/components/BirthDateInput.tsx","src/screens/onboarding/OnboardingProfileScreen1.tsx","src/components/LanguageLevelPicker.tsx","src/components/SpokenLanguagesInput.tsx","src/components/InterestsPicker.tsx","src/screens/onboarding/OnboardingProfileScreen2.tsx","src/screens/onboarding/OnboardingRoleScreen.tsx","src/screens/onboarding/OnboardingOffersScreen1.tsx","src/screens/onboarding/OnboardingOffersScreen2.tsx","src/screens/onboarding/OnboardingOffersScreen3.tsx","src/components/DegreeToggle.tsx","src/screens/onboarding/OnboardingRoleSpecificScreen.tsx","src/components/modals/TOSDeclinedModal.tsx","src/components/TextLink.tsx","src/screens/onboarding/OnboardingLegalSlide.tsx","src/screens/onboarding/screens.tsx","src/screens/onboarding/OnboardingLegalScreen1.tsx","src/screens/onboarding/OnboardingLegalScreen2.tsx","src/screens/onboarding/OnboardingLegalScreen3.tsx","src/navigation/OnboardingNavigator.tsx","src/screens/onboarding/OnboardingSuccessfulScreen.tsx","src/components/forms/ResetPasswordForm.tsx","src/screens/ResetPasswordScreen.tsx","src/screens/ForgotPasswordEmailSentScreen.tsx","src/screens/ResetPasswordSuccessScreen.tsx","src/components/RoleToggle.tsx","src/components/AvatarEditButton.tsx","src/components/cards/ValueCard.tsx","src/components/EnlargeableAvatar.tsx","src/components/headers/WavyHeader.tsx","src/components/forms/EditProfileForm.tsx","src/screens/MyProfileScreen.tsx","src/components/FormattedGender.tsx","src/components/ProfileView.tsx","src/components/modals/UnmatchProfileModal.tsx","src/components/ProfileActionBar.tsx","src/screens/ProfileScreen.tsx","src/components/LocalePicker.tsx","src/model/user-settings.ts","src/components/modals/CustomizeCookiesModal.tsx","src/screens/SettingsScreen.tsx","src/screens/DeleteAccountSuccessScreen.tsx","src/components/forms/DeleteAccountForm.tsx","src/screens/DeleteAccountScreen.tsx","src/navigation/index.tsx","src/components/providers/ConnectedThemeProvider.tsx","src/components/ThemedStatusBar.tsx","src/components/CookieBanner.tsx","src/App.tsx","src/notifications.ts"],"names":["navigator","window","addEventListener","serviceWorker","register","scope","then","info","catch","error","console","module","exports","Environment","HttpStatusCode","extra","Constants","manifest","APP_VERSION","version","APP_SCHEME","scheme","ENVIRONMENT","TARGET","DEBUG_MODE","DEBUG","CLIENT_URL","BACKEND_URL","SERVER_HOST","SERVER_URL","TERMS_AND_CONDITIONS_URL","encodeRequestParams","args","str","Object","keys","filter","key","undefined","map","encodeURIPrimitive","v","Array","isArray","join","encodeURIComponent","length","requestBackend","endpoint","a","async","method","params","body","authToken","verbose","headers","Accept","Alert","alert","errorType","description","status","Authorization","accessToken","formattedParams","response","log","JSON","stringify","fetch","json","data","NO_CONTENT","PARTNER_UNIVERSITIES","country","stripSuperfluousOffers","offers","o","allowFemale","allowMale","allowOther","allowStaff","allowStudent","convertDtoToProfile","dto","complete","common","avatarUrl","avatar","birthdate","Date","educationFields","id","profileOffers","interests","i","languages","university","find","u","type","staffDto","staffRoles","r","studentDto","degree","convertPartialProfileToCreateDto","profile","toJSON","staff","student","convertDtoToUser","convertDtoToRoom","users","profiles","p","_id","name","firstName","lastName","lastMessageSeenId","lastMessageSeenDate","lastMessage","msg","sender","senderId","convertDtoToChatMessage","messages","writing","messagePagination","page","canFetchMore","fetching","user","createdAt","updatedAt","convertDtoToHistoryItem","date","PROFILE_ACTION_TYPES","storeStaticData","cookieConsent","storageObject","AsyncStorage","setItem","clearStaticData","s","multiRemove","readCachedStaticData","getItem","raw","parse","AUTH_ACTION_TYPES","setProfileFieldsSuccess","fields","PROFILE_SET_FIELDS_SUCCESS","createProfileSuccess","PROFILE_CREATE_SUCCESS","createProfile","dispatch","getState","token","auth","CREATED","payload","loadProfileOffersSuccess","fromCache","LOAD_PROFILE_OFFERS_SUCCESS","loadProfileInterestsSuccess","LOAD_PROFILE_INTERESTS_SUCCESS","fetchUserSuccess","FETCH_USER_SUCCESS","fetchProfileSuccess","FETCH_PROFILE_SUCCESS","localizeError","err","i18n","t","defaultValue","extractError","code","gatherValidationErrors","resp","OK","output","general","UNPROCESSABLE_ENTITY","errors","forEach","e","property","codes","generalError","storeAuthInformation","email","toStore","discardAuthInformation","removeItem","readCachedCredentials","SETTINGS_ACTION_TYPES","registerBegin","password","REGISTER_BEGIN","requestRegister","locale","settings","userSettings","registerSuccess","success","registerFailure","REGISTER_SUCCESS","REGISTER_FAILURE","loginSuccess","usingCachedCredentials","LOG_IN_SUCCESS","loginFailure","needsRecovery","LOG_IN_FAILURE","requestLogin","recover","FORBIDDEN","logout","redirect","LOG_OUT","requestValidateAccount","validationToken","validateAccountSuccess","validateAccountFailure","VALIDATE_ACCOUNT_SUCCESS","VALIDATE_ACCOUNT_FAILURE","forgotPasswordSuccess","FORGOT_PASSWORD_SUCCESS","forgotPasswordFailure","FORGOT_PASSWORD_FAILURE","resetPasswordSuccess","RESET_PASSWORD_SUCCESS","deleteAccountSuccess","DELETE_ACCOUNT_SUCCESS","beginOnboarding","BEGIN_ONBOARDING","setOnboardingValues","values","SET_ONBOARDING_VALUES","setTheme","theme","SET_THEME","setLocale","SET_LOCALE","loadCookiesPreferences","preferences","consentDate","LOAD_COOKIES_PREFERENCES","saveCookiesPreferences","SAVE_COOKIES_PREFERENCES","loadVersionInfo","LOAD_VERSION_INFO","extractNamesFromEmail","splitName","split","capitalize","toUpperCase","slice","firstname","lastname","initialState","authenticated","validated","registerEmail","validatedEmail","accountNeedsRecovery","onboarded","onboarding","gender","nationality","offerValues","interestIds","onboardingIndex","DEGREES","LANGUAGE_LEVELS","ROLES","STAFF_ROLES","STAFF_ROLE_ICONS","GENDERS","VALIDATOR_EMAIL_SIGNUP","Yup","required","VALIDATOR_PASSWORD_SIGNUP","min","matches","VALIDATOR_PASSWORD_REPEAT","oneOf","VALIDATOR_EMAIL_LOGIN","VALIDATOR_PASSWORD_LOGIN","VALIDATOR_FIRSTNAME","trim","VALIDATOR_LASTNAME","VALIDATOR_ONBOARDING_BIRTHDATE","nullable","VALIDATOR_ONBOARDING_GENDER","VALIDATOR_ONBOARDING_NATIONALITY","VALIDATOR_ONBOARDING_DEGREE","VALIDATOR_ONBOARDING_LANGUAGES","VALIDATOR_ONBOARDING_INTERESTS","en","locales","fr","appName","search","send","cancel","ok","save","noResultsFound","apply","logOut","picker","callToAction","dateInput","dayPlaceholder","monthPlaceholder","yearPlaceholder","nationalityPicker","placeholder","login","emailAddress","passwordRepeat","forgotPassword","forgotPasswordExplanation","newPassword","signupWelcome","createAccount","emailValidation","validating","legal","modal","disclaimer1","disclaimer2","decline","accept","readMore","validation","atLeastOne","addAtLeastOne","invalid","tooShort","noDigit","noUpperCase","noLowerCase","noSymbol","repeatWrong","language","specifyLevel","tooYoung","error_user_not_verified","user_not_found","email_or_password_incorrect","reset_password_no_token","unique","is_email","is_sea_email_constraint","myProfile","countryPickerLanguageCode","profileType","profileTypes","positions","allRoles","teaching","research","administration","technical","other","genders","male","female","dateOfBirth","months","0","1","2","3","4","5","6","7","8","9","10","11","spokenLanguages","languageLevels","a1","a2","b1","b2","c1","c2","native","levelOfStudy","degrees","bsc1","bsc2","bsc3","m1","m2","phd","fieldsOfEducation","educationFieldsPicker","searchPlaceholder","multiple","educationFieldCategories","education","services","handicrafts","economics","psychology","law","biology","biochemistry","chemistry","physics","mathematics","statistics","materials","textiles","horticulture","forestry","fisheries","veterinary","medicine","pharmacy","sports","notFoundScreen","title","subtitle","universities","universitiesPicker","profile1","profile2","role","roleSpecific1","offersMeet","offersDiscover","offersCollaborate","legal1","text","legal2","legal3","back","next","leave","submit","button","quit","yes","languagePicker","placeholderSingle","placeholderMultiple","languageLevelPicker","languageNames","aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","eo","es","et","eu","fa","ff","fi","fj","fo","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rc","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","sh","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu","chooseInterests","interestsPicker","interestNames","activism","art","astrology","baking","bbq","blogging","brunch","climbing","coffee","comedy","cooking","couchsurfing","crossfit","cycling","dancing","diy","environmentalism","esports","expositions","fashion","festivals","fishing","foodie","football","gamer","gardening","golf","guitar","hiking","instagram","investing","karaoke","movies","museum","music","netflix","outdoors","parties","photography","piano","picnicking","podcasts","politics","reading","running","sailing","shopping","skateboarder","skiing","sneakers","snowboarding","spirituality","surfing","swimming","tango","tattoos","tea","tennis","theater","travel","trivia","vegan","vegetarian","volunteering","walking","wine","writer","yoga","offersPreText","offerCategories","meet","discover","collaborate","offerSettings","roles","allOffers","help","unmatch","blockQuestion","action","block","warning","welcomeScreen","signIn","signUp","loginForm","titleFirstLaunch","logIn","cookies","bannerText","acceptAll","customize","cache","bugReport","mailSubject","mailTitle","report","what","why","typePlaceholder","types","violence","nudity","harassment","confirmationTitle","confirmation","failureTitle","failure","resetPassword","instructions","deleteAccount","success1","success2","inputLabel","recoverAccount","messaging","noMatches","sayHi","sayHiTo","matching","noResults","noMoreItems","noItemsAdvice","filtering","sectionGeneral","buttonReset","actionLike","actionHide","offersTitle","offersMore","chat","continue","history","requested","declined","blocked","actions","noResultsAdvice","mute","noOffersSelected","screenTitles","suffix","WelcomeScreen","SigninScreen","ForgotPasswordScreen","SignupScreen","OnboardingNameScreen","OnboardingProfileScreen1","OnboardingProfileScreen2","OnboardingRoleScreen","OnboardingRoleSpecificScreen","OnboardingOffersScreen1","OnboardingOffersScreen2","OnboardingOffersScreen3","OnboardingLegalScreen1","OnboardingLegalScreen2","OnboardingLegalScreen3","ChatRoomsScreen","ChatScreen","TabHomeScreen","TabMatchingScreen","MatchFilteringScreen","MatchHistoryScreen","TabNotificationsScreen","MyProfileScreen","ProfileScreen","SettingsScreen","DeleteAccountScreen","DeleteAccountSuccessScreen","ValidationEmailSentScreen","ValidateEmailScreen","ResetPasswordScreen","ResetPasswordSuccessScreen","OnboardingSuccessfulScreen","NotFoundScreen","ForgotPasswordEmailSentScreen","sections","danger","about","darkTheme","deleteMyAccount","termsOfService","reportABug","customizeCookies","mo","SUPPORTED_LOCALES","getDefaultLocale","Localization","substr","LANGUAGES_CODES","getLocalizedLanguageItems","dict","translations","label","value","cookieConsentDate","previousVersion","isFirstLaunch","localizedLanguageItems","OfferCategory","offerIdToCategory","Map","MatchActionStatus","initOfferValue","val","genderVal","allowChooseGender","typeVal","allowChooseProfileType","offerId","MATCHING_ACTION_TYPES","MATCH_ACTION_HISTORY_STATUSES","Declined","Blocked","Requested","fetchProfilesFailure","FETCH_PROFILES_FAILURE","fetchProfilesSuccess","FETCH_PROFILES_SUCCESS","refreshFetchedProfiles","FETCH_PROFILES_REFRESH","likeProfileSuccess","matchStatus","roomId","LIKE_PROFILE_SUCCESS","likeProfile","toProfileId","dislikeProfileSuccess","DISLIKE_PROFILE_SUCCESS","blockProfileSuccess","profileId","BLOCK_PROFILE_SUCCESS","blockProfile","fetchHistorySuccess","items","FETCH_HISTORY_SUCCESS","refreshFetchedHistory","FETCH_HISTORY_REFRESH","cancelActionFailure","historyItemId","ACTION_CANCEL_FAILURE","cancelActionSuccess","isMatch","ACTION_CANCEL_SUCCESS","cancelMatchAction","matchingEntityId","filters","fetchedProfiles","profilesPagination","historyPagination","historyFilters","k","initialHistoryFilters","historyItems","myMatches","fetchingMyMatches","MESSAGING_ACTION_TYPES","SOCKET_LOCATION","this","socket","connectCallbacks","writingTimeout","lastSentWritingState","lastSentWritingStateRoom","connectTimeout","connectedState","f","listeners","on","clearTimeout","consumeConnectCallbacks","m","onMessageReceived","onMessageRead","onWritingStateChange","emit","room","state","setTimeout","sendWritingState","callback","push","retry","isConnected","addConnectCallback","isConnecting","connect","query","authorization","reconnection","registerListeners","readMessage","messageId","refreshWritingTimeout","disconnect","connected","fetchMatchRoomsSuccess","rooms","FETCH_MATCH_ROOMS_SUCCESS","fetchMatchRooms","pagination","matchRoomsPagination","FETCH_MATCH_ROOMS_BEGIN","limit","paginated","meta","currentPage","totalPages","FETCH_MATCH_ROOMS_FAILURE","connectToChat","fail","CONNECT_TO_CHAT_FAILURE","chatSocket","CONNECT_TO_CHAT_BEGIN","activeRoom","receiveChatMessage","readChatMessage","receiveChatWriting","hasConnected","CONNECT_TO_CHAT_SUCCESS","disconnectFromChat","DISCONNECT_FROM_CHAT","joinChatRoomBegin","JOIN_CHAT_ROOM_BEGIN","joinChatRoomFailure","JOIN_CHAT_ROOM_FAILURE","joinChatRoomSuccess","JOIN_CHAT_ROOM_SUCCESS","joinChatRoom","joinRoom","sendChatMessageSuccess","message","SEND_MESSAGE_SUCCESS","sendChatMessage","socketState","localChatUser","sent","sendMessage","SEND_MESSAGE_FAILURE","RECEIVE_MESSAGE","RECEIVE_WRITING_STATE","READ_MESSAGE","fetchEarlierMessagesBegin","FETCH_EARLIER_MESSAGES_BEGIN","fetchEarlierMessagesFailure","FETCH_EARLIER_MESSAGES_FAILURE","fetchEarlierMessagesSuccess","FETCH_EARLIER_MESSAGES_SUCCESS","fetchNewMessagesBegin","FETCH_NEW_MESSAGES_BEGIN","fetchNewMessagesFailure","FETCH_NEW_MESSAGES_FAILURE","fetchNewMessagesSuccess","FETCH_NEW_MESSAGES_SUCCESS","matchRooms","matchRoomsOrdered","connecting","fetchingNewMessages","toLocalChatUser","updateRoom","setAsFirst","otherRooms","concat","rootNavigationRef","React","rootNavigate","route","current","navigate","navigateBack","fallback","nav","canGoBack","goBack","screenTitle","headerTitle","openChat","screen","ONBOARDING_ORDER","hasUserGivenCookieConsent","Platform","OS","now","getTime","NOTIFICATIONS_ACTION_TYPES","areNotificationsSupported","isDevice","getNotificationData","notif","request","content","registerNotificationTokenSuccess","REGISTER_TOKEN_SUCCESS","deleteNotificationTokenSuccess","DELETE_TOKEN_SUCCESS","rootReducer","combineReducers","verificationToken","names","LOG_IN_RECOVER_CANCEL","PREVIOUS_ONBOARDING_SLIDE","NEXT_ONBOARDING_SLIDE","SET_ONBOARDING_OFFER_VALUE","TOGGLE_THEME","category","sort","b","SET_AVATAR_SUCCESS","SET_OFFER_FILTER","SET_FILTERS","FETCH_PROFILES_BEGIN","FETCH_MY_MATCHES_BEGIN","FETCH_MY_MATCHES_FAILURE","FETCH_MY_MATCHES_SUCCESS","FETCH_HISTORY_BEGIN","FETCH_HISTORY_FAILURE","SET_HISTORY_FILTERS","ids","FETCH_MATCH_ROOMS_REFRESH","LEAVE_ROOM","existingMessage","filteredMessages","ma","some","mb","findIndex","notifications","reports","groups","combinedMiddleware","applyMiddleware","thunk","store","oldCookies","Permissions","Notifications","askForPushNotificationToken","pushToken","registerNotificationToken","createStore","loggedInFromCache","width","Dimensions","get","height","isSmallDevice","isWideDevice","light","textWhite","textBlack","textLight","textInverted","background","cardBackground","accent","accentSlight","accentSecondary","accentTernary","actionNeutral","okay","warn","componentBorder","buttonGroupBorder","greenModalBackground","chatBubble","inputPlaceholder","onboardingInputBackground","onboardingInputFocusedBackground","dark","preTheme","generator","styles","wideDevice","layout","themes","ScreenWrapper","props","forceFullWidth","wrapperStyle","containerStyle","themedStyles","View","style","wrapper","container","maxWidth","children","StyleSheet","create","flex","justifyContent","flexDirection","overflow","alignItems","withTheme","styleTextThin","fontFamily","fontWeight","styleTextLight","webFontFamily","BLUR_HEADER_INTENSITY","BLUR_TAB_INTENSITY","BLUR_MODAL_INTENSITY","navigation","Text","TouchableOpacity","onPress","replace","link","linkText","padding","fontSize","textAlign","color","marginTop","paddingVertical","reduxConnector","Staging","ActivityIndicator","size","successText","routeName","fallbackRoute","location","attemptRedirectToApp","marginVertical","lineHeight","FontAwesome","mailIcon","config","prefixes","Linking","screens","LoginRoot","LoginScreens","MainScreen","TabHome","TabMatching","MatchFilteringScren","TabMessaging","TabNotifications","ValidateEmailSentScreen","OnboardingScreen","InputLabel","otherProps","textTransform","letterSpacing","marginBottom","InputErrorText","errorStr","ValidatedTextInput","inputRef","createRef","focused","showSecureEntry","focus","showErrorText","icon","untouched","secureTextEntry","inputStyle","inputFocusedStyle","errorStyle","validStyle","focusedStyle","errorTextStyle","labelStyle","showPasswordButtonStyle","showPasswordIconStyle","placeholderTextColor","onBlur","onFocus","showError","isSecureEntry","position","paddingBottom","TextInput","ref","backgroundColor","setState","Component","defaultProps","emailProps","keyboardType","autoCompleteType","textContentType","autoCapitalize","autoCorrect","passwordProps","FormTextInput","field","touched","handleChange","handleBlur","onChangeText","isEmail","isPassword","onboardingStyle","root","wideDeviceLeftPanel","slideWrapper","header","slideScrollView","slideContentWrapper","alignSelf","paddingTop","slideContentContainer","slideNavWrapper","slideNavButtons","navButton","marginHorizontal","navButtonBack","navButtonIcon","finishButtonText","onboardingOffersStyle","categoryTitleText","offerControl","offerControlPreText","formStyles","inputFieldIcon","marginRight","inputFieldIconFocused","getLoginTextInputsStyleProps","wrapperVerticalMargin","borderBottomWidth","borderColor","borderBottomColor","outline","FormError","BUTTON_SKINS","borderRadius","paddingHorizontal","borderWidth","Button","skin","textStyle","skinStyles","accessibilityRole","accessibilityLabel","FormSubmitButton","submitting","loadingIndicatorStyle","ModalImplClass","modalVisible","visible","document","createElement","appendChild","oldProps","setModalVisible","onHide","onShow","modalViewStyle","bottom","fullWidth","fullHeight","nonDismissable","noBackground","backdropOpacity","backdropBlur","fixedFullSize","left","top","tint","intensity","cursor","activeOpacity","right","margin","boxShadow","renderContent","ReactDOM","createPortal","CustomModalClass","modalRef","activator","activatorElement","show","ModalImpl","RecoverAccountModal","CustomModal","actionButtonsWrapper","actionButton","actionText","redBackground","LoginFormSchema","shape","LoginForm","pwdInputRef","setFieldValue","onSuccessfulSubmit","setFieldError","remoteErrors","fstyles","initialValues","validationSchema","validateOnBlur","onSubmit","formikProps","handleSubmit","textInputProps","returnKeyType","blurOnSubmit","onSubmitEditing","MaterialIcons","Keyboard","dismiss","forgotPwdLink","forgotPasswordText","actionsContainer","MaterialCommunityIcons","loginButtonIcon","separatorContainer","separatorHbar","separatorText","marginLeft","opacity","ForgotPasswordFormSchema","ForgotPasswordForm","titleWrapper","formikCfg","ScrollFormWrapper","keyboardShown","notKeyboardReactive","addListener","contentStyle","ScrollView","keyboardShouldPersistTaps","scrollView","contentContainerStyle","scrollViewContent","minHeight","onLayout","nativeEvent","KeyboardAvoidingView","behavior","keyboardAvoidingView","SignupFormSchema","SignupForm","pwdField1Ref","pwdField2Ref","validateOnChange","SvgPlaceholder","loaded","assetDictEn","assetDictFr","getLocalImage","onLoad","finish","default","assetDictCommon","getLocalSvg","LoginHeaderClass","ReAnimated","Value","getFullHeight","imageTop","getImageHeight","insets","Math","imageTopVal","getCollapsedHeight","heightVal","setValue","easing","Easing","cubic","timing","toValue","duration","start","Image","forceUpdate","image","viewBox","navigationButton","navigationIcon","zIndex","aspectRatio","SVG_VIEWBOX_W","useSafeAreaInsets","themeProps","SigninScreenClass","wide","form","formContainer","screenWrapper","screenContainer","ForgotPasswordScreenClass","SignupScreenClass","SemiHighlightedText","underlineHeight","underlineSides","textContainer","underline","textShadowColor","textShadowOffset","textShadowRadius","LocalImage","imageKey","img","source","MobileStoreButton","url","linkStyle","linkProps","Svg","scale","openURL","fill","WelcomeImage","storeButtonWidth","imageAndTextContainer","imageContainer","mobileStoresContainer","DebugMenu","ACTIONS","hide","n","round","random","level","titleStyle","debugContent","Content","Title","l","modalProps","statusBarTranslucent","isVisible","versionInfoContainer","versionText","versionDisclaimerIcon","SigninRoot","createMaterialTopTabNavigator","Tab","LoginNavigator","Navigator","swipeEnabled","tabBar","Screen","component","options","initialRouteName","DEFAULT_LOOKS","sideMargin","verticalSpacing","SwipeableCardClass","swipeableRef","looks","hidden","onHidden","onFinish","ease","close","leftActions","rightActions","wrapperProps","swipeableProps","hideCard","noAnimation","collapse","Swipeable","swipeableContainer","childrenContainerStyle","swipeable","useNativeAnimations","friction","renderLeftActions","renderRightActions","touchable","flexBasis","display","oneSidedBorderRadius","side","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","SwipeActionButton","buttonStyles","swipeActionButton","swipeActionButtonIcon","swipeActionButtonText","SwipeActionButtons","buttonStyle","SwipeActionContainer","properties","first","last","isExteriorButton","isInteriorButton","interiorFiller","fullCardWidth","swipeActionsContainer","paddingRight","paddingLeft","swipeActionsContent","swipeActionText","pickerStyles","overlay","maxHeight","dropdownWrapper","dropdownStyle","dropdownItemStyle","dropdownActiveItemStyle","dropdownActiveLabelStyle","dropdownLabelStyle","okButton","okButtonText","chipContainer","getPickerButtonStyleProps","variant","textNoneSelected","ReportType","PopUpSelector","valueDict","selected","fromSelectedProp","newValue","onSelect","noOkUnderline","valueStyle","buttonStyleVariant","pstyles","buttonStyleProps","buttonOk","numberOfLines","scroll","scrollContent","index","rowContainer","toggleValue","checked","checkboxContainer","checkboxWrapper","checkedIcon","uncheckedIcon","flexGrow","ReportEntityType","REPORT_ACTION_TYPES","REPORT_TYPES","VIOLENCE","NUDITY","HARASSMENT","UNDESIRABLE_CONTENT","HATE_SPEECH","VULGAR_CONTENT","OTHER","reportEntitySuccess","reportType","entityType","entityId","REPORT_ENTITY_SUCCESS","reportEntityFailure","REPORT_ENTITY_FAILURE","reportEntity","QuickFormClass","open","confirmationOpen","failureOpen","hideSubmit","titleIcon","submitText","confirmationText","failureText","actionButtons","actionButtonText","titleContainer","containerModal","wrapperSheet","containerSheet","feedbackModal","feedbackTitle","feedbackText","QuickFormReportClass","quickFormRef","selectedType","entity","PROFILE_ENTITY","getEntityInfo","QuickForm","inputItem","selectorValue","LOOKS","ChatRoomCard","reportFormRef","swipeableCardRef","localUser","lastMessageComponent","isRead","pad","num","padStart","lastMessageText","lastMessageTextNew","lastMessageTime","getHours","getMinutes","noMessageText","SwipeableCard","rightThreshold","overshootRight","getActions","cardContent","avatarContainer","avatarStyle","infoContainer","QuickFormReport","resetSwipe","onLocaleChange","InfiniteScroller","scrollViewRef","hiddenIds","fetchMore","isFocused","item","fetchLimit","getShownItems","refreshOnFocus","refresh","shown","justRefreshed","moreIfNeeded","renderItem","noResultsComponent","endOfItemsComponent","itemsContainerStyle","progressViewOffset","scroller","itemsContainer","refreshControl","RefreshControl","refreshing","onRefresh","onScroll","layoutMeasurement","contentOffset","contentSize","y","hideItem","endOfItemsContainer","noResultsContainer","loadingIndicatorContainer","roomIds","fetchingRooms","noMatchesText","ProfileAvatar","avatarProps","avatarTitle","avatarSourceProp","uri","headerStyles","wrapperBlur","wrapperNoShadow","shadowColor","elevation","backButton","backButtonIcon","rightButton","rightIcon","MainHeaderClass","rightButtons","noAvatar","noShadow","noSettingsButton","blur","overrideAvatar","overrideTitle","scene","textColor","buttonBackgroundColor","WrapperComponent","BlurView","blurProps","rounded","ButtonComponent","toLowerCase","iconStyle","MainHeaderComp","MainHeader","ChatScreenHeaderClass","getRoomId","stackProps","hstyles","getRoom","ChatScreenHeaderComp","ChatScreenHeader","listRef","removeScrollListener","ensureLatestMessages","fetchMatchRoom","connectToRoom","leaveRoom","afterDate","fetchPage","convertDto","fetchNewMessages","fetchEarlier","beforeDate","fetchEarlierMessages","scrollNode","getScrollableNode","listener","PAGE_HEIGHT","sY","pY","detail","wheelDelta","wheelDeltaY","deltaY","deltaMode","spinY","pixelY","normalizeWheelEvent","scrollTop","preventDefault","removeEventListener","setNativeProps","transform","chatComponent","isWritingId","userWriting","lastMessageDict","isKeyboardInternallyHandled","renderSend","sendContainer","renderBubble","renderTicks","currentMessage","messageTicksContainer","received","messageTick","bubbleTextLeft","bubbleTextRight","bubbleWrapperLeft","bubbleWrapperRight","renderMessage","seenBy","ChatMessage","messageProps","renderInputToolbar","inputToolbarContainer","primaryStyle","inputToolbarPrimary","renderFooter","ChatFooter","renderActions","ChatActions","actionsProps","onInputTextChanged","setWriting","onSend","loadEarlier","isLoadingEarlier","onLoadEarlier","timeFormat","listViewProps","setListRef","onEndReached","renderScrollComponent","renderComposer","autoFocus","textInput","multiline","onKeyPress","ev","altKey","shiftKey","minInputToolbarHeight","MIN_INPUT_HEIGHT","showUserAvatar","renderAvatar","renderCustomView","dotColor","dotAmplitude","dotSpeed","dotMargin","dotRadius","dotX","dotY","messageContainerLeft","messageContainerRight","messageReadContainerLeft","messageReadContainerRight","messageReadAvatar","messageReadAvatarText","borderTopWidth","actionContainer","actionIcon","minWidth","CHAT_CONNECTED_ROUTES","STATUS_BAR_THEME_OVERRIDES","AUTHENTICATED_ROUTES","Stack","createStackNavigator","MessagingNavigator","previousAppStatus","RNAppState","onAppActive","onAppInactive","getCurrentRoute","includes","headerMode","headerShown","LogOutButton","onLogOut","shortCode","BASE_URL","fetchPostEmbed","separator","alphaText","logoutButton","BlockProfileModalClass","onBlock","FormattedUniversity","flagSize","flagEmoji","countryCode","withEmoji","Chips","removable","onRemove","chipStyle","Chip","chip","chipText","chipRemoveButton","chipRemoveIcon","flexWrap","FocusAware","useFocusEffect","ICON_NAMES","horizontal","SwipeTip","offset","animating","dir","direction","animate","even","ANIMATION_AMPLITUDE","inOut","circle","linear","iconName","setAnimating","MatchProfileCard","cardRef","expanded","PROFILE_PREVIEW_COLLAPSED_HEIGHT","x","PROFILE_PREVIEW_EXPANDED_HEIGHT","elastic","out","expand","onExpand","showSwipeTip","fullName","chipStyleProps","collapsedContent","infoText","swipeTip","swipeTipIcon","expandedContent","expandedSectionTitle","BlockProfileModal","blockButton","blockButtonIcon","leftThreshold","onSwipeableRightWillOpen","onSwipeLeft","onSwipeableLeftWillOpen","onSwipeRight","swipeActionContentRight","swipeActionContentLeft","toggleExpanded","flexShrink","AsyncButton","loading","loadingIndicatorColor","WAVE_PATTERNS","Wave","wavePatternIdx","patternIndex","floor","upsideDown","wavePattern","rotate","preserveAspectRatio","d","localProfile","forwardRef","MatchSuccessModalClass","maxOffersDisplayed","waveWidth","getMatchingOffers","animationType","topContainer","profileInfoContainer","offersCard","availableHeight","OFFERS_CARD_VERTICAL_PADDING","numItems","offerText","fetchingProfiles","scrollerRef","successModalRef","notEmpty","indexOf","filterParams","noResultsText1","noResultsText2","scrollTo","animated","Matched","dislikeProfile","MatchSuccessModal","MatchScreenHeaderClass","MatchScreenHeader","MultiPicker","tempSelected","dropdownWrapperHeight","has","set","genLabel","updateItems","onChange","multipleText","searchablePlaceholder","showChips","single","viewProps","selectedItems","toString","searchable","onChangeItem","scrollViewProps","showArrow","dropDownMaxHeight","selectedLabelStyle","itemStyle","activeItemStyle","activeLabelStyle","showSelected","MultiUniversityPicker","uni","univKey","getToggleStyleProps","innerBorderStyle","buttonContainerStyle","selectedButtonStyle","selectedTextStyle","disabledStyle","disabledSelectedStyle","disabledSelectedTextStyle","buttonLabels","styleVariant","styleProps","idx","selectMultiple","selectedIndexes","buttons","LanguagePicker","languageId","FormattedOfferCategory","iconProps","iconSize","translationKey","SvgIcon","SectionedMultiPicker","selectRef","section","genSectionLabel","_toggleSelector","multiSelectStyles","sectionedMultiSelectStyles","miscStyles","select","onSelectedItemsChange","uniqueKey","displayKey","subKey","onCancel","onConfirm","IconRenderer","icons","showDropDowns","readOnlyHeadings","showCancelButton","selectedIconOnLeft","animateDropDowns","hideSelect","noResultsText","searchIconComponent","searchIcon","confirmText","searchPlaceholderText","colors","primary","subText","searchPlaceholderTextColor","selectToggleTextColor","itemBackground","subItemBackground","confirmFontFamily","itemFontFamily","searchTextFontFamily","subItemFontFamily","EducationFieldCategory","modalWrapper","overflowY","searchBar","searchTextInput","toggleIcon","subItem","selectedItem","itemText","subItemText","EducationFieldSubCategory","EDUCATION_FIELD_CATEGORIES","EDUCATION_FIELDS","GPQ","subCategory","EDU","AH","SSJI","BAL","NSMS","ICT","EMC","AFFV","HW","SER","sectioned","EDUCATION_FIELDS_SECTIONED","EducationFieldPicker","_","Separator","filteringScreenRef","localFilters","haveFiltersChanged","updateLocalFilters","offerSections","sectionContainer","entryContainer","entryLabel","Switch","onValueChange","updateLocalOfferFilters","scrollContainer","resetButton","resetLocalFilters","resetButtonText","resetButtonIcon","sectionTitle","entryControls","ClearFilterButton","twoLineEntryContainer","FilteringScreenHeaderClass","applyFilters","FilteringScreenHeaderComp","FilteringScreenHeader","FormattedMatchStatus","IconComponent","HistoryProfileCard","blockModalRef","reportButton","cancelButton","BufferedSearchBar","updateTimeout","bufferDelay","onBufferedUpdate","searchBarProps","fetchingHistory","filtersContainer","Filter","filterKey","setHistoryFilters","searchBarContainer","inputContainerStyle","searchBarInputContainer","searchBarInput","fetchHistory","filterButtonContainer","filterButton","filterButtonSelected","filterLabel","filterLabelSelected","raised","topBar","headerContainer","filterIcon","filterIconSelected","TabMatchingStack","TabMatchingNavigator","MainTabBarClass","tabBarProps","blurViewStyle","BottomTabBar","activeTintColor","tabStyle","tab","showLabel","MainTabBarIcon","MainTabBar","firstRoom","MessagingTabIcon","isNotRead","indicator","indicatorContainer","INDICATOR_SIZE","TabNavigator","createBottomTabNavigator","tabBarIcon","tabBarVisible","getFocusedRouteNameFromRoute","tabBarButton","OnboardingProgressBar","containerWidth","setIndex","targetWidth","sin","foregroundStyle","Consumer","foreground","CustomTooltip","tooltipStyles","alignContent","OfferControl","settingsModalRef","changed","offerValueChange","offer","isSomethingSelected","allowInterRole","titleLeft","setAllValues","offerNameTouchable","offerName","sideButton","sideButtonIcon","settingsModal","settingsModalTargetType","settingsModalButton","settingsModalButtonText","createOfferControls","onboardingState","setOnboardingOfferValue","finishOnboarding","createProfileDto","base","onboardingStateToDto","ButtonSpacer","OnboardingSlide","hideNavNext","hasNext","illustration","noKeyboardAvoidance","hasPrevious","keyboardVerticalOffset","enabled","previous","quitOnboarding","VALIDATION_SCHEMA","lastNameInputRef","nextProps","prev","getOnboardingTextInputsStyleProps","Illustration","enablesReturnKeyAutomatically","svgWidth","svgHeight","useState","Svg1","Svg2","Blob1","Blob2","disabled","selectedIndex","NationalityPicker","showModal","hideModal","filterProps","withFlag","withFilter","cca2","onClose","translation","containerButtonStyle","pickerContainerButton","DARK_THEME","DEFAULT_THEME","FormattedNationality","countryName","updateCountryName","getCountryInfoAsync","prevProps","NationalityControl","buttonValidStyle","FormattedDate","localizedMonth","getMonth","formattedDate","getDate","getFullYear","dateInputProps","maxLength","clearTextOnFocus","DateInputClass","input1Ref","input2Ref","input3Ref","deriveStateFromDate","year","month","day","pyear","parseInt","pmonth","pday","getError","minimumDate","maximumDate","focused1","focused2","focused3","validDate","inputStyleValid","inputStyleFocused","containerDay","input","inputDay","containerMonth","inputMonth","containerYear","inputYear","minDate","maxDate","setFullYear","BirthDateInputClass","dateInputRef","DateInput","setFieldTouched","BirthDateInput","dateTextInput","dateTextInputFocused","dateTextInputValid","birthdateText","nationalityButton","nationalityButtonValid","Blob","LanguageLevelPicker","SpokenLanguagesInput","hasErrors","levelDict","pickerButtonStyleVariant","rows","firstRowContainer","languageLabelContainer","languageLabel","levelPicker","setLanguageLevel","deleteIconContainer","removeRow","deleteIcon","languageCodes","setLanguages","allInterests","updateValues","interest","interestId","StudentBlob","StudentSvg","StaffBlob","StaffSvg","buttonsContainer","OnboardingOfferScreen1","Discover","OnboardingOfferScreen2","Collaborate","OnboardingOfferScreen3","Meet","DegreeToggle","onUpdate","studentThemedStyles","StudentIllustration","staffThemedStyles","buttonIcon","buttonText","thumbColor","trackColor","true","false","StaffIllustration","studentRender","staffRender","TOSDeclinedModal","TextLink","textProps","OnboardingLegalSlide","specialBackground","LinearGradient","legalText","readMoreText","actionsWrapper","actionButtonDecline","actionButtonAccept","shadowOffset","shadowOpacity","shadowRadius","ONBOARDING_SCREENS","OnboardingStack","ComponentClass","tabBarOptions","showIcon","springConfig","stiffness","damping","mass","lazy","lazyPreloadDistance","BackgroundSvg","ForegroundSvg","gradient","locations","end","wideDeviceIcon","ResetPasswordFormSchema","ResetPasswordForm","pwdRepeatRef","AvatarEditButton","ensurePermission","showPicker","ImagePicker","mediaTypes","Images","allowsEditing","aspect","quality","result","cancelled","onPictureSelected","ValueCard","renderModalContent","renderInput","oneLine","modalLabel","modalErrorText","modalButtonsContainer","modalButton","setModal","modalOpen","initialValue","validate","validator","validateSync","setError","overrideModal","noModal","locked","blank","onModalShown","cardWrapper","cardLabelContainer","cardLabel","rightIconContainer","modalContent","EnlargeableAvatar","enlarged","showEnlarged","hideEnlarged","enlargedAvatarContainer","enlargedAvatar","WavyHeader","headerWidth","waveTop","wavePatternIndex","Spacer","EditProfileForm","birthDateInputRef","rootScroll","overScrollMode","imageInfo","mimeType","SET_AVATAR_FAILURE","fileName","s3Url","blob","imageBlob","response2","payload2","universityContainer","loadingIndicator","cardText","_error","birthdateInputContainer","birthdateInput","inputError","onFieldChanged","cc","staffRoleButton","OfferCategoryRow","onApply","offerVal","updatedVal","avatarAccessory","PROFILE_SET_FIELDS_FAILURE","setProfileFields","FormattedGender","ProfileView","actionBar","UnmatchProfileModal","matchId","blockTouchable","ActionButton","buttonTop","buttonTopBlank","buttonTopIcon","isMatched","buttonBlock","buttonReport","buttonChat","buttonMute","buttonUnmatch","getRouteParams","profileWithMatchInfo","fetchProfile","matchingId","LocalePicker","COOKIES_PREFERENCES_KEYS","CustomizeCookiesModal","storeCookies","localCookies","cookieDict","toggleCookie","preferenceRow","preferenceRowButton","checkBoxContainer","preferenceName","preferenceDescription","versionClickCount","card","cardIcon","localeButton","localButtonValue","cardButtonText","oneLineCardButton","max","fromEmail","Version","subject","cardButton","logosContainer","resizeMode","logo","logoSeaEuAround","logoErasmus","Section","sectionTitleContainer","sectionIcon","DeleteAccountFormSchema","DeleteAccountForm","warningIcon","previousRoute","prePreviousRoute","savedNavigationState","onStateChange","toChat","fromChat","handleRouteChangeForChat","onReady","initialRoute","reactNavigationTheme","DarkTheme","DefaultTheme","NavigationContainer","linking","LinkingConfiguration","BackHandler","toAuthRoute","screenOptions","MainNavigator","OnboardingNavigator","currentTheme","ThemedStatusBar","override","getThemeOverride","previousThemeOverride","defaultStyle","StatusBar","CookieBanner","showCustomize","modalView","cookieText","registerRootComponent","platform","web","secondary","grey","searchBg","isLoadingComplete","setLoadingComplete","SplashScreen","cacheIsGood","Font","font","Raleway","require","RalewayThin","RalewayLight","RalewaySemiBold","RalewayBold","credentials","loadResourcesAndDataAsync","useCachedResources","fallbacks","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","notification","notifs","identifier","importance","MAX","vibrationPattern","lightColor","navigationReady","setNavigationReady"],"mappings":"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AC3BC,oBAAqB,uBACrBC,oBAAqB,6BACrBC,2BAA4B,0BAC5BC,2BAA4B,yBAC5BC,eAAgB,mBAChBC,8BAA+B,0BAGnCvmB,SAAU,CACNwmB,SAAU,CACN5nB,QAAS,gBACT6nB,OAAQ,kBACRC,MAAO,eAEXzd,SAAU,SACV0d,UAAW,kBACXrE,cAAe,wBACfsE,gBAAiB,uBACjBtyB,QAAS,UACTuyB,eAAgB,2BAChBC,WAAY,kBACZjgB,OAAQ,iBACRkgB,iBAAkB,+BCvvDjBE,GAAuC,CAAC,KAAM,MAEpD,SAASC,KAEZ,MAAe,OADHC,KAAoBC,OAAO,EAAG,GACpB,KAAO,KCR1B,IAAMC,GAA4B,CACrC,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,M,qkBC7KJ,SAASC,GAA0BvnB,GAC/B,IAAMwnB,EAAOC,GACP3X,EAAiB0X,EAAKxnB,GAAQ8P,eAAiB0X,EAAI,GAAO1X,cAChE,OAAOwX,GAAgB3xB,KAAI,SAAC6I,GAAD,MAAmB,CAC1CkpB,MAAO5X,EAActR,IAAd,wBAA+CA,EAA/C,IACPmpB,MAAOnpB,MAIR,IAAMoF,GAA8B,CACvC1D,aAAc,CACVsC,MAAO,QACPxC,OAAQmnB,KACRlG,QAAS,CACL3jB,MAAM,EACN+jB,OAAO,EACPphB,UAAU,GAEd2nB,kBAAmB,MAEvBC,gBAAiB,KACjBC,eAAe,EACfC,uBAAwBR,GAA0BJ,O,qkBCrB/C,ICoFKa,GDpFCpkB,GAA6B,CACtClI,KAAM,KACNzD,OAAQ,GACRgwB,kBAAmB,IAAIC,IACvB/uB,UAAW,K,SCgFH6uB,K,oBAAAA,E,0BAAAA,E,aAAAA,Q,KA+BL,IA+DKG,GA/DCC,GAAiB,SAAClwB,GAA6C,IAAhCmwB,EAA+B,wDACjEC,EAAYD,GAAOnwB,EAAEqwB,kBACrBC,EAAUH,GAAOnwB,EAAEuwB,uBACzB,MAAO,CACHC,QAASxwB,EAAEe,GACXd,YAAamwB,EACblwB,UAAWkwB,EACXjwB,WAAYiwB,EACZ/vB,aAAciwB,EACdlwB,WAAYkwB,K,SAsDRL,K,oBAAAA,E,kBAAAA,E,kBAAAA,E,uBAAAA,Q,KAML,ICvLKQ,GDuLCC,GAAqD,CAC9DT,GAAkBU,SAClBV,GAAkBW,QAClBX,GAAkBY,W,+kBC1LVJ,K,mCAAAA,E,6CAAAA,E,qDAAAA,E,yDAAAA,E,yDAAAA,E,yDAAAA,E,qDAAAA,E,2DAAAA,E,uDAAAA,E,yDAAAA,E,6DAAAA,E,6DAAAA,E,mDAAAA,E,uDAAAA,E,uDAAAA,E,uDAAAA,E,uDAAAA,E,uDAAAA,E,oDAAAA,Q,KA+IL,IA4EDK,GAAuB,iBAAmC,CAC5DvvB,KAAMkvB,GAAsBM,yBAG1BC,GAAuB,SAAC3uB,EAAyBiB,GAA1B,MAAiF,CAC1G/B,KAAMkvB,GAAsBQ,uBAC5B5uB,WACAiB,iBAGS4tB,GAAyB,iBAAmC,CACrE3vB,KAAMkvB,GAAsBU,yBAG1BC,GAAqB,SACvBtvB,EACAuvB,EACAC,GAHuB,MAIK,CAC5B/vB,KAAMkvB,GAAsBc,qBAC5BzvB,UACAuvB,cACAC,WAGSE,GAAc,SAAC1vB,GAAD,OAA4E,SACnGmD,EACAC,GAFmG,yBAAA/G,EAAAC,OAAA,uDAI7F+G,EAAQD,IAAWE,KAAKD,MAJqE,WAAAhH,EAAA,MAK5EF,EAAe,gBAAiB,OAAQ,GAAI,CAACwzB,YAAa3vB,EAAQf,IAAKoE,GAAO,IALF,WAK7F/F,EAL6F,QAMtFJ,SAAWhD,EAAeyK,GAN4D,uBAOzFnB,EAAWlG,EAAuCM,KACjDV,GARwF,EAQtEsG,GAAlBtG,OAAQsyB,EARgF,EAQhFA,OACfrsB,EAASmsB,GAAmBtvB,EAAS9C,EAAQsyB,IATkD,kBAUxF,CAACtyB,SAAQsyB,WAV+E,gCAY5F,MAZ4F,+DAejGI,GAAwB,SAAC5vB,GAAD,MAAwD,CAClFP,KAAMkvB,GAAsBkB,wBAC5B7vB,YASE8vB,GAAsB,SAACC,GAAD,MAAmD,CAC3EtwB,KAAMkvB,GAAsBqB,sBAC5BD,cAGSE,GAAe,SAACF,GAAD,OAAiC,SAAO5sB,EAAUC,GAAjB,eAAA/G,EAAAC,OAAA,uDACnD+G,EAAQD,IAAWE,KAAKD,MAD2B,WAAAhH,EAAA,MAElCF,EAAe,iBAAkB,OAAQ,GAAI,CAACwzB,YAAaI,GAAY1sB,GAAO,IAF5C,cAG5CnG,SAAWhD,EAAeyK,IAAIxB,EAAS2sB,GAAoBC,IAHf,8DA6CvDG,GAAsB,SAACC,EAA2B3uB,GAA5B,MAAkF,CAC1G/B,KAAMkvB,GAAsByB,sBAC5BD,QACA3uB,iBAGS6uB,GAAwB,iBAAkC,CACnE5wB,KAAMkvB,GAAsB2B,wBAwC1BC,GAAsB,SAACC,GAAD,MAAuD,CAC/E/wB,KAAMkvB,GAAsB8B,sBAC5BD,kBAGEE,GAAsB,SAACF,EAAuBG,GAAxB,MAAyE,CACjGlxB,KAAMkvB,GAAsBiC,sBAC5BJ,gBACAG,YAGSE,GAAoB,SAACL,GAAD,IAAwBG,EAAxB,+DAAwE,SACrGxtB,EACAC,GAFqG,eAAA/G,EAAAC,OAAA,uDAI/F+G,EAAQD,IAAWE,KAAKD,MAJuE,WAAAhH,EAAA,MAK9EF,EACnB,kBACA,OACA,GACA,CAAC20B,iBAAkBN,GACnBntB,GACA,IAXiG,iBAcxFnG,SAAWhD,EAAeyK,GAd8D,uBAejGxB,EAASutB,GAAoBF,EAAeG,IAfqD,mBAgB1F,GAhB0F,cAkBjGxtB,EAASotB,GAAoBC,IAlBoE,mBAmB1F,GAnB0F,+D,qkBCtXlG,IAgBM5mB,GAA8B,CACvCmnB,QAjB+D,CAC/D9yB,OAAQ,GACRqW,aAAc,GACdpC,QAAS,GACT7S,UAAW,GACXL,gBAAiB,GACjBW,WAAY,GACZkoB,MAAO,IAWPmJ,gBAAiB,GACjBC,mBpBdwD,CAAC1vB,KAAM,EAAGC,cAAc,EAAMC,UAAU,GoBehGyvB,kBpBfwD,CAAC3vB,KAAM,EAAGC,cAAc,EAAMC,UAAU,GoBgBhG0vB,eAX0B,WAC1B,IAAMJ,EAAoC,GAE1C,OADAnC,GAA8B5pB,SAAQ,SAACosB,GAAD,OAAQL,EAAQK,IAAK,KACpDL,EAQSM,GAChBC,aAAc,GACdC,UAAW,GACXC,mBAAmB,G,goBCvCvB,ICWYC,GDXNC,GAAqB32B,EAAN,QA2MN,O,WAtLX,aAAe,aACX42B,KAAKC,OAAS,KACdD,KAAKE,iBAAmB,GACxBF,KAAKG,eAAiB,KACtBH,KAAKI,sBAAuB,EAC5BJ,KAAKK,yBAA2B,KAChCL,KAAKM,eAAiB,K,6DAGMC,GAC5BP,KAAKE,iBAAiB7sB,SAAQ,SAACmtB,GAAD,OAAOA,EAAED,MACvCP,KAAKE,iBAAmB,K,wCAGFO,GAA4C,IAAD,OAC5DT,KAAKC,SAEVD,KAAKC,OAAOS,GAAG,WAAW,WACtB,EAAK90B,IAAI,aACL,EAAK00B,gBAAgBK,aAAa,EAAKL,gBAC3C,EAAKA,eAAiB,KACtB,EAAKM,yBAAwB,MAEjCZ,KAAKC,OAAOS,GAAG,SAAS,WACpB,EAAK90B,IAAI,SACL,EAAK00B,gBAAgBK,aAAa,EAAKL,gBAC3C,EAAKA,eAAiB,KACtB,EAAKM,yBAAwB,MAEjCZ,KAAKC,OAAOS,GAAG,cAAc,WACzB,EAAK90B,IAAI,gBACL,EAAK00B,gBAAgBK,aAAa,EAAKL,gBAC3C,EAAKA,eAAiB,KACtB,EAAKM,yBAAwB,MAQjCZ,KAAKC,OAAOS,GAAG,kBAAkB,SAACG,GAAD,OAA+BJ,EAAUK,kBAAkBD,MAC5Fb,KAAKC,OAAOS,GAAG,eAAe,SAACG,GAAD,OAAmCJ,EAAUM,cAAcF,MACzFb,KAAKC,OAAOS,GAAG,aAAa,SAACG,GAAD,OAA+BJ,EAAUO,qBAAqBH,S,0BAGlFxxB,GACJpG,GAAYd,QAAQyD,IAAR,gBAA4ByD,K,2BAGnCA,EAAawC,GAAyB,IAAD,EAC9CmuB,KAAKp0B,IAAL,aAAmByD,EAAnB,gBAAsCxD,KAAKC,UAAU+F,IACrD,SAAAmuB,KAAKC,SAAL,EAAagB,KAAK5xB,EAAKwC,K,uCAGFqvB,EAAgBC,GACrCnB,KAAKI,qBAAuBe,EAC5BnB,KAAKK,yBAA2Ba,EAChClB,KAAKiB,KAAK,YAAa,CAACpD,OAAQqD,EAAK5zB,GAAI6zB,Y,4CAGfD,GAAuB,IAAD,OACpB,OAAxBlB,KAAKG,iBACLQ,aAAaX,KAAKG,gBAClBH,KAAKG,eAAiB,MAE1BH,KAAKG,eAAiBiB,YAAW,WAC7B,EAAKC,iBAAiBH,GAAM,KAtFZ,O,yCA0FLI,GACftB,KAAKE,iBAAiBqB,KAAKD,K,8BAI3Bv2B,GAIK,IAAD,OAHJ01B,EAGI,uDAH2C,GAC/Ca,EAEI,uCADJE,EACI,uDAjGe,EAqGfxB,KAAKyB,cACDH,GAAUA,GAAS,IAIvBA,GAAUtB,KAAK0B,mBAAmBJ,GAGlCtB,KAAK2B,iBAET3B,KAAKp0B,IAAI,iBAAmBm0B,IAExBC,KAAKC,OACLD,KAAKC,OAAO2B,WAKZ5B,KAAKp0B,IAAI,qCAAoCb,EAAUU,aACvDu0B,KAAKC,OAAS1X,KAAGwX,GAAiB,CAC9B8B,MAAO,CAACC,cAAe/2B,EAAUU,aAGjCs2B,cAAc,IAElB/B,KAAKgC,kBAAL,IACIjB,cAAe,aACfD,kBAAmB,aACnBE,qBAAsB,cACnBP,KAIPT,KAAKM,gBAAgBK,aAAaX,KAAKM,gBAG3CN,KAAKM,eAAiBc,YAAW,WAC7B,EAAKd,eAAiB,KAEjB,EAAKmB,gBAEFD,EAAQ,EAAG,EAAKI,QAAQ72B,EAAW01B,GAAW,cAAUe,EAAQ,GAE/D,EAAKZ,yBAAwB,MAjJ1B,S,+BAsJXM,GACLlB,KAAKiB,KAAK,WAAY,CAACpD,OAAQqD,EAAK5zB,KAEhC4zB,EAAK9xB,aAAa4wB,KAAKiC,YAAYf,EAAK5zB,GAAI4zB,EAAK9xB,YAAYN,IAAKoyB,EAAK9xB,YAAYY,UAAU1B,Y,gCAG3F4yB,GACNlB,KAAKiB,KAAK,YAAa,CAACpD,OAAQqD,EAAK5zB,O,kCAG7BuwB,EAAgBvwB,EAAY+V,GACpC2c,KAAKiB,KAAK,cAAe,CAACpD,SAAQvwB,KAAI+V,W,kCAG9Bwa,EAAgBqE,EAAmBlyB,GAC3CgwB,KAAKiB,KAAK,cAAe,CAACpD,SAAQqE,YAAW/xB,KAAMH,M,iCAG5CkxB,GAEPlB,KAAKmC,sBAAsBjB,IAGO,IAA9BlB,KAAKI,sBAAgCJ,KAAKqB,iBAAiBH,GAAM,K,mCAKjElB,KAAK2B,iBACD3B,KAAKM,gBAAgBK,aAAaX,KAAKM,gBAC3CN,KAAKM,eAAiB,KACtBN,KAAKY,yBAAwB,IAG7BZ,KAAKyB,gBACDzB,KAAKK,2BAA0D,IAA9BL,KAAKI,sBACtCJ,KAAKqB,iBAAiBrB,KAAKK,0BAA0B,GACrDL,KAAKC,QAAQD,KAAKC,OAAOmC,gB,oCAKjC,OAAuB,OAAhBpC,KAAKC,QAAmBD,KAAKC,OAAOoC,Y,qCAI3C,OAA+B,OAAxBrC,KAAKM,mB,gBC5LRR,K,4DAAAA,E,gEAAAA,E,gEAAAA,E,gEAAAA,E,wDAAAA,E,4DAAAA,E,4DAAAA,E,sDAAAA,E,sDAAAA,E,0DAAAA,E,0DAAAA,E,kCAAAA,E,sDAAAA,E,sDAAAA,E,4CAAAA,E,wDAAAA,E,sCAAAA,E,sEAAAA,E,0EAAAA,E,0EAAAA,E,8DAAAA,E,kEAAAA,E,mEAAAA,Q,KA2FZ,IAQMwC,GAAyB,SAACC,EAAmB1yB,GAApB,MAA6E,CACxG/B,KAAMgyB,GAAuB0C,0BAC7BD,QACA1yB,iBAGS4yB,GAAkB,SAAC7nB,GAAD,OAA+B,SAAOpJ,EAAUC,GAAjB,2BAAA/G,EAAAC,OAAA,mDACpDw2B,EAAQ1vB,IACRC,EAAQyvB,EAAMxvB,KAAKD,QACnBgxB,EAAavB,EAAMlK,UAAU0L,sBAEpB7yB,UAAa4yB,EAAW7yB,aALmB,wDAO1D2B,EArB4D,CAC5D1D,KAAMgyB,GAAuB8C,0BAa6B,WAAAl4B,EAAA,MASnCF,EACnB,QACA,MACA,CAACoF,KAAM8yB,EAAW9yB,KAAMizB,MzBzGC,GyByGyBjoB,UAClD,GACAlJ,IAdsD,QASpD/F,EAToD,QAiB7CJ,SAAWhD,EAAeyK,IAE7BuvB,GADAO,EAAYn3B,GACOM,KAA2BjC,IAAI0E,GAClDmB,EAAeizB,EAAUC,KAAKC,YAAcF,EAAUC,KAAKE,WACjEzxB,EAAS8wB,GAAuBC,EAAO1yB,KACpC2B,EAhCyD,CAChE1D,KAAMgyB,GAAuBoD,4BAS6B,+DAyCjDC,GAAgB,SAAC7B,GAAD,OAAuD,SAAO9vB,EAAUC,GAAjB,iBAAA/G,EAAAC,OAAA,gDAC1EI,EAAY0G,IAAWE,KAAKD,MAE5B0xB,EAAO,WACT5xB,EAZwD,CAC5D1D,KAAMgyB,GAAuBuD,0BAYrB/B,GAAUA,GAAS,IAGvBgC,GAAW7B,cACPH,GAAUA,GAAS,GAChBv2B,EACHu4B,GAAW3B,eACPL,GAAUgC,GAAW5B,mBAAmBJ,IAE5C9vB,EA1BgD,CACxD1D,KAAMgyB,GAAuByD,wBA0BrBD,GAAW1B,QACP72B,EACA,CACI+1B,kBAAmB,SAACD,GAAO,IAChB2C,EAAc/xB,IAAWwlB,UAAzBuM,WAEHA,GAAc3C,EAAEhD,QAAU2F,EAAWl2B,IACrCg2B,GAAWrB,YAAYuB,EAAWl2B,GAAIuzB,EAAEvzB,GAAIuzB,EAAE5wB,WAClDuB,EAASiyB,GAAmB5C,KAEhCE,cAAe,SAAClyB,GAAD,OAAO2C,EAASkyB,GAAgB70B,KAC/CmyB,qBAAsB,SAACH,GAAD,OAAOrvB,EAASmyB,GAAmB9C,OAE7D,SAAC+C,GACOA,GACApyB,EAlCwC,CAC5D1D,KAAMgyB,GAAuB+D,0BAkCLvC,GAAUA,GAAS,IACpB8B,QAIhBA,IApCyE,8DAuCvEU,GAAqB,WAE9B,OADAR,GAAWlB,aACJ,CAACt0B,KAAMgyB,GAAuBiE,uBAGnCC,GAAoB,SAAC9C,GAAD,MAA8C,CACpEpzB,KAAMgyB,GAAuBmE,qBAC7B/C,SAGEgD,GAAsB,SAAChD,GAAD,MAAgD,CACxEpzB,KAAMgyB,GAAuBqE,uBAC7BjD,SAGEkD,GAAsB,SAAClD,GAAD,MAAgD,CACxEpzB,KAAMgyB,GAAuBuE,uBAC7BnD,SAGSoD,GAAe,SAACpD,GAAD,OAA8B,SAAO1vB,GAAP,SAAA9G,EAAAC,OAAA,gDAClD24B,GAAW7B,eACXjwB,EAASwyB,GAAkB9C,IAC3BoC,GAAWiB,SAASrD,GACpB1vB,EAAS4yB,GAAoBlD,KAC1B1vB,EAAS0yB,GAAoBhD,IALkB,8DAiBpDsD,GAAyB,SAACC,GAAD,MAAyD,CACpF32B,KAAMgyB,GAAuB4E,qBAC7BD,YAGSE,GAAkB,SAACr3B,EAAY+V,EAAcrT,GAA3B,OAAyD,SAAOwB,EAAUC,GAAjB,qBAAA/G,EAAAC,OAAA,kDAKhF8G,IAAWwlB,UAHGoL,EAFkE,EAEhFuC,YAAcvC,UACdmB,EAHgF,EAGhFA,WACAqB,EAJgF,EAIhFA,cAGAxC,GAAamB,GAAcqB,GAQ3BrzB,EAASgzB,GAPwB,CAC7B11B,IAAKxB,EACL0C,YACAD,KAAM80B,EACNxhB,OACAyhB,MAAM,KAGVxB,GAAWyB,YAAYvB,EAAWl2B,GAAIA,EAAI+V,IACvC7R,EA1BqD,CAC5D1D,KAAMgyB,GAAuBkF,uBAQuD,8DAoB3EvB,GAAqB,SAACgB,GAAD,MAAgE,CAC9F32B,KAAMgyB,GAAuBmF,gBAC7BR,YAGEd,GAAqB,SAAC9xB,GAAD,MAAgE,CACvF/D,KAAMgyB,GAAuBoF,sBAC7BrzB,YAGE6xB,GAAkB,SAAC7xB,GAAD,MAAiE,CACrF/D,KAAMgyB,GAAuBqF,aAC7BtzB,YAGEuzB,GAA4B,SAAClE,GAAD,MAAsD,CACpFpzB,KAAMgyB,GAAuBuF,6BAC7BnE,SAGEoE,GAA8B,SAACpE,GAAD,MAAwD,CACxFpzB,KAAMgyB,GAAuByF,+BAC7BrE,SAGEsE,GAA8B,SAChCtE,EACAzxB,EACAI,GAHgC,MAIK,CACrC/B,KAAMgyB,GAAuB2F,+BAC7BvE,OACAzxB,WACAI,iBAGE61B,GAAwB,SAACxE,GAAD,MAAkD,CAC5EpzB,KAAMgyB,GAAuB6F,yBAC7BzE,SAGE0E,GAA0B,SAAC1E,GAAD,MAAoD,CAChFpzB,KAAMgyB,GAAuB+F,2BAC7B3E,SAGE4E,GAA0B,SAAC5E,EAAgBzxB,GAAjB,MAAiF,CAC7G3B,KAAMgyB,GAAuBiG,2BAC7B7E,OACAzxB,a,qkBCnSG,IAAMwI,GAA+B,CACxC+tB,WAAY,GACZC,kBAAmB,GACnBtD,qBvBCwD,CAAC/yB,KAAM,EAAGC,cAAc,EAAMC,UAAU,GuBAhG80B,YAAa,CAACvC,WAAW,EAAO6D,YAAY,GAC5C1C,WAAY,KACZqB,cAAe,KACfsB,qBAAqB,GAGzB,SAASC,GAAgB/3B,GACrB,MAAO,CACHS,IAAKT,EAAQf,GACbyB,KAASV,EAAQW,UAAb,IAA0BX,EAAQY,SACtC/B,OAAQmB,EAAQpB,WAAa,GAC7BkC,oBAAqB,KACrBD,kBAAmB,MA8N3B,SAASm3B,GAAWlF,EAAuBmF,EAAqBpF,GAC5D,IAAMsC,EAAarC,EAAMqC,YAAcrC,EAAMqC,WAAWl2B,IAAM4zB,EAAK5zB,GAAK4zB,EAAOC,EAAMqC,WAErF,GAAI8C,EAAY,CACZ,IAAMC,EAAapF,EAAM8E,kBAAkBp8B,QAAO,SAACyD,GAAD,OAAgBA,IAAO4zB,EAAK5zB,MAC9E,OAAO,SACA6zB,GADP,IAEI6E,WAAW,SAAK7E,EAAM6E,YAAZ,UAAyB9E,EAAK5zB,GAAK4zB,IAC7C+E,kBAAmB,CAAC/E,EAAK5zB,IAAIk5B,OAAOD,GACpC/C,eAGJ,OAAO,SACArC,GADP,IAEI6E,WAAW,SAAK7E,EAAM6E,YAAZ,UAAyB9E,EAAK5zB,GAAK4zB,IAC7CsC,eC/QL,IAAMvrB,GAAmC,GCAnCA,GAA6B,GCA7BA,GAA4B,CACrCyqB,W1BqBwD,CAAC9yB,KAAM,EAAGC,cAAc,EAAMC,UAAU,I,mB2BjBvF22B,GAAoBC,cAK1B,SAASC,GAAaC,EAAuB/7B,GAA6B,IAAD,EAC5E,SAAA47B,GAAkBI,UAAlB,EAA2BC,SAASF,EAAiB/7B,GAGlD,SAASk8B,GAAaC,GACzB,IAAMC,EAAMR,GAAkBI,QAC1BI,IACIA,EAAIC,YAAaD,EAAIE,SAChBH,GAAUC,EAAIH,SAASE,IAyBjC,SAASI,GAAYR,GACxB,OAAOn0B,KAAKC,EAAL,gBAAuBk0B,GAAWn0B,KAAKC,EAAE,uBAG7C,SAAS20B,GAAYT,GACxB,OAAOn0B,KAAKC,EAAL,gBAAuBk0B,GAG3B,SAASU,GAASzJ,GACrB8I,GAAa,eAAgB,CAACY,OAAQ,aAAc18B,OAAQ,CAACgzB,YCrD1D,IAAM2J,GAAgD,CACzD,2BACA,uBACA,+BACA,yBACA,yBACA,yBACA,uBACA,2BAIA,0BACA,0BACA,2BCiEG,SAASC,GAA0BtwB,GAEtC,MAAoB,QAAhBuwB,KAASC,IACU,OAAhBxwB,IAAyB/J,KAAKw6B,MAAQzwB,EAAY0wB,WAAa,IhCtCnC,QiCvChC,ICHKC,G,oBCCL,SAASC,KACZ,OAAOt/B,IAAUu/B,UAA4B,QAAhBN,KAASC,GAGnC,SAASM,GAAoBC,GAChC,OAAOA,EAAMC,QAAQC,QAAQn8B,M,SDNrB67B,K,8DAAAA,E,2DAAAA,Q,KAeL,IAQDO,GAAmC,iBAA0C,CAC/Ev6B,KAAMg6B,GAA2BQ,yBAW/BC,GAAiC,iBAA6C,CAChFz6B,KAAMg6B,GAA2BU,uBExB/BC,GAAcC,aAAgB,CAChC/2B,KvByBuB,WAAqE,IAApEwvB,EAAmE,uDAAhDlpB,GAAc4c,EAAkC,uCAC3F,OAAQA,EAAO/mB,MACX,KAAKmD,EAAkBkD,eAAiB,IAAD,EACE0gB,EAA9BlhB,EAD4B,EAC5BA,MACP,OAAO,SACAwtB,GADP,IAEI/oB,cAAezE,IAGvB,KAAK1C,EAAkB0D,iBAAmB,IAAD,EAGVkgB,EAHU,IAEjC9kB,KAAO44B,EAF0B,EAE1BA,kBAAmBpwB,EAFO,EAEPA,UAE9B,OAAO,SACA4oB,GADP,IAEIwH,oBACApwB,cAGR,KAAKtH,EAAkB4E,yBAA2B,IAAD,EACCgf,EAAvClhB,EADsC,EACtCA,MACP,OAAO,SAAIwtB,GAAX,IAAkBhpB,WAAW,EAAME,eAAgB1E,IAEvD,KAAK1C,EAAkB6E,yBACnB,OAAO,SAAIqrB,GAAX,IAAkBhpB,WAAW,IAEjC,KAAKlH,EAAkB8D,eAAiB,IAAD,EAIX8f,EAFpBnjB,EAF+B,EAE/BA,MAF+B,IAG/B3B,KAAOwI,EAHwB,EAGxBA,UAAW5E,EAHa,EAGbA,MAIhB6E,EAAU,MAAO2oB,EAAM3oB,YAC7B,IAAKD,EAAW,CACZ,IAAMqwB,EAAQnxB,GAAsB9D,GAChCi1B,IACApwB,EAAWT,UAAY6wB,EAAM7wB,UAC7BS,EAAWR,SAAW4wB,EAAM5wB,UAIpC,OAAO,SACAmpB,GADP,IAEIjpB,eAAe,EACfI,sBAAsB,EACtB5G,QACA6G,YACAC,eAGR,KAAKvH,EAAkBiE,eAAiB,IAAD,EACX2f,EAAjB5f,EAD4B,EAC5BA,cACP,OAAO,SACAksB,GADP,IAEI7oB,qBAAsBrD,IAG9B,KAAKhE,EAAkB43B,sBACnB,OAAO,SAAI1H,GAAX,IAAkB7oB,sBAAsB,IAE5C,KAAKrH,EAAkBuE,QACnB,OAAO,SACA2rB,GADP,IAEIzvB,MAAO,KACPwG,eAAe,EACfI,sBAAsB,EACtBH,WAAW,EACXE,eAAgB,KAChBE,WAAW,IAGnB,KAAKtH,EAAkBuF,iBACnB,OAAO,SAAI2qB,GAAX,IAAkBtoB,gBAAiB,IAEvC,KAAK5H,EAAkB63B,0BACnB,OAAO,SAAI3H,GAAX,IAAkBtoB,gBAAiBsoB,EAAMtoB,gBAAkB,IAE/D,KAAK5H,EAAkB83B,sBACnB,OAAO,SAAI5H,GAAX,IAAkBtoB,gBAAiBsoB,EAAMtoB,gBAAkB,IAE/D,KAAK5H,EAAkB0F,sBAAwB,IAAD,EACEke,EAArCne,EADmC,EACnCA,OACP,OAAO,SAAIyqB,GAAX,IAAkB3oB,WAAW,SAAK2oB,EAAM3oB,YAAe9B,KAE3D,KAAKzF,EAAkB+3B,2BAA6B,IAAD,EACInU,EAA5CvnB,EADwC,EACxCA,GAAI0uB,EADoC,EACpCA,MACX,OAAO,SACAmF,GADP,IAEI3oB,WAAW,SACJ2oB,EAAM3oB,YADH,IAENG,YAAY,SACLwoB,EAAM3oB,WAAWG,aADb,UAENrL,EAAK0uB,QAKtB,KAAK5rB,EAAqBkB,uBACtB,OAAO,SAAI6vB,GAAX,IAAkB5oB,WAAW,EAAMC,WA9HQ,CACnDT,UAAW,GACXC,SAAU,GACV7K,UAAW,KACXsL,OAAQ,KACRC,YAAa,KACb5K,KAAM,KACNK,OAAQ,KACRH,WAAY,GACZN,UAAW,GACXiL,YAAa,GACbC,YAAa,GACbvL,gBAAiB,MAoHb,QACI,OAAO8zB,IuB9Hf7sB,SjBqB2B,WAAiF,IAAhF6sB,EAA+E,uDAAxDlpB,GAAc4c,EAA0C,uCAC3G,OAAQA,EAAO/mB,MACX,KAAKkG,GAAsBoD,yBAA2B,IAAD,EACdyd,EAA5B3d,EAD0C,EAC1CA,YAAaC,EAD6B,EAC7BA,YACpB,OAAO,SACAgqB,GADP,IAEI5sB,aAAa,SAAK4sB,EAAM5sB,cAAZ,IAA0B0nB,kBAAmB9kB,EAAame,QAASpe,MAGvF,KAAKlD,GAAsBsD,yBAA2B,IAAD,EAC3Bud,EAAf3d,EAD0C,EAC1CA,YACP,OAAO,SACAiqB,GADP,IAEI5sB,aAAa,SAAK4sB,EAAM5sB,cAAZ,IAA0B0nB,kBAAmB,IAAI7uB,KAAKA,KAAKw6B,OAAQtS,QAASpe,MAGhG,KAAKlD,GAAsB8C,UAAY,IAAD,EAClB+d,EAAThe,EAD2B,EAC3BA,MACP,OAAO,SAAIsqB,GAAX,IAAkB5sB,aAAa,SAAK4sB,EAAM5sB,cAAZ,IAA0BsC,YAE5D,KAAK7C,GAAsBi1B,aACvB,IAAMpyB,EAAoC,SAA5BsqB,EAAM5sB,aAAasC,MAAmB,OAAS,QAC7D,OAAO,SAAIsqB,GAAX,IAAkB5sB,aAAa,SAAK4sB,EAAM5sB,cAAZ,IAA0BsC,YAE5D,KAAK7C,GAAsBgD,WAAa,IAAD,EAClB6d,EAAVxgB,EAD4B,EAC5BA,OACP,OAAO,SACA8sB,GADP,IAEI/E,uBAAwBR,GAA0BvnB,GAClDE,aAAa,SAAK4sB,EAAM5sB,cAAZ,IAA0BF,aAG9C,KAAKL,GAAsBwD,kBAAoB,IAAD,EACxBqd,EAAXjsB,EADmC,EACnCA,QACP,OAAO,SACAu4B,GADP,IAEIjF,gBAAiBtzB,EACjBuzB,cAA2B,OAAZvzB,IAGvB,QACI,OAAOu4B,IiB7Df9yB,QhBG0B,WAGV,IAFhB8yB,EAEe,uDAFOlpB,GACtB4c,EACe,uCACf,OAAQA,EAAO/mB,MACX,KAAKmD,EAAkB8D,eAAiB,IAAD,EACpB8f,EAAR9kB,EAD4B,EAC5BA,KACP,OAAO,SAAIoxB,GAAX,IAAkBpxB,SAEtB,KAAKK,EAAqBgB,2BACtB,GAAI+vB,EAAMpxB,KAAM,CAAC,IAAD,EACK8kB,EAAV1jB,EADK,EACLA,OAEP,OADIA,EAAO5D,gBAAe4D,EAAO5D,cAAgBlB,EAAuB8E,EAAO5D,gBACxE,SACA4zB,GADP,IAEIpxB,KAAK,SAAKoxB,EAAMpxB,MAAZ,IAAkB1B,QAAS8yB,EAAMpxB,KAAK1B,QAAX,SAAyB8yB,EAAMpxB,KAAK1B,SAAY8C,QAAUpH,MAE1F,aAAWo3B,GAEtB,KAAK/wB,EAAqBkB,uBAAyB,IAAD,EAC5BujB,EAAXxmB,EADuC,EACvCA,QACP,OAAO8yB,EAAMpxB,KAAN,SAAiBoxB,GAAjB,IAAwBpxB,KAAK,SAAKoxB,EAAMpxB,MAAZ,IAAkB1B,cAAY8yB,EAErE,KAAK/wB,EAAqB4B,4BAA8B,IAAD,EAClC6iB,EAAVvoB,EAD4C,EAC5CA,OACDgwB,EAAoB,IAAIC,IAAIjwB,EAAOtC,KAAI,SAACuC,GAAD,MAAiB,CAACA,EAAEe,GAAIf,EAAE28B,cACvE,OAAO,SAAI/H,GAAX,IAAkB70B,SAAQgwB,sBAE9B,KAAKlsB,EAAqB8B,+BAAiC,IAAD,EAClC2iB,EAAbrnB,EAD+C,EAC/CA,UAGP,OADAA,EAAU27B,MAAK,SAACz+B,EAAG0+B,GAAJ,OAAW1+B,EAAE4C,GAAK87B,EAAE97B,GAAK,GAAK,KACtC,SAAI6zB,GAAX,IAAkB3zB,cAEtB,KAAK4C,EAAqBgC,mBAAqB,IAAD,EAC3ByiB,EAAR9kB,EADmC,EACnCA,KACP,OAAO,SAAIoxB,GAAX,IAAkBpxB,SAEtB,KAAKK,EAAqBi5B,mBAAqB,IAAD,EACtBxU,EAAb5nB,EADmC,EACnCA,UACP,OAAmB,OAAfk0B,EAAMpxB,KAAsB,MAAIoxB,GAEzB,SACAA,GADP,IAEIpxB,KAAK,SAAKoxB,EAAMpxB,MAAZ,IAAkB1B,QAAS8yB,EAAMpxB,KAAK1B,QAAX,SAAyB8yB,EAAMpxB,KAAK1B,SAApC,IAA6CpB,mBAAalD,MAIrG,KAAKkH,EAAkBuE,QACnB,OAAO,SAAI2rB,GAAX,IAAkBpxB,KAAM,OAE5B,QACI,OAAOoxB,IgBtDf9J,Sb2B2B,WAAiF,IAAhF8J,EAA+E,uDAAxDlpB,GAAc4c,EAA0C,uCAC3G,OAAQA,EAAO/mB,MACX,KAAKkvB,GAAsBsM,iBAAmB,IAAD,EACMzU,EAAxCkI,EADkC,EAClCA,QAASf,EADyB,EACzBA,MAChB,OAAO,SACAmF,GADP,IAEI/B,QAAQ,SACD+B,EAAM/B,SADN,IAEH9yB,OAAO,SAAK60B,EAAM/B,QAAQ9yB,QAApB,UAA6BywB,EAAUf,QAIzD,KAAKgB,GAAsBuM,YAAc,IAAD,EACQ1U,EAArCuK,EAD6B,EAC7BA,QACP,OAAO,SACA+B,GADP,IAEI/B,QAAQ,SAAK+B,EAAM/B,SAAYA,KAGvC,KAAKpC,GAAsBwM,qBACvB,OAAO,SAAIrI,GAAX,IAAkB7B,mBAAmB,SAAK6B,EAAM7B,oBAAZ,IAAgCxvB,UAAU,MAElF,KAAKktB,GAAsBM,uBACvB,OAAO,SAAI6D,GAAX,IAAkB7B,mBAAmB,SAAK6B,EAAM7B,oBAAZ,IAAgCxvB,UAAU,EAAOD,cAAc,MAEvG,KAAKmtB,GAAsBQ,uBAAyB,IAAD,EACc3I,EAAtDjmB,EADwC,EACxCA,SAAUiB,EAD8B,EAC9BA,aACX6yB,EAAavB,EAAM7B,mBACzB,OAAO,SACA6B,GADP,IAEI9B,gBAAiB8B,EAAM9B,gBAAgBmH,OAAO53B,GAC9C0wB,mBAAmB,SAAKoD,GAAN,IAAkB5yB,UAAU,EAAOF,KAAM8yB,EAAW9yB,KAAO,EAAGC,mBAGxF,KAAKmtB,GAAsBU,uBACvB,OAAO,SACAyD,GADP,IAEI9B,gBAAiB,GACjBC,mBpB5D4C,CAAC1vB,KAAM,EAAGC,cAAc,EAAMC,UAAU,KoB+D5F,KAAKktB,GAAsByM,uBACvB,OAAO,SAAItI,GAAX,IAAkBtB,mBAAmB,IAEzC,KAAK7C,GAAsB0M,yBACvB,OAAO,SAAIvI,GAAX,IAAkBtB,mBAAmB,IAEzC,KAAK7C,GAAsB2M,yBAA2B,IAAD,EACD9U,EAAzCjmB,EAD0C,EAC1CA,SACP,OAAO,SACAuyB,GADP,IAEIvB,UAAWhxB,EACXixB,mBAAmB,IAG3B,KAAK7C,GAAsBc,qBAAuB,IAAD,EACDjJ,EAArCxmB,EADsC,EACtCA,QACP,OAAO,SACA8yB,GADP,IAEI9B,gBAAiB8B,EAAM9B,gBAAgBx1B,QAAO,SAACgF,GAAD,OAAoBA,EAAEvB,IAAMe,EAAQf,QAG1F,KAAK0vB,GAAsBkB,wBAA0B,IAAD,EACDrJ,EAAxCxmB,EADyC,EACzCA,QACP,OAAO,SACA8yB,GADP,IAEI9B,gBAAiB8B,EAAM9B,gBAAgBx1B,QAAO,SAACgF,GAAD,OAAoBA,EAAEvB,IAAMe,EAAQf,QAG1F,KAAK0vB,GAAsBqB,sBAAwB,IAAD,EACCxJ,EAAxCuJ,EADuC,EACvCA,UACP,OAAO,SACA+C,GADP,IAEI9B,gBAAiB8B,EAAM9B,gBAAgBx1B,QAAO,SAACgF,GAAD,OAAoBA,EAAEvB,IAAM8wB,OAGlF,KAAKpB,GAAsB4M,oBACvB,OAAO,SAAIzI,GAAX,IAAkB5B,kBAAkB,SAAK4B,EAAM5B,mBAAZ,IAA+BzvB,UAAU,MAEhF,KAAKktB,GAAsB6M,sBACvB,OAAO,SAAI1I,GAAX,IAAkB5B,kBAAkB,SAAK4B,EAAM5B,mBAAZ,IAA+BzvB,UAAU,EAAOD,cAAc,MAErG,KAAKmtB,GAAsByB,sBAAwB,IAAD,EACW5J,EAAlD2J,EADuC,EACvCA,MAAO3uB,EADgC,EAChCA,aACR6yB,EAAavB,EAAM5B,kBACzB,OAAO,SACA4B,GADP,IAEIxB,aAAcwB,EAAMxB,aAAa6G,OAAOhI,GACxCe,kBAAkB,SAAKmD,GAAN,IAAkB5yB,UAAU,EAAOF,KAAM8yB,EAAW9yB,KAAO,EAAGC,mBAGvF,KAAKmtB,GAAsB2B,sBACvB,OAAO,SACAwC,GADP,IAEIxB,aAAc,GACdJ,kBpBrH4C,CAAC3vB,KAAM,EAAGC,cAAc,EAAMC,UAAU,KoBwH5F,KAAKktB,GAAsB8M,oBAAsB,IAAD,EAC1BjV,EAAXuK,EADqC,EACrCA,QACP,OAAO,SACA+B,GADP,IAEI3B,eAAe,SAAK2B,EAAM3B,gBAAmBJ,KAGrD,KAAKpC,GAAsBiC,sBAAwB,IAAD,EACtBpK,EAAjBgK,EADuC,EACvCA,cACP,OAAO,SACAsC,GADP,IAEIxB,aAAcwB,EAAMxB,aAAa91B,QAAO,SAAC4e,GAAD,OAA0BA,EAAGnb,KAAOuxB,OAGpF,KAAK5tB,EAAkBuE,QACnB,OAAO,SACA2rB,GADP,IAEI/B,QA9ImD,CAC/D9yB,OAAQ,GACRqW,aAAc,GACdpC,QAAS,GACT7S,UAAW,GACXL,gBAAiB,GACjBW,WAAY,GACZkoB,MAAO,IAwIKmJ,gBAAiB,GACjBC,mBpB3I4C,CAAC1vB,KAAM,EAAGC,cAAc,EAAMC,UAAU,GoB4IpF8vB,UAAW,GACXC,mBAAmB,EACnBF,aAAc,GACdJ,kBpB/I4C,CAAC3vB,KAAM,EAAGC,cAAc,EAAMC,UAAU,KoBkJ5F,QACI,OAAOqxB,IavJflK,UVoB4B,WAAoF,IAAnFkK,EAAkF,uDAA1DlpB,GAAc4c,EAA4C,uCAC/G,OAAQA,EAAO/mB,MACX,KAAKmD,EAAkB8D,eAAiB,IAAD,EACpB8f,EAAR9kB,EAD4B,EAC5BA,KACP,OAAOA,EAAK1B,QAAL,SAAmB8yB,GAAnB,IAA0B0D,cAAeuB,GAAgBr2B,EAAK1B,WAA9D,MAA8E8yB,GAEzF,KAAK/wB,EAAqBgC,mBAAqB,IAAD,EAC3ByiB,EAAR9kB,EADmC,EACnCA,KACP,OAAOA,EAAK1B,QAAL,SAAmB8yB,GAAnB,IAA0B0D,cAAeuB,GAAgBr2B,EAAK1B,WAA9D,MAA8E8yB,GAEzF,KAAK/wB,EAAqBkB,uBAAyB,IAAD,EAC5BujB,EAAXxmB,EADuC,EACvCA,QACP,OAAO,SAAI8yB,GAAX,IAAkB0D,cAAeuB,GAAgB/3B,KAErD,KAAKyxB,GAAuB8C,wBACxB,OAAO,SAAIzB,GAAX,IAAkBwB,qBAAqB,SAAKxB,EAAMwB,sBAAZ,IAAkC7yB,UAAU,MAEtF,KAAKgwB,GAAuBoD,0BACxB,OAAO,SACA/B,GADP,IAEIwB,qBAAqB,SAAKxB,EAAMwB,sBAAZ,IAAkC7yB,UAAU,EAAOD,cAAc,MAG7F,KAAKiwB,GAAuB0C,0BAA4B,IAAD,EACS3N,EAArD0N,EAD4C,EAC5CA,MAAO1yB,EADqC,EACrCA,aACR6yB,EAAavB,EAAMwB,qBACnBqD,EAAU,MAAO7E,EAAM6E,YAE7BzD,EAAMlvB,SAAQ,SAACpF,GACP+3B,EAAW/3B,EAAEX,IACb04B,EAAW/3B,EAAEX,IAAb,SAAuB04B,EAAW/3B,EAAEX,KAApC,IAAyC8B,YAAanB,EAAEmB,YAAaT,MAAOV,EAAEU,QAE9Eq3B,EAAW/3B,EAAEX,IAAMW,KAG3B,IAAM87B,EAAMxH,EAAMv4B,KAAI,SAACiE,GAAD,OAAiBA,EAAEX,MAEzC,OAAO,SACA6zB,GADP,IAEI6E,aACAC,kBAAuC,IAApBvD,EAAW9yB,KAAam6B,EAAM5I,EAAM8E,kBAAkBO,OAAOuD,GAChFpH,qBAAqB,SAAKD,GAAN,IAAkB5yB,UAAU,EAAOF,KAAM8yB,EAAW9yB,KAAO,EAAGC,mBAG1F,KAAKiwB,GAAuBkK,0BACxB,OAAO,SACA7I,GADP,IAGIwB,qBvBhE4C,CAAC/yB,KAAM,EAAGC,cAAc,EAAMC,UAAU,KuBmE5F,KAAKgwB,GAAuByD,sBACxB,OAAO,SAAIpC,GAAX,IAAkByD,YAAa,CAACvC,WAAW,EAAO6D,YAAY,KAElE,KAAKpG,GAAuBuD,wBACxB,OAAO,SAAIlC,GAAX,IAAkByD,YAAa,CAACvC,WAAW,EAAO6D,YAAY,KAElE,KAAKpG,GAAuB+D,wBACxB,OAAO,SAAI1C,GAAX,IAAkByD,YAAa,CAACvC,WAAW,EAAM6D,YAAY,KAEjE,KAAKpG,GAAuBiE,qBACxB,OAAO,SAAI5C,GAAX,IAAkByD,YAAa,CAACvC,WAAW,EAAO6D,YAAY,KAElE,KAAKpG,GAAuBmE,qBAAuB,IAAD,EAC/BpP,EAARqM,EADuC,EACvCA,KACP,OAAO,SAAIC,GAAX,IAAkBqC,WAAYtC,IAElC,KAAKpB,GAAuBqE,uBAG5B,KAAKrE,GAAuBmK,WACxB,OAAO,SAAI9I,GAAX,IAAkBqC,WAAY,OAElC,KAAK1D,GAAuB4E,qBAAuB,IAAD,EAC5B7P,EAAX4P,EADuC,EACvCA,QACP,OAAItD,EAAMqC,WACC6C,GAAWlF,GAAO,EAAR,GAAC,MACXA,EAAMqC,YADI,IAEb/zB,SAAU,CAACg1B,GAAS+B,OAAOrF,EAAMqC,WAAW/zB,UAC5CL,YAAaq1B,KAGdtD,EAEX,KAAKrB,GAAuBmF,gBAAkB,IAAD,EACvBpQ,EAAX4P,EADkC,EAClCA,QAEHvD,EAAOC,EAAM6E,WAAWvB,EAAQ5G,QACpC,GAAIqD,EAAM,CAGN,IAAMgJ,GAFNhJ,EAAI,MAAOA,IAEkBzxB,SAAS7B,MAAK,SAACizB,GAAD,OAAwBA,EAAE/xB,MAAQ21B,EAAQn3B,MACrF,GAAI48B,EAAiB,CACjB,IAAM76B,EAAG,SAAO66B,GAAP,IAAwBpF,MAAM,EAAMzhB,KAAMohB,EAAQphB,OAG3D6d,EAAKzxB,SAAWyxB,EAAKzxB,SAASzF,KAAI,SAAC62B,GAAD,OAAyBA,EAAE/xB,MAAQ21B,EAAQn3B,GAAK+B,EAAMwxB,OAGnFK,EAAK9xB,aAAeC,EAAIW,WAAakxB,EAAK9xB,YAAYY,aAAWkxB,EAAK9xB,YAAcC,OACtF,CACH,IAAMU,EAAOmxB,EAAKvyB,MAAMf,MAAK,SAACC,GAAD,OAAqBA,EAAEiB,KAAO21B,EAAQl1B,YACnE,GAAIQ,EAAM,CACN,IAAMV,EAAMG,EAAwBO,EAAM00B,GAC1CvD,EAAKzxB,SAAW,CAACJ,GAAKm3B,OAAOtF,EAAKzxB,UAClCyxB,EAAK9xB,YAAcC,EACnB6xB,EAAKxxB,QAAQ+0B,EAAQl1B,WAAY,GAGzC,OAAO82B,GAAWlF,GAAO,EAAMD,GAEnC,OAAOC,EAEX,KAAKrB,GAAuBoF,sBACxB,IAAMrzB,EAAWgjB,EAAoChjB,QAC9CusB,EAAqBvsB,EAArBusB,UAAWP,EAAUhsB,EAAVgsB,OAGlB,GAAIsD,EAAM0D,eAAiB1D,EAAM0D,cAAc/1B,MAAQsvB,EAAW,OAAO+C,EAEzE,IAAMD,EAAOC,EAAM6E,WAAWnI,GAC9B,OAAIqD,EACOmF,GAAWlF,GAAO,EAAR,GAAC,MACXD,GADU,IAEbxxB,QAAQ,SAAKwxB,EAAKxxB,SAAX,UAAqB0uB,EAAYvsB,EAAQsvB,WAGjDA,EAEX,KAAKrB,GAAuBqF,aAAe,IAAD,EACQtQ,EAAiChjB,QAAxEgsB,EAD+B,EAC/BA,OAAQ1tB,EADuB,EACvBA,KAAM+xB,EADiB,EACjBA,UAAW9D,EADM,EACNA,UAE1B8C,EAAOC,EAAM6E,WAAWnI,GAC9B,OAAIqD,EACOmF,GAAWlF,GAAO,EAAR,GAAC,MACXD,GADU,IAEbvyB,MAAOuyB,EAAKvyB,MAAM3E,KAAI,SAAC6D,GAAD,OAClBA,EAAEiB,KAAOsvB,EAAT,SACUvwB,GADV,IACasB,oBAAqB,IAAI/B,KAAK+C,GAAOjB,kBAAmBgzB,IAC/Dr0B,QAIXszB,EAEX,KAAKrB,GAAuBuF,6BAA+B,IAAD,EACvCxQ,EAARqM,EAD+C,EAC/CA,KACP,OAAOmF,GAAWlF,GAAO,EAAR,GAAC,MACXD,GADU,IAEbvxB,kBAAkB,SAAKuxB,EAAKvxB,mBAAX,IAA8BG,UAAU,OAGjE,KAAKgwB,GAAuByF,+BAAiC,IAAD,EACzC1Q,EAARqM,EADiD,EACjDA,KACP,OAAOmF,GAAWlF,GAAO,EAAR,GAAC,MACXD,GADU,IAEbvxB,kBAAkB,SAAKuxB,EAAKvxB,mBAAX,IAA8BG,UAAU,EAAOD,cAAc,OAGtF,KAAKiwB,GAAuB2F,+BAAiC,IAAD,EACjB5Q,EAAhCqM,EADiD,EACjDA,KAAMzxB,EAD2C,EAC3CA,SAAUI,EADiC,EACjCA,aACjB6yB,EAAaxB,EAAKvxB,kBACxB,OAAO02B,GAAWlF,GAAO,EAAR,GAAC,MACXD,GADU,IAEbzxB,SAAUyxB,EAAKzxB,SAAS+2B,OAAO/2B,GAC/BE,kBAAkB,SAAK+yB,GAAN,IAAkB5yB,UAAU,EAAOF,KAAM8yB,EAAW9yB,KAAO,EAAGC,oBAGvF,KAAKiwB,GAAuB6F,yBACxB,OAAO,SACAxE,GADP,IAEIgF,qBAAqB,IAG7B,KAAKrG,GAAuB+F,2BACxB,OAAO,SACA1E,GADP,IAEIgF,qBAAqB,IAG7B,KAAKrG,GAAuBiG,2BAA6B,IAAD,EAC3BlR,EAAlBqM,EAD6C,EAC7CA,KAAMzxB,EADuC,EACvCA,SACP06B,EAAmB16B,EAAS5F,QAAO,SAACugC,GAAD,OAASlJ,EAAKzxB,SAAS46B,MAAK,SAACC,GAAD,OAAQA,EAAGx7B,MAAQs7B,EAAGt7B,UACrFH,EAAQuyB,EAAKvyB,MAAM63B,SAGzB,GAAI2D,EAAiB5/B,OAAS,EAAG,CAC7B,IAAM6E,EAAc+6B,EAAiB,GAC/B18B,GAAIkB,EAAM47B,WAAU,SAAC18B,GAAD,OAAOA,EAAEiB,MAAQM,EAAYW,KAAKjB,OAC5DH,EAAMlB,IAAN,SACOkB,EAAMlB,KADb,IAEIyB,kBAAmBE,EAAYN,IAC/BK,oBAAqBC,EAAYY,YAIzC,OAAOq2B,GAAW,SAAIlF,GAAL,IAAYgF,qBAAqB,KAAQ,EAAzC,GAAC,MACXjF,GADU,IAEbzxB,SAAU06B,EAAiB3D,OAAOtF,EAAKzxB,UACvCd,SACIw7B,EAAiB5/B,OAAS,EAAI,CAAC6E,YAAa+6B,EAAiB,IAAM,KAG/E,KAAKl5B,EAAkBuE,QACnB,OAAO,SACA2rB,GADP,IAEIqC,WAAY,KACZwC,WAAY,GACZC,kBAAmB,GACnBtD,qBvBjO4C,CAAC/yB,KAAM,EAAGC,cAAc,EAAMC,UAAU,GuBkOpF+0B,cAAe,OAGvB,QACI,OAAO1D,IUzOfqJ,cTjBgC,WAGV,IAFtBrJ,EAEqB,uDAFOlpB,GAC5B4c,EACqB,uCAGb,OAFAA,EAAO/mB,KAEAqzB,GSYfsJ,QRlB0B,WAA6E,IAA5EtJ,EAA2E,uDAArDlpB,GAAc4c,EAAuC,uCAG9F,OAFAA,EAAO/mB,KAEAqzB,GQgBfuJ,OPjByB,WAA2E,IAA1EvJ,EAAyE,uDAApDlpB,GAAc4c,EAAsC,uCAG3F,OAFAA,EAAO/mB,KAEAqzB,KOiBbwJ,GAAqBC,aACvBC,MHrBgE,SAACC,GAAD,OAAW,SAACrnB,GAAD,OAA+B,SAC1GoR,GAEA,OAAQA,EAAO/mB,MAEX,KAAKkG,GAAsBsD,yBAEvB,GADiBud,EAAwC3d,YAC7CvF,KAAM,CAEd,IAAMD,EAAQo5B,EAAMr5B,WAAWE,KAAKD,MAC9B3B,EAAO+6B,EAAMr5B,WAAWpD,QAAQ0B,KAClC2B,GAAS3B,GAAM2D,GAAqB3D,EAAK4D,MAAOjC,QAGpDmC,KAEJ,MAGJ,KAAK5C,EAAkBuE,QACvB,KAAKvE,EAAkBiE,eACnBrB,KAnBP,MAwBoCi3B,EAAMr5B,WAAW6C,SAASC,aAAxD+gB,EAxBN,EAwBMA,QAEP,GAAImS,GA1BH,EAwBexL,mBAGZ,OAAQpH,EAAO/mB,MACX,KAAKmD,EAAkB8D,eAAiB,IAAD,EACW8f,EAAvCnjB,EAD4B,EAC5BA,MAAO3B,EADqB,EACrBA,MADqB,EACf+E,wBAEWwgB,EAAQ3jB,MAAM+B,GAAqB3D,EAAK4D,MAAOjC,GAM1F+R,EAAKoR,QDlC6D,SAACiW,GAAD,OAAW,SAACrnB,GAAD,OAA+B,SAC5GoR,GAGA,OAAQA,EAAO/mB,MACX,KAAKkG,GAAsBsD,yBACvB,IAAMyzB,EAAaD,EAAMr5B,WAAW6C,SAASC,aAAa+gB,QACpDA,EAAWT,EAAwC3d,YAGzD,IAAK6zB,EAAWrV,OAASJ,EAAQI,MAAO,CAAC,IAAD,EACRoV,EAAMr5B,WAAWpD,QAAtC/B,EAD6B,EAC7BA,OACP+D,EAAgB,YAFoB,EACrB7C,UACyB8nB,EAAQI,OAChDrlB,EAAgB,SAAU/D,EAAQgpB,EAAQI,OAE9C,IAAKqV,EAAWz2B,UAAYghB,EAAQhhB,SAAU,CAAC,IAAD,EAClBw2B,EAAMr5B,WAAW6C,SAASC,aAA3CF,EADmC,EACnCA,OAAQwC,EAD2B,EAC3BA,MACfxG,EAAgB,SAAUgE,EAAQihB,EAAQhhB,UAC1CjE,EAAgB,QAASwG,EAAOye,EAAQhhB,UAIxCy2B,EAAWrV,QAAUJ,EAAQI,OAAOhlB,EAAgB,YAAa,UACjEq6B,EAAWz2B,WAAaghB,EAAQhhB,UAAU5D,EAAgB,SAAU,SAGxEL,EAAgB,UAAWilB,GAAS,GACpCjlB,EAAgB,oBAAqB,IAAIjD,KAAKA,KAAKw6B,OAAOt5B,UAAU,GAzB3E,MA+BoCw8B,EAAMr5B,WAAW6C,SAASC,aAAxD+gB,EA/BN,EA+BMA,QAGP,GAAImS,GAlCH,EA+BexL,mBAIZ,OAAQpH,EAAO/mB,MACX,KAAKsC,EAAqB8B,+BAAiC,IAAD,EACvB2iB,EAAxBrnB,EAD+C,EAC/CA,UAD+C,EACpCuE,WACF1B,EAAgB,YAAa7C,EAAW8nB,EAAQI,OAChE,MAEJ,KAAKtlB,EAAqB4B,4BAA8B,IAAD,EACvB6iB,EAArBvoB,EAD4C,EAC5CA,OAD4C,EACpCyF,WACC1B,EAAgB,SAAU/D,EAAQgpB,EAAQI,OAC1D,MAEJ,KAAK1hB,GAAsBgD,WAAa,IAAD,EACP6d,EAArBxgB,EAD4B,EAC5BA,OAD4B,EACpBtC,WACC1B,EAAgB,SAAUgE,EAAQihB,EAAQhhB,UAC1D,MAEJ,KAAKN,GAAsB8C,UAAY,IAAD,EACP+d,EAApBhe,EAD2B,EAC3BA,MAD2B,EACpB9E,WACE1B,EAAgB,QAASwG,EAAOye,EAAQhhB,UACxD,MAEJ,KAAKN,GAAsBi1B,aAEvB54B,EAAgB,QAAmB,SADnBy6B,EAAMr5B,WAAW6C,SAASC,aAAnCsC,MACqC,QAAU,OAAQye,EAAQhhB,UAMlFmP,EAAKoR,QKrE0D,SAACiW,GAAD,OAA8C,SAC7GrnB,GAD6G,OAE5G,SAACoR,GAKF,OAJI5rB,GAAYd,QAAQyD,IAAIipB,EAAO/mB,MAEnC2V,EAAKoR,GAEGA,EAAO/mB,MACX,KAAKsC,EAAqBkB,uBACtBq1B,GAAa,8BACb,MAEJ,KAAK11B,EAAkB8D,eACJ8f,EAAR9kB,KACEwI,UAAWouB,GAAa,cAC5BmE,EAAMt5B,SAAS+E,MACpB,MAEJ,KAAKtF,EAAkBuE,QACAqf,EAAZtf,UAEHoxB,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,kBAGzB,MAEJ,KAAKt2B,EAAkB0D,iBACnBgyB,GAAa,6BACb,MAEJ,KAAK11B,EAAkB4E,yBAGnB,MAEJ,KAAK5E,EAAkBuF,iBACnBmwB,GAAa,oBACb,MAEJ,KAAK11B,EAAkB63B,0BAIvB,KAAK73B,EAAkB83B,sBACnBpC,GAAaa,GAAiBsD,EAAMr5B,WAAWE,KAAKkH,kBACpD,MAEJ,KAAK5H,EAAkB+E,wBACnB2wB,GAAa,iCACb,MAEJ,KAAK11B,EAAkBmF,uBACnBuwB,GAAa,8BACb,MAEJ,KAAK11B,EAAkBqF,uBACnBqwB,GAAa,8BACb,MAEJ,KAAK3J,GAAsBiC,sBACLpK,EAAXmK,SAEM2H,GAAa,aAAc,CAACY,OAAQ,sBCnES,SAACuD,GAAD,OAA8C,SAChHrnB,GADgH,OAE/G,SAACoR,GACF,OAAQA,EAAO/mB,MACX,KAAKmD,EAAkB8D,gBHGxB,4BAAArK,EAAAC,OAAA,mDACEo9B,KADF,yCACsC,MADtC,yBAAAr9B,EAAA,MAGiBsgC,KAAqBA,OAHtC,UAIY,aADXz/B,EAHD,OAGkEA,QAHlE,kCAAAb,EAAA,MAIuCsgC,KAAqBA,OAJ5D,OAIuBz/B,EAJvB,OAIwFA,OAJxF,UAMY,YAAXA,EAND,oCAAAb,EAAA,MAOsBugC,4BAPtB,eAOOv5B,EAPP,OAO6DzF,KAP7D,kBAQQyF,GARR,iCAWQ,MAXR,8DGDKw5B,GAA8BnjC,MAAK,SAACojC,GAGd,OAAdA,GAAqBL,EAAMt5B,SJIN,SAAC25B,GAAD,OAAiC,SAAO35B,EAAUC,GAAjB,eAAA/G,EAAAC,OAAA,uDAChE+G,EAAQD,IAAWE,KAAKD,MADwC,WAAAhH,EAAA,MAE/CF,EAAe,sBAAuB,OAAQ,GAAI,CAACkH,MAAOy5B,GAAYz5B,GAAO,IAF9B,cAGzDnG,SAAWhD,EAAe2D,YACnCsF,EAAS62B,MAJyD,6DIJE+C,CAA0BD,OAE1F,MAEJ,KAAKl6B,EAAkBuE,QAElBs1B,EAAMt5B,UJUoC,SAAOA,EAAUC,GAAjB,eAAA/G,EAAAC,OAAA,uDAC7C+G,EAAQD,IAAWE,KAAKD,MADqB,WAAAhH,EAAA,MAE5BF,EAAe,sBAAuB,SAAU,GAAI,GAAIkH,GAAO,IAFnC,cAGtCnG,SAAWhD,EAAe2D,YACnCsF,EAAS+2B,MAJsC,+DINnD9kB,EAAKoR,QCpByD,SAACiW,GAAD,OAA8C,SAC5GrnB,GAD4G,OAE3G,SAACoR,GAGF,OAFApR,EAAKoR,GAEGA,EAAO/mB,MACX,KAAKmD,EAAkB8D,eAClB+1B,EAAMt5B,SAA6BixB,YHwBjC4I,gBAAY5C,GAAakC,I,qkBInBxC,IAAIW,QAAsCvhC,E,oKCfpCwhC,GAAQC,KAAWC,IAAI,UAAUF,MACjCG,GAASF,KAAWC,IAAI,UAAUC,OAEzB,IACXhkC,OAAQ,CACJ6jC,SACAG,WAEJC,cAAeJ,GAAQ,IACvBK,aAAcL,IAASG,GAAS,GAAK,KCN1B,IACXG,MAAO,CACHv+B,GAAI,QACJ+V,KANe,OAOfyoB,UANc,OAOdC,UARe,OASfC,UAAW,OACXC,aAAc,OACdC,WAAY,OACZC,eAAgB,UAChBC,OAAQ,UACRC,aAAc,UACdC,gBAAiB,UACjBC,cAAe,UACfrkC,MAAO,oBACPskC,cAAe,UACfC,KAAM,UACNC,KAAM,UACNC,gBAAiB,OACjBC,kBAAmB,UACnBC,qBAAsB,oBACtBC,WAAY,UACZC,iBAAkB,OAClBC,0BAA2B,UAC3BC,iCAAkC,WAEtCC,KAAM,CACF5/B,GAAI,OACJ+V,KA9Bc,OA+BdyoB,UA/Bc,OAgCdC,UAjCe,OAkCfC,UAAW,OACXC,aAAc,OACdC,WAAY,gBACZC,eAAgB,mBAChBC,OAAQ,UACRC,aAAc,UACdC,gBAAiB,UACjBC,cAAe,UACfrkC,MAAO,oBACPskC,cAAe,OACfC,KAAM,UACNC,KAAM,UACNC,gBAAiB,OACjBC,kBAAmB,UACnBC,qBAAsB,oBACtBC,WAAY,OACZC,iBAAkB,OAClBC,0BAA2B,UAC3BC,iCAAkC,YC5CnC,SAASE,GAAmCC,GAE/C,IAAMC,EAA6B,GAC7BC,EAAaC,GAAO3B,aAG1B,OAFAjiC,OAAO+M,OAAO82B,IAAQn6B,SAAQ,SAACwD,GAAD,OAAmBw2B,EAAOx2B,EAAMvJ,IAAM8/B,EAAUv2B,EAAOy2B,MAE9E,SAACz2B,GAAD,OAAkBw2B,EAAOx2B,EAAMvJ,K,+bCJpCmgC,G,yIACqB,IAAD,EAC4CzN,KAAK0N,MAA5D72B,EADW,EACXA,MAAO82B,EADI,EACJA,eAAgBC,EADZ,EACYA,aAAcC,EAD1B,EAC0BA,eACtCR,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOY,QAASL,IAC1B,gBAACG,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOa,UAAWP,EAAiB,CAACQ,cAAUpkC,GAAa,GAAI8jC,IACxE7N,KAAK0N,MAAMU,e,GARJ1H,aAetBoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBL,QAAS,CACLM,KAAM,EACNC,eAAgB,SAChBC,cAAe,MACfC,SAAU,UAEdR,UAAW,CACPK,KAAM,EACNI,WAAY,SACZR,SAAU,UAKPS,gBAAUnB,ICzCZoB,GACM,WAAfnH,KAASC,GAAkB,CAACmH,WAAY,mBAAqB,CAACC,WAAY,OAEjEC,GACM,WAAftH,KAASC,GAAkB,CAACmH,WAAY,oBAAsB,CAACC,WAAY,OAElEE,GACM,OAAfvH,KAASC,GAAc,CAACmH,WAAW,oDAAuD,GAEjFI,GAAwC,QAAhBxH,KAASC,GAAe,IAAM,IACtDwH,GAAqC,QAAhBzH,KAASC,GAAe,IAAM,IACnDyH,GAAuC,QAAhB1H,KAASC,GAAe,GAAK,G,u/BCC3D/M,G,yIACqB,IAAD,EACUoF,KAAK0N,MAA1B2B,EADW,EACXA,WAAYx4B,EADD,EACCA,MACbw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAACoB,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,yBACnC,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAO3qB,UAAWjQ,KAAKC,EAAE,4BACtC,gBAAC68B,GAAA,EAAD,CACIC,QAAS,WAAO,IAAD,EACwB1E,GAAMr5B,WAAWE,KAA7CuG,EADI,EACJA,cAAeK,EADX,EACWA,UAClBL,EACIK,EAAW82B,EAAWI,QAAQ,cAC7BJ,EAAWI,QAAQ,oBACrBJ,EAAWI,QAAQ,cAE9BzB,MAAOX,EAAOqC,MAEd,gBAACJ,GAAA,EAAD,CAAMtB,MAAOX,EAAOsC,UAAWl9B,KAAKC,EAAE,mC,GApBjCg0B,aA4BvBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNC,eAAgB,SAChBG,WAAY,SACZiB,QAAS,IAEbntB,MAAM,OACFotB,SAAU,IACPb,IAFF,IAGDc,UAAW,SACXC,MAAOl5B,EAAMwM,OAEjBX,SAAU,CACNmtB,SAAU,GACVG,UAAW,GACXD,MAAOl5B,EAAMwM,MAEjBqsB,KAAM,CACFO,gBAAiB,IAErBN,SAAU,CACNE,SAAU,GACVE,MAAO,gBAKJnB,gBAAUhU,I,gcCvDzB,IAAMsV,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDhpB,UAAWgpB,EAAMxvB,KAAKwG,cAOpBqiB,G,oJAEE,IAAMhpB,EAAWwuB,KAAK0N,MAAMl8B,SAGtBm3B,EAAoBmC,GAAMr5B,WAAWE,KAAKg3B,kBAChD,GAAI1/B,GAAcF,GAAeT,EAAY6nC,SAAWxH,EACpDn3B,EAASiE,GAAuBkzB,SAC7B,GAAI3I,KAAK0N,MAAM9G,MAAM/7B,OAAQ,CAEhC,IACO6G,EADQsuB,KAAK0N,MAAM9G,MAAM/7B,OACzB6G,MACHA,GAAOF,EAASiE,GAAuB/D,O,+BAI5B,IAAD,EACSsuB,KAAK0N,MAAzB72B,EADW,EACXA,MAAOsB,EADI,EACJA,UACRk1B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,YACd/1B,GACE,gCACI,gBAACm3B,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,+BACnC,gBAAC09B,GAAA,EAAD,CAAmBC,KAAK,QAAQN,MAAOl5B,EAAMy1B,mBAGpDn0B,GACG,gCACI,gBAACm3B,GAAA,EAAD,CAAMtB,MAAOX,EAAOiD,aACf79B,KAAKC,EAAE,2BAA2B,GACnC,gBAAC48B,GAAA,EAAD,CACIE,QAAS,kBjBjCtC,SAA8Be,EAAmBC,GACpD,IAAMxJ,EAAW,kBAAML,GAAa6J,IAEpC,GAAoB,QAAhB9I,KAASC,GAAc,CACvB,IAAM+H,EAAU7mC,EAAN,MAAsB0nC,EAChC7oC,OAAO+oC,SAAShB,QAAQC,GAGxBtO,YAAW,WACPj5B,QAAQyD,IAAR,yBAC6B8jC,EAD7B,2EAGA1I,M9BesB,U8BbvBA,IiBmBwC0J,CAAqB,QAAS,iBAC7C1C,MAAO,CAAC+B,MAAOl5B,EAAMu1B,SAEpB35B,KAAKC,EAAE,2BAA2B,Y,GArCrCg0B,aAgD5BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNhD,MAAO,MACPiD,eAAgB,SAChBG,WAAY,UAEhBlsB,MAAO,CACHotB,SAAU,GACVc,eAAgB,GAChBb,UAAW,SACXC,MAAOl5B,EAAMwM,MAEjBitB,YAAa,CACTT,SAAU,GACVe,WAAY,GACZd,UAAW,SACXC,MAAOl5B,EAAMwM,WAKV6sB,MAAetB,aAAUpU,K,8aClFxC,IAAM0V,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD/oB,cAAe+oB,EAAMxvB,KAAKyG,kBAKxBmiB,G,yIACqB,IAAD,EACayF,KAAK0N,MAA7Bt1B,EADW,EACXA,cAAevB,EADJ,EACIA,MAChBw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAAC2C,EAAA,EAAD,CAAa9hC,KAAK,aAAai/B,MAAOX,EAAOyD,WAC7C,gBAACxB,GAAA,EAAD,CAAMtB,MAAOX,EAAO/hC,aAApB,yEAGA,gBAACgkC,GAAA,EAAD,CAAMtB,MAAOX,EAAO15B,OAAQyE,GAE3BnP,GACG,gBAACsmC,GAAA,EAAD,CAAkBC,QAAS,kBAAM7I,GAAa,yBAC1C,gBAAC2I,GAAA,EAAD,CAAMtB,MAAO,CAAC2C,eAAgB,GAAIb,UAAW,SAAUD,SAAU,GAAIE,MAAO,SAA5E,4B,GAhBYrJ,aA2BlCoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNhD,MAAO,MACPiD,eAAgB,SAChBG,WAAY,UAEhBrjC,YAAa,CACTukC,SAAU,GACVC,UAAW,SACXC,MAAOl5B,EAAMwM,MAEjBytB,SAAU,CACNH,eAAgB,GAChBd,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB1P,MAAO,CACHk8B,SAAU,GACVd,WAAY,OACZgB,MAAOl5B,EAAMwM,KACbkoB,MAAO,OACPuE,UAAW,eAKRI,MAAetB,aAAUrU,K,UCIzBwW,GA1EgB,CAC3BC,SAAU,CAACC,WAAgB,KAAM9nC,EAAeN,EAAtC,OACVkoC,OAAQ,CACJG,QAAS,CACLC,UAAW,CACPD,QAAS,CACLtY,cAAe,UACfwY,aAAc,CACVF,QAAS,CACLrY,aAAc,QACdC,qBAAsB,kBACtBC,aAAc,aAK9B8B,8BAA+B,sBAC/BN,0BAA2B,kBAC3B8W,WAAY,CACRH,QAAS,CACLI,QAAS,CACLJ,QAAS,CACLrX,cAAe,SAGvB0X,YAAa,CACTL,QAAS,CACLpX,kBAAmB,QACnB0X,oBAAqB,kBAG7BC,aAAc,CACVP,QAAS,CACLvX,gBAAiB,YACjBC,WAAY,iBAGpB8X,iBAAkB,CACdR,QAAS,CACLjX,uBAAwB,oBAKxC0X,wBAAyB,mBACzBnX,oBAAqB,kBACrBC,oBAAqB,wBACrBC,2BAA4B,iBAC5BR,gBAAiB,UACjBC,cAAe,cACfC,eAAgB,WAChBC,oBAAqB,iBACrBC,2BAA4B,kBAC5BsX,iBAAkB,CACdV,QAAS,CACLlY,qBAAsB,kBACtBC,yBAA0B,uBAC1BC,yBAA0B,uBAC1BC,qBAAsB,oBACtBC,6BAA8B,oBAC9BC,wBAAyB,sBACzBC,wBAAyB,sBACzBC,wBAAyB,sBACzBC,uBAAwB,iBACxBC,uBAAwB,kBACxBC,uBAAwB,uBAGhCiB,2BAA4B,qBAC5BC,eAAgB,O,2eChEtBiX,G,yIACqB,IAAD,EACoB7R,KAAK0N,MAApC72B,EADW,EACXA,MAAOm3B,EADI,EACJA,MAAU8D,EADN,0BAEZzE,EAASS,GAAaj3B,GAE5B,OACI,gBAACy4B,GAAA,EAAD,QAAUwC,EAAV,CAAsB9D,MAAO,CAACX,EAAOhqB,KAAM2qB,KACtChO,KAAK0N,MAAMU,c,GAPH1H,aAanBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBjrB,KAAM,CACF0sB,MAAOl5B,EAAMm1B,UACb+F,cAAe,YACfC,cAAe,EACfnC,SAAU,GACVoC,aAAc,QAKXrD,gBAAUiD,I,kbCxBnBK,G,yIACqB,IAAD,EAC2BlS,KAAK0N,MAA3C72B,EADW,EACXA,MAAOm3B,EADI,EACJA,MAAO9lC,EADH,EACGA,MAAU4pC,EADb,kCAEZzE,EAASS,GAAaj3B,GAEtBs7B,EAA0BjqC,EAA0B,kBAAVA,EAAqBA,EAAQA,EAAM,GAAM,KAEzF,OACI,gBAAConC,GAAA,EAAD,QAAUwC,EAAV,CAAsB9D,MAAO,CAACX,EAAOhqB,KAAM2qB,KACtCmE,EAAW5/B,GAAc4/B,GAAY,Q,GATzBzL,aAevBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBjrB,KAAM,CACFwsB,SAAU,GACVG,UAAW,EACXiC,cAAe,GACflC,MAAOl5B,EAAM3O,YAKV0mC,gBAAUsD,I,u/BCGnBE,G,kCAcF,WAAY1E,GAAiC,IAAD,uBACxC,cAAMA,IAdV2E,SAAW3L,IAAM4L,YAeb,EAAKnR,MAAQ,CAACoR,SAAS,EAAOC,iBAAiB,GAFP,E,6CAK7B,IAAD,EACV,SAAAxS,KAAKqS,SAASxL,UAAd,EAAuB4L,U,+BAGJ,IAAD,SAwBdzS,KAAK0N,MAtBLgF,EAFc,EAEdA,cACAxqC,EAHc,EAGdA,MACA8zB,EAJc,EAIdA,MACAD,EALc,EAKdA,MACA4W,EANc,EAMdA,KACAC,EAPc,EAOdA,UACAC,EARc,EAQdA,gBACA7E,EATc,EASdA,MACAJ,EAVc,EAUdA,aACAkF,EAXc,EAWdA,WACAC,EAZc,EAYdA,kBACAC,EAbc,EAadA,WACAC,EAdc,EAcdA,WACAC,EAfc,EAedA,aACAC,EAhBc,EAgBdA,eACAC,EAjBc,EAiBdA,WACAC,EAlBc,EAkBdA,wBACAC,EAnBc,EAmBdA,sBACAC,EApBc,EAoBdA,qBACAC,EArBc,EAqBdA,OACAC,EAtBc,EAsBdA,QACG3B,EAvBW,kTA0BXU,EAAmBxS,KAAKmB,MAAxBqR,gBAEDkB,EAAYhB,IAAkBE,GAAa1qC,EAC3CyrC,GAAoC,IAApBd,EAEtB,OACI,kBAAC9E,GAAA,EAAD,CACIC,MAAO,CACHJ,EACA,CAACrC,MAAO,OAAQkD,cAAe,SAAUmF,SAAU,WAAYC,cAAeH,EAAY,EAAI,KAGjG3X,GAAS,kBAAC,GAAD,CAAYiS,MAAOoF,GAAarX,GAC1C,kBAACgS,GAAA,EAAD,CACIC,MAAO,CACH,CAACS,cAAe,MAAOE,WAAY,UACnCX,EACAhO,KAAKmB,MAAMoR,QAAUW,EAAe,GACpCN,EAAY,GAAK1qC,EAAQ8qC,EAAahX,EAAMzxB,OAAS,EAAI0oC,EAAa,KAGzEN,GAAQA,EAAK3S,KAAKmB,MAAMoR,aAAmBxoC,IAAV7B,OAA+B6B,IAAV7B,GAAuB8zB,EAAMzxB,OAAS,GAC7F,kBAACupC,GAAA,EAAD,MACIC,IAAK/T,KAAKqS,SACVrE,MAAO,CACH,CAACO,KAAM,EAAG7C,OAAQ,OAAQsI,gBAAiB,eAC3ClB,EACA9S,KAAKmB,MAAMoR,QAAUQ,EAAoB,IAG7CS,OAAQ,SAAClgC,GACDkgC,GAAQA,EAAOlgC,GACnB,EAAK2gC,SAAS,CAAC1B,SAAS,KAE5BkB,QAAS,SAACngC,GACFmgC,GAASA,EAAQngC,GACrB,EAAK2gC,SAAS,CAAC1B,SAAS,KAE5BvW,MAAOA,EACPuX,qBAAsBA,GACjBI,EAAgB,CAACd,iBAAkBL,GAAmB,GACvDV,IAEP6B,GACG,kBAACpE,GAAA,EAAD,CACIvB,MAAOqF,EACP7D,QAAS,kBAAM,EAAKyE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BqR,iBAAkBA,OAE/D,kBAAC3B,EAAA,EAAD,CAAa9hC,KAAMyjC,EAAkB,YAAc,MAAOxE,MAAOsF,MAI5EI,GAAa,kBAAC,GAAD,CAAgB1F,MAAOmF,EAAgBjrC,MAAOA,S,GArG3Cw+B,IAAMwN,WAAjC9B,GAGK+B,aAAe,CAClBvB,WAAW,EACX5E,MAAO,GACPJ,aAAc,GACdoF,WAAY,GACZC,WAAY,GACZC,aAAc,GACdC,eAAgB,GAChBC,WAAY,IAgGLhB,U,8aCjIf,IAAMgC,GAAsC,CACxCC,aAAc,gBACdC,iBAAkB,QAClBC,gBAAiB,eACjBC,eAAgB,OAChBC,aAAa,GAEXC,GAAyC,CAC3C7B,iBAAiB,EACjByB,iBAAkB,WAClBC,gBAAiB,WACjBC,eAAgB,OAChBC,aAAa,GAMJE,GAAb,qLACItC,SAAW3L,IAAM4L,YADrB,+CAWmB,IAAD,EACV,SAAAtS,KAAKqS,SAASxL,UAAd,EAAuB4L,UAZ/B,+BAe2B,IAAD,SAYdzS,KAAK0N,MAVLkH,EAFc,EAEdA,MACAC,EAHc,EAGdA,QACAC,EAJc,EAIdA,aACAC,EALc,EAKdA,WACA7sC,EANc,EAMdA,MACAsrC,EAPc,EAOdA,OACAwB,EARc,EAQdA,aACAC,EATc,EASdA,QACAC,EAVc,EAUdA,WACGpD,EAXW,+GAclB,OACI,kBAAC,GAAD,MACIiC,IAAK/T,KAAKqS,SACVnqC,MAAO2sC,EAAU3sC,OAAQ6B,EACzB6oC,WAAYiC,EACZG,aAAc,SAAChZ,GACPgZ,GAAcA,EAAahZ,GAC/B8Y,EAAaF,EAAbE,CAAoB9Y,IAExBwX,OAAQ,SAAClgC,GACDkgC,GAAQA,EAAOlgC,GACnByhC,EAAW,EAAKrH,MAAMkH,MAAtBG,CAA6BzhC,KAE5B2hC,EAAUb,GAAa,GACvBc,EAAaR,GAAgB,GAC9B5C,QA5CpB,GAAmCpL,IAAMwN,W,qkBAA5BS,GAGFR,aAAe,CAClBzB,eAAe,EAEfoC,aAAc,aACdC,WAAY,cCrCb,IAEMI,GAAkBhI,IAAS,SAACt2B,EAAcy2B,GACnD,OAAOe,KAAWC,OAAO,CACrB8G,KAAM,CACF3G,cAAe,MACfD,eAAgB,UAEpB6G,oBAAqB,CACjB9J,MAAO,MACPG,OAAQ,OACR8C,eAAgB,SAChBG,WAAY,UAEhB2G,aAAc,CACV/J,MAAO+B,EAAa,MAAQ,OAC5B5B,OAAQ,OACRiD,WAAY,UAEhB4G,OAAQ,CACJtD,aAAc,IAElBuD,gBAAiB,CACbjK,MAAO,QAEXkK,oBAAqB,CACjBlK,MAAO,OACPkD,cAAe,SACfE,WAAY,SACZ+G,UAAW,SACXC,WAAY,IACZ9B,cAAe,IAEnB+B,sBAAuB,CACnBrK,MAAO,OAEXsK,gBAAiB,CACbtK,MAAO,MACPoD,WAAY,SACZqB,UAAW,GACXiC,aAAc,IAElB6D,gBAAiB,CACbvK,MAAO,OACPkD,cAAe,MACfD,eAAgB,gBAEpBuH,UAAW,CACPxH,KAAM,EACNyH,iBAAkB,EAClBrF,eAAgB,GAEpBsF,cAAe,CACXjC,gBAAiB,QAErBkC,cAAe,CACXrG,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB8yB,iBAAkB,CACdtG,SAAU,IAEdptB,MAAM,SACCosB,IADF,IAEDgB,SAAU,GACVmC,cAAe,KACfjC,MAAOl5B,EAAMwM,OAEjBX,SAAU,CACNmtB,SAAU,GACVC,UAAW,UACXkC,cAAe,GACfpB,WAAY,GACZb,MAAOl5B,EAAMm1B,gBAKZoK,GAAwBjJ,IAAS,SAACt2B,GAC3C,OAAOw3B,KAAWC,OAAO,CACrB+H,kBAAmB,GACnBC,aAAc,CACV3F,eAAgB,IAEpB4F,oBAAqB,CACjB1G,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMm1B,UACb2E,eAAgB,S,qkBCtFrB,IAAM6F,GAAarJ,IAAS,SAACt2B,GAChC,OAAOw3B,KAAWC,OAAO,CACrBmI,eAAgB,CACZ5G,SAAU,GACVE,MAAOl5B,EAAMk2B,iBACb2J,YAAa,IAEjBC,sBAAuB,CACnB5G,MAAOl5B,EAAMu1B,aAKlB,SAASwK,GAA6B//B,GAA+D,IAAjDggC,EAAgD,uDAAxB,EAC/E,MAAO,CACHjJ,aAAc,CACVrC,MAAO,OACPoF,eAAgBkG,GAEpB7I,MAAO,CACHzC,MAAO,OACPG,OAAQ,GACRoL,kBAAmB,EACnBC,YAAalgC,EAAM81B,iBAEvBuG,aAAc,CACV6D,YAAalgC,EAAMu1B,QAEvB4G,WAAY,CACR8D,kBAAmB,EACnBE,kBAAmBngC,EAAM3O,OAE7B+qC,WAAY,CACR6D,kBAAmB,EACnBE,kBAAmBngC,EAAM41B,MAE7B2G,WAAY,CACRnB,aAAc,GAElBa,WAAY,CACRjD,SAAU,GACVE,MAAOl5B,EAAMu1B,QAEjB2G,kBAAmC,QAAhBrL,KAASC,GAAgB,CAACsP,QAAS,QAAwB,GAC9E5D,wBAAyB,CACrBzD,QAAS,GAEb0D,sBAAuB,CACnBzD,SAAU,GACVE,MAAOl5B,EAAMm1B,WAEjBuH,qBAAsB18B,EAAMk2B,kB,kbC9C9BmK,G,yIACqB,IAAD,EAC2BlX,KAAK0N,MAA3CxlC,EADW,EACXA,MAAO2O,EADI,EACJA,MAAOm3B,EADH,EACGA,MAAU8D,EADb,kCAEZzE,EAASS,GAAaj3B,GAE5B,OACI,gCACK3O,GAASA,EAAMqC,OAAS,GACrB,gBAACwjC,GAAA,EAAD,MAAMC,MAAO,CAACX,EAAOY,QAASD,IAAY8D,GACtC,gBAACxC,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MAAOnb,EAAQqK,GAAcrK,GAAS,U,GAT1Dw+B,aAiBlBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBL,QAAS,CACL+B,UAAW,GAEf3sB,KAAM,CACFwsB,SAAU,GACVE,MAAOl5B,EAAM3O,MACb4nC,UAAW,eAKRlB,gBAAUsI,I,8aCnClB,IAAMC,GAAe,CACxB,iBAAkB,SAACtgC,GAAD,MAAoC,CAClD+M,OAAQ,CACJ4qB,eAAgB,SAChBG,WAAY,SACZpD,MAAO,OACPG,OAAQ,GACRiF,eAAgB,GAChByG,aAAc,IACdpD,gBAAiBn9B,EAAMu1B,OACvBiL,kBAAmB,IAEvBh0B,KAAM,CACFwsB,SAAU,GACVmC,cAAe,EACfjC,MAAOl5B,EAAMi1B,aAGrB,iBAAkB,SAACj1B,GAAD,MAAoC,CAClD+M,OAAQ,CACJ4qB,eAAgB,SAChBG,WAAY,SACZpD,MAAO,OACPG,OAAQ,GACRiF,eAAgB,GAChByG,aAAc,IACdL,YAAalgC,EAAMu1B,OACnBkL,YAAa,EACbD,kBAAmB,IAEvBh0B,KAAM,CACFwsB,SAAU,GACVmC,cAAe,EACfjC,MAAOl5B,EAAMu1B,WAiBnBmL,G,yIACqB,IAAD,EACqDvX,KAAK0N,MAArE8B,EADW,EACXA,QAASnsB,EADE,EACFA,KAAMsvB,EADJ,EACIA,KAAM6E,EADV,EACUA,KAAMxJ,EADhB,EACgBA,MAAOyJ,EADvB,EACuBA,UAAWrJ,EADlC,EACkCA,SAAUv3B,EAD5C,EAC4CA,MAExD6gC,EAAaF,EAAOL,GAAaK,GAAM3gC,GAAS,CAAC+M,OAAQ,GAAIP,KAAM,IAEzE,OACI,gBAACksB,GAAA,EAAD,CACIoI,kBAAkB,SAClBC,mBAAoBv0B,EACpBmsB,QAASA,EACTxB,MAAO,CAAC,CAACS,cAAe,MAAOE,WAAY,UAAW+I,EAAW9zB,OAAQoqB,IAExEI,GACG,gCACI,gBAACkB,GAAA,EAAD,CAAMtB,MAAO,CAAC0J,EAAWr0B,KAAMo0B,IAAap0B,GAC3CsvB,Q,GAhBJjM,aAwBNkI,gBAAU2I,I,kbC/DnBM,G,yIACqB,IAAD,EACgE7X,KAAK0N,MAAhFoK,EADW,EACXA,WAAYtI,EADD,EACCA,QAASxB,EADV,EACUA,MAAO+J,EADjB,EACiBA,sBAAuBlhC,EADxC,EACwCA,MAAUi7B,EADlD,yEAGlB,OACI,gBAAC,GAAD,KACQ,CAACtC,QAASsI,OAAa/tC,EAAYylC,GAD3C,CAEIxB,MAAO,CAAC,CAACS,cAAe,MAAOE,WAAY,UAAWX,IAClD8D,GAEHgG,GAAc,gBAAC1H,GAAA,EAAD,CAAmBL,MAAOl5B,EAAM01B,cAAeyB,MAAO+J,S,GAVtDrR,aAgBhBkI,gBAAUiJ,I,qiCCtBlB,IAAMG,GAAb,kCAGI,WAAYtK,GAAwB,IAAD,uBAC/B,cAAMA,IACDvM,MAAQ,CAAC8W,aAAcvK,EAAMwK,UAAW,GAC7C,EAAK1xB,GAAK2xB,SAASC,cAAc,OAHF,EAHvC,yDAUQD,SAASrtC,KAAKutC,YAAYrY,KAAKxZ,MAVvC,yCAauB8xB,GACXA,EAASJ,UAAYlY,KAAK0N,MAAMwK,SAASlY,KAAKuY,iBAAgB,IAC7DD,EAASJ,SAAWlY,KAAK0N,MAAMwK,SAASlY,KAAKuY,iBAAgB,KAf1E,sCAkBoBnP,GACZpJ,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B8W,aAAc7O,MACvCA,GAAKpJ,KAAK0N,MAAM8K,QAAQxY,KAAK0N,MAAM8K,SACpCpP,GAAKpJ,KAAK0N,MAAM+K,QAAQzY,KAAK0N,MAAM+K,WArB/C,+BAwB2B,IAAD,SAWdzY,KAAK0N,MATL72B,EAFc,EAEdA,MACA6hC,EAHc,EAGdA,eACAC,EAJc,EAIdA,OACAC,EALc,EAKdA,UACAC,EANc,EAMdA,WACAC,EAPc,EAOdA,eACAC,EARc,EAQdA,aACAC,EATc,EASdA,gBACAC,EAVc,EAUdA,aAIEC,EAAgB,CAClBtF,SAAU,QACVrI,MAAO,OACPG,OAAQ,OACRyN,KAAM,EACNC,IAAK,GAGH78B,EAViByjB,KAAKmB,MAArB8W,aAWH,oCACKgB,GACG,kBAAC,KAAD,CAAUjL,MAAK,IAAGO,KAAM,GAAM2K,GAAgBG,KAAM,OAAQC,UAAWlK,KAE3E,kBAACG,GAAA,EAAD,CACIvB,MAAK,SAEMkL,GAFN,IAGGlF,gBAAgB,eAAegF,GAAmB,KAAnC,IACfO,OAAQ,YAGhBC,cAAe,EACfhK,QAASsJ,OAAiB/uC,EAAY,kBAAM,EAAKwuC,iBAAgB,MAErE,kBAACxK,GAAA,EAAD,CACIC,MAAO,CAAC,OAGA4F,SAAU,QACVuF,KAAM,EACNM,MAAO,GACHd,EAAS,GAAK,CAACS,IAAK,IANzB,IAOCT,OAAQ,EACRe,OAAQ,OAERnO,MAAO,MACPG,OAAQ,cACRyC,SAAU,IACViJ,aAAc,EACdnH,gBAAiB,GACjBoH,kBAAmB,GACnB1I,WAAY,WAEhBiK,EAAY,CAACrN,MAAO,OAAQ4C,SAAU,QAAU,GAChD0K,EAAa,CAACnN,OAAQ,QAAU,GAC/BqN,EAKK,GAJE,CACE/E,gBAAiBn9B,EAAMs1B,eACvBwN,UAAW,oCAGrBjB,IAGH1Y,KAAK0N,MAAMkM,eAAc,kBAAM,EAAKrB,iBAAgB,QAI7D,qCAIJ,OAAOsB,KAASC,aAAav9B,EAAOyjB,KAAKxZ,QApGjD,GAAoCkgB,IAAMwN,WAwG3BtF,gBAAUoJ,I,8aC3GlB,IAAM+B,GAAb,qLACIC,SAAWtT,IAAM4L,YADrB,8CAGkB,IAAD,EACT,SAAAtS,KAAKga,SAASnT,UAAd,EAAuB0R,iBAAgB,KAJ/C,6BAOkB,IAAD,EACT,SAAAvY,KAAKga,SAASnT,UAAd,EAAuB0R,iBAAgB,KAR/C,+BAW2B,IAAD,SACiBvY,KAAK0N,MAAjCuM,EADW,EACXA,UAAcnI,EADH,sBAGZoI,EAAmBD,EAAYA,GAAU,kBAAM,EAAKE,UAAU,qCAEpE,OACI,oCACKD,EACD,kBAACE,GAAD,MAAWrG,IAAK/T,KAAKga,UAAclI,SAnBnD,GAAsCpL,IAAMwN,WAyB7BtF,gBAAUmL,I,kbCpBnBM,G,yIACQ,IAAD,EAC2Cra,KAAK0N,MAA9C72B,EADF,EACEA,MAAOlD,EADT,EACSA,MAAOO,EADhB,EACgBA,SAAa49B,EAD7B,qCAECzE,EAASS,GAAaj3B,GAE5B,OACI,kBAACyjC,GAAD,QACQxI,EADR,CAEI4G,eAAgBrL,EAAO9wB,MACvBq9B,cAAe,kBACX,oCACI,kBAACtK,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,yBACnC,kBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MAAO5Q,KAAKC,EAAE,wBAClC,kBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOkN,sBAChB,kBAAC,GAAD,CACIl3B,KAAM5Q,KAAKC,EAAE,UACb88B,QAAS,kBAAM1E,GAAMt5B,SrD6Ke,CAChE1D,KAAMmD,EAAkB43B,yBqD7KI2O,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOoN,aAEtB,kBAAC,GAAD,CACIp3B,KAAM5Q,KAAKC,EAAE,sBACb88B,QAAS,WACJ1E,GAAMt5B,SAA6B2D,GAAaxB,EAAOO,GAAU,KAEtEsjC,KAAK,iBACLxJ,MAAO,CAACX,EAAOmN,aAAcnN,EAAOqN,eACpCjD,UAAWpK,EAAOoN,uB,GA5BhB/T,IAAMwN,WAsClCpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB/xB,MAAO,CACH86B,kBAAmB,GACnBpH,gBAAiB,IAErBxtB,MAAO,CACHotB,SAAU,GACVC,UAAW,OACXvE,MAAO,OACP0G,aAAc,GACdlD,WAAY,QAEhB1rB,KAAM,CACFwsB,SAAU,GACVC,UAAW,WAGfyK,qBAAsB,CAClBhP,MAAO,OACPkD,cAAe,MACfuB,UAAW,IAEfwK,aAAc,CACVjM,KAAM,EACNyH,iBAAkB,GAClBrF,eAAgB,GAEpB8J,WAAY,CACR5K,SAAU,IAEd6K,cAAe,CACX1G,gBAAiBn9B,EAAM3O,YAKpB0mC,gBAAUyL,I,m/BC5DzB,IAAMM,GAAkBthC,OAAauhC,MAAM,CACvCjnC,MAAOiG,GACP1F,SAAU2F,KAIRq2B,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD9oB,eAAgB8oB,EAAMxvB,KAAK0G,eAC3BpD,cAAeksB,EAAMxvB,KAAK2G,yBAUxBuiC,G,kCAKF,WAAYnN,GAAwB,IAAD,uBAC/B,cAAMA,IALVoN,YAAcpU,cAIqB,EAFnCqU,cAAuG,KAInG,EAAK5Z,MAAQ,CAAC2W,YAAY,GAFK,E,wDAKhBQ,GAA2B,IACnCjgC,EAAkB2nB,KAAK0N,MAAvBr1B,eACH2nB,KAAK+a,eAAiB1iC,GAAkBigC,EAASjgC,gBAAkBA,GACnE2nB,KAAK+a,cAAc,QAAS1iC,K,6BAG7B3B,GAAoB,IAAD,OACtBspB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2W,YAAY,KACzC9X,KAAK0N,MAAMl8B,SAA6B2D,GAAauB,EAAO/C,MAAO+C,EAAOxC,WAAWnM,MAClF,YAA+C,IAA7C0M,EAA4C,EAA5CA,QAASrB,EAAmC,EAAnCA,OAMP,GALIqB,IACI,EAAKi5B,MAAMsN,oBAAoB,EAAKtN,MAAMsN,mBAAmBtkC,GAE7D,EAAKqkC,eAAe,EAAKA,cAAc,WAAY,IAAI,IAE3D3nC,GAAUA,EAAOjC,OAAQ,CACzB,IAAMqvB,EAAIptB,EAAOjC,OACjBxH,OAAOC,KAAK42B,GAAGntB,SAAQ,SAACC,GAAD,OAAO,EAAK2nC,eAAiB,EAAKA,cAAc3nC,EAAGf,GAAciuB,EAAEltB,QAE9F,EAAK2gC,SAAS,CAACiH,aAAc9nC,EAAQ0kC,YAAY,S,+BAKtC,IAAD,SAC6B9X,KAAK0N,MAA7C72B,EADW,EACXA,MAAOg3B,EADI,EACJA,eAAgB54B,EADZ,EACYA,cADZ,EAEiB+qB,KAAKmB,MAAjC+Z,EAFW,EAEXA,aAAcpD,EAFH,EAEGA,WAEfzK,EAASS,GAAaj3B,GACtBskC,EAAU3E,GAAW3/B,GAE3B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAO,CAAC,CAACzC,MAAO,QAASsC,IAC3B,gBAAC,KAAD,CACIuN,cAAe,CAACznC,MAAO,GAAIO,SAAU,IACrCmnC,iBAAkBV,GAClBW,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAY,EAAKiN,OAAOjN,MAEjC,SAAC8kC,GAAyC,IAEnCC,EAQAD,EARAC,aACA/kC,EAOA8kC,EAPA9kC,OACAtD,EAMAooC,EANApoC,OACAyhC,EAKA2G,EALA3G,QACAC,EAIA0G,EAJA1G,aACAC,EAGAyG,EAHAzG,WACAgG,EAEAS,EAFAT,cACAE,EACAO,EADAP,cAEES,EAAc,IAAI5G,eAAcC,cAAe6B,GAA6B//B,EAAO,KAIzF,OAHA,EAAKkkC,cAAgBA,EACrB,EAAKE,cAAgBA,EAGjB,gBAAClN,GAAA,EAAD,KACI,gBAAC,GAAD,MACI6G,MAAM,QACNj5B,YAAalJ,KAAKC,EAAE,gBACpBklC,mBAAoBnlC,KAAKC,EAAE,gBAC3BxK,MAAOkL,EAAOO,MACdqoB,MAAOtlB,EAAO/C,MACdkhC,QAASA,EAAQlhC,MACjBshC,SAAS,EACT0G,cAAc,OACdC,cAAc,EACdC,gBAAiB,iCAAM,EAAKf,YAAYjU,cAAvB,EAAM,EAA0B4L,SACjDE,KAAM,SAACJ,GAAD,OACF,gBAACuJ,GAAA,EAAD,CACI/sC,KAAK,QACLi/B,MAAO,CACHmN,EAAQ1E,eACRlE,EAAU4I,EAAQxE,sBAAwB,QAIlD+E,IAGR,gBAAC,GAAD,MACI3H,IAAK,EAAK+G,YACVlG,MAAM,WACNj5B,YAAalJ,KAAKC,EAAE,YACpBklC,mBAAoBnlC,KAAKC,EAAE,YAC3BxK,MAAOkL,EAAOc,SACd8nB,MAAOtlB,EAAOxC,SACd2gC,QAASA,EAAQ3gC,SACjBghC,YAAY,EACZyG,cAAc,OACdhJ,KAAM,SAACJ,GAAD,OACF,gBAACuJ,GAAA,EAAD,CACI/sC,KAAK,OACLi/B,MAAO,CACHmN,EAAQ1E,eACRlE,EAAU4I,EAAQxE,sBAAwB,QAIlD+E,IAGR,gBAAC,GAAD,CAAWxzC,MAAOuL,GAAaynC,KAE/B,gBAAC3L,GAAA,EAAD,CACIoI,kBAAkB,OAClBC,mBAAoBnlC,KAAKC,EAAE,kBAC3B88B,QAAS,WACLuM,KAASC,UACTrV,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,2BAGzByG,MAAOX,EAAO4O,eAEd,gBAAC3M,GAAA,EAAD,CAAMtB,MAAOX,EAAO6O,oBAAqBzpC,KAAKC,EAAE,oBAGpD,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAO8O,kBAChB,gBAAC,GAAD,CACI3M,QAAS,kBAAMiM,KACfjE,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,mBACbigC,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,QAAQi/B,MAAOX,EAAOgP,kBACzDvE,WAAYA,IAEhB,gBAAC/J,GAAA,EAAD,CAAMC,MAAOX,EAAOiP,oBAChB,gBAACvO,GAAA,EAAD,CAAMC,MAAOX,EAAOkP,gBACpB,gBAACjN,GAAA,EAAD,CAAMtB,MAAOX,EAAOmP,eAAgB/pC,KAAKC,EAAE,iBAC3C,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOkP,iBAExB,gBAAC,GAAD,CACI/M,QAAS,WACLuM,KAASC,UACTrV,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,mBAGzBiQ,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,uBAGrB,gBAAC,GAAD,CACIwlC,QAASjjC,EACTtB,MAAO+C,EAAO/C,MACdO,SAAUwC,EAAOxC,oB,GA5J7BwyB,aAuKlBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB6N,iBAAkB,CACd1N,cAAe,SACflD,MAAO,QAEX8Q,gBAAiB,CACbtM,MAAOl5B,EAAMi1B,UACb+D,SAAU,GACV4M,WAAY,GAEhBR,cAAe,CACXvQ,OAAQ,GACR8C,eAAgB,SAChB6I,kBAAmB,GAEvB6E,mBAAoB,CAChBrM,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMm1B,UACb8D,UAAW,UAEfwM,mBAAoB,CAChB/Q,MAAO,OACPkD,cAAe,MACfE,WAAY,UAEhB4N,cAAe,CACXhO,KAAM,EACN7C,OAAQ,EACRsI,gBAAiBn9B,EAAMwM,KACvBq5B,QAAS,IAEbF,cAAe,CACX3M,SAAU,GACVE,MAAOl5B,EAAMm1B,UACbqL,kBAAmB,SAKhBnH,MAAetB,aAAUiM,K,m/BCrOxC,IAAM8B,GAA2BtjC,OAAauhC,MAAM,CAChDjnC,MAAOiG,KASLgjC,G,kCAGF,WAAYlP,GAAiC,IAAD,uBACxC,cAAMA,IACDvM,MAAQ,CAAC2W,YAAY,GAFc,E,+CAKhB,IAAD,OAAnBnkC,EAAmB,EAAnBA,MACJqsB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2W,YAAY,KACzChN,GAAMt5B,SvD+Le,SAACmC,GAAD,OAAyC,SAAOnC,GAAP,eAAA9G,EAAAC,OAAA,kEAAAD,EAAA,MAC5CF,EAAe,uBAAwB,OAAQ,GAAI,CAACmJ,WADR,WAC7DhI,EAD6D,QAGtDJ,QAAUhD,EAAeyK,GAH6B,uBAI/DxB,EAASuE,GAAsBpC,IAJgC,kBAKxD,CAACc,SAAS,IAL8C,cAO/DjD,EAASyE,MAPsD,kBAQxD,CAACxB,SAAS,EAAOrB,OAAQN,GAAuBnH,KARQ,8DuD/L3BoQ,CAAepI,IAAQ5L,MAAK,YAAsC,IAApCqL,EAAmC,EAAnCA,OAC9D,GAAIA,GAAUA,EAAOjC,OAAQ,CACzB,IAAMqvB,EAAIptB,EAAOjC,OACjBxH,OAAOC,KAAK42B,GAAGntB,SAAQ,SAACC,GAAD,OAAO,EAAK2nC,eAAiB,EAAKA,cAAc3nC,EAAGf,GAAciuB,EAAEltB,QAE9F,EAAK2gC,SAAS,CAACiH,aAAc9nC,EAAQ0kC,YAAY,S,+BAIlC,IAAD,SACc9X,KAAK0N,MAA9B72B,EADW,EACXA,MAAOg3B,EADI,EACJA,eADI,EAEiB7N,KAAKmB,MAAjC+Z,EAFW,EAEXA,aAAcpD,EAFH,EAEGA,WACfzK,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAO,CAAC,CAACzC,MAAO,QAASsC,IAC3B,gBAACE,GAAA,EAAD,CAAMC,MAAOX,EAAOwP,cAChB,gBAACvN,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,gBACnC,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAO/hC,aAAcmH,KAAKC,EAAE,+BAE7C,gBAAC,KAAD,CACI0oC,cAAe,CAACznC,MAAO,IACvB0nC,iBAAkBsB,GAClBrB,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAY,EAAKiN,OAAOjN,MAEjC,SAAComC,GAAuC,IAEjCrB,EAOAqB,EAPArB,aACA/kC,EAMAomC,EANApmC,OACAtD,EAKA0pC,EALA1pC,OACAyhC,EAIAiI,EAJAjI,QACAC,EAGAgI,EAHAhI,aACAC,EAEA+H,EAFA/H,WACAkG,EACA6B,EADA7B,cAEES,EAAc,IAAI5G,eAAcC,cAAe6B,GAA6B//B,IAGlF,OAFA,EAAKokC,cAAgBA,EAGjB,gCACI,gBAAC,GAAD,MACIrG,MAAM,QACNj5B,YAAalJ,KAAKC,EAAE,gBACpBxK,MAAOkL,EAAOO,MACdqoB,MAAOtlB,EAAO/C,MACdkhC,QAASA,EAAQlhC,MACjBshC,SAAS,GACLyG,IAGR,gBAAC,GAAD,CAAWxzC,MAAOuL,GAAaynC,KAE/B,gBAACnN,GAAA,EAAD,CAAMC,MAAOX,EAAO8O,kBAChB,gBAAC,GAAD,CACI3M,QAAS,WACLuM,KAASC,UACTP,KAEJjE,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,QACbolC,WAAYA,IAEhB,gBAAC,GAAD,CACItI,QAAS,WACLuM,KAASC,UACTjV,MAEJyQ,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,sB,GA/EpBg0B,aA2F3BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB6N,iBAAkB,CACd1N,cAAe,SACflD,MAAO,OACPyE,UAAW,IAEf6M,aAAc,CACVtR,MAAO,OACPkD,cAAe,SACfD,eAAgB,aAChByD,aAAc,IAElBxvB,MAAO,CACHotB,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB/X,YAAa,CACTwkC,UAAW,UACXD,SAAU,GACVG,UAAW,GACXD,MAAOl5B,EAAMm1B,gBAKV4C,gBAAUgO,I,0gCC/InBG,G,kCAGF,WAAYrP,GAAgC,IAAD,uBACvC,cAAMA,IAHVsP,eAAgB,EAIZ,EAAK7b,MAAQ,CAACuK,OAAQ,GAFiB,E,yDAKtB,IAAD,OACX1L,KAAK0N,MAAMuP,sBACZlB,KAASmB,YAAY,mBAAmB,WAIpC,EAAKF,eAAgB,KAEzBjB,KAASmB,YAAY,mBAAmB,kBAAO,EAAKF,eAAgB,Q,+BAIrD,IAAD,SACiChd,KAAK0N,MAAjDuP,EADW,EACXA,oBAAqBE,EADV,EACUA,aAActmC,EADxB,EACwBA,MACnC60B,EAAU1L,KAAKmB,MAAfuK,OAED2B,EAASS,GAAaj3B,GAE5B,OACI,gBAACumC,GAAA,EAAD,CACIC,0BAA0B,UAC1BrP,MAAOX,EAAOiQ,WACdC,sBAAuB,CACnBlQ,EAAOmQ,kBACP,CACIC,UAAWR,EAAsB,EAAIvR,IAG7CgS,SAAU,SAACpqC,GACF2pC,GAA4C,GAArB,EAAK9b,MAAMuK,QAG9B,EAAKsR,eACN,EAAK/I,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BuK,OAAQp4B,EAAEqqC,YAAYpQ,OAAO7B,OAAS,OAIhF,gBAACkS,GAAA,EAAD,CACIC,SAAS,UACT7P,MAAO,CACHX,EAAOyQ,qBAENb,GAA6C,IAAtBjd,KAAKmB,MAAMuK,OAA8B,GAAf,CAACgR,QAAS,GAC5DS,IAGHnd,KAAK0N,MAAMU,e,GAtDA1H,aA6D1BoH,GAAeX,IAAS,iBAAO,CACjC2Q,qBAAsB,CAClBvP,KAAM,EACNhD,MAAO,OACPiD,eAAgB,SAChBG,WAAY,UAEhB2O,WAAY,CACR/O,KAAM,EACNhD,MAAO,QAEXiS,kBAAmB,CACfhP,eAAgB,SAChBG,WAAY,cAILC,gBAAUmO,I,m/BC5DzB,IAOMgB,GAAmB1kC,OAAauhC,MAAM,CACxCjnC,MAAOyF,GACPlF,SAAUqF,GACVuC,eAAgBpC,KASdskC,G,kCAKF,WAAYtQ,GAAyB,IAAD,uBAChC,cAAMA,IALVuQ,aAAevX,cAIqB,EAHpCwX,aAAexX,cAKX,EAAKvF,MAAQ,CAAC2W,YAAY,GAFM,E,4CAK7BphC,GAAoB,IAAD,OACtBspB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2W,YAAY,KACzChN,GAAMt5B,SAA6B4C,GAAgBsC,EAAO/C,MAAO+C,EAAOxC,WAAWnM,MAChF,YAA+C,IAA7C0M,EAA4C,EAA5CA,QAASrB,EAAmC,EAAnCA,OAEP,GADIqB,GAAW,EAAKi5B,MAAMsN,oBAAoB,EAAKtN,MAAMsN,mBAAmBtkC,GACxEtD,GAAUA,EAAOjC,OAAQ,CACzB,IAAMqvB,EAAIptB,EAAOjC,OACjBxH,OAAOC,KAAK42B,GAAGntB,SAAQ,SAACC,GAAD,OAAO,EAAK2nC,eAAiB,EAAKA,cAAc3nC,EAAGf,GAAciuB,EAAEltB,QAE9F,EAAK2gC,SAAS,CAACiH,aAAc9nC,EAAQ0kC,YAAY,S,+BAKtC,IAAD,SACc9X,KAAK0N,MAA9B72B,EADW,EACXA,MAAOg3B,EADI,EACJA,eADI,EAEiB7N,KAAKmB,MAAjC+Z,EAFW,EAEXA,aAAcpD,EAFH,EAEGA,WACfzK,EAASS,GAAaj3B,GACtBskC,EAAU3E,GAAW3/B,GAE3B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAO,CAAC,CAACzC,MAAO,QAASsC,IAC3B,gBAACyB,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,kBACnC,gBAAC,KAAD,CACI0oC,cArDmB,CACnCznC,MAAO,GACPO,SAAU,GACV4H,eAAgB,IAmDAu/B,iBAAkB0C,GAClBI,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAY,EAAKiN,OAAOjN,MAEjC,SAAC8kC,GAAyC,IAEnCC,EAOAD,EAPAC,aACA/kC,EAMA8kC,EANA9kC,OACAtD,EAKAooC,EALApoC,OACAyhC,EAIA2G,EAJA3G,QACAC,EAGA0G,EAHA1G,aACAC,EAEAyG,EAFAzG,WACAkG,EACAO,EADAP,cAEES,EAAc,IAAI5G,eAAcC,cAAe6B,GAA6B//B,EAAO,IAGzF,OAFA,EAAKokC,cAAgBA,EAGjB,gCACI,gBAAC,GAAD,MACIrG,MAAM,QACNj5B,YAAalJ,KAAKC,EAAE,gBACpBklC,mBAAoBnlC,KAAKC,EAAE,gBAC3BxK,MAAOkL,EAAOO,MACdqoB,MAAOtlB,EAAO/C,MACdkhC,QAASA,EAAQlhC,MACjBshC,SAAS,EACT0G,cAAc,OACdC,cAAc,EACdC,gBAAiB,iCAAM,EAAKoC,aAAapX,cAAxB,EAAM,EAA2B4L,UAC9CiJ,EAXR,CAYI/I,KAAM,SAACJ,GAAD,OACF,gBAACuJ,GAAA,EAAD,CACI/sC,KAAK,QACLi/B,MAAO,CACHmN,EAAQ1E,eACRlE,EAAU4I,EAAQxE,sBAAwB,UAM1D,gBAAC,GAAD,MACI5C,IAAK,EAAKkK,aACVrJ,MAAM,WACNj5B,YAAalJ,KAAKC,EAAE,YACpBklC,mBAAoBnlC,KAAKC,EAAE,YAC3BxK,MAAOkL,EAAOc,SACd8nB,MAAOtlB,EAAOxC,SACd2gC,QAASA,EAAQ3gC,SACjBghC,YAAY,EACZyG,cAAc,OACdC,cAAc,EACdC,gBAAiB,iCAAM,EAAKqC,aAAarX,cAAxB,EAAM,EAA2B4L,UAC9CiJ,EAZR,CAaI/I,KAAM,SAACJ,GAAD,OACF,gBAACuJ,GAAA,EAAD,CACI/sC,KAAK,OACLi/B,MAAO,CACHmN,EAAQ1E,eACRlE,EAAU4I,EAAQxE,sBAAwB,UAQ1D,gBAAC7C,GAAA,EAAD,CAAW9F,MAAO,CAACzC,MAAO,EAAGG,OAAQ,KAErC,gBAAC,GAAD,MACIqI,IAAK,EAAKmK,aACVtJ,MAAM,iBACNj5B,YAAalJ,KAAKC,EAAE,kBACpBklC,mBAAoBnlC,KAAKC,EAAE,kBAC3BxK,MAAOkL,EAAO0I,eACdkgB,MAAOtlB,EAAOoF,eACd+4B,QAASA,EAAQ/4B,eACjBo5B,YAAY,EACZyG,cAAc,QACVD,EAVR,CAWI/I,KAAM,SAACJ,GAAD,OACF,gBAACuJ,GAAA,EAAD,CACI/sC,KAAK,OACLi/B,MAAO,CACHmN,EAAQ1E,eACRlE,EAAU4I,EAAQxE,sBAAwB,UAM1D,gBAAC,GAAD,CAAWzuC,MAAOuL,GAAaynC,KAE/B,gBAACnN,GAAA,EAAD,CAAMC,MAAOX,EAAO8O,kBAChB,gBAAC,GAAD,CACI3M,QAAS,WACLuM,KAASC,UACTP,KAEJjE,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,iBACbolC,WAAYA,IAEhB,gBAAC,GAAD,CACItI,QAAS,WACLuM,KAASC,UACTjV,MAEJyQ,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,sB,GAlJ5Bg0B,aA8JnBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB6N,iBAAkB,CACd1N,cAAe,SACflD,MAAO,OACPyE,UAAW,IAEfvtB,MAAO,CACHotB,SAAU,GACVoC,aAAc,EACdlC,MAAOl5B,EAAMwM,WAKVurB,gBAAUoP,I,SClNVI,OAJf,WACI,OAAO,kCCDPC,GAAkC,GAClChqC,GAAiC,KACjCwC,GAAyB,KAyD7B,SAAeynC,GAAYznC,EAAiB/M,GAA5C,SAAAY,EAAAC,OAAA,qDACYb,EADZ,OAEa,sBAFb,+CAGmB,oCAHnB,gCAKmB,MALnB,4DASA,SAAey0C,GAAY1nC,EAAiB/M,GAA5C,SAAAY,EAAAC,OAAA,qDACYb,EADZ,OAEa,sBAFb,+CAGmB,oCAHnB,gCAKmB,MALnB,4DASO,SAAS00C,GAAc10C,EAAa20C,GACvC,IAAMnqC,EAAWw2B,GAAMr5B,WAAW6C,SAASC,aAK3C,GAJIF,IAAUC,EAASD,QAAUwC,IAASvC,EAASuC,QAAOwnC,GAAS,IACnEhqC,GAASC,EAASD,OAClBwC,GAAQvC,EAASuC,MAEbwnC,GAAOv0C,GAAM,OAAOu0C,GAAOv0C,GAG/B,IAAM40C,EAAS,SAACx0C,GACZm0C,GAAOv0C,GAAOI,EAAEy0C,QACZF,GAAQA,KAYhB,OATiC,OAAXpqC,GAAkBiqC,GAAcC,IAExC1nC,GAAO/M,GAAK/B,MAAK,SAACmC,GAGlB,OAANA,EA5FZ,SAA+B2M,EAAiB/M,GAAhD,SAAAY,EAAAC,OAAA,qDACYb,EADZ,OAEa,YAFb,OAIa,iBAJb,OAMa,+BANb,OAQa,2BARb,OAUa,kCAVb,OAYa,0BAZb,OAca,kBAdb,OAgBa,wBAhBb,QAkBa,0BAlBb,QAoBa,0BApBb,QAsBa,0BAtBb,QAwBa,sBAxBb,QA0Ba,WA1Bb,QA4Ba,WA5Bb,QA8Ba,WA9Bb,QAgCa,WAhCb,QAkCa,WAlCb,QAoCa,YApCb,QAsCa,YAtCb,QAwCa,UAxCb,QA0Ca,YA1Cb,QA4Ca,8BA5Cb,QA8Ca,yBA9Cb,QAgDa,qBAhDb,iDAGmB,gCAHnB,gCAKmB,gCALnB,gCAOmB,gCAPnB,gCASmB,gCATnB,gCAWmB,gCAXnB,gCAamB,+BAbnB,gCAemB,gCAfnB,iCAiBmB,gCAjBnB,iCAmBmB,gCAnBnB,iCAqBmB,gCArBnB,iCAuBmB,gCAvBnB,iCAyBmB,gCAzBnB,iCA2BmB,+BA3BnB,iCA6BmB,+BA7BnB,iCA+BmB,+BA/BnB,iCAiCmB,+BAjCnB,iCAmCmB,gCAnCnB,iCAqCmB,+BArCnB,iCAuCmB,+BAvCnB,iCAyCmB,gCAzCnB,iCA2CmB,gCA3CnB,iCA6CmB,oCA7CnB,iCA+CmB,oCA/CnB,iCAiDmB,gCAjDnB,iCAmDmB,oCAnDnB,6DA4FwB80C,CAAgB/nC,EAAQ/M,GAAK/B,MAAK,SAACmC,GAAD,OAAOw0C,EAAOx0C,MAC3Dw0C,EAAOx0C,MAGT,EAGJ,SAAS20C,GAAY/0C,EAAa20C,GACrC,IAAM1tC,EAAMytC,GAAc10C,EAAK20C,GAC/B,OAAY,IAAR1tC,EAAkBqtC,GACdrtC,E,igCChGZ,IAAMm/B,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDhF,cAAegF,EAAM7sB,SAAS6nB,kBAU5B2iB,G,qLACFpT,OAAS,IAAIqT,KAAWC,MAAc,EAAKC,gBALP,I,EAMpCC,SAAW,IAAIH,KAAWC,MAAc,EAAKC,gBAAkB,EAAKE,kB,8CAGhEpD,KAASC,UACTrV,GAAa,YAAa,CAACY,OAAQ,oB,uCAInC,OAZc,IADA,IAa2BiE,KAAWC,IAAI,UAAUF,Q,2CAKlE,OAAOC,KAAWC,IAAI,UAAUC,OADD,IAC2B1L,KAAK0N,MAAM0R,OAAOhG,M,sCAM5E,OAAOiG,KAAK7lC,IAAIgyB,KAAWC,IAAI,UAAUC,OADlB,IAC4C1L,KAAK0N,MAAM0R,OAAOhG,IAFnE,O,0CAKD,IAAD,OAChB2C,KAASmB,YAAY,mBAAmB,WACpC,IAAMoC,EAAc,EAAKC,qBAAuB,EAAKJ,iBAC/CK,EAAY,EAAKD,qBA/BK,GAiC5B,GAAoB,QAAhB7X,KAASC,GACT,EAAK+D,OAAO+T,SAASD,GACrB,EAAKN,SAASO,SAASH,OACpB,CACH,IAAMI,EAAoCC,KAAOC,MAGjDb,KAAWc,OAAO,EAAKnU,OAAQ,CAC3BoU,QAASN,EACTO,SAJa,IAKbL,WACDM,QACHjB,KAAWc,OAAO,EAAKX,SAAU,CAC7BY,QAASR,EACTS,SATa,IAUbL,WACDM,YAIXjE,KAASmB,YAAY,mBAAmB,WACpC,IAAMoC,EAAc,EAAKL,gBAAkB,EAAKE,iBAC1CK,EAAY,EAAKP,gBAvDK,GAyD5B,GAAoB,QAAhBvX,KAASC,GACT,EAAK+D,OAAO+T,SAASD,GACrB,EAAKN,SAASO,SAASH,OACpB,CACH,IAAMI,EAAoCC,KAAOC,MAEjDb,KAAWc,OAAO,EAAKnU,OAAQ,CAC3BoU,QAASN,EACTO,SAHa,IAIbL,WACDM,QACHjB,KAAWc,OAAO,EAAKX,SAAU,CAC7BY,QAASR,EACTS,SARa,IASbL,WACDM,c,+BAKQ,IAAD,SACahgB,KAAK0N,MAA7B72B,EADW,EACXA,MAAOslB,EADI,EACJA,cAERkR,EAASS,GAAaj3B,GACtBopC,EAAQpB,GAAY,gBAAgB,kBAAM,EAAKqB,iBAErD,OACI,gBAACnS,GAAA,EAAD,CAAMC,MAAOX,EAAOY,UACdV,GAAO3B,cACL,gBAAC,KAAWmC,KAAZ,CAAiBC,MAAO,CAACX,EAAO8S,MAAO,CAAC/G,IAAKpZ,KAAKkf,YAC9C,gBAACe,EAAD,CAAOG,QAAO,iBAItB,gBAAC,KAAWrS,KAAZ,CAAiBC,MAAO,CAACX,EAAOa,UAAW,CAACxC,OAAQ1L,KAAK0L,UACrD,gBAAC6D,GAAA,EAAD,CAAkBvB,MAAOX,EAAOgT,iBAAkB7Q,QAAS,kBAAM,EAAKhsB,SAClE,gBAACs4B,GAAA,EAAD,CAAe/sC,KAAK,eAAei/B,MAAOX,EAAOiT,kBAErD,gBAAChR,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OACfhQ,KAAKC,EAAEypB,EAAgB,6BAA+B,0B,GA5FhDuK,aAkHlBoH,GAAeX,IAAS,SAACt2B,EAAcy2B,GAChD,OAAOe,KAAWC,OAAO,CACrBL,QAAQ,MACAX,EACE,CACIsG,SAAU,WACVwF,IAAK,EACLD,KAAM,EACN5N,MAAO,MACPG,OAAQ,OACRsI,gBAAiBn9B,EAAMu1B,OACvBmU,OAAQ,GAEZ,CAACA,OAAQ,IAEnBrS,UAAW,CACP3C,MAAO,OACPqE,QAAS,GACT2Q,OAAQ,EACR7R,SAAU,UAEd2R,iBAAkB,CACd9U,MAAO,GACPkR,YAAa,IAEjB6D,eAAgB,CACZvQ,MAAOl5B,EAAMi1B,UACb+D,SAAU,IAEdptB,MAAO,CACHstB,MAAOl5B,EAAMi1B,UACb+D,SAAU,GACV1B,SAAU,IACVW,WAAY,mBAEhBqR,MAAO,CACHvM,SAAU,WACVuF,KAAM,EACN5N,MAAOC,KAAWC,IAAI,UAAUF,MAChCiV,YAAaC,KACbF,OAAQ,QAcLrQ,WATf,SAAqBxC,GACjB,IAAM0R,EAASsB,eACf,OACI,gBAAC,KAAD,MACK,SAACC,GAAD,OAA4B,gBAAC,GAAD,QAAsBA,EAAtB,CAAkCvB,OAAQA,GAAY1R,U,kbC3KzFkT,G,yIAEE,IAAMC,EAAOtT,GAAO3B,aACdyB,EAASS,GAAa9N,KAAK0N,MAAM72B,OACjCiqC,EAAO,gBAAC,GAAD,CAAWjT,eAAgBR,EAAO0T,gBAE/C,OACI,gBAAC,GAAD,CAAenT,aAAcP,EAAO2T,cAAenT,eAAgBR,EAAO4T,iBACrEJ,GAAQC,GACPD,GAAQ,gBAAC,GAAD,CAAmB5D,qBAAqB,GAAO6D,Q,GATzCpa,aAmB1Bwa,G,yIAEE,IAAML,EAAOtT,GAAO3B,aACdyB,EAASS,GAAa9N,KAAK0N,MAAM72B,OACjCiqC,EAAO,gBAAC,GAAD,CAAoBjT,eAAgBR,EAAO0T,gBAExD,OACI,gBAAC,GAAD,CAAenT,aAAcP,EAAO2T,cAAenT,eAAgBR,EAAO4T,iBACrEJ,GAAQC,GACPD,GAAQ,gBAAC,GAAD,CAAmB5D,qBAAqB,GAAO6D,Q,GATjCpa,aAmBlCya,G,yIAEE,IAAMN,EAAOtT,GAAO3B,aACdyB,EAASS,GAAa9N,KAAK0N,MAAM72B,OACjCiqC,EAAO,gBAAC,GAAD,CAAYjT,eAAgBR,EAAO0T,gBAEhD,OACI,gBAAC,GAAD,CAAenT,aAAcP,EAAO2T,cAAenT,eAAgBR,EAAO4T,iBACrEJ,GAAQC,GACPD,GAAQ,gBAAC,GAAD,CAAmB5D,qBAAqB,GAAO6D,Q,GATzCpa,aAenBoH,GAAeX,IAAS,SAACt2B,EAAcy2B,GAChD,OAAIA,EACOe,KAAWC,OAAO,CACrB0S,cAAe,CACXzV,MAAO,MACPG,OAAQ,OACRkI,SAAU,WACVwF,IAAK,EACLD,KAAM,OAEV8H,gBAAiB,CACb1V,MAAO,OACPiD,eAAgB,UAEpBuS,cAAe,CACXxV,MAAO,MACP4C,SAAU,OAIXE,KAAWC,OAAO,CACrB0S,cAAe,GACfC,gBAAiB,GACjBF,cAAe,CAEXpL,WD1EwB,GC2ExBpK,MAAO,MACP4C,SAAU,UAMbtV,GAAe+V,aAAUgS,IACzB9nB,GAAuB8V,aAAUsS,IACjCnoB,GAAe6V,aAAUuS,I,u/BC7FhCC,G,yIACqB,IAAD,EAC+BphB,KAAK0N,MAA/C72B,EADW,EACXA,MAAOwM,EADI,EACJA,KAAMwqB,EADF,EACEA,eAAgB4J,EADlB,EACkBA,UAC9BpK,EAASS,GAAaj3B,GAEtBg5B,EAAW7P,KAAK0N,MAAMmC,UAAY,GAClCwR,EAA6B,IAAXxR,EAElByR,EAA4B,GAAXzR,EAEvB,OACI,gBAAC9B,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOkU,cAAe1T,IAChC,gBAACE,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOmU,UAAW,CAAC9V,OAAQ2V,EAAiB1I,QALzC,MAMjB,gBAACrJ,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAOhqB,KAAMo0B,EAAW,CAAC5H,WAAUwH,kBAAmBiK,KAAmBj+B,Q,GAbrEqjB,aAmB5BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBiT,cAAe,CACX5S,WAAY,UAEhBtrB,KAAK,IACDyrB,WAAY,kBACZiB,MAAOl5B,EAAMu1B,OACbmU,OAAQ,GAGS,SAAb1pC,EAAMvJ,GACJ,CACIm0C,gBAAiB,qBACjBC,iBAAkB,CAACnW,MAAO,EAAGG,OAAQ,GACrCiW,iBAAkB,GAEtB,IAEVH,UAAW,CACP5N,SAAU,WACVrI,MAAO,OACPyI,gBAAiBn9B,EAAM01B,cACvBgU,OAAQ,QAKL3R,gBAAUwS,I,qcC9CVQ,G,yIAPY,IAAD,SACgB5hB,KAAK0N,MAAhCmU,EADW,EACXA,SAAa/P,EADF,qBAEZgQ,EAAMtD,GAAcqD,GAAU,kBAAM,EAAK3B,iBAC/C,OAAO4B,EAAM,gBAAC,KAAD,MAAOC,OAAQD,GAAShQ,IAAiB,qC,GAJrCpL,a,8aCOzB,IAuCesb,G,yIAnCY,IAAD,SACyBhiB,KAAK0N,MAAzC5C,EADW,EACXA,MAAOmX,EADI,EACJA,IAAKC,EADD,EACCA,UAAWC,EADZ,EACYA,UAExBC,EAAgB,QAAVtX,EAAkB+T,GAAY,oBAAoB,kBAAM,EAAKqB,iBAAiB,KACpFmC,OAA6Bt4C,IAArBi2B,KAAK0N,MAAM2U,MAAsB,EAAIriB,KAAK0N,MAAM2U,MACxD9W,OAA6BxhC,IAArBi2B,KAAK0N,MAAMnC,MATX,IASiD8W,EAAQriB,KAAK0N,MAAMnC,MAAQ8W,EACpF3W,EATS,GASCH,EAVF,IAYd,OACI,kBAACgE,GAAA,EAAD,MACIvB,MAAO,CACH,CACIU,SAAU,SACVhD,SACAH,QACAmO,OAAQ,IAEZyI,EAAYA,EAAUnU,MAAQ,GAC9BkU,GAEJ1I,cAAe,GACfhK,QAAS,WACLyB,KAAQqR,QAAQL,KAEhBE,GAEO,YAAVrX,GACG,kBAAC,GAAD,CAAY+W,SAAS,uBAAuB7T,MAAO,CAACzC,MAAO,OAAQG,OAAQ,UAEpE,QAAVZ,GAAmBsX,GAAO,kBAACA,EAAD,CAAKhC,QAAQ,aAAa7U,MAAOA,EAAOG,OAAQA,EAAQ6W,KAAK,e,GA9BxE7b,IAAMwN,W,kbCAhCtb,G,yIACqB,IAAD,OACX/hB,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAEtB2rC,EAAe3D,GAAY,WAAW,kBAAM,EAAKqB,iBACjDuC,EAAmBpD,KAAK7lC,IAAqC,GAAjCgyB,KAAWC,IAAI,UAAUF,MAAa,KAExE,OACI,gBAAC,GAAD,KACI,gBAACwC,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAACH,GAAA,EAAD,CAAMC,MAAOX,EAAOqV,uBAChB,gBAAC3U,GAAA,EAAD,CAAMC,MAAOX,EAAOsV,gBAChB,gBAACH,EAAD,OAEJ,gBAACzU,GAAA,EAAD,CAAMC,MAAOX,EAAOkU,eAChB,gBAAC,GAAD,CAAqBl+B,KAAM5Q,KAAKC,EAAE,WAAYm9B,SAAU,GAAI4H,UAAWpK,EAAO1yB,UAC9E,gBAAC20B,GAAA,EAAD,CAAMtB,MAAOX,EAAO3qB,UAAWjQ,KAAKC,EAAE,6BAG7B,QAAhBg1B,KAASC,IACN,gBAACoG,GAAA,EAAD,CAAMC,MAAOX,EAAOuV,uBAChB,gBAAC,GAAD,CACI9X,MAAM,UACNmX,IAAI,kEACJ1W,MAAOkX,IAEX,gBAAC,GAAD,CACI3X,MAAM,MACNmX,IAAI,2DACJ1W,MAAOkX,KAInB,gBAAC1U,GAAA,EAAD,CAAMC,MAAOX,EAAO8O,kBAChB,gBAAC,GAAD,CACI94B,KAAM5Q,KAAKC,EAAE,wBACb88B,QAAS,WACL7I,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,mBAGzBiQ,KAAK,mBAET,gBAAC,GAAD,CACIn0B,KAAM5Q,KAAKC,EAAE,wBACb88B,QAAS,WACL7I,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,mBAGzBiQ,KAAK,0B,GArDL9Q,aA8DtBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNhD,MAAO,MACPiD,eAAgB,gBAChBG,WAAY,UAEhB+T,sBAAuB,CACnBnU,KAAM,EACNhD,MAAO,OACPiD,eAAgB,SAChBG,WAAY,UAEhBgU,eAAgB,CACZpX,MAAO,OACPG,OAAQ,KAEZ6V,cAAe,CACX5Q,eAAgB,IAEpBh2B,QAAS,CACLo1B,MAAOl5B,EAAMu1B,OACb0C,WAAY,eAEhBpsB,SAAU,CACNqtB,MAAOl5B,EAAMu1B,OACb0C,WAAY,kBACZe,SAAU,GACVC,UAAW,SACX4F,UAAW,SACXvH,SAAU,IACV6B,UAAW,IAGf4S,sBAAuB,CACnBnU,cAAe,MACfkC,eAAgB,IAGpBwL,iBAAkB,CACd5Q,MAAO,OACP0G,aAAc,SAKXrD,gBAAUhW,I,u/BChHnBiqB,G,kCA+BF,WAAYnV,GAAwB,IAAD,uBAC/B,cAAMA,IA/BVoV,QAAU,CACN,CACIrgC,MAAO,oBACP+sB,QAAS,WACL7I,GAAa,cACb,EAAKoc,SAGb,CACItgC,MAAO,0BACP+sB,QAAS,WACL1E,GAAMt5B,SAAS+E,MACf,EAAKwsC,SAGb,CACItgC,MAAO,+BACP+sB,QAAS,WACJ1E,GAAMt5B,UlE0RqB,SAAOA,EAAUC,GAAjB,qBAAA/G,EAAAC,OAAA,uDAClCq4C,EAAI3D,KAAK4D,MAAM,IAAM5D,KAAK6D,UAC1BvvC,EAFkC,OAEnBqvC,EAFmB,sBAGlC9uC,EAAW,aAHuB,WAAAxJ,EAAA,MAKlC8G,EAAS4C,GAAgBT,EAAOO,KALE,YAMjCy0B,EAAqBl3B,IAAWE,KAAhCg3B,mBANiC,mCAAAj+B,EAAA,MAS9B8G,EAASiE,GAAuBkzB,KATF,0BAAAj+B,EAAA,MAU9B8G,EAAS2D,GAAaxB,EAAOO,KAVC,2BAAAxJ,EAAA,MAW9B8G,EACFD,EAAc,CACVzD,KAAM,QACNX,UAAW,2BACX6B,UAAW,QAAUg0C,EACrB/zC,SAAU,OACVwJ,OAAQ,OACR/K,UAAW,CACP,CAACmF,KAAM,KAAMswC,MAAO,UACpB,CAACtwC,KAAM,KAAMswC,MAAO,OAExBzqC,YAAa,KACblL,UAAW,CAAC,CAACF,GAAI,UAAW,CAACA,GAAI,OAAQ,CAACA,GAAI,WAC9CC,cAAe,CACX,CACIwvB,QAAS,kBACTtwB,WAAW,EACXD,aAAa,EACbE,YAAY,EACZC,YAAY,EACZC,cAAc,GAElB,CACImwB,QAAS,eACTtwB,WAAW,EACXD,aAAa,EACbE,YAAY,EACZC,YAAY,EACZC,cAAc,GAElB,CACImwB,QAAS,4BACTtwB,WAAW,EACXD,aAAa,EACbE,YAAY,EACZC,YAAY,EACZC,cAAc,IAGtBS,gBAAiB,CAAC,CAACC,GAAI,qBAAsB,CAACA,GAAI,0BAElDU,WAAY,CAAC,CAACV,GAAI,YAAa,CAACA,GAAI,iBApDR,gEkEzR5B,EAAKy1C,SAGb,CACItgC,MAAO,OACPorB,eAAgB,CAACmG,gBAAiB,OAClCoP,WAAY,CAACrT,MAAO,SACpBP,QAAS,kBAAM,EAAKuT,UAMxB,EAAK5hB,MAAQ,CAAC+W,SAAS,GAFQ,E,4CAM/BlY,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+W,SAAS,O,6BAIvClY,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+W,SAAS,O,+BAGpB,IAAD,OACXrhC,EAASmpB,KAAK0N,MAAd72B,MACAqhC,EAAWlY,KAAKmB,MAAhB+W,QAEDmL,EACF,gCACI,gBAAC,KAAD,KACI,gBAAC,KAASC,QAAV,KACI,gBAAC,KAASC,MAAV,CAAgBvV,MAAO,CAAC6B,SAAU,GAAIoC,aAAc,GAAIlC,MAAOl5B,EAAMk1B,YAArE,gBAKP/L,KAAK8iB,QAAQ94C,KAAI,SAACw5C,EAAG/1C,GAAJ,OACd,gBAAC,KAAD,CAAU3D,IAAG,gBAAkB2D,EAAKogC,eAAgB2V,EAAE3V,eAAgB2B,QAASgU,EAAEhU,SAC7E,gBAAC,KAAS8T,QAAV,KACI,gBAAC,KAASC,MAAV,CAAgBvV,MAAOwV,EAAEJ,YAAaI,EAAE/gC,aAO5D,OACI,gCACI,gBAAC8sB,GAAA,EAAD,CACIvB,MAAO,CACH4F,SAAU,WACV+E,OAAQ,GACRc,MAAO,GACPlO,MAAO,GACPG,OAAQ,GACRsI,gBAAiBn9B,EAAM3O,MACvBkvC,aAAc,GACd5I,eAAgB,SAChBG,WAAY,UAEhBa,QAAS,kBAAM,EAAK2K,SAEpB,gBAACtJ,EAAA,EAAD,CAAa9hC,KAAK,OAAOghC,MAAM,QAAQ/B,MAAO,CAAC6B,SAAU,OAE5C,QAAhBnI,KAASC,IACN,gBAAC,KAAD,CAAa8b,WAAY,CAACC,sBAAsB,GAAOC,UAAWzL,GAC7DmL,GAGQ,QAAhB3b,KAASC,IACN,gBAAC2S,GAAD,CAAapC,QAASA,EAASM,OAAQ,kBAAM,EAAKuK,QAAQnJ,cAAe,kBAAMyJ,U,GA3F3E3c,aAkGTkI,gBAAUiU,IC3FzB,IAAM/U,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBsV,qBAAsB,CAClBhQ,SAAU,WACVnF,cAAe,MACfE,WAAY,SACZgK,OAAQ,EACRQ,KAAM,GAEV0K,YAAa,CAAC9T,MAAOl5B,EAAMm1B,UAAW6D,SAAU,IAChDiU,sBAAuB,CAAC/T,MAAOl5B,EAAM3O,MAAO2nC,SAAU,SAI/CjB,iBAzBf,SAAqBlB,GAAuC,IACjD72B,EAAS62B,EAAT72B,MACDw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOuW,sBAChB,gBAACtU,GAAA,EAAD,CAAMtB,MAAOX,EAAOwW,aAAcl7C,EAAlC,SCJNo7C,GAAaC,eACbC,GAAMD,eAsCGE,GApCQ,kBACnB,gBAACD,GAAIE,UAAL,CAAeC,cAAc,EAAOC,OAAQ,kBAAM,mCAC9C,gBAACJ,GAAIK,OAAL,CAAYv1C,KAAK,gBAAgBw1C,UAAW3rB,GAAe4rB,QAAS,CAAC/hC,MAAO2kB,GAAY,oBACxF,gBAAC6c,GAAIK,OAAL,CAAYv1C,KAAK,iBACZ,kBACG,gCACI,gBAAC,GAAD,MAEA,gBAACg1C,GAAWI,UAAZ,CAAsBE,OAAQ,kBAAM,kCAAOI,iBAAiB,eAAeL,cAAc,GACrF,gBAACL,GAAWO,OAAZ,CACIv1C,KAAK,uBACLw1C,UAAWzrB,GACX0rB,QAAS,CACL/hC,MAAO2kB,GAAY,2BAG3B,gBAAC2c,GAAWO,OAAZ,CACIv1C,KAAK,eACLw1C,UAAW1rB,GACX2rB,QAAS,CAAC/hC,MAAO2kB,GAAY,mBAEjC,gBAAC2c,GAAWO,OAAZ,CACIv1C,KAAK,eACLw1C,UAAWxrB,GACXyrB,QAAS,CAAC/hC,MAAO2kB,GAAY,oBAIrC,gBAAC,GAAD,MACCn+B,GAAc,gBAAC,GAAD,Y,ghCChBnC,IAAMy7C,GAAgC,CAClCC,WAAY,GACZvN,aAAc,GACdwN,gBAAiB,EACjBnH,UAAW,KAsBFoH,GAAb,kCAGI,WAAYnX,GAA4B,IAAD,gBACnC,cAAMA,IAHVoX,aAAepe,cAEwB,IAG5B+W,EAH4B,SAGXiH,IAAkBhX,EAAMqX,OAAzCtH,UAH4B,OAKnC,EAAKtc,MAAQ,CACTsc,UAAW,IAAIsB,KAAWC,MAAMvB,GAChChE,MAAO,IAAIsF,KAAWC,MAAM,GAC5BgG,QAAQ,GARuB,EAH3C,4CAgBQhlB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B6jB,QAAQ,KAClChlB,KAAK0N,MAAMuX,UAAUjlB,KAAK0N,MAAMuX,aAjB5C,+BAoBaC,EAAuBzL,GAAwB,IAAD,OAEnDsF,KAAWc,OAAO7f,KAAKmB,MAAMsY,MAAO,CAChCqG,SAAUrG,GAAS,EAAI,GAAKjO,KAAWC,IAAI,UAAUF,MAAQ,IAC7DwU,SAHa,IAIbL,OAAQC,KAAOwF,OAChBnF,QACH5e,YAAW,WACH8jB,GAAUA,IACd,EAAKnC,SARQ,OArBzB,mCAiCwB,IAAD,EACf,SAAA/iB,KAAK8kB,aAAaje,UAAlB,EAA2Bue,UAlCnC,+BAqC2B,IAAD,SAWdplB,KAAK0N,MATL72B,EAFc,EAEdA,MACAu3B,EAHc,EAGdA,SACAiX,EAJc,EAIdA,YACAC,EALc,EAKdA,aACAtX,EANc,EAMdA,MACA+W,EAPc,EAOdA,MACAvV,EARc,EAQdA,QACA+V,EATc,EASdA,aACGC,EAVW,qGAYiBxlB,KAAKmB,MAAjCsc,EAZW,EAYXA,UAAWhE,EAZA,EAYAA,MAAOuL,EAZP,EAYOA,OACnB3X,EAASS,GAAaj3B,GAbV,WAesC6tC,IAAkBK,GAAnE3N,EAfW,EAeXA,aAAcuN,EAfH,EAeGA,WAAYC,EAff,EAeeA,gBAC3Ba,EAAW,SAACC,GACVA,EAAa,EAAK3C,OACjB,EAAK4C,YAGRzX,EACF,gBAAC0X,GAAA,EAAD,MACI7R,IAAK/T,KAAK8kB,aACVjX,eAAgB,CACZR,EAAOwY,mBACP,CAACxO,kBAAmBsN,EAAY1U,gBAAiB2U,IAErDkB,uBAAwB,CAACzY,EAAO0Y,UAAW,CAAC3O,iBAC5C4O,oBAAqC,QAAhBte,KAASC,GAC9Bse,SAAU,EACVC,kBAAmBb,EAAc,kBAAMA,EAAYI,IAAYD,EAAeU,kBAC9EC,mBAAoBb,EAAe,kBAAMA,EAAaG,IAAYD,EAAeW,oBAC7EX,GAEJ,gBAACjW,GAAA,EAAD,MAAkBiK,cAAe,IAAMxL,MAAOX,EAAO+Y,WAAgB5W,EAAU,CAACA,WAAW,IACtFpB,IAKb,MAAoB,QAAhB1G,KAASC,GAGL,gBAACoG,GAAA,EAAD,MACIC,MAAO,CACHX,EAAOY,QACPD,EACA,CAACqY,UAAW5I,EAAU,YAAahE,MAAOA,EAAM,aAChDuL,EAAS,CAACsB,QAAS,QAAU,KAE7Bf,GAEHrX,GAML,gBAAC,KAAWH,KAAZ,MACIC,MAAO,CAACX,EAAOY,QAASD,EAAO,CAACqY,UAAW5I,EAAWhE,SAAQuL,EAAS,CAACsB,QAAS,QAAU,KACvFf,GAEHrX,OApGrB,GAAwCxH,aAoHlC6f,GAAuB,SAACC,EAAwBpP,GAClD,MAAgB,SAAToP,EACD,CAACC,oBAAqBrP,EAAcsP,uBAAwBtP,GAC5D,CAACuP,qBAAsBvP,EAAcwP,wBAAyBxP,IAGlEyP,GAAoBjY,cACtB,SAAClB,GAAuD,IAC7CiF,EAAsDjF,EAAtDiF,KAAMtvB,EAAgDqqB,EAAhDrqB,KAAM2wB,EAA0CtG,EAA1CsG,gBAAiBxE,EAAyB9B,EAAzB8B,QAASxB,EAAgBN,EAAhBM,MAAOn3B,EAAS62B,EAAT72B,MAC9Cw2B,EAASyZ,GAAajwC,GACtBk5B,EAAQrC,EAAMqC,OAASl5B,EAAMi1B,UAEnC,OACI,gBAACyD,GAAA,EAAD,CAAkBC,QAASA,EAASxB,MAAO,CAACX,EAAO0Z,kBAAmB,CAAC/S,mBAAkBhG,IACpF2E,GAAQ,gBAACmJ,GAAA,EAAD,CAAe9N,MAAO,CAACX,EAAO2Z,sBAAuB,CAACjX,UAAShhC,KAAM4jC,IAC7EtvB,GAAQ,gBAACisB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAO4Z,sBAAuB,CAAClX,WAAU1sB,OAcnE6jC,GAAqBtY,cAC9B,SAAClB,GAAoE,IAC1DpgC,EAAyCogC,EAAzCpgC,GAAIgrB,EAAqCoV,EAArCpV,QAASkuB,EAA4B9Y,EAA5B8Y,KAAMzB,EAAsBrX,EAAtBqX,MAAOoC,EAAezZ,EAAfyZ,YAE1B/P,EAHyD,SAGrCsN,IAAkBK,GAAtC3N,aAEP,OACI,gBAACgQ,GAAD,CAAsBZ,KAAMA,EAAMzB,MAAOA,EAAO5H,aAAc,CAACqD,YAAaloB,EAAQ/tB,SAC/E+tB,EAAQtuB,KAAI,SAACq9C,EAA8B55C,GACxC,IAAM65C,EAAc,IAAN75C,EACR85C,EAAO95C,IAAM6qB,EAAQ/tB,OAAS,EAC9Bi9C,EAAoBF,GAAkB,SAATd,GAAqBe,GAAiB,UAATf,EAC1DiB,EAAoBH,GAAkB,UAATd,GAAsBe,GAAiB,SAATf,EAC1DxS,EAAmBqT,EAAnBrT,gBAGD0T,EAAiBD,EACnB,gBAAC1Z,GAAA,EAAD,CACIC,MAAK,OACDzC,MAAO6L,EACP1L,OAAQ,OACRkI,SAAU,WACVwF,IAAK,GACQ,SAAToN,EAAkB,CAAC/M,OAAQrC,GAAgB,CAAC+B,MAAO/B,IALtD,IAMDpD,2BAGRjqC,EAEJ,OACI,gBAAC,WAAD,CAAgBD,IAAG,iBAAmBwD,EAAnB,IAAyBk5C,EAAzB,IAAiC/4C,GAC/Cg6C,GAAoBC,EACrB,gBAACb,GAAD,MACI7Y,MAAO,CAACwZ,EAAmBjB,GAAqBC,EAAMpP,GAAgB,GAAI+P,IACtEE,YAiBvBD,GAAuBxY,cAChC,SAAClB,GAA4E,IAClE8Y,EAAmD9Y,EAAnD8Y,KAAMzB,EAA6CrX,EAA7CqX,MAAO4C,EAAsCja,EAAtCia,cAAexK,EAAuBzP,EAAvByP,aAActmC,EAAS62B,EAAT72B,MAC3Cw2B,EAASyZ,GAAajwC,GAF4C,WAIhB6tC,IAAkBK,GAAnE3N,EAJiE,EAIjEA,aAAcuN,EAJmD,EAInDA,WAAYC,EAJuC,EAIvCA,gBAEjC,OACI,gBAAC7W,GAAA,EAAD,CACIC,MAAO,CACHX,EAAOua,sBACP,CAAC3X,gBAAiB2U,GACT,SAAT4B,EACM,CACI/J,WAAYkI,EACZjO,aAAciO,EACdnW,eAAgB,cAEpB,CACIiO,YAAakI,EACbjO,YAAaiO,EACbnW,eAAgB,YAE1BmZ,EAAa,IAEHpc,MAAO,OACPyK,iBAAkB2O,GACL,SAAT6B,EAAkB,CAACqB,aAA2B,EAAblD,GAAkB,CAACmD,YAA0B,EAAbnD,IAEzE,KAGV,gBAAC5W,GAAA,EAAD,CACIC,MAAO,CACHX,EAAO0a,oBACPJ,EAAgB,CAACvQ,gBAAgBmP,GAAqBC,EAAMpP,GAC5D+F,IAGHzP,EAAMU,cAOrBN,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBL,QAAS,CACL1C,MAAO,OACPmD,SAAU,UAEdmX,mBAAoB,CAChBta,MAAO,QAEXwa,UAAW,CACPxa,MAAO,OACPmD,SAAU,SACVsF,gBAAiBn9B,EAAMs1B,gBAE3Bia,UAAW,CACP7a,MAAO,OACPG,OAAQ,OACRgD,SAAU,eAKhBoY,GAAe3Z,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBsZ,sBAAuB,CACnBlc,OAAQ,QAEZqc,oBAAqB,CACjBvZ,eAAgB,aAChBC,cAAe,MACf/C,OAAQ,QAEZqb,kBAAmB,CACfvY,eAAgB,SAChBG,WAAY,SACZ6R,YAAa,GAEjBwG,sBAAuB,CACnBnX,SAAU,IAEdoX,sBAAuB,CACnBpX,SAAU,GACVC,UAAW,UAEfkY,gBAAgB,IACZnY,SAAU,GACVmC,cAAe,GACZnD,SAKAD,gBAAUiW,ICrVZoD,GAAe9a,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrB4Z,QAAS,CACL3c,MAAO,MACP4c,UAAW,MACXzZ,SAAU,SACV2I,kBAAmB,EACnBpH,gBAAiB,GAErBmY,gBAAiB,CACb7c,MAAO,OACPgD,KAAM,GAEV8Z,cAAe,CAACrU,gBAAiB,UAAWtI,OAAQ,QACpD4c,kBAAmB,CAAC9Z,eAAgB,cACpC+Z,wBAAyB,GACzBC,yBAA0B,CAACzY,MAAOl5B,EAAMy1B,iBACxCmc,mBAAoB,CAAC5Y,SAAU,IAC/B6Y,SAAU,CACNnd,MAAO,OACPG,OAAQ,GACRiD,WAAY,SACZH,eAAgB,SAChB4I,aAAc,EACdpD,gBAAiBn9B,EAAMu1B,QAE3Buc,aAAc,CACV9Y,SAAU,GACVE,MAAOl5B,EAAMi1B,WAEjB8c,cAAe,CACX5Y,UAAW,SAKhB,SAAS6Y,KAGsD,IAFlEC,EAEiE,uDAF7B,UACpCjyC,EACiE,uCACjE,MAAgB,eAAZiyC,EACO,CACHllC,OAAQ,CACJ2nB,MAAO,OACPG,OAAQ,GACRiD,WAAY,aACZH,eAAgB,SAChByB,gBAAiB,GACjBoH,kBAAmB,GACnBD,axBnD8B,GwBoD9BpD,gBAAiBn9B,EAAMm2B,2BAE3B3pB,KAAM,CACFwsB,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB0lC,iBAAkB,CACdhZ,MAAOl5B,EAAMm1B,YAId,CACHpoB,OAAQ,CACJ2nB,MAAO,OACPoD,WAAY,SACZH,eAAgB,SAChByB,gBAAiB,GACjBoH,kBAAmB,GACnBC,YAAa,EACbF,aAAc,EACdpD,gBAAiBn9B,EAAMq1B,WACvB6K,YAAalgC,EAAM81B,iBAEvBtpB,KAAM,CACFwsB,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB0lC,iBAAkB,I,u/BCpFlBC,GC8BNC,G,kCAGF,WAAYvb,GAA4B,IAAD,uBACnC,cAAMA,IAHVsM,SAAWtT,cAIP,EAAKvF,MAAQ,CAAC+nB,UAAW,IAFU,E,wDAMnC,IAAMA,EAAsC,GAC5ClpB,KAAK0N,MAAMyb,SAAS91C,SAAQ,SAACnJ,GAAD,OAAQg/C,EAAUh/C,IAAK,KACnD81B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+nB,iB,6BAGpB,IAAD,EACTlpB,KAAKopB,mBACL,SAAAppB,KAAKga,SAASnT,UAAd,EAAuBsT,S,2BAGtBj/B,GAAuB,IAAD,EACvB,SAAA8kB,KAAKga,SAASnT,UAAd,EAAuBkc,OACnB7nC,EAAO8kB,KAAK9kB,QACX8kB,KAAKopB,qB,kCAGFl/C,GAAY,IAAD,OACb2xB,EAAOmE,KAAKmB,MAAM+nB,UAClBG,GAAYxtB,EAAK3xB,GAEnB81B,KAAK0N,MAAMzsB,SACX+e,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+nB,UAAU,SAAKrtB,GAAN,UAAa3xB,EAAIm/C,OAExDrpB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+nB,UAAU,OAAGh/C,EAAIm/C,MAAY,WACnDA,GAAU,EAAKtG,MAAK,Q,8BAKrB,IACJuG,EAAYtpB,KAAK0N,MAAjB4b,SACDJ,EAAYlpB,KAAKmB,MAAM+nB,UACzBI,GAEAA,EADiB3/C,OAAOC,KAAKs/C,GAAWr/C,QAAO,SAAC6yB,GAAD,OAAiBwsB,EAAUxsB,S,+BAK3D,IAAD,SAcdsD,KAAK0N,MAZLh3B,EAFc,EAEdA,OACAyyC,EAHc,EAGdA,SACAptB,EAJc,EAIdA,MACA4W,EALc,EAKdA,KACA1xB,EANc,EAMdA,SACAnE,EAPc,EAOdA,WACAysC,EARc,EAQdA,cACA5tC,EATc,EASdA,YACAwrC,EAVc,EAUdA,YACAqC,EAXc,EAWdA,WACAC,EAZc,EAYdA,mBACA5yC,EAbc,EAadA,MAEGqyC,EAAalpB,KAAKmB,MAAlB+nB,UACD7b,EAASS,GAAaj3B,GACtB6yC,EAAUzB,GAAapxC,GACvB8yC,EAAmBd,GAA0BY,EAAoB5yC,GAEvE,OACI,gCACI,gBAAC04B,GAAA,EAAD,CACIvB,MAAO,CACH2b,EAAiB/lC,OACjBulC,EAAS5+C,OAAS,IAAMg/C,EAAgBlc,EAAOuc,SAAW,GAC1DzC,GAEJ3X,QAAS,kBAAM,EAAK2K,SAEC,IAApBgP,EAAS5+C,QACN,gBAAC+kC,GAAA,EAAD,CACItB,MAAO,CAAC2b,EAAiBtmC,KAAMsmC,EAAiBZ,iBAAkBS,GAClEK,cAAe,GAEdluC,GAGRwtC,EAAS5+C,OAAS,GACf,gBAAC+kC,GAAA,EAAD,CAAMtB,MAAO,CAAC2b,EAAiBtmC,KAAMmmC,GAAaK,cAAe,GAC5DV,EAASn/C,IAAI+xB,GAAO1xB,KAAK,QAItC,gBAACiwC,GAAD,CACIvG,IAAK/T,KAAKga,SACVtB,eAAgB,CAACnN,MAAO,OAAQ8L,kBAAmB,EAAGpH,gBAAiB,GACvE2J,cAAe,kBACX,gCACI,gBAACwD,GAAA,EAAD,CAAYpP,MAAOX,EAAOyc,OAAQvM,sBAAuBlQ,EAAO0c,eAC3DrzC,EAAO1M,KAAI,SAACE,EAAW8/C,GAAZ,OACR,gBAACza,GAAA,EAAD,CACIzlC,IAAG,sBAAwBI,EAC3B8jC,MAAOX,EAAO4c,aACdza,QAAS,kBAAM,EAAK0a,YAAYhgD,IAChCsvC,cAAe,IAEd7G,GAAQA,EAAKzoC,EAAG8/C,GACjB,gBAAC1a,GAAA,EAAD,CAAMtB,MAAOX,EAAOtR,OAAQA,EAAM7xB,EAAG8/C,IACrC,gBAAC,KAAD,MACIG,QAASjB,EAAUh/C,GACnB2jC,eAAgBR,EAAO+c,kBACvBxc,aAAcP,EAAOgd,gBACrB7a,QAAS,kBAAM,EAAK0a,YAAYhgD,IAChCmmC,KAAM,IACDpvB,EACC,GACA,CAACqpC,YAAa,eAAgBC,cAAe,mBAKlEtpC,KAAcnE,GAAcnT,OAAO+M,OAAOwyC,GAAW7e,MAAK,SAACngC,GAAD,OAAa,IAANA,OAC9D,gBAACqlC,GAAA,EAAD,CACIC,QAAS,kBAAM,EAAKuT,MAAK,IACzB/U,MAAO,CAAC0b,EAAQhB,SAAU,CAACnd,MAAO,UAElC,gBAAC+D,GAAA,EAAD,CAAMtB,MAAO0b,EAAQf,cAAel2C,KAAKC,EAAE,iB,GA5HnDg0B,aAuItBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB1qB,OAAQ,CACJ8nB,OAAQ,GACR0L,aAAc,EACdE,YAAa,EACbR,kBAAmB,EACnBE,kBAAmBngC,EAAM01B,cACzByH,gBAAiB,cACjBxF,eAAgB,SAChBG,WAAY,YAEhBib,SAAU,CACN9S,kBAAmB,EACnBE,kBAAmBngC,EAAM41B,MAE7Bqd,OAAQ,CACJve,MAAO,QAEXwe,cAAe,CACX1S,kBAAmB,GACnBpH,gBAAiB,IAErBga,aAAc,CACVxb,cAAe,MACflD,MAAO,OACP0E,gBAAiB,EACjB1B,KAAM,EACNI,WAAY,SACZH,eAAgB,iBAEpBzS,MAAO,CACHgU,MAAOl5B,EAAMwM,KACbwsB,SAAU,GACV2a,SAAU,GAEdJ,kBAAmB,CACfxa,QAAS,EACT8G,YAAa,GAEjB2T,gBAAiB,CACbza,QAAS,QAKNhB,gBAAUqa,K,SDnNbD,K,oBAAAA,E,gBAAAA,E,wBAAAA,E,0CAAAA,E,0BAAAA,E,gCAAAA,E,eAAAA,Q,KAUL,IAUKyB,GEfAC,GFKCC,GAAe,CACxB3B,GAAW4B,SACX5B,GAAW6B,OACX7B,GAAW8B,WACX9B,GAAW+B,oBACX/B,GAAWgC,YACXhC,GAAWiC,eACXjC,GAAWkC,Q,SAGHT,K,gCAAAA,Q,cEfAC,K,sDAAAA,E,uDAAAA,Q,KAqBZ,IAAMS,GAAsB,SACxBC,EACAC,EACAC,GAHwB,MAIK,CAC7Bx9C,KAAM48C,GAAoBa,sBAC1BH,aACAC,aACAC,aAGEE,GAAsB,SACxBJ,EACAC,EACAC,GAHwB,MAIK,CAC7Bx9C,KAAM48C,GAAoBe,sBAC1BL,aACAC,aACAC,aAGSI,GAAe,SACxB59C,EACAu9C,EACAC,GAHwB,OAIK,SAAO95C,EAAUC,GAAjB,eAAA/G,EAAAC,OAAA,uDACvB+G,EAAQD,IAAWE,KAAKD,MADD,WAAAhH,EAAA,MAENF,EAAe,UAAW,OAAQ,GAAI,CAACsD,OAAMu9C,aAAYC,YAAW55C,GAAO,IAFrE,iBAIhBnG,SAAWhD,EAAeyK,GAJV,uBAKzBxB,EAAS25C,GAAoBr9C,EAAMu9C,EAAYC,IALtB,mBAMlB,GANkB,cAQzB95C,EAASg6C,GAAoB19C,EAAMu9C,EAAYC,IARtB,mBASlB,GATkB,+D,m/BCrB1B,IAAMK,GAAb,kCACI,WAAYje,GAAwB,IAAD,uBAC/B,cAAMA,IACDvM,MAAQ,CAACyqB,MAAM,EAAOC,kBAAkB,EAAOC,aAAa,EAAOhU,YAAY,GAFrD,EADvC,4CAOQ9X,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,OAP5C,8BAWQ5rB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,OAX5C,+BAcoB,IAAD,OACJjoC,EAAUqc,KAAK0N,MAAf/pB,OAEPqc,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2W,YAAY,KAE1Cn0B,IAAS5b,MAAK,SAAC0M,GACPA,EACA,EAAKw/B,SAAL,SACO,EAAK9S,OADZ,IAEI2W,YAAY,EACZ8T,MAAM,EACNC,kBAAkB,EAClBC,aAAa,KAGjB,EAAK7X,SAAL,SACO,EAAK9S,OADZ,IAEI2W,YAAY,EACZ8T,MAAM,EACNC,kBAAkB,EAClBC,aAAa,UAlCjC,+BAwC2B,IAAD,SAad9rB,KAAK0N,MAXLuM,EAFc,EAEdA,UACA8R,EAHc,EAGdA,WACAtpC,EAJc,EAIdA,MACAupC,EALc,EAKdA,UACAC,EANc,EAMdA,WACA31B,EAPc,EAOdA,kBACA41B,EARc,EAQdA,iBACA11B,EATc,EASdA,aACA21B,EAVc,EAUdA,YACAt1C,EAXc,EAWdA,MACAu3B,EAZc,EAYdA,SAZc,EAcwCpO,KAAKmB,MAAxDyqB,EAdW,EAcXA,KAAMC,EAdK,EAcLA,iBAAkBC,EAdb,EAcaA,YAAahU,EAd1B,EAc0BA,WACtCzK,EAASS,GAAaj3B,GAEtBu1C,EACF,qCACML,GACE,kBAAC,GAAD,CACI1oC,KAAM4oC,EACNnU,WAAYA,EACZtI,QAAS,kBAAM,EAAK7rB,UACpB6zB,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOgf,mBAG1B,kBAAC,GAAD,CACIhpC,KAAM5Q,KAAKC,EAAE,UACb88B,QAAS,kBAAM,EAAK4V,SACpB5N,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOgf,oBAKxBjkB,EACF,qCACM3lB,GAASupC,IACP,kBAACje,GAAA,EAAD,CAAMC,MAAOX,EAAOif,gBACfN,GACG,kBAACA,EAAUzH,UAAX,CAAqBx1C,KAAMi9C,EAAUj9C,KAAMi/B,MAAO,CAACX,EAAO5qB,MAAO4qB,EAAO2e,aAE3EvpC,GAAS,kBAAC6sB,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQA,IAG7C2rB,EACAge,GAIT,OACI,oCACKnS,GAAaA,GAAU,kBAAM,EAAK2R,UAClB,QAAhBlkB,KAASC,GACN,kBAAC2S,GAAD,CACIpC,QAAS0T,EACTpT,OAAQ,kBAAM,EAAK4M,SACnBxL,cAAe,kBAAM,kBAAC7L,GAAA,EAAD,CAAMC,MAAOX,EAAOkf,gBAAiBnkB,MAG9D,kBAAC,KAAD,CAAaqb,WAAY,CAACC,sBAAsB,GAAOC,UAAWiI,GAC9D,kBAAC7d,GAAA,EAAD,CAAMC,MAAOX,EAAOmf,cAChB,kBAACze,GAAA,EAAD,CAAMC,MAAOX,EAAOof,gBAAiBrkB,KAIjD,kBAACkS,GAAD,CACIpC,QAAS2T,EACTrT,OAAQ,kBAAM,EAAKvE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B0qB,kBAAkB,MAC9DnT,eAAgBrL,EAAOqf,cACvB9S,cAAe,kBACX,kBAAC7L,GAAA,EAAD,CAAMC,MAAOX,EAAOkf,gBAChB,kBAACjd,GAAA,EAAD,CAAMtB,MAAOX,EAAOsf,eAAgBr2B,GACpC,kBAACgZ,GAAA,EAAD,CAAMtB,MAAOX,EAAOuf,cAAeV,GACnC,kBAAC,GAAD,CACI7oC,KAAM5Q,KAAKC,EAAE,MACb88B,QAAS,kBAAM,EAAKyE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B0qB,kBAAkB,MAC/DrU,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOgf,uBAKlC,kBAAC/R,GAAD,CACIpC,QAAS4T,EACTtT,OAAQ,kBAAM,EAAKvE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B2qB,aAAa,MACzDpT,eAAgBrL,EAAOqf,cACvB9S,cAAe,kBACX,kBAAC7L,GAAA,EAAD,CAAMC,MAAOX,EAAOkf,gBAChB,kBAACjd,GAAA,EAAD,CAAMtB,MAAOX,EAAOsf,eAAgBn2B,GACpC,kBAAC8Y,GAAA,EAAD,CAAMtB,MAAOX,EAAOuf,cAAeT,GACnC,kBAAC,GAAD,CACI9oC,KAAM5Q,KAAKC,EAAE,MACb88B,QAAS,kBAAM,EAAKyE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B2qB,aAAa,MAC1DtU,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOgf,4BA7IlD,GAAoC3lB,IAAMwN,WAuJ7BpG,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrBke,aAAc,CACVjhB,MAAO,OACP0E,gBAAiB,GACjBtB,WAAY,SACZqF,gBAAiBn9B,EAAMs1B,gBAE3BsgB,eAAgB,CACZlhB,MAAO,OAEXghB,eAAgB,CACZhhB,MAAO,QAIX+gB,eAAgB,CACZ7d,cAAe,MACfwD,aAAc,GACdtD,WAAY,SACZH,eAAgB,UAEpBwd,UAAW,CACPtV,YAAa,GAEjBj0B,MAAO,CACHotB,SAAU,GACVE,MAAOl5B,EAAMwM,MAIjBm3B,aAAc,CACV9O,OAAQ,GACRiF,eAAgB,EAChBX,UAAW,IAEfqc,iBAAkB,CACdxc,SAAU,IAGd6c,cAAe,CACXzc,gBAAiB,GACjBoH,kBAAmB,IAEvBsV,cAAe,CACX9c,SAAU,GACVE,MAAOl5B,EAAMwM,KACb4uB,aAAc,IAElB2a,aAAc,CACV/c,SAAU,GACVC,UAAW,UACXC,MAAOl5B,EAAMwM,WAKVurB,gBAAU+c,I,m/BCnNlB,IAAMkB,GAAb,kCAGI,WAAYnf,GAA8B,IAAD,uBACrC,cAAMA,IAHVof,aAAepmB,IAAM4L,YAIjB,EAAKnR,MAAQ,CAAC4rB,aAAc,MAFS,EAH7C,qDAQgE,IAAD,EAC1B/sB,KAAK0N,MAA3B2d,EADgD,EAChDA,WAAY2B,EADoC,EACpCA,OAEnB,IAAKA,EAAQ,OAAO,KAEpB,OAAQ3B,GACJ,KAAKZ,GAAiBwC,eAClB,GAAKD,EAAwBl+C,IAAK,CAC9B,IAAMjB,EAAIm/C,EACV,MAAO,CAACj+C,KAAMlB,EAAEkB,KAAMzB,GAAIO,EAAEiB,KAE5B,IAAMD,EAAIm+C,EACV,MAAO,CAACj+C,KAASF,EAAEG,UAAP,IAAoBH,EAAEI,SAAY3B,GAAIuB,EAAEvB,IAG5D,QACI,OAAO,QAxBvB,6BA4BkB,IAAD,EACT,SAAA0yB,KAAK8sB,aAAajmB,UAAlB,EAA2B+kB,SA7BnC,8BAgCmB,IAAD,EACV,SAAA5rB,KAAK8sB,aAAajmB,UAAlB,EAA2Bue,UAjCnC,sHAqCuCplB,KAAK0N,MAA7B2d,EArCf,EAqCeA,WAAY9P,EArC3B,EAqC2BA,SACZwR,EAAgB/sB,KAAKmB,MAArB4rB,aAED/kD,EAAOg4B,KAAKktB,gBAEdz4C,GAAU,GACVs4C,IAAgB/kD,EA3C5B,0CA4C6B8iC,GAAMt5B,SAA6Bk6C,GAAaqB,EAAc1B,EAAYrjD,EAAKsF,MA5C5G,OA4CYmH,EA5CZ,qBA8CY8mC,GAAUA,EAAS9mC,GA9C/B,kBA+CeA,GA/Cf,8FAkD2B,IAAD,SACSurB,KAAK0N,MAAzBuM,EADW,EACXA,UAAWpjC,EADA,EACAA,MACXk2C,EAAgB/sB,KAAKmB,MAArB4rB,aACD1f,EAASS,GAAaj3B,GAEtB7O,EAAOg4B,KAAKktB,gBAElB,OACI,oCACI,kBAACC,GAAD,CACIpZ,IAAK/T,KAAK8sB,aACV7S,UAAWA,EACXt2B,OAAQ,kBAAM,EAAKA,UACnBqoC,UAAW,CAACzH,UAAWzI,KAAe/sC,KAAM,UAC5C0T,MAAOhQ,KAAKC,EAAE,gBACdu5C,WAAYx5C,KAAKC,EAAE,eACnB4jB,kBAAmB7jB,KAAKC,EAAE,4BAC1Bw5C,iBAAkBz5C,KAAKC,EAAE,uBACzB8jB,aAAc/jB,KAAKC,EAAE,uBACrBy5C,YAAa15C,KAAKC,EAAE,kBACpBq5C,YAAagB,GAEb,kBAAChf,GAAA,EAAD,CAAMC,MAAOX,EAAO+f,WAChB,kBAAC,GAAD,KAAa36C,KAAKC,EAAE,gBACpB,kBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOtX,MAAO/tB,EAAOA,EAAK+G,KAAO,YAGlD,kBAACg/B,GAAA,EAAD,CAAMC,MAAOX,EAAO+f,WAChB,kBAAC,GAAD,KAAa36C,KAAKC,EAAE,eACpB,kBAAC,GAAD,CACIgE,OAAQi0C,GACR5uB,MAAO,SAACrpB,GAAD,OAAeD,KAAKC,EAAL,gBAAuBA,IAC7CiJ,YAAalJ,KAAKC,EAAE,0BACpBy2C,SAAU4D,EAAe,CAACA,GAAgB,GAC1CvD,WAAYnc,EAAOggB,cAEnB/D,SAAU,SAAC5yC,GACHA,EAAOnM,OAAS,GAChB,EAAK0pC,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B4rB,aAAcr2C,EAAO,OAE3D+yC,mBAAmB,sBA1F/C,GAA0C/iB,IAAMwN,WAmGnCpG,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrB8e,UAAW,CACPnb,aAAc,IAElBlc,KAAM,CACF8Z,SAAU,GACVE,MAAOl5B,EAAMwM,KACbysB,UAAW,SAEfud,cAAe,CACXxd,SAAU,SAKPjB,gBAAUie,I,8aC/HzB,IAAM3c,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD0D,cAAe1D,EAAMlK,UAAU4N,kBAW7ByoB,GAAQ,CACV3I,WAAY,GACZC,gBAAiB,EACjBxN,aAAc,GACdqG,UAAW,IAGT8P,G,qLACFC,cAAgB9mB,c,EAChB+mB,iBAAmB/mB,c,kDAEA+e,GAA2C,IAAD,OAGzD,MAAO,CAMH,CACI9S,KAAM,SACNqB,gBAVQhU,KAAK0N,MAAd72B,MAUwB3O,MACvBsnC,QAAS,iCAAM,EAAKge,cAAc3mB,cAAzB,EAAM,EAA4B+kB,Y,+BAK7C,IAAD,SACyC5rB,KAAK0N,MAA5C72B,EADF,EACEA,MAAOqqB,EADT,EACSA,KAAMsO,EADf,EACeA,QAAS3K,EADxB,EACwBA,cACvBwI,EAASS,GAAaj3B,GAEtB62C,EAAYxsB,EAAKvyB,MAAMf,MAAK,SAACiB,GAAD,OAAqBA,EAAEC,OAAF,MAAU+1B,OAAV,EAAUA,EAAe/1B,QAC1EiB,EAAOmxB,EAAKvyB,MAAM9E,QAAO,SAACgF,GAAD,OAAqBA,EAAEC,OAAF,MAAU+1B,OAAV,EAAUA,EAAe/1B,QAAK,GAE9E6+C,EAAuB,iCAE3B,GAAIzsB,EAAK9xB,YAAa,CAClB,IAAMe,EAAO+wB,EAAK9xB,YAAYY,UACxB49C,EACFF,GACAA,EAAUv+C,sBACTu+C,EAAUv+C,qBAAuBgB,GAAQu9C,EAAUx+C,mBAAqBgyB,EAAK9xB,YAAYN,KACxF++C,EAAM,SAACC,GAAD,OAAkBA,EAAM,IAAIC,SAAS,EAAG,MACpDJ,EACI,gCACI,gBAACre,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAO2gB,gBAAiBJ,EAAS,GAAKvgB,EAAO4gB,oBAAqBpE,cAAe,GAC1F3oB,EAAK9xB,YAAYW,KAAKhB,KAAK4I,MAAM,KAAK,GAD3C,KACiDupB,EAAK9xB,YAAYiU,MAElE,gBAACisB,GAAA,EAAD,CAAMtB,MAAOX,EAAO6gB,iBACfL,EAAI19C,EAAKg+C,YADd,IAC4BN,EAAI19C,EAAKi+C,qBAK7CT,EACI,gBAACre,GAAA,EAAD,CAAMtB,MAAOX,EAAOghB,cAAexE,cAAe,GACvB,IAAtB3oB,EAAKvyB,MAAMpE,OAAekI,KAAKC,EAAE,oBAAqB,CAAC3D,KAAMgB,EAAKhB,OAAS0D,KAAKC,EAAE,UAK/F,OACI,gBAAC47C,GAAD,CACIva,IAAK/T,KAAKytB,iBACV1I,MAAOuI,GACPiB,eAAgB,IAChBC,gBAAgB,EAChBlJ,aAAc,SAACG,GAAD,OACV,gBAACyB,GAAD,CACI55C,GAAE,QAAU4zB,EAAK5zB,GACjBy3C,MAAOuI,GACP9G,KAAK,QACLluB,QAAS,EAAKm2B,WAAWhJ,MAGjCjW,QAAS,WACDA,GAASA,IACblI,GAASpG,EAAK5zB,MAGlB,gBAACygC,GAAA,EAAD,CAAMC,MAAOX,EAAOqhB,aAChB,gBAAC3gB,GAAA,EAAD,CAAMC,MAAOX,EAAOshB,iBAChB,gBAAC,KAAD,CAAcC,YAAavhB,EAAOngC,OAAQ6C,KAAMA,KAEpD,gBAACg+B,GAAA,EAAD,CAAMC,MAAOX,EAAOwhB,eAChB,gBAACvf,GAAA,EAAD,CAAMtB,MAAOX,EAAOt+B,MAAOgB,EAAKhB,MAChC,gBAACg/B,GAAA,EAAD,CAAMC,MAAOX,EAAOj+B,aAAcu+C,KAG1C,gBAACmB,GAAD,CACI/a,IAAK/T,KAAKwtB,cACVnC,WAAYZ,GAAiBwC,eAC7BD,OAAQj9C,EACRwrC,SAAU,iCAAM,EAAKkS,iBAAiB5mB,cAA5B,EAAM,EAA+BkoB,qB,GAvFxCroB,aA8FrBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBogB,YAAa,CACTjgB,cAAe,MACfmB,QAAS,IAEb+e,gBAAiB,CACbngB,eAAgB,UAEpBthC,OAAQ,CACJ8mC,gBAAiBn9B,EAAMy1B,gBACvBf,MAAO,GACPG,OAAQ,GACR0L,aAAc,IAElByX,cAAe,CACXtgB,KAAM,EACNE,cAAe,SACfD,eAAgB,SAChBsZ,YAAa,IAEjB/4C,KAAM,CACF8gC,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMwM,MAEjBjU,YAAa,CACTq/B,cAAe,MACfD,eAAgB,gBAChBE,SAAU,UAEd2f,cAAe,CACXte,MAAOl5B,EAAMm1B,UACb6D,SAAU,GACVtB,KAAM,GAEVyf,gBAAiB,CACbje,MAAOl5B,EAAMwM,KACbwsB,SAAU,GACVtB,KAAM,GAEV0f,mBAAoB,CAChBlf,WAAY,QAEhBmf,gBAAiB,CACbne,MAAOl5B,EAAMm1B,UACb6D,SAAU,SAKPK,MAAetB,aAAU2e,K,wbC9KxC,IA0Berd,GA1BQtO,cAAQ,SAACT,GAAD,MAAsB,CACjD9sB,OAAQ8sB,EAAM7sB,SAASC,aAAaF,UAyBzB67B,C,mJAbQoI,GAA6B,IAAD,EACVtY,KAAK0N,MAA/Br5B,EADoC,EACpCA,OAAQ26C,EAD4B,EAC5BA,eACX1W,EAASjkC,SAAWA,GAChB26C,GAAgBA,EAAe36C,K,+BAIpB,IACZ+5B,EAAYpO,KAAK0N,MAAjBU,SACP,OAAO,oCAAGA,O,GAVQ1H,IAAMwN,Y,m/BCwBhC,IAEqB+a,G,kCAGjB,WAAYvhB,GAAkC,IAAD,uBACzC,cAAMA,IAHVwhB,cAA6CxoB,cAIzC,EAAKvF,MAAQ,CAACguB,UAAW,IAFgB,E,iDAK1B,IAAD,EAC0CnvB,KAAK0N,MAAtD59B,EADO,EACPA,SAAUD,EADH,EACGA,aAAcu/C,EADjB,EACiBA,UAAW/f,EAD5B,EAC4BA,YACrCv/B,GAAYD,GAAgBw/B,EAAWggB,aAAaD,M,sCAGvC,IAAD,SACGpvB,KAAK0N,MAAlBlP,EADU,EACVA,MAAOlxB,EADG,EACHA,GACd,OAAOkxB,EAAM30B,QAAO,SAAC4e,GAAD,OAAS,EAAK0Y,MAAMguB,UAAU7hD,EAAGmb,S,+BAGhD6mC,GAAgB,IAAD,EACmBtvB,KAAK0N,MAArC6hB,EADa,EACbA,WAAY1/C,EADC,EACDA,aAAcvC,EADb,EACaA,GACjC0yB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8BguB,UAAU,SAAKnvB,KAAKmB,MAAMguB,WAAjB,UAA6B7hD,EAAGgiD,IAAQ,OAC3EtvB,KAAKwvB,gBAAgBjlD,OAASglD,GAAc1/C,GAAcmwB,KAAKovB,c,0CAG5C,IAAD,OACDpvB,KAAK0N,MAAnB2B,WACI6N,YAAY,SAAS,kBAAM,EAAKzJ,aAC3CzT,KAAKyT,Y,gCAGQ,IAAD,SACoEzT,KAAK0N,MAA9ElP,EADK,EACLA,MAAO+wB,EADF,EACEA,WAAYz/C,EADd,EACcA,SAAU2/C,EADxB,EACwBA,eAAgBzsB,EADxC,EACwCA,YAAa0sB,EADrD,EACqDA,QAASpiD,EAD9D,EAC8DA,GACpEqiD,EAAQnxB,EAAM30B,QAAO,SAAC4e,GAAD,OAAS,EAAK0Y,MAAMguB,UAAU7hD,EAAGmb,OAAMle,OAE9DklD,EAEoB,IAAhBzsB,EAAmBhD,KAAKovB,YACvBM,IACEC,EAAQJ,IAAez/C,GAAUkwB,KAAKovB,c,yCAGlC9W,GAA2C,IAAD,SACXtY,KAAK0N,MAA5C6hB,EADkD,EAClDA,WAAYvsB,EADsC,EACtCA,YAAaqM,EADyB,EACzBA,WAE1BugB,EAAgBtX,EAAStV,YAAc,GAAqB,IAAhBA,EAElD,GAAIqM,EAAWggB,YAAa,CACxB,IAAMQ,EAAe,kBAAM,EAAKL,gBAAgBjlD,OAASglD,GAAc,EAAKH,aAExEQ,EAAe5vB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8BguB,UAAW,KAAKU,GAC5DA,O,+BAIU,IAAD,SAYd7vB,KAAK0N,MAVLlP,EAFc,EAEdA,MACA1uB,EAHc,EAGdA,SACAD,EAJc,EAIdA,aACAmzB,EALc,EAKdA,YACA0sB,EANc,EAMdA,QACAI,EAPc,EAOdA,WACAC,EARc,EAQdA,mBACAC,EATc,EASdA,oBACAC,EAVc,EAUdA,oBACAC,EAXc,EAWdA,mBAGJ,OACI,gCACI,gBAAC,KAAD,MACK,YAA0B,IAAxBr5C,EAAuB,EAAvBA,MACOw2B,EAASS,GAAaj3B,GAC5B,OACI,gBAACumC,GAAA,EAAD,CACIrJ,IAAK,EAAKmb,cACVlhB,MAAOX,EAAO8iB,SACd5S,sBAAuB,CAAClQ,EAAO+iB,eAAgBH,GAC/CI,eACI,gBAACC,GAAA,EAAD,CACIJ,mBAAoBA,EACpBK,WAAYzgD,EACZ0gD,UAAW,WACF1gD,GAAU4/C,OAI3Be,SAAU,SAACn9C,GAAgD,IAAD,EACEA,EAAEqqC,YAAnD+S,EAD+C,EAC/CA,kBAAmBC,EAD4B,EAC5BA,cAD4B,EACbC,YAEzBllB,OAASilB,EAAcE,EAAIH,EAAkBhlB,OA5FjE,IA6FoD,EAAK0jB,cAGxD,EAAKI,gBAAgBxlD,KAAI,SAACye,GAAD,OAAWqnC,EAAWrnC,GAAI,kBAAM,EAAKqoC,SAASroC,UACtE3Y,GAAY0uB,EAAMj0B,OAAS,IAAMsF,GAC/B,gBAACk+B,GAAA,EAAD,CAAMC,MAAOX,EAAO0jB,qBAAsBf,IAE5ClgD,GAA4B,GAAhB0uB,EAAMj0B,QAChB,gBAACwjC,GAAA,EAAD,CAAMC,MAAOX,EAAO2jB,oBAAqBjB,GAE7C,gBAAChiB,GAAA,EAAD,CAAMC,MAAOX,EAAO4jB,2BACfnhD,GAAYkzB,EAAc,GAAKxE,EAAMj0B,OAAS,GAC3C,gBAAC6lC,GAAA,EAAD,CAAmBC,KAAK,QAAQN,MAAOl5B,EAAMy1B,uBAOrE,gBAAC,GAAD,CAAa0iB,eAAgB,kBAAM,EAAKthB,MAAMgiB,kB,GA9GbhpB,aAoH3CoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrB6hB,SAAU,CACN5kB,MAAO,QAEX6kB,eAAgB,GAChBa,0BAA2B,CACvBjhB,UAAW,GACXiC,aAAc,GACdvG,OAAQ,IAEZslB,mBAAoB,CAChBziB,KAAM,EACNI,WAAY,SACZqB,UAAW,IAEf+gB,oBAAqB,CACjB/gB,UAAW,GACXrB,WAAY,e,8aCjKxB,IAAMuB,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDoB,MAAOpB,EAAMlK,UAAU+O,WACvBkrB,QAAS/vB,EAAMlK,UAAUgP,kBACzBkrB,cAAehwB,EAAMlK,UAAU0L,qBAAqB7yB,SACpDD,aAAcsxB,EAAMlK,UAAU0L,qBAAqB9yB,aACnDmzB,YAAa7B,EAAMlK,UAAU0L,qBAAqB/yB,SAKhD+pB,G,4IAEGqG,KAAK0N,MAAMl8B,SAA6BixB,Q,+BAGtB,IAAD,SAC8EzC,KAAK0N,MAA9F72B,EADW,EACXA,MAAO0rB,EADI,EACJA,MAAO2uB,EADH,EACGA,QAASC,EADZ,EACYA,cAAethD,EAD3B,EAC2BA,aAAcmzB,EADzC,EACyCA,YAAaqM,EADtD,EACsDA,WAAY79B,EADlE,EACkEA,SAC9E67B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAAC,GAAD,CACIw4B,WAAYA,EACZkgB,WvFZa,GuFabH,UAAW,kBAAM,EAAKA,aACtBt/C,SAAUqhD,EACVthD,aAAcA,EACdmzB,YAAaA,EACbysB,gBAAgB,EAChBC,QAAS,kBAAMl+C,E9DoGmC,CAClE1D,KAAMgyB,GAAuBkK,6B8DpGbxL,MAAO0yB,EACP5jD,GAAI,SAACuwB,GAAD,OAA4BA,GAChCkyB,mBAAoB,gBAACzgB,GAAA,EAAD,CAAMtB,MAAOX,EAAO+jB,eAAgB3+C,KAAKC,EAAE,wBAC/Do9C,WAAY,SAACjyB,GAAD,OACR,gBAAC,GAAD,CAAc/zB,IAAG,kBAAoB+zB,EAAUqD,KAAMqB,EAAM1E,MAE/DoyB,oBAAqB5iB,EAAO+iB,sB,GA1BlB1pB,aAiCjBoH,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrB8iB,cAAe,CACXrhB,MAAOl5B,EAAMwM,KACb2uB,cAAe,GACfnC,SAAU,GACVe,WAAY,GACZd,UAAW,SACXuH,kBAAmB,IAEvB+Y,eAAgB,CACZ7kB,MAAO,OACP4C,SAAU,IACVuH,UAAW,eAKRxF,MAAetB,aAAUjV,K,kbCtDzB03B,G,yIAhBY,IAAD,EAC0BrxB,KAAK0N,MAA1CU,EADW,EACXA,SAAU//B,EADC,EACDA,QAAYijD,EADX,+BAGZC,EACFD,EAAY7uC,QAAUpU,GAAWA,EAAQW,UAAU,GAAKX,EAAQY,SAAS,IAAI4I,mBAAgB9N,GAE3FynD,EAAmBnjD,GAAWA,EAAQpB,UAAY,CAAC80C,OAAQ,CAAC0P,IAAKpjD,EAAQpB,YAAc,GAE7F,OACI,gBAAC,KAAD,QAAYqkD,EAAZ,CAAyB7uC,MAAO8uC,GAAiBC,GAC5CpjB,O,GAXW1H,aCHfgrB,GAAevkB,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrBL,QAAS,CACL+F,gBAAiBn9B,EAAMq1B,WACvBuC,cAAe,MACfE,WAAY,SACZ0I,kBAAmB,GACnB3L,OAAQ,GACRmI,cAAe,GAEnB8d,YAAa,CACT3d,gBAAiB,cACjBJ,SAAU,WACVwF,IAAK,EACLD,KAAM,EACNM,MAAO,GAEXmY,gBAAiB,CACbC,YAAa,cACbC,UAAW,GAEfC,WAAY,CACRxmB,MAAO,GACPG,OAAQ,GACRgL,YAAa,EACblI,eAAgB,SAChBG,WAAY,UAEhBqjB,eAAgB,CACZniB,SAAU,IAEd8e,gBAAiB,CACb3a,gBAAiBn9B,EAAMy1B,gBACvBgL,YAAa,EACbP,YAAalgC,EAAM81B,iBAEvB4kB,YAAa,CACTxhB,MAAOl5B,EAAMi1B,WAEjBrpB,MAAO,CACH8rB,KAAM,EACNwB,MAAOl5B,EAAMwM,KACb0rB,WAAY,MACZc,SAAU,IAEdoiB,YAAa,CACT1mB,MAAO,GACPG,OAAQ,GACR8C,eAAgB,SAChBG,WAAY,SACZyI,aAAc,GACdqF,WAAY,GAEhByV,UAAW,CACPriB,SAAU,S,8aCxCtB,IAAMK,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDpxB,KAAMoxB,EAAM9yB,QAAQ0B,SA8BlBoiD,G,uIAEEprB,GAAa,gB,+BAGM,IAAD,WAgBd/G,KAAK0N,MAdL72B,EAFc,EAEdA,MACAuoC,EAHc,EAGdA,OACArvC,EAJc,EAIdA,KACAqiD,EALc,EAKdA,aACAL,EANc,EAMdA,WACAM,EAPc,EAOdA,SACAC,EARc,EAQdA,SACAC,EATc,EASdA,iBACAC,EAVc,EAUdA,KACAC,EAXc,EAWdA,eACAC,EAZc,EAYdA,cACA9kB,EAbc,EAadA,aACAwV,EAdc,EAcdA,WACArT,EAfc,EAedA,MAGE1C,EAASqkB,GAAa76C,GAEtB05B,GAAavQ,KAAK0N,MAAM9G,QAAX,SAAoB5G,KAAK0N,MAAMilB,YAA/B,EAAoB,EAAkB/rB,QAAS,CAAC73B,KAAM,UAAUA,KAC7E0T,EAAQ4kB,GAAYkJ,GACpBqiB,EAAY7iB,GAASl5B,EAAMwM,KAC3BwvC,EAAwB7yB,KAAK0N,MAAMmlB,uBAAyBh8C,EAAMs1B,eAElE2mB,EAAmBN,EAAOO,KAAWhlB,KACrCilB,EAAgCR,EAChC,CACInZ,KAAmB,SAAbxiC,EAAMvJ,GAAgB,OAAS,UACrCgsC,UAAWpK,IAEf,GAEN,OACI,gBAAC4jB,EAAD,MACI9kB,MAAO,CACH,CAAC2H,WAAYyJ,EAAOhG,KACpB/L,EAAOY,QACPukB,EAAOnlB,EAAOskB,YAAc,GAC5BW,EAAWjlB,EAAOukB,gBAAkB,GACpChkB,IAEAolB,GAEHjB,GACG,gBAACxiB,GAAA,EAAD,CAAkBvB,MAAOX,EAAO0kB,WAAYviB,QAAS,kBAAM,EAAKhsB,SAC5D,gBAACs4B,GAAA,EAAD,CAAe9N,MAAO,CAACX,EAAO2kB,eAAgB,CAACjiB,MAAO6iB,IAAa7jD,KAAK,iBAG9EsjD,IACGI,GACG,gBAAC,GAAD,CACIpkD,QAAO,MAAE0B,OAAF,EAAEA,EAAM1B,QACf4kD,SAAO,EACP5iB,KAAM,GACNxC,eAAgBR,EAAOshB,gBACvBvL,WAAY/V,EAAOkkB,YACnB/X,cAAe,IACfhK,QAAS,kBAAM7I,GAAa,uBAGxC,gBAAC2I,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAO5qB,MAAO,CAACg6B,WAAY,GAAI1M,MAAO6iB,GAAYxP,GAAayG,cAAe,GACvF6I,GAAiBjwC,GA5B1B,MA8BK2vC,OA9BL,EA8BKA,EAAcpoD,KAAI,SAACkpD,EAAiBzlD,GAAlB,OACf,gBAACylD,EAAD,CACIppD,IAAG,iBAAmBymC,EAAU4iB,cAA7B,IAA8C1lD,EACjD05C,YAAa,CAAC9Z,EAAO4kB,YAAa,CAACje,gBAAiB6e,IACpDO,UAAW,CAAC/lB,EAAO6kB,UAAW,CAACniB,MAAO6iB,UAG5CL,GACE,gBAAChjB,GAAA,EAAD,CACIvB,MAAO,CAACX,EAAO4kB,YAAa,CAACje,gBAAiB6e,IAC9CrjB,QAAS,kBAAM7I,GAAa,oBAE5B,gBAACmV,GAAA,EAAD,CAAe/sC,KAAK,WAAWi/B,MAAOX,EAAO6kB,UAAWniB,MAAO6iB,U,GAjFzDlsB,aAyFxB2sB,GAAiBnjB,GAAetB,aAAUujB,KAEjC,SAASmB,GAAW5lB,GAC/B,IAAM0R,EAASsB,eACf,OAAO,gBAAC2S,GAAD,MAAgBjU,OAAQA,GAAY1R,I,8aC5H/C,IAAMwC,GAAiBtO,cAAQ,SAACT,GAAD,cAAsB,CACjDoB,MAAOuI,GAAMr5B,WAAWwlB,UAAU+O,WAClCxC,WAAYsH,GAAMr5B,WAAWwlB,UAAUuM,WACvCpF,UAAS,SAAE+C,EAAM9yB,QAAQ0B,OAAhB,SAAE,EAAoB1B,cAAtB,EAAE,EAA6Bf,OAStCimD,G,4IACkC,IACzB3sB,EAAS5G,KAAK0N,MAAd9G,MAEP,OAAIA,EAAM/7B,OACS+7B,EAAM/7B,OACdgzB,OAGJ,O,gCAGyB,IAAD,EACHmC,KAAK0N,MAA1BnL,EADwB,EACxBA,MAAOiB,EADiB,EACjBA,WACR3F,EAASmC,KAAKwzB,YACpB,OAAOhwB,IAAe3F,EAAS0E,EAAM1E,GAAU,Q,+BAG5B,IAAD,EACwBmC,KAAK0N,MAAxC72B,EADW,EACXA,MAAOunB,EADI,EACJA,UAAcq1B,EADV,8BAEZpmB,EAASS,GAAaj3B,GACtB68C,EAAUhC,GAAa76C,GAEvBqqB,EAAOlB,KAAK2zB,UAElB,GAAIzyB,EAAM,CACN,IAAMnxB,EAAOmxB,EAAKvyB,MAAM9E,QAAO,SAACgF,GAAD,OAAqBA,EAAEC,KAAOsvB,KAAW,GACxE,OACI,gBAACk1B,GAAD,QACQG,EADR,CAEI7sB,MAAO6sB,EAAW7sB,MAClBmrB,YAAY,EACZS,MAAM,EACNC,eACI,gBAAC,KAAD,CACI7D,YAAa8E,EAAQ/E,gBACrB5+C,KAAMA,EACNy/B,QAAS,kBAAM7I,GAAa,gBAAiB,CAACr5B,GAAIyC,EAAKjB,SAG/D4jD,cAAe3iD,EAAKhB,KACpBq0C,WAAY/V,EAAOt+B,QAGxB,OAAO,qC,GA5Cc23B,aAgD9BoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBv/B,KAAM,CACF8gC,SAAU,GACVd,WAAY,YAKlB6kB,GAAuB1jB,GAAetB,aAAU2kB,KAEvC,SAASM,GACpBnmB,GAEA,OAAO,gBAACkmB,GAAyBlmB,G,qhCCpCrC,IAAMwC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDoB,MAAOpB,EAAMlK,UAAU+O,WACvBxC,WAAYrC,EAAMlK,UAAUuM,WAC5BqB,cAAe1D,EAAMlK,UAAU4N,cAC/BxC,UAAWlB,EAAMlK,UAAU2N,YAAYvC,UACvC6D,WAAY/E,EAAMlK,UAAU2N,YAAYsB,WACxCC,oBAAqBhF,EAAMlK,UAAUkP,wBAWnCvM,G,qLACFma,IAAMrN,c,EACNotB,QAA2B,K,EAE3BC,qBAAmC,a,mDAEC,IACzBntB,EAAS5G,KAAK0N,MAAd9G,MAEP,OAAIA,EAAM/7B,OACS+7B,EAAM/7B,OACdgzB,OAGJ,O,gCAGyB,IAAD,EACHmC,KAAK0N,MAA1BnL,EADwB,EACxBA,MAAOiB,EADiB,EACjBA,WACR3F,EAASmC,KAAKwzB,YACpB,OAAOhwB,IAAe3F,EAAS0E,EAAM1E,GAAU,Q,sCAGpB,IAAD,OACpBrsB,EAAWwuB,KAAK0N,MAAMl8B,SAEtB+yB,EAAW,SAAOrD,GAAP,SAAAx2B,EAAAC,OAAA,gDACb6G,EAAS8yB,GAAapD,IACtB,EAAK8yB,uBAFQ,6DAKXn2B,EAASmC,KAAKwzB,YAEpB,GAAI31B,EAAQ,CACR,IAAMqD,EAAO4J,GAAMr5B,WAAWwlB,UAAU+O,WAAWnI,GAC/CqD,EAAMqD,EAASrD,GACd1vB,EnE+Sa,SAACqsB,GAAD,OAAwD,SAAOrsB,EAAUC,GAAjB,mBAAA/G,EAAAC,OAAA,uDAC3E+G,EAASD,IAAWE,KAApBD,MAD2E,WAAAhH,EAAA,MAG3DF,EAAe,SAASqzB,EAAU,MAAO,GAAI,GAAInsB,IAHU,WAG5E/F,EAH4E,QAKrEJ,SAAWhD,EAAeyK,GAL2C,uBAMxEnB,EAAWlG,EAAuCM,KANsB,kBAOvEyC,EAAiBmD,IAPsD,gCAQpE,MARoE,8DmE/S5DoiD,CAAep2B,IAAS91B,MAAK,SAACkG,GAAD,OAAOA,GAAKs2B,EAASt2B,S,0CAI7C,IAAD,OACfohC,EAAcrP,KAAK0N,MAAnB2B,WACPA,EAAW6N,YAAY,QAAQ,kBAAM,EAAK1J,YAC1CnE,EAAW6N,YAAY,SAAS,kBAAM,EAAKzJ,aAC3CzT,KAAKyT,Y,yCAGU6E,GAAkC,IAAD,EAChBtY,KAAK0N,MAA9BlK,EADyC,EACzCA,WAAYnB,EAD6B,EAC7BA,WAEdiW,EAASjW,WAAaA,GAAWrC,KAAKk0B,iBAEtC5b,EAAS9U,YAAcA,GAAmD,GAArCA,EAAW7zB,kBAAkBC,MAAWowB,KAAKg0B,yB,+BAGnE,InEqGE9yB,EmErGH,EAEYlB,KAAK0N,MAA7Bl8B,EAFY,EAEZA,SAAUgyB,EAFE,EAEFA,WACbA,GAAahyB,GnEkGK0vB,EmElGsCsC,EnEmGhEF,GAAW6wB,UAAUjzB,GACd,CAACpzB,KAAMgyB,GAAuBmK,gB,gCmEjGZ,IAAD,EACsBjK,KAAK0N,MAAxCrL,EADa,EACbA,UAAW6D,EADE,EACFA,WAAY10B,EADV,EACUA,SAG1B6wB,EAAWrC,KAAKk0B,gBAEVhuB,GAAa10B,EAA6B2xB,Q,6CAMlB,IAAD,EACOnD,KAAK0N,MAAtCl8B,EAD0B,EAC1BA,SAAU20B,EADgB,EAChBA,oBACXjF,EAAOlB,KAAK2zB,UAGdzyB,IAASiF,GAAsB30B,EnEwKX,SAAC0vB,GAAD,OAA8B,SAAO1vB,EAAUC,GAAjB,uBAAA/G,EAAAC,OAAA,mDACpDw2B,EAAQ1vB,IACP00B,EAAuBhF,EAAMlK,UAA7BkP,oBACDz0B,EAAQyvB,EAAMxvB,KAAKD,OAErBy0B,EALsD,iDAMpD/2B,EAAc8xB,EAAK9xB,YAErBk0B,GAAW7B,eAAiBryB,GAC5BoC,EAASk0B,GAAsBxE,IAGzBkzB,EAAYhlD,EAAYY,UAAU1B,SAEtB,SAAZ+lD,EAAmBzkD,GAAP,qBAAAlF,EAAAC,OAAA,kEAAAD,EAAA,MACSF,EAAe,SACzB02B,EAAK5zB,GADmB,YAEjC,MACA,CAACsC,OAAMizB,MzBpTa,GyBoTgBuxB,aACpC,GACA1iD,IANU,OACR/F,EADQ,OASR2oD,EAAa,SAACxnD,GAChB,IAAMiD,EAAOmxB,EAAKvyB,MAAMf,MAAK,SAACC,GAAD,OAAOA,EAAEiB,MAAQhC,EAAIyC,YAClD,OAAOQ,EAAOP,EAAwBO,EAAMjD,QAAO/C,GAGnD4B,EAASJ,SAAWhD,EAAeyK,IAE7BvD,GADAqzB,EAAYn3B,GACUM,KACvBjC,IAAIsqD,GACJzqD,QAAO,SAACg3B,GAAD,YAAa92B,IAAN82B,KAGfjxB,EAAOkzB,EAAUC,KAAKE,WAAYoxB,EAAUzkD,EAAO,GAC9CH,EAASlF,OAAS,GAAKkF,EAAS,IAErC6zB,GAAWrB,YAAYf,EAAK5zB,GAAImC,EAAS,GAAGX,IAAKW,EAAS,GAAGO,UAAU1B,UAE3EkD,EAASs0B,GAAwB5E,EAAMzxB,KACpC+B,EAASo0B,GAAwB1E,IA3B1B,4DA8BlBmzB,CAAU,IAEV7iD,EAASo0B,GAAwB1E,IA9CqB,6DmExKUqzB,CAAiBrzB,IAG7EA,GAAQA,EAAKzxB,SAASlF,O5F7HE,I4F6H6By1B,KAAKw0B,iB,qCAGpC,IACnBhjD,EAAYwuB,KAAK0N,MAAjBl8B,SACD0vB,EAAOlB,KAAK2zB,UACdzyB,IAASA,EAAKvxB,kBAAkBG,UAAW0B,EnEiNnB,SAAC0vB,GAAD,OAA8B,SAAO1vB,EAAUC,GAAjB,iCAAA/G,EAAAC,OAAA,mDACxDw2B,EAAQ1vB,IAEI4wB,EACdlB,EAAMlK,UADN2N,YAAcvC,UAEZ3wB,EAAQyvB,EAAMxvB,KAAKD,QACnBgxB,EAAaxB,EAAKvxB,mBAETG,UAAa4yB,EAAW7yB,aARuB,qDAU1DwyB,EAV0D,wBAW1D7wB,EAAS4zB,GAA0BlE,IAG7BuzB,EACFvzB,EAAKzxB,SAASlF,OAAS,EAAI22B,EAAKzxB,SAASyxB,EAAKzxB,SAASlF,OAAS,GAAGyF,UAAU1B,cAAWvE,EAflC,YAAAW,EAAA,MAiBnCF,EAAe,SACzB02B,EAAK5zB,GADmB,YAEjC,MACA,CAACsC,KAAM,EAAGizB,MzBxWc,GyBwWe4xB,cACvC,GACA/iD,IAtBsD,QAiBpD/F,EAjBoD,OAyBpD2oD,EAAa,SAACxnD,GAChB,IAAMiD,EAAOmxB,EAAKvyB,MAAMf,MAAK,SAACC,GAAD,OAAOA,EAAEiB,MAAQhC,EAAIyC,YAClD,OAAOQ,EAAOP,EAAwBO,EAAMjD,QAAO/C,GAGnD4B,EAASJ,SAAWhD,EAAeyK,IAE7BvD,GADAqzB,EAAYn3B,GACUM,KACvBjC,IAAIsqD,GACJzqD,QAAO,SAACg3B,GAAD,YAAa92B,IAAN82B,KACbhxB,EAAeizB,EAAUC,KAAKC,YAAcF,EAAUC,KAAKE,WACjEzxB,EAASg0B,GAA4BtE,EAAMzxB,EAA+BI,KACvE2B,EAAS8zB,GAA4BpE,IArCc,wBAuC1D1vB,EAAS8zB,GAA4BpE,IAvCqB,8DmEjNkBwzB,CAAqBxzB,M,iCAGlF4yB,GACf,GAAoB,QAAhBpsB,KAASC,GAAc,CACvB,GAAgB,OAAZmsB,EAAkB9zB,KAAK+zB,4BACtB,GAAqB,OAAjB/zB,KAAK8zB,QAAkB,CAG5B,IAAMa,EAAab,EAAQc,oBACrBC,EAAWF,EAAWhtD,iBAAiB,SAAS,SAAC2L,GACnD,IAAMrF,ECrJnB,SAA6BqF,GAEhC,IAEMwhD,EAActpB,KAAWC,IAAI,UAAUC,OAEzCqpB,EAAK,EACLC,EAAK,EAoBT,MAjBI,WAAY1hD,IAAGyhD,EAAKzhD,EAAE2hD,QACtB,eAAgB3hD,IAAGyhD,GAAOzhD,EAA2B4hD,WAAa,KAClE,gBAAiB5hD,IAAGyhD,GAAOzhD,EAA4B6hD,YAAc,MAEtDH,EAAf,WAAY1hD,EAAQA,EAAE8hD,OAZP,GAaTL,IAEAzhD,EAAE+hD,YAEW,GAAf/hD,EAAE+hD,UAAgBL,GAhBN,GAkBXA,GAAMF,GAIXE,IAAOD,IAAIA,EAAKC,EAAK,GAAK,EAAI,GAE3B,CAACM,MAAOP,EAAIQ,OAAQP,GD0HDQ,CAAoBliD,GAC9BqhD,EAAWc,WAAwB,IAAXxnD,EAAEsnD,OAC1BjiD,EAAEoiD,oBAEN11B,KAAK+zB,qBAAuB,kBAAMY,EAAWgB,oBAAoB,QAASd,IAC1Ef,EAAQ8B,eAAe,CAAC5nB,MAAO,CAAC6nB,UAAW,mCAE/C71B,KAAK8zB,QAAUA,K,+BAIA,IAAD,SACuB9zB,KAAK0N,MAAvC72B,EADW,EACXA,MAAOguB,EADI,EACJA,cAAerzB,EADX,EACWA,SACvB67B,EAASS,GAAaj3B,GAEtBqqB,EAAOlB,KAAK2zB,UAEdmC,EAAgB,iCACpB,GAAI50B,GAAQ2D,EAAe,CACvB,IAAMkxB,EAAcpsD,OAAOC,KAAKs3B,EAAKxxB,SAAS9B,MAAK,SAACN,GAAD,OAAqC,IAArB4zB,EAAKxxB,QAAQpC,MAC1E0oD,EAAcD,EAAc70B,EAAKvyB,MAAMf,MAAK,SAACC,GAAD,OAAOA,EAAEiB,KAAOinD,UAAehsD,EAG3EksD,EAAmD,GACrD/0B,EAAKzxB,SAASlF,OAAS,GACvB22B,EAAKvyB,MAAM0E,SAAQ,SAACxF,GACZA,EAAEiB,KAAO+1B,EAAc/1B,KAAOjB,EAAEqB,oBAC5B+mD,EAAgBpoD,EAAEqB,mBAAoB+mD,EAAgBpoD,EAAEqB,mBAAmBqyB,KAAK1zB,GAC/EooD,EAAgBpoD,EAAEqB,mBAAqB,CAACrB,OAKzDioD,EACI,gBAAC,KAAD,CACI/hB,IAAK/T,KAAK+T,IACVmiB,6BAA6B,EAC7BzmD,SAAUyxB,EAAKzxB,SACfM,KAAM80B,EACNsxB,WAAY,SAACzoB,GAAD,OACR,gBAAC,KAAD,QAAUA,EAAV,CAAiBG,eAAgBR,EAAO+oB,gBACpC,gBAACta,GAAA,EAAD,CAAe/sC,KAAK,OAAOi/B,MAAOX,EAAOxyB,SAGjDw7C,aAAc,SAAC3oB,GAAD,OACV,gBAAC,KAAD,QACQA,EADR,CAEI4oB,YAAa,SAACC,GAAD,OACT,gBAACxoB,GAAA,EAAD,CAAMC,MAAOX,EAAOmpB,uBACfD,EAAeE,UACZ,gBAAC3a,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAOqpB,cAE7CH,EAAezxB,MAAQ,gBAACgX,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAOqpB,gBAG1Ejf,UAAW,CAAC0B,KAAM9L,EAAOspB,eAAgBld,MAAOpM,EAAOupB,iBACvDhpB,aAAc,CAACuL,KAAM9L,EAAOwpB,kBAAmBpd,MAAOpM,EAAOypB,wBAGrEC,cAAe,SAACrpB,GACZ,IAAMspB,EAAStpB,EAAM6oB,eAAiBN,EAAgBvoB,EAAM6oB,eAAeznD,KAAO,GAClF,OAAO,gBAACmoD,GAAD,CAAapgD,MAAOA,EAAOmgD,OAAQA,GAAU,GAAIE,aAAcxpB,KAE1EypB,mBAAoB,SAACzpB,GAAD,OAChB,gBAAC,KAAD,QACQA,EADR,CAEIG,eAAgBR,EAAO+pB,sBACvBC,aAAchqB,EAAOiqB,wBAG7BC,aAAc,kBAAM,gBAACC,GAAD,CAAYxB,YAAaA,EAAan/C,MAAOA,KACjE4gD,cAAe,SAAC/pB,GAAD,OAAyB,gBAACgqB,GAAD,CAAaC,aAAcjqB,EAAO72B,MAAOA,KAEjF+gD,mBAAoB,SAACllD,GACbA,EAAEnI,OAAS,GAAG+4B,GAAWu0B,WAAW32B,IAE5C42B,OAAQ,SAACroD,GACLA,EAAS4D,SAAQ,SAACwtB,GAAD,OACZrvB,EAA6BmzB,GAAgB9D,EAAE/xB,IAAM,GAAI+xB,EAAExd,KAAMwd,EAAE7wB,gBAG5E+nD,YAAa72B,EAAKvxB,kBAAkBE,cAAgBqxB,EAAKvxB,kBAAkBG,SAC3EkoD,iBAAkB92B,EAAKvxB,kBAAkBG,SACzCmoD,cAAe,WACX,EAAKzD,gBAET0D,WAAY,QACZC,cAAe,CACXpkB,IAAK,SAACvtB,GAAD,OAAiB,EAAK4xC,WAAW5xC,IACtC6xC,aAAc,kBAAM,EAAK7D,gBACzB8D,sBAAuB,SAAC5qB,GAAD,OACnB,gBAAC0P,GAAA,EAAD,QACQ1P,EADR,CAEI6P,sBAAuB,CACnB7P,EAAM6P,sBAGN,CAAC1J,cAAe,WAKhC0kB,eAAgB,SAAC7qB,GAAD,OACZ,gBAAC,KAAD,QACQA,EADR,CAEIgO,eAAc,SACPhO,EAAMgO,gBADC,IAEV8c,WAAW,EACXxqB,MAAO,CACHX,EAAOorB,UACS,QAAhB/wB,KAASC,GAAgB,CAACsP,QAAS,QAAwB,IAE/DyhB,WAAW,GACS,QAAhBhxB,KAASC,GACP,CACI8L,QAAS,kBAAM,EAAKyM,eACpByY,WAAY,SAACC,GACT,IACiE,EAD3DtlD,EAAKslD,EACG,UAAVtlD,EAAExJ,KAAoBwJ,EAAEulD,QAAWvlD,EAAEwlD,WAAYprB,EAAMrqB,OAEvD,WAAK0wB,IAAIlN,UAAT,EAAkBixB,OAAO,CAAC,CAACz0C,KAAMqqB,EAAMrqB,KAAKtJ,UAAmB,MAI3E,QAIlBg/C,sBAAuBC,KAKnC,OACI,gBAAC,GAAD,KACI,gBAACpb,GAAA,EAAD,CAAsBC,SAA0B,QAAhBnW,KAASC,GAAe,eAAY59B,EAAWikC,MAAOX,EAAOa,WACxF4nB,Q,GA1OIpvB,aAiPzB,SAAS8wB,GAAT,GAAoG,IAA/ExB,EAA8E,EAA9EA,YAAan/C,EAAiE,EAAjEA,MAC9B,OAAIm/C,EAEI,gBAACjoB,GAAA,EAAD,CAAMC,MAAO,CAACtC,OAAQ,GAAIiK,WAAY,GAAI1D,aAAc,IACpD,gBAAC,KAAD,CACInoC,IAAI,YACJiG,KAAMimD,EACNiD,gBAAgB,EAChBrlB,SAAS,OACTslB,aAAc,SAACxrB,GAAD,OAA8B,gBAAC,KAAD,QAAkBA,EAAlB,CAAyB39B,KAAMimD,MAC3EK,aAAc,SAAC3oB,GAAD,OACV,gBAAC,KAAD,QACQA,EADR,CAEIE,aAAc,CACVuL,KAAM,CAACnF,gBAAiB,eACxByF,MAAO,IAEX0f,iBAAkB,kBACd,gBAAC,KAAD,CACIC,SAAUviD,EAAMm1B,UAChBqtB,aAAc,EACdC,SAAU,IACVC,UAAW,EACXC,UAAW,EACXC,KAAM,GACNC,MAAO,aAQzB,iCAGlB,SAASzC,GAAT,GAQiB,IAAD,IAPZpgD,EAOY,EAPZA,MACAmgD,EAMY,EANZA,OACAE,EAKY,EALZA,aAMM7pB,EAASS,GAAaj3B,GAC5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAiC,SAA1BkpB,EAAatjB,SAAsBvG,EAAOssB,qBAAuBtsB,EAAOusB,uBACjF,gBAAC,KAAD,QACQ1C,EADR,CAEIrpB,eAAgB,CACZsL,KAAM,UAAC+d,EAAarpB,qBAAd,EAAC,EAA6BsL,MACpCM,MAAO,UAACyd,EAAarpB,qBAAd,EAAC,EAA6B4L,MAAO,CAACxH,aAAc,QAGlE+kB,EAAOzsD,OAAS,GACb,gBAACwjC,GAAA,EAAD,CACIC,MAAO,CACuB,SAA1BkpB,EAAatjB,SACPvG,EAAOwsB,yBACPxsB,EAAOysB,4BAGhB9C,EAAOhtD,KAAI,SAAC6D,GAAD,OACR,gBAAC,KAAD,CACI/D,IAAG,gBAAkB+D,EAAEiB,IACvBiB,KAAMlC,EACN+gD,YAAavhB,EAAO0sB,kBACpBtiB,UAAWpK,EAAO2sB,6BAS9C,SAAStC,GAAT,GAAqG,EAA/EC,aAA+E,EAAjE9gD,MAChC,OAAO,iCAgDX,IAAMi3B,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNhD,MAAO,QAEX6rB,sBAAuB,CACnB5oB,eAAgB,SAChByrB,eAAgB,EAChBjmB,gBAAiBn9B,EAAMq1B,YAE3BorB,oBAAqB,CACjB3oB,WAAY,YAEhB8pB,UAAW,CACPzkB,gBAAiBn9B,EAAMs1B,eAGvBiL,aAAc,GACdzG,eApYkB,GAqYlBqF,iBAAkB,GAClBqB,kBAAmB,GACnB1B,WAAY,GACZ9B,cAAe,GACfhE,SAAU,GACVtB,KAAM,EACNI,WAAY,SACZ+G,UAAW,WACX3F,MAAOl5B,EAAMwM,MAEjBxI,KAAM,CACFg1B,SAAU,GACVE,MAAOl5B,EAAMu1B,QAEjBgqB,cAAe,CACX1qB,OArZa,GAsZb8C,eAAgB,SAChBmC,eAtZkB,GAuZlB+F,YAAa,IAEjBwjB,gBAAiB,CACbxuB,OA3Za,GA4Zb8C,eAAgB,UAEpB2rB,WAAY,CACRtqB,SAAU,GACVtE,MAAO,GACPG,OAAQ,GACRqE,MAAOl5B,EAAMwM,MAEjBwzC,kBAAmB,CACf7iB,gBAAiBn9B,EAAMi2B,YAE3BgqB,mBAAoB,CAChBhP,YAAa,IAEjB6O,eAAgB,CACZ5mB,MAAOl5B,EAAMwM,MAEjBuzC,gBAAiB,CACbna,WAAY,GAEhBkd,qBAAsB,GACtBC,sBAAuB,CACnB/R,aAAc,IAElBgS,yBAA0B,CACtBjmB,SAAU,WACV6F,MAAO,EACPd,OAAQ,GAEZmhB,0BAA2B,CACvBlmB,SAAU,WACV6F,MAAO,EACPd,OAAQ,GAEZohB,kBAAmB,CACfxuB,MAAO,GACPG,OAAQ,IAEZsuB,sBAAuB,CACnBnqB,SAAU,IAEd2mB,sBAAuB,CACnB9f,YAAa,EACb0jB,SAAU,IAEd1D,YAAa,CACT7mB,SAAU,GACVE,MAAOl5B,EAAMi1B,gBAKVoE,MAAetB,aAAUhV,K,UEjhB3BygC,GAA0C,CAAC,aAAc,mBAGzDC,GAAmE,CAC5EzhC,aAAc,QACdE,aAAc,QACdD,qBAAsB,QACtBqB,cAAe,QACfD,gBAAiB,SAIRqgC,GAA0C,CACnD,kBACA,aACA,sBACA,aACA,uBACA,qBACA,kBACA,6BACA,gBACA,iBACA,UACA,gBACA,cACA,oBACA,eACA,mBACA,0BACmB/zB,OAAOgB,I,8aCnB9B,IAAMgzB,GAAQC,eAmECC,O,oJAhEgB,IAEnBC,EAFkB,OAGtBC,KAAWjzD,iBAAiB,UAAU,SAAC4D,GAET,WAAtBovD,GAA6C,WAAXpvD,GAAqB,EAAKsvD,cAEtC,WAAtBF,GAA6C,WAAXpvD,GAAqB,EAAKuvD,gBAChEH,EAAoBpvD,O,oCAMxB,IAAK+3B,GAAW7B,cAAe,CAAC,IAAD,IACrBmF,EAAK,SAAGH,GAAkBI,UAArB,SAAG,EAA2Bk0B,wBAA9B,EAAG,EAA8ChsD,KAC7CsrD,GAAsBW,SAASp0B,IACjCkE,GAAMt5B,SAA6B2xB,S,sCAMhDG,GAAW7B,eAAeqJ,GAAMt5B,SAASsyB,Q,+BAI7C,OACI,gBAAC02B,GAAMrW,UAAP,CAAiB8W,WAAW,UACxB,gBAACT,GAAMlW,OAAP,CACIv1C,KAAK,kBACLw1C,UAAW5qB,GACX6qB,QAAS,CACL/hC,MAAO2kB,GAAY,mBACnB8zB,aAAa,EACb3lB,OAAQ,SAAC7H,GAAD,OAA6B,gBAAC4lB,GAAe5lB,OAG7D,gBAAC8sB,GAAMlW,OAAP,CACIv1C,KAAK,aACLy1C,QAAS,iBAAO,CAAC0W,aAAa,EAAOz4C,MAAO2kB,GAAY,kBAEvD,SAACsG,GAAD,OACG,gCACI,gBAAC,GAAeA,GAChB,gBAACmmB,GAAqBnmB,Y,GA9CjBhH,a,8aCRjC,IAAMwJ,GAAiBtO,eASjBu5B,G,yIACqB,IAAD,EACyBn7B,KAAK0N,MAAzCl8B,EADW,EACXA,SAAUqF,EADC,EACDA,MAAOukD,EADN,EACMA,SAAUptB,EADhB,EACgBA,MAC5BX,EAASS,GAAaj3B,GAE5B,OACI,gBAAC04B,GAAA,EAAD,CACIC,QAAS,WACLh+B,EAAS8D,MACL8lD,GAAUA,MAGlB,gBAAC9rB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAOhqB,KAAM2qB,IAASv7B,KAAKC,EAAE,gB,GAZhCg0B,aAkBrBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBjrB,KAAM,CACFwsB,SAAU,GACVE,MAAOl5B,EAAM3O,YAKVgoC,MAAetB,aAAUusB,K,u/BClClCthC,G,+IAC2BwhC,G,kFAGR,mDACI,mCAEfpZ,EAASqZ,yD,+BADiCD,E,KACjCC,iDAETrwD,EAAmC,CACrCC,OAAQ,mBACR,eAAgB,oBAEpB/C,QAAQyD,IAAIq2C,G,mBACWl2C,MAAMk2C,EAAK,CAACr3C,OAAQ,MAAOK,a,cAA5CU,E,yBACCA,G,kGAIPq0B,KAAKu7B,eAAe,eAAexzD,MAAK,SAAC4D,GAAD,OAAcxD,QAAQyD,IAAIC,KAAKC,UAAUH,S,+BAG9D,IACZkL,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAIhB,gBAAC2C,EAAA,EAAD,CAAa7C,MAAOX,EAAOsF,KAAM5jC,KAAK,UACtC,gBAACugC,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAApB,qDACA,gBAACsrB,GAAA,EAAD,CAAMC,MAAOX,EAAOmuB,YACpB,gBAAClsB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAOouB,UAAW,CAAC1sB,WAAY,UAA7C,kEAGA,gBAACO,GAAA,EAAD,CAAMtB,MAAOX,EAAOouB,WAApB,+EAGA,gBAAC,GAAD,CAAcztB,MAAOX,EAAOquB,qB,GAzCpBh1B,aAgDtBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNhD,MAAO,OACPqE,QAAS,GACTjB,WAAY,SACZH,eAAgB,UAEpB/rB,MAAM,IACF8oB,MAAO,OACPuE,UAAW,SACXD,SAAU,GACVE,MAAOl5B,EAAMwM,MACV2rB,IAEPysB,UAAW,CACPlwB,MAAO,OACPuE,UAAW,OACXD,SAAU,GACVE,MAAOl5B,EAAMwM,KACbstB,eAAgB,IAEpBgC,KAAM,CACF5C,MAAOl5B,EAAMu1B,OACbyD,SAAU,GACVgE,cAAe,IAEnB2nB,UAAW,CACP7qB,eAAgB,GAChBjF,OAAQ,EACRgR,QAAS,GACTnR,MAAO,OACPyI,gBAAiBn9B,EAAMwM,MAE3Bq4C,aAAc,CACV1rB,UAAW,SAKRpB,aAAU/U,I,8aCrFlB,IAAM8hC,GAAb,qLACI3hB,SAAWtT,IAAM4L,YADrB,8CAGkB,IAAD,EACT,SAAAtS,KAAKga,SAASnT,UAAd,EAAuBsT,SAJ/B,+BAO2B,IAAD,EAC+Bna,KAAK0N,MAA/C72B,EADW,EACXA,MAAOxI,EADI,EACJA,QAASutD,EADL,EACKA,QAAY9pB,EADjB,sCAEZzE,EAASS,GAAaj3B,GAC5B,OACI,kBAACyjC,GAAD,MACIvG,IAAK/T,KAAKga,UACNlI,EAFR,CAGI8H,cAAe,SAACmJ,GAAD,OACX10C,EACI,oCACI,kBAACihC,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MACf5Q,KAAKC,EAAE,gBAAiB,CAACqF,UAAW1J,EAAQW,UAAWgJ,SAAU3J,EAAQY,YAE9E,kBAAC8+B,GAAA,EAAD,CAAMC,MAAOX,EAAOkN,sBAChB,kBAAC,GAAD,CACIl3B,KAAM5Q,KAAKC,EAAE,UACb88B,QAAS,kBAAMuT,KACfvL,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOoN,aAEtB,kBAAC,GAAD,CACIp3B,KAAM5Q,KAAKC,EAAE,gBACb88B,QAAS,WACLuT,IACCjY,GAAMt5B,SAA6B8sB,GAAajwB,EAAQf,KACrDsuD,GAASA,KAEjBpkB,KAAK,iBACLxJ,MAAO,CAACX,EAAOmN,aAAcnN,EAAOqN,eACpCjD,UAAWpK,EAAOoN,eAK9B,6CA1CxB,GAA4C/T,IAAMwN,WAkD5CpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBiM,qBAAsB,CAClBhP,MAAO,OACPkD,cAAe,MACfuB,UAAW,IAEfwK,aAAc,CACVjM,KAAM,EACNyH,iBAAkB,GAClBrF,eAAgB,GAEpB8J,WAAY,CACR5K,SAAU,IAEd6K,cAAe,CACX1G,gBAAiBn9B,EAAM3O,OAG3Bmb,KAAM,CACFwsB,SAAU,GACVC,UAAW,UACXC,MAAOl5B,EAAMwM,WAKVurB,gBAAU+sB,I,4bC/EJE,G,yIACM,IAAD,EACuD77B,KAAK0N,MAAvE//B,EADW,EACXA,WAAYkgC,EADD,EACCA,eAAgBiuB,EADjB,EACiBA,SAAUC,EAD3B,EAC2BA,UAAcjqB,EADzC,+DAGlB,OACI,gBAAC/D,GAAA,EAAD,CAAMC,MAAO,CAAC,CAACS,cAAe,MAAOE,WAAY,UAAWd,IACvDlgC,GACG,gCACI,gBAAC,KAAD,CACIquD,YAAaruD,EAAWvB,QACxB0vD,SAAUA,GAAY,GACtBG,UAAWF,IAAa,IAE5B,gBAACzsB,GAAA,EAAD,QAAUwC,EAAV,CAAsB9D,MAAO,CAAC,CAACyO,YAAa,GAAI3K,EAAW9D,SACtDv7B,KAAKC,EAAL,gBAAuB/E,EAAW7D,Y,GAdd48B,a,kbCI3Cw1B,G,yIACqB,IAAD,EACgEl8B,KAAK0N,MAAhFlP,EADW,EACXA,MAAOzC,EADI,EACJA,MAAOogC,EADH,EACGA,UAAWC,EADd,EACcA,SAAUvuB,EADxB,EACwBA,eAAgBwuB,EADxC,EACwCA,UAAW5kB,EADnD,EACmDA,UAErE,OAEI,gBAAC,KAAD,MACK,YAA0B,IAAxB5gC,EAAuB,EAAvBA,MACOw2B,EAASS,GAAaj3B,GAC5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOa,UAAWL,IAC3BrP,EAAMx0B,KAAI,SAACye,EAAOhb,GAAR,OACP,gBAAC6uD,GAAD,CACIxyD,IAAG,SAAW2D,EAAX,IAAgBgb,EACnBpF,KAAM0Y,EAAQA,EAAMtT,GAAoB,kBAAPA,EAAkBA,EAAK5c,KAAKC,UAAU2c,GACvE0zC,UAAWA,EACXC,SAAU,WACFA,GAAUA,EAAS3zC,IAE3B4zC,UAAWA,EACX5kB,UAAWA,e,GApBxB/Q,aAuCjB41B,GAAO1tB,cACT,YAAuF,IAArFvrB,EAAoF,EAApFA,KAAM84C,EAA8E,EAA9EA,UAAWC,EAAmE,EAAnEA,SAAUvlD,EAAyD,EAAzDA,MAAOwlD,EAAkD,EAAlDA,UAAW5kB,EAAuC,EAAvCA,UACrCpK,EAASS,GAAaj3B,GAC5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOkvB,KAAMF,IACvB,gBAAC/sB,GAAA,EAAD,CACItB,MAAO,CACHX,EAAOmvB,SACPL,EAAY,CAACzlB,YAAa,IAAgD,GAC1Ee,GAEJoS,cAAe,GAEdxmC,GAEJ84C,GACG,gBAAC5sB,GAAA,EAAD,CACIvB,MAAOX,EAAOovB,iBACdjtB,QAAS,WACD4sB,GAAUA,MAGlB,gBAACtgB,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAOqvB,sBAQrD5uB,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPO,cAAe,MACfkuB,SAAU,OACVnuB,eAAgB,cAEpB+tB,KAAM,CACF9tB,cAAe,MACfE,WAAY,SACZqF,gBAAiBn9B,EAAMw1B,aACvB4D,gBAAiB,EACjBoH,kBAAmB,GACnBD,aAAc,GACdV,YAAa,EACbzE,aAAc,GAElBuqB,SAAU,CACN3sB,SAAU,GACVE,MAAOl5B,EAAMk1B,WAEjB0wB,iBAAkB,CACd7oB,SAAU,WACV6F,MAAO,EACPlO,MAAO,GACPG,OAAQ,GACRiD,WAAY,SACZH,eAAgB,UAEpBkuB,eAAgB,CACZ7sB,SAAU,GACVE,MAAOl5B,EAAMk1B,gBAKVmwB,M,SCxHA,SAASU,GAAT,GAAkG,IAA7EnpB,EAA4E,EAA5EA,QAASD,EAAmE,EAAnEA,OASzC,OARAqpB,0BACIn2B,eAAkB,WAEd,OADI+M,GAASA,IACN,WACCD,GAAQA,OAEjB,KAEA,iC,m/BCNX,IAWMspB,GAAsC,CACxCC,WAAY,2BACZ5jB,KAAM,sBAkFK6jB,G,kCAzEX,WAAYtvB,GAAuB,IAAD,uBAC9B,cAAMA,IAHVuvB,OAAS,IAAIle,KAAWC,MAAM,GAI1B,EAAK7d,MAAQ,CAAC+7B,WAAW,GAFK,E,kDAKrB9zB,GAAmB,IAAD,OAC3B,GAAIA,IAAMpJ,KAAKmB,MAAM+7B,YAErBl9B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+7B,UAAW9zB,KAErCA,GAAG,CACH,IAAM+zB,EAAMn9B,KAAK0N,MAAM0vB,UACvB,GAAY,eAARD,EAAsB,EACN,SAAVE,EAAWC,GACbve,KAAWc,OAAO,EAAKod,OAAQ,CAC3Bnd,QAASwd,EAAOC,MAA0B,KAC1Cxd,SArCP,IAsCOL,OAAQC,KAAO6d,MAAM7d,KAAO8d,UAC7Bzd,OAAM,WAELjB,KAAWc,OAAO,EAAKod,OAAQ,CAC3Bnd,QAAS,EACTC,SA3CX,IA4CWL,OAAQC,KAAO+d,SAChB1d,OAAM,WAED,EAAK7e,MAAM+7B,YACPI,EAAMl8B,YAAW,kBAAMi8B,GAASC,KA/CtD,KAgDuBD,GAASC,UAK9BD,EAAQ,QACL,GAAY,SAARF,EAAgB,EACP,SAAVE,IACFte,KAAWc,OAAO,EAAKod,OAAQ,CAC3Bnd,SAAS,KACTC,SA3DP,IA4DOL,OAAQC,KAAO6d,MAAM7d,KAAO8d,UAC7Bzd,OAAM,WAELjB,KAAWc,OAAO,EAAKod,OAAQ,CAC3Bnd,QAAS,EACTC,SAjEX,IAkEWL,OAAQC,KAAO+d,SAChB1d,OAAM,WAED,EAAK7e,MAAM+7B,WAAW97B,WAAWi8B,EApEnD,WAwEEA,O,+BAKW,IAAD,SACoBr9B,KAAK0N,MAApC0vB,EADW,EACXA,UAAWpvB,EADA,EACAA,MAAOolB,EADP,EACOA,UAEnBuK,EAAWb,GAAWM,GAE5B,OACI,gBAACrvB,GAAA,EAAD,CAAMC,MAAO,CAACA,IACV,gBAAC4uB,GAAD,CAAYnpB,QAAS,kBAAM,EAAKmqB,cAAa,IAAOpqB,OAAQ,kBAAM,EAAKoqB,cAAa,MACpF,gBAAC,KAAW7vB,KAAZ,CAAiBC,MAAO,CAACmL,KAAMnZ,KAAKi9B,SAC/BU,GAAY,gBAACvhB,GAAA,EAAD,CAAwBrtC,KAAM4uD,EAAU3vB,MAAOolB,U,GArEzD1sB,a,m/BCUvB,IAAM4mB,GAAQ,CACV3I,WAAY,GACZC,gBAAiB,GACjBxN,aAAc,IAGZymB,G,kCAIF,WAAYnwB,GAA+B,IAAD,uBACtC,cAAMA,IAJVowB,QAAUp3B,cAKN,EAAKvF,MAAQ,CACT48B,UAAU,EACVryB,OAAQ,IAAIqT,KAAWC,MAAMgf,IAC7Bd,WAAW,GAEf,EAAK3vB,OAAS,CAAC0wB,EAAG,EAAGpN,EAAG,EAAGtlB,MAAO,EAAGG,OAAQ,GAPP,E,8CAUhC,IAAD,OAEe,QAAhBhE,KAASC,GACT3H,KAAKiU,SAAL,SACOjU,KAAKmB,OADZ,IAEI48B,UAAU,EACVryB,OAAQ,IAAIqT,KAAWC,MAAMkf,QAGjCl+B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+7B,WAAW,KACzCne,KAAWc,OAAO7f,KAAKmB,MAAMuK,OAAQ,CACjCoU,QAASoe,GACTne,SAXS,IAYTL,OAAQC,KAAOwe,QAAQ,KACxBne,QACH5e,YAAW,kBAAM,EAAK6S,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B+7B,WAAW,EAAOa,UAAU,OAd9D,Q,iCAkBT,IAAD,OACP,GAAoB,QAAhBr2B,KAASC,GACT3H,KAAKiU,SAAL,SACOjU,KAAKmB,OADZ,IAEI48B,UAAU,EACVryB,OAAQ,IAAIqT,KAAWC,MAAMgf,WAE9B,CAEHh+B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B+7B,WAAW,EAAMa,UAAU,KACzDhf,KAAWc,OAAO7f,KAAKmB,MAAMuK,OAAQ,CACjCoU,QAASke,GACTje,SAJa,IAKbL,OAAQC,KAAOye,IAAIze,KAAO+d,UAC3B1d,QACH5e,YAAW,kBAAM,EAAK6S,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B+7B,WAAW,OAPzC,Q,2BAWpBhY,EAAuBzL,GAAkB,IAAD,EAazC,SAAAzZ,KAAK89B,QAAQj3B,UAAb,EAAsB8e,SAAST,EAAUzL,K,uCAIpCzZ,KAAKmB,MAAM48B,SAGT/9B,KAAK2lB,YAFR3lB,KAAKq+B,SACDr+B,KAAK0N,MAAM4wB,UAAUt+B,KAAK0N,MAAM4wB,SAASt+B,KAAKuN,W,+BAIhD,IAAD,SACkCvN,KAAK0N,MAArC72B,EADF,EACEA,MAAOxI,EADT,EACSA,QAASkwD,EADlB,EACkBA,aADlB,EAEiCv+B,KAAKmB,MAApC48B,EAFF,EAEEA,SAAUb,EAFZ,EAEYA,UAAWxxB,EAFvB,EAEuBA,OACtB2B,EAASS,GAAaj3B,GAEtB2nD,EAAWnwD,EAAQW,UAAY,IAAMX,EAAQY,SAE7CwvD,EAAiB,CAACpC,UAAWhvB,EAAOkvB,MAEpCn0B,EACF,gCACI,gBAAC2F,GAAA,EAAD,CAAMC,MAAOX,EAAOqxB,kBAChB,gBAAC3wB,GAAA,EAAD,CAAMC,MAAOX,EAAOshB,iBAChB,gBAAC,GAAD,CAAetgD,QAASA,EAASgiC,KAAM,IAAK4iB,SAAO,EAACplB,eAAgBR,EAAOngC,UAE/E,gBAAC6gC,GAAA,EAAD,CAAMC,MAAOX,EAAOwhB,eAChB,gBAACvf,GAAA,EAAD,CAAMtB,MAAOX,EAAOt+B,MAAOyvD,GAC1BnwD,GAAW,gBAAC,GAAD,CAAqB2/B,MAAOX,EAAOsxB,SAAUhxD,WAAYU,EAAQV,aAC7E,gBAAC2hC,GAAA,EAAD,CAAMtB,MAAOX,EAAOsxB,UACflsD,KAAKC,EAAL,WAAkBrE,EAAQoK,QAC1B,KACAhG,KAAKC,EAAL,YAAmBrE,EAAQP,MACX,WAAhBO,EAAQP,KAAR,KACU2E,KAAKC,EAAL,WAAmBrE,EAA+BF,QAD5D,IAEK,KAIbowD,GACG,gBAAC,GAAD,CAAUnB,UAAU,aAAapvB,MAAOX,EAAOuxB,SAAUxL,UAAW/lB,EAAOwxB,iBAGjFd,GAAYb,IACV,gBAACnvB,GAAA,EAAD,CAAMC,MAAOX,EAAOyxB,iBAChB,gBAACxvB,GAAA,EAAD,CAAMtB,MAAOX,EAAO0xB,sBAAuBtsD,KAAKC,EAAE,oBAClD,gBAAC,GAAD,MACI8rB,MAAOnwB,EAAQX,UACfquB,MAAO,SAAC7xB,GAAD,OACAuI,KAAKC,EAAL,iBAAwBxI,EAAE2I,OACd,UAAX3I,EAAEi5C,MAAF,KAA2Bj5C,EAAEi5C,MAAMtrC,cAAnC,IAAsD,MAG1D4mD,IAER,gBAACnvB,GAAA,EAAD,CAAMtB,MAAOX,EAAO0xB,sBAAuBtsD,KAAKC,EAAE,WAClD,gBAAC,GAAD,MACI8rB,MAAOnwB,EAAQd,cACfwuB,MAAO,SAACxvB,GAAD,OAAsBkG,KAAKC,EAAL,aAAoBnG,EAAEwwB,QAAtB,WACzB0hC,IAwBR,gBAACO,GAAD,CACI3wD,QAASA,EACT4rC,UAAW,SAAC2R,GAAD,OACP,gBAACrc,GAAA,EAAD,CAAkBvB,MAAOX,EAAO4xB,YAAazvB,QAAS,kBAAMoc,MACxD,gBAAC9P,GAAA,EAAD,CAAe9N,MAAOX,EAAO6xB,gBAAiBnwD,KAAK,YAG3D6sD,QAAS,kBAAM,EAAK7Y,YAOxC,OACI,gBAACuL,GAAD,CACIva,IAAK/T,KAAK89B,QACV/Y,MAAOuI,GACP/H,aAAc,CACV7H,SAAU,SAACpqC,GACP,EAAKi6B,OAASj6B,EAAEqqC,YAAYpQ,SAGpCyY,oBAAqC,QAAhBte,KAASC,GAC9Bse,SAAU,EACVkZ,cAAe,IACf5Q,eAAgB,IAChB6Q,yBAA0B,WACtB,EAAKrc,MAAK,WACF,EAAKrV,MAAM2xB,aAAa,EAAK3xB,MAAM2xB,iBACxC,IAEPC,wBAAyB,WACrB,EAAKvc,MAAK,WACF,EAAKrV,MAAM6xB,cAAc,EAAK7xB,MAAM6xB,kBACzC,IAEPpZ,mBAAoB,kBAChB,gBAACiB,GAAD,CACIZ,KAAK,QACLzB,MAAOuI,GACP3F,eAAa,EACbxK,aAAc9P,EAAOmyB,yBAErB,gBAAClwB,GAAA,EAAD,CAAMtB,MAAOX,EAAO2a,iBAAkBv1C,KAAKC,EAAE,0BAGrDwzC,kBAAmB,kBACf,gBAACkB,GAAD,CACIZ,KAAK,OACLzB,MAAOuI,GACP3F,eAAa,EACbxK,aAAc9P,EAAOoyB,wBAErB,gBAACnwB,GAAA,EAAD,CAAMtB,MAAOX,EAAO2a,iBAAkBv1C,KAAKC,EAAE,0BAGrD88B,QAAS,kBAAM,EAAKkwB,mBAEH,QAAhBh4B,KAASC,IACN,gBAAC,KAAWoG,KAAZ,CAAiBC,MAAO,CAACX,EAAOqhB,YAAa,CAAChjB,YAAWtD,GAE5C,QAAhBV,KAASC,IACN,gBAACoG,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOqhB,YAAa,CAAChjB,OAAQA,EAAO,eAAgBtD,Q,GAlNvD1B,aA6NzBs3B,IAJmBpvB,cAAU,YAA0B,IAAxB/3B,EAAuB,EAAvBA,MACjC,OAAO,gBAACk3B,GAAA,EAAD,CAAMC,MAAOF,GAAaj3B,GAAO2kD,eAGH,KACnC0C,GAAkC,IAElCpwB,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBkxB,wBAAyB,CACrBxrB,gBAAiBn9B,EAAM01B,cACvBoC,WAAY,SACZH,eAAgB,WAChBoB,QAAS,IAEb6vB,uBAAwB,CACpBzrB,gBAAiBn9B,EAAMw1B,aACvBsC,WAAY,SACZiB,QAAS,IAEboY,gBAAgB,IACZnY,SAAU,GACVmC,cAAe,EACfD,cAAe,aACZlD,IAKP6f,YAAa,CACT9e,QAAS,IAGb8uB,iBAAkB,CACdjwB,cAAe,OAGnBkgB,gBAAiB,CACbngB,eAAgB,UAEpBthC,OAAQ,CACJ8mC,gBAAiBn9B,EAAMy1B,iBAE3BuiB,cAAe,CACXtgB,KAAM,EACNE,cAAe,SACfD,eAAgB,SAChBsZ,YAAa,IAEjB/4C,KAAM,CACF8gC,SAAU,GACVmC,cAAe,GACfC,aAAc,EACd0tB,WAAY,EACZ5vB,MAAOl5B,EAAMwM,MAEjBs7C,SAAU,CACN9uB,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMm1B,UACb2zB,WAAY,GAGhBf,SAAU,CACNhrB,SAAU,WACVwF,IAAK,EACLK,MAAO,GAEXolB,aAAc,CACVhvB,SAAU,GACVE,MAAOl5B,EAAMm1B,WAGjBwvB,UAAW,CACP9vB,OAAQ,EACRH,MAAO,OACPyI,gBAAiB,OACjB0I,QAAS,GACThH,UAAW,SACXzD,aAAc,GAGlB6sB,gBAAiB,CACbvwB,KAAM,GAGVguB,KAAM,CAEFllB,kBAAmB,EACnBpH,gBAAiB,EACjBua,SAAU,EACVhc,eAAgB,UAGpBuwB,qBAAqB,SACd/vB,IADa,IAEhBa,SAAU,GACVkC,cAAe,YACfC,cAAe,EACfhC,UAAW,EACXD,MAAOl5B,EAAMwM,OAEjB47C,YAAa,CACTrrB,SAAU,WACV+E,OAAQ,EACRc,MAAO,GAEXylB,gBAAiB,CACbrvB,SAAU,GACVE,MAAOl5B,EAAM3O,YAKV0mC,gBAAUivB,I,u/BClWnB+B,G,kCACF,WAAYlyB,GAA0B,IAAD,uBACjC,cAAMA,IACDvM,MAAQ,CAAC0+B,SAAS,GAFU,E,+CAK1B,IAAD,OACD7/B,KAAKmB,MAAM0+B,UACZ7/B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B0+B,SAAS,KACvC7/B,KAAK0N,MAAM8B,UAAUznC,MAAK,kBAAM,EAAKksC,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B0+B,SAAS,W,+BAIxD,IAAD,SAC2D7/B,KAAK0N,MAA3EqK,EADW,EACXA,sBAAuB+nB,EADZ,EACYA,sBAAuBjpD,EADnC,EACmCA,MAAUi7B,EAD7C,kEAEX+tB,EAAW7/B,KAAKmB,MAAhB0+B,QAEDnoB,EAAa1X,KAAK0N,MAAM8J,KAAOL,GAAanX,KAAK0N,MAAM8J,MAAM3gC,GAAS,CAAC+M,OAAQ,GAAIP,KAAM,IAE/F,OACI,gBAAC,GAAD,QAAYyuB,EAAgB,CAACtC,QAASqwB,OAAU91D,EAAY,kBAAM,EAAKylC,aAClEqwB,GACG,gCACI,gBAACzvB,GAAA,EAAD,CACIL,MAAO+vB,GAAyBjpD,EAAM01B,cACtCyB,MAAO,CACH,CAAC4F,SAAU,WAAYwF,IAAK,EAAGK,MAAO,EAAGd,OAAQ,EAAGQ,KAAM,EAAGO,OAAQ,QACrE3B,KAGR,gBAAChK,GAAA,EAAD,CAAMC,MAAO,CAAC0O,QAAS,IACnB,gBAACpN,GAAA,EAAD,CAAMtB,MAAO,CAAC0J,EAAWr0B,KAAM2c,KAAK0N,MAAM+J,YAAazX,KAAK0N,MAAMrqB,MACjE2c,KAAK0N,MAAMiF,Y,GAhCdjM,aAyCXkI,gBAAUgxB,I,wgCC5CzB,IAAMG,GAAgB,CAClB,0QACA,4QACA,wQACA,2QACA,oQACA,uQACA,wQACA,wNACA,yNACA,+NACA,iOACA,6QAKiBC,G,kCACjB,WAAYtyB,GAAmB,IAAD,uBAC1B,cAAMA,IACDvM,MAAQ,CACT8+B,eAC2B,WAAvBvyB,EAAMwyB,aACA7gB,KAAK8gB,MAAM9gB,KAAK6D,SAAW6c,GAAcx1D,QACxCmjC,EAAMwyB,cANK,E,8CAUP,IAAD,EACiBlgC,KAAK0N,MAAjCM,EADW,EACXA,MAAO+B,EADI,EACJA,MAAOqwB,EADH,EACGA,WACdH,EAAkBjgC,KAAKmB,MAAvB8+B,eAEDI,EAAcN,GAAcE,GAElC,OACI,kBAAClyB,GAAA,EAAD,CACIC,MAAO,CAAC,IAEAosB,SAAU,IACV1uB,OAxBU,KAyBN00B,EAAa,CAACvK,UAAW,CAAC,CAACyK,OAAQ,YAAc,IAEzDtyB,IAGJ,kBAAC,KAAD,CAAKoS,QAAQ,gBAAgBmgB,oBAAoB,QAC7C,kBAAC,QAAD,CAAMhe,KAAMxS,EAAOywB,EAAGH,U,GA7BR35B,IAAMwN,W,m/BCXxC,IAAMhE,GAAiBtO,cACnB,SAACT,GAAD,YAAsB,CAClBs/B,aAAY,SAAEt/B,EAAM9yB,QAAQ0B,WAAhB,EAAE,EAAoB1B,WAEtC,KACA,KACA,CAACqyD,YAAY,IAmBJC,GAAb,kCAGI,WAAYjzB,GAAgC,IAAD,uBACvC,cAAMA,IAHFsM,SAAWtT,cAIf,EAAKvF,MAAQ,CAAC9yB,QAAS,KAAMwvB,OAAQ,KAAM+iC,mBAAoB,IAAKC,UAAW,GAFxC,EAH/C,0CAQSxyD,EAAsBwvB,GAA8B,IAAD,EACpD,SAAAmC,KAAKga,SAASnT,UAAd,EAAuBsT,OAQvBna,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B9yB,UAASwvB,SAAQ+iC,mBAAoB,SAjB3E,6BAoBkB,IAAD,EACT,SAAA5gC,KAAKga,SAASnT,UAAd,EAAuBkc,OACvB/iB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B9yB,QAAS,UAtB/C,qGA0BewvB,EAAUmC,KAAKmB,MAAftD,OACPmC,KAAK+iB,OACDllB,EAAQyJ,GAASzJ,GAChB8I,GAAa,aAAc,CAACY,OAAQ,iBA7BjD,6FAgC2B,IAAD,SACYvH,KAAK0N,MAA5B72B,EADW,EACXA,MAAO4pD,EADI,EACJA,aACRpzB,EAASS,GAAaj3B,GAFV,EAI+BmpB,KAAKmB,MAA/C9yB,EAJW,EAIXA,QAASuyD,EAJE,EAIFA,mBAAoBC,EAJlB,EAIkBA,UAC9BtzD,EACFkzD,GAAgBpyD,GAAWA,EAAQd,c9F3DxC,SAA2BjB,EAAyB+B,GACvD,OAAO/B,EAAOzC,QAAO,SAAC0C,GAClB,SACMA,EAAEC,aAAkC,WAAnB6B,EAAQoK,SACzBlM,EAAEE,WAAgC,SAAnB4B,EAAQoK,SACvBlM,EAAEG,YAAiC,UAAnB2B,EAAQoK,SACxBlM,EAAEI,YAA+B,UAAjB0B,EAAQP,OACxBvB,EAAEK,cAAiC,YAAjByB,EAAQP,S8FqDtBgzD,CAAkBzyD,EAAQd,cAAekzD,GACzC,GAmEV,OACI,gBAACnmB,GAAD,CACIvG,IAAK/T,KAAKga,SACVnB,YAAU,EACVE,cAAY,EACZE,cAAY,EACZD,gBAAiB,EACjB+nB,cAAc,OACdroB,eAAgBrL,EAAO9wB,MACvBq9B,cAAe,kBACX,gCACI,gBAAC,GAAD,CACI7J,MAAOl5B,EAAMg2B,qBACbmB,MAAO,CAACzC,MAAOs1B,GACfT,YAAU,EACVF,aAAc,IAGlB,gBAACnyB,GAAA,EAAD,CACIC,MAAOX,EAAOa,UACdwP,SAAU,SAACnQ,GAAY,IACZhC,EAASgC,EAAOoQ,YAAYpQ,OAA5BhC,MACP,EAAK0I,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B0/B,UAAWt1B,OAG7C,gBAACwC,GAAA,EAAD,CAAMC,MAAOX,EAAO2zB,cAChB,gBAAC1xB,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,2BACnC,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOmuB,aAGxB,gBAACztB,GAAA,EAAD,CAAMC,MAAOX,EAAO4zB,sBAChB,gBAAC,GAAD,CACI5yD,QAASA,QAAWtE,EACpBsmC,KAAM,IACN4iB,SAAO,EACPplB,eAAgBR,EAAOshB,kBAE3B,gBAACrf,GAAA,EAAD,CAAMtB,MAAOX,EAAOt+B,MAApB,MACKV,OADL,EACKA,EAASW,UADd,UAC0BX,OAD1B,EAC0BA,EAASY,UAGlC1B,EAAchD,OAAS,GACpB,gBAACwjC,GAAA,EAAD,CACIC,MAAO,CAACX,EAAO6zB,WAAmC,MAAvBN,EAA6B,CAAClkB,QAAS,GAAK,IACvEgB,SAAU,SAACnQ,GACP,IACM4zB,EADS5zB,EAAOoQ,YAAYpQ,OAAO7B,OACR01B,GAC7BC,EAAWhiB,KAAK8gB,MAAMgB,EA5JtC,IA4JmF,EACnEE,EAAW9zD,EAAchD,QAAQ82D,IACjCA,GAAY,GAAKA,GAAYT,GAC7B,EAAK3sB,SAAL,SAAkB,EAAK9S,OAAvB,IAA8By/B,mBAAoBS,OAG1D,gBAAC/xB,GAAA,EAAD,CAAMtB,MAAOX,EAAOi0B,WAAY7uD,KAAKC,EAAE,iCACtCnF,EAAcuK,MAAM,EAAG8oD,GAAoB52D,KAAI,SAACuC,GAAD,OAC5C,gBAACwhC,GAAA,EAAD,CAAMjkC,IAAG,uBAAyByC,EAAEwwB,SAChC,gBAACuS,GAAA,EAAD,CAAMua,cAAe,EAAG7b,MAAOX,EAAOi0B,WAAtC,KACO7uD,KAAKC,EAAL,aAAoBnG,EAAEwwB,QAAtB,cAId6jC,EAAqBrzD,EAAchD,QAChC,gBAAC+kC,GAAA,EAAD,CAAMtB,MAAOX,EAAOi0B,WACf/zD,EAAchD,OAASq2D,EAAoB,IAC3CnuD,KAAKC,EAAE,kCAO5B,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAO8O,kBAChB,gBAAC,GAAD,CACI94B,KAAM5Q,KAAKC,EAAE,yBACb8kC,KAAK,iBACL7E,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,OAAOi/B,MAAOX,EAAO8sB,aACxDnsB,MAAOX,EAAOxY,OACd2a,QAAS,oBAAA9kC,EAAAC,OAAA,kEAAAD,EAAA,MAAkB,EAAKstB,QAAvB,uGAEb,gBAAC,GAAD,CACI3U,KAAM5Q,KAAKC,EAAE,6BACbigC,KACI,gBAACyJ,GAAA,EAAD,CACIrtC,KAAK,yBACLi/B,MAAOX,EAAO8sB,aAGtB3iB,KAAK,iBACLxJ,MAAO,CAACX,EAAOxY,OAAQ,CAACmf,gBAAiBn9B,EAAM21B,gBAC/CgD,QAAS,kBAAM,EAAKuT,YAKhC,gBAAC,GAAD,CAAMhT,MAAOl5B,EAAMg2B,qBAAsBmB,MAAO,CAACzC,MAAOs1B,GAAYX,aAAc,YAzM1G,GAA4Cx5B,aAiNtCoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB/xB,MAAO,CACH86B,kBAAmB,EACnBpH,gBA3NkB,EA4NlB1E,MAAO,OACPG,OAAQ,OACRyC,SA7NM,IA8NNK,eAAgB,UAEpBN,UAAW,CACP3C,MAAO,OACPyI,gBAAiBn9B,EAAMg2B,qBACvB8B,WAAY,SACZH,eAAgB,gBAChBE,SAAU,SACVixB,WAAY,GAEhBqB,aAAc,CACVryB,WAAY,SACZpD,MAAO,QAEX01B,qBAAsB,CAClBtyB,WAAY,SACZgxB,WAAY,GAEhBxjB,iBAAkB,CACd1N,cAAe,MACfE,WAAY,SACZpD,MAAO,MACP4C,SAAU,KAEd1rB,MAAM,OACF8oB,MAAO,OACPuE,UAAW,UACRjB,IAHF,IAIDgB,SAAU,GACVE,MAAOl5B,EAAMi1B,UACbkG,cAAe,EACfD,cAAe,cAEnBypB,UAAW,CACPxrB,UAAW,GACXiC,aAAc,GACdvG,OAAQ,EACRH,MAAO,MACPyI,gBAAiBn9B,EAAMi1B,UACvB4Q,QAAS,IAEbiS,gBAAiB,CACb5X,YAAalgC,EAAMi1B,UACnBwL,YAAa,IAEjBvoC,KAAM,CACFghC,MAAOl5B,EAAMi1B,UACb+D,SAAU,GACVc,eAAgB,GAEpBuwB,WAAY,CACRltB,gBAAiB,QACjBoD,aAAc,GACdnH,gBAjRyB,GAkRzBoH,kBAAmB,GACnB1G,eAAgB,GAChBgvB,WAAY,EACZjxB,SAAU,UAEd4yB,UAAW,CACPvxB,MAAOl5B,EAAMi1B,UACb+D,SAAU,GACVe,WAzRoB,IA2RxB/b,OAAQ,CACJ0Z,KAAM,EACNyH,iBAAkB,GAEtBmkB,WAAY,CACRtqB,SAAU,GACVE,MAAOl5B,EAAMi1B,UACb2Q,WAAY,SAKTvM,MAAetB,aAAU+xB,K,8aC/TxC,IAAMzwB,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDvyB,SAAUuyB,EAAM9J,SAASgI,gBACzBkiC,iBAAkBpgC,EAAM9J,SAASiI,mBAAmBxvB,SACpDD,aAAcsxB,EAAM9J,SAASiI,mBAAmBzvB,aAChDmzB,YAAa7B,EAAM9J,SAASiI,mBAAmB1vB,KAC/CusB,cAAegF,EAAM7sB,SAAS6nB,kBAQ5BrC,G,qLACF0nC,YAAc96B,c,EACd+6B,gBAAkB/6B,c,gDAEK,IAAD,SAUd1G,KAAK0N,MARL9+B,EAFc,EAEdA,SACAiI,EAHc,EAGdA,MACA0qD,EAJc,EAIdA,iBACA1xD,EALc,EAKdA,aACAssB,EANc,EAMdA,cACA6G,EAPc,EAOdA,YACAqM,EARc,EAQdA,WACA79B,EATc,EASdA,SAEE67B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,CAAe82B,gBAAc,GACzB,gBAAC,GAAD,CACIoG,IAAK/T,KAAKwhC,YACVnyB,WAAYA,EACZkgB,W3G5BgB,E2G6BhBH,UAAW,kBAAO59C,GrFsHO,SAAOA,EAAUC,GAAjB,cAkBhCiwD,EAlBgC,yBAAAh3D,EAAAC,OAAA,mDAkBhC+2D,EAlBgC,SAkBpBhvD,GACjB,OAAmB,GAAZA,EAAEnI,YAAcR,EAAY2I,GAnBE,EAIrCjB,IAFOC,EAF8B,EAErCC,KAAOD,MAF8B,IAGrC2lB,SAAW+H,EAH0B,EAG1BA,QAASE,EAHiB,EAGjBA,mBAGnB5tB,EANoC,uBAOrCF,EAAS6rB,MAP4B,6BAWpCiC,EAAmBzvB,cAAc1H,QAAQyD,IAAI,+BAE9C0zB,EAAmBxvB,UAAawvB,EAAmBzvB,aAbd,wDAezC2B,EAnBwD,CACxD1D,KAAMkvB,GAAsBwM,uBAyBtBl9B,EAAS3C,OAAOC,KAAKw1B,EAAQ9yB,QAAQzC,QAAO,SAAC41B,GAAD,OAA6B,IAAtBL,EAAQ9yB,OAAOmzB,MAElElf,EAAU6e,EAAQlJ,QAA+C,IAAtCkJ,EAAQlJ,MAAMyrC,QAAQ,WAAoB,GAAKviC,EAAQ7e,QAElFvS,EAAaoxB,EAAQlJ,QAA6C,IAApCkJ,EAAQlJ,MAAMyrC,QAAQ,SAAkB,GAAKviC,EAAQpxB,WAEnF4zD,EAAe,CACjBj/C,aAAc++C,EAAStiC,EAAQzc,cAC/B9C,gBAAiB6hD,EAAStiC,EAAQ1xB,WAClC6S,QAASmhD,EAASnhD,GAClBlT,gBAAiBq0D,EAAStiC,EAAQ/xB,iBAClCW,WAAY0zD,EAAS1zD,GACrBkoB,MAAOwrC,EAAStiC,EAAQlJ,OACxB5pB,OAAQo1D,EAASp1D,IAnCoB,YAAA5B,EAAA,MAsClBF,EACnB,WACA,MAFiC,IAI7BoF,KAAM0vB,EAAmB1vB,KACzBizB,MtB9LwB,GsB+LrB++B,GAEP,GACAlwD,GACA,IAhDqC,SAsCnC/F,EAtCmC,QAmD5BJ,SAAWhD,EAAeyK,IAE7BpE,GADAk0B,EAAYn3B,GACUM,KAA8BjC,IAAI6C,GACxDgD,EAAeizB,EAAUC,KAAKC,YAAcF,EAAUC,KAAKE,WACjE96B,QAAQyD,IAAI,UAAWgD,EAASrE,OAAQ,YACxCpC,QAAQyD,IAAI,OAAQk3B,EAAUC,MAC9BvxB,EAAS+rB,GAAqB3uB,EAAUiB,KACrC2B,EAAS6rB,MA1DyB,iEqFrHzBvtB,SAAUyxD,EACV1xD,aAAcA,EAEdmzB,YAAaA,EACbxE,MAAO5vB,EACPtB,GAAI,SAACe,GAAD,OAAkCA,EAAQf,IAC9CyiD,mBACI,gCACI,gBAACzgB,GAAA,EAAD,CAAMtB,MAAOX,EAAOw0B,gBAAiBpvD,KAAKC,EAAE,uBAC5C,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOy0B,gBAAiBrvD,KAAKC,EAAE,4BAGpDs9C,oBACI,gCACI,gBAAC1gB,GAAA,EAAD,CAAMtB,MAAOX,EAAOw0B,gBAAiBpvD,KAAKC,EAAE,yBAC5C,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOy0B,gBAAiBrvD,KAAKC,EAAE,4BAGpDg9C,QAAS,kBAAMl+C,EAASisB,OACxBqyB,WAAY,SAACzhD,EAAsB00C,GAAvB,OACR,gBAAC,GAAD,CACIj5C,IAAG,sBAAwBuE,EAAQf,GACnCe,QAASA,EACTiwD,SAAU,SAAC/wB,GAA6B,IAAD,EAC7Buc,EAAM,SAAG,EAAK0X,YAAY36B,cAApB,EAAG,EAA0BqoB,cAAcroB,QACnDijB,GAAQA,EAAOiY,SAAS,CAAClR,EAAGtjB,EAAOsjB,EAAI,IAAKmR,UAAU,KAE9DzC,aAAc,4BAAA70D,EAAAC,OAAA,kEAAAD,EAAA,MACc8G,EAA6BusB,GAAY1vB,KADvD,QACJ1C,EADI,SAEMA,EAASJ,SAAWixB,GAAkBylC,UAClD,WAAKR,gBAAgB56B,UAArB,EAA8BsT,KAAK9rC,EAAS1C,EAASkyB,SAH/C,6DAKdwhC,YAAa,kBAAO7tD,ErF+LlB,SAACnD,GAAD,OAAoC,SAAOmD,EAAUC,GAAjB,eAAA/G,EAAAC,OAAA,uDACxD+G,EAAQD,IAAWE,KAAKD,MADgC,WAAAhH,EAAA,MAEvCF,EAAe,mBAAoB,OAAQ,GAAI,CAACwzB,YAAa3vB,EAAQf,IAAKoE,GAAO,IAF1C,cAGjDnG,SAAWhD,EAAeyK,IAAIxB,EAASysB,GAAsB5vB,IAHZ,6DqF/LW6zD,CAAe7zD,KAChE42C,SAAU,kBAAMlC,KAChBwb,aAAclwD,EAAQf,IAAMsB,EAAS,GAAGtB,KAAO6uB,GAAiBoR,GAAO3B,iBAI/EqkB,oBAAqB5iB,EAAO+iB,eAC5BF,mBAAoB,MAExB,gBAACiS,GAAD,CAAmBpuB,IAAK/T,KAAKyhC,uB,GAjEb/6B,aAuE1BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBuzB,eAAgB,CACZhyB,SAAU,GACVmC,cAAe,IACfjC,MAAOl5B,EAAMwM,KACbstB,eAAgB,GAEpBmxB,eAAgB,CACZjyB,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMwM,MAEjB+sC,eAAgB,CACZ7kB,MAAO,OACP4C,SAAU,IACVuH,UAAW,SACXC,WAAY,IACZ9B,cAAe,SAKZ3D,MAAetB,aAAU9U,K,kbCnHlCsoC,G,yIACqB,IAAD,EACwBpiC,KAAK0N,MAAxCqkB,EADW,EACXA,WAAYS,EADD,EACCA,KAASiB,EADV,8BAGlB,OACI,gBAACH,GAAD,QACQG,EADR,CAEI1B,WAAYA,IAAc,EAC1BS,KAAMA,EACNJ,aAAc,CACV,gBAAEjL,EAAF,EAAEA,YAAaiM,EAAf,EAAeA,UAAf,OACI,gBAAC7jB,GAAA,EAAD,CAAkBvB,MAAOmZ,EAAa3X,QAAS,kBAAM7I,GAAa,0BAC9D,gBAACkK,EAAA,EAAD,CAAa9hC,KAAK,UAAUi/B,MAAOolB,MAG3C,gBAAEjM,EAAF,EAAEA,YAAaiM,EAAf,EAAeA,UAAf,OACI,gBAAC7jB,GAAA,EAAD,CAAkBvB,MAAOmZ,EAAa3X,QAAS,kBAAM7I,GAAa,wBAC9D,gBAACmV,GAAA,EAAD,CAAe/sC,KAAK,UAAUi/B,MAAOolB,c,GAjB5B1sB,aA0BtB,SAAS27B,GAAkB30B,GACtC,OAAO,gBAAC,GAA2BA,G,0gCCpBvC,IAAMwC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD9sB,OAAQ8sB,EAAM7sB,SAASC,aAAaF,WAyBlCiuD,G,kCASF,WAAY50B,GAA0B,IAAD,uBACjC,cAAMA,IAHV60B,aAAyB,GAIrB,EAAKphC,MAAQ,CACT3C,MAAO,IAAIjC,IACXqvB,MAAM,EACN4W,sBAAuB,GAEvB90B,EAAMyb,WAAU,EAAKoZ,aAAe70B,EAAMyb,UAPb,E,mDAUtB,IAAD,SACJ90C,EAAS2rB,KAAK0N,MAAMr5B,OAC1B,IAAK2rB,KAAKmB,MAAM3C,MAAMikC,IAAIpuD,KAAW,SAAA2rB,KAAKmB,MAAM3C,MAAMiN,IAAIp3B,SAArB,IAA8B9J,SAAUy1B,KAAK0N,MAAMh3B,OAAOnM,OAAQ,CACnG,IAAMi0B,EAAQ,IAAIjC,IAAIyD,KAAKmB,MAAM3C,OACjCA,EAAMkkC,IACFruD,EACA2rB,KAAK0N,MAAMh3B,OAAO1M,KAAI,SAACgyB,GAAD,MAAoB,CACtCA,QACAD,MAAO,EAAK2R,MAAMi1B,SAAWlwD,KAAKC,EAAE,EAAKg7B,MAAMi1B,SAAS3mC,IAAUA,OAG1EgE,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B3C,c,0CAKlCwB,KAAK4iC,gB,yCAGUtqB,GACXA,EAASjkC,QAAU2rB,KAAK0N,MAAMr5B,QAAUikC,EAAS5hC,OAAOnM,QAAUy1B,KAAK0N,MAAMh3B,OAAOnM,QACpFy1B,KAAK4iC,cAET5iC,KAAKuiC,aAAeviC,KAAK0N,MAAMyb,UAAY,K,6BAI3CnpB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,O,8BAIpC5rB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,KACpC5rB,KAAK9kB,U,8BAID8kB,KAAK0N,MAAMm1B,UAAU7iC,KAAK0N,MAAMm1B,SAAS7iC,KAAKuiC,gB,+BAG/B,IAAD,SAedviC,KAAK0N,MAbL72B,EAFc,EAEdA,MACAxC,EAHc,EAGdA,OACA80C,EAJc,EAIdA,SAGAwZ,GAPc,EAMdE,SANc,EAOdF,UACAhnD,EARc,EAQdA,YACAmnD,EATc,EASdA,aACAC,EAVc,EAUdA,sBACAC,EAXc,EAWdA,UACAC,EAZc,EAYdA,OACAxZ,EAbc,EAadA,mBACGyZ,EAdW,2JAgBZ71B,EAAS4a,GAAapxC,GACtBswC,EAAc0B,GAA0BY,EAAoB5yC,GAE5DssD,EAAgBha,GAAY,GAC5B3qB,EAAQwB,KAAKmB,MAAM3C,MAAMiN,IAAIp3B,IAAW,GAE9C,OACI,gBAAC05B,GAAA,EAASm1B,EACN,gBAACn1B,GAAA,EAAD,KACI,gBAACwB,GAAA,EAAD,CAAkBC,QAAS,kBAAM,EAAKoc,QAAQ5d,MAAOmZ,EAAYvjC,QAC7D,gBAAC0rB,GAAA,EAAD,CAAMtB,MAAO,CAACmZ,EAAY9jC,KAA8B,GAAxB8/C,EAAc54D,OAAc48C,EAAY4B,iBAAmB,KACtFt2C,KAAKC,EAAE,uBAAuB+8B,QAAQ,KAAM0zB,EAAc54D,OAAO64D,cAGzEJ,GACG,gBAAC,GAAD,CACIxkC,MAAO2kC,EACPpnC,MAAO,SAAC7xB,GAAD,OAAQy4D,EAAWlwD,KAAKC,EAAEiwD,EAASz4D,IAAMA,GAChD2jC,eAAgBR,EAAOub,cACvBuT,WAAW,EACXC,SAAU,SAAC9M,GACP,EAAKiT,aAAe,EAAKA,aAAa14D,QAAO,SAACK,GAAD,OAAOA,IAAMolD,KAC1D,EAAKp0C,YAKpB8kB,KAAKmB,MAAMyqB,MACR,gBAACtR,GAAD,CACIpC,QAASlY,KAAKmB,MAAMyqB,KACpBpT,OAAQ,kBAAM,EAAK4M,SACnB1M,eAAgB,CACZhN,OAAQ,IAAqB,GAAflN,EAAMj0B,OACpB49C,UAAW,MACXzZ,SAAU,SACV2I,kBAAmB,EACnBpH,gBAAiB,GAErB2J,cAAe,kBACX,gCACI,gBAAC7L,GAAA,EAAD,CACIC,MAAOX,EAAO+a,gBACd1K,SAAU,SAACpqC,GACP,EAAK2gC,SAAL,SACO,EAAK9S,OADZ,IAEIqhC,sBAAuBlvD,EAAEqqC,YAAYpQ,OAAO7B,YAIpD,gBAAC,KAAD,CACIlN,MAAOA,EACPvd,UAAWgiD,EACXI,YAAY,EACZ1wD,aAAcw2C,EACdma,aAAc,SAAC5sD,GACX,EAAK6rD,aAAe7rD,GAExBiF,YAAaA,EACbmnD,aAAcA,EACdC,sBAAuBA,EACvBQ,gBAAiB,CAAClmB,0BAA2B,WAC7CsG,WAAW,EACX6f,WAAW,EACXC,kBAAmB,EAAKtiC,MAAMqhC,sBAAwB,GAEtDkB,mBAAoB,CAACpd,QAAS,QAC9BtY,MAAOX,EAAOgb,cACdsb,UAAWt2B,EAAOib,kBAClBsb,gBAAiBv2B,EAAOkb,wBACxBsb,iBAAkBx2B,EAAOmb,yBACzBpV,WAAY/F,EAAOob,sBAG3B,gBAAClZ,GAAA,EAAD,CAAkBC,QAAS,kBAAM,EAAK4V,SAASpX,MAAOX,EAAOqb,UACzD,gBAACpZ,GAAA,EAAD,CAAMtB,MAAOX,EAAOsb,cAApB,gB,GApJVjiB,aAApB47B,GACKnuB,aAAe,CAClB3V,MAAO,GACPslC,cAAc,EACd3a,SAAU,IA2JHjZ,UAAetB,aAAU0zB,K,8aCvMxC,IAAI5rD,GAAmB,GAiCRqtD,G,oJAvBc,GAAjBrtD,GAAOnM,SAAamM,GAASvK,EAAqBnC,KAAI,SAACg6D,GAAD,OAAqBA,EAAIl6D,U,+BAGhE,IAAD,EAC8Bk2B,KAAK0N,MAA9C/qB,EADW,EACXA,aAAckgD,EADH,EACGA,SAAa/wB,EADhB,oCAGlB,OACI,gBAAC,GAAD,MACIp7B,OAAQA,GACRisD,SAAU,SAACsB,GAAD,sBAAqCA,GAC/C9a,SAAUxmC,EACVkgD,SAAU,SAACnsD,GACHmsD,GAAUA,EAASnsD,IAE3BiF,YAAalJ,KAAKC,EAAE,kCACpBowD,aAAcrwD,KAAKC,EAAE,+BACrBqwD,sBAAuBtwD,KAAKC,EAAE,yCAC1Bo/B,Q,GAnBgBpL,aCP7B,SAASw9B,KAAuG,IAAnFpb,EAAkF,uDAApD,UAAWjyC,EAAyC,uCAClH,MAAgB,eAAZiyC,EACO,CACHjb,eAAgB,CACZmG,gBAAiB,cACjBtI,OAAQ,GACR4L,YAAa,EACbtB,iBAAkB,EAClB/D,aAAc,EACdxD,cAAe,MACfD,eAAgB,gBAEpB21B,iBAAkB,CACd54B,MAAO,GAEX64B,qBAAsB,CAClBpuB,iBAAkB,EAClBzH,KAAM,GAEV4Y,YAAa,CACT9P,kBAAmB,IAEvBI,UAAW,CACP1H,MAAOl5B,EAAMm1B,UACb0Q,QAAS,GACT7M,SAAU,GACV8vB,WAAY,GAEhB0E,oBAAqB,CACjBrwB,gBAAiB,cACjB+C,YAAalgC,EAAMu1B,OACnB0K,kBAAmB,IAEvBwtB,kBAAmB,CACfv0B,MAAOl5B,EAAMwM,KACbq5B,QAAS,IAGE,UAAZoM,EACA,CACHjb,eAAgB,CACZmG,gBAAiB,cACjBtI,OAAQ,GACR4L,YAAa,EACbtB,iBAAkB,EAClB/D,aAAc,EACdxD,cAAe,MACfD,eAAgB,gBAEpB21B,iBAAkB,CACd54B,MAAO,GAEX64B,qBAAsB,CAClBpuB,iBAAkB,EAClBzH,KAAM,GAEV4Y,YAAa,CACTnT,gBAAiBn9B,EAAMw1B,aACvB+K,aAAc,IAElBK,UAAW,CACP1H,MAAOl5B,EAAMk1B,UACb2Q,QAAS,GACT7M,SAAU,GACV8vB,WAAY,GAEhB0E,oBAAqB,CACjBrwB,gBAAiBn9B,EAAMu1B,QAE3Bk4B,kBAAmB,CACfv0B,MAAOl5B,EAAMi1B,UACb4Q,QAAS,IAGE,oBAAZoM,EACA,CACHjb,eAAgB,CACZnC,OAAQ,GACR+Q,WAAY,EACZ/F,YAAa,EACbK,YAAalgC,EAAM+1B,kBACnBwK,aAAc,GACdE,YAAa,GAEjB6sB,iBAAkB,CACdp0B,MAAOl5B,EAAM+1B,kBACbrB,MAAO,GAEX4b,YAAa,CACTnT,gBAAiBn9B,EAAMs1B,gBAE3BsL,UAAW,CACP1H,MAAOl5B,EAAMwM,MAEjBghD,oBAAqB,CACjBrwB,gBAAiBn9B,EAAMu1B,QAE3Bm4B,cAAe,CACXvwB,gBAAiBn9B,EAAMs1B,gBAE3Bq4B,sBAAuB,CACnBxwB,gBAAiBn9B,EAAMq1B,YAE3Bu4B,0BAA2B,CACvB11B,WAAY,SAGD,eAAZ+Z,EACA,CACHjb,eAAgB,CACZnC,OAAQ,GACR+Q,WAAY,EACZ/F,YAAa,EACbU,azDlH8B,IyDoHlC+sB,iBAAkB,CACdp0B,MAAOl5B,EAAM+1B,kBACbrB,MAAO,GAEX4b,YAAa,CACTnT,gBAAiBn9B,EAAMm2B,2BAE3ByK,UAAW,CACP1H,MAAOl5B,EAAMm1B,WAEjBs4B,kBAAmB,CACfv0B,MAAOl5B,EAAMwM,MAEjBghD,oBAAqB,CACjBrwB,gBAAiBn9B,EAAMo2B,kCAE3Bs3B,cAAe,CACXvwB,gBAAiBn9B,EAAMs1B,gBAE3Bq4B,sBAAuB,CACnBxwB,gBAAiBn9B,EAAMq1B,YAE3Bu4B,0BAA2B,CACvB11B,WAAY,SAIb,CACHlB,eAAgB,CACZnC,OAAQ,GACR+Q,WAAY,EACZ/F,YAAa,EACbK,YAAalgC,EAAM+1B,kBACnB0K,YAAa,GAEjB6sB,iBAAkB,CACdp0B,MAAOl5B,EAAM+1B,kBACbrB,MAAO,GAEX4b,YAAa,CACTnT,gBAAiBn9B,EAAMs1B,gBAE3BsL,UAAW,CACP1H,MAAOl5B,EAAMwM,MAEjBghD,oBAAqB,CACjBrwB,gBAAiBn9B,EAAMu1B,QAE3Bm4B,cAAe,CACXvwB,gBAAiBn9B,EAAMs1B,gBAE3Bq4B,sBAAuB,CACnBxwB,gBAAiBn9B,EAAMq1B,YAE3Bu4B,0BAA2B,CACvB11B,WAAY,SCxIbH,qBAxBf,SAA2BlB,GACvB,IAAMg3B,EAAe5rD,GAAQ9O,KAAI,SAACiE,GAAD,OAAewE,KAAKC,EAAL,WAAkBzE,MAC3D4I,EAAgE62B,EAAhE72B,MAAOm3B,EAAyDN,EAAzDM,MAAOztB,EAAkDmtB,EAAlDntB,QAASokD,EAAyCj3B,EAAzCi3B,aAAcrb,EAA2B5b,EAA3B4b,SAAaxX,EAFU,KAEIpE,EAFJ,uDAI7Dk3B,EAAaV,GAAoBS,EAAc9tD,GAErD,OACI,gBAAC,KAAD,MACI24B,QAAS,SAACq1B,GACFvb,GAEAA,GADwC,iBAAPub,EAAmBA,EAAmB,CAACA,IACvD76D,KAAI,SAACyD,GAAD,OAAeqL,GAAQrL,QAGpDq3D,gBAAgB,EAChBC,gBAAiBxkD,EAAQvW,KAAI,SAACmE,GAAD,OAAoB2K,GAAQ6oD,QAAQxzD,MACjE62D,QAASN,GACLE,EAVR,CAWI/2B,eAAgB,CAAC+2B,EAAW/2B,eAAgBG,IACxC8D,O,8aCvBhB,IAAMp7B,GAASilB,GAwBAspC,G,yIArBY,IAAD,EACqCjlC,KAAK0N,MAArDhgC,EADW,EACXA,UAAWm1D,EADA,EACAA,SAAU5hD,EADV,EACUA,SAAa6wB,EADvB,4CAGlB,OACI,gBAAC,GAAD,MACImxB,QAAShiD,EACTvK,OAAQA,GACRisD,SAAU,SAACuC,GAAD,uBAAyCA,GACnD/b,SAAUz7C,EACVm1D,SAAU,SAACnsD,GACHmsD,GAAUA,EAASnsD,IAE3BiF,YAAalJ,KAAKC,EAAE,sCACpBowD,aAAcrwD,KAAKC,EAAE,2BACrBqwD,sBAAuBtwD,KAAKC,EAAE,qCAC1Bo/B,Q,GAhBSpL,aCqBdkI,qBArBf,SAAyBlB,GAA2C,IACzD72B,EAAuD62B,EAAvD72B,MAAO2d,EAAgDkZ,EAAhDlZ,MAAOmwC,EAAyCj3B,EAAzCi3B,aAAcrb,EAA2B5b,EAA3B4b,SAAaxX,EADe,KACDpE,EADC,6CAEzDg3B,EAAe1rD,GAAMhP,KAAI,SAACiE,GAAD,OAAewE,KAAKC,EAAL,YAAmBzE,MAEjE,OACI,gBAAC,KAAD,MACIuhC,QAAS,SAACq1B,GACFvb,GAEAA,GADwC,iBAAPub,EAAmBA,EAAmB,CAACA,IACvD76D,KAAI,SAACyD,GAAD,OAAeuL,GAAMvL,QAGlDq3D,gBAAgB,EAChBC,gBAAiBvwC,EAAMxqB,KAAI,SAAC+Y,GAAD,OAAgB/J,GAAM2oD,QAAQ5+C,MACzDiiD,QAASN,GACLR,GAAoBS,EAAc9tD,GAClCi7B,O,kbCTVqzB,G,yIACqB,IAAD,SACkEnlC,KAAK0N,MAAlFG,EADW,EACXA,eAAgB3E,EADL,EACKA,SAAUryB,EADf,EACeA,MAAO4gC,EADtB,EACsBA,UAAW2tB,EADjC,EACiCA,UAAWC,EAD5C,EAC4CA,SAAUx1B,EADtD,EACsDA,SAClExC,EAASS,GAAaj3B,GAEtByuD,EAAc,qBAAuBp8B,EAAS,GAAGrxB,cAAgBqxB,EAASpxB,MAAM,IAAlE,SACdytD,EAAU1mB,GAAY,qBAAqB3V,GAAY,kBAAM,EAAKgX,iBAElE7P,EAAOg1B,GAAY,GAEzB,OACI,gBAACt3B,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOa,UAAWL,IAC5B,gBAAC03B,EAAD,MAASh6B,MAAO8E,EAAM3E,OAAQ2E,GAAU+0B,IACxC,gBAAC,GAAD,CAAqB/hD,KAAM5Q,KAAKC,EAAE4yD,GAAiB7tB,UAAWA,EAAW5H,SAAUA,S,GAb9DnJ,aAmB/BoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBJ,UAAW,CACPO,cAAe,MACfE,WAAY,SACZ8N,YAAa,SAKV7N,gBAAUu2B,I,6/BCpBzB,IAAMj1B,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD9sB,OAAQ8sB,EAAM7sB,SAASC,aAAaF,WAuBlCmxD,G,kCASF,WAAY93B,GAAmC,IAAD,uBAC1C,cAAMA,IACD+3B,UAAY/+B,cACjB,EAAKvF,MAAQ,CACT3C,MAAO,IAAIjC,IACXqvB,MAAM,EACN2W,aAAc70B,EAAMyb,UAAY,IANM,E,mDAU/B,IAAD,SACJ90C,EAAS2rB,KAAK0N,MAAMr5B,OAC1B,IAAK2rB,KAAKmB,MAAM3C,MAAMikC,IAAIpuD,KAAW,SAAA2rB,KAAKmB,MAAM3C,MAAMiN,IAAIp3B,SAArB,IAA8B9J,SAAUy1B,KAAK0N,MAAMh3B,OAAOnM,OAAQ,CACnG,IAAMi0B,EAAQ,IAAIjC,IAAIyD,KAAKmB,MAAM3C,OACjCA,EAAMkkC,IACFruD,EACA2rB,KAAK0N,MAAMh3B,OAAO1M,KAAI,SAAC07D,GAAD,MAAiC,CACnDp4D,GAAIo4D,EAAQp4D,GACZyuB,MAAO,EAAK2R,MAAMi4B,gBAAkBlzD,KAAKC,EAAE,EAAKg7B,MAAMi4B,gBAAgBD,EAAQp4D,KAAOo4D,EAAQp4D,GAC7F8gC,SAAUs3B,EAAQlnC,MAAMx0B,KAAI,SAACgyB,GAAD,MAAoB,CAC5C1uB,GAAI0uB,EACJD,MAAO,EAAK2R,MAAMi1B,SAAWlwD,KAAKC,EAAE,EAAKg7B,MAAMi1B,SAAS3mC,IAAUA,WAI9EgE,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B3C,c,0CAKlCwB,KAAK4iC,gB,yCAGUtqB,GACXA,EAASjkC,QAAU2rB,KAAK0N,MAAMr5B,QAAUikC,EAAS5hC,OAAOnM,QAAUy1B,KAAK0N,MAAMh3B,OAAOnM,QACpFy1B,KAAK4iC,gB,6BAIL,IAAD,OACC5iC,KAAKylC,UAAU5+B,QAAS7G,KAAKylC,UAAU5+B,QAAQ++B,kBAI/CxkC,YAAW,WACH,EAAKqkC,UAAU5+B,SAAS,EAAK4+B,UAAU5+B,QAAQ++B,oBACpD,KAEP5lC,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,EAAM2W,aAAcviC,KAAK0N,MAAMyb,UAAYnpB,KAAKmB,MAAMohC,kB,4BAGxFrnD,GACE8kB,KAAKmB,MAAMyqB,MAAQ5rB,KAAKylC,UAAU5+B,SAAS7G,KAAKylC,UAAU5+B,QAAQ++B,kBACtE5lC,KAAKiU,SAAL,SACOjU,KAAKmB,OADZ,IAEIyqB,MAAM,EACN2W,aAAcrnD,EAAQ8kB,KAAKmB,MAAMohC,aAAeviC,KAAK0N,MAAMyb,UAAY,MAEvEjuC,GAAO8kB,KAAK9kB,MAAM8kB,KAAKmB,MAAMohC,gB,4BAG/B/jC,GACEwB,KAAK0N,MAAMm1B,UAAU7iC,KAAK0N,MAAMm1B,SAASrkC,K,+BAG1B,IAAD,SAYdwB,KAAK0N,MAVL72B,EAFc,EAEdA,MACAxC,EAHc,EAGdA,OACA80C,EAJc,EAIdA,SACAwZ,EALc,EAKdA,SACAI,EANc,EAMdA,sBACAC,EAPc,EAOdA,UACAvZ,EARc,EAQdA,mBAGGyZ,GAXW,EAUdL,SAVc,sHAaXN,EAAgBviC,KAAKmB,MAArBohC,aACDl1B,EAAS4a,GAAapxC,GACtBgvD,EAAoBC,GAA2BjvD,GAC/CkvD,EAAaj4B,GAAaj3B,GAC1BswC,EAAW,MAAO0B,GAA0BY,EAAoB5yC,IAEhEssD,EAAgBha,GAAY,GAE5B6c,EAAShmC,KAAKmB,MAAM3C,MAAMiN,IAAIp3B,GAChC,gBAAC,KAAD,CACI0/B,IAAK/T,KAAKylC,UACVjnC,MAAOwB,KAAKmB,MAAM3C,MAAMiN,IAAIp3B,GAC5B4xD,sBAAuB,SAACznC,GAAD,OACnB,EAAKyV,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BohC,aAAe/jC,MAEjD2kC,cAAeZ,EACf2D,UAAU,KACVC,WAAW,QACXC,OAAO,WAEPC,SAAU,kBAAM,EAAKjhB,OAAM,IAC3BkhB,UAAW,kBAAM,EAAKlhB,OAAM,IAE5BmhB,aAAezqB,KACf0qB,WAAOz8D,EAEP08D,eAAe,EACfC,kBAAkB,EAClB1D,WAAW,EACX2D,kBAAkB,EAClBC,oBAAoB,EACpBC,kBAAkB,EAClBC,YAAY,EACZ/W,mBAAoB,gBAACzgB,GAAA,EAAD,CAAMtB,MAAO+3B,EAAWgB,eAAgBt0D,KAAKC,EAAE,mBACnEs0D,oBAAqB,gBAAClrB,GAAA,EAAD,CAAe/sC,KAAK,SAASi/B,MAAO+3B,EAAWkB,aAEpEC,YAAaz0D,KAAKC,EAAE,SACpBy0D,sBAAuBpE,EAEvBqE,OAAQ,CACJC,QAASxwD,EAAMu1B,OACftxB,OAAQjE,EAAM3O,MACduM,QAASoC,EAAM41B,KACfppB,KAAMxM,EAAMwM,KACZikD,QAASzwD,EAAMm1B,UACfu7B,2BAA4B1wD,EAAMm1B,UAClCw7B,sBAAuB3wD,EAAM3O,MAC7Bu/D,eAAgB5wD,EAAMs1B,eACtBu7B,kBAAmB7wD,EAAMs1B,gBAE7Bw7B,kBAAmB14B,GACnB24B,eAAgB34B,GAChB44B,qBAAsB54B,GACtB64B,kBAAmB74B,GACnB5B,OAAQw4B,IAGZ,iCAGJ,OACI,gBAAC93B,GAAA,EAAD,QAAUm1B,EAAV,CAAqBl1B,MAAO,CAAC4F,SAAU,cACnC,gBAAC7F,GAAA,EAAD,KACI,gBAACwB,GAAA,EAAD,CAAkBC,QAAS,kBAAM,EAAKoc,QAAQ5d,MAAOmZ,EAAYvjC,QAC7D,gBAAC0rB,GAAA,EAAD,CAAMtB,MAAO,CAACmZ,EAAY9jC,KAA8B,GAAxB8/C,EAAc54D,OAAc48C,EAAY4B,iBAAmB,KACtFt2C,KAAKC,EAAE,uBAAuB+8B,QAAQ,KAAM0zB,EAAc54D,OAAO64D,cAGzEJ,GACG,gBAAC,GAAD,CACIxkC,MAAO2kC,EACPpnC,MAAO,SAAC7xB,GAAD,OAAQy4D,EAAWlwD,KAAKC,EAAEiwD,EAASz4D,IAAMA,GAChD2jC,eAAgBR,EAAOub,cACvBuT,WAAW,EACXC,SAAU,SAAC9M,GACP,IAAMnG,EAAW,EAAKhoB,MAAMohC,aAAa14D,QAAO,SAACK,GAAD,OAAOA,IAAMolD,KAC7D,EAAKrb,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BohC,aAAcpZ,KAC5C,EAAKjuC,MAAMiuC,QAKT,YAAhBzhB,KAASC,IAAoC,QAAhBD,KAASC,KAAiB,gBAACoG,GAAA,EAAD,KAAOi4B,GAC/C,QAAhBt+B,KAASC,IACN,gBAAC2S,GAAD,CACIpC,QAASlY,KAAKmB,MAAMyqB,KACpB7S,cAAY,EACZH,WAAS,EACTC,YAAU,EACVe,cAAe,kBAAMosB,U,GAhLVt/B,aAA7B8+B,GACKrxB,aAAe,CAClB3V,MAAO,GACPslC,cAAc,EACd3a,SAAU,IAoLlB,ICtOY4e,GDsONj6B,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBy4B,cAAe,CACXj3B,UAAW,SACXC,MAAOl5B,EAAMwM,KACbwsB,SAAU,GACVc,eAAgB,IAEpBs2B,WAAY,CACRp3B,SAAU,GACVmG,iBAAkB,GAClBjG,MAAOl5B,EAAMm1B,gBAKnB85B,GAA6B34B,IAAS,SAACt2B,GACzC,OAAOw3B,KAAWC,OAAO,CACrB05B,aAAc,CACVx5B,eAAgB,UAEpBN,UAAU,IACN8F,gBAAiBn9B,EAAMs1B,gBACH,QAAhBzE,KAASC,GACP,CACIgJ,eAAgB,EAChBqF,iBAAkB,EAClBN,UAAW,SACXvH,SAAU,IACVga,UAAW,MACXxO,UAAW,mCAEf,IAEV2D,WAAW,IAAErN,gBAAiB,IAAwB,QAAhBvI,KAASC,GAAe,CAACsgC,UAAW,QAAU,IACpFC,UAAW,CAACl0B,gBAAiBn9B,EAAMq1B,YACnCi8B,gBAAiB,CAACp4B,MAAOl5B,EAAMwM,MAC/B+kD,WAAY,CAACp0B,gBAAiBn9B,EAAMs1B,gBACpCk8B,QAAS,CACLjxB,aAAc,EACdzG,eAAgB,GAEpB23B,aAAc,CAACt0B,gBAAiBn9B,EAAMq1B,YACtCq8B,SAAS,SACFv5B,IADC,IAEJgD,cAAe,IACfnC,SAAU,GACVe,WAAY,GACZmB,cAAe,cAEnBy2B,YAAa,CACT/rB,WAAY,GAEhB+e,UAAW,CAAC7qB,eAAgB,QAIrBT,MAAetB,aAAU42B,M,SC/R5BuC,K,wCAAAA,E,gBAAAA,E,qBAAAA,E,8CAAAA,E,kCAAAA,E,+CAAAA,E,6CAAAA,E,6CAAAA,E,iDAAAA,E,oBAAAA,E,gBAAAA,Q,KAcL,IAEKU,GAFCC,GAA6B/+D,OAAO+M,OAAOqxD,K,SAE5CU,O,wEAAAA,I,4CAAAA,I,gEAAAA,I,yBAAAA,I,eAAAA,I,2BAAAA,I,yBAAAA,I,gEAAAA,I,sDAAAA,I,wDAAAA,I,cAAAA,I,iEAAAA,I,8BAAAA,I,6CAAAA,I,uDAAAA,I,uFAAAA,I,uEAAAA,I,2DAAAA,I,6DAAAA,I,8BAAAA,I,wBAAAA,I,0BAAAA,I,4BAAAA,I,oBAAAA,I,sBAAAA,I,6CAAAA,I,mFAAAA,I,6CAAAA,I,gDAAAA,Q,KAsCL,IAAME,GAAqC,CAC9C,CACIr7D,GAAI,kCACJ47B,SAAU6+B,GAAuBa,IACjCC,YAAaJ,GAA0B,oCAE3C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBa,IACjCC,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,8BACJ47B,SAAU6+B,GAAuBa,IACjCC,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBe,IACjCD,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,mCACJ47B,SAAU6+B,GAAuBe,IACjCD,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,kDACJ47B,SAAU6+B,GAAuBe,IACjCD,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,+CACJ47B,SAAU6+B,GAAuBe,IACjCD,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,2CACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,MAE1C,CACIn7D,GAAI,qCACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,MAE1C,CACIn7D,GAAI,YACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,MAE1C,CACIn7D,GAAI,cACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,MAE1C,CACIn7D,GAAI,wBACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,MAE1C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,YAE1C,CACIn7D,GAAI,sBACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,YAE1C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,YAE1C,CACIn7D,GAAI,uBACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBgB,GACjCF,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,YACJ47B,SAAU6+B,GAAuBiB,KACjCH,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,4BACJ47B,SAAU6+B,GAAuBiB,KACjCH,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,aACJ47B,SAAU6+B,GAAuBiB,KACjCH,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,6BACJ47B,SAAU6+B,GAAuBiB,KACjCH,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,uBACJ47B,SAAU6+B,GAAuBiB,KACjCH,YAAaJ,GAA0B,2BAE3C,CACIn7D,GAAI,uCACJ47B,SAAU6+B,GAAuBiB,KACjCH,YAAaJ,GAA0B,2BAE3C,CACIn7D,GAAI,sBACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,4BACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,4BACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,wBACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,0BACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,cACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAA0B,4BAE3C,CACIn7D,GAAI,MACJ47B,SAAU6+B,GAAuBkB,IACjCJ,YAAaJ,GAAyB,KAE1C,CACIn7D,GAAI,UACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,eACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,gCAE3C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAAyB,aAE1C,CACIn7D,GAAI,gCACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAAyB,aAE1C,CACIn7D,GAAI,YACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,iBACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,UACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,cACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,2BAE3C,CACIn7D,GAAI,aACJ47B,SAAU6+B,GAAuBmB,KACjCL,YAAaJ,GAA0B,2BAE3C,CACIn7D,GAAI,eACJ47B,SAAU6+B,GAAuBoB,IACjCN,YAAaJ,GAA0B,2CAE3C,CACIn7D,GAAI,yCACJ47B,SAAU6+B,GAAuBoB,IACjCN,YAAaJ,GAA0B,2CAE3C,CACIn7D,GAAI,6CACJ47B,SAAU6+B,GAAuBoB,IACjCN,YAAaJ,GAA0B,2CAE3C,CACIn7D,GAAI,iCACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,mCAE3C,CACIn7D,GAAI,sCACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,mCAE3C,CACIn7D,GAAI,qBACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,mCAE3C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,mCAE3C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,mCAE3C,CACIn7D,GAAI,gCACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,mCAE3C,CACIn7D,GAAI,kBACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,6BAE3C,CACIn7D,GAAI,YACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,6BAE3C,CACIn7D,GAAI,WACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,6BAE3C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,6BAE3C,CACIn7D,GAAI,6BACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,8BAE3C,CACIn7D,GAAI,6BACJ47B,SAAU6+B,GAAuBqB,IACjCP,YAAaJ,GAA0B,8BAE3C,CACIn7D,GAAI,4BACJ47B,SAAU6+B,GAAuBsB,KACjCR,YAAaJ,GAAyB,aAE1C,CACIn7D,GAAI,eACJ47B,SAAU6+B,GAAuBsB,KACjCR,YAAaJ,GAAyB,aAE1C,CACIn7D,GAAI,WACJ47B,SAAU6+B,GAAuBsB,KACjCR,YAAaJ,GAAyB,UAE1C,CACIn7D,GAAI,YACJ47B,SAAU6+B,GAAuBsB,KACjCR,YAAaJ,GAAyB,WAE1C,CACIn7D,GAAI,aACJ47B,SAAU6+B,GAAuBsB,KACjCR,YAAaJ,GAAyB,YAE1C,CACIn7D,GAAI,iBACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,WACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,0CACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,WACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,6CACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,QAE1C,CACIn7D,GAAI,+BACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,SAE1C,CACIn7D,GAAI,4BACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,SAE1C,CACIn7D,GAAI,0BACJ47B,SAAU6+B,GAAuBuB,GACjCT,YAAaJ,GAAyB,SAE1C,CACIn7D,GAAI,oBACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,uBACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,6BACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,SACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,yBACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,uBACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,yCAE3C,CACIn7D,GAAI,6BACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,yCAE3C,CACIn7D,GAAI,mBACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,iCACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,sBAE3C,CACIn7D,GAAI,qBACJ47B,SAAU6+B,GAAuBwB,IACjCV,YAAaJ,GAA0B,wBAWzCe,GAA4D,GAClEd,GAA2Br1D,SAAQ,SAAC/F,GAAD,OAAiCk8D,GAAUl8D,GAAM,CAACA,KAAIkxB,MAAO,OAChGmqC,GAAiBt1D,SAAQ,SAACmtB,GAAD,OAAOgpC,GAAUhpC,EAAE0I,UAAU1K,MAAM+C,KAAKf,EAAElzB,OAE5D,IAAMm8D,GAA6B9/D,OAAO+M,OAAO8yD,I,kbC7bzCE,G,yIAnBY,IAAD,EACwB1pC,KAAK0N,MAAxCv8B,EADW,EACXA,OAAQ0xD,EADG,EACHA,SAAa/wB,EADV,8BAGlB,OACI,gBAAC,GAAD,MACIp7B,OAAQ+yD,GACR9G,SAAU,SAAC/tB,GAAD,yBAAsCA,GAChD+wB,gBAAiB,SAACD,GAAD,kCAAiDA,GAClEvc,SAAUh4C,EACV0xD,SAAU,SAACnsD,GACHmsD,GAAUA,EAASnsD,IAE3BqsD,sBAAuBtwD,KAAKC,EAAE,4CAC1Bo/B,Q,GAdepL,aCkCnC,IAAMoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBqE,KAAM,CACF9C,SAAU,GACV6G,YAAa,QAKV9H,iBAhCf,SAAyBlB,GAAwD,IACtE1/B,EAAqG0/B,EAArG1/B,WAAYiT,EAAyFysB,EAAzFzsB,SAAUnE,EAA+E4wB,EAA/E5wB,WAAYysC,EAAmE7b,EAAnE6b,cAAepC,EAAoDzZ,EAApDyZ,YAAasC,EAAuC/b,EAAvC+b,mBAAoBoZ,EAAmBn1B,EAAnBm1B,SAAUhsD,EAAS62B,EAAT72B,MAC7Fw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,CACIH,OAAQuC,GACR8iB,MAAO,SAAC9tB,GAAD,OAAewE,KAAKC,EAAL,cAAqBzE,IAC3C0N,YAAalJ,KAAKC,EAAL,uBAA8B+8B,QAAQ,KAAMzhC,EAAWzD,OAAS,IAC7EooC,KAAM,SAACg3B,EAAGl8D,GAAJ,OAAkB,gBAACquC,GAAA,EAAD,CAAe/sC,KAAMmK,GAAiBzL,GAAIugC,MAAOX,EAAOsF,QAChFwW,SAAUn7C,EACVm5C,YAAaA,EACbsC,mBAAoBA,EACpBH,SAAU,SAAC5yC,GACHmsD,GAAUA,EAASnsD,IAE3BuK,SAAUA,EACVnE,WAAYA,EACZysC,cAAeA,O,m/BCjB3B,IAAMrZ,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD70B,OAAQ60B,EAAM9yB,QAAQ/B,OACtB8yB,QAAS+B,EAAM9J,SAAS+H,YAWfwqC,GAAYh7B,cAAU,YAA0B,IAAxB/3B,EAAuB,EAAvBA,MACjC,OAAO,gBAACk3B,GAAA,EAAD,CAAMC,MAAOF,GAAaj3B,GAAO2kD,eAG/BqO,GAAqBnjC,cAE5B3M,G,kCAGF,WAAY2T,GAAmC,IAAD,uBAC1C,cAAMA,IACDvM,MAAQ,CACT2oC,ajG5BuD,CAC/Dx9D,OAAQ,GACRqW,aAAc,GACdpC,QAAS,GACT7S,UAAW,GACXL,gBAAiB,GACjBW,WAAY,GACZkoB,MAAO,KiGuBH,EAAK6zC,oBAAqB,EALgB,E,6DAQtBz8D,EAAY0uB,GAChCgE,KAAK+pC,oBAAqB,EAC1B/pC,KAAKiU,SAAL,SACOjU,KAAKmB,OADZ,IAEI2oC,aAAa,SAAK9pC,KAAKmB,MAAM2oC,cAAjB,IAA+Bx9D,OAAO,SAAK0zB,KAAKmB,MAAM2oC,aAAax9D,QAA9B,UAAuCgB,EAAK0uB,W,yCAIlFoD,GACfY,KAAK+pC,oBAAqB,EAC1B/pC,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2oC,aAAa,SAAK9pC,KAAKmB,MAAM2oC,cAAiB1qC,Q,0CAI5EY,KAAKgqC,mBjG/CsD,CAC/D19D,OAAQ,GACRqW,aAAc,GACdpC,QAAS,GACT7S,UAAW,GACXL,gBAAiB,GACjBW,WAAY,GACZkoB,MAAO,O,qCD0IuB,IAACkJ,EkG9FvBY,KAAK+pC,oBAAoB/pC,KAAK0N,MAAMl8B,UlG8Fb4tB,EkG9FyCY,KAAKmB,MAAM2oC,alG8FkB,CACrGh8D,KAAMkvB,GAAsBuM,YAC5BnK,e,0CkG3FIY,KAAKgqC,mBAAmBhqC,KAAK0N,MAAMtO,SACnCY,KAAK+pC,oBAAqB,I,+BAGP,IAAD,SACM/pC,KAAK0N,MAAtB72B,EADW,EACXA,MAAOvK,EADI,EACJA,OACR8yB,EAAUY,KAAKmB,MAAM2oC,aACrBz8B,EAASS,GAAaj3B,GAKtBozD,EAHatgE,OAAO+M,OAAO2lB,IAGAryB,KAAI,SAACk/B,GAAD,OACjC,gBAAC6E,GAAA,EAAD,CAAMjkC,IAAKo/B,EAAU8E,MAAOX,EAAO68B,kBAC/B,gBAAC,GAAD,MACA,gBAAC,GAAD,CAAwBhhC,SAAUA,EAAUm8B,SAAU,GAAIx1B,SAAU,KACnEvjC,EACIzC,QAAO,SAAC0C,GAAD,OAAiBA,EAAE28B,UAAYA,KACtCl/B,KAAI,SAACuC,GAAD,OACD,gBAACwhC,GAAA,EAAD,CAAMjkC,IAAKyC,EAAEe,GAAI0gC,MAAOX,EAAO88B,gBAC3B,gBAAC76B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAL,aAAoBnG,EAAEe,GAAtB,UACjC,gBAAC+8D,GAAA,EAAD,CACIruC,MAAOoD,EAAQ9yB,OAAOC,EAAEe,MAAO,EAC/Bg9D,cAAe,SAACtuC,GAAD,OAAoB,EAAKuuC,wBAAwBh+D,EAAEe,GAAI0uB,cAO9F,OACI,gBAAC,GAAD,KACI,gBAACohB,GAAA,EAAD,CAAYpP,MAAOX,EAAOyc,OAAQvM,sBAAuBlQ,EAAOm9B,iBAC5D,gBAACj7B,GAAA,EAAD,CAAkBvB,MAAOX,EAAOo9B,YAAaj7B,QAAS,kBAAM,EAAKk7B,sBAC7D,gBAACp7B,GAAA,EAAD,CAAMtB,MAAOX,EAAOs9B,iBAAkBl4D,KAAKC,EAAE,mCAC7C,gBAACopC,GAAA,EAAD,CAAe/sC,KAAK,UAAUi/B,MAAOX,EAAOu9B,mBAEhD,gBAAC78B,GAAA,EAAD,CAAMC,MAAOX,EAAO68B,kBAChB,gBAAC56B,GAAA,EAAD,CAAMtB,MAAOX,EAAOw9B,cAAep4D,KAAKC,EAAE,sCAC1C,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAO88B,gBAChB,gBAAC76B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAE,eACxC,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOy9B,eAChB,gBAAC,GAAD,CACInoD,aAAcyc,EAAQzc,aACtBqgD,WAAW,EACXH,SAAU,SAAClgD,GAAD,OAA4B,EAAKqnD,mBAAmB,CAACrnD,oBAEnE,gBAACooD,GAAD,CAAmBv7B,QAAS,kBAAM,EAAKw6B,mBAAmB,CAACrnD,aAAc,UAGjF,gBAACorB,GAAA,EAAD,CAAMC,MAAOX,EAAO88B,gBAChB,gBAAC76B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAE,oBACxC,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOy9B,eAChB,gBAAC,GAAD,CACIp9D,UAAW0xB,EAAQ1xB,UACnBuT,UAAQ,EACR+hD,WAAW,EACXH,SAAU,SAACn1D,GAAD,OAAyB,EAAKs8D,mBAAmB,CAACt8D,iBAEhE,gBAACq9D,GAAD,CAAmBv7B,QAAS,kBAAM,EAAKw6B,mBAAmB,CAACt8D,UAAW,UAG9E,gBAACqgC,GAAA,EAAD,CAAMC,MAAOX,EAAO88B,gBAChB,gBAAC76B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAE,sBACxC,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOy9B,eAChB,gBAAC,GAAD,CACI35D,OAAQiuB,EAAQ/xB,gBAChB21D,WAAW,EACXH,SAAU,SAACx1D,GAAD,OAA+B,EAAK28D,mBAAmB,CAAC38D,uBAEtE,gBAAC09D,GAAD,CAAmBv7B,QAAS,kBAAM,EAAKw6B,mBAAmB,CAAC38D,gBAAiB,UAGpF,gBAAC0gC,GAAA,EAAD,CAAMC,MAAOX,EAAO29B,uBAChB,gBAAC17B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAE,iBACxC,gBAAC,GAAD,CACI8hB,MAAO4K,EAAQlJ,MACfozB,SAAU,SAACpzB,GAAD,OAAmB,EAAK8zC,mBAAmB,CAAC9zC,WACtDyuC,aAAa,sBAGiB,GAArCvlC,EAAQlJ,MAAMyrC,QAAQ,YACnB,gBAAC5zB,GAAA,EAAD,CAAMC,MAAOX,EAAO29B,uBAChB,gBAAC17B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAE,iBACxC,gBAAC,GAAD,CACI6N,QAAS6e,EAAQ7e,QACjB+oC,SAAU,SAAC/oC,GAAD,OAAuB,EAAKypD,mBAAmB,CAACzpD,aAC1DytB,MAAO,CAACzC,MAAO,QACfo5B,aAAa,sBAIW,GAAnCvlC,EAAQlJ,MAAMyrC,QAAQ,UACnB,gBAAC5zB,GAAA,EAAD,CAAMC,MAAOX,EAAO29B,uBAChB,gBAAC17B,GAAA,EAAD,CAAMtB,MAAOX,EAAO+8B,YAAa33D,KAAKC,EAAE,cACxC,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOy9B,eAChB,gBAAC,GAAD,CACI98D,WAAYoxB,EAAQpxB,WACpB60D,SAAU,SAAC70D,GAAD,OAA6B,EAAKg8D,mBAAmB,CAACh8D,gBAChEm5C,YAAa,CAAC5Y,KAAM,GACpBttB,UAAQ,EACRsoC,eAAa,IAEjB,gBAACwhB,GAAD,CAAmBv7B,QAAS,kBAAM,EAAKw6B,mBAAmB,CAACh8D,WAAY,WAKtFi8D,Q,GA9IcvjC,aAqJ7BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBwb,OAAQ,CACJve,MAAO,QAEXi/B,gBAAiB,CACb/7B,cAAe,SACf4I,kBAAmB,GACnB1B,WAAY,GACZ9B,cAAe,GACftI,MAAO,QAEX2+B,iBAAkB,CACd3+B,MAAO,QAEXs/B,aAAc,CACVh7B,SAAU,GACVmC,cAAe,EACfC,aAAc,EACdlC,MAAOl5B,EAAMwM,MAEjB8mD,eAAgB,CACZ17B,cAAe,MACfD,eAAgB,gBAChBG,WAAY,UAEhBq8B,sBAAuB,CACnBv8B,cAAe,UAEnB27B,WAAY,CACR77B,KAAM,EACNsB,SAAU,GACVc,eAAgB,EAChB+F,YAAa,GACb3G,MAAOl5B,EAAMm1B,WAEjB8+B,cAAe,CACXr8B,cAAe,MACfE,WAAY,SACZgC,eAAgB,GAEpB6qB,UAAW,CACP9vB,OAAQ,EACRH,MAAO,OACPyI,gBAAiB,qBACjB0B,UAAW,SACX/E,eAAgB,IAEpB85B,YAAa,CACTl/B,MAAO,OACP4C,SAAU,IACV8B,gBAAiB,EACjBgC,aAAc,GACd+B,gBAAiBn9B,EAAMw1B,aACvBoC,cAAe,MACfD,eAAgB,SAChBG,WAAY,SACZ+G,UAAW,SACX0B,aAAc,GACd0a,UAAW,GAEf6Y,gBAAiB,CACb96B,SAAU,GACVkC,cAAe,YACfC,cAAe,EACfjC,MAAOl5B,EAAMk1B,WAEjB6+B,gBAAiB,CACb/6B,SAAU,GACVE,MAAOl5B,EAAMk1B,UACb0Q,WAAY,QAKXsuB,GAAoBn8B,cAC7B,gBAAE/3B,EAAF,EAAEA,MAAO24B,EAAT,EAASA,QAAT,OACI,gBAACD,GAAA,EAAD,CAAkBC,QAASA,GACvB,gBAACsM,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAO,CAAC6B,SAAU,GAAIE,MAAOl5B,EAAMwM,YAM5D6sB,MAAetB,cADd,SAAClB,GAAD,OAAsC,gBAAC,GAAD,MAAsBqG,IAAK81B,IAAwBn8B,Q,kbCjQnGu9B,G,uIAEE,IAAMhkC,EAAMjH,KAAK0N,MAAM2B,WACnBpI,EAAIC,aAAaD,EAAIE,W,+BAGN,IAAD,SACyBnH,KAAK0N,MAAzC72B,EADW,EACXA,MAAOuoC,EADI,EACJA,OAAQuT,EADJ,EACIA,MAAOtjB,EADX,EACWA,WACvBhC,EAASS,GAAaj3B,GACtB68C,EAAUhC,GAAa76C,GAEvB4L,EAAQ4kB,GAAYsrB,EAAM/rB,MAAM73B,MAEtC,OACI,gBAACg/B,GAAA,EAAD,CAAMC,MAAO,CAAC,CAAC2H,WAAYyJ,EAAOhG,KAAMsa,EAAQzlB,UAC5C,gBAACsB,GAAA,EAAD,CAAkBvB,MAAO,GAAIwB,QAAS,kBAAM,EAAKhsB,SAC7C,gBAACs4B,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAO8sB,cAE9C,gBAAC7qB,GAAA,EAAD,CAAMtB,MAAO,CAAC0lB,EAAQjxC,MAAO,CAACqtB,UAAW,WAAY+Z,cAAe,GAC/DpnC,GAEL,gBAAC8sB,GAAA,EAAD,CACIvB,MAAO,CAACiC,gBAAiB,IACzBT,QAAS,WACDq6B,GAAmBhjC,SAASgjC,GAAmBhjC,QAAQqkC,eAC3D77B,EAAWvI,SAAS,qBACpBgE,GAAMt5B,SAASisB,QAGnB,gBAACqe,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAO8sB,mB,GA7BrBzzB,aAoCnCoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB6rB,WAAY,CACRtqB,SAAU,GACVE,MAAOl5B,EAAMwM,WAKnB8nD,GAA4Bv8B,aAAUq8B,IAE7B,SAASG,GAAsB19B,GAC1C,OAAO,gBAACy9B,GAA8Bz9B,G,kbChDpC29B,G,yIACqB,IAMfC,EACA3N,EAPc,EAC4C39B,KAAK0N,MAA5DniC,EADW,EACXA,OAAQsL,EADG,EACHA,MAAOg3B,EADJ,EACIA,eAAgB4J,EADpB,EACoBA,UAAW2b,EAD/B,EAC+BA,UAC3C/lB,EAASS,GAAaj3B,GAEtBwM,EAAO5Q,KAAKC,EAAL,2BAAkCnH,GAK/C,OAAQA,GACJ,KAAKixB,GAAkBW,QACnBmuC,EAAgBxvB,KAChB6hB,EAAW,QACX,MACJ,KAAKnhC,GAAkBU,SACnBouC,EAAgBxvB,KAChB6hB,EAAW,aACX,MACJ,KAAKnhC,GAAkBylC,QACnBqJ,EAAgBxvB,KAChB6hB,EAAW,SACX,MACJ,KAAKnhC,GAAkBY,UACnBkuC,EAAgBxvB,KAChB6hB,EAAW,WAInB,OACI,gBAAC5vB,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOa,UAAWL,IAC5B,gBAACy9B,EAAD,CAAet9B,MAAO,CAACX,EAAOsF,KAAMygB,GAAYrkD,KAAM4uD,IACtD,gBAACruB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAOhqB,KAAMo0B,IAAap0B,Q,GAhCrBqjB,aAsC7BoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBJ,UAAW,CACPO,cAAe,MACfE,WAAY,UAEhBgE,KAAM,CACF+D,YAAa,EACbf,WAAY,GAEhBtyB,KAAM,CACFwsB,SAAU,SAKPjB,gBAAUy8B,I,8aC1CzB,IAAM/d,GAAQ,CACV3I,WAAY,GACZvN,aAAc,GACdqG,UAAW,KAGT8tB,G,qLACF9d,iBAAmB/mB,c,EACnB8mB,cAAgB9mB,c,EAChB8kC,cAAgB9kC,c,kDAEG+e,GAA2C,IAAD,SAIrDzlB,KAAK0N,MAFL72B,EAFqD,EAErDA,MAFqD,IAGrDy4C,KAAOhiD,EAH8C,EAG9CA,GAAI/B,EAH0C,EAG1CA,OAETiG,EAAWs5B,GAAMt5B,SAEjBi6D,EAAe,CACjB94B,KAAM,SACNtvB,KAAM5Q,KAAKC,EAAE,mCACbshC,gBAAiBn9B,EAAM3O,MACvB6nC,MAAOl5B,EAAMi1B,UACb0D,QAAS,iCAAM,EAAKge,cAAc3mB,cAAzB,EAAM,EAA4B+kB,SAEzCqT,EAAc,CAChBtsB,KAAM,QACNtvB,KAAM5Q,KAAKC,EAAE,kCACbshC,gBAAiBn9B,EAAM3O,MACvB6nC,MAAOl5B,EAAMi1B,UACb0D,QAAS,iCAAM,EAAKg8B,cAAc3kC,cAAzB,EAAM,EAA4BsT,SAEzCuxB,EAAe,CACjB/4B,KAAM,QACNtvB,KAAM5Q,KAAKC,EAAL,mCAA0CnH,GAChDyoC,gBAAiBn9B,EAAMu1B,OACvB2D,MAAOl5B,EAAMi1B,UACb0D,QAAS,WACLiW,IACAj0C,EAAS0tB,GAAkB5xB,MAInC,OAAI/B,IAAWixB,GAAkBW,QAAgB,CAACsuC,EAAcC,GACpD,CAACD,EAAcxM,EAAayM,K,+BAGlC,IAAD,SAC+B1rC,KAAK0N,MAAlC72B,EADF,EACEA,MAAOy4C,EADT,EACSA,KAAMiP,EADf,EACeA,aACdlxB,EAASS,GAAaj3B,GAEtBxI,EAAUihD,EAAKjhD,QACfmwD,EAAWnwD,EAAQW,UAAY,IAAMX,EAAQY,SAEnD,OACI,gCACI,gBAACq/C,GAAD,CACIva,IAAK/T,KAAKytB,iBACV1I,MAAOuI,GACPiB,eAAgB,IAChBC,gBAAgB,EAChBlJ,aAAc,SAACG,GAAD,OACV,gBAACyB,GAAD,CACI55C,GAAOgiD,EAAKjhD,QAAQf,GAAlB,IAAwBgiD,EAAK/jD,OAC/Bw5C,MAAOuI,GACP9G,KAAK,QACLluB,QAAS,EAAKm2B,WAAWhJ,GACzB0B,YAAa9Z,EAAOmN,iBAI5B,gBAACzM,GAAA,EAAD,CAAMC,MAAOX,EAAOqhB,aAChB,gBAAC3gB,GAAA,EAAD,CAAMC,MAAOX,EAAOshB,iBAChB,gBAAC,GAAD,CACItgD,QAASA,EACTgiC,KAAM,GACN4iB,SAAO,EACPplB,eAAgBR,EAAOngC,OACvBsiC,QAAS,kBAAM7I,GAAa,gBAAiB,CAACr5B,GAAIe,EAAQf,SAGlE,gBAACygC,GAAA,EAAD,CAAMC,MAAOX,EAAOwhB,eAChB,gBAACvf,GAAA,EAAD,CAAMtB,MAAOX,EAAOt+B,MAAOyvD,GAC1BnwD,GACG,gBAAC,GAAD,CACIytD,SAAU,GACVC,WAAW,EACX/tB,MAAO,CAACX,EAAOsxB,SAAU,CAACliB,YAAa,KACvC9uC,WAAYU,EAAQV,aAG5B,gBAAC,GAAD,CACIpC,OAAQ+jD,EAAK/jD,OACbksC,UAAWpK,EAAOsxB,SAClBvL,UAAW/lB,EAAOsxB,YAGzBJ,GAAgB,gBAAC,GAAD,CAAUnB,UAAU,OAAOhK,UAAW/lB,EAAOwxB,iBAGtE,gBAAC/P,GAAD,CACI/a,IAAK/T,KAAKwtB,cACVnC,WAAYZ,GAAiBwC,eAC7BD,OAAQ3+C,EACRktC,SAAU,iCAAM,EAAKkS,iBAAiB5mB,cAA5B,EAAM,EAA+BkoB,gBAEnD,gBAACiQ,GAAD,CACIjrB,IAAK/T,KAAKwrC,cACVn9D,QAASA,EACTutD,QAAS,iCAAM,EAAKnO,iBAAiB5mB,cAA5B,EAAM,EAA+B8e,mB,GAvGjCjf,aA8G3BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBogB,YAAa,CACTjgB,cAAe,MACfmB,QAAS,IAEb+e,gBAAiB,CACbngB,eAAgB,SAChBG,WAAY,UAEhBzhC,OAAQ,CACJ8mC,gBAAiBn9B,EAAMy1B,iBAE3BuiB,cAAe,CACXtgB,KAAM,EACNE,cAAe,SACfD,eAAgB,gBAChBsZ,YAAa,IAEjB/4C,KAAM,CACF8gC,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMwM,MAEjBs7C,SAAU,CACN9uB,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMm1B,UACb2zB,WAAY,GAGhBd,aAAc,CACV9uB,MAAOl5B,EAAMm1B,UACb6D,SAAU,IAGd2K,aAAc,CACVnD,kBAAmB,QAKhBzI,gBAAU28B,I,kbCrJVI,G,qLA5BHC,cAAuC,K,gDAE9BvoD,GAAe,IAAD,SACa2c,KAAK0N,MAAtCm+B,EADoB,EACpBA,YAAaC,EADO,EACPA,iBAEhB9rC,KAAK4rC,eAAejrC,aAAaX,KAAK4rC,eAC1C5rC,KAAK4rC,cAAgBxqC,YAAW,WAC5B,EAAKwqC,cAAgB,KACjBE,GAAkBA,EAAiBzoD,KACxCwoD,K,+BAGgB,IAAD,SAEuD7rC,KAAK0N,MAAxCsH,GAFpB,EAEX62B,YAFW,EAEEC,iBAFF,EAEoB92B,cAAiB+2B,EAFrC,0DAIlB,OACI,gBAAC,KAAD,MACI/2B,aAAc,SAACp6B,GACPo6B,GAAcA,EAAap6B,GAC/B,EAAKioD,SAASjoD,KAEdmxD,Q,GAvBYrlC,a,m/BCUhC,IAAMwJ,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDxB,aAAcwB,EAAM9J,SAASsI,aAC7BqsC,gBAAiB7qC,EAAM9J,SAASkI,kBAAkBzvB,SAClDD,aAAcsxB,EAAM9J,SAASkI,kBAAkB1vB,aAC/CmzB,YAAa7B,EAAM9J,SAASkI,kBAAkB3vB,KAC9C4vB,eAAgB2B,EAAM9J,SAASmI,mBAa7BxF,G,kCACF,WAAY0T,GAAiC,IAAD,uBACxC,cAAMA,IACDvM,MAAQ,CAACvmB,OAAQ,IAFkB,E,8CAKrB,IAAD,SAUdolB,KAAK0N,MARL/N,EAFc,EAEdA,aACA9oB,EAHc,EAGdA,MACA2oB,EAJc,EAIdA,eACAwsC,EALc,EAKdA,gBACAn8D,EANc,EAMdA,aACAmzB,EAPc,EAOdA,YACAqM,EARc,EAQdA,WACA79B,EATc,EASdA,SAEGoJ,EAAUolB,KAAKmB,MAAfvmB,OACDyyB,EAASS,GAAaj3B,GAEtBuoB,EAAUnC,GAEhB,OACI,gBAAC,GAAD,KACI,gBAAC8Q,GAAA,EAAD,CAAMC,MAAOX,EAAO4+B,kBACf7sC,EAAQp1B,KAAI,SAACF,GAAD,OACT,gBAACoiE,GAAD,CACIr1D,MAAOA,EACP/M,IAAG,wBAA0BA,EAC7BqiE,UAAWriE,EACXq/C,SAAU3pB,EAAe11B,GACzB0lC,QAAS,WACLh+B,EvGqTC,SAAC4tB,GAAD,MAAiE,CAC9FtxB,KAAMkvB,GAAsB8M,oBAC5B1K,WuGvTqCgtC,CAAkB,OAAEtiE,GAAO01B,EAAe11B,MACnD0H,EAASktB,aAKzB,gBAAC,GAAD,CACIotC,iBAAkB,kBAAMt6D,EAASktB,OACjCmtC,Y7HzCe,I6H0CflwD,YAAalJ,KAAKC,EAAE,UACpBsiC,aAAc,SAACp6B,GAAD,OAAoB,EAAKq5B,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BvmB,aAChEohB,MAAOphB,EACPizB,eAAgBR,EAAOg/B,mBACvBC,oBAAqBj/B,EAAOk/B,wBAC5Bz5B,WAAYzF,EAAOm/B,iBAEvB,gBAAC,GAAD,CACIn9B,WAAYA,EACZkgB,W7HzDe,G6H0DfH,UAAW,kBAAO59C,EvGkQV,SAACoJ,GAAD,OAA+B,SAAOpJ,EAAUC,GAAjB,+BAAA/G,EAAAC,OAAA,qDAInD8G,IAFOC,EAF4C,EAEnDC,KAAOD,MAF4C,IAGnD2lB,SAAWkI,EAHwC,EAGxCA,kBAAmBC,EAHqB,EAGrBA,gBAG9BD,EAAkBzvB,UAAayvB,EAAkB1vB,aANE,wDAQvD2B,EA1BsD,CACtD1D,KAAMkvB,GAAsB4M,sBAiB2B,WAAAl/B,EAAA,MAUhCF,EACnB,mBACA,MACA,CACIoF,KAAM2vB,EAAkB3vB,KACxBizB,MtB3UuB,GsB4UvBt3B,OAAQ5B,OAAOC,KAAK41B,GAAgB31B,QAAO,SAAC41B,GAAD,OAAOD,EAAeC,MACjE7kB,OAAQA,GAAUA,EAAOrQ,OAAS,EAAIqQ,OAAS7Q,GAEnD,GACA2H,GACA,IArBmD,QAUjD/F,EAViD,QAwB1CJ,SAAWhD,EAAeyK,IAE7BwrB,GADAsE,EAAYn3B,GACOM,KAA+BjC,IAAIkG,GACtDL,EAAeizB,EAAUC,KAAKC,YAAcF,EAAUC,KAAKE,WACjEzxB,EAAS+sB,GAAoBC,EAAO3uB,KACjC2B,EA3CmD,CAC1D1D,KAAMkvB,GAAsB6M,wBAa2B,6DuGlQQ4iC,CAAa7xD,KAC5D9K,SAAUk8D,EACVn8D,aAAcA,EACdmzB,YAAaA,EACbxE,MAAOmB,EACPryB,GAAI,SAACmb,GAAD,OAAkCA,EAAGnb,IACzCyiD,mBACI,gCACI,gBAACzgB,GAAA,EAAD,CAAMtB,MAAOX,EAAOw0B,gBAAiBpvD,KAAKC,EAAE,+BAC5C,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOy0B,gBAAiBrvD,KAAKC,EAAE,sCAGpDg9C,QAAS,kBAAMl+C,EAASktB,OACxB+wB,gBAAc,EACdK,WAAY,SAACR,EAAwBvM,GAAzB,OACR,gBAAC,GAAD,CACIj5C,IAAG,gBAAkBwlD,EAAKhiD,GAAvB,IAA6BgiD,EAAK/jD,OACrC+jD,KAAMA,EACNrK,SAAUlC,EACVwb,aAAcjP,EAAKhiD,KAAOqyB,EAAa,GAAGryB,MAGlD2iD,oBAAqB5iB,EAAO+iB,sB,GAzEf1pB,aAgFjC,SAASwlC,GAAT,GAUiB,IATbr1D,EASY,EATZA,MACAsyC,EAQY,EARZA,SACAgjB,EAOY,EAPZA,UACA38B,EAMY,EANZA,QAOMnC,EAASS,GAAaj3B,GAC5B,OACI,gBAAC,KAAD,CACI24B,QAASA,EACT/sB,MAAOhQ,KAAKC,EAAL,2BAAkCy5D,GACzCt+B,eAAgBR,EAAOq/B,sBACvBvlB,YAAa,CAAC9Z,EAAOs/B,aAAcxjB,EAAW9b,EAAOu/B,qBAAuB,IAC5ExpB,WAAY,CAAC/V,EAAOw/B,YAAa1jB,EAAW9b,EAAOy/B,oBAAsB,IACzEC,QAAQ,IAKpB,IAAMj/B,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB0+B,OAAQ,CACJ3mB,UAAW,GACX1Q,WAAY,GACZ0B,kBAAmB,GACnB9L,MAAO,QAEX9oB,MAAO,CACHotB,SAAU,GACVd,WAAY,QAEhBysB,UAAW,CACP7qB,eAAgB,GAChBjF,OAAQ,EACRH,MAAO,QAEX6kB,eAAgB,CACZ7kB,MAAO,OACP4C,SAAU,IACVuH,UAAW,UAEfu3B,gBAAiB,CACbx+B,cAAe,MACfoZ,aAAc,IAElBga,eAAgB,CACZhyB,SAAU,GACVmC,cAAe,IACfjC,MAAOl5B,EAAMwM,KACbstB,eAAgB,GAEpBmxB,eAAgB,CACZjyB,SAAU,GACVmC,cAAe,GACfjC,MAAOl5B,EAAMwM,MAGjB4oD,iBAAkB,CACd1gC,MAAO,OACPoF,eAAgB,GAChBlC,cAAe,OAEnBi+B,sBAAuB,CACnBn+B,KAAM,EACNyH,iBAAkB,GAClBoB,aAAc,IAElBu1B,aAAc,CACVjhC,OAAQ,GACRsI,gBAAiBn9B,EAAMs1B,gBAE3BygC,qBAAsB,CAClB54B,gBAAiBn9B,EAAMu1B,QAE3BygC,YAAa,CACT98B,MAAOl5B,EAAMwM,KACbwsB,SAAU,GACVkC,cAAe,YACfC,cAAe,IAEnB86B,oBAAqB,CACjB/8B,MAAOl5B,EAAMi1B,UACbiD,WAAY,OAEhBm+B,WAAY,CACRr9B,SAAU,GACVE,MAAOl5B,EAAMwM,KACbqzB,YAAa,GAEjBy2B,mBAAoB,CAChBp9B,MAAOl5B,EAAMi1B,WAGjBugC,mBAAoB,CAChB9gC,MAAO,OACP0G,aAAc,EACdhC,gBAAiB,EACjBoH,kBAAmB,GACnBrD,gBAAiB,cACjBimB,eAAgB,EAChBnjB,kBAAmB,GAEvBy1B,wBAAyB,CACrB7gC,OAAQ,GACRsI,gBAAiBn9B,EAAMs1B,eACvB2lB,UAAW,EACX1a,aAAc,IAElBo1B,eAAgB,CACZ38B,SAAU,SAKPK,MAAetB,aAAU5U,KChOlCozC,GAAmB3S,eAEZ4S,GAAuB,kBAChC,gBAACD,GAAiBjpB,UAAlB,KACI,gBAACipB,GAAiB9oB,OAAlB,CACIv1C,KAAK,oBACLy1C,QAAS,iBAAO,CACZ0W,aAAa,EACbz4C,MAAO2kB,GAAY,yBAGtB,SAACsG,GAAD,OACG,gCACI,gBAAC,GAAsBA,GACvB,gBAAC20B,GAAD,MAAmB7P,MAAM,GAAU9kB,QAI/C,gBAAC0/B,GAAiB9oB,OAAlB,CACIv1C,KAAK,uBACLw1C,UAAWxqB,GACXyqB,QAAS,CACL0W,aAAa,EACbz4C,MAAO2kB,GAAY,wBACnBmO,OAAQ61B,MAGhB,gBAACgC,GAAiB9oB,OAAlB,CACIv1C,KAAK,qBACLw1C,UAAWvqB,GACXwqB,QAAS,CACL0W,aAAa,EACbz4C,MAAO2kB,GAAY,sBACnBmO,OAAQ,SAAC7H,GAAD,OAA6B,gBAAC4lB,GAAD,MAAYvB,YAAY,GAAUrkB,U,4bC9BjF4/B,G,yIACqB,IAAD,EAKdttC,KAAK0N,MAHL72B,EAFc,EAEdA,MACS8hC,EAHK,EAGdyG,OAASzG,OACN40B,EAJW,2BAMZlgC,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,KAAD,CACIm3B,MAAOX,EAAOmgC,cACdn0B,KAAmB,SAAbxiC,EAAMvJ,GAAgB,OAAS,UACrCgsC,UAAWnK,IAEX,gBAACs+B,GAAA,EAAD,QACQF,EADR,CAEIG,gBAAiB72D,EAAMu1B,OACvB4B,MAAO,CAACX,EAAOgX,OAAQ,CAACxQ,cAAe8E,IACvCg1B,SAAUtgC,EAAOugC,IACjBxa,UAAW/lB,EAAOsF,KAClBk7B,WAAW,U,GArBDnnC,aA4BxBoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBk/B,cACoB,QAAhB9lC,KAASC,GACH,GACA,CACIiM,SAAU,WACV+E,OAAQ,EACRQ,KAAM,EACNM,MAAO,GAErB4K,OAAQ,CACJ4V,eAAgB,EAChBnI,UAAW,EACX9d,gBAAiB,eAErB45B,IAAK,CACDn/B,cAAe,SACfD,eAAgB,UAEpBmE,KAAM,CACFpE,KAAM,QAyBX,SAASu/B,GAAT,GAA2F,IAAlE/+D,EAAiE,EAAjEA,KAAMghC,EAA2D,EAA3DA,MAClC,OAAO,gBAAC+L,GAAA,EAAD,CAAezL,KAAM,GAAIthC,KAAMA,EAAMghC,MAAOA,IAQxCg+B,OA7Bf,SAAoBrgC,GAChB,IAAM0R,EAASsB,eACf,OACI,gBAAC,KAAD,MACK,SAACC,GAAD,OAA4B,gBAAC,GAAD,MAAiBvB,OAAQA,GAAYuB,EAAgBjT,Q,8aC9D9F,IAAMwC,GAAiBtO,cAAQ,gBAAE3K,EAAF,EAAEA,UAAF,MAA4B,CACvD+2C,UACI/2C,EAAUgP,kBAAkB17B,OAAS,EAAI0sB,EAAU+O,WAAW/O,EAAUgP,kBAAkB,SAAMl8B,EACpG86B,cAAe5N,EAAU4N,kBAQvBopC,G,yIACqB,IAAD,EACkCjuC,KAAK0N,MAAlDsgC,EADW,EACXA,UAAWnpC,EADA,EACAA,cAAehuB,EADf,EACeA,MAAU62B,EADzB,8CAEZL,EAASS,GAAaj3B,GAEtB62C,EAAYsgB,GAAaA,EAAUr/D,MAAMf,MAAK,SAACiB,GAAD,OAAqBA,EAAEC,OAAF,MAAU+1B,OAAV,EAAUA,EAAe/1B,QAC5FM,EAAW,MAAG4+D,OAAH,EAAGA,EAAW5+D,YAIzB8+D,EACF9+D,GACAs+C,IACoC,OAAlCA,EAAUv+C,qBAAgCu+C,EAAUv+C,oBAAsBC,EAAYY,WACpF09C,EAAUx+C,mBAAqBE,EAAYN,KAE7C6jC,EAAO,gBAACm7B,GAAD,MAAgB/+D,KAAK,WAAc2+B,IAC5CygC,EAAY,iCAUhB,OARID,IACAC,EACI,gBAACpgC,GAAA,EAAD,CAAMC,MAAOX,EAAO+gC,oBAChB,gBAACv9B,EAAA,EAAD,CAAaR,KAAMg+B,GAAoBt/D,KAAK,cAAcghC,MAAOl5B,EAAMi1B,cAM/E,gBAACiC,GAAA,EAAD,KACK4E,EACAw7B,O,GA9BcznC,aAoCzBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB8/B,mBAAoB,CAChBx6B,SAAU,WACVI,gBAAiBn9B,EAAM3O,MACvBqjC,MA9CW,GA+CXG,OA/CW,GAgDX0L,aAhDW,GAiDX5I,eAAgB,SAChBG,WAAY,SACZwK,KAAM,GACNR,OAAQ,SAKLzI,MAAetB,aAAUq/B,KCxDlCK,GAAeC,eAsDA9T,eAArB,IA2Be7rB,iBA5Ef,WACI,OACI,gBAAC0/B,GAAanqB,UAAd,CACIM,iBAAiB,cACjBJ,OAAQ,SAAC3W,GAAD,OAA8B,gBAAC,GAAeA,KAStD,gBAAC4gC,GAAahqB,OAAd,CACIv1C,KAAK,cACLw1C,UAAW8oB,GACX7oB,QAAS,CACLgqB,WAAY,SAAC9gC,GAAD,OAAW,gBAACogC,GAAD,MAAgB/+D,KAAK,YAAe2+B,QAGnE,gBAAC4gC,GAAahqB,OAAd,CACIv1C,KAAK,eACLw1C,UAAWmW,GACXlW,QAAS,gBAAE5d,EAAF,EAAEA,MAAF,MAAc,CACnB6nC,cAAuD,eAAxCC,wCAA6B9nC,GAC5C4nC,WAAY,SAAC9gC,GAAD,OAAW,gBAAC,GAAqBA,IAE7CihC,aAAc,SAACjhC,GAAD,OACV,gBAAC6B,GAAA,EAAD,QACQ7B,EADR,CAEI8L,cAAe,EACfhK,QAAS,kBAAM7I,GAAa,eAAgB,CAACY,OAAQ,iC,kbCvC3EqnC,G,qLACFC,eAAiB,E,EACjBtjC,MAAQ,IAAIwT,KAAWC,MAAc,G,2DAGjChf,KAAK8uC,SAAS9uC,KAAK0N,MAAMsc,S,yCAGV1R,GAA6C,IACrD0R,EAAShqB,KAAK0N,MAAdsc,MACH1R,EAAS0R,QAAUA,GAAOhqB,KAAK8uC,SAAS9kB,K,+BAG/BA,GACb,IACM+kB,GADY/kB,EAAQ,GAAKxiB,GAAiBj9B,OACjBy1B,KAAK6uC,eAEhB,QAAhBnnC,KAASC,GAAc3H,KAAKuL,MAAMkU,SAASsvB,GAE3ChwB,KAAWc,OAAO7f,KAAKuL,MAAO,CAC1BuU,QAASivB,EACThvB,SAAU,IACVL,OAAQC,KAAOqvB,MAChBhvB,U,+BAIY,IAAD,SACsBhgB,KAAK0N,MAAtCM,EADW,EACXA,MAAOihC,EADI,EACJA,gBAAiBp4D,EADb,EACaA,MACzBw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,KAAsBq4D,SAAvB,MACK,SAAC9vB,GAAD,OACG,gBAACrR,GAAA,EAAD,CACIC,MAAO,CAACX,EAAOnB,WAAY,CAACyM,SAAe,MAANyG,OAAA,EAAAA,EAAQzG,SAAU,GAAK,IAAK3K,GACjE0P,SAAU,SAACnQ,GACP,EAAKshC,eAAiBthC,EAAOoQ,YAAYpQ,OAAOhC,MAChD,EAAKujC,SAAS,EAAKphC,MAAMsc,SAG7B,gBAAC,KAAWjc,KAAZ,CAAiBC,MAAO,CAACX,EAAO8hC,WAAY,CAAC5jC,MAAO,EAAKA,OAAQ0jC,a,GAzCrDvoC,aAiDvBoH,GAAeX,IAAS,SAACt2B,EAAc+0B,GAChD,OAAOyC,KAAWC,OAAO,CACrBpC,WAAY,CACR0H,SAAU,WACVuF,KAAMvN,EAAe,MAAQ,MAE7BL,MAAOK,EAAe,MAAQ,MAC9BF,OAAQ,EACR0L,aAAc,EACdpD,gBAAiBn9B,EAAMw1B,cAE3B8iC,WAAY,CACR/3B,aAAc,EACdpD,gBAAiBn9B,EAAMu1B,OACvBV,OAAQ,aAKLkD,gBAAUggC,IChDVhgC,qBArBf,SAA2BlB,GACvB,IAAMg3B,EAAevrD,GAAQnP,KAAI,SAACiE,GAAD,OAAewE,KAAKC,EAAL,WAAkBzE,MAC3D4I,EAAyD62B,EAAzD72B,MAAO+H,EAAkD8uB,EAAlD9uB,QAAS+lD,EAAyCj3B,EAAzCi3B,aAAcrb,EAA2B5b,EAA3B4b,SAAaxX,EAFiB,KAEHpE,EAFG,+CAInE,OACI,gBAAC,KAAD,MACI8B,QAAS,SAACq1B,GACFvb,GAEAA,GADwC,iBAAPub,EAAmBA,EAAmB,CAACA,IACvD76D,KAAI,SAACyD,GAAD,OAAe0L,GAAQ1L,QAGpDq3D,gBAAgB,EAChBC,gBAAiBnmD,EAAQ5U,KAAI,SAACyO,GAAD,OAAoBU,GAAQwoD,QAAQlpD,MACjEusD,QAASN,GACLR,GAAoBS,EAAc9tD,GAClCi7B,O,u/BCtBVs9B,G,qLACFp1B,SAAWtT,IAAM4L,Y,gDAEM,IAAD,SACItS,KAAK0N,MAApB72B,EADW,EACXA,MAAOwM,EADI,EACJA,KACRgqB,EAASgiC,GAAcx4D,GAE7B,OACI,oCACI,kBAAC04B,GAAA,EAAD,CAAkBiK,cAAe,GAAKhK,QAAS,iCAAM,EAAKwK,SAASnT,cAApB,EAAM,EAAuBsT,SACvEna,KAAK0N,MAAMU,UAEhB,kBAACkM,GAAD,CACIvG,IAAK/T,KAAKga,SACVxB,OAAQ,kBAAM,EAAKvE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BwuB,OAAO,MACnDjX,eAAgBrL,EAAOa,UACvB0L,cAAe,kBAAM,kBAACtK,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MAAOA,W,GAhBxCqjB,IAAMwN,WAuBrBm7B,GAAgBliC,IAAS,SAACt2B,GACnC,OAAOw3B,KAAWC,OAAO,CACrBjrB,KAAM,CACFysB,UAAW,UACXG,gBAAiB,GACjBJ,SAAU,GACVE,MAAOl5B,EAAMk1B,WAEjBmC,UAAW,CACPohC,aAAc,SACdl4B,aAAc,EACdC,kBAAmB,GACnB9L,MAAO,IACP0E,gBAAiB,EACjB+D,gBAAiBn9B,EAAMw1B,mBAKpBuC,gBAAUwgC,I,u/BC3BnBG,G,qLACFC,iBAAmB9oC,IAAM4L,Y,wDAERm9B,GAAwC,IAC9C5M,EAAY7iC,KAAK0N,MAAjBm1B,SACHA,GAAUA,EAAS,SAAI7iC,KAAK0N,MAAM1R,OAAUyzC,M,mCAGvCrmC,GACTpJ,KAAK0vC,iBAAiBjzC,GAAeuD,KAAK0N,MAAMiiC,MAAOvmC,M,+BAGpC,IAAD,SACmBpJ,KAAK0N,MAAnC72B,EADW,EACXA,MAAO84D,EADI,EACJA,MAAO3zC,EADH,EACGA,MAAOgS,EADV,EACUA,MACtBX,EAASS,GAAaj3B,GAEtB+H,EAAoB,GACtB+wD,EAAM/yC,oBACFZ,EAAMxvB,aAAaoS,EAAQ2iB,KAAK,UAChCvF,EAAMvvB,WAAWmS,EAAQ2iB,KAAK,QAC9BvF,EAAMtvB,YAAYkS,EAAQ2iB,KAAK,UAGvC,IAAM/M,EAAgB,GAClBm7C,EAAM7yC,yBACFd,EAAMrvB,YAAY6nB,EAAM+M,KAAK,SAC7BvF,EAAMpvB,cAAc4nB,EAAM+M,KAAK,YAGvC,IAAMquC,IACAD,EAAM/yC,mBAAqBhe,EAAQrU,OAAS,MAAQolE,EAAME,gBAAkBr7C,EAAMjqB,OAAS,GAEjG,OACI,kBAACwjC,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOY,QAASD,IAC1B,kBAACD,GAAA,EAAD,CAAMC,MAAOX,EAAOwP,cAChB,kBAAC9O,GAAA,EAAD,CAAMC,MAAOX,EAAOyiC,WAChB,kBAAC,KAAD,CACI3lB,QAASylB,EACTpgC,QAAS,kBAAM,EAAKugC,cAAcH,IAClC/hC,eAAgBR,EAAO+c,oBAE3B,kBAAC7a,GAAA,EAAD,CACIvB,MAAOX,EAAO2iC,mBACdxgC,QAAS,kBAAM,EAAKugC,cAAcH,KAElC,kBAACtgC,GAAA,EAAD,CAAMtB,MAAOX,EAAO4iC,WAAYx9D,KAAKC,EAAL,aAAoBi9D,EAAMriE,GAA1B,YAGxC,kBAACygC,GAAA,EAAD,CAAMC,MAAO,CAACS,cAAe,QACzB,kBAACc,GAAA,EAAD,CACIvB,MAAOX,EAAO6iC,WACd1gC,QAAS,iCAAM,EAAKggC,iBAAiB3oC,cAA5B,EAAM,EAA+BsT,SAE9C,kBAACtJ,EAAA,EAAD,CAAa7C,MAAOX,EAAO8iC,eAAgBphE,KAAK,UAEpD,kBAAC,GAAD,CAAesU,KAAM5Q,KAAKC,EAAL,aAAoBi9D,EAAMriE,GAA1B,UACjB,kBAACwuC,GAAA,EAAD,CAAe9N,MAAO,CAACX,EAAO6iC,WAAY7iC,EAAO8iC,gBAAiBphE,KAAK,YAiCnF,kBAACurC,GAAD,CACIvG,IAAK/T,KAAKwvC,iBACV92B,eAAgBrL,EAAO+iC,cACvBx2B,cAAe,SAACmJ,GAAD,OACX,oCACK4sB,EAAM/yC,mBACH,kBAACmR,GAAA,EAAD,CAAMC,MAAOX,EAAOgjC,yBAChB,kBAAC,GAAD,KAAa59D,KAAKC,EAAE,0BACpB,kBAAC,GAAD,CACIiyD,aAAa,kBACb/lD,QAASA,EACT0qC,SAAU,SAACH,GAAD,OACN,EAAKumB,iBAAiB,CAClBljE,aAA4C,GAA/B28C,EAASwY,QAAQ,UAC9Bl1D,WAAwC,GAA7B08C,EAASwY,QAAQ,QAC5Bj1D,YAA0C,GAA9By8C,EAASwY,QAAQ,eAOhDgO,EAAM7yC,wBACH,kBAACiR,GAAA,EAAD,CAAMC,MAAOX,EAAOgjC,yBAChB,kBAAC,GAAD,KAAa59D,KAAKC,EAAE,wBACpB,kBAAC,GAAD,CACIiyD,aAAa,kBACbnwC,MAAOA,EACP80B,SAAU,SAACH,GAAD,OACN,EAAKumB,iBAAiB,CAClB/iE,YAA0C,GAA9Bw8C,EAASwY,QAAQ,SAC7B/0D,cAA8C,GAAhCu8C,EAASwY,QAAQ,iBAMnD,kBAAC,GAAD,CACI3zB,MAAOX,EAAOijC,oBACd74B,UAAWpK,EAAOkjC,wBAClB/4B,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,MACb88B,QAASuT,a,GAnIdrc,IAAMwN,WA6I3BpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBL,QAAS,CACLQ,cAAe,SACfE,WAAY,cAEhBkO,aAAc,CACVtR,MAAO,OACPkD,cAAe,MACfD,eAAgB,gBAChBG,WAAY,UAEhBmhC,UAAW,CACPrhC,cAAe,MACfE,WAAY,SACZJ,KAAM,GAEVyhC,mBAAoB,CAChBzhC,KAAM,GAEV0hC,UAAW,CACPl+B,cAAe,YACfC,cAAe,EACfjC,MAAOl5B,EAAMwM,MAEjB6sD,WAAY,CACRjgC,gBAAiB,GACjBoH,kBAAmB,GAEvB84B,eAAgB,CACZtgC,SAAU,GACVE,MAAOl5B,EAAMm1B,WAEjBoe,kBAAmB,CACfxa,QAAS,EACTI,UAAW,EACXiC,aAAc,EACdwK,WAAY,EACZ/F,YAAa,GAGjB05B,cAAe,CACXngC,gBAAiB,GACjBoH,kBAAmB,GACnB1I,WAAY,cAEhB0hC,wBAAyB,CACrB9kC,MAAO,OACP0G,aAAc,IAElBq+B,oBAAqB,CACjB5kC,OAAQ,GACRsK,iBAAkB,EAClBrF,eAAgB,EAChBX,UAAW,IAEfugC,wBAAyB,CACrB1gC,SAAU,SAKPjB,gBAAU2gC,I,qkBC5MlB,SAASiB,GACZlkE,EACA48B,EACAunC,EACAj/D,EACAqF,GAEA,IAAMw2B,EAAS+I,GAAsBv/B,GACrC,OACI,gCACI,gBAACy4B,GAAA,EAAD,CAAMtB,MAAOX,EAAOkJ,qBAAsB9jC,KAAKC,EAAE,kBAChDpG,EACIzC,QAAO,SAAC8lE,GAAD,OAAqBA,EAAMzmC,UAAYA,KAC9Cl/B,KAAI,SAAC2lE,EAAiBliE,GAAlB,OACD,gBAAC,GAAD,CACI3D,IAAK2D,EACLkiE,MAAOA,EACP3zC,MAAOy0C,EAAgB93D,YAAYg3D,EAAMriE,KAAOmvB,GAAekzC,GAC/D9M,SAAU,SAAC7mC,GAAD,OAA0BxqB,E9H6QrB,SAAClE,EAAY0uB,GAAb,MAAsE,CACzGluB,KAAMmD,EAAkB+3B,2BACxB17B,KACA0uB,S8HhRiE00C,CAAwBf,EAAMriE,GAAI0uB,KAC/EgS,MAAOX,EAAOiJ,mBAuC/B,SAASq6B,GAAiBF,GAC7B,IAAMG,EAjCV,SAA8BH,GAG1B,IAAMI,EAA+B,CACjC/iE,KAAM2iE,EAAgB3iE,KACtBkB,UAAWyhE,EAAgB14D,UAC3B9I,SAAUwhE,EAAgBz4D,SAC1BS,OAAQg4D,EAAgBh4D,OACxBtL,UAAWsjE,EAAgBtjE,UAAWmB,SACtCoK,YAAa+3D,EAAgB/3D,YAC7BhL,UAAW+iE,EAAgB/iE,UAC3BF,UAAWijE,EAAgB73D,YAAY5O,KAAI,SAACsD,GAAD,MAAS,CAACA,SACrDC,cAAe5D,OAAO+M,OAAO+5D,EAAgB93D,aAC7CtL,gBAAiBojE,EAAgBpjE,gBAAgBrD,KAAI,SAACsD,GAAD,MAAS,CAACA,UAGnE,MAA4B,WAAxBmjE,EAAgB3iE,KACT,SACA+iE,GADP,IAEI1iE,OAAQsiE,EAAgBtiE,SAEG,SAAxBsiE,EAAgB3iE,KAChB,SACA+iE,GADP,IAEI7iE,WAAYrE,OAAOC,KAAK6mE,EAAgBziE,YACnCnE,QAAO,SAAC41B,GAAD,OAAOgxC,EAAgBziE,WAAWyxB,MACzCz1B,KAAI,SAACsD,GAAD,MAAiB,CAACA,WAG5B,KAIkBwjE,CAAqBL,GAC1CG,GAAmB9lC,GAAMt5B,SAA6BD,EAAcq/D,I,8aCjD5E,SAASG,KACL,OAAO,gBAAChjC,GAAA,EAAD,CAAMC,MAAO,CAACzC,MAAO,GAAIG,OAAQ,K,IAGtCslC,G,yIACqB,IAAD,SAedhxC,KAAK0N,MAbLjrB,EAFc,EAEdA,MACAC,EAHc,EAGdA,SACAsnC,EAJc,EAIdA,MACAinB,EALc,EAKdA,YACAC,EANc,EAMdA,QACAz1B,EAPc,EAOdA,aACAh4B,EARc,EAQdA,KACAoqB,EATc,EASdA,eACA3B,EAVc,EAUdA,WACAilC,EAXc,EAWdA,aACAve,EAZc,EAYdA,UACAwe,EAbc,EAadA,oBACAv6D,EAdc,EAcdA,MAEEw2B,EAAS8H,GAAgBt+B,GAEzBw6D,EAAcrnB,EAAQ,EAOtBnJ,EAAOtT,GAAO3B,aAEpB,OACI,gBAAC,GAAD,CAAe+B,gBAAc,EAACE,eAAgBR,EAAO+H,MAChDyL,EAAO,gBAAC9S,GAAA,EAAD,CAAMC,MAAOX,EAAOgI,qBAAsB87B,GAAuB,iCACzE,gBAACpjC,GAAA,EAAD,CAAMC,MAAOX,EAAOiI,cACfpJ,EACD,gBAACkR,GAAA,EAAD,CACIpP,MAAOX,EAAOmI,gBACd+H,sBAAuB,CAAC1P,EAAgBR,EAAOoI,sBAE/C,gBAACmI,GAAA,EAAD,CACIC,SAAS,WACTyzB,uBAAwB,GACxBC,SAAUH,EACVpjC,MAAOX,EAAOuI,uBAEd,gBAAC7H,GAAA,EAAD,CAAMC,MAAOX,EAAOkI,QACf9yB,GAA0B,kBAAVA,GACb,gBAAC6sB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAO5qB,MAAOmwC,EAAY,CAAC7iB,MAAO6iB,GAAa,KAAMnwC,GAEtEA,GAA0B,kBAAVA,GAAsBA,EACtCC,GACG,gBAAC4sB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAO3qB,SAAUkwC,EAAY,CAAC7iB,MAAO6iB,GAAa,KAC3DlwC,KAIXm+B,GAAQswB,EACTnxC,KAAK0N,MAAMU,WAGpB,gBAACL,GAAA,EAAD,CAAMC,MAAOX,EAAOwI,iBAChB,gBAAC9H,GAAA,EAAD,CAAMC,MAAOX,EAAOyI,iBACfu7B,GACG,gBAAC,GAAD,CACIrjC,MAAO,CAACX,EAAO0I,UAAW1I,EAAO4I,eACjCuB,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,mBACb88B,QAAS,kBAAM,EAAK9B,MAAM8jC,eAGhCH,GACE,gBAAC,GAAD,CACIrjC,MAAO,CAACX,EAAO0I,UAAW1I,EAAO4I,eACjCuB,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,oBACb88B,QAAS,kBAAM,EAAKiiC,qBAG1BR,GAAeC,GACb,gCACI,gBAACH,GAAD,MACA,gBAAC,GAAD,CACI/iC,MAAOX,EAAO0I,UACdyB,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,mBACb88B,QA9DV,WACdiM,EAAcA,IACTy1B,GAASztD,SAgEAytD,GACE,gCACI,gBAACH,GAAD,MACA,gBAAC,GAAD,CACI/iC,MAAOX,EAAO0I,UACdyB,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,qBACb88B,QAAS,WACDiM,GAAcA,IAClBk1B,GAAiB7lC,GAAMr5B,WAAWE,KAAK6G,sB,uCAa3E,IAAMqL,EAAO,kBAAMinB,GAAMt5B,SAAS8D,OAEd,QAAhBoyB,KAASC,GACT9jB,IAEA1Y,IAAMC,MAAMqH,KAAKC,EAAE,yBAA0BD,KAAKC,EAAE,wBAAyB,CACzE,CACI2Q,KAAM5Q,KAAKC,EAAE,0BACbs7B,MAAO,UAEX,CAAC3qB,KAAM5Q,KAAKC,EAAE,uBAAwB88B,QAAS3rB,EAAMmqB,MAAO,qB,GAvH9CtH,aA6HfkI,gBAAUoiC,I,6oBC3IzB,IAAM9gC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,eAG1Bk5D,GAAoBr4D,OAAauhC,MAAM,CACzC7iC,UAAW+B,GACX9B,SAAUgC,KAKRgf,G,qLACF24C,iBAAmBjrC,c,6DAEGkrC,GAClB,IAAMC,EAAO7xC,KAAK0N,MAAM+iC,gBAClBhtD,EAAOmuD,EAAUnB,gBACvB,OAAOoB,EAAK95D,WAAa0L,EAAK1L,WAAa85D,EAAK75D,UAAYyL,EAAKzL,W,6BAG9DtB,GACHqlC,KAASC,UACThc,KAAK0N,MAAMl8B,SAASiF,GAAoBC,IACxCspB,KAAK0N,MAAMjqB,S,+BAGQ,IAAD,SACeuc,KAAK0N,MAA/B72B,EADW,EACXA,MAAO45D,EADI,EACJA,gBAEd,OACI,gBAAC,KAAD,CACIr1B,cAAeq1B,EACfp1B,iBAAkBq2B,GAClBvzB,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAqC,EAAKiN,OAAOjN,MAE1D,SAAC8kC,GAAuD,IAC9CC,EAAmED,EAAnEC,aAAc/kC,EAAqD8kC,EAArD9kC,OAAQtD,EAA6CooC,EAA7CpoC,OAAQyhC,EAAqC2G,EAArC3G,QAASC,EAA4B0G,EAA5B1G,aAAcC,EAAcyG,EAAdzG,WACtD2G,EAAiB,SAAC9G,GAAD,O,mWAAA,EACnBA,QACA5Y,MAAQtlB,EAAmCk+B,GAC3C1sC,MAAQkL,EAA+CwhC,GACvDC,QAAUA,EAAiDD,GAC3DE,eACAC,cjFWjB,SAA2Cl+B,GAkC9C,MAAO,CACH+2B,aAAc,CACVrC,MAAO,OACPoF,eAAgB,IAEpB3C,MAAO,CACHzC,MAAO,OACPG,OAAQ,GACR0L,aDpHkC,GCqHlCE,YAAa,EACbtD,gBAAiBn9B,EAAMm2B,2BAE3BkG,aAAc,CACVc,gBAAiBn9B,EAAMo2B,kCAE3B+F,WAAY,CACR8D,kBAAmB,EACnBE,kBAAmBngC,EAAM3O,OAE7B+qC,WAAY,GACZH,WAAY,CACRjD,SAAU,GACVE,MAAOl5B,EAAMwM,KACb2yB,iBAAkB,IAEtBjD,kBAAkB,MACM,QAAhBrL,KAASC,GAAgB,CAACsP,QAAS,QAAwB,KiFtEhD66B,CAAkCj7D,KAGzC,OACI,gBAAC,GAAD,MACI4L,MAAOhQ,KAAKC,EAAE,yBACdgQ,SAAUjQ,KAAKC,EAAE,4BACjBy+D,aAAc,gBAACY,GAAD,MACdt2B,aAAcA,GACV,EAAK/N,OAET,gBAAC,GAAD,QACQgO,EAAe,aADvB,CAEI3f,MAAOtpB,KAAKC,EAAE,aACdiJ,YAAalJ,KAAKC,EAAE,aACpB4hC,iBAAiB,OACjB09B,+BAA+B,EAC/Br2B,cAAc,OACdC,cAAc,EACdC,gBAAiB,iCAAM,EAAK81B,iBAAiB9qC,cAA5B,EAAM,EAA+B4L,YAG1D,gBAAC,GAAD,QACQiJ,EAAe,YADvB,CAEI3H,IAAK,EAAK49B,iBACV51C,MAAOtpB,KAAKC,EAAE,YACdiJ,YAAalJ,KAAKC,EAAE,YACpB4hC,iBAAiB,OACjB09B,+BAA+B,EAC/Br2B,cAAc,OACdE,gBAAiB,kBAAMJ,gB,GAjEpB/U,aA2EnC,SAASqrC,KACL,IAAMlxB,EAAOtT,GAAO3B,aACdqmC,EAAWpxB,EAAO,IAAM,IACxBqxB,EAAYrxB,EAAO,IAAM,IAHE,EAKPsxB,mBAAS,GALF,WAK1Bn2C,EAL0B,KAKnByjB,EALmB,KAM3BS,EAAc,kBAAMT,EAASzjB,EAAQ,IAErCo2C,EAAOvzB,GAAY,yBAAyB,kBAAMqB,OAClDmyB,EAAOxzB,GAAY,qBAAqB,kBAAMqB,OAC9CoyB,EAAQzzB,GAAY,UAAU,kBAAMqB,OACpCqyB,EAAQ1zB,GAAY,UAAU,kBAAMqB,OAE1C,OACI,gBAACnS,GAAA,EAAD,CACIC,MAAO,CACHzC,MAAO0mC,EACPvmC,OAAQwmC,EACRx8B,UAAW,WAGf,gBAAC48B,EAAD,CACItkC,MAAO,CAAC4F,SAAU,WAAYuF,KAAM,EAAGC,IAAK,GAC5C7N,MAAgB,KAAT2mC,EACPxmC,OAAQwmC,EACR9xB,QAAQ,cACRmgB,oBAAoB,aAExB,gBAAC6R,EAAD,CACIpkC,MAAO,CAAC4F,SAAU,WAAYuF,KAAiB,IAAX84B,EAAiB74B,IAAiB,GAAZ84B,GAC1D3mC,MAAmB,GAAZ2mC,EAAA,GACPxmC,OAAoB,GAAZwmC,EACR9xB,QAAQ,cACRmgB,oBAAoB,aAExB,gBAACgS,EAAD,CACIvkC,MAAO,CAAC4F,SAAU,WAAY6F,MAAO,GACrClO,MAAO2mC,GAAa,IAAM,KAC1BxmC,OAAQwmC,EACR9xB,QAAQ,cACRmgB,oBAAoB,aAExB,gBAAC8R,EAAD,CACIrkC,MAAO,CAAC4F,SAAU,WAAY6F,MAAkB,IAAXw4B,EAAiB74B,IAAiB,GAAZ84B,GAC3D3mC,MAAmB,GAAZ2mC,EAAA,IACPxmC,OAAoB,GAAZwmC,EACR9xB,QAAQ,cACRmgB,oBAAoB,cAMrBrwB,UAAetB,aAAU5V,KChIzB4V,qBAnBf,SAAsBlB,GAClB,IAAMg3B,EAAevrD,GAAQnP,KAAI,SAACiE,GAAD,OAAewE,KAAKC,EAAL,WAAkBzE,MAC3DwK,EAAyCi1B,EAAzCj1B,OAAQ+5D,EAAiC9kC,EAAjC8kC,SAAU7N,EAAuBj3B,EAAvBi3B,aAAc9tD,EAAS62B,EAAT72B,MAMvC,OACI,gBAAC,KAAD,MACI24B,QANS,SAACq1B,GACVn3B,EAAM4b,UAAU5b,EAAM4b,SAASnwC,GAAQ0rD,KAMvC4N,mBAA0B1oE,IAAX0O,GAAmC,OAAXA,EAAkBU,GAAQwoD,QAAQlpD,IAAW,EACpFusD,QAASN,EACT8N,SAAUA,GACNtO,GAAoBS,EAAc9tD,Q,u/BCF5C67D,G,kCACF,WAAYhlC,GAAgC,IAAD,uBACvC,cAAMA,IACDvM,MAAQ,CACTyqB,UAAqB7hD,IAAf2jC,EAAMke,MAA4Ble,EAAMke,MAHX,E,wDAOxBtT,IACVA,EAASsT,MAAQ5rB,KAAK0N,MAAMke,MAAM5rB,KAAK2yC,YACxCr6B,EAASsT,OAAS5rB,KAAK0N,MAAMke,MAAM5rB,KAAK4yC,c,kCAIvC5yC,KAAKmB,MAAMyqB,MAAM5rB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,O,kCAItD5rB,KAAKmB,MAAMyqB,OACX5rB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,UACV7hD,IAAtBi2B,KAAK0N,MAAM8K,QAAsBxY,KAAK0N,MAAM8K,Y,+BAIjC,IAAD,SACQxY,KAAK0N,MAAxB72B,EADW,EACXA,MAAOyyC,EADI,EACJA,SACPsC,EAAQ5rB,KAAKmB,MAAbyqB,KACDve,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,KAAD,CACImlD,YAAah8B,KAAK0N,MAAMh1B,aAAe,KACvCm6D,YAAa,CAACl3D,YAAalJ,KAAKC,EAAE,WAClCogE,UAAU,EACVC,YAAY,EACZ9W,WAAW,EACX3S,SAAU,SAACl9C,GACHk9C,GAAUA,EAASl9C,EAAQ4mE,OAEnCC,QAAS,kBAAM,EAAKL,aACpBM,YAAazgE,KAAKC,EAAE,6BACpBwlC,QAAS0T,EACTunB,qBAAsB9lC,EAAO+lC,sBAC7Bv8D,MAAoB,SAAbA,EAAMvJ,GAAgB+lE,KAAaC,W,GA3C1B5sC,aAiD1BoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrB8kC,sBAAuB,CACnB9sB,QAAS,aAKN1X,gBAAU8jC,I,2bC7BVa,G,kCArCX,WAAY7lC,GAAmC,IAAD,uBAC1C,cAAMA,IACDvM,MAAQ,CACTqyC,YAAa,IAEjB,EAAKC,oBALqC,E,yDAQnB,IAAD,OACfzX,EAAeh8B,KAAK0N,MAApBsuB,YACDkX,EAAczgE,KAAKC,EAAE,6BAC3BghE,aAAoB,CAAC1X,cAAakX,gBAAcnrE,MAAK,SAACC,GAClD,EAAKisC,SAAS,CAACu/B,YAAaxrE,EAAKwrE,mB,yCAItBG,GACX3zC,KAAK0N,MAAMsuB,aAAe2X,EAAU3X,aACpCh8B,KAAKyzC,sB,+BAIU,IAAD,EACmBzzC,KAAK0N,MAAnCsuB,EADW,EACXA,YAAgBlqB,EADL,wBAEX0hC,EAAexzC,KAAKmB,MAApBqyC,YAED1X,EAAW97B,KAAK0N,MAAMouB,UAAY,GAExC,OACI,gBAAC/tB,GAAA,EAAD,CAAMC,MAAO,CAACS,cAAe,QACzB,gBAAC,KAAD,CAAMutB,YAAaA,EAAaF,SAAUA,EAAUG,WAAW,IAC/D,gBAAC3sB,GAAA,EAASwC,EAAa0hC,Q,GAhCJ9sC,a,u/BCO7BktC,G,kCACF,WAAYlmC,GAAiC,IAAD,uBACxC,cAAMA,IACDvM,MAAQ,CACTyqB,MAAM,GAH8B,E,iDAQnC5rB,KAAKmB,MAAMyqB,MAAM5rB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,O,kCAItD5rB,KAAKmB,MAAMyqB,OACX5rB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8ByqB,MAAM,KAChC5rB,KAAK0N,MAAM8K,QAAQxY,KAAK0N,MAAM8K,Y,+BAInB,IAAD,SAC4DxY,KAAK0N,MAA5E4b,EADW,EACXA,SAAU9Q,EADC,EACDA,OAAQ9/B,EADP,EACOA,YAAayuC,EADpB,EACoBA,YAAa0sB,EADjC,EACiCA,iBAAkBh9D,EADnD,EACmDA,MAC9D+0C,EAAQ5rB,KAAKmB,MAAbyqB,KACDve,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOY,SAChB,gBAACsB,GAAA,EAAD,CACIvB,MAAO,CAACX,EAAOzpB,OAAQujC,EAAazuC,EAAc,CAAC20B,EAAOuc,SAAUiqB,GAAoB,IACxFrkC,QAAS,kBAAM,EAAKmjC,cAEnBj6D,GAAe,gBAAC,GAAD,CAAsBsjD,YAAatjD,EAAas1B,MAAOX,EAAO30B,eAC5EA,GAAe,gBAAC42B,GAAA,EAAD,CAAMtB,MAAOX,EAAO1xB,aAAclJ,KAAKC,EAAE,mCAE9D,gBAAC,GAAD,CACIgG,YAAasnB,KAAK0N,MAAMh1B,YACxBkzC,KAAMA,EACNtC,SAAU,SAACl9C,GACHk9C,GAAUA,EAASl9C,IAE3BosC,OAAQ,WACJ,EAAKo6B,YACDp6B,GAAQA,Y,GAzCH9R,aAiD3BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBL,QAAS,CACL1C,MAAO,QAEX3nB,OAAQ,CACJ2nB,MAAO,OACPG,OAAQ,GACR0L,aAAc,EACdE,YAAa,EACbR,kBAAmB,EACnBE,kBAAmBngC,EAAM01B,cACzByH,gBAAiB,cACjBxF,eAAgB,UAEpBob,SAAU,CACN9S,kBAAmB,EACnBE,kBAAmBngC,EAAM41B,MAE7B/zB,YAAa,CACTm3B,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB1H,YAAa,CACTk0B,SAAU,GACVE,MAAOl5B,EAAMm1B,UACbqL,kBAAmB,SAKhBzI,gBAAUglC,IC9FlB,SAASE,GAAcpmC,GAAyC,IAC5Dv9B,EAAuBu9B,EAAvBv9B,KAAS2hC,EADkD,KACpCpE,EADoC,UAGlE,GAAIv9B,EAAM,CACN,IAAM4jE,EAAiBthE,KAAKC,EAAL,UAAiBvC,EAAK6jE,YAGvCC,EADM9jE,EAAK+jE,UAAY,GACV,IAAaH,EAAb,IAA+B5jE,EAAKgkE,cAEvD,OAAO,gBAAC7kC,GAAA,EAASwC,EAAamiC,GAC3B,OAAO,iC,m/BCYlB,IAAMG,GAAiB,SACnBrgC,EACA/X,EACAq4C,EACA5wD,EACAo/C,GALmB,MAMD,CAClBpuB,aAAa,EACb6/B,kBAAkB,EAClBjgC,aAAc,aACdsH,cAAel4B,EAAO,OAAS,OAC/BuY,QACAq4C,YACAx4B,gBAAiB,WAAO,IAAD,EACfp4B,IAAM,SAAAA,EAAKojB,UAAL,EAAc4L,UAE5BuC,aAAc,SAAC3xB,GAGoB,IAAD,KAF9BA,EAAOA,EAAKosB,QAAQ,OAAQ,IACxBozB,GAAUA,EAASx/C,GACnBA,EAAK9Y,QAAU8pE,KACX5wD,EAAM,SAAAA,EAAKojB,UAAL,EAAc4L,QACnB,SAAAsB,EAAIlN,UAAJ,EAAa2rB,WAKjB+hB,GAAb,kCACI,WAAY7mC,GAAwB,IAAD,uBAC/B,cAAMA,IAIV8mC,UAAY9tC,cALuB,EAMnC+tC,UAAY/tC,cANuB,EAOnCguC,UAAYhuC,cALR,EAAKvF,MAAQ,EAAKwzC,oBAAoBjnC,EAAMv9B,MAFb,EADvC,wDAUuBmoC,GACXtY,KAAK0N,MAAMv9B,MAAQmoC,EAASnoC,MAC5B6vB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAUnB,KAAK20C,oBAAoB30C,KAAK0N,MAAMv9B,UAZjF,8BAgBmB,IAAD,EACV,SAAA6vB,KAAKw0C,UAAU3tC,UAAf,EAAwB4L,UAjBhC,kCAoBwD,IAAD,EACpBzS,KAAKmB,MAAzByzC,EADwC,EACxCA,KAAMC,EADkC,EAClCA,MAAOC,EAD2B,EAC3BA,IAGpB,GAFiBF,EAAKrqE,QAAU,GAAKsqE,EAAMtqE,OAAS,GAAKuqE,EAAIvqE,OAAS,EAExD,CACV,IACI,IAAMwqE,EAAQC,SAASJ,GACjBK,EAASD,SAASH,GAAS,EAC3BK,EAAOF,SAASF,GAEtB,GAAIC,EAAQ,GAAKE,GAAU,GAAKA,EAAS,IAAMC,EAAO,GAAKA,GAAQ,GAAI,CACnE,IAAM/kE,EAAO,IAAI/C,KAAK2nE,EAAOE,EAAQC,GAC/BhtE,EAAQ83B,KAAKm1C,SAAShlE,GAC5B,OAAIjI,EAAc,CAACA,SACP,CAACiI,SAEnB,MAAOmD,IACT,MAAO,CAACpL,MAAO,2BACZ,OAAI83B,KAAKmB,MAAM0T,QAAgB,CAAC3sC,MAAO,2BAIvC,KA1Cf,+BA6CqBiI,GAAiC,IAAD,EACV6vB,KAAK0N,MAAjC0nC,EADsC,EACtCA,YAAaC,EADyB,EACzBA,YACpB,OAAIA,GAAellE,EAAOklE,EAAoB,2BACrCD,GAAejlE,EAAOilE,EAAoB,+BAC9C,IAjDb,0CAoDwBjlE,GAChB,IAAMykE,EAAI,MAAGzkE,OAAH,EAAGA,EAAMgkE,cACbU,EAAK,MAAG1kE,OAAH,EAAGA,EAAM6jE,WACdc,EAAG,MAAG3kE,OAAH,EAAGA,EAAM+jE,UAElB,MAAO,CACHU,UAAe7qE,IAAT6qE,EAAqB,GAAKA,EAAO,GACvCC,WAAiB9qE,IAAV8qE,EAAsB,GAAKA,EAAQ,EAAI,GAC9CC,SAAa/qE,IAAR+qE,EAAoB,GAAKA,EAAM,GACpCjgC,aAAkB9qC,IAAToG,EACTjI,MAAOiI,EAAO6vB,KAAKm1C,SAAShlE,QAAQpG,EACpCurE,WAAUt1C,KAAKmB,OAAQnB,KAAKmB,MAAMm0C,SAClCC,WAAUv1C,KAAKmB,OAAQnB,KAAKmB,MAAMo0C,SAClCC,WAAUx1C,KAAKmB,OAAQnB,KAAKmB,MAAMq0C,YAjE9C,0BAqEQ9+D,GAAwC,IAAD,OAChCmsD,EAAY7iC,KAAK0N,MAAjBm1B,SACP7iC,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAUzqB,IAAS,WACtC,GAAImsD,EAAU,CAAC,IAAD,EACY,EAAK4S,YAApBtlE,EADG,EACHA,KAAMjI,EADH,EACGA,OACTiI,GAAQjI,KACR26D,EAAS1yD,EAAMjI,GACf,EAAK+rC,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B0T,SAAS,EAAM3sC,kBA5EjE,+BAkF2B,IAAD,SACqC83B,KAAK0N,MAArDoF,EADW,EACXA,WAAYjF,EADD,EACCA,eAAgB2qB,EADjB,EACiBA,UAAW3hD,EAD5B,EAC4BA,MAD5B,EAEuDmpB,KAAKmB,MAAvEyzC,EAFW,EAEXA,KAAMC,EAFK,EAELA,MAAOC,EAFF,EAEEA,IAAKjgC,EAFP,EAEOA,QAAS3sC,EAFhB,EAEgBA,MAAOotE,EAFvB,EAEuBA,SAAUC,EAFjC,EAEiCA,SAAUC,EAF3C,EAE2CA,SACvDnoC,EAASS,GAAaj3B,GAEtB6+D,EADQ7gC,IAAY3sC,EACM83B,KAAK0N,MAAMgoC,gBAAkB,GACvDC,EAAoB,CAAiB,QAAhBjuC,KAASC,GAAe,CAACsP,QAAS,QAAU,GAAIjX,KAAK0N,MAAMioC,mBAEtF,OACI,gBAAC5nC,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOa,UAAWL,IAC5B,gBAACE,GAAA,EAAD,CAAMC,MAAOX,EAAOuoC,cAChB,gBAAC9hC,GAAA,EAAD,QACQsgC,GAAep0C,KAAKw0C,UAAWM,EAAK,EAAG90C,KAAKy0C,WAAW,SAACK,GAAD,OAAS,EAAKpS,IAAI,CAACoS,WADlF,CAEI/gC,IAAK/T,KAAKw0C,UACVxmC,MAAO,CACHX,EAAOwoC,MACPxoC,EAAOyoC,SACPhjC,EACAwiC,EAAWK,EAAoB,GAC/BD,GAEJ95B,cAAc,EACdD,cAAc,OACdhgC,YAAalJ,KAAKC,EAAE,4BACpB8lD,UAAWA,EACXhlB,OAAQ,kBAAM,EAAKS,SAAS,CAACqhC,UAAU,KACvC7hC,QAAS,kBAAM,EAAKQ,SAAS,CAACqhC,UAAU,SAGhD,gBAACvnC,GAAA,EAAD,CAAMC,MAAOX,EAAO0oC,gBAChB,gBAACjiC,GAAA,EAAD,QACQsgC,GAAep0C,KAAKy0C,UAAWI,EAAO,EAAG70C,KAAK00C,WAAW,SAACG,GAAD,OAAW,EAAKnS,IAAI,CAACmS,aADtF,CAEI9gC,IAAK/T,KAAKy0C,UACVzmC,MAAO,CACHX,EAAOwoC,MACPxoC,EAAO2oC,WACPljC,EACAyiC,EAAWI,EAAoB,GAC/BD,GAEJ95B,cAAc,EACdC,gBAAiB,iCAAM,EAAK64B,UAAU7tC,cAArB,EAAM,EAAwB4L,SAC/CkJ,cAAc,OACdhgC,YAAalJ,KAAKC,EAAE,8BACpB8gC,OAAQ,kBAAM,EAAKS,SAAS,CAACshC,UAAU,KACvC9hC,QAAS,kBAAM,EAAKQ,SAAS,CAACshC,UAAU,SAGhD,gBAACxnC,GAAA,EAAD,CAAMC,MAAOX,EAAO4oC,eAChB,gBAACniC,GAAA,EAAD,QACQsgC,GAAep0C,KAAK00C,UAAWE,EAAM,OAAG7qE,GAAW,SAAC6qE,GAAD,OAAU,EAAKlS,IAAI,CAACkS,YAD/E,CAEI7gC,IAAK/T,KAAK00C,UACV1mC,MAAO,CACHX,EAAOwoC,MACPxoC,EAAO6oC,UACPpjC,EACA0iC,EAAWG,EAAoB,GAC/BD,GAEJ/5B,cAAc,OACdhgC,YAAalJ,KAAKC,EAAE,6BACpB8gC,OAAQ,kBAAM,EAAKS,SAAS,CAACuhC,UAAU,KACvC/hC,QAAS,kBAAM,EAAKQ,SAAS,CAACuhC,UAAU,cAhJhE,GAAoC9uC,aAwJvBoH,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNhD,MAAO,OACPkD,cAAe,OAEnBonC,MAAO,CACHv+B,YAAa,EACbP,YAAalgC,EAAM81B,gBACnB0K,kBAAmB,EACnBvH,UAAW,UAEf8lC,aAAc,CAACrnC,KAAM,GACrBwnC,eAAgB,CAACxnC,KAAM,EAAGuZ,YAAa,IACvCmuB,cAAe,CAAC1nC,KAAM,EAAGuZ,YAAa,IACtCguB,SAAU,GACVE,WAAY,GACZE,UAAW,QAIJtnC,gBAAU2lC,I,8aChOzB,IAAM4B,GAAU,IAAI/oE,KAAK,KAAM,EAAG,GAC5BgpE,GAAU,IAAIhpE,KAAKA,KAAKw6B,OAC9BwuC,GAAQC,YAAYD,GAAQjC,cjISL,IiIPhB,IAAMmC,GAAb,qLACIC,aAAe7vC,cADnB,+CAGmB,IAAD,EACV,SAAA1G,KAAKu2C,aAAa1vC,UAAlB,EAA2B4L,UAJnC,+BAQQ,IAAM2hC,EAAiBp0C,KAAK0N,MAC5B,OAAO,gBAAC8oC,GAAD,MAAWziC,IAAK/T,KAAKu2C,aAAcnB,YAAae,GAASd,YAAae,IAAahC,QATlG,GAAyC1tC,aAa1BkI,gBAAU0nC,I,m/BCMzB,IAAMpmC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,eAG1Bk5D,GAAoBr4D,OAAauhC,MAAM,CACzCztC,UAAW8M,GACXxB,OAAQ0B,GACRzB,YAAa0B,KAYX6e,G,sJACoB24C,GAClB,IAAMC,EAAO7xC,KAAK0N,MAAM+iC,gBAClBhtD,EAAOmuD,EAAUnB,gBACvB,OACIoB,EAAK1kE,WAAasW,EAAKtW,WACvB0kE,EAAKp5D,QAAUgL,EAAKhL,QACpBo5D,EAAKn5D,aAAe+K,EAAK/K,aACzBm5D,EAAKxkE,iBAAmBoW,EAAKpW,kB,6BAI9BqJ,GACCA,EAAOvJ,WAAauJ,EAAO+B,QAAU/B,EAAOgC,aAAehC,EAAOrJ,kBAClE2yB,KAAK0N,MAAMjqB,OACXuc,KAAK0N,MAAMl8B,SACPiF,GAAoB,CAChBtJ,UAAWuJ,EAAOvJ,UAClBsL,OAAQ/B,EAAO+B,OACfC,YAAahC,EAAOgC,YACpBrL,gBAAiBqJ,EAAOrJ,sB,+BAMjB,IAAD,SACe2yB,KAAK0N,MAA/B+iC,EADW,EACXA,gBAAiB55D,EADN,EACMA,MAGlBw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,KAAD,CACIukC,cAAeq1B,EACfp1B,iBAAkBq2B,GAClBvzB,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAyC,EAAKiN,OAAOjN,MAE9D,SAAC8kC,GAA2D,IAErDC,EAOAD,EAPAC,aACA/kC,EAMA8kC,EANA9kC,OACAtD,EAKAooC,EALApoC,OACAyhC,EAIA2G,EAJA3G,QACAkG,EAGAS,EAHAT,cACAE,EAEAO,EAFAP,cACAw7B,EACAj7B,EADAi7B,gBAGJ,OACI,gBAAC,GAAD,MACIh0D,MAAOhQ,KAAKC,EAAE,6BACdy+D,aAAc,gBAAC,GAAD,MACd11B,aAAcA,EACd21B,qBAAqB,GACjB,EAAK1jC,OAET,gBAAC,GAAD,KAAaj7B,KAAKC,EAAE,gBACpB,gBAACgkE,GAAD,CACI5jC,WAAYzF,EAAOspC,cACnBhB,kBAAmBtoC,EAAOupC,qBAC1BlB,gBAAiBroC,EAAOwpC,mBACxBhU,SAAU,SAAC1yD,EAAMjI,GACTA,EAAO+yC,EAAc,YAAa/yC,GACjC6yC,EAAc,YAAa5qC,GAChCsmE,EAAgB,aAAa,MAGpC//D,EAAOvJ,YAAciG,EAAOjG,WACzB,gBAAC2mE,GAAD,CAAe9lC,MAAOX,EAAOypC,cAAe3mE,KAAMuG,EAAOvJ,YAE5D0nC,EAAQ1nC,WAAa,gBAAC,GAAD,CAAgBjF,MAAOkL,EAAOjG,YAEpD,gBAAC,GAAD,CAAY6gC,MAAO,CAACgC,UA9CxB,KA8C8Cv9B,KAAKC,EAAE,gBACjD,gBAAC,GAAD,CACIy0C,YAAa9Z,EAAO0pC,kBACpBlD,iBAAkBxmC,EAAO2pC,uBACzBt+D,YAAahC,EAAOgC,kBAAe3O,EACnCu/C,SAAU,SAAC5wC,GAAD,OAA8BqiC,EAAc,cAAeriC,MAExEm8B,EAAQn8B,aAAe,gBAAC,GAAD,CAAgBxQ,MAAOkL,EAAOsF,cAEtD,gBAAC,GAAD,CAAYs1B,MAAO,CAACgC,UAvDxB,KAuD8Cv9B,KAAKC,EAAE,WACjD,gBAAC,GAAD,CACI+F,OAAQ/B,EAAO+B,OACf6wC,SAAU,SAAC7wC,GAAD,OAAoBsiC,EAAc,SAAUtiC,IACtDksD,aAAa,eAEhB9vB,EAAQp8B,QAAU,gBAAC,GAAD,CAAgBvQ,MAAOkL,EAAOqF,SAEjD,gBAAC,GAAD,CAAYu1B,MAAO,CAACgC,UA/DxB,KA+D8Cv9B,KAAKC,EAAE,sBACjD,gBAAC,GAAD,CACIvB,OAAQuF,EAAOrJ,gBACfw1D,SAAU,SAAC1xD,GAAD,OAAsB4pC,EAAc,kBAAmB5pC,IACjE6xD,WAAW,EACXvZ,mBAAmB,uB,GAjGZ/iB,aA2G1BoH,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrBqoC,cAAe,CACXjrC,OAAQ,GACR0L,a1F5JkC,G0F6JlCC,kBAAmB,GACnBC,YAAa,EACbtD,gBAAiBn9B,EAAMm2B,0BACvB6C,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjBuzD,qBAAsB,CAClB5iC,gBAAiBn9B,EAAMo2B,kCAE3B4pC,mBAAoB,CAChB//B,kBAAmB,EACnBE,kBAAmBngC,EAAM41B,MAE7BqqC,cAAe,CACXhnC,UAAW,QACXE,UAAW,EACXH,SAAU,IAEdknC,kBAAmB,CACfrrC,OAAQ,GACR0L,a1FjLkC,G0FkLlCpD,gBAAiBn9B,EAAMm2B,0BACvBqK,kBAAmB,GACnBP,kBAAmB,GAEvBkgC,uBAAwB,QAIhC,SAASjF,KACL,IAAMlxB,EAAOtT,GAAO3B,aACdsmC,EAAYrxB,EAAO,IAAM,IAFE,EAIPsxB,mBAAS,GAJF,WAI1Bn2C,EAJ0B,KAInByjB,EAJmB,KAK3BS,EAAc,kBAAMT,EAASzjB,EAAQ,IAErComB,EAAMvD,GAAY,wBAAyBqB,GAC3C+2B,EAAOp4B,GAAY,SAAUqB,GAEnC,OACI,gBAACnS,GAAA,EAAD,CACIC,MAAO,CACH,CAACtC,OAAQwmC,EAAW3xB,QAAS,IAC5BM,GAAQ,CACLjN,SAAU,WACVwF,KAAM,IACNK,OAAQ,OAIhB,gBAACw9B,EAAD,CAAM1rC,MAAO2mC,GAAa,IAAM,KAAMxmC,OAAQwmC,EAAW9xB,QAAQ,gBACjE,gBAACgC,EAAD,CACIpU,MAAK,IACD4F,SAAU,YACNiN,EACE,CAAC1H,KAAkB,KAAZ+4B,EAAmB94B,IAAiB,GAAZ84B,GAC/B,CAAC/4B,KAAkB,GAAZ+4B,EAAiB94B,IAAiB,IAAZ84B,IAEvC3mC,MAAO2mC,GAAarxB,EAAO,GAAM,KAAQ,IAAM,KAC/CnV,OAAQwmC,GAAarxB,EAAO,GAAM,IAClCT,QAAQ,iBAMTlQ,UAAetB,aAAU3V,K,kbClNlCi+C,G,yIACqB,IAAD,EACgDl3C,KAAK0N,MAAhEm1B,EADW,EACXA,SAAU1f,EADC,EACDA,MAAOtsC,EADN,EACMA,MAAOswC,EADb,EACaA,YAAasC,EAD1B,EAC0BA,mBACtCpc,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,CACIH,OAAQqC,GACRgjB,MAAO,SAACynB,GAAD,OAAe/wC,KAAKC,EAAL,kBAAyB8wC,IAC/C7nC,YAAalJ,KAAKC,EAAE,mCACpBy2C,SAAUhG,EAAQ,CAACA,GAAS,GAC5BgE,YAAa,CAAC9Z,EAAOzpB,OAAQujC,GAC7BsC,mBAAoBA,EACpBH,SAAU,SAAC5yC,GACHA,EAAOnM,OAAS,GAAKs4D,GAAUA,EAASnsD,EAAO,W,GAdrCgwB,aAqB5BoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrB1qB,OAAQ,CACJ2nB,MAAO,GACPG,OAAQ,GACRiD,WAAY,SACZ0I,kBAAmB,EACnBpH,gBAAiB,QAKdrB,gBAAUsoC,I,u/BCvBnBC,G,kCACF,WAAYzpC,GAAmC,IAAD,eAC1C,cAAMA,GACN,IAAMhgC,EAAYggC,EAAMhgC,WAAa,GAFK,OAG1C,EAAKyzB,MAAQ,CAACzzB,aAH4B,E,8CAMrCA,GACLsyB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8BzzB,eAC9B,IAAM0pE,EAAY1pE,EAAU7D,QAAO,SAAC25C,GAAD,OAAQA,EAAEL,SAAO54C,OAAS,EAEzDy1B,KAAK0N,MAAMm1B,UACX7iC,KAAK0N,MAAMm1B,SACPn1D,EACK7D,QAAO,SAAC25C,GAAD,OAAmCA,EAAE3wC,MAAQ2wC,EAAEL,SACtDn5C,KAAI,SAACw5C,GAAD,OAAmCA,KAC5C4zB,K,gCAKFvS,GACFA,GAAO,GAAKA,EAAM7kC,KAAKmB,MAAMzzB,UAAUnD,QACvCy1B,KAAK6iC,SAAS7iC,KAAKmB,MAAMzzB,UAAU7D,QAAO,SAACK,EAAGuD,GAAJ,OAAUA,IAAMo3D,Q,mCAGrDrxD,GACT,IAAM6jE,EAAY,IAAI96C,IAAIyD,KAAKmB,MAAMzzB,UAAU1D,KAAI,SAACw5C,GAAD,MAAO,CAACA,EAAE3wC,KAAM2wC,EAAEL,WAC/Dz1C,EAAY8F,EAAMxJ,KAAI,SAAC6I,GAAD,MAAmB,CAACA,OAAMswC,MAAOk0B,EAAU5rC,IAAI54B,OAC3EmtB,KAAK6iC,SAASn1D,GAEdsyB,KAAKiU,SAAL,SACOjU,KAAKmB,OADZ,IAEIzzB,iB,uCAISm3D,EAAa1hB,GAC1B,IAAMz1C,EAAYsyB,KAAKmB,MAAMzzB,UAAU1D,KAAI,SAACw5C,EAAG/1C,GAAJ,OAAWA,IAAMo3D,EAAN,SAAgBrhB,GAAhB,IAAmBL,UAASK,KAClFxjB,KAAK6iC,SAASn1D,K,+BAGK,IAAD,SAC+BsyB,KAAK0N,MAA/C72B,EADW,EACXA,MAAOm3B,EADI,EACJA,MAAOspC,EADH,EACGA,yBACd5pE,EAAasyB,KAAKmB,MAAlBzzB,UACD2/B,EAASS,GAAaj3B,GAEtB0gE,EAAO7pE,EAAU1D,KAAI,SAACmjB,EAAgC1f,GACxD,OACI,gBAACsgC,GAAA,EAAD,CACIjkC,IAAG,0BAA4BqjB,EAAGta,KAClCm7B,MAAO,CAACX,EAAO4c,aAAoB,IAANx8C,EAAU4/B,EAAOmqC,kBAAoB,KAElE,gBAACzpC,GAAA,EAAD,CAAMC,MAAOX,EAAOoqC,wBAChB,gBAACnoC,GAAA,EAAD,CAAMtB,MAAOX,EAAOqqC,cAAe7tB,cAAe,GAC7Cp3C,KAAKC,EAAL,iBAAwBya,EAAGta,QAGpC,gBAAC,GAAD,CACIswC,MAAOh2B,EAAGg2B,MACVgE,YAAa9Z,EAAOsqC,YACpB9U,SAAU,SAAC1f,GAAD,OAA0B,EAAKy0B,iBAAiBnqE,EAAG01C,IAC7DsG,mBAAoB6tB,IAExB,gBAAC/nC,GAAA,EAAD,CAAkBvB,MAAOX,EAAOwqC,oBAAqBroC,QAAS,kBAAM,EAAKsoC,UAAUrqE,KAC/E,gBAACquC,GAAA,EAAD,CAAe9N,MAAOX,EAAO0qC,WAAYhpE,KAAK,eAM9D,OACI,gBAACg/B,GAAA,EAAD,CAAMC,MAAOA,GACT,gBAAC,GAAD,CACI/sB,UAAU,EACVvT,UAAWA,EAAU1D,KAAI,SAACw5C,GAAD,OAAOA,EAAE3wC,MAAQ,MAC1Cm7B,MAAOX,EAAOtpB,eACd8+C,SAAU,SAACmV,GACHA,EAAcztE,OlJjEN,GkJkERY,IAAMC,MAAN,2CACJ,EAAK6sE,aAAaD,EAAclgE,MAAM,ElJnE1B,KkJqEhBkrD,WAAW,EACXvZ,mBAAoB6tB,IAEvBC,O,GArFkB7wC,aA2F7BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB2b,aAAc,CACVxb,cAAe,MACfE,WAAY,SACZH,eAAgB,SAChB9C,OAAQ,GACRiF,eAAgB,GAEpB6mC,kBAAmB,CACfxnC,UAAW,IAEf6nC,oBAAqB,CACjBtsC,MAAO,GACPG,OAAQ,GACR8C,eAAgB,SAChBG,WAAY,SACZqF,gBAAiBn9B,EAAM3O,MACvBkvC,aAAc,KAElB2gC,WAAY,CACRloC,SAAU,GACVE,MAAOl5B,EAAMi1B,WAEjB/nB,eAAgB,GAChB0zD,uBAAwB,CACpBlpC,KAAM,EACN8I,kBAAmB,GACnBrD,gBAAiBn9B,EAAMm2B,0BACvBoK,a5F/IkC,G4FgJlCzI,WAAY,SACZH,eAAgB,SAChB9C,OAAQ,QAEZgsC,cAAe,CACX7nC,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjBs0D,YAAa,CACT3hC,iBAAkB,QAKfpH,gBAAUuoC,I,8aC3JzB,IAAMjnC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD+2C,aAAc/2C,EAAM9yB,QAAQb,cAG5BkJ,GAAmB,GA0CRw5B,M,oJAhCc,GAAjBx5B,GAAOnM,QAAay1B,KAAKm4C,iB,yCAGd7/B,GACXA,EAAS4/B,aAAa3tE,QAAUy1B,KAAK0N,MAAMwqC,aAAa3tE,QAAQy1B,KAAKm4C,iB,qCAIzEzhE,GAASspB,KAAK0N,MAAMwqC,aAAaluE,KAAI,SAACouE,GAAD,OAA2BA,EAAS9qE,MACzE0yB,KAAKkgB,gB,+BAGc,IAAD,EAC2BlgB,KAAK0N,MAA3ClgC,EADW,EACXA,UAAWq1D,EADA,EACAA,SAAa/wB,EADb,iCAGlB,OACI,gBAAC,GAAD,MACIp7B,OAAQA,GACRisD,SAAU,SAAC0V,GAAD,uBAAyCA,GACnDlvB,SAAU37C,EACVq1D,SAAU,SAACnsD,GACHmsD,GAAUA,EAASnsD,IAE3BiF,YAAalJ,KAAKC,EAAE,+BACpBowD,aAAcrwD,KAAKC,EAAE,4BACrBqwD,sBAAuBtwD,KAAKC,EAAE,sCAC1Bo/B,Q,GA5BUpL,c,m/BCD9B,IAAMwJ,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,eAG1Bk5D,GAAoBr4D,OAAauhC,MAAM,CACzCltC,UAAW4M,GACX1B,YAAa2B,KA2FjB,SAASw3D,KACL,IAAMlxB,EAAOtT,GAAO3B,aACdsmC,EAAYrxB,EAAO,IAAM,IAFE,EAIPsxB,mBAAS,GAJF,WAI1Bn2C,EAJ0B,KAInByjB,EAJmB,KAK3BS,EAAc,kBAAMT,EAASzjB,EAAQ,IAErComB,EAAMvD,GAAY,yBAAyB,kBAAMqB,OACjD+2B,EAAOp4B,GAAY,UAAU,kBAAMqB,OAEzC,OACI,gBAACnS,GAAA,EAAD,CACIC,MAAO,CACH,CAACtC,OAAQwmC,EAAW3xB,QAAS,IAC5BM,GAAQ,CACLjN,SAAU,WACVwF,KAAM,IACNK,OAAQ,OAIhB,gBAACw9B,EAAD,CAAM1rC,MAAO2mC,GAAa,IAAM,KAAMxmC,OAAQwmC,EAAW9xB,QAAQ,gBACjE,gBAACgC,EAAD,CACIpU,MAAK,IACD4F,SAAU,YACNiN,EACE,CAAC1H,KAAkB,KAAZ+4B,EAAmB94B,IAAiB,GAAZ84B,GAC/B,CAAC/4B,KAAkB,GAAZ+4B,EAAiB94B,IAAiB,IAAZ84B,IAEvC3mC,MAAO2mC,GAAarxB,EAAO,GAAM,KAAQ,IAAM,KAC/CnV,OAAQwmC,GAAarxB,EAAO,GAAM,IAClCT,QAAQ,iBAMTlQ,U,kCAjHX,WAAYxC,GAAuC,IAAD,uBAC9C,cAAMA,IACDvM,MAAQ,CAACi2C,WAAW,GAFqB,E,4CAK3C1gE,GACEspB,KAAKmB,MAAMi2C,YACZp3C,KAAK0N,MAAMl8B,SAASiF,GAAoB,CAAC/I,UAAWgJ,EAAOhJ,UAAWkL,YAAalC,EAAOkC,eAC1FonB,KAAK0N,MAAMjqB,U,+BAII,IAAD,OACXgtD,EAAmBzwC,KAAK0N,MAAxB+iC,gBACA2G,EAAap3C,KAAKmB,MAAlBi2C,UAIP,OACI,gBAAC,KAAD,CACIh8B,cAAeq1B,EACfp1B,iBAAkBq2B,GAClBvzB,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAyC,EAAKiN,OAAOjN,MAE9D,SAAC8kC,GAA2D,IAClDC,EAAwDD,EAAxDC,aAAc/kC,EAA0C8kC,EAA1C9kC,OAAQm+B,EAAkC2G,EAAlC3G,QAASkG,EAAyBS,EAAzBT,cAAe3nC,EAAUooC,EAAVpoC,OAErD,OACI,gBAAC,GAAD,MACIqP,MAAOhQ,KAAKC,EAAE,6BACdy+D,aAAc,gBAAC,GAAD,MACd11B,aAAcA,GACV,EAAK/N,OAET,gBAAC,GAAD,KAAaj7B,KAAKC,EAAE,oBACpB,gBAAC,GAAD,CACIhF,UAAWgJ,EAAOhJ,UAClBm1D,SAAU,SAACn1D,EAAgC0pE,GACvCr8B,EAAc,YAAartC,GAC3B,EAAKumC,SAAL,SAAkB,EAAK9S,OAAvB,IAA8Bi2C,gBAElCE,yBAAyB,eAE5BziC,EAAQnnC,WAAa0pE,GAClB,gBAAC,GAAD,CACIlvE,MAAO,mCACP8lC,MAAO,CAACiE,aAAc,EAAGjC,UAAW,MAG3C6E,EAAQnnC,YAAc0pE,GAAwC,GAA3B1gE,EAAOhJ,UAAUnD,QACjD,gBAAC,GAAD,CACIrC,MAAO,iCACP8lC,MAAO,CAACiE,aAAc,EAAGjC,UAAW,MAI5C,gBAAC,GAAD,CAAYhC,MAAO,CAACgC,UA1CxB,KA0C8Cv9B,KAAKC,EAAE,oBACjD,gBAAC,GAAD,CACIlF,UAAWkJ,EAAOkC,YAClBiqD,SAAU,SAACjqD,GACPmiC,EAAc,cAAeniC,IAEjCoqD,WAAW,EACXvZ,mBAAmB,eAEtB5U,EAAQj8B,aAAe,gBAAC,GAAD,CAAgB1Q,MAAOkL,EAAOwF,sB,GApE3C8tB,c,8aC1BvC,IAAMwJ,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,eAS1B2gB,G,uIACKziB,GACHspB,KAAK0N,MAAMl8B,SAASiF,GAAoBC,IACxCspB,KAAK0N,MAAMjqB,S,+BAGQ,IAAD,OACX5M,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAEtByhE,EAAcz5B,GAAY,UAAU,kBAAM,EAAKqB,iBAC/Cq4B,EAAa15B,GAAY,WAAW,kBAAM,EAAKqB,iBAC/Cs4B,EAAY35B,GAAY,UAAU,kBAAM,EAAKqB,iBAC7Cu4B,EAAW55B,GAAY,SAAS,kBAAM,EAAKqB,iBAE3CgyB,GAAa1mC,KAAWC,IAAI,UAAUC,OAAS,KAAO,EAE5D,OACI,gBAAC,GAAD,MAAiBjpB,MAAOhQ,KAAKC,EAAE,yBAA0Bu+D,aAAa,GAAUjxC,KAAK0N,OACjF,gBAACK,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOqrC,iBAAkB,CAACvqC,SAAsB,IAAZ+jC,KAC9C,gBAAC3iC,GAAA,EAAD,CACIvB,MAAO,CAAC0H,UAAW,cACnB8D,cAAe,GACfhK,QAAS,kBAAM,EAAK7rB,OAAO,CAAC7V,KAAM,cAElC,gBAACwqE,EAAD,CAAa/sC,MAAO2mC,GAAa,IAAM,KAAMxmC,OAAQwmC,EAAW9xB,QAAQ,gBACxE,gBAACm4B,EAAD,CACIvqC,MAAO,CAAC4F,SAAU,WAAYuF,KAAkB,IAAZ+4B,EAAkB94B,IAAiB,GAAZ84B,GAC3D3mC,MAAmB,IAAZ2mC,GAAoB,IAAM,KACjCxmC,OAAoB,IAAZwmC,EACR9xB,QAAQ,iBAGhB,gBAAC7Q,GAAA,EAAD,CACIvB,MAAO,CAAC0H,UAAW,WAAY1F,WAAY,IAC3CwJ,cAAe,GACfhK,QAAS,kBAAM,EAAK7rB,OAAO,CAAC7V,KAAM,YAElC,gBAAC0qE,EAAD,CAAWjtC,MAAO2mC,GAAa,IAAM,KAAMxmC,OAAQwmC,EAAW9xB,QAAQ,gBACtE,gBAACq4B,EAAD,CACIzqC,MAAO,CAAC4F,SAAU,WAAY6F,MAAmB,GAAZy4B,EAAiB94B,IAAiB,IAAZ84B,GAC3D3mC,MAAmB,IAAZ2mC,GAAoB,IAAM,KACjCxmC,OAAoB,IAAZwmC,EACR9xB,QAAQ,uB,GA3CD1Z,aAoD7BoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBoqC,iBAAkB,CACdntC,MAAO,OACPmK,UAAW,eAKRxF,MAAetB,aAAUzV,K,8aCvExC,IAAM+W,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,WAC5BlM,OAAQ60B,EAAM9yB,QAAQ/B,WAMpBqsE,G,sJACoB/G,GAClB,IAAMC,EAAO7xC,KAAK0N,MAAM+iC,gBAClBhtD,EAAOmuD,EAAUnB,gBACvB,OAAOoB,EAAKl5D,aAAe8K,EAAK9K,c,+BAGb,IAAD,EACiCqnB,KAAK0N,MAAjD+iC,EADW,EACXA,gBAAiBnkE,EADN,EACMA,OAAQkF,EADd,EACcA,SAAUqF,EADxB,EACwBA,MACpCw2B,EAAS+I,GAAsBv/B,GAC/BqyB,EAAW7M,GAAcu8C,SAE/B,OACI,gBAAC,GAAD,MACIn2D,MACI,gBAAC,GAAD,CAAwBymB,SAAUA,EAAUuO,UAAWpK,EAAOgJ,kBAAmBxG,SAAU,KAE/FntB,SAAUjQ,KAAKC,EAAE,uCACbstB,KAAK0N,OAER8iC,GAAoBlkE,EAAQ48B,EAAUunC,EAAiBj/D,EAAUqF,Q,GApB7C6vB,aA0BtBwJ,MAAetB,aAAU+pC,K,8aClCxC,IAAMzoC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,WAC5BlM,OAAQ60B,EAAM9yB,QAAQ/B,WAMpBusE,G,sJACoBjH,GAClB,IAAMC,EAAO7xC,KAAK0N,MAAM+iC,gBAClBhtD,EAAOmuD,EAAUnB,gBACvB,OAAOoB,EAAKl5D,aAAe8K,EAAK9K,c,+BAGb,IAAD,EACiCqnB,KAAK0N,MAAjD+iC,EADW,EACXA,gBAAiBnkE,EADN,EACMA,OAAQkF,EADd,EACcA,SAAUqF,EADxB,EACwBA,MACpCw2B,EAAS+I,GAAsBv/B,GAC/BqyB,EAAW7M,GAAcy8C,YAE/B,OACI,gBAAC,GAAD,MACIr2D,MACI,gBAAC,GAAD,CAAwBymB,SAAUA,EAAUuO,UAAWpK,EAAOgJ,kBAAmBxG,SAAU,KAE/FntB,SAAUjQ,KAAKC,EAAE,0CACbstB,KAAK0N,OAER8iC,GAAoBlkE,EAAQ48B,EAAUunC,EAAiBj/D,EAAUqF,Q,GApB7C6vB,aA0BtBwJ,MAAetB,aAAUiqC,K,8aClCxC,IAAM3oC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,WAC5BlM,OAAQ60B,EAAM9yB,QAAQ/B,WAMpBysE,G,sJACoBnH,GAClB,IAAMC,EAAO7xC,KAAK0N,MAAM+iC,gBAClBhtD,EAAOmuD,EAAUnB,gBACvB,OAAOoB,EAAKl5D,aAAe8K,EAAK9K,c,+BAGb,IAAD,EACiCqnB,KAAK0N,MAAjD+iC,EADW,EACXA,gBAAiBnkE,EADN,EACMA,OAAQkF,EADd,EACcA,SAAUqF,EADxB,EACwBA,MACpCw2B,EAAS+I,GAAsBv/B,GAC/BqyB,EAAW7M,GAAc28C,KAE/B,OACI,gBAAC,GAAD,MACIv2D,MACI,gBAAC,GAAD,CAAwBymB,SAAUA,EAAUuO,UAAWpK,EAAOgJ,kBAAmBxG,SAAU,KAE/FntB,SAAUjQ,KAAKC,EAAE,mCACbstB,KAAK0N,OAER8iC,GAAoBlkE,EAAQ48B,EAAUunC,EAAiBj/D,EAAUqF,Q,GApB7C6vB,aA0BtBwJ,MAAetB,aAAUmqC,K,kbClClCE,G,yIACqB,IAAD,OACZvU,EAAe5rD,GAAQ9O,KAAI,SAACw2D,GAAD,OAAe/tD,KAAKC,EAAL,WAAkB8tD,MADhD,EAEoBxgC,KAAK0N,MAApCv/B,EAFW,EAEXA,OAAQ0I,EAFG,EAEHA,MAAO8tD,EAFJ,EAEIA,aAEtB,OACI,gBAAC,KAAD,MACIn1B,QAAS,SAACq1B,GACF,EAAKn3B,MAAMwrC,UAAU,EAAKxrC,MAAMwrC,UAAiB,GAARrU,OAAY96D,EAAY+O,GAAQ+rD,KAEjF4N,cAAetkE,EAAS2K,GAAQ6oD,QAAQxzD,IAAW,EACnD62D,QAASN,GACLR,GAAoBS,EAAc9tD,S,GAZ3B6vB,aAkBZkI,gBAAUqqC,I,m/BCRzB,IAAM/oC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDsvC,gBAAiBtvC,EAAMxvB,KAAK6G,eAG1Bk5D,GAAoBr4D,OAAauhC,MAAM,CACzCzsC,OAAQkM,KASN+e,G,uIACK1iB,GACHspB,KAAK0N,MAAMl8B,SAASiF,GAAoBC,IACxCspB,KAAK0N,MAAMjqB,S,sCAGe,IAAD,SACQuc,KAAK0N,MAA/B+iC,EADkB,EAClBA,gBAAiB55D,EADC,EACDA,MAClBw2B,EAAS8rC,GAAoBtiE,GAEnC,OACI,gBAAC,KAAD,CACIukC,cAAeq1B,EACfp1B,iBAAkBq2B,GAClBvzB,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAmD,EAAKiN,OAAOjN,MAExE,SAAC8kC,GAAqE,IAC5DC,EAAwDD,EAAxDC,aAAc/kC,EAA0C8kC,EAA1C9kC,OAAQtD,EAAkCooC,EAAlCpoC,OAAQyhC,EAA0B2G,EAA1B3G,QAASkG,EAAiBS,EAAjBT,cAE9C,OACI,gBAAC,GAAD,MACIt4B,MAAOhQ,KAAKC,EAAL,0CACPy+D,aAAc,gBAACiI,GAAD,MACd39B,aAAcA,GACV,EAAK/N,OAET,gBAAC,GAAD,CAAYM,MAAOX,EAAOtR,OAAQtpB,KAAKC,EAAE,iBACzC,gBAAC,GAAD,CACIvE,OAAQuI,EAAOvI,OACf+qE,SAAU,SAAC/qE,GAAD,OAAqB4sC,EAAc,SAAU5sC,IACvDw2D,aAAa,eAEhB9vB,EAAQ1mC,QAAU,gBAAC,GAAD,CAAgBjG,MAAOkL,EAAOjF,e,oCAQ7C,IAAD,EACoB6xB,KAAK0N,MAAzC72B,EADgB,EAChBA,MAAO45D,EADS,EACTA,gBAAiBj/D,EADR,EACQA,SACzB67B,EAASgsC,GAAkBxiE,GAC3B7I,EAAayiE,EAAgBziE,WAC7B8O,EAAanT,OAAO+M,OAAO1I,GAAYq8B,MAAK,SAACngC,GAAD,OAAa,IAANA,KAEnDu1C,EAAW,SAACjyB,EAAe4b,GAAhB,OACb53B,EAASiF,GAAoB,CAACzI,WAAW,SAAKA,GAAN,UAAmBwf,EAAK4b,QAE9D47B,EAAU/rD,GAAYjP,KAAI,SAACwjB,EAAe/f,GAAhB,OAC5B,gBAAC8hC,GAAA,EAAD,CACIzlC,IAAK2D,EACLugC,MAAOX,EAAOzpB,OACd41B,cAAe,GACfhK,QAAS,kBAAMiQ,EAASjyB,GAAKxf,EAAWwf,MAExC,gBAACsuB,GAAA,EAAD,CAAe/sC,KAAMmK,GAAiBzL,GAAIugC,MAAOX,EAAOisC,aACxD,gBAAChqC,GAAA,EAAD,CAAMtB,MAAOX,EAAOksC,YAAa9mE,KAAKC,EAAL,cAAqB8a,IACtD,gBAAC68C,GAAA,EAAD,CACIruC,MAAOhuB,EAAWwf,GAClBgsD,WAAY3iE,EAAMu1B,OAClBqtC,WAAY,CAACC,KAAM7iE,EAAM01B,cAAeotC,MAAO9iE,EAAMw1B,cACrDi+B,cAAe,SAAClhC,GAAD,OAAgBqW,EAASjyB,EAAI4b,UAKxD,OACI,gBAAC,GAAD,MACI3mB,MAAOhQ,KAAKC,EAAE,wCACdy+D,aAAc,gBAACyI,GAAD,MACd3I,aAAcn0D,GACVkjB,KAAK0N,OAERs3B,K,+BAKU,IACZyL,EAAmBzwC,KAAK0N,MAAxB+iC,gBACP,OACI,gCAC8B,YAAzBA,EAAgB3iE,MAAsBkyB,KAAK65C,gBAClB,UAAzBpJ,EAAgB3iE,MAAoBkyB,KAAK85C,mB,GAtFfpzC,aA4F9ByyC,GAAsBhsC,IAAS,WACxC,OAAOkB,KAAWC,OAAO,CACrBvS,MAAO,CACHiU,UAAW,SAKVqpC,GAAoBlsC,IAAS,SAACt2B,GACvC,OAAOw3B,KAAWC,OAAO,CACrB1qB,OAAQ,CACJ8nB,OAAQ,GACR+C,cAAe,MACfE,WAAY,UAEhB4qC,WAAW,SACJ1qC,IADG,IAENgB,SAAU,GACVmC,cAAe,KACfjC,MAAOl5B,EAAMwM,KACbmnC,SAAU,IAEd8uB,WAAY,CACRzpC,SAAU,GACV6G,YAAa,GACb3G,MAAOl5B,EAAMu1B,aAKzB,SAASgtC,KACL,IAAMv4B,EAAOtT,GAAO3B,aACdsmC,EAAYrxB,EAAO,IAAM,IAFS,EAIdsxB,mBAAS,GAJK,WAIjCn2C,EAJiC,KAI1ByjB,EAJ0B,KAKlCS,EAAc,kBAAMT,EAASzjB,EAAQ,IAErComB,EAAMvD,GAAY,yBAAyB,kBAAMqB,OACjD+2B,EAAOp4B,GAAY,WAAW,kBAAMqB,OAE1C,OACI,gBAACnS,GAAA,EAAD,CAAMC,MAAO,CAAC,CAACtC,OAAQwmC,IAAarxB,GAAQ,CAACpE,WAAwB,GAAZy1B,KACrD,gBAAC+E,EAAD,CAAM1rC,MAAO2mC,GAAa,IAAM,KAAMxmC,OAAQwmC,EAAW9xB,QAAQ,gBACjE,gBAACgC,EAAD,CACIpU,MAAK,IACD4F,SAAU,YACNiN,EACE,CAAC1H,KAAkB,IAAZ+4B,EAAkB94B,IAAiB,GAAZ84B,GAC9B,CAACz4B,MAAoB,KAAZy4B,EAAkB94B,IAAiB,IAAZ84B,IAE1C3mC,MAAmB,IAAZ2mC,GAAoB,IAAM,KACjCxmC,OAAoB,IAAZwmC,EACR9xB,QAAQ,iBAMxB,SAASw5B,KACL,IAAM/4B,EAAOtT,GAAO3B,aACdsmC,EAAYrxB,EAAO,IAAM,IAFO,EAIZsxB,mBAAS,GAJG,WAI/Bn2C,EAJ+B,KAIxByjB,EAJwB,KAKhCS,EAAc,kBAAMT,EAASzjB,EAAQ,IAErComB,EAAMvD,GAAY,yBAAyB,kBAAMqB,OACjD+2B,EAAOp4B,GAAY,WAAW,kBAAMqB,OAE1C,OACI,gBAACnS,GAAA,EAAD,CACIC,MAAO,CACH,CAACtC,OAAQwmC,EAAW3xB,QAAS,IAC5BM,GAAQ,CACLjN,SAAU,WACVwF,KAAM,IACNK,OAAQ,OAIhB,gBAACw9B,EAAD,CAAM1rC,MAAO2mC,GAAa,IAAM,KAAMxmC,OAAQwmC,EAAW9xB,QAAQ,gBACjE,gBAACgC,EAAD,CACIpU,MAAK,IACD4F,SAAU,YACNiN,EACE,CAAC1H,KAAkB,IAAZ+4B,EAAkB94B,IAAiB,GAAZ84B,GAC9B,CAAC/4B,KAAkB,IAAZ+4B,EAAkB94B,IAAiB,IAAZ84B,IAExC3mC,MAAmB,GAAZ2mC,GAAmB,IAAM,KAChCxmC,OAAoB,GAAZwmC,EACR9xB,QAAQ,iBAMTlQ,UAAetB,aAAUxV,K,kbCpNlC2gD,G,yIACQ,IAAD,EAC0B/5C,KAAK0N,MAA7B72B,EADF,EACEA,MAAUi7B,EADZ,kBAECzE,EAASS,GAAaj3B,GAE5B,OACI,kBAACyjC,GAAD,QACQxI,EADR,CAEI8H,cAAe,SAACmJ,GAAD,OACX,oCACI,kBAACzT,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MACf5Q,KAAKC,EAAE,2BACP,OACAD,KAAKC,EAAE,4BAEZ,kBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOkN,sBAChB,kBAAC,GAAD,CACIl3B,KAAM5Q,KAAKC,EAAE,UACb88B,QAAS,kBAAMuT,KACfvL,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOoN,aAEtB,kBAAC,GAAD,CACIp3B,KAAM5Q,KAAKC,EAAE,iBACb88B,QAAS,WACLuT,IACApc,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,mBAGzBiQ,KAAK,iBACLxJ,MAAO,CAACX,EAAOmN,aAAcnN,EAAOqN,eACpCjD,UAAWpK,EAAOoN,uB,GAlCnB/T,IAAMwN,WA4C/BpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBiM,qBAAsB,CAClBhP,MAAO,OACPkD,cAAe,MACfuB,UAAW,IAEfwK,aAAc,CACVjM,KAAM,EACNyH,iBAAkB,GAClBrF,eAAgB,GAEpB8J,WAAY,CACR5K,SAAU,IAEd6K,cAAe,CACX1G,gBAAiBn9B,EAAM3O,OAG3Bmb,KAAM,CACFwsB,SAAU,GACVC,UAAW,gBAKRlB,gBAAUmrC,IChEVC,OAVf,SAAkBtsC,GAA6D,IACpErqB,EAAsBqqB,EAAtBrqB,KAAS42D,EAD0D,KAC7CvsC,EAD6C,UAG1E,OACI,gBAAC4B,GAAA,EAAD,QAAU2qC,EAAV,CAAqBjsC,MAAO,CAACisC,EAAYA,EAAUjsC,MAAQ,GAAI,CAAC+B,MAAO,cAClE1sB,I,scCKP62D,G,yIACqB,IAAD,EACmDl6C,KAAK0N,MAAnE72B,EADW,EACXA,MAAO4L,EADI,EACJA,MAAOY,EADH,EACGA,KAAM82D,EADT,EACSA,kBAAmB12D,EAD5B,EAC4BA,KAASquB,EADrC,4DAEZzE,EAASS,GAAaj3B,GAEtB+7C,EAAYunB,EAAoBtjE,EAAMi1B,UAAYj1B,EAAMm1B,UAE9D,OACI,gBAAC,GAAD,MACIvpB,MAAOA,EACPwuD,aAAa,EACbxtD,KAAMA,GACD02D,EACC,CACIjuC,WAAY,gBAACkuC,GAAA,EAAD,CAAgBpsC,MAAOX,EAAOnB,WAAYk7B,OAAQ,CAACvwD,EAAMu1B,OAAQ,aAC7EwmB,UAAW/7C,EAAMi1B,WAErB,GACFgG,GAEJ,gBAACxC,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAOgtC,UAAW,CAACtqC,MAAO6iB,KAAcvvC,GACtD,gBAACisB,GAAA,EAAD,CAAMtB,MAAO,CAACX,EAAOitC,aAAc,CAACvqC,MAAO6iB,KACtCngD,KAAKC,EAAE,kBAAkB,GAC1B,gBAAC,GAAD,CACI88B,QAAS,kBAAMyB,KAAQqR,QAAQ/4C,IAC/B8Z,KAAM5Q,KAAKC,EAAE,kBAAkB,GAC/Bs7B,MAAO,CAACe,WAAY,UAEvBt8B,KAAKC,EAAE,kBAAkB,IAG9B,gBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOktC,gBAChB,gBAAC,GAAD,CACItgC,UAAW,SAACE,GAAD,OACP,gBAAC5K,GAAA,EAAD,CAAkBvB,MAAO,CAACX,EAAOmN,aAAcnN,EAAOmtC,qBAAsBhrC,QAAS2K,GACjF,gBAAC7K,GAAA,EAAD,CAAMtB,MAAOX,EAAOgf,kBAAmB55C,KAAKC,EAAE,kBAC9C,gBAACopC,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAOgf,uBAItD,gBAAC9c,GAAA,EAAD,CAAkBvB,MAAO,CAACX,EAAOmN,aAAcnN,EAAOotC,oBAAqBjrC,QAAS,kBAAM/rB,MACtF,gBAAC6rB,GAAA,EAAD,CAAMtB,MAAOX,EAAOgf,kBAAmB55C,KAAKC,EAAE,iBAC9C,gBAACopC,GAAA,EAAD,CAAe/sC,KAAK,QAAQi/B,MAAOX,EAAOgf,0B,GA1C/B3lB,aAoDtBoH,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrBpC,WAAY,CACR0H,SAAU,WACVwF,IAAK,EACLD,KAAM,EACNM,MAAO,EACPd,OAAQ,GAEZ4hC,eAAgB,CACZ9rC,cAAe,MACfD,eAAgB,eAChB4I,aAdU,IAgBVya,YAAa,OACb6oB,aAAc,CAACnvC,MAAO,EAAGG,OAAQ,GACjCivC,cAAe,IACfC,aAAc,KACd9oB,UAAW,IAEftX,aAAc,CACVjM,KAAM,EACNE,cAAe,MACfE,WAAY,SACZH,eAAgB,SAChBoB,QAAS,IAEb4qC,oBAAqB,CACjBxmC,gBAAiBn9B,EAAM3O,MACvBu+C,oBA/BU,IAgCVC,uBAhCU,KAkCd+zB,mBAAoB,CAChBzmC,gBAAiBn9B,EAAM41B,KACvBka,qBApCU,IAqCVC,wBArCU,KAuCdyF,iBAAkB,CACdxc,SAAU,GACVwH,kBAAmB,EACnBtH,MAAOl5B,EAAMi1B,WAEjBwuC,aAAc,CACVzqC,SAAU,GACVe,WAAY,GACZd,UAAW,UACXa,eAAgB,GAChBqB,cAAe,IAEnBqoC,UAAW,CACPvqC,UAAW,UACXD,SAAU,GACVe,WAAY,SAKThC,gBAAUsrC,I,8wCCnHZW,GAAqB,CAC9B7hD,wBACAC,4BACAC,4BACAC,wBACAC,gCACAC,2BACAC,2BACAC,2BACAC,uB,yICdI,OACI,gBAAC,GAAD,MACI/W,MAAOhQ,KAAKC,EAAE,2BACd2Q,KAAM5Q,KAAKC,EAAE,0BACbynE,mBAAmB,GACfn6C,KAAK0N,Y,GAPYhH,aDiBjCjN,uB,yIEfI,OACI,gBAAC,GAAD,MACIhX,MAAOhQ,KAAKC,EAAE,2BACd2Q,KAAM5Q,KAAKC,EAAE,2BACTstB,KAAK0N,Y,GANYhH,aFkBjChN,uB,yIGhBI,OACI,gBAAC,GAAD,MACIjX,MAAOhQ,KAAKC,EAAE,2BACd2Q,KAAM5Q,KAAKC,EAAE,0BACbynE,mBAAmB,GACfn6C,KAAK0N,Y,GAPYhH,cCO/Bo0C,GAAkB92B,eAElB9S,GAAU1J,GAAiBx9B,KAAI,SAAC+E,EAA+BtB,GACjE,IAAMyjE,EAAUzjE,EAAI+5B,GAAiBj9B,OAAS,EACxCkZ,EAAO,kBAAMytD,GAAWpmC,GAAMt5B,S1JwR6B,CACjE1D,KAAMmD,EAAkB83B,yB0JxRlByoC,EAAW,kBAAM/jE,EAAI,GAAKq9B,GAAMt5B,S1J2RmC,CACzE1D,KAAMmD,EAAkB63B,6B0J1RlBiyC,EAAiBF,GAAmB9rE,GAK1C,OAAO,gBAAC+rE,GAAgBx2B,OAAjB,CAAwBx6C,IAAK2D,EAAGsB,KAAMA,EAAMw1C,UAJnD,WACI,OAAO,gBAACw2B,EAAD,CAAgBt3D,KAAMA,EAAM+tD,SAAUA,EAAUxnB,MAAOv8C,EAAGyjE,QAASA,KAGP1sB,QAAS,CAAC/hC,MAAO2kB,GAAYr4B,SA8BzFmhC,OA3BQtO,cAAQ,SAACT,GAAD,MAAsB,CACjDtoB,gBAAiBsoB,EAAMxvB,KAAKkH,mBA0BjBq3B,EAvBf,YAAyF,IAA3Dr3B,EAA0D,EAA1DA,gBAC1B,OACI,gCACI,gBAACiiE,GAAgB32B,UAAjB,CACIM,iBAAkBjd,GAAiB3uB,GACnCmiE,cAAe,CAACnN,WAAW,EAAOoN,UAAU,GAC5C52B,OAAQ,kBAAM,kCACd62B,aAAc,CACVC,UAAW,IACXC,QAAS,IACTC,KAAM,GAEVj3B,cAAc,EACdk3B,MAAM,EACNC,oBAAqB,GAEpBrqC,IAEL,gBAAC,GAAD,CAAuB8Y,MAAOnxC,Q,u/BCjCpC8hB,G,yIACqB,IAAD,OACX9jB,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAEtB2kE,EAAgB38B,GAAY,iBAAiB,kBAAM,EAAKqB,iBACxDu7B,EAAgB58B,GAAY,uBAAuB,kBAAM,EAAKqB,iBAE9DxU,EAASF,KAAWC,IAAI,UAAUC,OAExC,OACI,gBAAC,GAAD,CAAeiC,gBAAc,GACzB,gBAACI,GAAA,EAAD,CAAMC,MAAOX,EAAO+H,MACf7H,GAAO3B,aACJ,gBAACmC,GAAA,EAAD,CAAMC,MAAOX,EAAOgI,qBAChB,gBAAC+kC,GAAA,EAAD,CACIpsC,MAAOX,EAAOquC,SACdtU,OAAQ,CAAC,UAAW,UAAW,WAC/BuU,UAAW,CAAC,EAAK,GAAK,GACtB37B,MAAO,CAACie,EAAG,EAAGpN,EAAG,GACjB+qB,IAAK,CAAC3d,EAAG,GAAKpN,EAAG,MAErB,gBAAC9iB,GAAA,EAAD,CAAMC,MAAO,CAAC4F,SAAU,WAAY+E,QAAS,IAAKQ,MAAO,IAAK5N,MAAO,SACjE,gBAACkwC,EAAD,QAIR,gCACI,gBAAC1tC,GAAA,EAAD,CACIC,MAAK,IACD4F,SAAU,WACVrI,MAAO,QACHG,EAAS,IAAO,CAACiN,OAAQ,GAAK,CAACS,IAAK,OAG5C,gBAACoiC,EAAD,CAAejwC,MAAM,UAEzB,gBAACwC,GAAA,EAAD,CACIC,MAAK,OACD4F,SAAU,WACVrI,MAAO,QACHG,EAAS,IAAO,CAACiN,QAAS,KAAO,CAACS,IAAK,MAH1C,IAIDD,MAAO,OAGX,gBAACsiC,EAAD,QAIZ,gBAAC1tC,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAACH,GAAA,EAAD,KACI,gBAACuB,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,6BACnC,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAO3qB,UAAWjQ,KAAKC,EAAE,gCACrC66B,GAAO3B,cAEJ,gBAAC0D,GAAA,EAAD,CAAMtB,MAAOX,EAAOwuC,gBAAiB5yE,EAAa,eAAO,iBAGjE,gBAAC,GAAD,CACIoa,KAAM5Q,KAAKC,EAAE,6BACb88B,QAAS,kBAAM7I,GAAa,eAC5B6Q,KAAK,iBACLxJ,MAAO,CAAC0O,QAAS,a,GA9DJhW,aAuEnCoH,GAAeX,IAAS,SAACt2B,EAAcy2B,GACzC,OAAOe,KAAWC,OAAO,CACrB8G,KAAM,CACF7J,MAAO,OACPG,OAAQ,OACR+C,cAAe,MACfD,eAAgB,UAEpB6G,oBAAqB,CACjB9J,MAAO,OAEXmwC,SAAU,CACNnwC,MAAO,OACPG,OAAQ,QAEZwC,UAAW,CACP3C,MAAO+B,EAAa,MAAQ,OAC5B5B,OAAQ,OACRiK,WAAYrI,EAAa,IAAM,IAC/BuG,cAAe,IACfwD,kBAAmB,GACnB7I,eAAgB,gBAChBG,WAAYrB,EAAa,SAAW,cAExC7qB,MAAO,CACHotB,SAAU,GACVmC,cAAe,GACfpB,WAAY,GACZb,MAAOl5B,EAAMwM,KACb0rB,WAAY,MACZZ,SAAUb,EAAa,KAAO,IAC9BwC,UAAWxC,EAAa,SAAW,QAEvC5qB,SAAU,CACNmtB,SAAU,GACVG,UAAW,GACXD,MAAOl5B,EAAMwM,KACbysB,UAAWxC,EAAa,SAAW,QAEvCuuC,eAAgB,CACZhsC,SAAU,GACVC,UAAW,SACXa,eAAgB,UAKb/B,gBAAUjU,I,m/BC9GzB,IAMMmhD,GAA0BziE,OAAauhC,MAAM,CAC/C1mC,SAAUqF,GACVuC,eAAgBpC,KAUdqiE,G,kCAIF,WAAYruC,GAAgC,IAAD,uBACvC,cAAMA,IAJVsuC,aAAet1C,cAKX,EAAKvF,MAAQ,CAAC2W,YAAY,GAFa,E,4CAKpCphC,GAAoB,IAAD,SACcspB,KAAK0N,MAAlCh8B,EADe,EACfA,MAAOspC,EADQ,EACRA,mBACdhb,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2W,YAAY,KAEtCpmC,EACCo5B,GAAMt5B,S5J0MU,SAACE,EAAewC,GAAhB,OAA2D,SAAO1C,GAAP,eAAA9G,EAAAC,OAAA,kEAAAD,EAAA,MAC7DF,EAAe,sBAAuB,OAAQ,GAAI,CAACkH,QAAOwC,cADG,WAC9EvI,EAD8E,QAGvEJ,QAAUhD,EAAeyK,GAH8C,uBAIhFxB,EAAS2E,MAJuE,kBAKzE,CAAC1B,SAAS,IAL+D,gCAOzE,CAACA,SAAS,EAAOrB,OAAQN,GAAuBnH,KAPyB,6D4J1MxC+qB,CAAchlB,EAAOgF,EAAOxC,WAAWnM,MACvE,YAA+C,IAA7C0M,EAA4C,EAA5CA,QAASrB,EAAmC,EAAnCA,OAEP,GADIqB,GAAWumC,GAAoBA,EAAmBtkC,GAClDtD,GAAUA,EAAOjC,OAAQ,CACzB,IAAMqvB,EAAIptB,EAAOjC,OACjBxH,OAAOC,KAAK42B,GAAGntB,SAAQ,SAACC,GAAD,OAAO,EAAK2nC,eAAiB,EAAKA,cAAc3nC,EAAGf,GAAciuB,EAAEltB,QAE9F,EAAK2gC,SAAS,CAACiH,aAAc9nC,EAAQ0kC,YAAY,OAIzD9X,KAAKiU,SAAS,CAACiH,aAAc,CAAChoC,QAAS,gCAAiC/B,OAAQ,IAAK2mC,YAAY,M,+BAIlF,IAAD,SACc9X,KAAK0N,MAA9B72B,EADW,EACXA,MAAOg3B,EADI,EACJA,eADI,EAEiB7N,KAAKmB,MAAjC+Z,EAFW,EAEXA,aAAcpD,EAFH,EAEGA,WACfzK,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOH,GACT,gBAACyB,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,wBACnC,gBAAC,KAAD,CACI0oC,cAxDmB,CACnClnC,SAAU,GACV4H,eAAgB,IAuDAu/B,iBAAkBygC,GAClB39B,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAY,EAAKiN,OAAOjN,MAEjC,SAAC8kC,GAAyC,IAEnCC,EAOAD,EAPAC,aACA/kC,EAMA8kC,EANA9kC,OACAtD,EAKAooC,EALApoC,OACAyhC,EAIA2G,EAJA3G,QACAC,EAGA0G,EAHA1G,aACAC,EAEAyG,EAFAzG,WACAkG,EACAO,EADAP,cAEES,EAAc,IAAI5G,eAAcC,cAAe6B,GAA6B//B,EAAO,KAGzF,OAFA,EAAKokC,cAAgBA,EAGjB,gCACI,gBAAC,GAAD,MACIrG,MAAM,WACNj5B,YAAalJ,KAAKC,EAAE,YACpBxK,MAAOkL,EAAOc,SACd8nB,MAAOtlB,EAAOxC,SACd2gC,QAASA,EAAQ3gC,SACjBghC,YAAY,EACZyG,cAAc,OACdC,cAAc,EACdC,gBAAiB,iCAAM,EAAKmgC,aAAan1C,cAAxB,EAAM,EAA2B4L,UAC9CiJ,IAKR,gBAAC5H,GAAA,EAAD,CAAW9F,MAAO,CAACzC,MAAO,EAAGG,OAAQ,KAErC,gBAAC,GAAD,MACIqI,IAAK,EAAKioC,aACVpnC,MAAM,iBACNj5B,YAAalJ,KAAKC,EAAE,kBACpBxK,MAAOkL,EAAO0I,eACdkgB,MAAOtlB,EAAOoF,eACd+4B,QAASA,EAAQ/4B,eACjBo5B,YAAY,EACZyG,cAAc,QACVD,IAGR,gBAAC,GAAD,CAAWxzC,MAAOuL,GAAaynC,KAE/B,gBAAC,GAAD,CACI1L,QAAS,kBAAMiM,KACfzN,MAAOX,EAAOzpB,OACd4zB,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,wBACbolC,WAAYA,a,GA/FhBpR,aA0G1BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB7rB,MAAO,CACH8oB,MAAO,OACPsE,SAAU,GACVE,MAAOl5B,EAAMwM,KACb4uB,aAAc,IAElBruB,OAAQ,CACJosB,UAAW,SAKRpB,gBAAUmtC,I,u/BCtJnBthD,G,kCACF,WAAYiT,GAAkC,IAAD,uBACzC,cAAMA,IACDvM,MAAQ,GAF4B,E,yDAOzC,IAAMt2B,EAASm1B,KAAK0N,MAAM9G,MAAM/7B,OAC5BA,GAAUA,EAAO6G,OAAOsuB,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8BzvB,MAAO7G,EAAO6G,W,+BAGrD,IACZA,EAASsuB,KAAKmB,MAAdzvB,MAEP,OACI,gBAAC,GAAD,KACI,gBAAC,GAAD,KACI,gBAAC,GAAD,CAAmBA,MAAOA,EAAOm8B,eAAgB,CAACtC,MAAO,MAAO4C,SAAU,a,GAlB5DzH,aAyBnBkI,gBAAUnU,I,kbC1BnBI,G,yIACqB,IACZhkB,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAAC2C,EAAA,EAAD,CAAa9hC,KAAK,aAAai/B,MAAOX,EAAOyD,WAC7C,gBAACxB,GAAA,EAAD,CAAMtB,MAAOX,EAAO/hC,aAAcmH,KAAKC,EAAE,qC,GATjBg0B,aAgBtCoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNC,eAAgB,SAChBG,WAAY,SACZpD,MAAO,OAEXjgC,YAAa,CACTukC,SAAU,GACVC,UAAW,SACXC,MAAOl5B,EAAMwM,MAEjBytB,SAAU,CACNH,eAAgB,GAChBd,SAAU,GACVE,MAAOl5B,EAAMwM,WAKVurB,gBAAU/T,I,kbCjCnBH,G,yIACqB,IACZ7jB,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAACoB,GAAA,EAAD,CAAMtB,MAAOX,EAAOiD,aAAc79B,KAAKC,EAAE,0BACzC,gBAAC,GAAD,CACI2Q,KAAM5Q,KAAKC,EAAE,SACbigC,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,QAAQi/B,MAAOX,EAAOisC,aACzD9pC,QAAS,WACL7I,GAAa,YAAa,CACtBY,OAAQ,eACR18B,OAAQ,CAAC08B,OAAQ,mBAGzBiQ,KAAK,iBACLxJ,MAAOX,EAAOzpB,e,GAnBG8iB,aA2BnCoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNC,eAAgB,SAChBG,WAAY,SACZpD,MAAO,OAEX+E,YAAa,CACTT,SAAU,GACVe,WAAY,GACZd,UAAW,SACXC,MAAOl5B,EAAMwM,MAEjBO,OAAQ,CACJosB,UAAW,IAEfspC,WAAY,CACRzpC,SAAU,GACVE,MAAOl5B,EAAMi1B,UACb2Q,WAAY,QAKT7N,gBAAUlU,IC/BzB,IAAMoT,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,CACrBJ,UAAW,CACPxC,OAAQ,GACR+Q,WAAY,EACZ/F,YAAa,QAKV9H,iBA/Bf,SAAoBlB,GAAsC,IAC/C3qB,EAAwC2qB,EAAxC3qB,KAAMumC,EAAkC5b,EAAlC4b,SAAUzyC,EAAwB62B,EAAxB72B,MAAUi7B,EADoB,KACNpE,EADM,6BAE/CL,EAASS,GAAaj3B,GACtB+tD,EAAaV,IAAoB,EAAOrtD,GAExC6tD,EAAe1rD,GAAMhP,KAAI,SAACiE,GAAD,OAAewE,KAAKC,EAAL,YAAmBzE,MAEjE,OACI,gBAAC,KAAD,MACIuhC,QAAS,SAACq1B,GACFvb,GAAUA,EAAStwC,GAAM6rD,KAEjC4N,cAAez5D,GAAM2oD,QAAQ5+C,GAC7BiiD,QAASN,EACT72B,eAAgBR,EAAOa,WACnB02B,EACA9yB,O,kbCfVmqC,G,qLACFC,iBAAmB,4BAAAxxE,EAAAC,OAAA,mDACK,QAAhB+8B,KAASC,GADE,mCAAAj9B,EAAA,MAEUsgC,KAAqBA,OAF/B,mBAGI,aADVz/B,EAFM,EAENA,QAFM,+BAAAb,EAAA,WAAAA,EAAA,MAIesgC,KAAqBA,OAJpC,0BAI8Dz/B,OAJ9D,oDAIPA,EAJO,yBAQW,YAAXA,GARA,kCAWR,GAXQ,8D,EAcnB4wE,WAAa,4BAAAzxE,EAAAC,OAAA,oDACU,EAAKuxE,mBADf,4CAAAxxE,EAAA,MAKoB0xE,KAAoC,CACrDC,WAAYD,KAA6BE,OACzCC,eAAe,EACfC,OAAQ,CAAC,EAAG,GACZC,QzKlBU,OyKSb,QAKKC,EALL,QAWWC,YACF30E,EAAkB00E,EACpB,EAAKhvC,MAAMkvC,mBAAmB,EAAKlvC,MAAMkvC,kBAAkB50E,IAblE,gDAgBDG,QAAQD,MAAM,iDACdC,QAAQyD,IAAR,MAjBC,iE,gDAsBU,IAAD,OACXiL,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC04B,GAAA,EAAD,CAAkBvB,MAAOX,EAAOzpB,OAAQ4rB,QAAS,kBAAM,EAAK2sC,eACxD,gBAACrgC,GAAA,EAAD,CAAe9N,MAAOX,EAAOisC,WAAYvqE,KAAK,c,GA3C/B23B,aAiDzBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB1qB,OAAQ,CACJgwB,SAAU,WACV+E,OAAQ,EACRc,MAAO,EACPrC,aAAc,GACdxH,QAAS,EACToE,gBAAiBn9B,EAAMs1B,eAEvB0lB,YAAa,OACb6oB,aAAc,CAACnvC,MAAO,EAAGG,OAAQ,GACjCivC,cAAe,GACfC,aAAc,KACd9oB,UAAW,GAEfwnB,WAAY,CACRzpC,SAAU,GACVE,MAAOl5B,EAAMwM,WAKVurB,gBAAUqtC,I,u/BCpDnBY,G,kCACF,WAAYnvC,GAA2B,IAAD,uBAClC,cAAMA,IA2CVovC,mBAAqB,SAACjmE,GAA+B,IAAD,EACV,EAAK62B,MAApC3R,EADyC,EACzCA,MAAOghD,EADkC,EAClCA,YAAaC,EADqB,EACrBA,QADqB,EAEzB,EAAK77C,MAArBnF,EAFyC,EAEzCA,MAAO9zB,EAFkC,EAElCA,MAERmlC,EAASS,GAAakvC,EAAblvC,CAAsBj3B,GAErC,OACI,gCACI,gBAACy4B,GAAA,EAAD,CAAMtB,MAAOX,EAAO4vC,YAAalhD,GAChCghD,GAAe/gD,EACZ+gD,EAAY/gD,EAAO9zB,GAAO,SAAC8zB,EAAU9zB,GAAX,OAAqC,EAAK26D,SAAS7mC,EAAO9zB,MAEpF,iCAEJ,gBAAConC,GAAA,EAAD,CAAMtB,MAAOX,EAAO6vC,gBAAiCh1E,EAAQuK,KAAKC,EAAExK,GAAS,IAC7E,gBAAC6lC,GAAA,EAAD,CAAMC,MAAOX,EAAO8vC,uBAChB,gBAAC,GAAD,CACI3tC,QAAS,kBAAM,EAAKt0B,SACpB8yB,MAAOX,EAAO+vC,YACd/5D,KAAM5Q,KAAKC,EAAE,SACb8kC,KAAK,mBAET,gBAAC,GAAD,CACIhI,QAAS,kBAAM,EAAK6tC,UAAS,IAC7BrvC,MAAOX,EAAO+vC,YACd/5D,KAAM5Q,KAAKC,EAAE,UACb8kC,KAAK,sBApErB,EAAKrW,MAAQ,CACTm8C,WAAW,EACXp1E,MAAO,KACP8zB,MAAO0R,EAAM6vC,cALiB,E,8CAS7BD,GAA2B,IACzBC,EAAgBv9C,KAAK0N,MAArB6vC,aAEPv9C,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8Bm8C,YAAWthD,MAAOuhD,EAAcr1E,MAAO,U,+BAGhEA,GACL83B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8Bj5B,a,+BAGzB8zB,EAAU9zB,GAA8B,IAAD,YAC9B6B,IAAV7B,IAAqBA,EAAQ83B,KAAKmB,MAAMj5B,OAC5C83B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8BnF,QAAO9zB,WAAQ,kBAAM,EAAKs1E,gB,iCAGvC,IACVC,EAAaz9C,KAAK0N,MAAlB+vC,UACP,IAAKA,EAAW,OAAO,EACvB,IAGI,OAFAA,EAAUC,aAAa19C,KAAKmB,MAAMnF,OAClCgE,KAAK29C,SAAS,OACP,EACT,MAAOnrE,GAEL,OADAwtB,KAAK29C,SAAUnrE,EAAwBY,OAAO,KACvC,K,8BAKP4sB,KAAKw9C,aACDx9C,KAAK0N,MAAMxyB,OAAS8kB,KAAKmB,MAAMnF,OAAOgE,KAAK0N,MAAMxyB,MAAM8kB,KAAKmB,MAAMnF,OACtEgE,KAAKq9C,UAAS,M,+BAqCC,IAAD,SAcdr9C,KAAK0N,MAZL3R,EAFc,EAEdA,MACA4W,EAHc,EAGdA,KACA2T,EAJc,EAIdA,QACAs3B,EALc,EAKdA,cACAC,EANc,EAMdA,QACA7vC,EAPc,EAOdA,MACA8vC,EARc,EAQdA,OACAd,EATc,EASdA,QACAe,EAVc,EAUdA,MACAvuC,EAXc,EAWdA,QACAwuC,EAZc,EAYdA,aACGlsC,EAbW,yHAeXwrC,EAAat9C,KAAKmB,MAAlBm8C,UAED7kC,EAAS,WACPulC,GAAcA,KAGtB,OAEI,gBAAC,KAAD,MACK,YAA0B,IAAxBnnE,EAAuB,EAAvBA,MACOw2B,EAASS,GAAakvC,EAAblvC,CAAsBj3B,GACrC,OACI,gCACI,gBAAC04B,GAAA,EAAD,MACIvB,MAAO,CAACX,EAAO4wC,YAAajwC,GAC5BwL,cAAe,GACfg5B,SAAUqL,IAAYruC,EACtBA,QAAS,WACAquC,EAEMruC,GAASA,IADXsuC,GAAQ,EAAKT,UAAS,KAG/BvrC,GAEJ,gBAAC/D,GAAA,EAAD,CAAMC,MAAOX,EAAOqhB,aAChB,gBAAC3gB,GAAA,EAAD,CAAMC,MAAOX,EAAO6wC,qBACdH,GAASprC,EACX,gBAACrD,GAAA,EAAD,CAAMtB,MAAOX,EAAO8wC,YAAaJ,GAAShiD,IAE9C,gBAACgS,GAAA,EAAD,MACMgwC,QAAqBh0E,IAAZu8C,GAAyBA,GAClCy3B,QAAqBh0E,IAAZu8C,GAAyB,EAAK5Y,MAAMU,YAGrDyvC,GACE,gBAAC9vC,GAAA,EAAD,CAAMC,MAAOX,EAAO+wC,oBAChB,gBAACtiC,GAAA,EAAD,CACI/sC,KAAM+uE,EAAS,OAAS,uBACxBztC,KAAMytC,EAAS,GAAK,GACpB9vC,MAAOX,EAAO6kB,eAK5B2rB,GACE,qCACuB9zE,IAAlB6zE,GACGN,GACAM,GAAc,kBAAM,EAAKP,UAAS,WACnBtzE,IAAlB6zE,GAA+BN,GAC5B,gBAAChjC,GAAD,CACIpC,QAASolC,EACT5kC,eAAgBrL,EAAOgxC,aACvBtd,cAAc,QACdnnB,cAAe,kBAAM,EAAKkjC,mBAAmBjmE,IAC7C4hC,OAAQA,EACRD,OAAQ,kBAAM,EAAK6kC,UAAS,e,GArJ7C32C,aAkKrBoH,GAAe,SAACkvC,GAAD,OACjB7vC,IAAS,SAACt2B,GACN,OAAOw3B,KAAWC,OAAO,CACrB+vC,aAAc,CACV1vC,WAAY,aACZ0I,kBAAmB,IAEvB6lC,eAAgB,CACZrtC,SAAU,GACVE,MAAOl5B,EAAM3O,OAEjB+0E,WAAY,CACRltC,MAAOl5B,EAAMm1B,UACb+F,cAAe,YACfC,cAAe,IACfnC,SAAU,GACVoC,aAAc,IAElBkrC,sBAAuB,CACnB1uC,cAAe,SACflD,MAAO,QAEX6xC,YAAa,CACTzsC,eAAgB,EAChBX,UAAW,IAEfiuC,YAAa,CACT1yC,MAAO,OACPkD,cAAe,MACfuF,gBAAiBn9B,EAAMs1B,eACvBkL,kBAAmB,GACnB7I,eAAgB,eAChByB,gBAAiB,GACjBwN,UAAWu/B,EAAU,EAAI,GACzB5lC,aAAc,IAElBsX,YAAY,OACRngB,KAAM,EACNE,cAAeuuC,EAAU,MAAQ,UAC7BA,EAAU,CAACruC,WAAY,UAAY,IAHhC,IAIPH,eAAgB,kBAEpB0vC,mBAAoB,CAChBzvC,cAAe,MACfE,WAAY,SACZsD,aAAc+qC,EAAU,EAAI,IAEhCmB,UAAW,CACPpuC,MAAOl5B,EAAMm1B,UACb+F,cAAe,YACfC,cAAe,EACfnC,SAAU,IAEduuC,mBAAoB,CAAC5vC,eAAgB,UACrC0jB,UAAW,CAACniB,MAAOl5B,EAAMm1B,iBAItB6wC,M,u/BC/OTyB,G,kCACF,WAAY5wC,GAAgC,IAAD,uBACvC,cAAMA,IACDvM,MAAQ,CAACo9C,UAAU,GAFe,E,oDAMvCv+C,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8Bo9C,UAAU,O,qCAIxCv+C,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8Bo9C,UAAU,O,+BAGrB,IAAD,SACiCv+C,KAAK0N,MAAjD72B,EADW,EACXA,MAAOu3B,EADI,EACJA,SAAU//B,EADN,EACMA,QAAYijD,EADlB,uCAEXitB,EAAYv+C,KAAKmB,MAAjBo9C,SACDlxC,EAASS,GAAaj3B,GAO5B,OACI,gCACI,gBAAC,GAAD,MACIxI,QAASA,GACLijD,EACCA,EAAYvP,QAAZ,MAAsB1zC,KAASpB,UAAY,CAACuiC,QAV7C,WACR8hB,EAAY9hB,SAAS8hB,EAAY9hB,UACrC,EAAKgvC,iBAQ+D,IAE3DpwC,GAEL,gBAACkM,GAAD,CACIpC,QAASqmC,EACT/lC,OAAQ,kBAAM,EAAKimC,gBACnB7lC,WAAS,EACTG,cAAY,EACZC,gBAAiB,GACjBN,eAAgBrL,EAAO9wB,MACvBq9B,cAAe,kBACX,gBAAC,GAAD,CACIvrC,QAASA,EACT0zC,OAAQuP,EAAYvP,OACpBlU,eAAgBR,EAAOqxC,wBACvB9vB,YAAavhB,EAAOsxC,eACpBnlC,cAAe,GACfhK,QAAS,kBAAM,EAAKivC,gBACpBxrB,SAAO,Y,GAhDHvsB,aAyDnBoH,GAAeX,IAAS,WACjC,OAAOkB,KAAWC,OAAO,CACrB/xB,MAAO,CACHikC,YAAa,EACbnJ,kBAAmB,GACnBpH,gBAAiB,GACjB9B,SAAU,IACVga,UAAW,KAEfw2B,eAAgB,CACZvnC,aAAc,KAElBsnC,wBAAyB,CACrBnzC,MAAO,OACPG,OAAQ,aAKLkD,gBAAU0vC,I,u/BC7EJM,G,kCACjB,WAAYlxC,GAAyB,IAAD,uBAChC,cAAMA,IACDvM,MAAQ,CACT09C,YAAa,EACbC,QAASpxC,EAAM0yB,WAAa,GAAK,GAJL,E,8CAQb,IAAD,SAC6CpgC,KAAK0N,MAA7DM,EADW,EACXA,MAAO+B,EADI,EACJA,MAAOqwB,EADH,EACGA,WAAYhyB,EADf,EACeA,SAAU2wC,EADzB,EACyBA,iBADzB,EAEa/+C,KAAKmB,MAA7B09C,EAFW,EAEXA,YAAaC,EAFF,EAEEA,QAEpB,OACI,oCACI,kBAAC/wC,GAAA,EAAD,CACIC,MAAO,CAAC,CAACgG,gBAAiBjE,EAAOxE,MAAO,OAAQgV,OAAQ,IAAKvS,GAC7D0P,SAAU,SAACnQ,GAAY,IAAD,EACSA,EAAOoQ,YAAYpQ,OAAvCsjB,EADW,EACXA,EAAGnlB,EADQ,EACRA,OAAQH,EADA,EACAA,MAClB,EAAK0I,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B09C,YAAatzC,EAAOuzC,QAASjuB,EAAInlB,OAGlE0C,IAES,IAAb0wC,GACG,kBAAC,GAAD,CACI9wC,MAAO,CACH4F,SAAU,WACVwF,IAAK0lC,GAAW1e,EAAa,GAAK,GAClC70B,MAAOszC,EACPt+B,OAAQ,IAEZxQ,MAAOA,EACPmwB,aAAc6e,GAAoB,SAClC3e,WAAYA,S,GAlCI15B,IAAMwN,W,8aC2B9C,SAAS8qC,KACL,OAAO,gBAACjxC,GAAA,EAAD,CAAMC,MAAO,CAACtC,OAAQ,M,IAG3BuzC,G,qLACFC,kBAAoBx4C,c,sDAELv1B,QACiBpH,IAAxBi2B,KAAK0N,MAAMm1B,UAAwB7iC,KAAK0N,MAAMm1B,SAAS1xD,K,+BAGrD,IAAD,SACiB6uB,KAAK0N,MAApB72B,EADF,EACEA,MAAO9G,EADT,EACSA,KACRs9B,EAASS,GAAaj3B,GAEtB2nD,EAAWzuD,GAAQA,EAAK1B,QAAU0B,EAAK1B,QAAQW,UAAY,IAAMe,EAAK1B,QAAQY,SAAW,GAEzFZ,EAAO,MAAG0B,OAAH,EAAGA,EAAM1B,QAEtB,OACI,gBAAC+uC,GAAA,EAAD,CAAYpP,MAAOX,EAAO8xC,WAAY5hC,sBAAuBlQ,EAAO0c,cAAeq1B,eAAe,SAC9F,gBAAC,GAAD,CAAYpxC,MAAOX,EAAOkI,OAAQxF,MAAOl5B,EAAMu1B,QAC3C,gBAAC,GAAD,CACI/9B,QAAO,MAAE0B,OAAF,EAAEA,EAAM1B,QACfgiC,KAAM,IACN4iB,SAAO,EACPplB,eAAgBR,EAAOshB,gBACvBnV,cAAe,IAEdzpC,GACG,gBAAC,GAAD,CACI6sE,kBAAmB,SAACyC,GvKiL3B,IAACl/B,EuKhLWrV,GAAMt5B,UvKgLjB2uC,EuKhLwDk/B,EvKgLzB,SAAO7tE,EAAUC,GAAjB,mCAAA/G,EAAAC,OAAA,uDAC/C+G,EAAQD,IAAWE,KAAKD,MADuB,WAAAhH,EAAA,MAE9BF,EAAe,mBAAoB,MAAO,CAAC80E,SAAU,cAAe,GAAI5tE,IAF1C,UAE/C/F,EAF+C,OAI/Cy3B,EAAO,kBAAM5xB,EARiC,CACpD1D,KAAMsC,EAAqBmvE,sBASvB5zE,EAASJ,SAAWhD,EAAeyK,GANc,wBAO3CnB,EAAWlG,EAAuCM,KACjDuzE,GAR0C,EAQvB3tE,GAAnB2tE,SAAUC,EARgC,EAQhCA,MARgC,gBAAA/0E,EAAA,YAAAA,EAAA,MAYdqB,MAAMo0C,EAAMsR,MAZE,2BAYIiuB,OAZJ,oDAYvCC,EAZuC,mBAAAj1E,EAAA,MAevCqB,MAAM0zE,EAAO,CACf70E,OAAQ,MACRE,KAAM60E,KAjBmC,2BAAAj1E,EAAA,MAqBrBF,EAAe,kBAAmB,OAAQ,GAAI,CAACg1E,YAAW9tE,IArBrC,SAqBvCkuE,EArBuC,QAuB/Br0E,SAAWhD,EAAeyK,IAC9B6sE,EAAYD,EAAwC3zE,KACnDiB,EAAU2yE,EAAV3yE,OACPsE,GAnCUvE,EAmCgBC,EAnC+B,CACrEY,KAAMsC,EAAqBi5B,mBAC3Bp8B,gBAkCem2B,IA3BsC,kDA6B7Cj7B,QAAQD,MAAR,MACAC,QAAQD,MAAM,oEACdk7B,IA/B6C,gCAiC9CA,IAjC8C,kCAThC,IAACn2B,IAS+B,mCuK3KrC,gBAACqiC,GAAA,EAAD,CAAMtB,MAAOX,EAAOt+B,MAAOyvD,GAC1BnwD,GACG,gBAAC,GAAD,CACIw/B,eAAgBR,EAAOyyC,oBACvB9xC,MAAOX,EAAO1/B,WACdA,WAAYU,EAAQV,cAKhC,gBAACogC,GAAA,EAAD,CAAMC,MAAOX,EAAOviC,MAChB,gBAACwkC,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,eACjC3C,GAAQ,gBAACqgC,GAAA,EAAD,CAAmBC,KAAK,QAAQrC,MAAOX,EAAO0yC,iBAAkBhwC,MAAOl5B,EAAMu1B,SAEvF,gBAAC,GAAD,CACI2xC,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,gBACd6qE,aAAY,MAAExtE,OAAF,EAAEA,EAAM4D,MACpB2yC,QAAUv2C,GAAQ,gBAACu/B,GAAA,EAAD,CAAMtB,MAAOX,EAAO2yC,UAAWjwE,EAAK4D,aAAkB5J,EACxE+zE,QAAQ,IAEZ,gBAACkB,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,eACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAASlB,UACvBm5C,QAASj4C,GAAW,gBAACylE,GAAD,CAAe9lC,MAAOX,EAAO2yC,SAAU7vE,KAAM9B,EAAQlB,YACzE4vE,YAAa,SAAC/gD,EAAaikD,EAAQpd,GAAtB,OACT,gBAAC6T,GAAD,CACI3iC,IAAK,EAAKmrC,kBACV/uE,KAAM6rB,EACN6R,eAAgBR,EAAO6yC,wBACvBptC,WAAYzF,EAAO8yC,eACnBtd,SAAU,SAAC11D,EAAkBizE,GACzBvd,EAAS11D,GAAa6uB,EAAOokD,GAAc,UAIvDpC,aAAc,iCAAM,EAAKkB,kBAAkBr4C,cAA7B,EAAM,EAAgC4L,SACpDv3B,MAAO,SAAC/N,GAAD,OAAqB,EAAKkzE,eAAe,CAAClzE,iBAErD,gBAAC6xE,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,eACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAASqK,YACvB4tC,QACIj4C,GACI,gBAAC,GAAD,CAAsB2/B,MAAOX,EAAO2yC,SAAUhkB,YAAa3tD,EAAQqK,cAG3EklE,cACIvvE,GACC,SAAC00C,GAAD,OACG,gBAAC,GAAD,CACIrqC,YAAarK,EAAQqK,YACrB4wC,SAAU,SAACg3B,GAAD,OAAqB,EAAKD,eAAe,CAAC3nE,YAAa4nE,KACjE9nC,OAAQuK,OAKxB,gBAACi8B,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,UACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAASoK,OACvB6tC,QACIj4C,GACI,gBAAC,GAAD,CACIoK,OAAQpK,EAAQoK,OAChB6wC,SAAU,SAAC7wC,GAAD,OAAoB,EAAK4nE,eAAe,CAAC5nE,cAI/DolE,SAAS,IAEb,gBAACmB,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,eACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAASP,KACvBw4C,QACIj4C,GACI,gCACI,gBAAC,GAAD,CAAY0U,KAAM1U,EAAQP,KAAM0kE,UAAU,IACzB,SAAhBnkE,EAAQP,MACL,gBAAC,GAAD,CACIE,WAAaK,EAA6BL,WAC1C60D,SAAU,SAAC70D,GAAD,OAA6B,EAAKqyE,eAAe,CAACryE,gBAC5DiT,UAAU,EACVnE,YAAY,EACZqqC,YAAa9Z,EAAOkzC,kBAGX,WAAhBlyE,EAAQP,MACL,gBAAC,GAAD,CACIK,OAASE,EAA+BF,OACxC+qE,SAAU,SAAC/qE,GAAD,OAAqB,EAAKkyE,eAAe,CAAClyE,eAMxE0vE,SAAS,IAEb,gBAACmB,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,qBACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAAShB,gBACvBi5C,QACI,gBAAC,GAAD,CACIn1C,OAAM,MAAE9C,OAAF,EAAEA,EAAShB,gBACjBw1D,SAAU,SAACx1D,GAAD,OAA+B,EAAKgzE,eAAe,CAAChzE,qBAC9D21D,WAAW,IAGnB6a,SAAS,IAEb,gBAACmB,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,aACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAASb,UACvB84C,QACIj4C,GACI,gBAAC,GAAD,CACIb,UAAWa,EAAQb,UACnBq1D,SAAU,SAACr1D,GAAD,OAAyB,EAAK6yE,eAAe,CAAC7yE,eACxDw1D,WAAW,IAIvB6a,SAAS,IAEb,gBAACmB,GAAD,MACA,gBAAC,GAAD,CACIjB,OAAQhuE,EACRgsB,MAAOtpB,KAAKC,EAAE,mBACd6qE,aAAY,MAAElvE,OAAF,EAAEA,EAASX,UACvB+vE,UAAWnjE,GACXgsC,QACIj4C,GACI,gBAAC,GAAD,CACImwB,MAAK,MAAEnwB,OAAF,EAAEA,EAASX,UAChBquB,MAAO,SAACuzB,GAAD,OACA78C,KAAKC,EAAL,iBAAwB48C,EAAKz8C,MAD7B,KACyCJ,KAAKC,EAAL,kBACtB48C,EAAKnM,OAFxB,OAQnB45B,YAAa,SACT/gD,EACA9zB,EACA26D,GAHS,OAKT,gBAAC,GAAD,CACIn1D,UAAWsuB,EACX6mC,SAAU,SAACn1D,GAAD,OAAoCm1D,EAASn1D,IACvDsgC,MAAO,CAACzC,MAAO,WAGvBrwB,MAAO,SAACxN,GAAD,OAAoC,EAAK2yE,eAAe,CAAC3yE,iBAEpE,gBAACsxE,GAAD,MACA,gBAACwB,GAAD,CACIt3C,SAAU7M,GAAcu8C,SACxBrrE,cAAa,MAAEc,OAAF,EAAEA,EAASd,cACxBkzE,QAAS,SAAClzE,GAAD,OAAoC,EAAK8yE,eAAe,CAAC9yE,mBAClEsJ,MAAOA,IAEX,gBAACmoE,GAAD,MACA,gBAACwB,GAAD,CACIt3C,SAAU7M,GAAcy8C,YACxBvrE,cAAa,MAAEc,OAAF,EAAEA,EAASd,cACxBkzE,QAAS,SAAClzE,GAAD,OAAoC,EAAK8yE,eAAe,CAAC9yE,mBAClEsJ,MAAOA,IAEX,gBAACmoE,GAAD,MACA,gBAACwB,GAAD,CACIt3C,SAAU7M,GAAc28C,KACxBzrE,cAAa,MAAEc,OAAF,EAAEA,EAASd,cACxBkzE,QAAS,SAAClzE,GAAD,OAAoC,EAAK8yE,eAAe,CAAC9yE,mBAClEsJ,MAAOA,U,GA3ND6vB,aAgPxB85C,GAZiB5+C,cAAQ,SAACT,GAAD,MAAsB,CACjD70B,OAAQ60B,EAAM9yB,QAAQ/B,OACtBgwB,kBAAmB6E,EAAM9yB,QAAQiuB,qBAUZ4T,EACrB,YAA+G,IAA7GhH,EAA4G,EAA5GA,SAAU37B,EAAkG,EAAlGA,cAAekzE,EAAmF,EAAnFA,QAASn0E,EAA0E,EAA1EA,OAAQgwB,EAAkE,EAAlEA,kBAAmBzlB,EAA+C,EAA/CA,MACrD2nB,GAAqB,MAAbjxB,OAAA,EAAAA,EAAe1D,QAAO,SAAC0C,GAAD,OAAO+vB,EAAkBmP,IAAIl/B,EAAEwwB,UAAYmM,OAAa,GAC5F,OACI,gBAAC,GAAD,CACI60C,OAAQxwE,EACRwuB,MAAOtpB,KAAKC,EAAL,mBAA0Bw2B,GACjCq0C,aAAchwE,EACd+4C,QACI9nB,EAAMj0B,OAAS,EACX,gBAAC,GAAD,CACIi0B,MAAOA,EACPzC,MAAO,SAACuzB,GAAD,OAAyB78C,KAAKC,EAAL,aAAoB48C,EAAKvyB,QAAzB,YAGpC,gBAACuS,GAAA,EAAD,CAAMtB,MAAO,CAAC+B,MAAOl5B,EAAMm1B,YAAav5B,KAAKC,EAAE,6BAGvDqqE,YAAa,SAAC/gD,EAAwB9zB,EAAO26D,GAAhC,OACT,gCACKv2D,EACIzC,QAAO,SAAC0C,GAAD,OAAOA,EAAE28B,UAAYA,KAC5Bl/B,KAAI,SAAC2lE,GAAD,OACD,gBAAC,GAAD,CACI7lE,IAAG,WAAa6lE,EAAMriE,GACtBqiE,MAAOA,EACP3zC,MAAOA,EAAMpuB,MAAK,SAACrB,GAAD,OAAOA,EAAEwwB,SAAW4yC,EAAMriE,OAAOmvB,GAAekzC,GAClE9M,SAAU,SAAC6d,GACP,IAAMC,EAAa3kD,EACdnyB,QAAO,SAAC0C,GAAD,OAAOA,EAAEwwB,SAAW4yC,EAAMriE,MACjCk5B,OAAO,CAACk6C,IACb7d,EAAS8d,IAEb3yC,MAAO,CAAC2C,eAAgB,GAAIpF,MAAO,eAKvDrwB,MAAO,SAAC3N,GAAD,OAAoCkzE,EAAQlzE,SAMtDugC,GAAeX,IAAS,SAACt2B,GAClC,OAAOw3B,KAAWC,OAAO,CACrB6wC,WAAY,CACR5zC,MAAO,QAEXwe,cAAe,CACXxe,MAAO,OACPoD,WAAY,UAIhB4G,OAAQ,CACJ5G,WAAY,SACZkF,cAAe,IAEnB9kC,KAAM,CACF8gC,SAAU,GACVE,MAAOl5B,EAAMi1B,UACbkE,UAAW,IAEfriC,WAAY,CACRkiC,SAAU,GACVE,MAAOl5B,EAAMi1B,WAEjBg0C,oBAAqB,CACjBnvC,eAAgB,GAEpBge,gBAAiB,CACb3a,gBAAiBn9B,EAAMy1B,gBACvByK,YAAalgC,EAAMs1B,eACnBmL,YAAa,GAEjBspC,gBAAiB,CACbr1C,MAAO,GACPG,OAAQ,GACR0L,aAAc,GACdE,YAAa,EACbP,YAAa,cACb6jC,aAAc,EACdj5B,iBAAkB,EAClB5R,MAAO,QAIXjlC,KAAM,CACFygC,MAAO,MACP4C,SAAU,IACVwH,WAAY,GACZ9B,cAAe,IAEnBksC,iBAAkB,CACdnsC,SAAU,WACVwF,IAAK,GACLD,KAAM,EACNM,MAAO,GAEXh3B,MAAO,CACHotB,SAAU,GACVE,MAAOl5B,EAAMwM,KACb4uB,aAAc,GACd1G,MAAO,QAGXy0C,SAAU,CACNjwC,MAAOl5B,EAAMwM,MAEjBk9D,gBAAiB,CACbvwC,UAAW,IAEfkwC,wBAAyB,CACrBlwC,UAAW,GACXiC,aAAc,IAElBkuC,eAAgB,CACZz0C,OAAQ,GACRmE,SAAU,GACVuH,aAAc,GACdpD,gBAAiBn9B,EAAMs1B,eACvB4D,MAAOl5B,EAAMwM,WAKVurB,gBAAUqwC,I,8aCnZzB,IAAM/uC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjDpxB,KAAMoxB,EAAM9yB,QAAQ0B,SAOlBmqB,G,oJACmB,IAAD,OAChB8F,KAAK0N,MAAM2B,WAAW6N,YAAY,SAAS,kBAAM,EAAKzJ,aACtDzT,KAAKyT,Y,gCAIJzT,KAAK0N,MAAMl8B,UxKqLqB,SAAOA,EAAUC,GAAjB,qBAAA/G,EAAAC,OAAA,uDAC/B+G,EAAQD,IAAWE,KAAKD,MADO,WAAAhH,EAAA,MAEdF,EAAe,UAAW,MAAO,GAAI,GAAIkH,IAF3B,QAE/B/F,EAF+B,QAGxBJ,SAAWhD,EAAeyK,KAC7BnB,EAAWlG,EAAuCM,KAClD8D,EAAOtB,EAAiBoD,GAC9BL,EAASW,EAAiBpC,KANO,iE,+BwKlLd,IAAD,EACOiwB,KAAK0N,MAAvB39B,EADW,EACXA,KAAMyB,EADK,EACLA,SAEb,OACI,gBAAC,GAAD,CAAem8B,gBAAc,GACzB,gBAAC,GAAD,CACI59B,KAAMA,EACN8yD,SAAU,SAAC1xD,GAAD,OAAaK,ExKmGX,SAACL,GAAD,OAA4C,SAAOK,EAAUC,GAAjB,uBAAA/G,EAAAC,OAAA,uDAClE+G,EAAQD,IAAWE,KAAKD,MACxB5D,EAFkE,SAE3D2D,IAAWpD,QAAQ0B,OAFwC,SAE3D,EAAyB1B,cAFkC,EAE3D,EAAkCP,KAEzChB,EAAiCsB,EAAiC+C,EAAQrD,GAJR,WAAApD,EAAA,MAKjDF,EAAe,WAAY,QAAS,GAAIsC,EAAK4E,IALI,cAM3DnG,SAAWhD,EAAeyK,GAAIxB,EAASN,EAAwBC,IACvEK,EAX6D,CAClE1D,KAAMsC,EAAqBywE,6BAG6C,6DwKnGJC,CAAiB3vE,Y,GAjB3Du1B,aAwBfwJ,MAAetB,aAAU1U,K,kbC3BlC6mD,G,yIACqB,IAAD,EACgD/gD,KAAK0N,MAAhEj1B,EADW,EACXA,OAAQo1B,EADG,EACHA,eAAgBulB,EADb,EACaA,UAAWv8C,EADxB,EACwBA,MAAUi7B,EADlC,wDAGZa,EAAkB,WAAXl6B,EAAsB,SAAsB,SAAXA,EAAoB,YAAS1O,EAC3E,OACI,gBAACgkC,GAAA,EAAD,CAAMC,MAAO,CAAC,CAACS,cAAe,MAAOE,WAAY,UAAWd,IACvD8E,GAAQ,gBAAC9B,EAAA,EAAD,CAAa9hC,KAAM4jC,EAAMtC,KAAM,GAAIN,MAAOl5B,EAAMm1B,UAAWgC,MAAOolB,IAC3E,gBAAC9jB,GAAA,EAAD,QAAUwC,EAAV,CAAsB9D,MAAO,CAAC,CAACyO,WAAY9J,EAAO,GAAK,GAAIb,EAAW9D,SACjEv7B,KAAKC,EAAL,WAAkB+F,S,GATTiuB,aAgBfkI,gBAAUmyC,I,8aCLzB,SAAS/B,KACL,OAAO,gBAACjxC,GAAA,EAAD,CAAMC,MAAO,CAACtC,OAAQ,M,IAG3Bs1C,G,yIACQ,IAAD,EAC+BhhD,KAAK0N,MAAlC72B,EADF,EACEA,MAAOxI,EADT,EACSA,QAAS4yE,EADlB,EACkBA,UACjB5zC,EAASS,GAAaj3B,GAEtB2nD,EAAWnwD,EAAUA,EAAQW,UAAY,IAAMX,EAAQY,SAAW,GAExE,OACI,gBAACmuC,GAAA,EAAD,CAAYpP,MAAOX,EAAO8xC,WAAY5hC,sBAAuBlQ,EAAO0c,cAAeq1B,eAAe,SAC9F,gBAAC,GAAD,CAAYpxC,MAAOX,EAAOkI,OAAQxF,MAAOl5B,EAAMu1B,QAC3C,gBAAC,GAAD,CACI/9B,QAASA,QAAWtE,EACpBsmC,KAAM,IACN4iB,SAAO,EACPplB,eAAgBR,EAAOshB,gBACvBnV,cAAe,MAEjBnrC,GACE,gBAAC+hC,GAAA,EAAD,CAAmBC,KAAK,QAAQN,MAAOl5B,EAAMi1B,UAAWkC,MAAOX,EAAO0yC,mBAE1E,gBAACzwC,GAAA,EAAD,CAAMtB,MAAOX,EAAOt+B,MAAOyvD,GAC3B,gBAAC,GAAD,CACI3wB,eAAgBR,EAAOyyC,oBACvB9xC,MAAOX,EAAO1/B,WACdA,YAAmB,MAAPU,OAAA,EAAAA,EAASV,aAAc,OAEtCszE,GAGL,gBAAClzC,GAAA,EAAD,CAAMC,MAAOX,EAAOviC,MAChB,gBAAC,GAAD,CACIizE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,eACd4zC,QAASj4C,EAAU,gBAACylE,GAAD,CAAe9lC,MAAOX,EAAO2yC,SAAU7vE,KAAM9B,EAAQlB,YAAgB,iCACxF0wE,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACIE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,eACd4zC,QACIj4C,EACI,gBAAC,GAAD,CAAsB2/B,MAAOX,EAAO2yC,SAAUhkB,YAAa3tD,EAAQqK,cAEnE,iCAGRmlE,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACIE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,UACd4zC,QAASj4C,EAAU,gBAAC,GAAD,CAAiB2/B,MAAOX,EAAO2yC,SAAUvnE,OAAQpK,EAAQoK,SAAa,iCACzFolE,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACIE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,eACd4zC,QACIj4C,EACI,gCACI,gBAACihC,GAAA,EAAD,CAAMtB,MAAOX,EAAO2yC,UAAWvtE,KAAKC,EAAL,YAAmBrE,EAAQP,OACzC,SAAhBO,EAAQP,MACL,gCACMO,EAA6BL,WAAWhE,KAAI,SAACwjB,GAAD,OAC1C,gBAAC8hB,GAAA,EAAD,CAAMxlC,IAAG,sBAAwB0jB,GAC5B/a,KAAKC,EAAL,cAAqB8a,QAKrB,WAAhBnf,EAAQP,MACL,gBAACwhC,GAAA,EAAD,CAAMtB,MAAOX,EAAO2yC,UACfvtE,KAAKC,EAAL,WAAmBrE,EAA+BF,UAK/D,iCAGR0vE,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACIE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,qBACd4zC,QACIj4C,EACI,gBAAC,GAAD,CACImwB,MAAOnwB,EAAQhB,gBACf0uB,MAAO,SAACuzB,GAAD,OAAkB78C,KAAKC,EAAL,mBAA0B48C,MAGvD,iCAGRuuB,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACIE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,aACd4zC,QACIj4C,EACI,gBAAC,GAAD,CACImwB,MAAOnwB,EAAQb,UACfuuB,MAAO,SAACuzB,GAAD,OAAkB78C,KAAKC,EAAL,iBAAwB48C,MAGrD,iCAGRuuB,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACIE,OAAQ1vE,EACR0tB,MAAOtpB,KAAKC,EAAE,mBACd4zC,QACIj4C,EACI,gBAAC,GAAD,CACImwB,MAAOnwB,EAAQX,UACfquB,MAAO,SAACuzB,GAAD,OACA78C,KAAKC,EAAL,iBAAwB48C,EAAKz8C,MAD7B,KACyCJ,KAAKC,EAAL,kBACtB48C,EAAKnM,OAFxB,OAOX,iCAGR06B,SAAS,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACI30C,SAAU7M,GAAcu8C,SACxBrrE,eAAsB,MAAPc,OAAA,EAAAA,EAASd,gBAAiB,OAE7C,gBAAC,GAAD,MACA,gBAAC,GAAD,CACI27B,SAAU7M,GAAcy8C,YACxBvrE,eAAsB,MAAPc,OAAA,EAAAA,EAASd,gBAAiB,OAE7C,gBAAC,GAAD,MACA,gBAAC,GAAD,CAAkB27B,SAAU7M,GAAc28C,KAAMzrE,eAAsB,MAAPc,OAAA,EAAAA,EAASd,gBAAiB,a,GApJnFm5B,aAsKpB85C,GAViB5+C,cAAQ,SAACT,GAAD,MAAsB,CACjD7E,kBAAmB6E,EAAM9yB,QAAQiuB,qBASZ4T,CACrBtB,cACI,YAA8F,IAA5F1F,EAA2F,EAA3FA,SAAU37B,EAAiF,EAAjFA,cAAe+uB,EAAkE,EAAlEA,kBAAmBzlB,EAA+C,EAA/CA,MACpC2nB,GAAqB,MAAbjxB,OAAA,EAAAA,EAAe1D,QAAO,SAAC0C,GAAD,OAAO+vB,EAAkBmP,IAAIl/B,EAAEwwB,UAAYmM,OAAa,GACtFmE,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,CACIknE,OAAQxwE,EACRwuB,MAAOtpB,KAAKC,EAAL,mBAA0Bw2B,GACjCod,QACI9nB,EAAMj0B,OAAS,EACX,gBAAC,GAAD,CACIi0B,MAAOA,EACPzC,MAAO,SAACuzB,GAAD,OAAyB78C,KAAKC,EAAL,aAAoB48C,EAAKvyB,QAAzB,YAGpC,gBAACuS,GAAA,EAAD,CAAMtB,MAAOX,EAAO2yC,UAAWvtE,KAAKC,EAAE,6BAG9CmrE,SAAS,QAOvB/vC,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB6wC,WAAY,CACR5zC,MAAO,QAEXwe,cAAe,CACXxe,MAAO,OACPoD,WAAY,UAGhB4G,OAAQ,CACJ5G,WAAY,UAGhB7jC,KAAM,CACFygC,MAAO,MACP4C,SAAU,IACVwH,WAAY,GACZ9B,cAAe,IAEnBksC,iBAAkB,CACdnsC,SAAU,WACVuF,KAAM,EACNM,MAAO,EACPL,IAAK,KAETrqC,KAAM,CACF8gC,SAAU,GACVE,MAAOl5B,EAAMi1B,UACbkE,UAAW,GACXtE,OAAQ,IAEZ/9B,WAAY,CACRkiC,SAAU,GACVE,MAAOl5B,EAAMi1B,WAEjBg0C,oBAAqB,CACjBp0C,OAAQ,GACRsE,UAAW,GAEf2e,gBAAiB,CACb5X,YAAalgC,EAAMi1B,UACnBwL,YAAa,EACbtD,gBAAiBn9B,EAAMy1B,iBAE3B0zC,SAAU,CACNjwC,MAAOl5B,EAAMwM,WAKVurB,gBAAUoyC,I,u/BC7PnBE,G,kCACF,WAAYxzC,GAAkC,IAAD,uBACzC,cAAMA,IACDvM,MAAQ,CAACrM,OAAO,GAFoB,E,8CAKnC,IAAD,SACsDkL,KAAK0N,MAAzD72B,EADF,EACEA,MAAOxI,EADT,EACSA,QAAS8yE,EADlB,EACkBA,QAAS5lC,EAD3B,EAC2BA,SAAazJ,EADxC,iDAEEhd,EAASkL,KAAKmB,MAAdrM,MACDuY,EAASS,GAAaj3B,GAE5B,OACI,kBAACyjC,GAAD,QACQxI,EADR,CAEI8H,cAAe,SAACmJ,GAAD,OACX10C,EACI,oCACI,kBAACihC,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MACf5Q,KAAKC,EAAE,eAAgB,CAACqF,UAAW1J,EAAQW,UAAWgJ,SAAU3J,EAAQY,YAE7E,kBAACqgC,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MACf5Q,KAAKC,EAAE,wBAAyB,CAC7BqF,UAAW1J,EAAQW,UACnBgJ,SAAU3J,EAAQY,YAG1B,kBAACsgC,GAAA,EAAD,CACIvB,MAAOX,EAAO+zC,eACd5xC,QAAS,kBAAM,EAAKyE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BrM,OAAQA,OAErD,kBAAC,KAAD,CACI+Y,eAAgBR,EAAO+c,kBACvBD,QAASr1B,EACT0a,QAAS,kBAAM,EAAKyE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8BrM,OAAQA,QAEzD,kBAACwa,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MAAO5Q,KAAKC,EAAE,kBAEtC,kBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAOkN,sBAChB,kBAAC,GAAD,CACIl3B,KAAM5Q,KAAKC,EAAE,UACb88B,QAAS,kBAAMuT,KACfvL,KAAK,iBACLxJ,MAAOX,EAAOmN,aACd/C,UAAWpK,EAAOoN,aAEtB,kBAAC,GAAD,CACIp3B,KAAM5Q,KAAKC,EAAE,kBACb88B,QAAS,WACLuT,IACIo+B,GACCr2C,GAAMt5B,SAA6B0tB,GAAkBiiD,GAAS,IAC/DrsD,GAAQgW,GAAMt5B,SAA6B8sB,GAAajwB,EAAQf,KAChEiuC,GAAUA,EAASzmB,IAE3B0iB,KAAK,iBACLxJ,MAAO,CAACX,EAAOmN,aAAcnN,EAAOqN,eACpCjD,UAAWpK,EAAOoN,eAK9B,6C,GA7DU/T,IAAMwN,WAqElCpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBjrB,KAAM,CACFwsB,SAAU,GACVC,UAAW,UACXC,MAAOl5B,EAAMwM,MAEjB+9D,eAAgB,CACZ71C,MAAO,OACPyE,UAAW,EACXvB,cAAe,MACfE,WAAY,UAEhByb,kBAAmB,CACfxa,QAAS,EACT6M,WAAY,EACZ/F,YAAa,GAGjB6D,qBAAsB,CAClBhP,MAAO,OACPkD,cAAe,MACfuB,UAAW,IAEfwK,aAAc,CACVjM,KAAM,EACNyH,iBAAkB,EAClBrF,eAAgB,GAEpB8J,WAAY,CACR5K,SAAU,IAEd6K,cAAe,CACX1G,gBAAiBn9B,EAAM3O,YAKpB0mC,gBAAUsyC,I,qkBCrBzB,IAAMG,GAAezyC,cACjB,YAA0E,IAAxEvrB,EAAuE,EAAvEA,KAAMsvB,EAAiE,EAAjEA,KAAMnD,EAA2D,EAA3DA,QAASuuC,EAAkD,EAAlDA,MAAOlnE,EAA2C,EAA3CA,MACpBw2B,EAASS,GAAaj3B,GAC5B,OACI,gBAAC04B,GAAA,EAAD,CAAkBvB,MAAOX,EAAOzpB,OAAQ41B,cAAe,IAAMhK,QAASuuC,OAAQh0E,EAAYylC,GACrFmD,GACG,gBAAC5E,GAAA,EAAD,CAAMC,MAAO,CAACX,EAAOi0C,UAAWvD,EAAQ1wC,EAAOk0C,eAAiB,MAC1DxD,GAAS,gBAACjiC,GAAA,EAAD,CAAe/sC,KAAM4jC,EAAM3E,MAAOX,EAAOm0C,iBAG5D,gBAAClyC,GAAA,EAAD,CAAMtB,MAAOX,EAAOksC,YAAal2D,OAM3CyqB,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACP3C,MAAO,OACPkD,cAAe,MACfD,eAAgB,SAChBmC,eAAgB,IAEpB/sB,OAAQ,CACJ2nB,MAAO,GACPyK,iBAAkB,GAClBvH,cAAe,SACfE,WAAY,SACZH,eAAgB,UAEpB+qC,WAAW,IACP1pC,SAAU,GACVkC,cAAe,YACfC,cAAe,GACfjC,MAAOl5B,EAAMi1B,UACbgE,UAAW,UACRd,IAEPsyC,UAAW,CACPzxC,SAAU,GACVtE,MAAO,GACPG,OAAQ,GACR8C,eAAgB,SAChBG,WAAY,SACZyI,aAAc,GACdnF,aAAc,EACd+B,gBAAiB,SAErButC,eAAgB,CACZ7kC,QAAS,GACT1I,gBAAiB,cACjB+C,YAAalgC,EAAMi1B,UACnBwL,YAAa,GAEjBkqC,cAAe,CACX3xC,SAAU,GACVE,MAAOl5B,EAAMo1B,mBAKV2C,iBApJf,SAA0BlB,GAA4C,IAI9Ds3B,EAHG32D,EAA8Cq/B,EAA9Cr/B,QAASozE,EAAqC/zC,EAArC+zC,UAAW5jD,EAA0B6P,EAA1B7P,OAAQsjD,EAAkBzzC,EAAlByzC,QAAStqE,EAAS62B,EAAT72B,MACtCw2B,EAASS,GAAaj3B,GAItB6qE,EACF,gBAAC1iB,GAAD,CACI3wD,QAASA,EACT4rC,UAAW,SAAC2R,GAAD,OACP,gBAACy1B,GAAD,CAActD,OAAQ1vE,EAASgV,KAAM5Q,KAAKC,EAAE,wBAAyBigC,KAAK,QAAQnD,QAASoc,OAKjG+1B,EACF,gBAAC7yB,GAAD,CACI9B,OAAQ3+C,EACRg9C,WAAYZ,GAAiBwC,eAC7BhT,UAAW,SAAC2R,GAAD,OACP,gBAACy1B,GAAD,CAActD,OAAQ1vE,EAASgV,KAAM5Q,KAAKC,EAAE,yBAA0BigC,KAAK,SAASnD,QAASoc,OAKzG,GAAI61B,EAAW,CACX,IAAMG,EACF,gBAACP,GAAD,CACItD,OAAQ1vE,EACRgV,KAAM5Q,KAAKC,EAAE,uBACbigC,KAAK,OACLnD,QAAS,kBAAM3R,GAAUyJ,GAASzJ,MAQpCgkD,EAAa,iCAEbC,EACF,gBAAC,GAAD,CACIzzE,QAASA,EACT8yE,QAASA,EACT5lC,SAAU,SAACzmB,GACHA,GAAOiS,MAEfkT,UAAW,SAAC2R,GAAD,OACP,gBAACy1B,GAAD,CACItD,OAAQ1vE,EACRgV,KAAM5Q,KAAKC,EAAE,0BACbigC,KAAK,QACLnD,QAASoc,OAMzBoZ,EACI,gCACK4c,EACAC,EACAC,EACAH,QAIT3c,EACI,gCACK0c,EACAC,GAKb,OAAO,gBAAC5zC,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAAY82B,M,m/BCrF3C,IAAM90B,GAAiBtO,cAAQ,iBAAO,MAahCzH,G,kCACF,WAAYuT,GAA4B,IAAD,uBACnC,cAAMA,IACDvM,MAAQ,CAAC9yB,QAAS,KAAMozE,WAAW,EAAO5jD,OAAQ,KAAMsjD,QAAS,MAFnC,E,sDAMnC,IAAMt2E,EAASm1B,KAAK0N,MAAM9G,MAAM/7B,OAChC,OAAOA,GAAkE,K,0CAGxD,IAAD,SACem1B,KAAK0N,MAA7Bl8B,EADS,EACTA,SADS,EACC69B,WAEN6N,YAAY,SAAS,WAAO,IAC5B5vC,EAAM,EAAKy0E,iBAAXz0E,IACHA,GAAQ,EAAK6zB,MAAM9yB,SAAW,EAAK8yB,MAAM9yB,QAAQf,KAAOA,GACvDkE,E7KmLW,SAAClE,GAAD,OAAoE,SAC5FkE,EACAC,GAF4F,qBAAA/G,EAAAC,OAAA,uDAItF+G,EAAQD,IAAWE,KAAKD,MAJ8D,WAAAhH,EAAA,MAKrEF,EAAe,YAAY8C,EAAM,MAAO,GAAI,GAAIoE,GAAO,IALc,WAKtF/F,EALsF,QAM/EJ,SAAWhD,EAAeyK,GANqD,uBAOlFnB,EAAWlG,EAAuCM,KAClD+1E,EDtEH,OADsCl1E,ECuEqB+E,GDtElE,IAEIxD,QAASxB,EAAoBC,EAAIuB,WCqEjCmD,EAASa,EAAoB2vE,IAT2D,kBAUjFA,GAViF,gCAYrF,MAZqF,kCD/DzF,IAA0Cl1E,IC+D+C,yB6KnLlDm1E,CAAa30E,IAAevF,MACtD,SAACi6E,GACG,GAAIA,EAAsB,CAAC,IAChB3zE,EAA0C2zE,EAA1C3zE,QAASozE,EAAiCO,EAAjCP,UAAW5jD,EAAsBmkD,EAAtBnkD,OAAQqkD,EAAcF,EAAdE,WACnC,EAAKjuC,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B9yB,UAASozE,YAAW5jD,SAAQsjD,QAASe,UAEnE,EAAKjuC,SAAL,SACO,EAAK9S,OADZ,IAEI9yB,QAAS,KACTozE,WAAW,EACX5jD,OAAQ,KACRsjD,QAAS,gB,+BASd,IAAD,EAC4BnhD,KAAKmB,MAA5C9yB,EADW,EACXA,QAASozE,EADE,EACFA,UAAW5jD,EADT,EACSA,OAAQsjD,EADjB,EACiBA,QAEnC,OACI,gBAAC,GAAD,CAAexzC,gBAAc,GACzB,gBAAC,GAAD,CACIt/B,QAASA,EACT4yE,UACI,gBAAC,GAAD,CAAkB5yE,QAASA,EAASozE,UAAWA,EAAW5jD,OAAQA,EAAQsjD,QAASA,W,GA7C/Ez6C,aAqDbwJ,MAAetB,aAAUzU,K,kbC5DlCgoD,G,yIACqB,IAAD,EAC6DniD,KAAK0N,MAA7Em1B,EADW,EACXA,SAAUxuD,EADC,EACDA,OAAQwC,EADP,EACOA,MAAOswC,EADd,EACcA,YAAaqC,EAD3B,EAC2BA,WAAYC,EADvC,EACuCA,mBAE1C3b,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,CACIH,OAAQ6kB,GACRQ,MAAO,SAACynB,GAAD,OAAe/wC,KAAKC,EAAL,WAAkB8wC,IACxC2F,SAAU90C,EAAS,CAACA,GAAU,GAC9Bm1C,WAAYA,EACZrC,YAAaA,EACbsC,mBAAoBA,EACpBH,SAAU,SAAC5yC,GACHA,EAAOnM,OAAS,GAAKs4D,GAAUA,EAASnsD,EAAO,KAEvD6yC,eAAa,Q,GAjBF7iB,aAuBrBoH,GAAeX,IAAS,WAC1B,OAAOkB,KAAWC,OAAO,OAGdM,gBAAUuzC,ICrCZC,GAA2B,CAAC,OAAQ,QAAS,Y,m/BCM1D,IAAMlyC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD7L,QAAS6L,EAAM7sB,SAASC,aAAa+gB,YASnC+sD,G,kCACF,WAAY30C,GAAoC,IAAD,uBAC3C,cAAMA,IACDvM,MAAQ,CAAC7L,QAASoY,EAAMpY,SAFc,E,8CAM3C,IAAMgtD,EAAetiD,KAAK0N,MAAMpY,QAC1BitD,EAAeviD,KAAKmB,MAAM7L,QAGhB3rB,OAAOC,KAAK04E,GAAcj4C,MAAK,SAACvgC,GAAD,OAAiBw4E,EAAax4E,IAAQy4E,EAAaz4E,OACrFk2B,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B7L,QAAS0K,KAAK0N,MAAMpY,a,+BAG5C,IAAD,SACa0K,KAAK0N,MAA7B72B,EADW,EACXA,MAAUi7B,EADC,kBAEXxc,EAAW0K,KAAKmB,MAAhB7L,QACD+X,EAASS,GAAaj3B,GAEtB2rE,EAAaxiD,KAAKmB,MAAM7L,QAExBmtD,EAAe,SAAC34E,GAAD,OACjB,EAAKmqC,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B7L,QAAQ,SAAKA,GAAN,UAAgBxrB,GAAO04E,EAAW14E,SAE3E,OACI,kBAACwwC,GAAD,QACQxI,EADR,CAEI4G,eAAgB,CAAC,CAACrB,kBAAmB,GAAI1I,WAAY,cAAemD,EAAW4G,gBAC/ED,OAAQ,WACJ,EAAKA,SACD3G,EAAW2G,QAAQ3G,EAAW2G,UAEtCmB,cAAe,SAACmJ,GAAD,OACX,oCACI,kBAACzT,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,kBACnC,kBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOhqB,MAAO5Q,KAAKC,EAAE,6BACjC0vE,GAAyBp4E,KAAI,SAACy1B,GAAD,OAC1B,kBAACsO,GAAA,EAAD,CAAMC,MAAOX,EAAOq1C,cAAe54E,IAAG,qBAAuB21B,GACzD,kBAAC8P,GAAA,EAAD,CAAkBvB,MAAOX,EAAOs1C,oBAAqBnzC,QAAS,kBAAMizC,EAAahjD,KAC7E,kBAAC,KAAD,CACI0qB,QAASq4B,EAAW/iD,GACpBoO,eAAgBR,EAAOu1C,kBACvBpzC,QAAS,kBAAMizC,EAAahjD,MAEhC,kBAAC6P,GAAA,EAAD,CAAMtB,MAAOX,EAAOw1C,gBAAiBpwE,KAAKC,EAAL,uBAA8B+sB,EAA9B,WAEzC,kBAAC6P,GAAA,EAAD,CAAMtB,MAAOX,EAAOy1C,uBACfrwE,KAAKC,EAAL,uBAA8B+sB,EAA9B,qBAIb,kBAACsO,GAAA,EAAD,CAAMC,MAAOX,EAAO/U,SAChB,kBAAC,GAAD,CACIjV,KAAM5Q,KAAKC,EAAE,QACb88B,QAAS,WACLuT,IACAjY,GAAMt5B,SAAS6F,GAAuBie,KAE1CkiB,KAAK,iBACLC,UAAWpK,EAAOksC,WAClBvrC,MAAOX,EAAOzpB,SAElB,kBAAC,GAAD,CACIP,KAAM5Q,KAAKC,EAAE,UACb88B,QAAS,WACLuT,IACA,EAAK9O,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B7L,QAAS,EAAKoY,MAAMpY,YAEtDkiB,KAAK,iBACLC,UAAWpK,EAAOksC,WAClBvrC,MAAOX,EAAOzpB,mB,GAvEV8iB,IAAMwN,WAiFpCpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB7rB,MAAO,CACHotB,SAAU,GACVC,UAAW,OACXmC,aAAc,GACdlC,MAAOl5B,EAAMwM,MAEjBA,KAAM,CACFwsB,SAAU,GACVe,WAAY,GACZd,UAAW,UACXC,MAAOl5B,EAAMwM,MAGjBq/D,cAAe,CACX1yC,UAAW,IAEf2yC,oBAAqB,CACjBl0C,cAAe,MACfE,WAAY,UAEhBi0C,kBAAmB,CACfnmC,WAAY,EACZ/F,YAAa,EACboR,YAAa,EACbD,aAAc,EACd5X,gBAAiB,GAErB4yC,eAAgB,CACZhzC,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjBy/D,sBAAuB,CACnBjzC,SAAU,GACVE,MAAOl5B,EAAMm1B,WAGjB1T,QAAS,CACLmW,cAAe,MACfuB,UAAW,GACXzE,MAAO,OACP4C,SAAU,KAEdvqB,OAAQ,CACJ2qB,KAAM,EACN7C,OAAQ,GACRsK,iBAAkB,GAClBrF,eAAgB,GAEpB4oC,WAAY,CACR1pC,SAAU,SAKPK,MAAetB,aAAUyzC,K,8aCzIxC,IAAMnyC,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD7sB,SAAU6sB,EAAM7sB,SAASC,iBAMzBwuE,GAAoB,EAElB3oD,G,yIACqB,IAAD,EACkB4F,KAAK0N,MAAlC72B,EADW,EACXA,MAAOvC,EADI,EACJA,SAAU9C,EADN,EACMA,SAClB67B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACumC,GAAA,EAAD,CAAYpP,MAAOX,EAAOyc,OAAQvM,sBAAuBlQ,EAAOa,WAC5D,gBAAC,GAAD,CAASr3B,MAAOA,EAAO4L,MAAOhQ,KAAKC,EAAE,8BACjC,gBAAC,GAAD,CACIs7B,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,qBACdigC,KAAM,gBAAC9B,EAAA,EAAD,CAAa9hC,KAAK,WAAWi/B,MAAOX,EAAO41C,WACjDjG,SAAS,EACT12B,QACI,gBAAC,GAAD,CACIjyC,OAAQC,EAASD,OACjBwuD,SAAU,SAACrf,GAAD,OAAwBhyC,EAASuF,GAAUysC,KACrD2D,YAAa9Z,EAAO61C,aACpB15B,WAAYnc,EAAO81C,mBAG3BtF,SAAS,IAEb,gBAAC,GAAD,CACI7vC,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,sBACdigC,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,mBAAmBi/B,MAAOX,EAAO41C,WACpEjG,SAAS,EACTxtC,QAAS,kBAAMh+B,EAASoF,GAA4B,SAAnBtC,EAASuC,MAAmB,QAAU,UACvEyvC,QACI,gBAAC+jB,GAAA,EAAD,CACIruC,MAA0B,SAAnB1nB,EAASuC,MAChByzD,cAAe,kBACX94D,EAASoF,GAA4B,SAAnBtC,EAASuC,MAAmB,QAAU,YAIpEgnE,SAAS,IAEb,gBAAC,GAAD,CACI7vC,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,mBACdigC,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,SAASi/B,MAAOX,EAAO41C,WAC1DjG,SAAS,EACT12B,QACI,gBAAC,GAAD,CACIjjC,KAAM5Q,KAAKC,EAAE,mBACb88B,QAAS,kBAAMh+B,EAAS8D,OACxBkiC,KAAK,iBACLC,UAAWpK,EAAO+1C,eAClBp1C,MAAO,CAACX,EAAOg2C,kBAAmBh2C,EAAOqN,iBAGjDmjC,SAAS,IAEb,gBAAC,GAAD,CACI7vC,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,6BACdigC,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,SAASi/B,MAAOX,EAAO41C,WAC1DjG,SAAS,EACTY,cAAe,SAAC76B,GAAD,OAAU,gBAAC,GAAD,CAAuB7K,SAAS,EAAMM,OAAQuK,QAG/E,gBAAC,GAAD,CACIlsC,MAAOA,EACP4L,MAAOhQ,KAAKC,EAAE,2BACdigC,KAAM,CAAC5jC,KAAM,OAAQghC,MAAOl5B,EAAMu1B,SAElC,gBAAC,GAAD,CACI4B,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,oBACdsqE,SAAS,EACTxtC,QAAS,WAGqB,MAD1BuzC,KAEIA,GAAoB,EACpB53E,IAAMC,MAAM,2BAEhBg2B,YAAW,kBAAO2hD,GAAoB1jC,KAAKikC,IAAI,EAAGP,GAAoB,KAAK,MAE/Ez8B,QAAS,gBAAChX,GAAA,EAAD,CAAMtB,MAAOX,EAAOsxB,UAAWh2D,GACxCk1E,SAAS,IAEb,gBAAC,GAAD,CACI7vC,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,2BACdsqE,SAAS,EACTxtC,QAAS,kBAAMyB,WAAgB1nC,IAC/B+8C,QAAS,gBAAChX,GAAA,EAAD,CAAMtB,MAAOX,EAAOsxB,UAAW,IACxCkf,SAAS,IAEb,gBAAC,GAAD,CACI7vC,MAAOX,EAAO21C,KACdjnD,MAAOtpB,KAAKC,EAAE,uBACdigC,KAAM,gBAACmJ,GAAA,EAAD,CAAe/sC,KAAK,aAAai/B,MAAOX,EAAO41C,WACrDjG,SAAS,EACTxtC,QAAS,WAAO,IAAD,IACahE,KAAWC,IAAI,UAAhCF,EADI,EACJA,MAAOG,EADH,EACGA,OACR63C,EAAS,SAAGz4C,GAAMr5B,WAAWpD,QAAQ0B,WAA5B,EAAG,EAA+B4D,MAC7C0P,EAAO,GACXA,GAAI,aAAiBqkB,KAASC,GAA1B,KAAiCD,KAAS87C,QAA1C,MACJngE,GAAI,eAAmBg8B,KAAK4D,MAAM1X,GAA9B,MAA0C8T,KAAK4D,MAAMvX,GAArD,KACJroB,GAAI,gBAAoB1a,EAApB,KACJ0a,GAAI,SAAakgE,EAAb,KACJlgE,GAAI,8BACJA,GAAW5Q,KAAKC,EAAE,uBAAd,OAEJ,IAAM+wE,EAAUhxE,KAAKC,EAAE,yBACvBu+B,WAAA,8CAA8DwyC,EAA9D,SAA8EpgE,IAElFijC,QAAS,gBAAChX,GAAA,EAAD,CAAMtB,MAAOX,EAAOsxB,UAAW,IACxCkf,SAAS,KAGjB,gBAAC,GAAD,CACIhnE,MAAOA,EACP4L,MAAOhQ,KAAKC,EAAE,4BACdigC,KAAM,CAAC5jC,KAAM,UAAWghC,MAAOl5B,EAAM61B,OAErC,gBAAC,GAAD,CACIsB,MAAO,CAACX,EAAO21C,KAAM,CAACt3C,OAAQ,MAC9B3P,MAAOtpB,KAAKC,EAAE,0BACd4zC,QACI,gBAAC,GAAD,CACIjjC,KAAM5Q,KAAKC,EAAE,4BACb88B,QAAS,kBAAM7I,GAAa,wBAC5B6Q,KAAK,iBACLxJ,MAAO,CAACX,EAAOq2C,WAAYr2C,EAAOqN,eAClCjD,UAAWpK,EAAO+1C,iBAG1BvF,SAAS,KAGjB,gBAAC9vC,GAAA,EAAD,CAAMC,MAAOX,EAAOs2C,gBAChB,gBAAC,GAAD,CACI9hC,SAAS,4BACT+hC,WAAW,UACX51C,MAAO,CAACX,EAAOw2C,KAAMx2C,EAAOy2C,mBAEhC,gBAAC,GAAD,CACIjiC,SAAS,oBACT+hC,WAAW,UACX51C,MAAO,CAACX,EAAOw2C,KAAMx2C,EAAO02C,sB,GAjJ3Br9C,aAgKvBs9C,G,yIACqB,IAAD,EACqBhkD,KAAK0N,MAArCjrB,EADW,EACXA,MAAOkwB,EADI,EACJA,KAAM97B,EADF,EACEA,MAAOu3B,EADT,EACSA,SACrBf,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOq4B,SAChB,gBAAC33B,GAAA,EAAD,CAAMC,MAAOX,EAAO42C,uBACftxC,GAAQ,gBAACmJ,GAAA,EAAD,CAAe/sC,KAAM4jC,EAAK5jC,KAAMghC,MAAO4C,EAAK5C,MAAO/B,MAAOX,EAAO62C,cAC1E,gBAAC50C,GAAA,EAAD,CAAMtB,MAAOX,EAAOw9B,cAAepoD,IAEtC2rB,O,GAXK1H,aAiBhBoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBwb,OAAQ,CACJvb,KAAM,EACNhD,MAAO,QAEX2C,UAAW,CACP3C,MAAO,OACP4C,SAAU,IACVuH,UAAW,SACXC,WAAY,GACZ9B,cAAe,GACfwD,kBAAmB,IAEvBquB,QAAS,CACLz1B,gBAAiB,GACjBzB,eAAgB,cAEpBy1C,sBAAuB,CACnBx1C,cAAe,MACfE,WAAY,SACZsD,aAAc,IAElB44B,aAAc,CACV94B,cAAe,YACfC,cAAe,EACfnC,SAAU,GACVE,MAAOl5B,EAAMm1B,WAEjBk4C,YAAa,CACTr0C,SAAU,GACV6G,YAAa,GAEjBssC,KAAM,CACFryC,eAAgB,EAChBjF,OAAQ,IAEZu3C,SAAU,CACNvsC,YAAa,EACb9G,QAAS,EACTC,SAAU,GACVE,MAAOl5B,EAAMm1B,WAEjBk3C,aAAc,CACVx3C,OAAQ,IAEZy3C,iBAAkB,CACdtzC,SAAU,GACVmG,iBAAkB,IAEtB0tC,WAAY,CACRh4C,OAAQ,GACRiF,eAAgB,GAEpB0yC,kBAAmB,CACf93C,MAAO,IACPG,OAAQ,GACRiF,eAAgB,GAEpByyC,eAAgB,CACZvzC,SAAU,IAEd6K,cAAe,CACX1G,gBAAiBn9B,EAAM3O,OAG3By2D,SAAU,CACN5uB,MAAOl5B,EAAMwM,KACbwsB,SAAU,IAEd8zC,eAAgB,GAChBE,KAAM,CACF7zC,UAAW,GACXzE,MAAO,QAEXw4C,YAAa,CAACr4C,OAAQ,IACtBo4C,gBAAiB,CAACp4C,OAAQ,SAanBwE,MAAetB,aAAUxU,K,kbC7RlCE,G,yIACqB,IACZzjB,EAASmpB,KAAK0N,MAAd72B,MACDw2B,EAASS,GAAaj3B,GAE5B,OACI,gBAAC,GAAD,KACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOX,EAAOa,WAChB,gBAACoB,GAAA,EAAD,CAAMtB,MAAOX,EAAOiD,aAAc79B,KAAKC,EAAE,2BACzC,gBAAC48B,GAAA,EAAD,CAAMtB,MAAOX,EAAOiD,aAAc79B,KAAKC,EAAE,2BACzC,gBAAC,GAAD,CACI2Q,KAAM5Q,KAAKC,EAAE,uBACbigC,KAAM,gBAACyJ,GAAA,EAAD,CAAwBrtC,KAAK,SAASi/B,MAAOX,EAAOisC,aAC1D9pC,QAAS,kBAAM7I,GAAa,YAAa,CAACY,OAAQ,mBAClDiQ,KAAK,iBACLxJ,MAAOX,EAAOzpB,e,GAfG8iB,aAuBnCoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBJ,UAAW,CACPK,KAAM,EACNC,eAAgB,SAChBG,WAAY,SACZpD,MAAO,OAEX+E,YAAa,CACTT,SAAU,GACVe,WAAY,GACZZ,UAAW,GACXF,UAAW,SACXC,MAAOl5B,EAAMwM,MAEjBO,OAAQ,CACJosB,UAAW,GACXgE,gBAAiBn9B,EAAM3O,OAE3BoxE,WAAY,CACRzpC,SAAU,GACVE,MAAOl5B,EAAMi1B,UACb2Q,WAAY,QAKT7N,gBAAUtU,I,m/BC3CzB,IAGM6pD,GAA0B9qE,OAAauhC,MAAM,CAC/C1mC,SAAU2F,KASRuqE,G,kCAGF,WAAY12C,GAAgC,IAAD,uBACvC,cAAMA,IACDvM,MAAQ,CAAC2W,YAAY,GAFa,E,4CAKpCphC,GAAoB,IjLsODxC,EiLtOA,OACf8mC,EAAsBhb,KAAK0N,MAA3BsN,mBACPhb,KAAKiU,SAAL,SAAkBjU,KAAKmB,OAAvB,IAA8B2W,YAAY,KACzChN,GAAMt5B,UjLmOe0C,EiLnO4BwC,EAAOxC,SjLmOQ,SAAO1C,EAAUC,GAAjB,iBAAA/G,EAAAC,OAAA,uDAC/D+G,EAAQD,IAAWE,KAAKD,MADuC,WAAAhH,EAAA,MAE9CF,EAAe,QAAS,SAAU,GAAI,CAAC0J,YAAWxC,GAAO,IAFX,WAE/D/F,EAF+D,QAIxDJ,QAAUhD,EAAe2D,WAJ+B,wBAKjEsF,EAAS8D,IAAO,IAChB9D,EAAS6E,MANwD,kBAO1D,CAAC5B,SAAS,IAPgD,iCAS1D,CAACA,SAAS,EAAOrB,OAAQN,GAAuBnH,KATU,gEiLnOG5D,MAChE,YAA+C,IAA7C0M,EAA4C,EAA5CA,QAASrB,EAAmC,EAAnCA,OAEP,GADIqB,GAAWumC,GAAoBA,EAAmBtkC,GAClDtD,GAAUA,EAAOjC,OAAQ,CACzB,IAAMqvB,EAAIptB,EAAOjC,OACjBxH,OAAOC,KAAK42B,GAAGntB,SAAQ,SAACC,GAAD,OAAO,EAAK2nC,eAAiB,EAAKA,cAAc3nC,EAAGf,GAAciuB,EAAEltB,QAE9F,EAAK2gC,SAAS,CAACiH,aAAc9nC,EAAQ0kC,YAAY,S,+BAKtC,IAAD,SACc9X,KAAK0N,MAA9B72B,EADW,EACXA,MAAOg3B,EADI,EACJA,eADI,EAEiB7N,KAAKmB,MAAjC+Z,EAFW,EAEXA,aAAcpD,EAFH,EAEGA,WACfzK,EAASS,GAAaj3B,GAE5B,OACI,gBAACk3B,GAAA,EAAD,CAAMC,MAAOH,GACT,gBAACE,GAAA,EAAD,CAAMC,MAAOX,EAAOwP,cAChB,gBAACvN,GAAA,EAAD,CAAMtB,MAAOX,EAAO5qB,OAAQhQ,KAAKC,EAAE,wBACnC,gBAACopC,GAAA,EAAD,CAAe/sC,KAAK,UAAUi/B,MAAOX,EAAOg3C,cAC5C,gBAAC/0C,GAAA,EAAD,CAAMtB,MAAOX,EAAOtY,SAAUtiB,KAAKC,EAAE,2BAEzC,gBAAC,KAAD,CACI0oC,cAjDmB,CAAClnC,SAAU,IAkD9BmnC,iBAAkB8oC,GAClBhmC,kBAAkB,EAClB7C,gBAAgB,EAChBC,SAAU,SAAC7kC,GAAD,OAAY,EAAKiN,OAAOjN,MAEjC,SAAC8kC,GAAyC,IAEnCC,EAOAD,EAPAC,aACA/kC,EAMA8kC,EANA9kC,OACAtD,EAKAooC,EALApoC,OACAyhC,EAIA2G,EAJA3G,QACAC,EAGA0G,EAHA1G,aACAC,EAEAyG,EAFAzG,WACAkG,EACAO,EADAP,cAEES,EAAc,IAAI5G,eAAcC,cAAe6B,GAA6B//B,EAAO,KAGzF,OAFA,EAAKokC,cAAgBA,EAGjB,gCACI,gBAAC,GAAD,MACIrG,MAAM,WACNj5B,YAAalJ,KAAKC,EAAE,YACpBxK,MAAOkL,EAAOc,SACd8nB,MAAOtlB,EAAOxC,SACd2gC,QAASA,EAAQ3gC,SACjB6nB,MAAOtpB,KAAKC,EAAE,4BACdwiC,YAAY,GACRwG,IAGR,gBAAC,GAAD,CAAWxzC,MAAOuL,GAAaynC,KAE/B,gBAAC,GAAD,CACI1L,QAAS,kBAAMiM,KACfzN,MAAOX,EAAOzpB,OACd4zB,KAAK,iBACLn0B,KAAM5Q,KAAKC,EAAE,wBACbolC,WAAYA,a,GA3EhBpR,aAsF1BoH,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrBuO,aAAc,CACVtR,MAAO,OACPkD,cAAe,SACfD,eAAgB,aAChByD,aAAc,IAElBxvB,MAAO,CACHotB,SAAU,GACVE,MAAOl5B,EAAMwM,MAEjB0R,QAAS,CACL8a,SAAU,GACVE,MAAOl5B,EAAMwM,KACbysB,UAAW,WAEfu0C,YAAa,CACTt0C,MAAOl5B,EAAM61B,KACbmD,SAAU,GACVG,UAAW,IAEfpsB,OAAQ,CACJowB,gBAAiBn9B,EAAM3O,MACvB8nC,UAAW,SAKRpB,gBAAUw1C,I,kbC3InB/pD,G,yIAEE,OACI,gBAAC,GAAD,KACI,gBAAC,GAAD,KACI,gBAAC,GAAD,CAAmBwT,eAAgB,CAACtC,MAAO,MAAO4C,SAAU,a,GAL9CzH,aAYnBkI,gBAAUvU,I,+kBCazB,IAAMmgC,GAAQC,eAGV6pB,QAA4Cv6E,EAC5Cw6E,QAA+Cx6E,EAC/Cy6E,QAAoDz6E,EAGxD,SAAS06E,GAActjD,GAAqC,IAAD,IACnDA,IAAOqjD,GAAuBrjD,GAClC,IAAMyF,EAAK,SAAGH,GAAkBI,UAArB,SAAG,EAA2Bk0B,wBAA9B,EAAG,EAA8ChsD,KACxD63B,IAEK39B,IACI6hC,GAAMr5B,WAAWE,KAAKuG,eAAiBqiD,GAAqBS,SAASp0B,I7JPlFD,GAAa,YAAa,CAACY,OAAQ,kBiEiChC,SAAkCX,EAAuB09C,GAC5D,IAAMI,EAASrqB,GAAsBW,SAASp0B,GACxC+9C,EAAWL,GAAiBjqB,GAAsBW,SAASspB,IAC5DK,GAAYD,GAAS55C,GAAMt5B,SAA6B2xB,MACzDwhD,IAAaD,GAAS55C,GAAMt5B,SAA6BsyB,M4F3BzD8gD,CAAyBh+C,EAAO09C,IAEhCC,GAAmBD,GACnBA,GAAgB19C,GAkJTgI,qBA9If,YAAuF,IAAlE/3B,EAAiE,EAAjEA,MAAqBguE,GAA4C,EAA1DC,aAA0D,EAA5CD,UAIf,EAEvB,IAAME,EAAuB,CACzB73C,KAAmB,SAAbr2B,EAAMvJ,GACZ85D,OAAO,UACc,SAAbvwD,EAAMvJ,GAAgB03E,KAAYC,MAAc7d,QADlD,IAEFl7B,WAAYr1B,EAAMq1B,cAI1B,OACI,gBAACg5C,GAAA,EAAD,CACInxC,IAAKtN,GACLxuB,aAAcusE,GACdW,QAASC,GACTvuE,MAAOkuE,EACPF,QAAS,WACLJ,QAAc16E,GAEds7E,KAAY19E,iBAAiB,qBAAqB,WAC9C,GAAI48E,GAAkB,CAClB,IAAMe,GAAkE,IAApD/qB,GAAqBoH,QAAQ4iB,IAC3CrsE,EAAgB4yB,GAAMr5B,WAAWE,KAAKuG,cAC5C,GAAIotE,IAAgBptE,EAAe,OAAO,EAC1C,IAAKotE,GAAeptE,EAAe,OAAO,EAE9C,OAAO,KAEP2sE,GAASA,KAEjBJ,cAAeA,IAEf,gBAAC,GAAMtgC,UAAP,CAAiBohC,cAAe,CAACrqB,aAAa,GAAQzW,iBAjCrC,8BAkCb,gBAAC,GAAMH,OAAP,CAAcv1C,KAAK,YAAYw1C,UAAWL,KAC1C,gBAAC,GAAMI,OAAP,CACIv1C,KAAK,gCACLw1C,UAAW1pB,GACX2pB,QAAS,CAAC/hC,MAAO2kB,GAAY,oCAEjC,gBAAC,GAAMkd,OAAP,CACIv1C,KAAK,4BACLw1C,UAAWhqB,GACXiqB,QAAS,CAAC/hC,MAAO2kB,GAAY,gCAEjC,gBAAC,GAAMkd,OAAP,CACIv1C,KAAK,sBACLw1C,UAAW/pB,GACXgqB,QAAS,CAAC/hC,MAAO2kB,GAAY,0BAEjC,gBAAC,GAAMkd,OAAP,CACIv1C,KAAK,sBACLw1C,UAAW9pB,GACX+pB,QAAS,CAAC/hC,MAAO2kB,GAAY,0BAEjC,gBAAC,GAAMkd,OAAP,CACIv1C,KAAK,6BACLw1C,UAAW7pB,GACX8pB,QAAS,CAAC/hC,MAAO2kB,GAAY,iCAEjC,gBAAC,GAAMkd,OAAP,CAAcv1C,KAAK,aAAaw1C,UAAWihC,KAC3C,gBAAC,GAAMlhC,OAAP,CACIv1C,KAAK,kBACLw1C,UAAWrqB,GACXsqB,QAAS,CACL0W,aAAa,EACbz4C,MAAO2kB,GAAY,mBACnBmO,OAAQ,SAAC7H,GAAD,OACJ,gBAAC4lB,GAAD,QACQ5lB,EADR,CAEIqkB,YAAY,EACZM,UAAU,EACVC,UAAU,EACVO,sBAAuBh8C,EAAMu1B,OAC7BwB,aAAc,CAACoG,gBAAiBn9B,EAAMu1B,QACtC2D,MAAOl5B,EAAMi1B,iBAK7B,gBAAC,GAAMwY,OAAP,CACIv1C,KAAK,gBACLw1C,UAAWpqB,GACXqqB,QAAS,CACL0W,aAAa,EACbz4C,MAAO2kB,GAAY,iBACnBmO,OAAQ,SAAC7H,GAAD,OACJ,gBAAC4lB,GAAD,QACQ5lB,EADR,CAEIqkB,YAAY,EACZO,UAAU,EACVO,sBAAuBh8C,EAAMu1B,OAC7BwB,aAAc,CAACoG,gBAAiBn9B,EAAMu1B,QACtC2D,MAAOl5B,EAAMi1B,iBAK7B,gBAAC,GAAMwY,OAAP,CACIv1C,KAAK,iBACLw1C,UAAWnqB,GACXoqB,QAAS,CACL0W,aAAa,EACbz4C,MAAO2kB,GAAY,kBACnBmO,OAAQ,SAAC7H,GAAD,OACJ,gBAAC4lB,GAAD,QAAgB5lB,EAAhB,CAAuBqkB,YAAY,EAAMQ,kBAAkB,SAIvE,gBAAC,GAAMjO,OAAP,CACIv1C,KAAK,sBACLw1C,UAAWlqB,GACXmqB,QAAS,CACL0W,aAAa,EACbz4C,MAAO2kB,GAAY,uBACnBmO,OAAQ,SAAC7H,GAAD,OAA6B,gBAAC4lB,GAAD,QAAgB5lB,EAAhB,CAAuBqkB,YAAY,SAGhF,gBAAC,GAAMzN,OAAP,CACIv1C,KAAK,6BACLw1C,UAAWjqB,GACXkqB,QAAS,CAAC/hC,MAAO2kB,GAAY,iCAEjC,gBAAC,GAAMkd,OAAP,CAAcv1C,KAAK,mBAAmBw1C,UAAWkhC,KACjD,gBAAC,GAAMnhC,OAAP,CACIv1C,KAAK,6BACLw1C,UAAW5pB,GACX6pB,QAAS,CAAC/hC,MAAO2kB,GAAY,iCAEjC,gBAAC,GAAMkd,OAAP,CACIv1C,KAAK,iBACLw1C,UAAW3pB,GACX4pB,QAAS,CAAC/hC,MAAO2kB,GAAY,0B,8aC5LjD,IAqBe8I,GArBQtO,cAAQ,SAACT,GAAD,MAAsB,CACjDukD,aAAcvkD,EAAM7sB,SAASC,aAAasC,SAoB/Bq5B,C,yIAVY,IAAD,EACelQ,KAAK0N,MAA/BU,EADW,EACXA,SAAUs3C,EADC,EACDA,aACjB,OACI,kBAAC,KAAD,CAAe57E,IAAK47E,EAAc7uE,MAAO22B,GAAOk4C,IAC3Ct3C,O,GALoB1H,IAAMwN,Y,4bCNrCyxC,G,mJAGwC,IAAD,IAC/Bp1C,EAAS,SAAG9J,GAAkBI,UAArB,SAAG,EAA2Bk0B,wBAA9B,EAAG,EAA8ChsD,KAChE,OAAOurD,GAA2B/pB,K,0CAGjB,IAAD,OACVtJ,EAAMR,GAAkBI,QAE1BI,GAEAA,EAAIiW,YAAY,SAAS,WACrB,IAAM0oC,EAAW,EAAKC,mBAClBD,IAAa,EAAKE,uBAAuB,EAAK5lC,cAClD,EAAK4lC,sBAAwBF,O,+BAKlB,IAEbG,EAAqC,QAD3B/lD,KAAK0N,MAAd72B,MAC8BvJ,GAAe,QAAU,OAE9D,OAAO,gBAAC04E,GAAA,UAAD,CAAWh4C,MAAOhO,KAAK6lD,oBAAsBE,Q,GAzB9Br/C,aA6BfkI,gBAAU+2C,I,m/BCxBzB,IAAMz1C,GAAiBtO,cAAQ,SAACT,GAAD,MAAsB,CACjD7L,QAAS6L,EAAM7sB,SAASC,aAAa+gB,QACrCne,YAAagqB,EAAM7sB,SAASC,aAAa0nB,sBASvCgqD,G,kCACF,WAAYv4C,GAA2B,IAAD,uBAClC,cAAMA,IACDvM,MAAQ,CAAC+kD,eAAe,GAFK,E,8CAKf,IAAD,SACWlmD,KAAK0N,MAA3B72B,EADW,EACXA,MAAOM,EADI,EACJA,YACP+uE,EAAiBlmD,KAAKmB,MAAtB+kD,cAED74C,EAASS,GAAaj3B,GAE5B,OAAI4wB,GAA0BtwB,GAAqB,qCAG/C,oCACI,kBAACmjC,GAAD,CACIpC,SAAUguC,EACVnlB,cAAc,QACdnoB,WAAS,EACTD,QAAM,EACNG,gBAAc,EACdJ,eAAgBrL,EAAO84C,UACvBvsC,cAAe,kBACX,oCACI,kBAACtK,GAAA,EAAD,CAAMtB,MAAOX,EAAO+4C,YAAa3zE,KAAKC,EAAE,uBACxC,kBAACq7B,GAAA,EAAD,CAAMC,MAAOX,EAAO/U,SAChB,kBAAC,GAAD,CACIjV,KAAM5Q,KAAKC,EAAE,qBACb88B,QAAS,kBAAO1E,GAAMt5B,UnLsBV,SAAOA,GAAP,SAAA9G,EAAAC,OAAA,gDAC5C6G,EAAS6F,GAAuB,CAAC1F,MAAM,EAAM+jB,OAAO,EAAMphB,UAAU,KADxB,gEmLrBZ05B,MAAOX,EAAOxY,OACd4iB,UAAWpK,EAAOoN,WAClBjD,KAAK,mBAET,kBAAC,GAAD,CACIn0B,KAAM5Q,KAAKC,EAAE,qBACb88B,QAAS,kBAAM,EAAKyE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B+kD,eAAe,MAC5Dl4C,MAAOX,EAAOxY,OACd4iB,UAAWpK,EAAOoN,WAClBjD,KAAK,wBAMzB,kBAAC,GAAD,CACIU,QAASguC,EACT1tC,OAAQ,kBAAM,EAAKvE,SAAL,SAAkB,EAAK9S,OAAvB,IAA8B+kD,eAAe,a,GA/CpDx/C,IAAMwN,WAsD3BpG,GAAeX,IAAS,SAACt2B,GAC3B,OAAOw3B,KAAWC,OAAO,CACrB63C,UAAW,CACP9uC,kBAAmB,GACnBpH,gBAAiB,GACjBzB,eAAgB,UAEpB43C,WAAY,CACRv2C,SAAU,GACVe,WAAY,GACZb,MAAOl5B,EAAMwM,KACbysB,UAAW,WAEfxX,QAAS,CACLmW,cAAe,MACfuB,UAAW,GACXzE,MAAO,OACP4C,SAAU,KAEdtZ,OAAQ,CACJ0Z,KAAM,EACN7C,OAAQ,GACRsK,iBAAkB,GAClBrF,eAAgB,GAEpB8J,WAAY,CACR5K,SAAU,SAKPK,MAAetB,aAAUq3C,KCzEzBI,uBAzBf,WlGNSjf,KAAOkf,SAASC,MAEjBnf,KAAOkf,SAASC,IAAM,CAClBlf,QAAS,UACTmf,UAAW,UACXC,KAAM,UACNC,SAAU,UACVjyE,QAAS,UACTvM,MAAO,UACP6sB,QAAS,YkGHN,MvJKA,WAAwG,IAAD,EAClE2R,YAAe,GADmD,WAC3GigD,EAD2G,KACxFC,EADwF,KAIlHlgD,aAAgB,YACZ,mBAAAh8B,EAAAC,OAAA,gEAEQk8E,MAEMr1E,EAAWs5B,GAAMt5B,SAJ/B,WAAA9G,EAAA,MAUc8G,GlC8H2B,SAAOA,GAAP,eAAA9G,EAAAC,OAAA,kEAAAD,EAAA,MACrBmG,EAAiC,WADZ,OAI7CrG,EAAe,SAAU,OAHnBuH,EADuC,QAElB,CAAC9B,UAAW8B,EAAU9B,WAAa,IAEtBlI,MAAK,SAAC4D,GAC1C,GAAIA,EAASJ,SAAWhD,EAAeyK,GAAI,CACvC,IACM1G,EADWX,EAAuCM,KAExD,GAAI8F,EAAW,CACX,IAAM+0E,EAA+B,GAAjBx6E,EAAO/B,OAC3BiH,EAASM,EAAyBg1E,EAAc/0E,EAAU9F,KAAOK,EAAQw6E,SACtEt1E,EAASM,EAAyBxF,QAXJ,gEkCxIzC,yBAAA5B,EAAA,MAWc8G,GlCmJ8B,SAAOA,GAAP,eAAA9G,EAAAC,OAAA,kEAAAD,EAAA,MACxBmG,EAAoC,cADZ,OAIhDrG,EAAe,YAAa,OAHtBuH,EAD0C,QAErB,CAAC9B,UAAW8B,EAAU9B,WAAa,IAEnBlI,MAAK,SAAC4D,GAC7C,GAAIA,EAASJ,SAAWhD,EAAeyK,GAAI,CACvC,IACMxF,EADW7B,EAAuCM,KAExD,GAAI8F,EAAW,CACX,IAAM+0E,EAAkC,GAApBt5E,EAAUjD,OAC9BiH,EAASS,EAA4B60E,EAAc/0E,EAAU9F,KAAOuB,EAAWs5E,SAC5Et1E,EAASS,EAA4BzE,QAXJ,gEkC9J5C,yBAAA9C,EAAA,MAccq8E,IAAA,SACCl2C,IAAYm2C,MADb,IAEFC,QAASC,EAAQ,KACjBC,YAAaD,EAAQ,KACrBE,aAAcF,EAAQ,KACtBG,gBAAiBH,EAAQ,KACzBI,YAAaJ,EAAQ,KACrB,mBAAoBA,EAAQ,SArBxC,cA0BQr2E,EAAqB,qBAAqB9I,MAAK,SAACoP,GAC5CtG,EAAqB,WAAW9I,MAAK,SAACutB,GAClC,GAAIne,GAAeme,EAAS,CACxB,IAAMnlB,EAAO,IAAI/C,KAAK+J,EAAYlL,MAClC6+B,GAAMt5B,SAASyF,GAAuBqe,EAAQrpB,KAA4BkE,SAG1E26B,GAAMt5B,SACFyF,GAAuB,CAACtF,MAAM,EAAM+jB,OAAO,EAAMphB,UAAU,GAAO,IAAIlH,aAOtFyD,EAAqB,WAAW9I,MAAK,SAACa,GAClCkiC,GAAMt5B,SAAS+F,GAAgB3O,EAAWA,EAAQqD,KAAkB,OACpEoE,EAAgB,UAAW1H,GAAa,MAI5CkI,EAAqB,SAAS9I,MAAK,SAAC8O,GAC5BA,GAAOi0B,GAAMt5B,SAASoF,GAASC,EAAM5K,MAAkB,OAE/D4E,EAAqB,UAAU9I,MAAK,SAACsM,GAC7BA,EAAQy2B,GAAMt5B,SAASuF,GAAU1C,EAAOpI,MAAyB,IAChE6+B,GAAMt5B,SAASuF,GAAU,MAAyB,OApDnE,YAAArM,EAAA,MAwDkC8G,GhCoFsC,SAC5EA,GAD4E,uBAAA9G,EAAAC,OAAA,kEAAAD,EAAA,MAGlDqJ,MAHkD,YAGtEwzE,EAHsE,gCAMjE71E,EAAS61E,EAAT71E,MANiE,WAAAhH,EAAA,MASjDF,EAAe,UAAW,MAAO,GAAI,GAAIkH,IATQ,WASlE/F,EATkE,QAW3DJ,QAAUhD,EAAeyK,GAXkC,wBAY9DnB,EAAWlG,EAAuCM,KAClD8D,EAAOtB,EAAiBoD,GAC9BL,EAASqD,GAAanD,EAAO3B,GAAM,IAdiC,kBAe7DA,GAf6D,QAgBjEyB,EAASwD,MAhBwD,sCAmBrEjL,GAnBqE,iEgC5IxE,QAwDQuhC,GAxDR,yDA2DQnjC,QAAQukC,KAAR,MA3DR,yBA6DQk6C,GAAmB,GACnBC,MA9DR,oFAkEAW,KACD,IAEH,IAAI1C,OAAuD/6E,EAG3D,OAFIuhC,KAAmBw5C,EAAex5C,GAAkB/yB,UAAY,aAAe,oBAE5E,CAACouE,oBAAmB7B,gBuJhFe2C,GAAnCd,EAFI,EAEJA,kBAAmB7B,EAFf,EAEeA,a9KF1BryE,KAAKqpB,aAAeA,GAGpBrpB,KAAKi1E,WAAY,E+KRZ3/C,OAELkD,0BAAqC,CACjC08C,mBAAoB,oBAAAj9E,EAAAC,OAAA,yEAAa,CAC7Bi9E,iBAAiB,EACjBC,iBAAiB,EACjBC,gBAAgB,IAHA,+DAOxB78C,oCAA8C,SAAC88C,GAC3C,IAAM97E,EAAOg8B,GAAoB8/C,GAEjC5/E,QAAQyD,IAAI,0BACZzD,QAAQyD,IAAIK,GAERA,EAAK4xB,QAAU5xB,EAAKoX,QAO5B4nB,4CAAsD,SAACt/B,GACnDxD,QAAQyD,IAAI,mCAEZ,IAAMK,EAAON,EAASo8E,aAAe9/C,GAAoBt8B,EAASo8E,cAAiBp8E,EAAiBb,KAEpGmgC,oCAA+CljC,MAAK,SAACigF,GAC7C/7E,EAAK4xB,QAELmqD,EACKn+E,QAAO,SAACm5C,GAAD,OAAO/a,GAAoB+a,GAAGnlB,SAAW5xB,EAAK4xB,UACrD7zB,KAAI,SAACg5C,GAAD,OAAOA,EAAE7a,QAAQ8/C,cACrB50E,QAAQ43B,gCAIjBh/B,EAAK4xB,QAAQyJ,GAASr7B,EAAK4xB,WAGf,YAAhB6J,KAASC,IACTsD,+BAA0C,UAAW,CACjDl8B,KAAM,UACNm5E,WAAYj9C,qBAAgCk9C,IAC5CC,iBAAkB,CAAC,EAAG,IAAK,IAAK,KAChCC,WAAY,eDzCT,MAMmClW,oBAAkB,GANrD,WAMJmW,EANI,KAMaC,EANb,KAQX,OAAK5B,EAIG,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAU77C,MAAOA,IACb,kBAAC,GAAD,KACI,kBAAC,GAAD,CAAY+5C,QAAS,kBAAM0D,GAAmB,IAAOzD,aAAcA,IAClEwD,GAAmB,kBAAC,GAAD,MACpB,kBAAC,GAAD,SART,U","file":"static/js/app.83966357.chunk.js","sourcesContent":["/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/expo-service-worker.js', { scope: '/' })\n      .then(function (info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function (error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Regular.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Thin.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Light.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-SemiBold.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Bold.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/ComicBold.ttf\";","/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nimport Constants from \"expo-constants\";\r\n\r\nexport enum Environment {\r\n    Staging = \"STAGING\",\r\n    Production = \"PRODUCTION\",\r\n}\r\n\r\nconst extra = Constants.manifest.extra;\r\n\r\nexport const APP_VERSION: string = Constants.manifest.version!;\r\nexport const APP_SCHEME: string = Constants.manifest.scheme;\r\nexport const ENVIRONMENT: Environment = extra.TARGET;\r\nexport const DEBUG_MODE: boolean = extra.DEBUG;\r\nexport const CLIENT_URL: string = extra.CLIENT_URL;\r\nexport const SERVER_HOST: string = extra.SERVER_HOST;\r\nexport const BACKEND_URL: string = extra.SERVER_URL;\r\n\r\n/**\r\n * Specify the quality of compression, from 0 to 1.\r\n * 0 means compress for small size, 1 means compress for maximum quality.\r\n */\r\nexport const AVATAR_QUALITY = 0.75;\r\n\r\n/**\r\n * The number of resources fetched per request when scrolling in infinite scrolling containers.\r\n */\r\nexport const PROFILES_FETCH_LIMIT = 8; // Matching tab\r\nexport const ROOMS_FETCH_LIMIT = 10; // Messaging tab\r\nexport const MESSAGES_FETCH_LIMIT = 15; // Chat\r\nexport const HISTORY_FETCH_LIMIT = 12; // Match history tab\r\nexport const GROUPS_FETCH_LIMIT = 8;\r\n\r\n/**\r\n * The buffer delay before sending a remote request when typing in a search bar (ms).\r\n */\r\nexport const SEARCH_BUFFER_DELAY = 250;\r\n\r\n/**\r\n * The maximum number of spoken languages a user can select.\r\n */\r\nexport const MAX_SPOKEN_LANGUAGES = 8;\r\n\r\n/**\r\n * The time before we ask the user to consent for cookies again.\r\n */\r\nexport const COOKIE_CONSENT_DURATION = 365 * 24 * 60 * 60;\r\n\r\n/**\r\n * The amount of time before we fall back to the web version when trying to\r\n * redirect to the app.\r\n */\r\nexport const WEB_TO_APP_TIMEOUT = 5000;\r\n\r\n/**\r\n * URL of the complete Terms & Conditions.\r\n */\r\nexport const TERMS_AND_CONDITIONS_URL =\r\n    \"https://sea-eu.org/wp-content/uploads/2021/01/SEA-EU-Around_Termsconditions-v2.pdf\";\r\n\r\n/**\r\n * The email address to which bug reports should be sent.\r\n */\r\nexport const BUG_REPORT_EMAIL_ADDRESS = \"sea-eu.around@univ-brest.fr\";\r\n","/**\r\n * Hypertext Transfer Protocol (HTTP) response status codes.\r\n * @see {@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}\r\n * @see {@link https://gist.github.com/scokmen/f813c904ef79022e84ab2409574d1b45}\r\n */\r\nexport enum HttpStatusCode {\r\n    /**\r\n     * The server has received the request headers and the client should proceed to send the request body\r\n     * (in the case of a request for which a body needs to be sent; for example, a POST request).\r\n     * Sending a large request body to a server after a request has been rejected for inappropriate headers would be inefficient.\r\n     * To have a server check the request's headers, a client must send Expect: 100-continue as a header in its initial request\r\n     * and receive a 100 Continue status code in response before sending the body. The response 417 Expectation Failed indicates the request should not be continued.\r\n     */\r\n    CONTINUE = 100,\r\n\r\n    /**\r\n     * The requester has asked the server to switch protocols and the server has agreed to do so.\r\n     */\r\n    SWITCHING_PROTOCOLS = 101,\r\n\r\n    /**\r\n     * A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request.\r\n     * This code indicates that the server has received and is processing the request, but no response is available yet.\r\n     * This prevents the client from timing out and assuming the request was lost.\r\n     */\r\n    PROCESSING = 102,\r\n\r\n    /**\r\n     * Standard response for successful HTTP requests.\r\n     * The actual response will depend on the request method used.\r\n     * In a GET request, the response will contain an entity corresponding to the requested resource.\r\n     * In a POST request, the response will contain an entity describing or containing the result of the action.\r\n     */\r\n    OK = 200,\r\n\r\n    /**\r\n     * The request has been fulfilled, resulting in the creation of a new resource.\r\n     */\r\n    CREATED = 201,\r\n\r\n    /**\r\n     * The request has been accepted for processing, but the processing has not been completed.\r\n     * The request might or might not be eventually acted upon, and may be disallowed when processing occurs.\r\n     */\r\n    ACCEPTED = 202,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The server is a transforming proxy that received a 200 OK from its origin,\r\n     * but is returning a modified version of the origin's response.\r\n     */\r\n    NON_AUTHORITATIVE_INFORMATION = 203,\r\n\r\n    /**\r\n     * The server successfully processed the request and is not returning any content.\r\n     */\r\n    NO_CONTENT = 204,\r\n\r\n    /**\r\n     * The server successfully processed the request, but is not returning any content.\r\n     * Unlike a 204 response, this response requires that the requester reset the document view.\r\n     */\r\n    RESET_CONTENT = 205,\r\n\r\n    /**\r\n     * The server is delivering only part of the resource (byte serving) due to a range header sent by the client.\r\n     * The range header is used by HTTP clients to enable resuming of interrupted downloads,\r\n     * or split a download into multiple simultaneous streams.\r\n     */\r\n    PARTIAL_CONTENT = 206,\r\n\r\n    /**\r\n     * The message body that follows is an XML message and can contain a number of separate response codes,\r\n     * depending on how many sub-requests were made.\r\n     */\r\n    MULTI_STATUS = 207,\r\n\r\n    /**\r\n     * The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response,\r\n     * and are not being included again.\r\n     */\r\n    ALREADY_REPORTED = 208,\r\n\r\n    /**\r\n     * The server has fulfilled a request for the resource,\r\n     * and the response is a representation of the result of one or more instance-manipulations applied to the current instance.\r\n     */\r\n    IM_USED = 226,\r\n\r\n    /**\r\n     * Indicates multiple options for the resource from which the client may choose (via agent-driven content negotiation).\r\n     * For example, this code could be used to present multiple video format options,\r\n     * to list files with different filename extensions, or to suggest word-sense disambiguation.\r\n     */\r\n    MULTIPLE_CHOICES = 300,\r\n\r\n    /**\r\n     * This and all future requests should be directed to the given URI.\r\n     */\r\n    MOVED_PERMANENTLY = 301,\r\n\r\n    /**\r\n     * This is an example of industry practice contradicting the standard.\r\n     * The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect\r\n     * (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302\r\n     * with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307\r\n     * to distinguish between the two behaviours. However, some Web applications and frameworks\r\n     * use the 302 status code as if it were the 303.\r\n     */\r\n    FOUND = 302,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The response to the request can be found under another URI using a GET method.\r\n     * When received in response to a POST (or PUT/DELETE), the client should presume that\r\n     * the server has received the data and should issue a redirect with a separate GET message.\r\n     */\r\n    SEE_OTHER = 303,\r\n\r\n    /**\r\n     * Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.\r\n     * In such case, there is no need to retransmit the resource since the client still has a previously-downloaded copy.\r\n     */\r\n    NOT_MODIFIED = 304,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The requested resource is available only through a proxy, the address for which is provided in the response.\r\n     * Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons.\r\n     */\r\n    USE_PROXY = 305,\r\n\r\n    /**\r\n     * No longer used. Originally meant \"Subsequent requests should use the specified proxy.\"\r\n     */\r\n    SWITCH_PROXY = 306,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * In this case, the request should be repeated with another URI; however, future requests should still use the original URI.\r\n     * In contrast to how 302 was historically implemented, the request method is not allowed to be changed when reissuing the original request.\r\n     * For example, a POST request should be repeated using another POST request.\r\n     */\r\n    TEMPORARY_REDIRECT = 307,\r\n\r\n    /**\r\n     * The request and all future requests should be repeated using another URI.\r\n     * 307 and 308 parallel the behaviors of 302 and 301, but do not allow the HTTP method to change.\r\n     * So, for example, submitting a form to a permanently redirected resource may continue smoothly.\r\n     */\r\n    PERMANENT_REDIRECT = 308,\r\n\r\n    /**\r\n     * The server cannot or will not process the request due to an apparent client error\r\n     * (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing).\r\n     */\r\n    BAD_REQUEST = 400,\r\n\r\n    /**\r\n     * Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet\r\n     * been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the\r\n     * requested resource. See Basic access authentication and Digest access authentication. 401 semantically means\r\n     * \"unauthenticated\",i.e. the user does not have the necessary credentials.\r\n     */\r\n    UNAUTHORIZED = 401,\r\n\r\n    /**\r\n     * Reserved for future use. The original intention was that this code might be used as part of some form of digital\r\n     * cash or micro payment scheme, but that has not happened, and this code is not usually used.\r\n     * Google Developers API uses this status if a particular developer has exceeded the daily limit on requests.\r\n     */\r\n    PAYMENT_REQUIRED = 402,\r\n\r\n    /**\r\n     * The request was valid, but the server is refusing action.\r\n     * The user might not have the necessary permissions for a resource.\r\n     */\r\n    FORBIDDEN = 403,\r\n\r\n    /**\r\n     * The requested resource could not be found but may be available in the future.\r\n     * Subsequent requests by the client are permissible.\r\n     */\r\n    NOT_FOUND = 404,\r\n\r\n    /**\r\n     * A request method is not supported for the requested resource;\r\n     * for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.\r\n     */\r\n    METHOD_NOT_ALLOWED = 405,\r\n\r\n    /**\r\n     * The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.\r\n     */\r\n    NOT_ACCEPTABLE = 406,\r\n\r\n    /**\r\n     * The client must first authenticate itself with the proxy.\r\n     */\r\n    PROXY_AUTHENTICATION_REQUIRED = 407,\r\n\r\n    /**\r\n     * The server timed out waiting for the request.\r\n     * According to HTTP specifications:\r\n     * \"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.\"\r\n     */\r\n    REQUEST_TIMEOUT = 408,\r\n\r\n    /**\r\n     * Indicates that the request could not be processed because of conflict in the request,\r\n     * such as an edit conflict between multiple simultaneous updates.\r\n     */\r\n    CONFLICT = 409,\r\n\r\n    /**\r\n     * Indicates that the resource requested is no longer available and will not be available again.\r\n     * This should be used when a resource has been intentionally removed and the resource should be purged.\r\n     * Upon receiving a 410 status code, the client should not request the resource in the future.\r\n     * Clients such as search engines should remove the resource from their indices.\r\n     * Most use cases do not require clients and search engines to purge the resource, and a \"404 Not Found\" may be used instead.\r\n     */\r\n    GONE = 410,\r\n\r\n    /**\r\n     * The request did not specify the length of its content, which is required by the requested resource.\r\n     */\r\n    LENGTH_REQUIRED = 411,\r\n\r\n    /**\r\n     * The server does not meet one of the preconditions that the requester put on the request.\r\n     */\r\n    PRECONDITION_FAILED = 412,\r\n\r\n    /**\r\n     * The request is larger than the server is willing or able to process. Previously called \"Request Entity Too Large\".\r\n     */\r\n    PAYLOAD_TOO_LARGE = 413,\r\n\r\n    /**\r\n     * The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request,\r\n     * in which case it should be converted to a POST request.\r\n     * Called \"Request-URI Too Long\" previously.\r\n     */\r\n    URI_TOO_LONG = 414,\r\n\r\n    /**\r\n     * The request entity has a media type which the server or resource does not support.\r\n     * For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format.\r\n     */\r\n    UNSUPPORTED_MEDIA_TYPE = 415,\r\n\r\n    /**\r\n     * The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.\r\n     * For example, if the client asked for a part of the file that lies beyond the end of the file.\r\n     * Called \"Requested Range Not Satisfiable\" previously.\r\n     */\r\n    RANGE_NOT_SATISFIABLE = 416,\r\n\r\n    /**\r\n     * The server cannot meet the requirements of the Expect request-header field.\r\n     */\r\n    EXPECTATION_FAILED = 417,\r\n\r\n    /**\r\n     * This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol,\r\n     * and is not expected to be implemented by actual HTTP servers. The RFC specifies this code should be returned by\r\n     * teapots requested to brew coffee. This HTTP status is used as an Easter egg in some websites, including Google.com.\r\n     */\r\n    I_AM_A_TEAPOT = 418,\r\n\r\n    /**\r\n     * The request was directed at a server that is not able to produce a response (for example because a connection reuse).\r\n     */\r\n    MISDIRECTED_REQUEST = 421,\r\n\r\n    /**\r\n     * The request was well-formed but was unable to be followed due to semantic errors.\r\n     */\r\n    UNPROCESSABLE_ENTITY = 422,\r\n\r\n    /**\r\n     * The resource that is being accessed is locked.\r\n     */\r\n    LOCKED = 423,\r\n\r\n    /**\r\n     * The request failed due to failure of a previous request (e.g., a PROPPATCH).\r\n     */\r\n    FAILED_DEPENDENCY = 424,\r\n\r\n    /**\r\n     * The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.\r\n     */\r\n    UPGRADE_REQUIRED = 426,\r\n\r\n    /**\r\n     * The origin server requires the request to be conditional.\r\n     * Intended to prevent \"the 'lost update' problem, where a client\r\n     * GETs a resource's state, modifies it, and PUTs it back to the server,\r\n     * when meanwhile a third party has modified the state on the server, leading to a conflict.\"\r\n     */\r\n    PRECONDITION_REQUIRED = 428,\r\n\r\n    /**\r\n     * The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.\r\n     */\r\n    TOO_MANY_REQUESTS = 429,\r\n\r\n    /**\r\n     * The server is unwilling to process the request because either an individual header field,\r\n     * or all the header fields collectively, are too large.\r\n     */\r\n    REQUEST_HEADER_FIELDS_TOO_LARGE = 431,\r\n\r\n    /**\r\n     * A server operator has received a legal demand to deny access to a resource or to a set of resources\r\n     * that includes the requested resource. The code 451 was chosen as a reference to the novel Fahrenheit 451.\r\n     */\r\n    UNAVAILABLE_FOR_LEGAL_REASONS = 451,\r\n\r\n    /**\r\n     * A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.\r\n     */\r\n    INTERNAL_SERVER_ERROR = 500,\r\n\r\n    /**\r\n     * The server either does not recognize the request method, or it lacks the ability to fulfill the request.\r\n     * Usually this implies future availability (e.g., a new feature of a web-service API).\r\n     */\r\n    NOT_IMPLEMENTED = 501,\r\n\r\n    /**\r\n     * The server was acting as a gateway or proxy and received an invalid response from the upstream server.\r\n     */\r\n    BAD_GATEWAY = 502,\r\n\r\n    /**\r\n     * The server is currently unavailable (because it is overloaded or down for maintenance).\r\n     * Generally, this is a temporary state.\r\n     */\r\n    SERVICE_UNAVAILABLE = 503,\r\n\r\n    /**\r\n     * The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.\r\n     */\r\n    GATEWAY_TIMEOUT = 504,\r\n\r\n    /**\r\n     * The server does not support the HTTP protocol version used in the request\r\n     */\r\n    HTTP_VERSION_NOT_SUPPORTED = 505,\r\n\r\n    /**\r\n     * Transparent content negotiation for the request results in a circular reference.\r\n     */\r\n    VARIANT_ALSO_NEGOTIATES = 506,\r\n\r\n    /**\r\n     * The server is unable to store the representation needed to complete the request.\r\n     */\r\n    INSUFFICIENT_STORAGE = 507,\r\n\r\n    /**\r\n     * The server detected an infinite loop while processing the request.\r\n     */\r\n    LOOP_DETECTED = 508,\r\n\r\n    /**\r\n     * Further extensions to the request are required for the server to fulfill it.\r\n     */\r\n    NOT_EXTENDED = 510,\r\n\r\n    /**\r\n     * The client needs to authenticate to gain network access.\r\n     * Intended for use by intercepting proxies used to control access to the network (e.g., \"captive portals\" used\r\n     * to require agreement to Terms of Service before granting full Internet access via a Wi-Fi hotspot).\r\n     */\r\n    NETWORK_AUTHENTICATION_REQUIRED = 511,\r\n}\r\n","import {Alert} from \"react-native\";\r\nimport {BACKEND_URL} from \"../constants/config\";\r\nimport {HttpStatusCode} from \"../constants/http-status\";\r\nimport {RequestResponse, TokenDto} from \"./dto\";\r\n\r\n// Request-related types\r\ntype Primitive = string | number | boolean | Primitive[] | undefined;\r\ntype URLParams = {[key: string]: Primitive};\r\ntype URLBodyParams = {[key: string]: Primitive | Primitive[] | URLBodyParams | URLBodyParams[]};\r\n\r\nfunction encodeURIPrimitive(v: Primitive): string {\r\n    return Array.isArray(v)\r\n        ? v.map((v) => encodeURIPrimitive(v)).join(\",\")\r\n        : encodeURIComponent(v as string | number | boolean);\r\n}\r\n\r\n/**\r\n * Encode parameters for an HTTP request (e.g. param1=value1&param2=value2)\r\n * @param args - A map that contains argument keys and associated values.\r\n * @returns the given arguments, formatted into a HTTP request suffix.\r\n */\r\nexport function encodeRequestParams(args: URLParams): string {\r\n    const str = Object.keys(args)\r\n        .filter((key: string) => args[key] !== undefined)\r\n        .map((key: string) => `${key}=${encodeURIPrimitive(args[key])}`)\r\n        .join(\"&\");\r\n    return str.length == 0 ? str : \"?\" + str;\r\n}\r\n\r\n/**\r\n * Send a request to the backend.\r\n * @param endpoint - Which endpoint to hit (e.g. auth/login)\r\n * @param method - Which HTTP method to use (GET, PUT, POST, ...)\r\n * @param params - The URL parameters (?param1=value1&param2=value2 ...)\r\n * @param body - The body of the request.\r\n * @param auth - Whether or not this request should be authenticated.\r\n * @param verbose - Whether or not to print information about the request and response.\r\n * @param authToken - The authentication token. If not given, the token from the redux store will be used.\r\n */\r\nexport async function requestBackend(\r\n    endpoint: string,\r\n    method = \"GET\",\r\n    params: URLParams = {},\r\n    body: URLBodyParams = {},\r\n    authToken: TokenDto | null | undefined = undefined,\r\n    verbose = false,\r\n): Promise<RequestResponse> {\r\n    const headers: {[key: string]: string} = {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n    };\r\n\r\n    if (authToken !== undefined) {\r\n        if (authToken === null) {\r\n            console.error(`Cannot authentify request to ${endpoint} : no auth token available.`);\r\n            Alert.alert(\"A request could not be authenticated.\");\r\n            return {errorType: \"error.no-auth\", description: \"Endpoint requires authentication\", status: 401};\r\n        } else headers.Authorization = `Bearer ${authToken.accessToken}`;\r\n    }\r\n\r\n    const formattedParams = encodeRequestParams(params);\r\n    let response: Response | null = null;\r\n\r\n    try {\r\n        if (verbose) {\r\n            console.log(`Sending request: ${method} /${endpoint}${formattedParams}`);\r\n            console.log(`  headers: ${JSON.stringify(headers)}`);\r\n            console.log(`  body   : ${JSON.stringify(body)}`);\r\n        }\r\n\r\n        response = await fetch(`${BACKEND_URL}/${endpoint}${formattedParams}`, {\r\n            method,\r\n            headers,\r\n            ...(method == \"GET\" ? {} : {body: JSON.stringify(body)}),\r\n        });\r\n\r\n        let json = {status: response.status, data: {}};\r\n        if (response.status !== HttpStatusCode.NO_CONTENT) json = {...json, ...(await response.json())};\r\n\r\n        if (verbose) {\r\n            console.log(`Response from endpoint ${endpoint}:`);\r\n            console.log(json);\r\n        }\r\n\r\n        return json;\r\n    } catch (error) {\r\n        console.error(\r\n            `An unexpected error occured with a request to ${endpoint}. ` +\r\n                `Method = ${method}, authToken = ${authToken}, params=${JSON.stringify(params)}, ` +\r\n                `body=${JSON.stringify(body)}`,\r\n        );\r\n        console.error(error);\r\n        console.error(\"Response received from server:\", response);\r\n        return {errorType: \"error.unknown\", description: \"A client-side exception was raised.\", status: 400};\r\n    }\r\n}\r\n","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {Action, AnyAction} from \"redux\";\r\nimport {\r\n    InterestDto,\r\n    OfferCategory,\r\n    OfferDto,\r\n    OfferValueDto,\r\n    RemoteValidationErrors,\r\n    SpokenLanguageDto,\r\n    TokenDto,\r\n} from \"../api/dto\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport {User} from \"../model/user\";\r\nimport {Degree, Gender, Role, StaffRole} from \"../constants/profile-constants\";\r\nimport {CountryCode} from \"../model/country-codes\";\r\nimport {ChatRoom, ChatRoomUser} from \"../model/chat-room\";\r\nimport {UserSettings} from \"../model/user-settings\";\r\nimport {MatchHistoryItem} from \"../model/matching\";\r\n\r\nexport type FailableActionReturn = {success: boolean; errors?: string[]};\r\nexport type FailableThunkAction = AppThunk<Promise<FailableActionReturn>>;\r\nexport type ValidatedActionReturn = {success: boolean; errors?: RemoteValidationErrors};\r\nexport type ValidatedThunkAction = AppThunk<Promise<ValidatedActionReturn>>;\r\n\r\nexport type PaginatedState = {page: number; canFetchMore: boolean; fetching: boolean};\r\nexport const initialPaginatedState = (): PaginatedState => ({page: 1, canFetchMore: true, fetching: false});\r\n\r\nexport type OnboardingState = {\r\n    firstname: string;\r\n    lastname: string;\r\n    birthdate: Date | null;\r\n    gender: Gender | null;\r\n    nationality: CountryCode | null;\r\n    type: Role | null;\r\n    degree: Degree | null;\r\n    staffRoles: {[key: string]: boolean};\r\n    languages: SpokenLanguageDto[];\r\n    interestIds: string[];\r\n    offerValues: {[key: string]: OfferValueDto};\r\n    educationFields: string[];\r\n};\r\n\r\nexport type AuthState = {\r\n    authenticated: boolean;\r\n    validated: boolean;\r\n    token: null | TokenDto;\r\n    registerEmail: string;\r\n    validatedEmail: string | null;\r\n    accountNeedsRecovery: boolean;\r\n    // This is available only in DEBUG_MODE on the staging server\r\n    verificationToken?: string;\r\n    onboarded: boolean;\r\n    onboarding: OnboardingState;\r\n    onboardingIndex: number;\r\n};\r\n\r\nexport type SettingsState = {\r\n    userSettings: UserSettings;\r\n    localizedLanguageItems: {value: string; label: string}[];\r\n    previousVersion: string | null;\r\n    isFirstLaunch: boolean;\r\n};\r\n\r\nexport type ProfileState = {\r\n    user: User | null;\r\n    offers: OfferDto[];\r\n    offerIdToCategory: Map<string, OfferCategory>;\r\n    interests: InterestDto[];\r\n};\r\n\r\nexport type MatchingFiltersState = {\r\n    offers: {[key: string]: boolean};\r\n    universities: string[];\r\n    degrees: Degree[];\r\n    languages: string[];\r\n    educationFields: string[];\r\n    staffRoles: StaffRole[];\r\n    types: Role[];\r\n};\r\n\r\nexport type MatchingState = {\r\n    filters: MatchingFiltersState;\r\n    fetchedProfiles: UserProfile[];\r\n    profilesPagination: PaginatedState;\r\n    historyPagination: PaginatedState;\r\n    historyFilters: {[key: string]: boolean};\r\n    historyItems: MatchHistoryItem[];\r\n    myMatches: UserProfile[];\r\n    fetchingMyMatches: boolean;\r\n};\r\n\r\nexport type MessagingState = {\r\n    socketState: {connecting: boolean; connected: boolean};\r\n    matchRooms: {[key: string]: ChatRoom}; // store by id for faster access\r\n    matchRoomsOrdered: string[];\r\n    matchRoomsPagination: PaginatedState;\r\n    activeRoom: ChatRoom | null;\r\n    localChatUser: ChatRoomUser | null;\r\n    fetchingNewMessages: boolean;\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport type NotificationsState = {};\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport type ReportsState = {};\r\n\r\nexport type GroupsState = {pagination: PaginatedState};\r\n\r\nexport type AppState = {\r\n    auth: AuthState;\r\n    settings: SettingsState;\r\n    profile: ProfileState;\r\n    matching: MatchingState;\r\n    messaging: MessagingState;\r\n    notifications: NotificationsState;\r\n    reports: ReportsState;\r\n    groups: GroupsState;\r\n};\r\n\r\n// Shortcut type for redux-thunk actions (async actions)\r\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, AppState, unknown, Action<string>>;\r\n\r\n// Shortcut type for redux-thunk dispatch (cast dispatch function to this for async actions)\r\nexport type MyThunkDispatch = ThunkDispatch<AppState, void, AnyAction>;\r\n","import {CountryCode} from \"../model/country-codes\";\r\n\r\nexport type UniversityKey = \"univ-cadiz\" | \"univ-brest\" | \"univ-gdansk\" | \"univ-malta\" | \"univ-kiel\" | \"univ-split\";\r\n\r\nexport type University = {\r\n    key: UniversityKey;\r\n    country: CountryCode;\r\n};\r\n\r\n// List of partner universities\r\nexport const PARTNER_UNIVERSITIES: University[] = [\r\n    {\r\n        key: \"univ-cadiz\",\r\n        country: \"ES\",\r\n    },\r\n    {\r\n        key: \"univ-brest\",\r\n        country: \"FR\",\r\n    },\r\n    {\r\n        key: \"univ-gdansk\",\r\n        country: \"PL\",\r\n    },\r\n    {\r\n        key: \"univ-malta\",\r\n        country: \"MT\",\r\n    },\r\n    {\r\n        key: \"univ-kiel\",\r\n        country: \"DE\",\r\n    },\r\n    {\r\n        key: \"univ-split\",\r\n        country: \"HR\",\r\n    },\r\n];\r\n","import {\r\n    ChatRoomProfileDto,\r\n    CreateProfileDto,\r\n    CreateProfileDtoCommon,\r\n    EducationFieldDto,\r\n    MatchHistoryItemDto,\r\n    OfferValueDto,\r\n    ResponseChatMessageDto,\r\n    ResponseProfileDto,\r\n    ResponseProfileDtoStaff,\r\n    ResponseProfileDtoStudent,\r\n    ResponseRoomDto,\r\n    ResponseUserDto,\r\n    ResponseProfileWithMatchInfoDto,\r\n    ResponseGroupDto,\r\n} from \"./dto\";\r\nimport {\r\n    UserProfile,\r\n    UserProfileCommon,\r\n    UserProfileStaff,\r\n    UserProfileStudent,\r\n    UserProfileWithMatchInfo,\r\n} from \"../model/user-profile\";\r\nimport {User} from \"../model/user\";\r\nimport {ChatRoom, ChatRoomMessage, ChatRoomUser} from \"../model/chat-room\";\r\nimport {initialPaginatedState} from \"../state/types\";\r\nimport {Role, StaffRole} from \"../constants/profile-constants\";\r\nimport {MatchHistoryItem} from \"../model/matching\";\r\nimport {PARTNER_UNIVERSITIES} from \"../constants/universities\";\r\nimport {Group} from \"../model/groups\";\r\n\r\nexport function stripSuperfluousOffers(offers: OfferValueDto[]): OfferValueDto[] {\r\n    return offers\r\n        ? offers.filter((o) => o.allowFemale || o.allowMale || o.allowOther || o.allowStaff || o.allowStudent)\r\n        : [];\r\n}\r\n\r\nexport function convertDtoToProfile(dto: ResponseProfileDto): UserProfile {\r\n    const common: UserProfileCommon = {\r\n        ...dto,\r\n        avatarUrl: dto.avatar,\r\n        birthdate: new Date(dto.birthdate),\r\n        educationFields: (dto.educationFields || []).map((dto: EducationFieldDto) => dto.id),\r\n        profileOffers: dto.profileOffers || [],\r\n        interests: (dto.interests || []).map((i) => i.id),\r\n        languages: dto.languages || [],\r\n        university: PARTNER_UNIVERSITIES.find((u) => u.key === dto.university) || PARTNER_UNIVERSITIES[0],\r\n    };\r\n\r\n    let complete: UserProfile;\r\n    if (dto.type === \"staff\") {\r\n        const staffDto = dto as ResponseProfileDtoStaff;\r\n        complete = {...common, staffRoles: (staffDto.staffRoles || []).map((r) => r.id as StaffRole)};\r\n    } else {\r\n        const studentDto = dto as ResponseProfileDtoStudent;\r\n        complete = {...common, degree: studentDto.degree};\r\n    }\r\n\r\n    return complete;\r\n}\r\n\r\nexport function convertProfileToCreateDto(profile: UserProfile): CreateProfileDto {\r\n    const common: CreateProfileDtoCommon = {\r\n        ...profile,\r\n        birthdate: profile.birthdate.toJSON(),\r\n        educationFields: profile.educationFields.map((id: string) => ({id})),\r\n        interests: profile.interests.map((id: string) => ({id})),\r\n        profileOffers: stripSuperfluousOffers(profile.profileOffers),\r\n    };\r\n\r\n    let complete: CreateProfileDto;\r\n    if (profile.type === \"staff\") {\r\n        const staff = profile as UserProfileStaff;\r\n        complete = {...common, staffRoles: staff.staffRoles.map((id: string) => ({id}))};\r\n    } else {\r\n        const student = profile as UserProfileStudent;\r\n        complete = {...common, degree: student.degree};\r\n    }\r\n\r\n    return complete;\r\n}\r\n\r\nexport function convertPartialProfileToCreateDto(\r\n    profile: Partial<UserProfile>,\r\n    type?: Role,\r\n): Partial<CreateProfileDto> {\r\n    const common: Partial<CreateProfileDtoCommon> = {\r\n        ...profile,\r\n        type,\r\n        birthdate: profile.birthdate?.toJSON(),\r\n        educationFields: profile.educationFields?.map((id: string) => ({id})),\r\n        interests: profile.interests?.map((id: string) => ({id})),\r\n        profileOffers: profile.profileOffers ? stripSuperfluousOffers(profile.profileOffers) : undefined,\r\n    };\r\n\r\n    let complete: Partial<CreateProfileDto>;\r\n    if (type === \"staff\") {\r\n        const staff = profile as Partial<UserProfileStaff>;\r\n        complete = {...common, staffRoles: staff.staffRoles ? staff.staffRoles.map((id: string) => ({id})) : undefined};\r\n    } else {\r\n        const student = profile as Partial<UserProfileStudent>;\r\n        complete = {...common, degree: student.degree};\r\n    }\r\n\r\n    return complete;\r\n}\r\n\r\nexport function convertDtoToUser(dto: ResponseUserDto): User {\r\n    return {\r\n        ...dto,\r\n        profile: dto.profile ? convertDtoToProfile(dto.profile) : undefined,\r\n    };\r\n}\r\n\r\nexport function convertDtoToRoom(dto: ResponseRoomDto): ChatRoom {\r\n    const users: ChatRoomUser[] = dto.profiles.map((p: ChatRoomProfileDto) => ({\r\n        _id: p.id,\r\n        name: `${p.firstName} ${p.lastName}`,\r\n        avatar: p.avatar || \"\",\r\n        lastMessageSeenId: p.lastMessageSeenId,\r\n        lastMessageSeenDate: p.lastMessageSeenDate ? new Date(p.lastMessageSeenDate) : null,\r\n    }));\r\n\r\n    // Try to find the sender of the last message in the list of users that are in the room\r\n    let lastMessage = null;\r\n    if (dto.lastMessage) {\r\n        const msg: ResponseChatMessageDto = dto.lastMessage;\r\n        const sender = users.find((u) => u._id == msg.senderId);\r\n        if (sender) lastMessage = convertDtoToChatMessage(sender, msg);\r\n    }\r\n\r\n    return {\r\n        ...dto,\r\n        users,\r\n        messages: [],\r\n        lastMessage,\r\n        writing: {},\r\n        messagePagination: initialPaginatedState(),\r\n    };\r\n}\r\n\r\nexport function convertDtoToChatMessage(user: ChatRoomUser, dto: ResponseChatMessageDto): ChatRoomMessage {\r\n    return {\r\n        ...dto,\r\n        _id: dto.id,\r\n        createdAt: new Date(dto.updatedAt),\r\n        user,\r\n    };\r\n}\r\n\r\nexport function convertDtoToHistoryItem(dto: MatchHistoryItemDto): MatchHistoryItem {\r\n    return {\r\n        profile: convertDtoToProfile(dto.profile),\r\n        status: dto.status,\r\n        date: new Date(dto.date),\r\n        id: dto.id,\r\n    };\r\n}\r\n\r\nexport function convertDtoToProfileWithMatchInfo(dto: ResponseProfileWithMatchInfoDto): UserProfileWithMatchInfo {\r\n    return {\r\n        ...dto,\r\n        profile: convertDtoToProfile(dto.profile),\r\n    };\r\n}\r\n\r\nexport function convertDtoToGroup(dto: ResponseGroupDto): Group {\r\n    return {\r\n        ...dto,\r\n    };\r\n}\r\n","import {AppThunk} from \"../types\";\r\nimport {\r\n    AvatarSuccessfulUpdatedDto,\r\n    CreateProfileDto,\r\n    InterestDto,\r\n    OfferDto,\r\n    RequestResponse,\r\n    ResponseProfileDto,\r\n    ResponseUserDto,\r\n    SignedUrlResponseDto,\r\n    SuccessfulRequestResponse,\r\n    ResponseProfileWithMatchInfoDto,\r\n} from \"../../api/dto\";\r\nimport {UserProfile, UserProfileWithMatchInfo} from \"../../model/user-profile\";\r\nimport {User} from \"../../model/user\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {\r\n    convertDtoToProfile,\r\n    convertDtoToProfileWithMatchInfo,\r\n    convertDtoToUser,\r\n    convertPartialProfileToCreateDto,\r\n} from \"../../api/converters\";\r\nimport {ImageInfo} from \"expo-image-picker/build/ImagePicker.types\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {readCachedStaticData} from \"../persistent-storage/static\";\r\n\r\nexport enum PROFILE_ACTION_TYPES {\r\n    LOAD_USER_PROFILE = \"PROFILE/LOAD_USER_PROFILE\",\r\n    LOAD_PROFILE_OFFERS = \"LOAD_PROFILE_OFFERS\",\r\n    LOAD_PROFILE_OFFERS_SUCCESS = \"LOAD_PROFILE_OFFERS_SUCCESS\",\r\n    LOAD_PROFILE_INTERESTS = \"LOAD_PROFILE_INTERESTS\",\r\n    LOAD_PROFILE_INTERESTS_SUCCESS = \"LOAD_PROFILE_INTERESTS_SUCCESS\",\r\n    PROFILE_SET_FIELDS_SUCCESS = \"PROFILE/SET_FIELDS_SUCCESS\",\r\n    PROFILE_SET_FIELDS_FAILURE = \"PROFILE/SET_FIELDS_FAILURE\",\r\n    PROFILE_CREATE = \"PROFILE/CREATE\",\r\n    PROFILE_CREATE_SUCCESS = \"PROFILE/CREATE_SUCCESS\",\r\n    FETCH_USER_SUCCESS = \"PROFILE/FETCH_USER_SUCCESS\",\r\n    FETCH_PROFILE_SUCCESS = \"PROFILE/FETCH_PROFILE_SUCCESS\",\r\n    SET_AVATAR = \"PROFILE/SET_AVATAR\",\r\n    SET_AVATAR_SUCCESS = \"PROFILE/SET_AVATAR_SUCCESS\",\r\n    SET_AVATAR_FAILURE = \"PROFILE/SET_AVATAR_FAILURE\",\r\n}\r\n\r\nexport type LoadUserProfileAction = {\r\n    type: string;\r\n    id: string;\r\n};\r\n\r\nexport type SetProfileFieldsAction = {\r\n    type: string;\r\n    fields: Partial<UserProfile>;\r\n};\r\n\r\nexport type SetProfileFieldsFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetProfileFieldsSuccessAction = {\r\n    type: string;\r\n    fields: Partial<UserProfile>;\r\n};\r\n\r\nexport type CreateProfileAction = {\r\n    type: string;\r\n    profile: CreateProfileDto;\r\n};\r\n\r\nexport type CreateProfileSuccessAction = {\r\n    type: string;\r\n    profile: UserProfile;\r\n};\r\n\r\nexport type LoadProfileOffersAction = {\r\n    type: string;\r\n};\r\n\r\nexport type LoadProfileOffersSuccessAction = {\r\n    type: string;\r\n    offers: OfferDto[];\r\n    fromCache: boolean;\r\n};\r\n\r\nexport type LoadProfileInterestsAction = {\r\n    type: string;\r\n};\r\n\r\nexport type LoadProfileInterestsSuccessAction = {\r\n    type: string;\r\n    interests: InterestDto[];\r\n    fromCache: boolean;\r\n};\r\n\r\nexport type FetchUserSuccessAction = {\r\n    type: string;\r\n    user: User;\r\n};\r\n\r\nexport type FetchProfileSuccessAction = {\r\n    type: string;\r\n    profile: UserProfileWithMatchInfo;\r\n};\r\n\r\nexport type SetAvatarSuccessAction = {\r\n    type: string;\r\n    avatarUrl: string;\r\n};\r\n\r\nexport type SetAvatarFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type ProfileAction =\r\n    | SetProfileFieldsAction\r\n    | SetProfileFieldsFailureAction\r\n    | SetProfileFieldsSuccessAction\r\n    | CreateProfileAction\r\n    | CreateProfileSuccessAction\r\n    | LoadProfileOffersAction\r\n    | LoadProfileOffersSuccessAction\r\n    | LoadProfileInterestsAction\r\n    | LoadProfileInterestsSuccessAction\r\n    | FetchUserSuccessAction\r\n    | FetchProfileSuccessAction\r\n    | SetAvatarSuccessAction\r\n    | SetAvatarFailureAction;\r\n\r\nconst setProfileFieldsSuccess = (fields: Partial<UserProfile>): SetProfileFieldsSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.PROFILE_SET_FIELDS_SUCCESS,\r\n    fields,\r\n});\r\n\r\nconst setProfileFieldsFailure = (): SetProfileFieldsFailureAction => ({\r\n    type: PROFILE_ACTION_TYPES.PROFILE_SET_FIELDS_FAILURE,\r\n});\r\n\r\nexport const setProfileFields = (fields: Partial<UserProfile>): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const type = getState().profile.user?.profile?.type;\r\n\r\n    const dto: Partial<CreateProfileDto> = convertPartialProfileToCreateDto(fields, type);\r\n    const response = await requestBackend(\"profiles\", \"PATCH\", {}, dto, token);\r\n    if (response.status === HttpStatusCode.OK) dispatch(setProfileFieldsSuccess(fields));\r\n    else dispatch(setProfileFieldsFailure());\r\n};\r\n\r\nconst createProfileSuccess = (profile: UserProfile): CreateProfileSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS,\r\n    profile,\r\n});\r\n\r\nexport const createProfile = (profile: CreateProfileDto): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"profiles\", \"POST\", {}, profile, token);\r\n    if (response.status === HttpStatusCode.CREATED) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const profile = convertDtoToProfile(payload as ResponseProfileDto);\r\n        dispatch(createProfileSuccess(profile));\r\n    }\r\n};\r\n\r\nexport const loadProfileOffers = (): AppThunk => async (dispatch) => {\r\n    const fromCache = await readCachedStaticData<OfferDto[]>(\"offers\");\r\n    const params = fromCache ? {updatedAt: fromCache.updatedAt} : {};\r\n\r\n    requestBackend(\"offers\", \"GET\", params).then((response: RequestResponse) => {\r\n        if (response.status === HttpStatusCode.OK) {\r\n            const payload = (response as SuccessfulRequestResponse).data;\r\n            const offers = payload as OfferDto[];\r\n            if (fromCache) {\r\n                const cacheIsGood = offers.length == 0;\r\n                dispatch(loadProfileOffersSuccess(cacheIsGood ? fromCache.data : offers, cacheIsGood));\r\n            } else dispatch(loadProfileOffersSuccess(offers));\r\n        }\r\n    });\r\n};\r\n\r\nconst loadProfileOffersSuccess = (offers: OfferDto[], fromCache = false): LoadProfileOffersSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.LOAD_PROFILE_OFFERS_SUCCESS,\r\n    offers,\r\n    fromCache,\r\n});\r\n\r\nexport const loadProfileInterests = (): AppThunk => async (dispatch) => {\r\n    const fromCache = await readCachedStaticData<InterestDto[]>(\"interests\");\r\n    const params = fromCache ? {updatedAt: fromCache.updatedAt} : {};\r\n\r\n    requestBackend(\"interests\", \"GET\", params).then((response: RequestResponse) => {\r\n        if (response.status === HttpStatusCode.OK) {\r\n            const payload = (response as SuccessfulRequestResponse).data;\r\n            const interests = payload as InterestDto[];\r\n            if (fromCache) {\r\n                const cacheIsGood = interests.length == 0;\r\n                dispatch(loadProfileInterestsSuccess(cacheIsGood ? fromCache.data : interests, cacheIsGood));\r\n            } else dispatch(loadProfileInterestsSuccess(interests));\r\n        }\r\n    });\r\n};\r\n\r\nconst loadProfileInterestsSuccess = (\r\n    interests: InterestDto[],\r\n    fromCache = false,\r\n): LoadProfileInterestsSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.LOAD_PROFILE_INTERESTS_SUCCESS,\r\n    interests,\r\n    fromCache,\r\n});\r\n\r\nexport const fetchUser = (): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"auth/me\", \"GET\", {}, {}, token);\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const user = convertDtoToUser(payload as ResponseUserDto);\r\n        dispatch(fetchUserSuccess(user));\r\n    }\r\n};\r\n\r\nconst fetchUserSuccess = (user: User): FetchUserSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.FETCH_USER_SUCCESS,\r\n    user,\r\n});\r\n\r\nexport const fetchProfile = (id: string): AppThunk<Promise<UserProfileWithMatchInfo | null>> => async (\r\n    dispatch,\r\n    getState,\r\n) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(`profiles/${id}`, \"GET\", {}, {}, token, true);\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data as ResponseProfileWithMatchInfoDto;\r\n        const profileWithMatchInfo = convertDtoToProfileWithMatchInfo(payload);\r\n        dispatch(fetchProfileSuccess(profileWithMatchInfo));\r\n        return profileWithMatchInfo;\r\n    }\r\n    return null;\r\n};\r\n\r\nconst fetchProfileSuccess = (profile: UserProfileWithMatchInfo): FetchProfileSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.FETCH_PROFILE_SUCCESS,\r\n    profile,\r\n});\r\n\r\nconst setAvatarSuccess = (avatarUrl: string): SetAvatarSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.SET_AVATAR_SUCCESS,\r\n    avatarUrl,\r\n});\r\n\r\nconst setAvatarFailure = (): SetAvatarFailureAction => ({\r\n    type: PROFILE_ACTION_TYPES.SET_AVATAR_FAILURE,\r\n});\r\n\r\nexport const setAvatar = (image: ImageInfo): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"common/signedUrl\", \"GET\", {mimeType: \"image/jpeg\"}, {}, token);\r\n\r\n    const fail = () => dispatch(setAvatarFailure());\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const {fileName, s3Url} = payload as SignedUrlResponseDto;\r\n\r\n        try {\r\n            // Fetch the image from the device and convert it to a blob\r\n            const imageBlob = await (await fetch(image.uri)).blob();\r\n\r\n            // PUT the image in the aws bucket\r\n            await fetch(s3Url, {\r\n                method: \"PUT\",\r\n                body: imageBlob,\r\n            });\r\n\r\n            // Submit the file name to the server\r\n            const response2 = await requestBackend(\"profiles/avatar\", \"POST\", {}, {fileName}, token);\r\n\r\n            if (response2.status === HttpStatusCode.OK) {\r\n                const payload2 = (response2 as SuccessfulRequestResponse).data;\r\n                const {avatar} = payload2 as AvatarSuccessfulUpdatedDto;\r\n                dispatch(setAvatarSuccess(avatar));\r\n            } else fail();\r\n        } catch (error) {\r\n            console.error(error);\r\n            console.error(\"An unexpected error occured with a request to the avatar bucket.\");\r\n            fail();\r\n        }\r\n    } else fail();\r\n};\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\ntype StaticDataObject<T> = {\r\n    updatedAt: string;\r\n    data: T;\r\n};\r\n\r\n/**\r\n * Store the given data (with the current date) to unsecure persistent storage (unsuitable for sensitive info).\r\n * @param key - The name under which to store the given object.\r\n * @param data - An object to store.\r\n * @param cookieConsent - Whether or not the user has agreed to storing this type of data. This is here so we don't forget.\r\n */\r\nexport function storeStaticData<T>(key: string, data: T, cookieConsent: boolean): void {\r\n    if (cookieConsent) {\r\n        console.log(`Updating static storage '${key}'.`);\r\n\r\n        // Store the data along with the date\r\n        const storageObject = {\r\n            updatedAt: new Date().toJSON(),\r\n            data,\r\n        };\r\n\r\n        AsyncStorage.setItem(key, JSON.stringify(storageObject));\r\n    }\r\n}\r\n\r\n/**\r\n * Clear the data at the given keys from persistent storage.\r\n * @param keys - The keys to clear.\r\n */\r\nexport function clearStaticData<T>(...keys: string[]): void {\r\n    console.log(`Clearing static storage: ${keys.map((s) => `'${s}'`).join(\", \")}.`);\r\n    AsyncStorage.multiRemove(keys);\r\n}\r\n\r\n/**\r\n * Read static data that was stored under a given key.\r\n * @param key - A key that identifies the resource we want to get (@see storeStaticData).\r\n * @return The object along with the date at which it was stored (in JSON format), or false if nothing was stored under this key.\r\n */\r\nexport async function readCachedStaticData<T>(key: string): Promise<false | StaticDataObject<T>> {\r\n    const raw = await AsyncStorage.getItem(key);\r\n    return raw ? JSON.parse(raw) : false;\r\n}\r\n","import {AppThunk, OnboardingState, ValidatedThunkAction} from \"../types\";\r\nimport {LoginDto, OfferValueDto, ResponseUserDto, SuccessfulRequestResponse, TokenDto} from \"../../api/dto\";\r\nimport {User} from \"../../model/user\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {createProfile} from \"../profile/actions\";\r\nimport {convertDtoToUser} from \"../../api/converters\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {gatherValidationErrors} from \"../../api/errors\";\r\nimport {readCachedCredentials} from \"../persistent-storage/auth\";\r\n\r\nexport enum AUTH_ACTION_TYPES {\r\n    REGISTER_BEGIN = \"AUTH/REGISTER_BEGIN\",\r\n    REGISTER_SUCCESS = \"AUTH/REGISTER_SUCCESS\",\r\n    REGISTER_FAILURE = \"AUTH/REGISTER_FAILURE\",\r\n    LOG_IN_SUCCESS = \"AUTH/LOG_IN_SUCCESS\",\r\n    LOG_IN_FAILURE = \"AUTH/LOG_IN_FAILURE\",\r\n    LOG_IN_RECOVER_CANCEL = \"AUTH/LOG_IN_RECOVER_CANCEL\",\r\n    LOG_OUT = \"AUTH/LOG_OUT\",\r\n    VALIDATE_ACCOUNT = \"AUTH/VALIDATE_ACCOUNT\",\r\n    VALIDATE_ACCOUNT_SUCCESS = \"AUTH/VALIDATE_ACCOUNT_SUCCESS\",\r\n    VALIDATE_ACCOUNT_FAILURE = \"AUTH/VALIDATE_ACCOUNT_FAILURE\",\r\n    BEGIN_ONBOARDING = \"AUTH/BEGIN_ONBOARDING\",\r\n    NEXT_ONBOARDING_SLIDE = \"AUTH/NEXT_ONBOARDING_SLIDE\",\r\n    PREVIOUS_ONBOARDING_SLIDE = \"AUTH/PREVIOUS_ONBOARDING_SLIDE\",\r\n    SET_ONBOARDING_VALUES = \"AUTH/SET_ONBOARDING_VALUES\",\r\n    SET_ONBOARDING_OFFER_VALUE = \"AUTH/SET_ONBOARDING_OFFER_VALUE\",\r\n    FORGOT_PASSWORD_FAILURE = \"AUTH/FORGOT_PASSWORD_FAILURE\",\r\n    FORGOT_PASSWORD_SUCCESS = \"AUTH/FORGOT_PASSWORD_SUCCESS\",\r\n    RESET_PASSWORD_SUCCESS = \"AUTH/RESET_PASSWORD_SUCCESS\",\r\n    DELETE_ACCOUNT_SUCCESS = \"AUTH/DELETE_ACCOUNT_SUCCESS\",\r\n}\r\n\r\nexport type RegisterBeginAction = {\r\n    type: string;\r\n    email: string;\r\n    password: string;\r\n};\r\n\r\nexport type RegisterSuccessAction = {type: string; user: User};\r\n\r\nexport type RegisterFailureAction = {type: string};\r\n\r\nexport type LogInSuccessAction = {\r\n    type: string;\r\n    token: TokenDto;\r\n    user: User;\r\n    usingCachedCredentials: boolean;\r\n};\r\n\r\nexport type LogOutAction = {type: string; redirect: boolean};\r\n\r\nexport type LogInFailureAction = {type: string; needsRecovery: boolean};\r\n\r\nexport type LogInRecoverCancelAction = {type: string};\r\n\r\nexport type ValidateAccountSuccessAction = {\r\n    type: string;\r\n    email: string;\r\n};\r\n\r\nexport type ValidateAccountFailureAction = {type: string};\r\n\r\nexport type BeginOnboardingAction = {\r\n    type: string;\r\n};\r\n\r\nexport type NextOnboardingSlideAction = {\r\n    type: string;\r\n};\r\n\r\nexport type PreviousOnboardingSlideAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetOnboardingValuesAction = {\r\n    type: string;\r\n    values: Partial<OnboardingState>;\r\n};\r\n\r\nexport type SetOnboardingOfferValueAction = {\r\n    type: string;\r\n    id: string;\r\n    value: OfferValueDto;\r\n};\r\n\r\nexport type ForgotPasswordFailureAction = {type: string};\r\n\r\nexport type ForgotPasswordSuccessAction = {\r\n    type: string;\r\n    email: string;\r\n};\r\n\r\nexport type ResetPasswordSuccessAction = {type: string};\r\n\r\nexport type DeleteAccountSuccessAction = {type: string};\r\n\r\nexport type AuthAction =\r\n    | RegisterBeginAction\r\n    | RegisterSuccessAction\r\n    | RegisterFailureAction\r\n    | LogInSuccessAction\r\n    | LogInFailureAction\r\n    | LogInRecoverCancelAction\r\n    | LogOutAction\r\n    | ValidateAccountSuccessAction\r\n    | ValidateAccountFailureAction\r\n    | SetOnboardingValuesAction\r\n    | SetOnboardingOfferValueAction\r\n    | ForgotPasswordFailureAction\r\n    | ForgotPasswordSuccessAction\r\n    | ResetPasswordSuccessAction\r\n    | DeleteAccountSuccessAction;\r\n\r\n// Register actions\r\n\r\nconst registerBegin = (email: string, password: string): RegisterBeginAction => ({\r\n    type: AUTH_ACTION_TYPES.REGISTER_BEGIN,\r\n    email,\r\n    password,\r\n});\r\n\r\n// Redux-thunk asynchronous action creator\r\nexport const requestRegister = (email: string, password: string): ValidatedThunkAction => async (\r\n    dispatch,\r\n    getState,\r\n) => {\r\n    dispatch(registerBegin(email, password));\r\n    const locale = getState().settings.userSettings.locale;\r\n\r\n    const response = await requestBackend(\"auth/register\", \"POST\", {}, {email, password, locale});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        const successResp = response as SuccessfulRequestResponse;\r\n        dispatch(registerSuccess(successResp.data as User));\r\n        return {success: true};\r\n    } else {\r\n        dispatch(registerFailure());\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst registerSuccess = (user: User): RegisterSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.REGISTER_SUCCESS,\r\n    user,\r\n});\r\n\r\nconst registerFailure = (): RegisterFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.REGISTER_FAILURE,\r\n});\r\n\r\n// Log in actions\r\n\r\nconst loginSuccess = (token: TokenDto, user: User, usingCachedCredentials: boolean): LogInSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_IN_SUCCESS,\r\n    token,\r\n    user,\r\n    usingCachedCredentials,\r\n});\r\n\r\nconst loginFailure = (needsRecovery = false): LogInFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_IN_FAILURE,\r\n    needsRecovery,\r\n});\r\n\r\nexport const attemptLoginFromCache = (): AppThunk<Promise<User | undefined>> => async (\r\n    dispatch,\r\n): Promise<User | undefined> => {\r\n    const credentials = await readCachedCredentials();\r\n\r\n    if (credentials) {\r\n        const {token} = credentials;\r\n\r\n        // Get user information\r\n        const response = await requestBackend(\"auth/me\", \"GET\", {}, {}, token);\r\n\r\n        if (response.status == HttpStatusCode.OK) {\r\n            const payload = (response as SuccessfulRequestResponse).data as ResponseUserDto;\r\n            const user = convertDtoToUser(payload);\r\n            dispatch(loginSuccess(token, user, true));\r\n            return user;\r\n        } else dispatch(loginFailure()); // e.g. token is invalid\r\n    }\r\n    // If no credentials are available in cache, the action does nothing.\r\n    return undefined;\r\n};\r\n\r\nexport const requestLogin = (email: string, password: string, recover = false): ValidatedThunkAction => async (\r\n    dispatch,\r\n) => {\r\n    const response = await requestBackend(\"auth/login\", \"POST\", {}, {email, password, recover});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data as LoginDto;\r\n        dispatch(loginSuccess(payload.token, convertDtoToUser(payload.user), false));\r\n        return {success: true};\r\n    } else {\r\n        const needsRecovery =\r\n            response.status === HttpStatusCode.FORBIDDEN && response.errorType === \"error.user_being_deleted\";\r\n        dispatch(loginFailure(needsRecovery));\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nexport const cancelLoginRecovery = (): LogInRecoverCancelAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_IN_RECOVER_CANCEL,\r\n});\r\n\r\nexport const logout = (redirect = true): LogOutAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_OUT,\r\n    redirect,\r\n});\r\n\r\n// Account validation actions\r\n\r\nexport const requestValidateAccount = (validationToken: string): AppThunk => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/verify\", \"POST\", {}, {token: validationToken});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const {email} = payload as {email: string};\r\n        dispatch(validateAccountSuccess(email));\r\n    } else {\r\n        dispatch(validateAccountFailure());\r\n    }\r\n};\r\n\r\nconst validateAccountSuccess = (email: string): ValidateAccountSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_SUCCESS,\r\n    email,\r\n});\r\n\r\nconst validateAccountFailure = (): ValidateAccountFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_FAILURE,\r\n});\r\n\r\n// Forgot password actions\r\n\r\nexport const forgotPassword = (email: string): ValidatedThunkAction => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/password/forgot\", \"POST\", {}, {email});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        dispatch(forgotPasswordSuccess(email));\r\n        return {success: true};\r\n    } else {\r\n        dispatch(forgotPasswordFailure());\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst forgotPasswordSuccess = (email: string): ForgotPasswordSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.FORGOT_PASSWORD_SUCCESS,\r\n    email,\r\n});\r\n\r\nconst forgotPasswordFailure = (): ForgotPasswordFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.FORGOT_PASSWORD_FAILURE,\r\n});\r\n\r\nexport const resetPassword = (token: string, password: string): ValidatedThunkAction => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/password/reset\", \"POST\", {}, {token, password});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        dispatch(resetPasswordSuccess());\r\n        return {success: true};\r\n    } else {\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst resetPasswordSuccess = (): ResetPasswordSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.RESET_PASSWORD_SUCCESS,\r\n});\r\n\r\nexport const deleteAccount = (password: string): ValidatedThunkAction => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"users\", \"DELETE\", {}, {password}, token, true);\r\n\r\n    if (response.status == HttpStatusCode.NO_CONTENT) {\r\n        dispatch(logout(false));\r\n        dispatch(deleteAccountSuccess());\r\n        return {success: true};\r\n    } else {\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst deleteAccountSuccess = (): DeleteAccountSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.DELETE_ACCOUNT_SUCCESS,\r\n});\r\n\r\n// Onboarding actions\r\n\r\nexport const beginOnboarding = (): BeginOnboardingAction => ({\r\n    type: AUTH_ACTION_TYPES.BEGIN_ONBOARDING,\r\n});\r\n\r\nexport const nextOnboardingSlide = (): NextOnboardingSlideAction => ({\r\n    type: AUTH_ACTION_TYPES.NEXT_ONBOARDING_SLIDE,\r\n});\r\n\r\nexport const previousOnboardingSlide = (): PreviousOnboardingSlideAction => ({\r\n    type: AUTH_ACTION_TYPES.PREVIOUS_ONBOARDING_SLIDE,\r\n});\r\n\r\nexport const setOnboardingValues = (values: Partial<OnboardingState>): SetOnboardingValuesAction => ({\r\n    type: AUTH_ACTION_TYPES.SET_ONBOARDING_VALUES,\r\n    values,\r\n});\r\n\r\nexport const setOnboardingOfferValue = (id: string, value: OfferValueDto): SetOnboardingOfferValueAction => ({\r\n    type: AUTH_ACTION_TYPES.SET_ONBOARDING_OFFER_VALUE,\r\n    id,\r\n    value,\r\n});\r\n\r\nexport const debugConnect = (): AppThunk => async (dispatch, getState) => {\r\n    const n = Math.round(1e3 * Math.random());\r\n    const email = `test${n}.test@univ-brest.fr`;\r\n    const password = \"PASSword$1\";\r\n\r\n    await dispatch(requestRegister(email, password));\r\n    const {verificationToken} = getState().auth;\r\n\r\n    if (verificationToken) {\r\n        await dispatch(requestValidateAccount(verificationToken));\r\n        await dispatch(requestLogin(email, password));\r\n        await dispatch(\r\n            createProfile({\r\n                type: \"staff\",\r\n                birthdate: \"2002-11-12T07:21:22.110Z\",\r\n                firstName: \"Kevin\" + n,\r\n                lastName: \"Test\",\r\n                gender: \"male\",\r\n                languages: [\r\n                    {code: \"fr\", level: \"native\"},\r\n                    {code: \"en\", level: \"c1\"},\r\n                ],\r\n                nationality: \"FR\",\r\n                interests: [{id: \"baking\"}, {id: \"art\"}, {id: \"brunch\"}],\r\n                profileOffers: [\r\n                    {\r\n                        offerId: \"provide-a-couch\",\r\n                        allowMale: true,\r\n                        allowFemale: true,\r\n                        allowOther: true,\r\n                        allowStaff: false,\r\n                        allowStudent: true,\r\n                    },\r\n                    {\r\n                        offerId: \"grab-a-drink\",\r\n                        allowMale: true,\r\n                        allowFemale: true,\r\n                        allowOther: true,\r\n                        allowStaff: false,\r\n                        allowStudent: true,\r\n                    },\r\n                    {\r\n                        offerId: \"answer-academic-questions\",\r\n                        allowMale: true,\r\n                        allowFemale: true,\r\n                        allowOther: true,\r\n                        allowStaff: true,\r\n                        allowStudent: true,\r\n                    },\r\n                ],\r\n                educationFields: [{id: \"education-science\"}, {id: \"music-performing-arts\"}],\r\n                //degree: \"m2\",\r\n                staffRoles: [{id: \"research\"}, {id: \"teaching\"}],\r\n            }),\r\n        );\r\n    }\r\n};\r\n","import i18n from \"i18n-js\";\r\nimport {HttpStatusCode} from \"../constants/http-status\";\r\nimport {ErrorRequestResponse, RemoteValidationErrors, RequestResponse, UnprocessableEntityRequestResponse} from \"./dto\";\r\n\r\nexport const localizeError = (err: string): string => i18n.t(err, {defaultValue: err});\r\n\r\nconst extractError = ({code, description}: {code: string; description: string}): string => {\r\n    const isMissingLocalization = i18n.t(code, {defaultValue: \"missing\"}) == \"missing\";\r\n    return isMissingLocalization ? description : code;\r\n};\r\n\r\nexport function gatherValidationErrors(resp: RequestResponse): RemoteValidationErrors | undefined {\r\n    if (resp.status == HttpStatusCode.OK) return undefined;\r\n    else {\r\n        const {errorType, description} = resp as ErrorRequestResponse;\r\n        const output: RemoteValidationErrors = {general: extractError({code: errorType, description}), fields: {}};\r\n        if (resp.status == HttpStatusCode.UNPROCESSABLE_ENTITY) {\r\n            const {errors} = resp as UnprocessableEntityRequestResponse;\r\n            //errors.forEach((e) => (output.fields[e.property] = e.codes.map(extractError)));\r\n            // Only keep the first error (makes displaying errors a lot easier)\r\n            errors.forEach((e) => (output.fields[e.property] = extractError(e.codes[0])));\r\n        }\r\n        return output;\r\n    }\r\n}\r\n\r\n/**\r\n * Get the non-specific error field from remote errors. If field-specific errors are available, yields undefined instead.\r\n * @param errors - Remote validation errors.\r\n */\r\nexport function generalError(errors?: RemoteValidationErrors): string | undefined {\r\n    if (!errors) return undefined;\r\n    else if (Object.keys(errors.fields).length > 0) return undefined;\r\n    else return errors.general;\r\n}\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {TokenDto} from \"../../api/dto\";\r\nimport {CredentialsStorageObject} from \"../../types\";\r\n\r\n/**\r\n * Override auth information in secure.\r\n * @param email - The user's email.\r\n * @param token - The user's authentication token.\r\n */\r\nexport function storeAuthInformation(email: string, token: TokenDto): void {\r\n    const toStore: CredentialsStorageObject = {email, token};\r\n    AsyncStorage.setItem(\"auth\", JSON.stringify(toStore));\r\n}\r\n\r\n/**\r\n * Remove the user's auth information from storage.\r\n */\r\nexport function discardAuthInformation(): void {\r\n    AsyncStorage.removeItem(\"auth\");\r\n}\r\n\r\n/**\r\n * Read auth information from storage.\r\n * @return an object containing the email and auth token, or false if SecureStore is unavailable or no data was stored.\r\n */\r\nexport async function readCachedCredentials(): Promise<false | CredentialsStorageObject> {\r\n    const raw = await AsyncStorage.getItem(\"auth\");\r\n    return raw ? JSON.parse(raw) : false;\r\n}\r\n","import {ThemeKey} from \"../../types\";\r\nimport {SupportedLocale} from \"../../localization\";\r\nimport i18n from \"i18n-js\";\r\nimport {CookiesPreferences} from \"../../model/user-settings\";\r\nimport {AppThunk} from \"../types\";\r\n\r\nexport enum SETTINGS_ACTION_TYPES {\r\n    SET_THEME = \"SETTINGS/SET_THEME\",\r\n    TOGGLE_THEME = \"SETTINGS/TOGGLE_THEME\",\r\n    SET_LOCALE = \"SETTINGS/SET_LOCALE\",\r\n    LOAD_COOKIES_PREFERENCES = \"SETTINGS/LOAD_COOKIES_PREFERENCES\",\r\n    SAVE_COOKIES_PREFERENCES = \"SETTINGS/SAVE_COOKIES_PREFERENCES\",\r\n    LOAD_VERSION_INFO = \"SETTINGS/LOAD_VERSION_INFO\",\r\n}\r\n\r\nexport type SetThemeAction = {\r\n    type: string;\r\n    theme: ThemeKey;\r\n    fromCache?: boolean;\r\n};\r\n\r\nexport type ToggleThemeAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetLocaleAction = {\r\n    type: string;\r\n    locale: SupportedLocale;\r\n    fromCache?: boolean;\r\n};\r\n\r\nexport type LoadCookiesPreferencesAction = {\r\n    type: string;\r\n    preferences: CookiesPreferences;\r\n    consentDate: Date;\r\n};\r\n\r\nexport type SaveCookiesPreferencesAction = {\r\n    type: string;\r\n    preferences: CookiesPreferences;\r\n};\r\n\r\nexport type LoadVersionInfoAction = {\r\n    type: string;\r\n    version: string | null;\r\n};\r\n\r\nexport type SettingsAction = SetThemeAction | SetLocaleAction | LoadCookiesPreferencesAction | LoadVersionInfoAction;\r\n\r\nexport const setTheme = (theme: ThemeKey, fromCache?: boolean): SetThemeAction =>\r\n    ({type: SETTINGS_ACTION_TYPES.SET_THEME, theme, fromCache} as SetThemeAction);\r\n\r\nexport const toggleTheme = (): ToggleThemeAction => ({type: SETTINGS_ACTION_TYPES.TOGGLE_THEME} as ToggleThemeAction);\r\n\r\nexport const setLocale = (locale: SupportedLocale, fromCache?: boolean): SetLocaleAction => {\r\n    i18n.locale = locale;\r\n    return {type: SETTINGS_ACTION_TYPES.SET_LOCALE, locale, fromCache} as SetLocaleAction;\r\n};\r\n\r\nexport const loadCookiesPreferences = (\r\n    preferences: CookiesPreferences,\r\n    consentDate: Date,\r\n): LoadCookiesPreferencesAction => ({\r\n    type: SETTINGS_ACTION_TYPES.LOAD_COOKIES_PREFERENCES,\r\n    preferences,\r\n    consentDate,\r\n});\r\n\r\nexport const saveCookiesPreferences = (preferences: CookiesPreferences): SaveCookiesPreferencesAction => ({\r\n    type: SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES,\r\n    preferences,\r\n});\r\n\r\nexport const loadVersionInfo = (version: string | null): LoadVersionInfoAction => ({\r\n    type: SETTINGS_ACTION_TYPES.LOAD_VERSION_INFO,\r\n    version,\r\n});\r\n\r\nexport const acceptAllCookies = (): AppThunk => async (dispatch) => {\r\n    dispatch(saveCookiesPreferences({auth: true, cache: true, settings: true}));\r\n};\r\n","import {OfferValueDto} from \"../api/dto\";\r\nimport {UserProfile} from \"./user-profile\";\r\n\r\n/**\r\n * Attempts to extract names from a given email.\r\n * @param email A valid email address.\r\n * @returns the first and last name if they were successfuly extracted, null otherwise.\r\n */\r\nexport function extractNamesFromEmail(email: string): {firstname: string; lastname: string} | null {\r\n    const splitName = email.split(\"@\")[0].split(\".\");\r\n    const capitalize = (str: string) => (str.length == 0 ? str : str[0].toUpperCase() + str.slice(1));\r\n    return splitName.length >= 2\r\n        ? {\r\n              firstname: capitalize(splitName[0]),\r\n              lastname: capitalize(splitName[1]),\r\n          }\r\n        : null;\r\n}\r\n\r\n/**\r\n * Filter only the offers that match a given profile.\r\n * @param offers A list of offer values.\r\n * @param profile A profile\r\n * @returns the offers that target the given profile.\r\n */\r\nexport function getMatchingOffers(offers: OfferValueDto[], profile: UserProfile): OfferValueDto[] {\r\n    return offers.filter((o: OfferValueDto) => {\r\n        if (\r\n            (!o.allowFemale && profile.gender === \"female\") ||\r\n            (!o.allowMale && profile.gender === \"male\") ||\r\n            (!o.allowOther && profile.gender === \"other\") ||\r\n            (!o.allowStaff && profile.type === \"staff\") ||\r\n            (!o.allowStudent && profile.type === \"student\")\r\n        )\r\n            return false;\r\n        return true;\r\n    });\r\n}\r\n","import {extractNamesFromEmail} from \"../../model/utils\";\r\nimport {PROFILE_ACTION_TYPES} from \"../profile/actions\";\r\nimport {AuthState, OnboardingState} from \"../types\";\r\nimport {\r\n    AuthAction,\r\n    LogInSuccessAction,\r\n    RegisterBeginAction,\r\n    RegisterSuccessAction,\r\n    ValidateAccountSuccessAction,\r\n    SetOnboardingValuesAction,\r\n    AUTH_ACTION_TYPES,\r\n    SetOnboardingOfferValueAction,\r\n    LogInFailureAction,\r\n} from \"./actions\";\r\n\r\nconst initialOnboardingState = (): OnboardingState => ({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    birthdate: null,\r\n    gender: null,\r\n    nationality: null,\r\n    type: null,\r\n    degree: null,\r\n    staffRoles: {},\r\n    languages: [],\r\n    offerValues: {},\r\n    interestIds: [],\r\n    educationFields: [],\r\n});\r\n\r\nexport const initialState: AuthState = {\r\n    authenticated: false,\r\n    token: null,\r\n    validated: false,\r\n    registerEmail: \"\",\r\n    validatedEmail: null,\r\n    accountNeedsRecovery: false,\r\n    onboarded: false,\r\n    onboarding: initialOnboardingState(),\r\n    onboardingIndex: 0,\r\n};\r\n\r\nexport const authReducer = (state: AuthState = initialState, action: AuthAction): AuthState => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.REGISTER_BEGIN: {\r\n            const {email} = <RegisterBeginAction>action;\r\n            return {\r\n                ...state,\r\n                registerEmail: email,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.REGISTER_SUCCESS: {\r\n            const {\r\n                user: {verificationToken, onboarded},\r\n            } = <RegisterSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                verificationToken,\r\n                onboarded,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_SUCCESS: {\r\n            const {email} = <ValidateAccountSuccessAction>action;\r\n            return {...state, validated: true, validatedEmail: email};\r\n        }\r\n        case AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_FAILURE: {\r\n            return {...state, validated: false};\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {\r\n                token,\r\n                user: {onboarded, email},\r\n            } = <LogInSuccessAction>action;\r\n\r\n            // Pre-fill some of the on-boarding values\r\n            const onboarding = {...state.onboarding};\r\n            if (!onboarded) {\r\n                const names = extractNamesFromEmail(email);\r\n                if (names) {\r\n                    onboarding.firstname = names.firstname;\r\n                    onboarding.lastname = names.lastname;\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                authenticated: true,\r\n                accountNeedsRecovery: false,\r\n                token,\r\n                onboarded,\r\n                onboarding,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_IN_FAILURE: {\r\n            const {needsRecovery} = action as LogInFailureAction;\r\n            return {\r\n                ...state,\r\n                accountNeedsRecovery: needsRecovery,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_IN_RECOVER_CANCEL: {\r\n            return {...state, accountNeedsRecovery: false};\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {\r\n                ...state,\r\n                token: null,\r\n                authenticated: false,\r\n                accountNeedsRecovery: false,\r\n                validated: false,\r\n                validatedEmail: null,\r\n                onboarded: false,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.BEGIN_ONBOARDING: {\r\n            return {...state, onboardingIndex: 0};\r\n        }\r\n        case AUTH_ACTION_TYPES.PREVIOUS_ONBOARDING_SLIDE: {\r\n            return {...state, onboardingIndex: state.onboardingIndex - 1};\r\n        }\r\n        case AUTH_ACTION_TYPES.NEXT_ONBOARDING_SLIDE: {\r\n            return {...state, onboardingIndex: state.onboardingIndex + 1};\r\n        }\r\n        case AUTH_ACTION_TYPES.SET_ONBOARDING_VALUES: {\r\n            const {values} = <SetOnboardingValuesAction>action;\r\n            return {...state, onboarding: {...state.onboarding, ...values}};\r\n        }\r\n        case AUTH_ACTION_TYPES.SET_ONBOARDING_OFFER_VALUE: {\r\n            const {id, value} = <SetOnboardingOfferValueAction>action;\r\n            return {\r\n                ...state,\r\n                onboarding: {\r\n                    ...state.onboarding,\r\n                    offerValues: {\r\n                        ...state.onboarding.offerValues,\r\n                        [id]: value,\r\n                    },\r\n                },\r\n            };\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            return {...state, onboarded: true, onboarding: initialOnboardingState()};\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export type Degree = \"bsc1\" | \"bsc2\" | \"bsc3\" | \"m1\" | \"m2\" | \"phd\";\r\nexport const DEGREES: Degree[] = [\"bsc1\", \"bsc2\", \"bsc3\", \"m1\", \"m2\", \"phd\"];\r\n\r\nexport type LanguageLevel = \"a1\" | \"a2\" | \"b1\" | \"b2\" | \"c1\" | \"c2\" | \"native\";\r\nexport const LANGUAGE_LEVELS: LanguageLevel[] = [\"a1\", \"a2\", \"b1\", \"b2\", \"c1\", \"c2\", \"native\"];\r\n\r\nexport type Role = \"student\" | \"staff\";\r\nexport const ROLES: Role[] = [\"student\", \"staff\"];\r\n\r\nexport type StaffRole = \"teaching\" | \"research\" | \"administration\" | \"technical\" | \"other\";\r\nexport const STAFF_ROLES: StaffRole[] = [\"teaching\", \"research\", \"administration\", \"technical\", \"other\"];\r\n\r\n// MaterialIcons\r\nexport const STAFF_ROLE_ICONS = [\"school\", \"library-books\", \"account-balance\", \"build\", \"help\"];\r\n// \"verified-user\" icon for ambassadors?\r\n\r\nexport type Gender = \"male\" | \"female\" | \"other\";\r\nexport const GENDERS: Gender[] = [\"male\", \"female\", \"other\"];\r\n\r\nexport const MIN_AGE = 16;\r\n","import * as Yup from \"yup\";\r\nimport {DEGREES} from \"../constants/profile-constants\";\r\n\r\nexport const MIN_PASSWORD_LENGTH = 8;\r\n\r\nexport const VALIDATOR_EMAIL_SIGNUP = Yup.string().required(\"validation.required\").email(\"validation.email.invalid\");\r\n\r\nexport const VALIDATOR_PASSWORD_SIGNUP = Yup.string()\r\n    .required(\"validation.required\")\r\n    .min(MIN_PASSWORD_LENGTH, \"validation.password.tooShort\")\r\n    // At least one digit\r\n    .matches(/(?=.*\\d)/, \"validation.password.noDigit\")\r\n    // At least one lower-case character\r\n    .matches(/(?=.*[a-z])/, \"validation.password.noLowerCase\")\r\n    // At least one upper-case character\r\n    .matches(/(?=.*[A-Z])/, \"validation.password.noUpperCase\")\r\n    // At least one symbol\r\n    .matches(/(?=.*[#@$!%*?&^\\\\/-_+=()[\\]|\"'~<>:;§.])/, \"validation.password.noSymbol\");\r\n\r\nexport const VALIDATOR_PASSWORD_REPEAT = Yup.string()\r\n    .required(\"validation.required\")\r\n    .oneOf([Yup.ref(\"password\")], \"validation.password.repeatWrong\");\r\n\r\nexport const VALIDATOR_EMAIL_LOGIN = Yup.string().required(\"validation.required\").email(\"validation.email.invalid\");\r\nexport const VALIDATOR_PASSWORD_LOGIN = Yup.string().required(\"validation.required\");\r\n\r\nexport const VALIDATOR_FIRSTNAME = Yup.string().trim().required(\"validation.required\");\r\n\r\nexport const VALIDATOR_LASTNAME = Yup.string().trim().required(\"validation.required\");\r\n\r\nexport const VALIDATOR_ONBOARDING_BIRTHDATE = Yup.date().nullable().required(\"validation.required\"); // make it nullable so we can use null to represent a non given value (will fail the 'required' test anyway)\r\nexport const VALIDATOR_ONBOARDING_GENDER = Yup.string().nullable().required(\"validation.required\");\r\nexport const VALIDATOR_ONBOARDING_NATIONALITY = Yup.string().nullable().required(\"validation.required\");\r\nexport const VALIDATOR_ONBOARDING_DEGREE = Yup.string().nullable().oneOf(DEGREES, \"validation.required\");\r\nexport const VALIDATOR_ONBOARDING_LANGUAGES = Yup.array().required(\"validation.addAtLeastOne\");\r\nexport const VALIDATOR_ONBOARDING_INTERESTS = Yup.array().required(\"validation.addAtLeastOne\");\r\n","import {MIN_PASSWORD_LENGTH} from \"../validators\";\r\n\r\nexport default {\r\n    en: {\r\n        locales: {\r\n            en: \"English\",\r\n            fr: \"French\",\r\n        },\r\n        appName: \"SEA-EU Around\",\r\n        // General translations\r\n        search: \"Search\",\r\n        send: \"Send\",\r\n        cancel: \"Cancel\",\r\n        ok: \"OK\",\r\n        save: \"Save\",\r\n        noResultsFound: \"No results found\",\r\n        apply: \"Apply\",\r\n        logOut: \"Log out\",\r\n        // Component-related\r\n        picker: {\r\n            callToAction: \"Select (%d selected)\",\r\n        },\r\n        dateInput: {\r\n            dayPlaceholder: \"DD\",\r\n            monthPlaceholder: \"MM\",\r\n            yearPlaceholder: \"YYYY\",\r\n        },\r\n        nationalityPicker: {\r\n            placeholder: \"Select a nationality\",\r\n        },\r\n        // Login and sign-up forms\r\n        login: \"Log in\",\r\n        emailAddress: \"Email address\",\r\n        password: \"Password\",\r\n        passwordRepeat: \"Repeat password\",\r\n        forgotPassword: \"Forgot Password\",\r\n        forgotPasswordExplanation:\r\n            \"Enter the email address associated with your account below. Instructions for choosing a new password will be sent shortly.\",\r\n        newPassword: \"New Password\",\r\n        signupWelcome: \"We can't wait for you to join our community!\",\r\n        createAccount: \"Create account\",\r\n        // Email validation screen\r\n        emailValidation: {\r\n            validating: \"Validating\",\r\n            success: [\"Your account has been validated! You may now \", \"log in\"],\r\n        },\r\n        // Legal disclaimers\r\n        legal: {\r\n            modal: {\r\n                disclaimer1:\r\n                    \"Please understand that you will not be able to use our services if you decide to decline the terms of service.\",\r\n                disclaimer2: \"Declining will abort the profile creation process.\",\r\n            },\r\n            decline: \"Decline\",\r\n            accept: \"Accept\",\r\n            readMore: [\"Read more about our terms & conditions \", \"here\", \".\"],\r\n        },\r\n        // Client-side validation strings\r\n        validation: {\r\n            required: \"Required field.\",\r\n            atLeastOne: \"Please select at least one.\",\r\n            addAtLeastOne: \"Please add at least one.\",\r\n            email: {\r\n                invalid: \"Please provide a valid email address.\",\r\n            },\r\n            password: {\r\n                tooShort: `Your password must have at least ${MIN_PASSWORD_LENGTH} characters.`,\r\n                noDigit: \"Your password must contain at least one digit.\",\r\n                noUpperCase: \"Your password must contain at least one upper case character.\",\r\n                noLowerCase: \"Your password must contain at least one lower case character.\",\r\n                noSymbol: \"Your password must contain at least one symbol (#@$!%*?&).\",\r\n                repeatWrong: \"These passwords don't match.\",\r\n            },\r\n            language: {\r\n                atLeastOne: \"Please select at least one language.\",\r\n                specifyLevel: \"Please specify a level for your languages.\",\r\n            },\r\n            date: {\r\n                tooYoung: \"You must be 16 or older to join this platform.\",\r\n                invalid: \"Please enter a valid date.\",\r\n            },\r\n        },\r\n        // Server-side errors\r\n        error: {\r\n            error_user_not_verified: \"This account's email address has not been verified yet.\",\r\n            user_not_found: \"User not found.\",\r\n            email_or_password_incorrect: \"Incorrect email or password.\",\r\n            reset_password_no_token: \"Could not fulfill this request.\",\r\n            unique: {\r\n                user: {\r\n                    email: \"This email address is already in use.\",\r\n                },\r\n            },\r\n            validation: {\r\n                email: {\r\n                    is_email: \"Please provide a valid email address.\",\r\n                    is_sea_email_constraint: \"Your email address must match one of our partner universities.\",\r\n                },\r\n            },\r\n        },\r\n        // General translations related to the profile\r\n        myProfile: \"My Profile\",\r\n        firstname: \"First name\",\r\n        lastname: \"Last name\",\r\n        nationality: \"Nationality\",\r\n        university: \"University\",\r\n        countryPickerLanguageCode: \"common\", // see TranslationLanguageCode from react-native-country-picker-modal\r\n        profileType: \"Type\",\r\n        profileTypes: \"Types\",\r\n        offers: \"Offers\",\r\n        positions: \"Positions\",\r\n        allRoles: {\r\n            student: \"Student\",\r\n            staff: \"Staff\",\r\n        },\r\n        staffRoles: {\r\n            teaching: \"Teaching\",\r\n            research: \"Research\",\r\n            administration: \"Administration\",\r\n            technical: \"Technical\",\r\n            other: \"Other\",\r\n        },\r\n        gender: \"Gender\",\r\n        genders: {\r\n            male: \"Male\",\r\n            female: \"Female\",\r\n            other: \"Other\",\r\n        },\r\n        dateOfBirth: \"Date of birth\",\r\n        months: {\r\n            0: \"January\",\r\n            1: \"February\",\r\n            2: \"March\",\r\n            3: \"April\",\r\n            4: \"May\",\r\n            5: \"June\",\r\n            6: \"July\",\r\n            7: \"August\",\r\n            8: \"September\",\r\n            9: \"October\",\r\n            10: \"November\",\r\n            11: \"December\",\r\n        },\r\n        spokenLanguages: \"Spoken languages\",\r\n        languageLevels: {\r\n            a1: \"A1\",\r\n            a2: \"A2\",\r\n            b1: \"B1\",\r\n            b2: \"B2\",\r\n            c1: \"C1\",\r\n            c2: \"C2\",\r\n            native: \"Native\",\r\n        },\r\n        levelOfStudy: \"Level of study\",\r\n        degrees: {\r\n            bsc1: \"BSc1\",\r\n            bsc2: \"BSc2\",\r\n            bsc3: \"BSc3\",\r\n            m1: \"M1\",\r\n            m2: \"M2\",\r\n            phd: \"PhD\",\r\n        },\r\n        // Education fields\r\n        fieldsOfEducation: \"Fields of education\",\r\n        educationFieldsPicker: {\r\n            placeholder: \"Select fields\",\r\n            searchPlaceholder: \"Search\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        educationFieldCategories: {\r\n            \"generic-programmes-qualifications\": \"Generic programmes and qualifications\",\r\n            education: \"Education\",\r\n            \"arts-humanities\": \"Arts and humanities\",\r\n            \"social-sciences-journalism-information\": \"Social sciences, journalism and information\",\r\n            \"business-administration-law\": \"Business, administration and law\",\r\n            \"natural-sciences-mathematics-statistics\": \"Natural sciences, mathematics and statistics\",\r\n            \"information-communication-technologies\": \"Information and Communication Technologies (ICTs)\",\r\n            \"engineering-manufacturing-construction\": \"Engineering, manufacturing and construction\",\r\n            \"agriculture-forestry-fisheries-veterinary\": \"Agriculture, forestry, fisheries and veterinary\",\r\n            \"health-welfare\": \"Health and welfare\",\r\n            services: \"Services\",\r\n        },\r\n        educationFields: {\r\n            \"basic-programmes-qualifications\": \"Basic programmes and qualifications\",\r\n            \"literacy-numeracy\": \"Literacy and numeracy\",\r\n            \"personal-skills-development\": \"Personal skills and development\",\r\n            \"education-science\": \"Education science\",\r\n            \"training-for-pre-school-teachers\": \"Training for pre-school teachers\",\r\n            \"teacher-training-without-subject-specialisation\": \"Teacher training without subject specialisation\",\r\n            \"teacher-training-with-subject-specialisation\": \"Teacher training with subject specialisation\",\r\n            \"audio-visual-techniques-media-production\": \"Audio-visual techniques and media production\",\r\n            \"fashion-interior-industrial-design\": \"Fashion, interior and industrial design\",\r\n            \"fine-arts\": \"Fine arts\",\r\n            handicrafts: \"Handicrafts\",\r\n            \"music-performing-arts\": \"Music and performing arts\",\r\n            \"religion-theology\": \"Religion and theology\",\r\n            \"history-archaeology\": \"History and archaeology\",\r\n            \"philosophy-ethics\": \"Philosophy and ethics\",\r\n            \"language-acquisition\": \"Language acquisition\",\r\n            \"literature-linguistics\": \"Literature and linguistics\",\r\n            economics: \"Economics\",\r\n            \"political-sciences-civics\": \"Political sciences and civics\",\r\n            psychology: \"Psychology\",\r\n            \"sociology-cultural-studies\": \"Sociology and cultural studies\",\r\n            \"journalism-reporting\": \"Journalism and reporting\",\r\n            \"library-information-archival-studies\": \"Library, information and archival studies\",\r\n            \"accounting-taxation\": \"Accounting and taxation\",\r\n            \"finance-banking-insurance\": \"Finance, banking and insurance\",\r\n            \"management-administration\": \"Management and administration\",\r\n            \"marketing-advertising\": \"Marketing and advertising\",\r\n            \"secretarial-office-work\": \"Secretarial and office work\",\r\n            \"wholesale-retail-sales\": \"Wholesale and retail sales\",\r\n            \"work-skills\": \"Work skills\",\r\n            law: \"Law\",\r\n            biology: \"Biology\",\r\n            biochemistry: \"Biochemistry\",\r\n            \"environmental-sciences\": \"Environmental sciences\",\r\n            \"natural-environments-wildlife\": \"Natural environments and wildlife\",\r\n            chemistry: \"Chemistry\",\r\n            \"earth-sciences\": \"Earth sciences\",\r\n            physics: \"Physics\",\r\n            mathematics: \"Mathematics\",\r\n            statistics: \"Statistics\",\r\n            \"computer-use\": \"Computer use\",\r\n            \"database-network-design-administration\": \"Database and network design and administration\",\r\n            \"software-applications-development-analysis\": \"Software and applications development and analysis\",\r\n            \"chemical-engineering-processes\": \"Chemical engineering and processes\",\r\n            \"environmental-protection-technology\": \"Environmental protection technology\",\r\n            \"electricity-energy\": \"Electricity and energy\",\r\n            \"electronics-automation\": \"Electronics and automation\",\r\n            \"mechanics-metal-trades\": \"Mechanics and metal trades\",\r\n            \"motor-vehicles-ships-aircraft\": \"Motor vehicles, ships and aircraft\",\r\n            \"food-processing\": \"Food processing\",\r\n            materials: \"Materials (glass, paper, plastic and wood)\",\r\n            textiles: \"Textiles (clothes, footwear and leather)\",\r\n            \"mining-extraction\": \"Mining and extraction\",\r\n            \"architecture-town-planning\": \"Architecture and town planning\",\r\n            \"building-civil-engineering\": \"Building and civil engineering\",\r\n            \"crop-livestock-production\": \"Crop and livestock production\",\r\n            horticulture: \"Horticulture\",\r\n            forestry: \"Forestry\",\r\n            fisheries: \"Fisheries\",\r\n            veterinary: \"Veterinary\",\r\n            \"dental-studies\": \"Dental studies\",\r\n            medicine: \"Medicine\",\r\n            \"nursing-midwifery\": \"Nursing and midwifery\",\r\n            \"medical-diagnostic-treatment-technology\": \"Medical diagnostic and treatment technology\",\r\n            \"therapy-rehabilitation\": \"Therapy and rehabilitation\",\r\n            pharmacy: \"Pharmacy\",\r\n            \"traditional-complementary-medicine-therapy\": \"Traditional and complementary medicine and therapy\",\r\n            \"care-elderly-disabled-adults\": \"Care of the elderly and of disabled adults\",\r\n            \"child-care-youth-services\": \"Child care and youth services\",\r\n            \"social-work-counselling\": \"Social work and counselling\",\r\n            \"domestic-services\": \"Domestic services\",\r\n            \"hair-beauty-services\": \"Hair and beauty services\",\r\n            \"hotel-restaurants-catering\": \"Hotel, restaurants and catering\",\r\n            sports: \"Sports\",\r\n            \"travel-tourism-leisure\": \"Travel, tourism and leisure\",\r\n            \"community-sanitation\": \"Community sanitation\",\r\n            \"occupational-health-safety\": \"Occupational health and safety\",\r\n            \"military-defence\": \"Military and defence\",\r\n            \"protection-of-persons-property\": \"Protection of persons and property\",\r\n            \"transport-services\": \"Transport services\",\r\n        },\r\n        // 404 not found screen\r\n        notFoundScreen: {\r\n            title: \"404: Page not found.\",\r\n            subtitle: \"This page doesn't exist.\",\r\n            redirect: \"Go to home screen\",\r\n        },\r\n        // University-related\r\n        universities: {\r\n            \"univ-cadiz\": \"University of Cádiz\",\r\n            \"univ-brest\": \"University of Bretagne Occidentale\",\r\n            \"univ-gdansk\": \"University of Gdańsk\",\r\n            \"univ-malta\": \"University of Malta\",\r\n            \"univ-kiel\": \"University of Kiel\",\r\n            \"univ-split\": \"University of Split\",\r\n        },\r\n        universitiesPicker: {\r\n            placeholder: \"Select universities\",\r\n            searchPlaceholder: \"Search\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        // On-boarding slides\r\n        onboarding: {\r\n            name: {\r\n                title: \"Welcome\",\r\n                subtitle:\r\n                    \"Before we start, we need to know a little bit more about you to ensure the best possible recommendations.\",\r\n            },\r\n            profile1: {\r\n                title: \"Profile\",\r\n            },\r\n            profile2: {\r\n                title: \"Languages & Interests\",\r\n            },\r\n            role: {\r\n                title: \"I am a...\",\r\n            },\r\n            roleSpecific1: {\r\n                student: {\r\n                    title: \"Student information\",\r\n                },\r\n                staff: {\r\n                    title: \"Staff roles\",\r\n                },\r\n            },\r\n            offersMeet: {\r\n                title: \"Meet\",\r\n                subtitle: \"Meet up with new friends in real life.\",\r\n            },\r\n            offersDiscover: {\r\n                title: \"Discover\",\r\n                subtitle: \"Find out about other cultures.\",\r\n            },\r\n            offersCollaborate: {\r\n                title: \"Collaborate\",\r\n                subtitle: \"Find people to work on projects, academic or not.\",\r\n            },\r\n            legal1: {\r\n                title: \"Terms & Conditions\",\r\n                text:\r\n                    \"As explained in details in our Terms & Conditions, you agree to use «SEA-EU Around» and its services only to be put into contact, on a non-business and non-profit basis, with people wishing to meet, collaborate and interact online or in the frame of a mobility. You commit to carry out respectful exchanges with other members. Your name and surname will be visible by other members.\",\r\n            },\r\n            legal2: {\r\n                title: \"Data Policy\",\r\n                text:\r\n                    \"In the context of your use of SEA-EU Around, you will provide some personal data to create your profile as further explained in our Terms & Conditions. This data is collected and processed by UBO through SEA-EU Around in order to enable matching among Members, according to needs/offers and interests defined by Members of SEA-EU Around. Your data will be visible only by  other Members.\",\r\n            },\r\n            legal3: {\r\n                title: \"Cookies\",\r\n                text:\r\n                    \"I acknowledge that cookies might be used. The information is kept only for application purposes and does not permit to identify the Member except for the cookie enabling UBO to re-authenticate the Member on its arrival on SEA-EU Around, saving the Member from having to re-enter their password at each connection.\",\r\n            },\r\n            back: \"Back\",\r\n            next: \"Next\",\r\n            leave: \"Leave\",\r\n            submit: \"Submit\",\r\n            success: {\r\n                title: \"Nice to meet you!\",\r\n                subtitle: \"Your profile is now created.\",\r\n                button: \"Get Started\",\r\n            },\r\n            quit: {\r\n                title: \"Quit on-boarding\",\r\n                text: \"Do you really wish to leave? You can resume later.\",\r\n                cancel: \"Cancel\",\r\n                yes: \"Yes\",\r\n            },\r\n        },\r\n        // Language components\r\n        languagePicker: {\r\n            placeholderSingle: \"Language\",\r\n            placeholderMultiple: \"Select languages\",\r\n            searchPlaceholder: \"Search for languages\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        languageLevelPicker: {\r\n            placeholder: \"Level\",\r\n        },\r\n        languageNames: {\r\n            aa: \"Afar\",\r\n            ab: \"Abkhazian\",\r\n            ae: \"Avestan\",\r\n            af: \"Afrikaans\",\r\n            ak: \"Akan\",\r\n            am: \"Amharic\",\r\n            an: \"Aragonese\",\r\n            ar: \"Arabic\",\r\n            as: \"Assamese\",\r\n            av: \"Avaric\",\r\n            ay: \"Aymara\",\r\n            az: \"Azerbaijani\",\r\n            ba: \"Bashkir\",\r\n            be: \"Belarusian\",\r\n            bg: \"Bulgarian\",\r\n            bh: \"Bihari languages\",\r\n            bi: \"Bislama\",\r\n            bm: \"Bambara\",\r\n            bn: \"Bengali\",\r\n            bo: \"Tibetan\",\r\n            br: \"Breton\",\r\n            bs: \"Bosnian\",\r\n            ca: \"Catalan / Valencian\",\r\n            ce: \"Chechen\",\r\n            ch: \"Chamorro\",\r\n            co: \"Corsican\",\r\n            cr: \"Cree\",\r\n            cs: \"Czech\",\r\n            cu: \"Old Bulgarian / Church Slavic / Slavonic\",\r\n            cv: \"Chuvash\",\r\n            cy: \"Welsh\",\r\n            da: \"Danish\",\r\n            de: \"German\",\r\n            dv: \"Divehi / Dhivehi / Maldivian\",\r\n            dz: \"Dzongkha\",\r\n            ee: \"Ewe\",\r\n            el: \"Greek\",\r\n            en: \"English\",\r\n            eo: \"Esperanto\",\r\n            es: \"Spanish\",\r\n            et: \"Estonian\",\r\n            eu: \"Basque\",\r\n            fa: \"Persian\",\r\n            ff: \"Fulah\",\r\n            fi: \"Finnish\",\r\n            fj: \"Fijian\",\r\n            fo: \"Faroese\",\r\n            fr: \"French\",\r\n            fy: \"Western Frisian\",\r\n            ga: \"Irish\",\r\n            gd: \"Scottish Gaelic\",\r\n            gl: \"Galician\",\r\n            gn: \"Guarani\",\r\n            gu: \"Gujarati\",\r\n            gv: \"Manx\",\r\n            ha: \"Hausa\",\r\n            he: \"Hebrew\",\r\n            hi: \"Hindi\",\r\n            ho: \"Hiri Motu\",\r\n            hr: \"Croatian\",\r\n            ht: \"Haitian Creole\",\r\n            hu: \"Hungarian\",\r\n            hy: \"Armenian\",\r\n            hz: \"Herero\",\r\n            ia: \"Interlingua\",\r\n            id: \"Indonesian\",\r\n            ie: \"Interlingue / Occidental\",\r\n            ig: \"Igbo\",\r\n            ii: \"Sichuan Yi / Nuosu\",\r\n            ik: \"Inupiaq\",\r\n            io: \"Ido\",\r\n            is: \"Icelandic\",\r\n            it: \"Italian\",\r\n            iu: \"Inuktitut\",\r\n            ja: \"Japanese\",\r\n            jv: \"Javanese\",\r\n            ka: \"Georgian\",\r\n            kg: \"Kongo\",\r\n            ki: \"Kikuyu / Gikuyu\",\r\n            kj: \"Kuanyama / Kwanyama\",\r\n            kk: \"Kazakh\",\r\n            kl: \"Kalaallisut / Greenlandic\",\r\n            km: \"Central Khmer\",\r\n            kn: \"Kannada\",\r\n            ko: \"Korean\",\r\n            kr: \"Kanuri\",\r\n            ks: \"Kashmiri\",\r\n            ku: \"Kurdish\",\r\n            kv: \"Komi\",\r\n            kw: \"Cornish\",\r\n            ky: \"Kirghiz / Kyrgyz\",\r\n            la: \"Latin\",\r\n            lb: \"Luxembourgish / Letzeburgesch\",\r\n            lg: \"Ganda\",\r\n            li: \"Limburgan / Limburger / Limburgish\",\r\n            ln: \"Lingala\",\r\n            lo: \"Lao\",\r\n            lt: \"Lithuanian\",\r\n            lu: \"Luba-Katanga\",\r\n            lv: \"Latvian\",\r\n            mg: \"Malagasy\",\r\n            mh: \"Marshallese\",\r\n            mi: \"Maori\",\r\n            mk: \"Macedonian\",\r\n            ml: \"Malayalam\",\r\n            mn: \"Mongolian\",\r\n            mr: \"Marathi\",\r\n            ms: \"Malay\",\r\n            mt: \"Maltese\",\r\n            my: \"Burmese\",\r\n            na: \"Nauru\",\r\n            nb: \"Norwegian Bokmål\",\r\n            nd: \"North Ndebele\",\r\n            ne: \"Nepali\",\r\n            ng: \"Ndonga\",\r\n            nl: \"Dutch / Flemish\",\r\n            nn: \"Norwegian Nynorsk\",\r\n            no: \"Norwegian\",\r\n            nr: \"South Ndebele\",\r\n            nv: \"Navajo / Navaho\",\r\n            ny: \"Chichewa / Chewa / Nyanja\",\r\n            oc: \"Occitan\",\r\n            oj: \"Ojibwa\",\r\n            om: \"Oromo\",\r\n            or: \"Oriya\",\r\n            os: \"Ossetian / Ossetic\",\r\n            pa: \"Punjabi / Panjabi\",\r\n            pi: \"Pali\",\r\n            pl: \"Polish\",\r\n            ps: \"Pashto / Pushto\",\r\n            pt: \"Portuguese\",\r\n            qu: \"Quechua\",\r\n            rc: \"Reunionese\",\r\n            rm: \"Romansh\",\r\n            rn: \"Rundi\",\r\n            ro: \"Romanian / Moldavian\",\r\n            ru: \"Russian\",\r\n            rw: \"Kinyarwanda\",\r\n            sa: \"Sanskrit\",\r\n            sc: \"Sardinian\",\r\n            sd: \"Sindhi\",\r\n            se: \"Northern Sami\",\r\n            sg: \"Sango\",\r\n            sh: \"Serbo-Croatian\",\r\n            si: \"Sinhala / Sinhalese\",\r\n            sk: \"Slovak\",\r\n            sl: \"Slovenian\",\r\n            sm: \"Samoan\",\r\n            sn: \"Shona\",\r\n            so: \"Somali\",\r\n            sq: \"Albanian\",\r\n            sr: \"Serbian\",\r\n            ss: \"Swati\",\r\n            st: \"Southern Sotho\",\r\n            su: \"Sundanese\",\r\n            sv: \"Swedish\",\r\n            sw: \"Swahili\",\r\n            ta: \"Tamil\",\r\n            te: \"Telugu\",\r\n            tg: \"Tajik\",\r\n            th: \"Thai\",\r\n            ti: \"Tigrinya\",\r\n            tk: \"Turkmen\",\r\n            tl: \"Tagalog\",\r\n            tn: \"Tswana\",\r\n            to: \"Tonga (Tonga Islands)\",\r\n            tr: \"Turkish\",\r\n            ts: \"Tsonga\",\r\n            tt: \"Tatar\",\r\n            tw: \"Twi\",\r\n            ty: \"Tahitian\",\r\n            ug: \"Uighur / Uyghur\",\r\n            uk: \"Ukrainian\",\r\n            ur: \"Urdu\",\r\n            uz: \"Uzbek\",\r\n            ve: \"Venda\",\r\n            vi: \"Vietnamese\",\r\n            vo: \"Volapük\",\r\n            wa: \"Walloon\",\r\n            wo: \"Wolof\",\r\n            xh: \"Xhosa\",\r\n            yi: \"Yiddish\",\r\n            yo: \"Yoruba\",\r\n            za: \"Zhuang / Chuang\",\r\n            zh: \"Chinese\",\r\n            zu: \"Zulu\",\r\n        },\r\n        // Interests-related\r\n        interests: \"Interests\",\r\n        chooseInterests: \"Choose interests\",\r\n        interestsPicker: {\r\n            placeholder: \"Select interests\",\r\n            searchPlaceholder: \"Search\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        interestNames: {\r\n            activism: \"Activism\",\r\n            art: \"Art\",\r\n            astrology: \"Astrology\",\r\n            baking: \"Baking\",\r\n            bbq: \"BBQ\",\r\n            blogging: \"Blogging\",\r\n            \"board-games\": \"Board games\",\r\n            brunch: \"Brunch\",\r\n            \"cat-lover\": \"Cat Lover\",\r\n            climbing: \"Climbing\",\r\n            coffee: \"Coffee\",\r\n            comedy: \"Comedy\",\r\n            cooking: \"Cooking\",\r\n            couchsurfing: \"Couch-surfing\",\r\n            \"craft-beer\": \"Craft beer\",\r\n            crossfit: \"Crossfit\",\r\n            cycling: \"Cycling\",\r\n            dancing: \"Dancing\",\r\n            diy: \"DIY\",\r\n            \"dog-lover\": \"Dog Lover\",\r\n            environmentalism: \"Environmentalism\",\r\n            esports: \"E-Sports\",\r\n            expositions: \"Expositions\",\r\n            fashion: \"Fashion\",\r\n            festivals: \"Festivals\",\r\n            fishing: \"Fishing\",\r\n            foodie: \"Foodie\",\r\n            football: \"Football\",\r\n            gamer: \"Gamer\",\r\n            gardening: \"Gardening\",\r\n            golf: \"Golf\",\r\n            \"grab-a-drink\": \"Grab a drink\",\r\n            guitar: \"Guitar\",\r\n            \"happy-hour\": \"Happy hour\",\r\n            hiking: \"Hiking\",\r\n            instagram: \"Instagram\",\r\n            investing: \"Investing\",\r\n            karaoke: \"Karaoke\",\r\n            \"language-exchange\": \"Language exchange\",\r\n            movies: \"Movies\",\r\n            museum: \"Museum\",\r\n            music: \"Music\",\r\n            netflix: \"Netflix\",\r\n            outdoors: \"Outdoors\",\r\n            parties: \"Parties\",\r\n            photography: \"Photography\",\r\n            piano: \"Piano\",\r\n            picnicking: \"Picnicking\",\r\n            \"playing-music\": \"Playing music\",\r\n            podcasts: \"Podcasts\",\r\n            politics: \"Politics\",\r\n            reading: \"Reading\",\r\n            \"road-trips\": \"Road trips\",\r\n            running: \"Running\",\r\n            sailing: \"Sailing\",\r\n            shopping: \"Shopping\",\r\n            skateboarder: \"Skateboarding\",\r\n            skiing: \"Skiing\",\r\n            sneakers: \"Sneakers\",\r\n            snowboarding: \"Snowboarding\",\r\n            spirituality: \"Spirituality\",\r\n            sports: \"Sports\",\r\n            \"start-ups\": \"Start ups\",\r\n            \"street-food\": \"Street food\",\r\n            surfing: \"Surfing\",\r\n            swimming: \"Swimming\",\r\n            tango: \"Tango\",\r\n            tattoos: \"Tattoos\",\r\n            tea: \"Tea\",\r\n            tennis: \"Tennis\",\r\n            theater: \"Theater\",\r\n            travel: \"Travel\",\r\n            trivia: \"Trivia\",\r\n            vegan: \"Vegan\",\r\n            vegetarian: \"Vegetarian\",\r\n            volunteering: \"Volunteering\",\r\n            walking: \"Walking\",\r\n            \"walking-my-dog\": \"Walking my dog\",\r\n            wine: \"Wine\",\r\n            \"working-out\": \"Working out\",\r\n            writer: \"Writing\",\r\n            yoga: \"Yoga\",\r\n        },\r\n        // Offer-related\r\n        offersPreText: \"I am open to...\",\r\n        offerCategories: {\r\n            meet: \"Meet\",\r\n            discover: \"Discover\",\r\n            collaborate: \"Collaborate\",\r\n        },\r\n        offerSettings: {\r\n            genders: \"Target genders\",\r\n            roles: \"Target positions\",\r\n        },\r\n        allOffers: {\r\n            \"grab-a-drink\": {\r\n                name: \"Grab a drink\",\r\n                help: \"I am open to having a drink with the people I meet on this platform.\",\r\n            },\r\n            \"provide-a-couch\": {\r\n                name: \"Provide a couch\",\r\n                help: \"I am open to letting someone sleep on my couch.\",\r\n            },\r\n            \"get-into-campus-life\": {\r\n                name: \"Get into campus life\",\r\n                help: \"I am open to helping someone visit my campus.\",\r\n            },\r\n            \"cowork-on-a-project\": {\r\n                name: \"Co-work on a project\",\r\n                help: \"I am looking for collaborators for a project.\",\r\n            },\r\n            \"answer-academic-questions\": {\r\n                name: \"Answer academic questions\",\r\n                help: \"I can give information about my university or answer to general academic questions.\",\r\n            },\r\n            \"share-interests\": {\r\n                name: \"Share interests\",\r\n                help: \"I would like to chat with other users about common interests.\",\r\n            },\r\n            \"language-tandem\": {\r\n                name: \"Join a language tandem\",\r\n                help: \"I am willing to join a language tandem to help others learn one of my languages.\",\r\n            },\r\n        },\r\n        // Unmatch modal\r\n        unmatch: {\r\n            text: \"Are you sure you want to unmatch {{firstname}}? You will not be able to communicate anymore.\",\r\n            blockQuestion: \"If you don't want {{firstname}} to be able to find you anymore, you can also block them:\",\r\n            action: \"Unmatch\",\r\n        },\r\n        // Block modal\r\n        block: {\r\n            warning:\r\n                \"Are you sure you want to block this user? You and {{firstname}} will not be able to find each other anymore.\",\r\n            action: \"Block\",\r\n        },\r\n        // Welcome screen\r\n        welcomeScreen: {\r\n            signIn: \"Log in\",\r\n            signUp: \"Sign up\",\r\n            subtitle: \"Join an alliance united around the values of European identity.\",\r\n        },\r\n        // Login\r\n        loginForm: {\r\n            title: \"Welcome Back!\",\r\n            titleFirstLaunch: \"Welcome!\",\r\n            logIn: \"Log in\",\r\n            signUp: \"Sign up\",\r\n            or: \"or\",\r\n        },\r\n        // Cookies\r\n        cookies: {\r\n            title: \"Cookies\",\r\n            bannerText:\r\n                \"We use cookies to provide you with the best possible user experience.\\nOur usage of cookies includes caching data for faster loading, storing your preferences and authentication. We do not collect any information that could be used for tracking or advertising.\",\r\n            acceptAll: \"Accept cookies\",\r\n            customize: \"Customize\",\r\n            preferences: {\r\n                text:\r\n                    \"We offer you the ability to choose what information will be stored on your device when using SEA-EU Around.\",\r\n                auth: {\r\n                    name: \"Authentication\",\r\n                    description: \"Store information used to sign-in automatically when starting the app.\",\r\n                },\r\n                cache: {\r\n                    name: \"Cache\",\r\n                    description: \"Store some data on your device (less than 1MB) for faster loading.\",\r\n                },\r\n                settings: {name: \"Settings\", description: \"Store your settings (e.g. theme and locale).\"},\r\n            },\r\n        },\r\n        // Bug report\r\n        bugReport: {\r\n            mailSubject: \"Bug report from the app\",\r\n            mailTitle: \"Description of the bug (with steps to reproduce it if possible):\",\r\n        },\r\n        // Report\r\n        report: {\r\n            title: \"Report\",\r\n            send: \"Send\",\r\n            cancel: \"Cancel\",\r\n            what: \"What / who?\",\r\n            why: \"Why?\",\r\n            typePlaceholder: \"Select a reason\",\r\n            types: {\r\n                violence: \"Violence\",\r\n                nudity: \"Nudity\",\r\n                harassment: \"Harassment\",\r\n                \"undesirable-content\": \"Undesirable content\",\r\n                \"hate-speech\": \"Hate speech\",\r\n                \"vulgar-content\": \"Vulgar content\",\r\n                other: \"Other\",\r\n            },\r\n            confirmationTitle: \"Thank you\",\r\n            confirmation: \"An administrator will investigate your report shortly.\",\r\n            failureTitle: \"Sorry\",\r\n            failure: \"We are unable to fulfill your request.\",\r\n        },\r\n        // Reset password\r\n        resetPassword: {\r\n            instructions: \"To choose a new password, click the link in the email we just sent you.\",\r\n            title: \"Please choose a new password\",\r\n            button: \"Send\",\r\n            success: \"Your password has been updated.\",\r\n        },\r\n        // Delete account\r\n        deleteAccount: {\r\n            title: \"Delete your account\",\r\n            warning:\r\n                \"Your account and all associated data will be deleted within six months. Please be aware that after this time, your account will be irreversibly deleted. If you sign in before the end however, the deletion will be cancelled.\",\r\n            button: \"Delete\",\r\n            success1: \"Your request has been received and will be processed shortly.\",\r\n            success2: \"We are sorry to see you go.\",\r\n            leave: \"Leave\",\r\n            inputLabel: \"Enter password to confirm\",\r\n        },\r\n        // Recover account\r\n        recoverAccount: {\r\n            title: \"Recover Account\",\r\n            text:\r\n                \"You account is currently inactive and set for deletion. If you continue, the deletion process will be cancelled.\",\r\n            yes: \"Recover\",\r\n        },\r\n        // Messaging tab\r\n        messaging: {\r\n            noMatches: \"It appears that you haven't matched with anyone yet. :(\",\r\n            sayHi: \"Say hi\",\r\n            sayHiTo: \"Say hi to {{name}}!\",\r\n        },\r\n        // Matching tab\r\n        matching: {\r\n            noResults: \"No results found\",\r\n            noMoreItems: \"No more profiles to show\",\r\n            noItemsAdvice: \"Perhaps try removing some filters\",\r\n            filtering: {\r\n                sectionGeneral: \"General\",\r\n                buttonReset: \"Reset\",\r\n            },\r\n            actionLike: \"Like\",\r\n            actionHide: \"Hide\",\r\n            success: {\r\n                title: \"It's a match!\",\r\n                offersTitle: \"Open to:\",\r\n                offersMore: \"more\",\r\n                chat: \"Chat\",\r\n                continue: \"Continue\",\r\n            },\r\n            history: {\r\n                status: {\r\n                    requested: \"Liked\",\r\n                    declined: \"Hidden\",\r\n                    blocked: \"Blocked\",\r\n                },\r\n                actions: {\r\n                    report: \"Report\",\r\n                    cancel: {\r\n                        requested: \"Cancel like\",\r\n                        declined: \"Cancel hide\",\r\n                        blocked: \"Cancel block\",\r\n                    },\r\n                    block: \"Block\",\r\n                },\r\n                noResults: \"No results found\",\r\n                noResultsAdvice: \"Perhaps try removing some filters\",\r\n            },\r\n        },\r\n        // Profile tab\r\n        profile: {\r\n            action: {\r\n                chat: \"Chat\",\r\n                mute: \"Mute\",\r\n                block: \"Block\",\r\n                unmatch: \"Unmatch\",\r\n                report: \"Report\",\r\n            },\r\n            noOffersSelected: \"No offers selected.\",\r\n        },\r\n        screenTitles: {\r\n            suffix: \" - SEA-EU Around\",\r\n            WelcomeScreen: \"Welcome\",\r\n            SigninScreen: \"Login\",\r\n            ForgotPasswordScreen: \"Forgot Password\",\r\n            SignupScreen: \"Sign up\",\r\n            OnboardingNameScreen: \"Welcome\",\r\n            OnboardingProfileScreen1: \"Profile\",\r\n            OnboardingProfileScreen2: \"Profile\",\r\n            OnboardingRoleScreen: \"Profile\",\r\n            OnboardingRoleSpecificScreen: \"Profile\",\r\n            OnboardingOffersScreen1: \"Discover\",\r\n            OnboardingOffersScreen2: \"Collaborate\",\r\n            OnboardingOffersScreen3: \"Meet\",\r\n            OnboardingLegalScreen1: \"Terms & Conditions\",\r\n            OnboardingLegalScreen2: \"Terms & Conditions\",\r\n            OnboardingLegalScreen3: \"Terms & Conditions\",\r\n            ChatRoomsScreen: \"Messages\",\r\n            ChatScreen: \"Chat\",\r\n            TabHomeScreen: \"Home\",\r\n            TabMatchingScreen: \"Match\",\r\n            MatchFilteringScreen: \"Add Filters\",\r\n            MatchHistoryScreen: \"History\",\r\n            TabNotificationsScreen: \"Notifications\",\r\n            MyProfileScreen: \"Profile\",\r\n            ProfileScreen: \"Profile\",\r\n            SettingsScreen: \"Settings\",\r\n            DeleteAccountScreen: \"Delete Account\",\r\n            DeleteAccountSuccessScreen: \"Account Deleted\",\r\n            ValidationEmailSentScreen: \"Validate your account\",\r\n            ValidateEmailScreen: \"Validate your account\",\r\n            ResetPasswordScreen: \"Reset your password\",\r\n            ResetPasswordSuccessScreen: \"Password reset\",\r\n            OnboardingSuccessfulScreen: \"Successful registration\",\r\n            NotFoundScreen: \"Not Found\",\r\n            ForgotPasswordEmailSentScreen: \"Forgot password\",\r\n        },\r\n        // Settings screen\r\n        settings: {\r\n            sections: {\r\n                general: \"General\",\r\n                danger: \"Danger zone\",\r\n                about: \"About\",\r\n            },\r\n            language: \"Language\",\r\n            darkTheme: \"Dark theme\",\r\n            deleteAccount: \"Delete Account\",\r\n            deleteMyAccount: \"Delete my account\",\r\n            version: \"Version\",\r\n            termsOfService: \"Terms of Service\",\r\n            reportABug: \"Report a Bug\",\r\n            logOut: \"Log out\",\r\n            customizeCookies: \"Customize cookies\",\r\n        },\r\n    },\r\n    // ################################################################################################################################################################################################\r\n    // ################################################################################################################################################################################################\r\n    // ################################################################################################################################################################################################\r\n    // ################################################################################################################################################################################################\r\n    // ################################################################################################################################################################################################\r\n    // ################################################################################################################################################################################################\r\n    fr: {\r\n        locales: {\r\n            en: \"Anglais\",\r\n            fr: \"Français\",\r\n        },\r\n        appName: \"SEA-EU Around\",\r\n        // General translations\r\n        search: \"Rechercher\",\r\n        send: \"Envoyer\",\r\n        cancel: \"Annuler\",\r\n        ok: \"OK\",\r\n        save: \"Sauvegarder\",\r\n        noResultsFound: \"Aucun résultat\",\r\n        apply: \"Appliquer\",\r\n        logOut: \"Déconnexion\",\r\n        // Component-related\r\n        picker: {\r\n            callToAction: \"%d éléments\",\r\n        },\r\n        dateInput: {\r\n            dayPlaceholder: \"JJ\",\r\n            monthPlaceholder: \"MM\",\r\n            yearPlaceholder: \"AAAA\",\r\n        },\r\n        nationalityPicker: {\r\n            placeholder: \"Nationalité\",\r\n        },\r\n        // Login and sign-up forms\r\n        login: \"Connexion\",\r\n        emailAddress: \"Adresse mail\",\r\n        password: \"Mot de passe\",\r\n        passwordRepeat: \"Répéter le mot de passe\",\r\n        forgotPassword: \"Mot de passe oublié\",\r\n        forgotPasswordExplanation:\r\n            \"Entrez l'adresse mail associée à votre compte ci-dessous. Vous recevrez sous peu des instructions pour choisir un nouveau mot de passe.\",\r\n        newPassword: \"Nouveau mot de passe\",\r\n        signupWelcome: \"Nous vous attendons avec impatience!\",\r\n        createAccount: \"Créer le compte\",\r\n        // Email validation screen\r\n        emailValidation: {\r\n            validating: \"Validation\",\r\n            success: [\"Le compte est désormais validé. Vous pouvez maintenant vous \", \"connecter\"],\r\n        },\r\n        // Legal disclaimers\r\n        legal: {\r\n            modal: {\r\n                disclaimer1:\r\n                    \"Vous ne pourrez pas utiliser nos services si vous choisissez de refuser les conditions d'utilisation.\",\r\n                disclaimer2: \"La création du profil sera annulé.\",\r\n            },\r\n            decline: \"Refuser\",\r\n            accept: \"Accepter\",\r\n            readMore: [\"Une version complète des conditions d'utilisation est disponible \", \"ici\", \".\"],\r\n        },\r\n        // Client-side validation strings\r\n        validation: {\r\n            required: \"Champ requis.\",\r\n            atLeastOne: \"Sélectionner au moins un élément.\",\r\n            addAtLeastOne: \"Ajouter au moins un élément.\",\r\n            email: {\r\n                invalid: \"Adresse mail invalide.\",\r\n            },\r\n            password: {\r\n                tooShort: `Le mot de passe doit contenir au moins ${MIN_PASSWORD_LENGTH} caractères.`,\r\n                noDigit: \"Le mot de passe doit contenir au moins un chiffre.\",\r\n                noUpperCase: \"Le mot de passe doit contenir au moins une lettre majuscule.\",\r\n                noLowerCase: \"Le mot de passe doit contenir au moins une lettre minuscule.\",\r\n                noSymbol: \"Le mot de passe doit contenir au moins un symbole (#@$!%*?&).\",\r\n                repeatWrong: \"Ces mots de passe ne sont pas identiques.\",\r\n            },\r\n            language: {\r\n                atLeastOne: \"Sélectionnez au moins une langue.\",\r\n                specifyLevel: \"Spécifiez un niveau pour chaque langue.\",\r\n            },\r\n            date: {\r\n                tooYoung: \"Vous devez avoir au moins 16 ans pour rejoindre cette plateforme.\",\r\n                invalid: \"Date invalide.\",\r\n            },\r\n        },\r\n        // Server-side errors\r\n        error: {\r\n            error_user_not_verified: \"L'adresse mail de ce compte n'a pas encore été vérifiée.\",\r\n            user_not_found: \"Utilisateur introuvable.\",\r\n            email_or_password_incorrect: \"Adresse mail ou mot de passe incorrect.\",\r\n            reset_password_no_token: \"Cette requête n'a pas pu être traitée.\",\r\n            unique: {\r\n                user: {\r\n                    email: \"Cette adresse mail est déjà utilisée.\",\r\n                },\r\n            },\r\n            validation: {\r\n                email: {\r\n                    is_email: \"Adresse mail invalide.\",\r\n                    is_sea_email_constraint: \"L'adresse mail doit correspondre à l'une de nos universités partenaires.\",\r\n                },\r\n            },\r\n        },\r\n        // General translations related to the profile\r\n        myProfile: \"Mon Profil\",\r\n        firstname: \"Prénom\",\r\n        lastname: \"Nom\",\r\n        nationality: \"Nationalité\",\r\n        university: \"Université\",\r\n        countryPickerLanguageCode: \"fra\", // see TranslationLanguageCode from react-native-country-picker-modal\r\n        profileType: \"Type\",\r\n        profileTypes: \"Types\",\r\n        offers: \"Offres\",\r\n        positions: \"Postes\",\r\n        allRoles: {\r\n            student: \"Étudiant\",\r\n            staff: \"Staff\",\r\n        },\r\n        staffRoles: {\r\n            teaching: \"Enseignement\",\r\n            research: \"Recherche\",\r\n            administration: \"Administration\",\r\n            technical: \"Technique\",\r\n            other: \"Autre\",\r\n        },\r\n        gender: \"Genre\",\r\n        genders: {\r\n            male: \"Homme\",\r\n            female: \"Femme\",\r\n            other: \"Autre\",\r\n        },\r\n        dateOfBirth: \"Date de naissance\",\r\n        months: {\r\n            0: \"Janvier\",\r\n            1: \"Février\",\r\n            2: \"Mars\",\r\n            3: \"Avril\",\r\n            4: \"Mai\",\r\n            5: \"Juin\",\r\n            6: \"Juillet\",\r\n            7: \"Août\",\r\n            8: \"Septembre\",\r\n            9: \"Octobre\",\r\n            10: \"Novembre\",\r\n            11: \"Decembre\",\r\n        },\r\n        spokenLanguages: \"Langues parlées\",\r\n        languageLevels: {\r\n            a1: \"A1\",\r\n            a2: \"A2\",\r\n            b1: \"B1\",\r\n            b2: \"B2\",\r\n            c1: \"C1\",\r\n            c2: \"C2\",\r\n            native: \"Natif\",\r\n        },\r\n        levelOfStudy: \"Niveau d'études\",\r\n        degrees: {\r\n            bsc1: \"BSc1\",\r\n            bsc2: \"BSc2\",\r\n            bsc3: \"BSc3\",\r\n            m1: \"M1\",\r\n            m2: \"M2\",\r\n            phd: \"PhD\",\r\n        },\r\n        // Education fields\r\n        fieldsOfEducation: \"Domaines d'études\",\r\n        educationFieldsPicker: {\r\n            placeholder: \"Sélectionner\",\r\n            searchPlaceholder: \"Rechercher\",\r\n            multiple: \"%d selectionnés\",\r\n        },\r\n        educationFieldCategories: {\r\n            \"generic-programmes-qualifications\": \"Programmes et certifications génériques\",\r\n            education: \"Éducation\",\r\n            \"arts-humanities\": \"Lettres et arts\",\r\n            \"social-sciences-journalism-information\": \"Sciences sociales, journalisme et information\",\r\n            \"business-administration-law\": \" Commerce, administration et droit\",\r\n            \"natural-sciences-mathematics-statistics\": \"Sciences naturelles, mathématiques et statistiques\",\r\n            \"information-communication-technologies\": \"Technologies de l’information et de la communication\",\r\n            \"engineering-manufacturing-construction\": \"Ingénierie, industries de transformation et construction\",\r\n            \"agriculture-forestry-fisheries-veterinary\":\r\n                \"Agriculture, sylviculture, halieutique et sciences vétérinaires\",\r\n            \"health-welfare\": \"Santé et protection sociale\",\r\n            services: \"Services\",\r\n        },\r\n        educationFields: {\r\n            \"basic-programmes-qualifications\": \"Programmes et certifications de base\",\r\n            \"literacy-numeracy\": \"Alphabétisation et apprentissage du calcul\",\r\n            \"personal-skills-development\": \"Compétences et développement personnels\",\r\n            \"education-science\": \"Sciences de l’éducation\",\r\n            \"training-for-pre-school-teachers\": \"Formation des enseignants au niveau préscolaire\",\r\n            \"teacher-training-without-subject-specialisation\": \"Formation des enseignants sans spécialisation\",\r\n            \"teacher-training-with-subject-specialisation\": \"Formation des enseignants avec spécialisation\",\r\n            \"audio-visual-techniques-media-production\": \"Techniques audiovisuelles et production multimédia\",\r\n            \"fashion-interior-industrial-design\": \"Stylisme, décoration et design industriel\",\r\n            \"fine-arts\": \"Beaux-arts\",\r\n            handicrafts: \"Artisanat\",\r\n            \"music-performing-arts\": \"Musique, théâtre, danse, cirque\",\r\n            \"religion-theology\": \"Religion et théologie\",\r\n            \"history-archaeology\": \"Histoire et archéologie\",\r\n            \"philosophy-ethics\": \"Philosophie et morale\",\r\n            \"language-acquisition\": \"Acquisition d’une langue\",\r\n            \"literature-linguistics\": \"Littérature et linguistique\",\r\n            economics: \"Économie\",\r\n            \"political-sciences-civics\": \"Sciences politiques et éducation civique\",\r\n            psychology: \"Psychologie\",\r\n            \"sociology-cultural-studies\": \"Sociologie et études culturelles\",\r\n            \"journalism-reporting\": \"Journalisme et reportage\",\r\n            \"library-information-archival-studies\": \"Formation aux bibliothèques, à la documentation et à l’archivisme\",\r\n            \"accounting-taxation\": \"Comptabilité et fiscalité\",\r\n            \"finance-banking-insurance\": \"Finance, banque et assurances\",\r\n            \"management-administration\": \"Gestion et administration\",\r\n            \"marketing-advertising\": \"Marketing et publicité\",\r\n            \"secretarial-office-work\": \"Travail de secrétariat et de bureau\",\r\n            \"wholesale-retail-sales\": \"Vente en gros et au détail\",\r\n            \"work-skills\": \"Compétences professionnelles\",\r\n            law: \"Droit\",\r\n            biology: \"Biologie\",\r\n            biochemistry: \"Biochimie\",\r\n            \"environmental-sciences\": \"Sciences environnementales\",\r\n            \"natural-environments-wildlife\": \"Environnements naturels et faune et flore\",\r\n            chemistry: \"Chimie\",\r\n            \"earth-sciences\": \"Sciences de la Terre\",\r\n            physics: \"Physique\",\r\n            mathematics: \"Mathématiques\",\r\n            statistics: \"Statistiques\",\r\n            \"computer-use\": \"Utilisation d’un ordinateur\",\r\n            \"database-network-design-administration\": \"Conception et administration de bases de données et de réseau\",\r\n            \"software-applications-development-analysis\": \"Développement et analyse de logiciels et d’applications\",\r\n            \"chemical-engineering-processes\": \"Ingénierie chimique et processus\",\r\n            \"environmental-protection-technology\": \"Technologie de la protection de l’environnement\",\r\n            \"electricity-energy\": \"Électricité et énergie\",\r\n            \"electronics-automation\": \"Électronique et automatisation\",\r\n            \"mechanics-metal-trades\": \"Mécanique et techniques apparentées\",\r\n            \"motor-vehicles-ships-aircraft\": \"Véhicules à moteur, bateaux et aéronefs\",\r\n            \"food-processing\": \"Traitement des aliments\",\r\n            materials: \"Matériaux (verre, papier, plastique et bois)\",\r\n            textiles: \"Textiles (vêtements, chaussures et cuir)\",\r\n            \"mining-extraction\": \"Exploitation minière et extraction\",\r\n            \"architecture-town-planning\": \"Architecture et urbanisme\",\r\n            \"building-civil-engineering\": \"Construction et génie civil\",\r\n            \"crop-livestock-production\": \"Culture et élevage\",\r\n            horticulture: \"Horticulture\",\r\n            forestry: \"Sylviculture\",\r\n            fisheries: \"Halieutique\",\r\n            veterinary: \"Sciences vétérinaires\",\r\n            \"dental-studies\": \"Études dentaires\",\r\n            medicine: \"Médecine\",\r\n            \"nursing-midwifery\": \"Soins infirmiers et formation de sages-femmes\",\r\n            \"medical-diagnostic-treatment-technology\": \"Diagnostic médical et technologie de traitement\",\r\n            \"therapy-rehabilitation\": \"Thérapie et rééducation\",\r\n            pharmacy: \"Pharmacie\",\r\n            \"traditional-complementary-medicine-therapy\": \"Médecine et thérapies traditionnelles et complémentaires\",\r\n            \"care-elderly-disabled-adults\": \"Soins gérontologiques et aux adultes handicapés\",\r\n            \"child-care-youth-services\": \"Soins aux enfants et à la jeunesse\",\r\n            \"social-work-counselling\": \"Travail social et orientation\",\r\n            \"domestic-services\": \"Services domestiques\",\r\n            \"hair-beauty-services\": \"Services de soins de beauté et de coiffure\",\r\n            \"hotel-restaurants-catering\": \"Hôtellerie et services de restauration\",\r\n            sports: \"Sports\",\r\n            \"travel-tourism-leisure\": \"Voyage, tourisme et loisirs\",\r\n            \"community-sanitation\": \"Salubrité publique\",\r\n            \"occupational-health-safety\": \"Santé et sécurité au travail\",\r\n            \"military-defence\": \"Sécurité militaire et défense\",\r\n            \"protection-of-persons-property\": \"Protection des biens et des personnes\",\r\n            \"transport-services\": \"Services de transport\",\r\n        },\r\n        // 404 not found screen\r\n        notFoundScreen: {\r\n            title: \"404: Page introuvable.\",\r\n            subtitle: \"Cette page n'existe pas.\",\r\n            redirect: \"Aller à l'écran d'accueil\",\r\n        },\r\n        // University-related\r\n        universities: {\r\n            \"univ-cadiz\": \"Université de Cádiz\",\r\n            \"univ-brest\": \"Université de Bretagne Occidentale\",\r\n            \"univ-gdansk\": \"Université de Gdańsk\",\r\n            \"univ-malta\": \"Université de Malte\",\r\n            \"univ-kiel\": \"Université de Kiel\",\r\n            \"univ-split\": \"Université de Split\",\r\n        },\r\n        universitiesPicker: {\r\n            placeholder: \"Sélectionner\",\r\n            searchPlaceholder: \"Rechercher\",\r\n            multiple: \"%d éléments\",\r\n        },\r\n        // On-boarding slides\r\n        onboarding: {\r\n            name: {\r\n                title: \"Bienvenue\",\r\n                subtitle:\r\n                    \"Avant de commencer, nous avons besoin d'en savoir un peu plus sur vous afin d'assurer les meilleures recommendations possibles.\",\r\n            },\r\n            profile1: {\r\n                title: \"Profil\",\r\n            },\r\n            profile2: {\r\n                title: \"Langues et Hobbies\",\r\n            },\r\n            role: {\r\n                title: \"Je suis un...\",\r\n            },\r\n            roleSpecific1: {\r\n                student: {\r\n                    title: \"Étudiant\",\r\n                },\r\n                staff: {\r\n                    title: \"Staff\",\r\n                },\r\n            },\r\n            offersMeet: {\r\n                title: \"Rencontrer\",\r\n                subtitle: \"Rencondrer des nouveaux amis dans la vraie vie.\",\r\n            },\r\n            offersDiscover: {\r\n                title: \"Découvrir\",\r\n                subtitle: \"En apprendre plus sur d'autres cultures.\",\r\n            },\r\n            offersCollaborate: {\r\n                title: \"Collaborer\",\r\n                subtitle: \"Trouver d'autres personnes pour travailler sur des projets, académiques ou non.\",\r\n            },\r\n            legal1: {\r\n                title: \"Conditions d'utilisation\",\r\n                text:\r\n                    \"Comme précisé dans les conditions d’usage, vous acceptez d’utiliser « SEA-EU Around » et ses services pour être mis en relation avec d’autres personnes souhaitant se rencontrer, collaborer, ou interagir en ligne ou dans le cadre d’une mobilité, sur un principe non-commercial et non lucratif. Vous vous engagez à des échanges respectueux avec les autres membres. Vos noms et prénoms seront visibles des autres membres.\",\r\n            },\r\n            legal2: {\r\n                title: \"Politique des données\",\r\n                text:\r\n                    \"Dans le cadre de votre utilisation de SEA-EU Around, vous allez fournir des données personnelles afin de créer votre profil selon les conditions précisées dans les Conditions d’utilisation. Ces données sont collectées et traitées par l’UBO via l'application pour permettre la mise en relation entre membres, en fonctions des besoins, offres et intérêts qu’ils auront définis. Vos données ne seront visibles que par les autres membres.\",\r\n            },\r\n            legal3: {\r\n                title: \"Cookies\",\r\n                text:\r\n                    \"L’application peut utiliser les cookies. L’information est utilisée exclusivement dans le cadre du fonctionnement de l’application et ne permet pas d’identifier le membre, à l’exception du cookie permettant une réauthentification sans avoir à ressaisir son mot de passe.\",\r\n            },\r\n            back: \"Retour\",\r\n            next: \"Suivant\",\r\n            leave: \"Quitter\",\r\n            submit: \"Envoyer\",\r\n            success: {\r\n                title: \"Ravis de vous voir !\",\r\n                subtitle: \"Votre profil est créé.\",\r\n                button: \"Commencer\",\r\n            },\r\n            quit: {\r\n                title: \"Quitter\",\r\n                text: \"Voulez vous vraiment quitter la création du profil ? Vous pourrez reprendre plus tard.\",\r\n                cancel: \"Annuler\",\r\n                yes: \"Oui\",\r\n            },\r\n        },\r\n        // Language components\r\n        languagePicker: {\r\n            placeholderSingle: \"Langue\",\r\n            placeholderMultiple: \"Sélectionner des langues\",\r\n            searchPlaceholder: \"Rechercher\",\r\n            multiple: \"%d éléments\",\r\n        },\r\n        languageLevelPicker: {\r\n            placeholder: \"Niveau\",\r\n        },\r\n        languageNames: {\r\n            aa: \"Afar\",\r\n            ab: \"Abkhaze\",\r\n            ae: \"Avestique\",\r\n            af: \"Afrikaans\",\r\n            ak: \"Akan\",\r\n            am: \"Amharique\",\r\n            an: \"Aragonais\",\r\n            ar: \"Arabe\",\r\n            as: \"Assamais\",\r\n            av: \"Avar\",\r\n            ay: \"Aymara\",\r\n            az: \"Azéri\",\r\n            ba: \"Bachkir\",\r\n            be: \"Biélorusse\",\r\n            bg: \"Bulgare\",\r\n            bh: \"Bihari\",\r\n            bi: \"Bichelamar\",\r\n            bm: \"Bambara\",\r\n            bn: \"Bengali\",\r\n            bo: \"Tibétain\",\r\n            br: \"Breton\",\r\n            bs: \"Bosnien\",\r\n            ca: \"Catalan\",\r\n            ce: \"Tchétchène\",\r\n            ch: \"Chamorro\",\r\n            co: \"Corse\",\r\n            cr: \"Cri\",\r\n            cs: \"Tchèque\",\r\n            cu: \"Vieux-slave\",\r\n            cv: \"Tchouvache\",\r\n            cy: \"Gallois\",\r\n            da: \"Danois\",\r\n            de: \"Allemand\",\r\n            dv: \"Maldivien\",\r\n            dz: \"Dzongkha\",\r\n            ee: \"Ewe\",\r\n            el: \"Grec moderne\",\r\n            en: \"Anglais\",\r\n            eo: \"Espéranto\",\r\n            es: \"Espagnol\",\r\n            et: \"Estonien\",\r\n            eu: \"Basque\",\r\n            fa: \"Persan\",\r\n            ff: \"Peul\",\r\n            fi: \"Finnois\",\r\n            fj: \"Fidjien\",\r\n            fo: \"Féroïen\",\r\n            fr: \"Français\",\r\n            fy: \"Frison occidental\",\r\n            ga: \"Irlandais\",\r\n            gd: \"Écossais\",\r\n            gl: \"Galicien\",\r\n            gn: \"Guarani\",\r\n            gu: \"Gujarati\",\r\n            gv: \"Mannois\",\r\n            ha: \"Haoussa\",\r\n            he: \"Hébreu\",\r\n            hi: \"Hindi\",\r\n            ho: \"Hiri motu\",\r\n            hr: \"Croate\",\r\n            ht: \"Créole haïtien\",\r\n            hu: \"Hongrois\",\r\n            hy: \"Arménien\",\r\n            hz: \"Héréro\",\r\n            ia: \"Interlingua\",\r\n            id: \"Indonésien\",\r\n            ie: \"Occidental\",\r\n            ig: \"Igbo\",\r\n            ii: \"Yi\",\r\n            ik: \"Inupiak\",\r\n            io: \"Ido\",\r\n            is: \"Islandais\",\r\n            it: \"Italien\",\r\n            iu: \"Inuktitut\",\r\n            ja: \"Japonais\",\r\n            jv: \"Javanais\",\r\n            ka: \"Géorgien\",\r\n            kg: \"Kikongo\",\r\n            ki: \"Kikuyu\",\r\n            kj: \"Kuanyama\",\r\n            kk: \"Kazakh\",\r\n            kl: \"Groenlandais\",\r\n            km: \"Khmer\",\r\n            kn: \"Kannada\",\r\n            ko: \"Coréen\",\r\n            kr: \"Kanouri\",\r\n            ks: \"Cachemiri\",\r\n            ku: \"Kurde\",\r\n            kv: \"Komi\",\r\n            kw: \"Cornique\",\r\n            ky: \"Kirghiz\",\r\n            la: \"Latin\",\r\n            lb: \"Luxembourgeois\",\r\n            lg: \"Ganda\",\r\n            li: \"Limbourgeois\",\r\n            ln: \"Lingala\",\r\n            lo: \"Lao\",\r\n            lt: \"Lituanien\",\r\n            lu: \"Luba\",\r\n            lv: \"Letton\",\r\n            mg: \"Malgache\",\r\n            mh: \"Marshallais\",\r\n            mi: \"Maori de Nouvelle-Zélande\",\r\n            mk: \"Macédonien\",\r\n            ml: \"Malayalam\",\r\n            mn: \"Mongol\",\r\n            mo: \"Moldave\",\r\n            mr: \"Marathi\",\r\n            ms: \"Malais\",\r\n            mt: \"Maltais\",\r\n            my: \"Birman\",\r\n            na: \"Nauruan\",\r\n            nb: \"Norvégien Bokmål\",\r\n            nd: \"Sindebele\",\r\n            ne: \"Népalais\",\r\n            ng: \"Ndonga\",\r\n            nl: \"Néerlandais\",\r\n            nn: \"Norvégien Nynorsk\",\r\n            no: \"Norvégien\",\r\n            nr: \"Nrebele\",\r\n            nv: \"Navajo\",\r\n            ny: \"Chichewa\",\r\n            oc: \"Occitan\",\r\n            oj: \"Ojibwé\",\r\n            om: \"Oromo\",\r\n            or: \"Oriya\",\r\n            os: \"Ossète\",\r\n            pa: \"Pendjabi\",\r\n            pi: \"Pali\",\r\n            pl: \"Polonais\",\r\n            ps: \"Pachto\",\r\n            pt: \"Portugais\",\r\n            qu: \"Quechua\",\r\n            rc: \"Créole Réunionnais\",\r\n            rm: \"Romanche\",\r\n            rn: \"Kirundi\",\r\n            ro: \"Roumain\",\r\n            ru: \"Russe\",\r\n            rw: \"Kinyarwanda\",\r\n            sa: \"Sanskrit\",\r\n            sc: \"Sarde\",\r\n            sd: \"Sindhi\",\r\n            se: \"Same du Nord\",\r\n            sg: \"Sango\",\r\n            sh: \"Serbo-croate\",\r\n            si: \"Cingalais\",\r\n            sk: \"Slovaque\",\r\n            sl: \"Slovène\",\r\n            sm: \"Samoan\",\r\n            sn: \"Shona\",\r\n            so: \"Somali\",\r\n            sq: \"Albanais\",\r\n            sr: \"Serbe\",\r\n            ss: \"Swati\",\r\n            st: \"Sotho du Sud\",\r\n            su: \"Soundanais\",\r\n            sv: \"Suédois\",\r\n            sw: \"Swahili\",\r\n            ta: \"Tamoul\",\r\n            te: \"Télougou\",\r\n            tg: \"Tadjik\",\r\n            th: \"Thaï\",\r\n            ti: \"Tigrigna\",\r\n            tk: \"Turkmène\",\r\n            tl: \"Tagalog\",\r\n\r\n            tn: \"Tswana\",\r\n            to: \"Tongien\",\r\n            tr: \"Turc\",\r\n            ts: \"Tsonga\",\r\n            tt: \"Tatar\",\r\n            tw: \"Twi\",\r\n            ty: \"Tahitien\",\r\n            ug: \"Ouïghour\",\r\n            uk: \"Ukrainien\",\r\n            ur: \"Ourdou\",\r\n            uz: \"Ouzbek\",\r\n            ve: \"Venda\",\r\n            vi: \"Vietnamien\",\r\n            vo: \"Volapük\",\r\n            wa: \"Wallon\",\r\n            wo: \"Wolof\",\r\n            xh: \"Xhosa\",\r\n            yi: \"Yiddish\",\r\n            yo: \"Yoruba\",\r\n            za: \"Zhuang\",\r\n            zh: \"Chinois\",\r\n            zu: \"Zoulou\",\r\n        },\r\n        // Interests-related\r\n        interests: \"Hobbies\",\r\n        chooseInterests: \"Choisissez des hobbies\",\r\n        interestsPicker: {\r\n            placeholder: \"Sélectionner\",\r\n            searchPlaceholder: \"Rechercher\",\r\n            multiple: \"%d éléments\",\r\n        },\r\n        interestNames: {\r\n            activism: \"Activisme\",\r\n            art: \"Art\",\r\n            astrology: \"Astrologie\",\r\n            baking: \"Pâtisserie\",\r\n            bbq: \"Barbecue\",\r\n            blogging: \"Blogging\",\r\n            \"board-games\": \"Jeux de société\",\r\n            brunch: \"Brunch\",\r\n            \"cat-lover\": \"Chats\",\r\n            climbing: \"Escalade\",\r\n            coffee: \"Café\",\r\n            comedy: \"Comédie\",\r\n            cooking: \"Cuisine\",\r\n            couchsurfing: \"Couch-surfing\",\r\n            \"craft-beer\": \"Bière artisanale\",\r\n            crossfit: \"Crossfit\",\r\n            cycling: \"Vélo\",\r\n            dancing: \"Danse\",\r\n            diy: \"DIY\",\r\n            \"dog-lover\": \"Chiens\",\r\n            environmentalism: \"Écologie\",\r\n            esports: \"E-Sports\",\r\n            expositions: \"Expositions\",\r\n            fashion: \"Fashion\",\r\n            festivals: \"Festivals\",\r\n            fishing: \"Pèche\",\r\n            foodie: \"Gastronomie\",\r\n            football: \"Football\",\r\n            gamer: \"Gaming\",\r\n            gardening: \"Jardinage\",\r\n            golf: \"Golf\",\r\n            \"grab-a-drink\": \"Boire un verre\",\r\n            guitar: \"Guitare\",\r\n            \"happy-hour\": \"Happy hour\",\r\n            hiking: \"Randonnée\",\r\n            instagram: \"Instagram\",\r\n            investing: \"Investissement\",\r\n            karaoke: \"Karaoke\",\r\n            \"language-exchange\": \"Échange linguistique\",\r\n            movies: \"Films\",\r\n            museum: \"Musées\",\r\n            music: \"Musique\",\r\n            netflix: \"Netflix\",\r\n            outdoors: \"Activités d'extérieur\",\r\n            parties: \"Fêtes\",\r\n            photography: \"Photographie\",\r\n            piano: \"Piano\",\r\n            picnicking: \"Pique-nique\",\r\n            \"playing-music\": \"Jouer de la musique\",\r\n            podcasts: \"Podcasts\",\r\n            politics: \"Politique\",\r\n            reading: \"Lecture\",\r\n            \"road-trips\": \"Road trips\",\r\n            running: \"Course à pied\",\r\n            sailing: \"La voile\",\r\n            shopping: \"Shopping\",\r\n            skateboarder: \"Skateboard\",\r\n            skiing: \"Ski\",\r\n            sneakers: \"Chaussures de sport\",\r\n            snowboarding: \"Snowboard\",\r\n            spirituality: \"Spiritualité\",\r\n            sports: \"Sports\",\r\n            \"start-ups\": \"Start ups\",\r\n            \"street-food\": \"Street food\",\r\n            surfing: \"Surf\",\r\n            swimming: \"Nage\",\r\n            tango: \"Tango\",\r\n            tattoos: \"Tatouages\",\r\n            tea: \"Thé\",\r\n            tennis: \"Tennis\",\r\n            theater: \"Théatre\",\r\n            travel: \"Voyage\",\r\n            trivia: \"Trivia\",\r\n            vegan: \"Vegan\",\r\n            vegetarian: \"Végétarien\",\r\n            volunteering: \"Bénévolat\",\r\n            walking: \"Marche\",\r\n            \"walking-my-dog\": \"Promener son chien\",\r\n            wine: \"Vin\",\r\n            \"working-out\": \"Entraînement sportif\",\r\n            writer: \"Écriture\",\r\n            yoga: \"Yoga\",\r\n        },\r\n        // Offer-related\r\n        offersPreText: \"Je suis ouvert à...\",\r\n        offerCategories: {\r\n            meet: \"Rencontrer\",\r\n            discover: \"Découvrir\",\r\n            collaborate: \"Collaborer\",\r\n        },\r\n        offerSettings: {\r\n            genders: \"Genres ciblés\",\r\n            roles: \"Postes ciblés\",\r\n        },\r\n        allOffers: {\r\n            \"grab-a-drink\": {\r\n                name: \"Boire un verre\",\r\n                help: \"Je suis ouvert pour boire un verre avec les personnes que je rencontre sur cette plateforme.\",\r\n            },\r\n            \"provide-a-couch\": {\r\n                name: \"Prêter un canapé\",\r\n                help: \"Je suis ouvert à laisser quelqu'un dormir sur mon canapé.\",\r\n            },\r\n            \"get-into-campus-life\": {\r\n                name: \"Intégrer la vie du campus\",\r\n                help: \"Je suis motivé.e à l'idée de présenter à quelqu'un la vie de mon campus.\",\r\n            },\r\n            \"cowork-on-a-project\": {\r\n                name: \"Collaborer sur un projet\",\r\n                help: \"Je recherche des collaborateurs pour un projet.\",\r\n            },\r\n            \"answer-academic-questions\": {\r\n                name: \"Répondre à des questions académiques\",\r\n                help:\r\n                    \"Je peux donner des informations à propos de mon université ou répondre à des questions générales en lien avec les études.\",\r\n            },\r\n            \"share-interests\": {\r\n                name: \"Partager des hobbies\",\r\n                help: \"J'aimerais discuter avec d'autres utilisateurs à propos de centres d'intérêts communs.\",\r\n            },\r\n            \"language-tandem\": {\r\n                name: \"Rejoindre un tandem d'apprentissage de langue\",\r\n                help:\r\n                    \"Je cherche à rejoindre un tandem de langue afin d'aider d'autres utilisateurs à apprendre une de mes langues.\",\r\n            },\r\n        },\r\n        // Unmatch modal\r\n        unmatch: {\r\n            text: \"Voulez-vous vraiment annuler le match avec {{firstname}} ? Vous ne pourrez plus communiquer.\",\r\n            blockQuestion:\r\n                \"Si vous ne voulez plus apparaître dans les résultats de {{firstname}}, vous pouvez aussi bloquer ce profil :\",\r\n            action: \"Unmatch\",\r\n        },\r\n        // Block modal\r\n        block: {\r\n            warning:\r\n                \"Voulez-vous vraiment bloquer cet utilisateur ? Vous et {{firstname}} n'apparaîtrez plus dans vos recherches respectives.\",\r\n            action: \"Bloquer\",\r\n        },\r\n        // Welcome screen\r\n        welcomeScreen: {\r\n            signIn: \"Connexion\",\r\n            signUp: \"Inscription\",\r\n            subtitle: \"Rejoignez une alliance unie autour des valeurs de l'identité européenne.\",\r\n        },\r\n        // Login\r\n        loginForm: {\r\n            title: \"Ravis de vous revoir !\",\r\n            titleFirstLaunch: \"Bienvenue !\",\r\n            logIn: \"Connexion\",\r\n            signUp: \"Inscription\",\r\n            or: \"ou\",\r\n        },\r\n        // Cookies\r\n        cookies: {\r\n            title: \"Cookies\",\r\n            bannerText:\r\n                \"Nous utilisons des cookies afin de vous fournir la meilleure expérience utilisateur possible.\\nNotre utilisation des cookies inclut notamment le stockage de données pour des chargements plus rapides, le stockage de vos paramètres et l'authentification. Nous ne collectons aucune information qui pourrait être utilisée pour du traçage ou de la publicité.\",\r\n            acceptAll: \"Accepter les cookies\",\r\n            customize: \"Personnaliser\",\r\n            preferences: {\r\n                text:\r\n                    \"Nous offrons la possibilité de choisir les informations qui sont stockées sur votre appareil par SEA-EU Around.\",\r\n                auth: {\r\n                    name: \"Authentification\",\r\n                    description:\r\n                        \"Stockage d'information permettant de vous authentifier automatiquement lorsque vous lancez l'application.\",\r\n                },\r\n                cache: {\r\n                    name: \"Cache\",\r\n                    description: \"Stockage d'information (moins d'un 1MO) permettant d'accélérer les chargements.\",\r\n                },\r\n                settings: {name: \"Paramètres\", description: \"Stockage des paramètres (thème, langue, etc).\"},\r\n            },\r\n        },\r\n        // Bug report\r\n        bugReport: {\r\n            mailSubject: \"Signalement de bug depuis l'app\",\r\n            mailTitle: \"Description du bug (inclure si possible les étapes pour le reproduire) :\",\r\n        },\r\n        // Report\r\n        report: {\r\n            title: \"Signalement\",\r\n            send: \"Envoyer\",\r\n            cancel: \"Annuler\",\r\n            what: \"Quoi / qui ?\",\r\n            why: \"Pourquoi ?\",\r\n            typePlaceholder: \"Sélectionner une raison\",\r\n            types: {\r\n                violence: \"Violence\",\r\n                nudity: \"Nudité\",\r\n                harassment: \"Harcèlement\",\r\n                \"undesirable-content\": \"Contenu indésirable\",\r\n                \"hate-speech\": \"Discours haineux\",\r\n                \"vulgar-content\": \"Contenu vulgaire\",\r\n                other: \"Autre\",\r\n            },\r\n            confirmationTitle: \"Merci\",\r\n            confirmation: \"Un administrateur traitera votre signalement sous peu.\",\r\n            failureTitle: \"Désolé\",\r\n            failure: \"Nous ne sommes pas en mesure de traîter votre requête.\",\r\n        },\r\n        // Reset password\r\n        resetPassword: {\r\n            instructions:\r\n                \"Pour choisir un nouveau mot de passe, cliquez sur le lien dans le mail que nous venons de vous envoyer.\",\r\n            title: \"Choisissez un nouveau mot de passe\",\r\n            button: \"Envoyer\",\r\n            success: \"Votre mot de passe a été mis à jour.\",\r\n        },\r\n        // Delete account\r\n        deleteAccount: {\r\n            title: \"Supprimer votre compte\",\r\n            warning:\r\n                \"Votre compte et toutes les données associées seront supprimées d'ici 6 mois. Après cette période, le compte sera irréversiblement supprimé. Si vous vous connectez avant, la suppression sera annulée.\",\r\n            button: \"Supprimer\",\r\n            success1: \"Votre requête a bien été reçue et sera traitée sous peu.\",\r\n            success2: \"Nous sommes désolés de vous voir partir.\",\r\n            leave: \"Quitter\",\r\n            inputLabel: \"Entrez votre mot de passe pour confirmer\",\r\n        },\r\n        // Recover account\r\n        recoverAccount: {\r\n            title: \"Récupération du Compte\",\r\n            text:\r\n                \"Ce compte est actuellement inactif et en attente d'être supprimé. Si vous continuez, la suppression sera annulée.\",\r\n            yes: \"Récupérer\",\r\n        },\r\n        // Messaging tab\r\n        messaging: {\r\n            noMatches: \"Il semblerait que vous n'ailliez pas encore eu de match. :(\",\r\n            sayHi: \"Envoyez un message\",\r\n            sayHiTo: \"Envoyez un message à {{name}}\",\r\n        },\r\n        // Matching tab\r\n        matching: {\r\n            noResults: \"Aucun résultat\",\r\n            noMoreItems: \"Pas d'autres profils à afficher\",\r\n            noItemsAdvice: \"Éssayez de supprimer des filtres\",\r\n            filtering: {\r\n                sectionGeneral: \"Général\",\r\n                buttonReset: \"Réinitialiser\",\r\n            },\r\n            actionLike: \"Like\",\r\n            actionHide: \"Cacher\",\r\n            success: {\r\n                title: \"Nouveau match !\",\r\n                offersTitle: \"Ouvert à:\",\r\n                offersMore: \"autres\",\r\n                chat: \"Ouvrir le chat\",\r\n                continue: \"Continuer\",\r\n            },\r\n            history: {\r\n                status: {\r\n                    requested: \"Liké\",\r\n                    declined: \"Caché\",\r\n                    blocked: \"Bloqué\",\r\n                },\r\n                actions: {\r\n                    report: \"Signaler\",\r\n                    cancel: {\r\n                        requested: \"Annuler like\",\r\n                        declined: \"Dé-cacher\",\r\n                        blocked: \"Débloquer\",\r\n                    },\r\n                    block: \"Bloquer\",\r\n                },\r\n                noResults: \"Aucun résultat\",\r\n                noResultsAdvice: \"Éssayez de supprimer des filtres\",\r\n            },\r\n        },\r\n        // Profile tab\r\n        profile: {\r\n            action: {\r\n                chat: \"Chat\",\r\n                mute: \"Mettre en sourdine\",\r\n                block: \"Bloquer\",\r\n                unmatch: \"Unmatch\",\r\n                report: \"Signaler\",\r\n            },\r\n            noOffersSelected: \"Aucune offre sélectionnée.\",\r\n        },\r\n        screenTitles: {\r\n            suffix: \" - SEA-EU Around\",\r\n            WelcomeScreen: \"Bienvenue\",\r\n            SigninScreen: \"Connexion\",\r\n            ForgotPasswordScreen: \"Mot de Passe Oublié\",\r\n            SignupScreen: \"Inscription\",\r\n            OnboardingNameScreen: \"Bienvenue\",\r\n            OnboardingProfileScreen1: \"Profil\",\r\n            OnboardingProfileScreen2: \"Profil\",\r\n            OnboardingRoleScreen: \"Profil\",\r\n            OnboardingRoleSpecificScreen: \"Profil\",\r\n            OnboardingOffersScreen1: \"Découvrir\",\r\n            OnboardingOffersScreen2: \"Collaborer\",\r\n            OnboardingOffersScreen3: \"Rencontrer\",\r\n            OnboardingLegalScreen1: \"Conditions d'utilisation\",\r\n            OnboardingLegalScreen2: \"Politique des données\",\r\n            OnboardingLegalScreen3: \"Cookies\",\r\n            ChatRoomsScreen: \"Messages\",\r\n            ChatScreen: \"Chat\",\r\n            TabHomeScreen: \"Accueil\",\r\n            TabMatchingScreen: \"Match\",\r\n            MatchFilteringScreen: \"Ajouter des Filtres\",\r\n            MatchHistoryScreen: \"Historique\",\r\n            TabNotificationsScreen: \"Notifications\",\r\n            MyProfileScreen: \"Profil\",\r\n            ProfileScreen: \"Profil\",\r\n            SettingsScreen: \"Paramètres\",\r\n            DeleteAccountScreen: \"Suppression du Compte\",\r\n            DeleteAccountSuccessScreen: \"Compte Supprimé\",\r\n            ValidationEmailSentScreen: \"Validation du Compte\",\r\n            ValidateEmailScreen: \"Validation du Compte\",\r\n            ResetPasswordScreen: \"Changement de Mot de Passe\",\r\n            ResetPasswordSuccessScreen: \"Mot de Passe Modifié\",\r\n            OnboardingSuccessfulScreen: \"Inscription Réussie\",\r\n            NotFoundScreen: \"Page Introuvable\",\r\n            ForgotPasswordEmailSentScreen: \"Mot de Passe Oublié\",\r\n        },\r\n        // Settings screen\r\n        settings: {\r\n            sections: {\r\n                general: \"Général\",\r\n                danger: \"Zone dangereuse\",\r\n                about: \"À propos\",\r\n            },\r\n            language: \"Langue\",\r\n            darkTheme: \"Thème sombre\",\r\n            deleteAccount: \"Suppression de compte\",\r\n            deleteMyAccount: \"Supprimer mon compte\",\r\n            version: \"Version\",\r\n            termsOfService: \"Conditions d'utilisation\",\r\n            reportABug: \"Signaler un bug\",\r\n            logOut: \"Déconnexion\",\r\n            customizeCookies: \"Personnaliser les cookies\",\r\n        },\r\n    },\r\n};\r\n","import * as Localization from \"expo-localization\";\r\nimport i18n from \"i18n-js\";\r\nimport translations from \"./constants/translations\";\r\n\r\nexport type SupportedLocale = \"en\" | \"fr\";\r\nexport const SUPPORTED_LOCALES: SupportedLocale[] = [\"en\", \"fr\"];\r\n\r\nexport function getDefaultLocale(): SupportedLocale {\r\n    const loc = Localization.locale.substr(0, 2);\r\n    return loc === \"fr\" ? \"fr\" : \"en\";\r\n}\r\n\r\nexport default function configureLocalization(): void {\r\n    // Set the key-value pairs for the supported languages.\r\n    i18n.translations = translations;\r\n\r\n    // When a value is missing from a language, fallback to another language with the key present.\r\n    i18n.fallbacks = true;\r\n}\r\n","// ISO 639-1 Language codes\r\nexport const LANGUAGES_CODES: string[] = [\r\n    \"hr\",\r\n    \"en\",\r\n    \"fr\",\r\n    \"de\",\r\n    \"mt\",\r\n    \"pl\",\r\n    \"es\",\r\n    \"aa\",\r\n    \"ab\",\r\n    \"ae\",\r\n    \"af\",\r\n    \"ak\",\r\n    \"am\",\r\n    \"an\",\r\n    \"ar\",\r\n    \"as\",\r\n    \"av\",\r\n    \"ay\",\r\n    \"az\",\r\n    \"ba\",\r\n    \"be\",\r\n    \"bg\",\r\n    \"bh\",\r\n    \"bi\",\r\n    \"bm\",\r\n    \"bn\",\r\n    \"bo\",\r\n    \"br\",\r\n    \"bs\",\r\n    \"ca\",\r\n    \"ce\",\r\n    \"ch\",\r\n    \"co\",\r\n    \"cr\",\r\n    \"cs\",\r\n    \"cu\",\r\n    \"cv\",\r\n    \"cy\",\r\n    \"da\",\r\n    \"dv\",\r\n    \"dz\",\r\n    \"ee\",\r\n    \"el\",\r\n    \"eo\",\r\n    \"et\",\r\n    \"eu\",\r\n    \"fa\",\r\n    \"ff\",\r\n    \"fi\",\r\n    \"fj\",\r\n    \"fo\",\r\n    \"fy\",\r\n    \"ga\",\r\n    \"gd\",\r\n    \"gl\",\r\n    \"gn\",\r\n    \"gu\",\r\n    \"gv\",\r\n    \"ha\",\r\n    \"he\",\r\n    \"hi\",\r\n    \"ho\",\r\n    \"ht\",\r\n    \"hu\",\r\n    \"hy\",\r\n    \"hz\",\r\n    \"ia\",\r\n    \"id\",\r\n    \"ie\",\r\n    \"ig\",\r\n    \"ii\",\r\n    \"ik\",\r\n    \"io\",\r\n    \"is\",\r\n    \"it\",\r\n    \"iu\",\r\n    \"ja\",\r\n    \"jv\",\r\n    \"ka\",\r\n    \"kg\",\r\n    \"ki\",\r\n    \"kj\",\r\n    \"kk\",\r\n    \"kl\",\r\n    \"km\",\r\n    \"kn\",\r\n    \"ko\",\r\n    \"kr\",\r\n    \"ks\",\r\n    \"ku\",\r\n    \"kv\",\r\n    \"kw\",\r\n    \"ky\",\r\n    \"la\",\r\n    \"lb\",\r\n    \"lg\",\r\n    \"li\",\r\n    \"ln\",\r\n    \"lo\",\r\n    \"lt\",\r\n    \"lu\",\r\n    \"lv\",\r\n    \"mg\",\r\n    \"mh\",\r\n    \"mi\",\r\n    \"mk\",\r\n    \"ml\",\r\n    \"mn\",\r\n    \"mr\",\r\n    \"ms\",\r\n    \"my\",\r\n    \"na\",\r\n    \"nb\",\r\n    \"nd\",\r\n    \"ne\",\r\n    \"ng\",\r\n    \"nl\",\r\n    \"nn\",\r\n    \"no\",\r\n    \"nr\",\r\n    \"nv\",\r\n    \"ny\",\r\n    \"oc\",\r\n    \"oj\",\r\n    \"om\",\r\n    \"or\",\r\n    \"os\",\r\n    \"pa\",\r\n    \"pi\",\r\n    \"ps\",\r\n    \"pt\",\r\n    \"qu\",\r\n    \"rc\",\r\n    \"rm\",\r\n    \"rn\",\r\n    \"ro\",\r\n    \"ru\",\r\n    \"rw\",\r\n    \"sa\",\r\n    \"sc\",\r\n    \"sd\",\r\n    \"se\",\r\n    \"sg\",\r\n    \"sh\",\r\n    \"si\",\r\n    \"sk\",\r\n    \"sl\",\r\n    \"sm\",\r\n    \"sn\",\r\n    \"so\",\r\n    \"sq\",\r\n    \"sr\",\r\n    \"ss\",\r\n    \"st\",\r\n    \"su\",\r\n    \"sv\",\r\n    \"sw\",\r\n    \"ta\",\r\n    \"te\",\r\n    \"tg\",\r\n    \"th\",\r\n    \"ti\",\r\n    \"tk\",\r\n    \"tl\",\r\n    \"tn\",\r\n    \"to\",\r\n    \"tr\",\r\n    \"ts\",\r\n    \"tt\",\r\n    \"tw\",\r\n    \"ty\",\r\n    \"ug\",\r\n    \"uk\",\r\n    \"ur\",\r\n    \"uz\",\r\n    \"ve\",\r\n    \"vi\",\r\n    \"vo\",\r\n    \"wa\",\r\n    \"wo\",\r\n    \"xh\",\r\n    \"yi\",\r\n    \"yo\",\r\n    \"za\",\r\n    \"zh\",\r\n    \"zu\",\r\n];\r\n\r\n/* Mining translations from https://www.loc.gov/standards/iso639-2/php/code_list.php */\r\n/*\r\nlet entries = {};\r\nlet items = $(\"body > table > tbody > tr > td > table:nth-child(6) tbody\").children;\r\nfor(const tr of items) {\r\n    const code = tr.children[1].innerText.trim();\r\n    if(code.length == 2) {\r\n        const english = tr.children[2].innerText.trim();\r\n        const french = tr.children[3].innerText.trim();\r\n        const german = tr.children[4].innerText.trim();\r\n        entries[code] = english;\r\n    }\r\n}\r\nconsole.log(entries);\r\n*/\r\n\r\n/* Mining translations from https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes */\r\n/*\r\nlet entries = {};\r\n$(\"#Table > tbody\").children().each((i,tr) => {\r\n    const code = tr.children[4].innerText.trim();\r\n    if(code.length == 2) {\r\n        entries[code] = tr.children[2].innerText.trim();\r\n    }\r\n});\r\nconsole.log(entries);\r\n*/\r\n\r\n/* French translations from https://fr.wikipedia.org/wiki/Liste_des_codes_ISO_639-1 */\r\n/*\r\nlet entries = {};\r\n$(\"#mw-content-text > div.mw-parser-output > table > tbody\").children().each((i,tr) => {\r\n    const code = tr.children[0].innerText.trim();\r\n    if(code.length == 2) {\r\n        entries[code] = tr.children[3].innerText.trim();\r\n    }\r\n});\r\nconsole.log(entries);\r\n*/\r\n","import {getDefaultLocale, SupportedLocale} from \"../../localization\";\r\nimport {LANGUAGES_CODES} from \"../../model/languages\";\r\nimport translations from \"../../constants/translations\";\r\nimport {\r\n    LoadCookiesPreferencesAction,\r\n    LoadVersionInfoAction,\r\n    SaveCookiesPreferencesAction,\r\n    SetLocaleAction,\r\n    SetThemeAction,\r\n    SettingsAction,\r\n    SETTINGS_ACTION_TYPES,\r\n} from \"./actions\";\r\nimport {SettingsState} from \"../types\";\r\n\r\nfunction getLocalizedLanguageItems(locale: SupportedLocale) {\r\n    const dict = translations as {[key: string]: {[key: string]: unknown}};\r\n    const languageNames = (dict[locale].languageNames || dict[\"en\"].languageNames) as {[key: string]: string};\r\n    return LANGUAGES_CODES.map((code: string) => ({\r\n        label: languageNames[code] || `Missing translation (${code})`, //i18n.t(`languageNameM${code}`${code})s, // Cannot rely on i18n as it is not initialized yet\r\n        value: code,\r\n    }));\r\n}\r\n\r\nexport const initialState: SettingsState = {\r\n    userSettings: {\r\n        theme: \"light\",\r\n        locale: getDefaultLocale(),\r\n        cookies: {\r\n            auth: false,\r\n            cache: false,\r\n            settings: false,\r\n        },\r\n        cookieConsentDate: null,\r\n    },\r\n    previousVersion: null,\r\n    isFirstLaunch: false,\r\n    localizedLanguageItems: getLocalizedLanguageItems(getDefaultLocale()),\r\n};\r\n\r\nexport const settingsReducer = (state: SettingsState = initialState, action: SettingsAction): SettingsState => {\r\n    switch (action.type) {\r\n        case SETTINGS_ACTION_TYPES.LOAD_COOKIES_PREFERENCES: {\r\n            const {preferences, consentDate} = action as LoadCookiesPreferencesAction;\r\n            return {\r\n                ...state,\r\n                userSettings: {...state.userSettings, cookieConsentDate: consentDate, cookies: preferences},\r\n            };\r\n        }\r\n        case SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES: {\r\n            const {preferences} = action as SaveCookiesPreferencesAction;\r\n            return {\r\n                ...state,\r\n                userSettings: {...state.userSettings, cookieConsentDate: new Date(Date.now()), cookies: preferences},\r\n            };\r\n        }\r\n        case SETTINGS_ACTION_TYPES.SET_THEME: {\r\n            const {theme} = action as SetThemeAction;\r\n            return {...state, userSettings: {...state.userSettings, theme}};\r\n        }\r\n        case SETTINGS_ACTION_TYPES.TOGGLE_THEME: {\r\n            const theme = state.userSettings.theme == \"light\" ? \"dark\" : \"light\";\r\n            return {...state, userSettings: {...state.userSettings, theme}};\r\n        }\r\n        case SETTINGS_ACTION_TYPES.SET_LOCALE: {\r\n            const {locale} = action as SetLocaleAction;\r\n            return {\r\n                ...state,\r\n                localizedLanguageItems: getLocalizedLanguageItems(locale),\r\n                userSettings: {...state.userSettings, locale},\r\n            };\r\n        }\r\n        case SETTINGS_ACTION_TYPES.LOAD_VERSION_INFO: {\r\n            const {version} = action as LoadVersionInfoAction;\r\n            return {\r\n                ...state,\r\n                previousVersion: version,\r\n                isFirstLaunch: version === null,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {stripSuperfluousOffers} from \"../../api/converters\";\r\nimport {OfferDto} from \"../../api/dto\";\r\nimport {AuthAction, AUTH_ACTION_TYPES, LogInSuccessAction} from \"../auth/actions\";\r\nimport {ProfileState} from \"../types\";\r\nimport {\r\n    CreateProfileSuccessAction,\r\n    FetchUserSuccessAction,\r\n    LoadProfileInterestsSuccessAction,\r\n    LoadProfileOffersSuccessAction,\r\n    ProfileAction,\r\n    PROFILE_ACTION_TYPES,\r\n    SetAvatarSuccessAction,\r\n    SetProfileFieldsSuccessAction,\r\n} from \"./actions\";\r\n\r\nexport const initialState: ProfileState = {\r\n    user: null,\r\n    offers: [],\r\n    offerIdToCategory: new Map(),\r\n    interests: [],\r\n};\r\n\r\nexport const profileReducer = (\r\n    state: ProfileState = initialState,\r\n    action: ProfileAction | AuthAction,\r\n): ProfileState => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {user} = action as LogInSuccessAction;\r\n            return {...state, user};\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_SET_FIELDS_SUCCESS: {\r\n            if (state.user) {\r\n                const {fields} = action as SetProfileFieldsSuccessAction;\r\n                if (fields.profileOffers) fields.profileOffers = stripSuperfluousOffers(fields.profileOffers);\r\n                return {\r\n                    ...state,\r\n                    user: {...state.user, profile: state.user.profile ? {...state.user.profile, ...fields} : undefined},\r\n                };\r\n            } else return {...state};\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            const {profile} = action as CreateProfileSuccessAction;\r\n            return state.user ? {...state, user: {...state.user, profile}} : state;\r\n        }\r\n        case PROFILE_ACTION_TYPES.LOAD_PROFILE_OFFERS_SUCCESS: {\r\n            const {offers} = action as LoadProfileOffersSuccessAction;\r\n            const offerIdToCategory = new Map(offers.map((o: OfferDto) => [o.id, o.category]));\r\n            return {...state, offers, offerIdToCategory};\r\n        }\r\n        case PROFILE_ACTION_TYPES.LOAD_PROFILE_INTERESTS_SUCCESS: {\r\n            const {interests} = action as LoadProfileInterestsSuccessAction;\r\n            // Sort alphabetically\r\n            interests.sort((a, b) => (a.id > b.id ? 1 : -1));\r\n            return {...state, interests};\r\n        }\r\n        case PROFILE_ACTION_TYPES.FETCH_USER_SUCCESS: {\r\n            const {user} = action as FetchUserSuccessAction;\r\n            return {...state, user};\r\n        }\r\n        case PROFILE_ACTION_TYPES.SET_AVATAR_SUCCESS: {\r\n            const {avatarUrl} = action as SetAvatarSuccessAction;\r\n            if (state.user === null) return {...state};\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    user: {...state.user, profile: state.user.profile ? {...state.user.profile, avatarUrl} : undefined},\r\n                };\r\n            }\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {...state, user: null};\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {Degree, Gender, LanguageLevel, Role} from \"../constants/profile-constants\";\r\nimport {UniversityKey} from \"../constants/universities\";\r\nimport {CountryCode} from \"../model/country-codes\";\r\n\r\n/* General response-related types */\r\n\r\n// Any response from the server should follow this structure\r\nexport type RequestResponse = SuccessfulRequestResponse | UnprocessableEntityRequestResponse | ErrorRequestResponse;\r\nexport type SuccessfulRequestResponse = {status: number; data: unknown} & {[key: string]: unknown};\r\nexport type PaginatedRequestResponse = SuccessfulRequestResponse & {\r\n    meta: {\r\n        currentPage: number;\r\n        itemCount: number;\r\n        itemsPerPage: number;\r\n        totalItems: number;\r\n        totalPages: number;\r\n    };\r\n    links: {\r\n        first: string;\r\n        last: string;\r\n        next: string;\r\n        previous: string;\r\n    };\r\n};\r\n\r\nexport type ErrorRequestResponse = {status: number; errorType: string; description: string};\r\n\r\n// Only on 422 status\r\nexport type UnprocessableEntityRequestResponse = ErrorRequestResponse & {\r\n    errors: {property: string; codes: {description: string; code: string}[]}[];\r\n};\r\n\r\nexport type RemoteValidationErrors = {general: string; fields: {[key: string]: string}};\r\n\r\n/* Specific DTOs */\r\n\r\nexport type SpokenLanguageDto = {\r\n    code: string;\r\n    level: LanguageLevel;\r\n};\r\n\r\nexport type UserRole = \"user\" | \"admin\";\r\n\r\nexport type ResponseUserDto = {\r\n    id: string;\r\n    role: UserRole;\r\n    email: string;\r\n    isVerified: boolean;\r\n    onboarded: boolean;\r\n    profile: ResponseProfileDto;\r\n};\r\n\r\nexport type TokenDto = {\r\n    expiresIn: number;\r\n    accessToken: string;\r\n};\r\n\r\nexport type LoginDto = {\r\n    user: ResponseUserDto;\r\n    token: TokenDto;\r\n};\r\n\r\nexport type CreateProfileDtoCommon = {\r\n    type: Role;\r\n    firstName: string;\r\n    lastName: string;\r\n    gender: Gender;\r\n    birthdate: string;\r\n    nationality: CountryCode;\r\n    languages: SpokenLanguageDto[];\r\n    interests: InterestDto[];\r\n    profileOffers: OfferValueDto[];\r\n    educationFields: EducationFieldDto[];\r\n};\r\n\r\nexport type CreateProfileDtoStudent = CreateProfileDtoCommon & {\r\n    degree: Degree;\r\n};\r\nexport type CreateProfileDtoStaff = CreateProfileDtoCommon & {\r\n    staffRoles: StaffRoleDto[];\r\n};\r\nexport type CreateProfileDto = CreateProfileDtoStudent | CreateProfileDtoStaff;\r\n\r\nexport type ResponseProfileDtoCommon = CreateProfileDtoCommon & {\r\n    id: string;\r\n    university: UniversityKey;\r\n    avatar: string;\r\n};\r\nexport type ResponseProfileDtoStudent = ResponseProfileDtoCommon & CreateProfileDtoStudent;\r\nexport type ResponseProfileDtoStaff = ResponseProfileDtoCommon & CreateProfileDtoStaff;\r\nexport type ResponseProfileDto = ResponseProfileDtoStudent | ResponseProfileDtoStaff;\r\n\r\nexport type ResponseProfileWithMatchInfoDto = {\r\n    isMatched: boolean;\r\n    roomId: string | null;\r\n    matchingId: string | null;\r\n    profile: ResponseProfileDto;\r\n};\r\n\r\nexport enum OfferCategory {\r\n    Discover = \"discover\",\r\n    Collaborate = \"collaborate\",\r\n    Meet = \"meet\",\r\n}\r\n\r\nexport type EducationFieldDto = {\r\n    id: string;\r\n};\r\n\r\nexport type StaffRoleDto = {\r\n    id: string;\r\n};\r\n\r\nexport type OfferDto = {\r\n    id: string;\r\n    category: OfferCategory;\r\n    allowChooseProfileType: boolean;\r\n    allowChooseGender: boolean;\r\n    allowInterRole: boolean;\r\n};\r\n\r\nexport type OfferValueDto = {\r\n    offerId: string;\r\n    allowStaff: boolean;\r\n    allowStudent: boolean;\r\n    allowMale: boolean;\r\n    allowFemale: boolean;\r\n    allowOther: boolean;\r\n};\r\n\r\nexport const initOfferValue = (o: OfferDto, val = false): OfferValueDto => {\r\n    const genderVal = val && o.allowChooseGender;\r\n    const typeVal = val && o.allowChooseProfileType;\r\n    return {\r\n        offerId: o.id,\r\n        allowFemale: genderVal,\r\n        allowMale: genderVal,\r\n        allowOther: genderVal,\r\n        allowStudent: typeVal,\r\n        allowStaff: typeVal,\r\n    };\r\n};\r\n\r\nexport type InterestDto = {\r\n    id: string;\r\n};\r\n\r\nexport type SignedUrlResponseDto = {\r\n    fileName: string;\r\n    s3Url: string;\r\n};\r\n\r\nexport type AvatarSuccessfulUpdatedDto = {\r\n    avatar: string;\r\n};\r\n\r\nexport type ChatRoomProfileDto = {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    avatar: string | null;\r\n    lastMessageSeenId: string | null;\r\n    lastMessageSeenDate: string | null;\r\n};\r\n\r\nexport type ResponseRoomDto = {\r\n    id: string;\r\n    profiles: ChatRoomProfileDto[];\r\n    lastMessage: ResponseChatMessageDto | null;\r\n};\r\n\r\nexport type ResponseChatMessageDto = {\r\n    roomId: string;\r\n    id: string;\r\n    senderId: string;\r\n    sent: boolean;\r\n    text: string;\r\n    updatedAt: string;\r\n};\r\n\r\nexport type ResponseChatMessageReadDto = {\r\n    roomId: string;\r\n    date: string;\r\n    messageId: string;\r\n    profileId: string;\r\n};\r\n\r\nexport type ResponseChatWritingDto = {\r\n    roomId: string;\r\n    profileId: string;\r\n    state: boolean;\r\n};\r\n\r\nexport enum MatchActionStatus {\r\n    Declined = \"declined\",\r\n    Blocked = \"blocked\",\r\n    Matched = \"matched\",\r\n    Requested = \"requested\",\r\n}\r\nexport const MATCH_ACTION_HISTORY_STATUSES: MatchActionStatus[] = [\r\n    MatchActionStatus.Declined,\r\n    MatchActionStatus.Blocked,\r\n    MatchActionStatus.Requested,\r\n];\r\n\r\nexport type MatchActionResponseDto = {\r\n    roomId: string | null;\r\n    status: MatchActionStatus;\r\n};\r\n\r\nexport type MatchHistoryItemDto = {\r\n    profile: ResponseProfileDto;\r\n    status: MatchActionStatus;\r\n    date: string;\r\n    id: string;\r\n};\r\n\r\nexport type CreateGroupDto = {\r\n    name: string;\r\n    description: string;\r\n    visible: boolean;\r\n    requireApproval: boolean;\r\n};\r\n\r\nexport type ResponseGroupDto = {\r\n    name: string;\r\n    description: string;\r\n    visible: boolean;\r\n    requireApproval: boolean;\r\n};\r\n","import {convertDtoToHistoryItem, convertDtoToProfile} from \"../../api/converters\";\r\nimport {\r\n    MatchActionResponseDto,\r\n    MatchActionStatus,\r\n    MatchHistoryItemDto,\r\n    PaginatedRequestResponse,\r\n    ResponseProfileDto,\r\n    SuccessfulRequestResponse,\r\n} from \"../../api/dto\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {MatchingFiltersState, AppThunk} from \"../types\";\r\nimport {HISTORY_FETCH_LIMIT, PROFILES_FETCH_LIMIT} from \"../../constants/config\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {MatchHistoryItem} from \"../../model/matching\";\r\n\r\nexport enum MATCHING_ACTION_TYPES {\r\n    SET_FILTERS = \"MATCHING/SET_FILTERS\",\r\n    SET_OFFER_FILTER = \"MATCHING/SET_OFFER_FILTER\",\r\n\r\n    FETCH_PROFILES_BEGIN = \"MATCHING/FETCH_PROFILES_BEGIN\",\r\n    FETCH_PROFILES_FAILURE = \"MATCHING/FETCH_PROFILES_FAILURE\",\r\n    FETCH_PROFILES_SUCCESS = \"MATCHING/FETCH_PROFILES_SUCCESS\",\r\n    FETCH_PROFILES_REFRESH = \"MATCHING/FETCH_PROFILES_REFRESH\",\r\n\r\n    LIKE_PROFILE_SUCCESS = \"MATCHING/LIKE_PROFILE_SUCCESS\",\r\n    DISLIKE_PROFILE_SUCCESS = \"MATCHING/DISLIKE_PROFILE_SUCCESS\",\r\n    BLOCK_PROFILE_SUCCESS = \"MATCHING/BLOCK_PROFILE_SUCCESS\",\r\n\r\n    FETCH_MY_MATCHES_BEGIN = \"MATCHING/FETCH_MY_MATCHES_BEGIN\",\r\n    FETCH_MY_MATCHES_FAILURE = \"MATCHING/FETCH_MY_MATCHES_FAILURE\",\r\n    FETCH_MY_MATCHES_SUCCESS = \"MATCHING/FETCH_MY_MATCHES_SUCCESS\",\r\n\r\n    FETCH_HISTORY_BEGIN = \"MATCHING/FETCH_HISTORY_BEGIN\",\r\n    FETCH_HISTORY_FAILURE = \"MATCHING/FETCH_HISTORY_FAILURE\",\r\n    FETCH_HISTORY_SUCCESS = \"MATCHING/FETCH_HISTORY_SUCCESS\",\r\n    FETCH_HISTORY_REFRESH = \"MATCHING/FETCH_HISTORY_REFRESH\",\r\n\r\n    ACTION_CANCEL_SUCCESS = \"MATCHING/ACTION_CANCEL_SUCCESS\",\r\n    ACTION_CANCEL_FAILURE = \"MATCHING/ACTION_CANCEL_FAILURE\",\r\n\r\n    SET_HISTORY_FILTERS = \"MATCHING/SET_HISTORY_FILTERS\",\r\n}\r\n\r\nexport type SetOfferFilterAction = {\r\n    type: string;\r\n    offerId: string;\r\n    value: boolean;\r\n};\r\n\r\nexport type ResetMatchingFiltersAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetMatchingFiltersAction = {\r\n    type: string;\r\n    filters: Partial<MatchingFiltersState>;\r\n};\r\n\r\nexport type LikeProfileSuccessAction = {\r\n    type: string;\r\n    profile: UserProfile;\r\n    matchStatus: MatchActionStatus;\r\n    roomId: string | null;\r\n};\r\n\r\nexport type DislikeProfileSuccessAction = {\r\n    type: string;\r\n    profile: UserProfile;\r\n};\r\n\r\nexport type BlockProfileSuccessAction = {\r\n    type: string;\r\n    profileId: string;\r\n};\r\n\r\nexport type FetchProfilesRefreshAction = {\r\n    type: string;\r\n};\r\n\r\nexport type BeginFetchProfilesAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchProfilesFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchProfilesSuccessAction = {\r\n    type: string;\r\n    profiles: UserProfile[];\r\n    canFetchMore: boolean;\r\n};\r\n\r\nexport type BeginFetchMyMatchesAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchMyMatchesFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchMyMatchesSuccessAction = {\r\n    type: string;\r\n    profiles: UserProfile[];\r\n};\r\n\r\nexport type BeginFetchHistoryAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchHistoryFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchHistorySuccessAction = {\r\n    type: string;\r\n    items: MatchHistoryItem[];\r\n    canFetchMore: boolean;\r\n};\r\n\r\nexport type FetchHistoryRefreshAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetHistoryFiltersAction = {\r\n    type: string;\r\n    filters: {[key: string]: boolean};\r\n};\r\n\r\nexport type ActionCancelSuccessAction = {\r\n    type: string;\r\n    historyItemId: string;\r\n    isMatch: boolean;\r\n};\r\n\r\nexport type ActionCancelFailureAction = {\r\n    type: string;\r\n    historyItemId: string;\r\n};\r\n\r\nexport type MatchingAction =\r\n    | SetOfferFilterAction\r\n    | SetMatchingFiltersAction\r\n    | ResetMatchingFiltersAction\r\n    | BeginFetchProfilesAction\r\n    | FetchProfilesSuccessAction\r\n    | FetchProfilesFailureAction\r\n    | FetchProfilesRefreshAction\r\n    | LikeProfileSuccessAction\r\n    | DislikeProfileSuccessAction\r\n    | BlockProfileSuccessAction\r\n    | BeginFetchMyMatchesAction\r\n    | FetchMyMatchesFailureAction\r\n    | FetchMyMatchesSuccessAction\r\n    | SetHistoryFiltersAction\r\n    | ActionCancelSuccessAction\r\n    | ActionCancelFailureAction;\r\n\r\nexport const setOfferFilter = (offerId: string, value: boolean): SetOfferFilterAction => ({\r\n    type: MATCHING_ACTION_TYPES.SET_OFFER_FILTER,\r\n    offerId,\r\n    value,\r\n});\r\n\r\nexport const setMatchingFilters = (filters: Partial<MatchingFiltersState>): SetMatchingFiltersAction => ({\r\n    type: MATCHING_ACTION_TYPES.SET_FILTERS,\r\n    filters,\r\n});\r\n\r\nconst beginFetchProfiles = (): BeginFetchProfilesAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_BEGIN,\r\n});\r\n\r\nexport const fetchProfiles = (): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        auth: {token},\r\n        matching: {filters, profilesPagination},\r\n    } = getState();\r\n\r\n    if (!token) {\r\n        dispatch(fetchProfilesFailure());\r\n        return;\r\n    }\r\n\r\n    if (!profilesPagination.canFetchMore) console.log(\"Cannot fetch more profiles\");\r\n\r\n    if (profilesPagination.fetching || !profilesPagination.canFetchMore) return;\r\n\r\n    dispatch(beginFetchProfiles());\r\n\r\n    // Replaces empty arrays with \"undefined\"\r\n    function notEmpty<T>(t: Array<T>) {\r\n        return t.length == 0 ? undefined : t;\r\n    }\r\n\r\n    const offers = Object.keys(filters.offers).filter((k) => filters.offers[k] === true);\r\n    // Remove the \"degrees\" filters when not filtering for students\r\n    const degrees = filters.types && filters.types.indexOf(\"student\") === -1 ? [] : filters.degrees;\r\n    // Same for staffRoles & staff\r\n    const staffRoles = filters.types && filters.types.indexOf(\"staff\") === -1 ? [] : filters.staffRoles;\r\n\r\n    const filterParams = {\r\n        universities: notEmpty(filters.universities),\r\n        spokenLanguages: notEmpty(filters.languages),\r\n        degrees: notEmpty(degrees),\r\n        educationFields: notEmpty(filters.educationFields),\r\n        staffRoles: notEmpty(staffRoles),\r\n        types: notEmpty(filters.types),\r\n        offers: notEmpty(offers),\r\n    };\r\n\r\n    const response = await requestBackend(\r\n        \"profiles\",\r\n        \"GET\",\r\n        {\r\n            page: profilesPagination.page,\r\n            limit: PROFILES_FETCH_LIMIT,\r\n            ...filterParams,\r\n        },\r\n        {},\r\n        token,\r\n        true,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const paginated = response as PaginatedRequestResponse;\r\n        const profiles = (paginated.data as ResponseProfileDto[]).map(convertDtoToProfile);\r\n        const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n        console.log(\"fetched\", profiles.length, \"profiles\");\r\n        console.log(\"meta\", paginated.meta);\r\n        dispatch(fetchProfilesSuccess(profiles, canFetchMore));\r\n    } else dispatch(fetchProfilesFailure());\r\n};\r\n\r\nconst fetchProfilesFailure = (): FetchProfilesFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_FAILURE,\r\n});\r\n\r\nconst fetchProfilesSuccess = (profiles: UserProfile[], canFetchMore: boolean): FetchProfilesSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_SUCCESS,\r\n    profiles,\r\n    canFetchMore,\r\n});\r\n\r\nexport const refreshFetchedProfiles = (): FetchProfilesRefreshAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_REFRESH,\r\n});\r\n\r\nconst likeProfileSuccess = (\r\n    profile: UserProfile,\r\n    matchStatus: MatchActionStatus,\r\n    roomId: string | null,\r\n): LikeProfileSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.LIKE_PROFILE_SUCCESS,\r\n    profile,\r\n    matchStatus,\r\n    roomId,\r\n});\r\n\r\nexport const likeProfile = (profile: UserProfile): AppThunk<Promise<MatchActionResponseDto | null>> => async (\r\n    dispatch,\r\n    getState,\r\n) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"matching/like\", \"POST\", {}, {toProfileId: profile.id}, token, true);\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const {status, roomId} = payload as MatchActionResponseDto;\r\n        dispatch(likeProfileSuccess(profile, status, roomId));\r\n        return {status, roomId};\r\n    }\r\n    return null;\r\n};\r\n\r\nconst dislikeProfileSuccess = (profile: UserProfile): DislikeProfileSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.DISLIKE_PROFILE_SUCCESS,\r\n    profile,\r\n});\r\n\r\nexport const dislikeProfile = (profile: UserProfile): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"matching/decline\", \"POST\", {}, {toProfileId: profile.id}, token, true);\r\n    if (response.status === HttpStatusCode.OK) dispatch(dislikeProfileSuccess(profile));\r\n};\r\n\r\nconst blockProfileSuccess = (profileId: string): BlockProfileSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.BLOCK_PROFILE_SUCCESS,\r\n    profileId,\r\n});\r\n\r\nexport const blockProfile = (profileId: string): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"matching/block\", \"POST\", {}, {toProfileId: profileId}, token, true);\r\n    if (response.status === HttpStatusCode.OK) dispatch(blockProfileSuccess(profileId));\r\n};\r\n\r\nconst beginFetchMyMatches = (): BeginFetchMyMatchesAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_BEGIN,\r\n});\r\n\r\nconst fetchMyMatchesFailure = (): FetchMyMatchesFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_FAILURE,\r\n});\r\n\r\nconst fetchMyMatchesSuccess = (profiles: UserProfile[]): FetchMyMatchesSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_SUCCESS,\r\n    profiles,\r\n});\r\n\r\nexport const fetchMyMatches = (): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        auth: {token},\r\n        matching,\r\n    } = getState();\r\n    if (matching.fetchingMyMatches) return;\r\n\r\n    dispatch(beginFetchMyMatches());\r\n\r\n    const response = await requestBackend(\"matching\", \"GET\", {}, {}, token);\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const profiles = (payload as ResponseProfileDto[]).map(convertDtoToProfile);\r\n        dispatch(fetchMyMatchesSuccess(profiles));\r\n    } else dispatch(fetchMyMatchesFailure());\r\n};\r\n\r\nconst beginFetchHistory = (): BeginFetchHistoryAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_BEGIN,\r\n});\r\n\r\nconst fetchHistoryFailure = (): FetchHistoryFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_FAILURE,\r\n});\r\n\r\nconst fetchHistorySuccess = (items: MatchHistoryItem[], canFetchMore: boolean): FetchHistorySuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_SUCCESS,\r\n    items,\r\n    canFetchMore,\r\n});\r\n\r\nexport const refreshFetchedHistory = (): FetchHistoryRefreshAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_REFRESH,\r\n});\r\n\r\nexport const fetchHistory = (search?: string): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        auth: {token},\r\n        matching: {historyPagination, historyFilters},\r\n    } = getState();\r\n\r\n    if (historyPagination.fetching || !historyPagination.canFetchMore) return;\r\n\r\n    dispatch(beginFetchHistory());\r\n\r\n    const response = await requestBackend(\r\n        \"matching/history\",\r\n        \"GET\",\r\n        {\r\n            page: historyPagination.page,\r\n            limit: HISTORY_FETCH_LIMIT,\r\n            status: Object.keys(historyFilters).filter((k) => historyFilters[k]),\r\n            search: search && search.length > 0 ? search : undefined,\r\n        },\r\n        {},\r\n        token,\r\n        true,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const paginated = response as PaginatedRequestResponse;\r\n        const items = (paginated.data as MatchHistoryItemDto[]).map(convertDtoToHistoryItem);\r\n        const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n        dispatch(fetchHistorySuccess(items, canFetchMore));\r\n    } else dispatch(fetchHistoryFailure());\r\n};\r\n\r\nexport const setHistoryFilters = (filters: {[key: string]: boolean}): SetHistoryFiltersAction => ({\r\n    type: MATCHING_ACTION_TYPES.SET_HISTORY_FILTERS,\r\n    filters,\r\n});\r\n\r\nconst cancelActionFailure = (historyItemId: string): ActionCancelFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.ACTION_CANCEL_FAILURE,\r\n    historyItemId,\r\n});\r\n\r\nconst cancelActionSuccess = (historyItemId: string, isMatch: boolean): ActionCancelSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.ACTION_CANCEL_SUCCESS,\r\n    historyItemId,\r\n    isMatch,\r\n});\r\n\r\nexport const cancelMatchAction = (historyItemId: string, isMatch = false): AppThunk<Promise<boolean>> => async (\r\n    dispatch,\r\n    getState,\r\n) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\r\n        \"matching/cancel\",\r\n        \"POST\",\r\n        {},\r\n        {matchingEntityId: historyItemId},\r\n        token,\r\n        true,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        dispatch(cancelActionSuccess(historyItemId, isMatch));\r\n        return true;\r\n    } else {\r\n        dispatch(cancelActionFailure(historyItemId));\r\n        return false;\r\n    }\r\n};\r\n","import {MATCH_ACTION_HISTORY_STATUSES} from \"../../api/dto\";\r\nimport {MatchHistoryItem} from \"../../model/matching\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {AUTH_ACTION_TYPES} from \"../auth/actions\";\r\nimport {initialPaginatedState, MatchingFiltersState, MatchingState} from \"../types\";\r\nimport {\r\n    MatchingAction,\r\n    MATCHING_ACTION_TYPES,\r\n    SetOfferFilterAction,\r\n    SetMatchingFiltersAction,\r\n    FetchProfilesSuccessAction,\r\n    DislikeProfileSuccessAction,\r\n    BlockProfileSuccessAction,\r\n    LikeProfileSuccessAction,\r\n    FetchMyMatchesSuccessAction,\r\n    FetchHistorySuccessAction,\r\n    SetHistoryFiltersAction,\r\n    ActionCancelSuccessAction,\r\n} from \"./actions\";\r\n\r\nexport const defaultMatchingFilters = (): MatchingFiltersState => ({\r\n    offers: {},\r\n    universities: [],\r\n    degrees: [],\r\n    languages: [],\r\n    educationFields: [],\r\n    staffRoles: [],\r\n    types: [],\r\n});\r\n\r\nconst initialHistoryFilters = () => {\r\n    const filters: {[key: string]: boolean} = {};\r\n    MATCH_ACTION_HISTORY_STATUSES.forEach((k) => (filters[k] = true));\r\n    return filters;\r\n};\r\n\r\nexport const initialState: MatchingState = {\r\n    filters: defaultMatchingFilters(),\r\n    fetchedProfiles: [],\r\n    profilesPagination: initialPaginatedState(),\r\n    historyPagination: initialPaginatedState(),\r\n    historyFilters: initialHistoryFilters(),\r\n    historyItems: [],\r\n    myMatches: [],\r\n    fetchingMyMatches: false,\r\n};\r\n\r\nexport const matchingReducer = (state: MatchingState = initialState, action: MatchingAction): MatchingState => {\r\n    switch (action.type) {\r\n        case MATCHING_ACTION_TYPES.SET_OFFER_FILTER: {\r\n            const {offerId, value} = <SetOfferFilterAction>action;\r\n            return {\r\n                ...state,\r\n                filters: {\r\n                    ...state.filters,\r\n                    offers: {...state.filters.offers, [offerId]: value},\r\n                },\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.SET_FILTERS: {\r\n            const {filters} = <SetMatchingFiltersAction>action;\r\n            return {\r\n                ...state,\r\n                filters: {...state.filters, ...filters},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_BEGIN: {\r\n            return {...state, profilesPagination: {...state.profilesPagination, fetching: true}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_FAILURE: {\r\n            return {...state, profilesPagination: {...state.profilesPagination, fetching: false, canFetchMore: false}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_SUCCESS: {\r\n            const {profiles, canFetchMore} = <FetchProfilesSuccessAction>action;\r\n            const pagination = state.profilesPagination;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.concat(profiles),\r\n                profilesPagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_REFRESH: {\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: [],\r\n                profilesPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_BEGIN: {\r\n            return {...state, fetchingMyMatches: true};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_FAILURE: {\r\n            return {...state, fetchingMyMatches: false};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_SUCCESS: {\r\n            const {profiles} = <FetchMyMatchesSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                myMatches: profiles,\r\n                fetchingMyMatches: false,\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.LIKE_PROFILE_SUCCESS: {\r\n            const {profile} = <LikeProfileSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.filter((p: UserProfile) => p.id != profile.id),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.DISLIKE_PROFILE_SUCCESS: {\r\n            const {profile} = <DislikeProfileSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.filter((p: UserProfile) => p.id != profile.id),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.BLOCK_PROFILE_SUCCESS: {\r\n            const {profileId} = <BlockProfileSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.filter((p: UserProfile) => p.id != profileId),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_BEGIN: {\r\n            return {...state, historyPagination: {...state.historyPagination, fetching: true}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_FAILURE: {\r\n            return {...state, historyPagination: {...state.historyPagination, fetching: false, canFetchMore: false}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_SUCCESS: {\r\n            const {items, canFetchMore} = <FetchHistorySuccessAction>action;\r\n            const pagination = state.historyPagination;\r\n            return {\r\n                ...state,\r\n                historyItems: state.historyItems.concat(items),\r\n                historyPagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_REFRESH: {\r\n            return {\r\n                ...state,\r\n                historyItems: [],\r\n                historyPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.SET_HISTORY_FILTERS: {\r\n            const {filters} = action as SetHistoryFiltersAction;\r\n            return {\r\n                ...state,\r\n                historyFilters: {...state.historyFilters, ...filters},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.ACTION_CANCEL_SUCCESS: {\r\n            const {historyItemId} = action as ActionCancelSuccessAction;\r\n            return {\r\n                ...state,\r\n                historyItems: state.historyItems.filter((it: MatchHistoryItem) => it.id !== historyItemId),\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {\r\n                ...state,\r\n                filters: defaultMatchingFilters(),\r\n                fetchedProfiles: [],\r\n                profilesPagination: initialPaginatedState(),\r\n                myMatches: [],\r\n                fetchingMyMatches: false,\r\n                historyItems: [],\r\n                historyPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import io from \"socket.io-client\";\r\nimport {BACKEND_URL, DEBUG_MODE} from \"../constants/config\";\r\nimport {ChatRoom} from \"../model/chat-room\";\r\nimport {ResponseChatWritingDto, ResponseChatMessageDto, TokenDto, ResponseChatMessageReadDto} from \"./dto\";\r\n\r\nconst SOCKET_LOCATION = `${BACKEND_URL}/chat`;\r\n\r\nconst WRITING_STATE_DELAY = 1000;\r\nconst CONNECT_TIMEOUT = 2000;\r\nconst RECONNECT_ATTEMPTS = 3;\r\n\r\nexport type ChatSocketEventListeners = {\r\n    onMessageReceived: (m: ResponseChatMessageDto) => void;\r\n    onWritingStateChange: (m: ResponseChatWritingDto) => void;\r\n    onMessageRead: (m: ResponseChatMessageReadDto) => void;\r\n};\r\n\r\nclass ChatSocket {\r\n    private socket: SocketIOClient.Socket | null;\r\n    private connectCallbacks: ((connected: boolean) => void)[];\r\n    private writingTimeout: NodeJS.Timeout | null;\r\n    private lastSentWritingState: boolean;\r\n    private lastSentWritingStateRoom: ChatRoom | null;\r\n\r\n    private connectTimeout: NodeJS.Timeout | null;\r\n\r\n    constructor() {\r\n        this.socket = null;\r\n        this.connectCallbacks = [];\r\n        this.writingTimeout = null;\r\n        this.lastSentWritingState = false;\r\n        this.lastSentWritingStateRoom = null;\r\n        this.connectTimeout = null;\r\n    }\r\n\r\n    private consumeConnectCallbacks(connectedState: boolean): void {\r\n        this.connectCallbacks.forEach((f) => f(connectedState));\r\n        this.connectCallbacks = [];\r\n    }\r\n\r\n    private registerListeners(listeners: ChatSocketEventListeners): void {\r\n        if (!this.socket) return;\r\n\r\n        this.socket.on(\"connect\", () => {\r\n            this.log(\"connected\");\r\n            if (this.connectTimeout) clearTimeout(this.connectTimeout);\r\n            this.connectTimeout = null;\r\n            this.consumeConnectCallbacks(true);\r\n        });\r\n        this.socket.on(\"close\", () => {\r\n            this.log(\"close\");\r\n            if (this.connectTimeout) clearTimeout(this.connectTimeout);\r\n            this.connectTimeout = null;\r\n            this.consumeConnectCallbacks(false);\r\n        });\r\n        this.socket.on(\"disconnect\", () => {\r\n            this.log(\"disconnected\");\r\n            if (this.connectTimeout) clearTimeout(this.connectTimeout);\r\n            this.connectTimeout = null;\r\n            this.consumeConnectCallbacks(false);\r\n        });\r\n\r\n        /*this.socket.on(\"connect_failed\", () => this.log(\"connect_failed\"));\r\n        this.socket.on(\"connect_error\", () => this.log(\"connect_error\"));\r\n        this.socket.on(\"error\", () => this.log(\"error\"));\r\n        this.socket.on(\"exception\", (e: unknown) => this.log(\"<---- Exception \" + JSON.stringify(e)));*/\r\n\r\n        this.socket.on(\"receiveMessage\", (m: ResponseChatMessageDto) => listeners.onMessageReceived(m));\r\n        this.socket.on(\"readMessage\", (m: ResponseChatMessageReadDto) => listeners.onMessageRead(m));\r\n        this.socket.on(\"isWriting\", (m: ResponseChatWritingDto) => listeners.onWritingStateChange(m));\r\n    }\r\n\r\n    private log(msg: string): void {\r\n        if (DEBUG_MODE) console.log(`[ChatSocket] ${msg}`);\r\n    }\r\n\r\n    private emit(msg: string, payload: unknown): void {\r\n        this.log(`----> '${msg}' - payload: ${JSON.stringify(payload)}`);\r\n        this.socket?.emit(msg, payload);\r\n    }\r\n\r\n    private sendWritingState(room: ChatRoom, state: boolean): void {\r\n        this.lastSentWritingState = state;\r\n        this.lastSentWritingStateRoom = room;\r\n        this.emit(\"isWriting\", {roomId: room.id, state});\r\n    }\r\n\r\n    private refreshWritingTimeout(room: ChatRoom): void {\r\n        if (this.writingTimeout !== null) {\r\n            clearTimeout(this.writingTimeout);\r\n            this.writingTimeout = null;\r\n        }\r\n        this.writingTimeout = setTimeout(() => {\r\n            this.sendWritingState(room, false);\r\n        }, WRITING_STATE_DELAY);\r\n    }\r\n\r\n    addConnectCallback(callback: (connected: boolean) => void): void {\r\n        this.connectCallbacks.push(callback);\r\n    }\r\n\r\n    connect(\r\n        authToken: TokenDto,\r\n        listeners: Partial<ChatSocketEventListeners> = {},\r\n        callback?: (connected: boolean) => void,\r\n        retry = RECONNECT_ATTEMPTS,\r\n    ): void {\r\n        /* eslint-disable @typescript-eslint/no-empty-function */\r\n\r\n        // If we're already connected, callback and abort\r\n        if (this.isConnected()) {\r\n            if (callback) callback(true);\r\n            return;\r\n        }\r\n\r\n        if (callback) this.addConnectCallback(callback);\r\n\r\n        // If we're already connecting, abort (the callback we be called whenever we're connected)\r\n        if (this.isConnecting()) return;\r\n\r\n        this.log(\"Connecting to \" + SOCKET_LOCATION);\r\n\r\n        if (this.socket) {\r\n            this.socket.connect();\r\n            /*setTimeout(() => {\r\n                if (this.socket) this.socket.connect();\r\n            }, 100);*/\r\n        } else {\r\n            this.log(\"----> Authenticating - token = \" + authToken.accessToken);\r\n            this.socket = io(SOCKET_LOCATION, {\r\n                query: {authorization: authToken.accessToken},\r\n                //reconnectionDelay: RECONNECT_DELAY,\r\n                //reconnectionAttempts: RECONNECT_ATTEMPTS,\r\n                reconnection: false,\r\n            });\r\n            this.registerListeners({\r\n                onMessageRead: () => {},\r\n                onMessageReceived: () => {},\r\n                onWritingStateChange: () => {},\r\n                ...listeners,\r\n            });\r\n        }\r\n\r\n        if (this.connectTimeout) clearTimeout(this.connectTimeout);\r\n\r\n        // Set a timeout to catch connection failure\r\n        this.connectTimeout = setTimeout(() => {\r\n            this.connectTimeout = null;\r\n            // If we're still not connected\r\n            if (!this.isConnected()) {\r\n                // Try again\r\n                if (retry > 0) this.connect(authToken, listeners, () => {}, retry - 1);\r\n                // Stop trying\r\n                else this.consumeConnectCallbacks(false);\r\n            }\r\n        }, CONNECT_TIMEOUT);\r\n    }\r\n\r\n    joinRoom(room: ChatRoom): void {\r\n        this.emit(\"joinRoom\", {roomId: room.id});\r\n        // Inform the server that we have read the last message of the room\r\n        if (room.lastMessage) this.readMessage(room.id, room.lastMessage._id, room.lastMessage.createdAt.toJSON());\r\n    }\r\n\r\n    leaveRoom(room: ChatRoom): void {\r\n        this.emit(\"leaveRoom\", {roomId: room.id});\r\n    }\r\n\r\n    sendMessage(roomId: string, id: string, text: string): void {\r\n        this.emit(\"sendMessage\", {roomId, id, text});\r\n    }\r\n\r\n    readMessage(roomId: string, messageId: string, createdAt: string): void {\r\n        this.emit(\"readMessage\", {roomId, messageId, date: createdAt});\r\n    }\r\n\r\n    setWriting(room: ChatRoom): void {\r\n        // Refesh the timeout - in a fixed amount of time, this will tell the server we are no longer writing\r\n        this.refreshWritingTimeout(room);\r\n\r\n        // If we are beginning to write, inform the server now\r\n        if (this.lastSentWritingState === false) this.sendWritingState(room, true);\r\n    }\r\n\r\n    disconnect(): void {\r\n        // If we were connecting\r\n        if (this.isConnecting()) {\r\n            if (this.connectTimeout) clearTimeout(this.connectTimeout);\r\n            this.connectTimeout = null;\r\n            this.consumeConnectCallbacks(false);\r\n        }\r\n        // If the socket was connected, disconnect it\r\n        if (this.isConnected()) {\r\n            if (this.lastSentWritingStateRoom && this.lastSentWritingState === true)\r\n                this.sendWritingState(this.lastSentWritingStateRoom, false);\r\n            if (this.socket) this.socket.disconnect();\r\n        }\r\n    }\r\n\r\n    isConnected(): boolean {\r\n        return this.socket !== null && this.socket.connected;\r\n    }\r\n\r\n    isConnecting(): boolean {\r\n        return this.connectTimeout !== null;\r\n    }\r\n}\r\n\r\nexport default new ChatSocket();\r\n","import chatSocket from \"../../api/chat-socket\";\r\nimport {convertDtoToChatMessage, convertDtoToRoom} from \"../../api/converters\";\r\nimport {\r\n    PaginatedRequestResponse,\r\n    ResponseChatMessageDto,\r\n    ResponseChatMessageReadDto,\r\n    ResponseChatWritingDto,\r\n    ResponseRoomDto,\r\n    SuccessfulRequestResponse,\r\n} from \"../../api/dto\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {MESSAGES_FETCH_LIMIT, ROOMS_FETCH_LIMIT} from \"../../constants/config\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {ChatRoom, ChatRoomMessage} from \"../../model/chat-room\";\r\nimport {AppThunk} from \"../types\";\r\n\r\nexport enum MESSAGING_ACTION_TYPES {\r\n    FETCH_MATCH_ROOMS_BEGIN = \"MESSAGING/FETCH_MATCH_ROOMS_BEGIN\",\r\n    FETCH_MATCH_ROOMS_FAILURE = \"MESSAGING/FETCH_MATCH_ROOMS_FAILURE\",\r\n    FETCH_MATCH_ROOMS_SUCCESS = \"MESSAGING/FETCH_MATCH_ROOMS_SUCCESS\",\r\n    FETCH_MATCH_ROOMS_REFRESH = \"MESSAGING/FETCH_MATCH_ROOMS_REFRESH\",\r\n    CONNECT_TO_CHAT_BEGIN = \"MESSAGING/CONNECT_TO_CHAT_BEGIN\",\r\n    CONNECT_TO_CHAT_FAILURE = \"MESSAGING/CONNECT_TO_CHAT_FAILURE\",\r\n    CONNECT_TO_CHAT_SUCCESS = \"MESSAGING/CONNECT_TO_CHAT_SUCCESS\",\r\n    DISCONNECT_FROM_CHAT = \"MESSAGING/DISCONNECT_FROM_CHAT\",\r\n    JOIN_CHAT_ROOM_BEGIN = \"MESSAGING/JOIN_CHAT_ROOM_BEGIN\",\r\n    JOIN_CHAT_ROOM_FAILURE = \"MESSAGING/JOIN_CHAT_ROOM_FAILURE\",\r\n    JOIN_CHAT_ROOM_SUCCESS = \"MESSAGING/JOIN_CHAT_ROOM_SUCCESS\",\r\n    LEAVE_ROOM = \"MESSAGING/LEAVE_ROOM\",\r\n    SEND_MESSAGE_FAILURE = \"MESSAGING/SEND_MESSAGE_FAILURE\",\r\n    SEND_MESSAGE_SUCCESS = \"MESSAGING/SEND_MESSAGE_SUCCESS\",\r\n    RECEIVE_MESSAGE = \"MESSAGING/RECEIVE_MESSAGE\",\r\n    RECEIVE_WRITING_STATE = \"MESSAGING/RECEIVE_WRITING_STATE\",\r\n    READ_MESSAGE = \"MESSAGING/READ_MESSAGE\",\r\n    FETCH_EARLIER_MESSAGES_BEGIN = \"MESSAGING/FETCH_EARLIER_MESSAGES_BEGIN\",\r\n    FETCH_EARLIER_MESSAGES_FAILURE = \"MESSAGING/FETCH_EARLIER_MESSAGES_FAILURE\",\r\n    FETCH_EARLIER_MESSAGES_SUCCESS = \"MESSAGING/FETCH_EARLIER_MESSAGES_SUCCESS\",\r\n    FETCH_NEW_MESSAGES_BEGIN = \"MESSAGING/FETCH_NEW_MESSAGES_BEGIN\",\r\n    FETCH_NEW_MESSAGES_FAILURE = \"MESSAGING/FETCH_NEW_MESSAGES_FAILURE\",\r\n    FETCH_NEW_MESSAGES_SUCCESS = \"MESSAGING/FETCH_NEW_MESSAGES_SUCCESS\",\r\n}\r\n\r\nexport type FetchMatchRoomsBeginAction = {type: string};\r\nexport type FetchMatchRoomsFailureAction = {type: string};\r\nexport type FetchMatchRoomsSuccessAction = {\r\n    type: string;\r\n    rooms: ChatRoom[];\r\n    canFetchMore: boolean;\r\n};\r\nexport type FetchMatchRoomsRefreshAction = {type: string};\r\n\r\nexport type ConnectToChatBeginAction = {type: string};\r\nexport type ConnectToChatFailureAction = {type: string};\r\nexport type ConnectToChatSuccessAction = {type: string};\r\n\r\nexport type JoinChatRoomBeginAction = {type: string; room: ChatRoom};\r\nexport type JoinChatRoomFailureAction = {type: string; room: ChatRoom};\r\nexport type JoinChatRoomSuccessAction = {type: string; room: ChatRoom};\r\nexport type LeaveChatRoomAction = {type: string};\r\n\r\nexport type DisconnectFromChatAction = {type: string};\r\n\r\nexport type SendMessageFailureAction = {type: string};\r\nexport type SendMessageSuccessAction = {type: string; message: ChatRoomMessage};\r\nexport type ReceiveChatMessageAction = {type: string; message: ResponseChatMessageDto};\r\nexport type ReceiveChatWritingAction = {type: string; payload: ResponseChatWritingDto};\r\nexport type ReadChatMessageAction = {type: string; payload: ResponseChatMessageReadDto};\r\n\r\nexport type FetchEarlierMessagesBeginAction = {type: string; room: ChatRoom};\r\nexport type FetchEarlierMessagesFailureAction = {type: string; room: ChatRoom};\r\nexport type FetchEarlierMessagesSuccessAction = {\r\n    type: string;\r\n    room: ChatRoom;\r\n    messages: ChatRoomMessage[];\r\n    canFetchMore: boolean;\r\n};\r\n\r\nexport type FetchNewMessagesBeginAction = {type: string; room: ChatRoom};\r\nexport type FetchNewMessagesFailureAction = {type: string; room: ChatRoom};\r\nexport type FetchNewMessagesSuccessAction = {\r\n    type: string;\r\n    room: ChatRoom;\r\n    messages: ChatRoomMessage[];\r\n};\r\n\r\nexport type MessagingAction =\r\n    | FetchMatchRoomsFailureAction\r\n    | FetchMatchRoomsSuccessAction\r\n    | FetchMatchRoomsRefreshAction\r\n    | ConnectToChatBeginAction\r\n    | ConnectToChatFailureAction\r\n    | ConnectToChatSuccessAction\r\n    | JoinChatRoomBeginAction\r\n    | JoinChatRoomFailureAction\r\n    | JoinChatRoomSuccessAction\r\n    | LeaveChatRoomAction\r\n    | DisconnectFromChatAction\r\n    | SendMessageFailureAction\r\n    | SendMessageSuccessAction\r\n    | ReceiveChatMessageAction\r\n    | FetchEarlierMessagesBeginAction\r\n    | FetchEarlierMessagesFailureAction\r\n    | FetchEarlierMessagesSuccessAction\r\n    | FetchNewMessagesBeginAction\r\n    | FetchNewMessagesFailureAction\r\n    | FetchNewMessagesSuccessAction;\r\n\r\nconst beginFetchMatchRooms = (): FetchMatchRoomsBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_BEGIN,\r\n});\r\n\r\nconst fetchMatchRoomsFailure = (): FetchMatchRoomsFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_FAILURE,\r\n});\r\n\r\nconst fetchMatchRoomsSuccess = (rooms: ChatRoom[], canFetchMore: boolean): FetchMatchRoomsSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_SUCCESS,\r\n    rooms,\r\n    canFetchMore,\r\n});\r\n\r\nexport const fetchMatchRooms = (search?: string): AppThunk => async (dispatch, getState) => {\r\n    const state = getState();\r\n    const token = state.auth.token;\r\n    const pagination = state.messaging.matchRoomsPagination;\r\n\r\n    if (pagination.fetching || !pagination.canFetchMore) return;\r\n\r\n    dispatch(beginFetchMatchRooms());\r\n\r\n    const response = await requestBackend(\r\n        \"rooms\",\r\n        \"GET\",\r\n        {page: pagination.page, limit: ROOMS_FETCH_LIMIT, search},\r\n        {},\r\n        token,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const paginated = response as PaginatedRequestResponse;\r\n        const rooms = (paginated.data as ResponseRoomDto[]).map(convertDtoToRoom);\r\n        const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n        dispatch(fetchMatchRoomsSuccess(rooms, canFetchMore));\r\n    } else dispatch(fetchMatchRoomsFailure());\r\n};\r\n\r\nexport const refreshMatchRooms = (): FetchMatchRoomsRefreshAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_REFRESH,\r\n});\r\n\r\nconst connectToChatBegin = (): ConnectToChatBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_BEGIN,\r\n});\r\n\r\nconst connectToChatFailure = (): ConnectToChatFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_FAILURE,\r\n});\r\n\r\nconst connectToChatSuccess = (): ConnectToChatSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_SUCCESS,\r\n});\r\n\r\nexport const connectToChat = (callback?: (connected: boolean) => void): AppThunk => async (dispatch, getState) => {\r\n    const authToken = getState().auth.token;\r\n\r\n    const fail = () => {\r\n        dispatch(connectToChatFailure());\r\n        if (callback) callback(false);\r\n    };\r\n\r\n    if (chatSocket.isConnected()) {\r\n        if (callback) callback(true);\r\n    } else if (authToken) {\r\n        if (chatSocket.isConnecting()) {\r\n            if (callback) chatSocket.addConnectCallback(callback);\r\n        } else {\r\n            dispatch(connectToChatBegin());\r\n            chatSocket.connect(\r\n                authToken,\r\n                {\r\n                    onMessageReceived: (m) => {\r\n                        const {activeRoom} = getState().messaging;\r\n                        // Tell the server we've read the message if this is the active room\r\n                        if (activeRoom && m.roomId == activeRoom.id)\r\n                            chatSocket.readMessage(activeRoom.id, m.id, m.updatedAt);\r\n                        dispatch(receiveChatMessage(m));\r\n                    },\r\n                    onMessageRead: (p) => dispatch(readChatMessage(p)),\r\n                    onWritingStateChange: (m) => dispatch(receiveChatWriting(m)),\r\n                },\r\n                (hasConnected: boolean) => {\r\n                    if (hasConnected) {\r\n                        dispatch(connectToChatSuccess());\r\n                        if (callback) callback(true);\r\n                    } else fail();\r\n                },\r\n            );\r\n        }\r\n    } else fail();\r\n};\r\n\r\nexport const disconnectFromChat = (): DisconnectFromChatAction => {\r\n    chatSocket.disconnect();\r\n    return {type: MESSAGING_ACTION_TYPES.DISCONNECT_FROM_CHAT};\r\n};\r\n\r\nconst joinChatRoomBegin = (room: ChatRoom): JoinChatRoomBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_BEGIN,\r\n    room,\r\n});\r\n\r\nconst joinChatRoomFailure = (room: ChatRoom): JoinChatRoomFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_FAILURE,\r\n    room,\r\n});\r\n\r\nconst joinChatRoomSuccess = (room: ChatRoom): JoinChatRoomSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_SUCCESS,\r\n    room,\r\n});\r\n\r\nexport const joinChatRoom = (room: ChatRoom): AppThunk => async (dispatch) => {\r\n    if (chatSocket.isConnected()) {\r\n        dispatch(joinChatRoomBegin(room));\r\n        chatSocket.joinRoom(room);\r\n        dispatch(joinChatRoomSuccess(room));\r\n    } else dispatch(joinChatRoomFailure(room));\r\n};\r\n\r\nexport const leaveChatRoom = (room: ChatRoom): LeaveChatRoomAction => {\r\n    chatSocket.leaveRoom(room);\r\n    return {type: MESSAGING_ACTION_TYPES.LEAVE_ROOM};\r\n};\r\n\r\nconst sendChatMessageFailure = (): SendMessageFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.SEND_MESSAGE_FAILURE,\r\n});\r\n\r\nconst sendChatMessageSuccess = (message: ChatRoomMessage): SendMessageSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.SEND_MESSAGE_SUCCESS,\r\n    message,\r\n});\r\n\r\nexport const sendChatMessage = (id: string, text: string, createdAt: Date): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        socketState: {connected},\r\n        activeRoom,\r\n        localChatUser,\r\n    } = getState().messaging;\r\n\r\n    if (connected && activeRoom && localChatUser) {\r\n        const message: ChatRoomMessage = {\r\n            _id: id,\r\n            createdAt,\r\n            user: localChatUser,\r\n            text,\r\n            sent: false,\r\n        };\r\n        dispatch(sendChatMessageSuccess(message));\r\n        chatSocket.sendMessage(activeRoom.id, id, text);\r\n    } else dispatch(sendChatMessageFailure());\r\n};\r\n\r\nexport const receiveChatMessage = (message: ResponseChatMessageDto): ReceiveChatMessageAction => ({\r\n    type: MESSAGING_ACTION_TYPES.RECEIVE_MESSAGE,\r\n    message,\r\n});\r\n\r\nconst receiveChatWriting = (payload: ResponseChatWritingDto): ReceiveChatWritingAction => ({\r\n    type: MESSAGING_ACTION_TYPES.RECEIVE_WRITING_STATE,\r\n    payload,\r\n});\r\n\r\nconst readChatMessage = (payload: ResponseChatMessageReadDto): ReadChatMessageAction => ({\r\n    type: MESSAGING_ACTION_TYPES.READ_MESSAGE,\r\n    payload,\r\n});\r\n\r\nconst fetchEarlierMessagesBegin = (room: ChatRoom): FetchEarlierMessagesBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_BEGIN,\r\n    room,\r\n});\r\n\r\nconst fetchEarlierMessagesFailure = (room: ChatRoom): FetchEarlierMessagesFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_FAILURE,\r\n    room,\r\n});\r\n\r\nconst fetchEarlierMessagesSuccess = (\r\n    room: ChatRoom,\r\n    messages: ChatRoomMessage[],\r\n    canFetchMore: boolean,\r\n): FetchEarlierMessagesSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_SUCCESS,\r\n    room,\r\n    messages,\r\n    canFetchMore,\r\n});\r\n\r\nconst fetchNewMessagesBegin = (room: ChatRoom): FetchNewMessagesBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_NEW_MESSAGES_BEGIN,\r\n    room,\r\n});\r\n\r\nconst fetchNewMessagesFailure = (room: ChatRoom): FetchNewMessagesFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_NEW_MESSAGES_FAILURE,\r\n    room,\r\n});\r\n\r\nconst fetchNewMessagesSuccess = (room: ChatRoom, messages: ChatRoomMessage[]): FetchNewMessagesSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_NEW_MESSAGES_SUCCESS,\r\n    room,\r\n    messages,\r\n});\r\n\r\n/**\r\n * Fetch all messages that are more recent than the last one we have for a given room.\r\n * @param room a ChatRoom\r\n */\r\nexport const fetchNewMessages = (room: ChatRoom): AppThunk => async (dispatch, getState) => {\r\n    const state = getState();\r\n    const {fetchingNewMessages} = state.messaging;\r\n    const token = state.auth.token;\r\n\r\n    if (fetchingNewMessages) return;\r\n    const lastMessage = room.lastMessage;\r\n\r\n    if (chatSocket.isConnected() && lastMessage) {\r\n        dispatch(fetchNewMessagesBegin(room));\r\n\r\n        // Fetch messages only after the date of the latest message we have\r\n        const afterDate = lastMessage.createdAt.toJSON();\r\n\r\n        const fetchPage = async (page: number) => {\r\n            const response = await requestBackend(\r\n                `rooms/${room.id}/messages`,\r\n                \"GET\",\r\n                {page, limit: MESSAGES_FETCH_LIMIT, afterDate},\r\n                {},\r\n                token,\r\n            );\r\n\r\n            const convertDto = (dto: ResponseChatMessageDto): ChatRoomMessage | undefined => {\r\n                const user = room.users.find((u) => u._id === dto.senderId);\r\n                return user ? convertDtoToChatMessage(user, dto) : undefined;\r\n            };\r\n\r\n            if (response.status === HttpStatusCode.OK) {\r\n                const paginated = response as PaginatedRequestResponse;\r\n                const messages = (paginated.data as ResponseChatMessageDto[])\r\n                    .map(convertDto)\r\n                    .filter((m) => m !== undefined);\r\n\r\n                // Keep fetching if there are more messages to fetch\r\n                if (page < paginated.meta.totalPages) fetchPage(page + 1);\r\n                else if (messages.length > 0 && messages[0]) {\r\n                    // Inform the server that we've read the last message\r\n                    chatSocket.readMessage(room.id, messages[0]._id, messages[0].createdAt.toJSON());\r\n                }\r\n                dispatch(fetchNewMessagesSuccess(room, messages as ChatRoomMessage[]));\r\n            } else dispatch(fetchNewMessagesFailure(room));\r\n        };\r\n\r\n        fetchPage(1);\r\n    } else {\r\n        dispatch(fetchNewMessagesFailure(room));\r\n    }\r\n};\r\n\r\nexport const fetchEarlierMessages = (room: ChatRoom): AppThunk => async (dispatch, getState) => {\r\n    const state = getState();\r\n    const {\r\n        socketState: {connected},\r\n    } = state.messaging;\r\n    const token = state.auth.token;\r\n    const pagination = room.messagePagination;\r\n\r\n    if (pagination.fetching || !pagination.canFetchMore) return;\r\n\r\n    if (connected) {\r\n        dispatch(fetchEarlierMessagesBegin(room));\r\n\r\n        // Fetch messages only before the date of the earliest message we have\r\n        const beforeDate =\r\n            room.messages.length > 0 ? room.messages[room.messages.length - 1].createdAt.toJSON() : undefined;\r\n\r\n        const response = await requestBackend(\r\n            `rooms/${room.id}/messages`,\r\n            \"GET\",\r\n            {page: 1, limit: MESSAGES_FETCH_LIMIT, beforeDate},\r\n            {},\r\n            token,\r\n        );\r\n\r\n        const convertDto = (dto: ResponseChatMessageDto): ChatRoomMessage | undefined => {\r\n            const user = room.users.find((u) => u._id === dto.senderId);\r\n            return user ? convertDtoToChatMessage(user, dto) : undefined;\r\n        };\r\n\r\n        if (response.status === HttpStatusCode.OK) {\r\n            const paginated = response as PaginatedRequestResponse;\r\n            const messages = (paginated.data as ResponseChatMessageDto[])\r\n                .map(convertDto)\r\n                .filter((m) => m !== undefined);\r\n            const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n            dispatch(fetchEarlierMessagesSuccess(room, messages as ChatRoomMessage[], canFetchMore));\r\n        } else dispatch(fetchEarlierMessagesFailure(room));\r\n    } else {\r\n        dispatch(fetchEarlierMessagesFailure(room));\r\n    }\r\n};\r\n\r\nexport const fetchMatchRoom = (roomId: string): AppThunk<Promise<ChatRoom | null>> => async (dispatch, getState) => {\r\n    const {token} = getState().auth;\r\n\r\n    const response = await requestBackend(`rooms/${roomId}`, \"GET\", {}, {}, token);\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        return convertDtoToRoom(payload as ResponseRoomDto);\r\n    } else return null;\r\n};\r\n","import {convertDtoToChatMessage} from \"../../api/converters\";\r\nimport {ChatRoom, ChatRoomMessage, ChatRoomUser} from \"../../model/chat-room\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {AUTH_ACTION_TYPES, LogInSuccessAction} from \"../auth/actions\";\r\nimport {CreateProfileSuccessAction, FetchUserSuccessAction, PROFILE_ACTION_TYPES} from \"../profile/actions\";\r\nimport {MessagingState, initialPaginatedState} from \"../types\";\r\nimport {\r\n    FetchEarlierMessagesBeginAction,\r\n    FetchEarlierMessagesFailureAction,\r\n    FetchEarlierMessagesSuccessAction,\r\n    FetchMatchRoomsSuccessAction,\r\n    FetchNewMessagesSuccessAction,\r\n    JoinChatRoomBeginAction,\r\n    MessagingAction,\r\n    MESSAGING_ACTION_TYPES,\r\n    ReadChatMessageAction,\r\n    ReceiveChatMessageAction,\r\n    ReceiveChatWritingAction,\r\n    SendMessageSuccessAction,\r\n} from \"./actions\";\r\n\r\nexport const initialState: MessagingState = {\r\n    matchRooms: {},\r\n    matchRoomsOrdered: [],\r\n    matchRoomsPagination: initialPaginatedState(),\r\n    socketState: {connected: false, connecting: false},\r\n    activeRoom: null,\r\n    localChatUser: null,\r\n    fetchingNewMessages: false,\r\n};\r\n\r\nfunction toLocalChatUser(profile: UserProfile): ChatRoomUser | null {\r\n    return {\r\n        _id: profile.id,\r\n        name: `${profile.firstName} ${profile.lastName}`,\r\n        avatar: profile.avatarUrl || \"\",\r\n        lastMessageSeenDate: null,\r\n        lastMessageSeenId: null,\r\n    };\r\n}\r\n\r\nexport const messagingReducer = (state: MessagingState = initialState, action: MessagingAction): MessagingState => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {user} = action as LogInSuccessAction;\r\n            return user.profile ? {...state, localChatUser: toLocalChatUser(user.profile)} : {...state};\r\n        }\r\n        case PROFILE_ACTION_TYPES.FETCH_USER_SUCCESS: {\r\n            const {user} = action as FetchUserSuccessAction;\r\n            return user.profile ? {...state, localChatUser: toLocalChatUser(user.profile)} : {...state};\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            const {profile} = action as CreateProfileSuccessAction;\r\n            return {...state, localChatUser: toLocalChatUser(profile)};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_BEGIN: {\r\n            return {...state, matchRoomsPagination: {...state.matchRoomsPagination, fetching: true}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_FAILURE: {\r\n            return {\r\n                ...state,\r\n                matchRoomsPagination: {...state.matchRoomsPagination, fetching: false, canFetchMore: false},\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_SUCCESS: {\r\n            const {rooms, canFetchMore} = <FetchMatchRoomsSuccessAction>action;\r\n            const pagination = state.matchRoomsPagination;\r\n            const matchRooms = {...state.matchRooms};\r\n            // Add entries in the rooms dictionary\r\n            rooms.forEach((r: ChatRoom) => {\r\n                if (matchRooms[r.id]) {\r\n                    matchRooms[r.id] = {...matchRooms[r.id], lastMessage: r.lastMessage, users: r.users};\r\n                } else {\r\n                    matchRooms[r.id] = r;\r\n                }\r\n            });\r\n            const ids = rooms.map((r: ChatRoom) => r.id);\r\n\r\n            return {\r\n                ...state,\r\n                matchRooms,\r\n                matchRoomsOrdered: pagination.page === 1 ? ids : state.matchRoomsOrdered.concat(ids),\r\n                matchRoomsPagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_REFRESH: {\r\n            return {\r\n                ...state,\r\n                // Reset the pagination\r\n                matchRoomsPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_BEGIN: {\r\n            return {...state, socketState: {connected: false, connecting: true}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_FAILURE: {\r\n            return {...state, socketState: {connected: false, connecting: false}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_SUCCESS: {\r\n            return {...state, socketState: {connected: true, connecting: false}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.DISCONNECT_FROM_CHAT: {\r\n            return {...state, socketState: {connected: false, connecting: false}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_BEGIN: {\r\n            const {room} = action as JoinChatRoomBeginAction;\r\n            return {...state, activeRoom: room};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_FAILURE: {\r\n            return {...state, activeRoom: null};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.LEAVE_ROOM: {\r\n            return {...state, activeRoom: null};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.SEND_MESSAGE_SUCCESS: {\r\n            const {message} = action as SendMessageSuccessAction;\r\n            if (state.activeRoom) {\r\n                return updateRoom(state, true, {\r\n                    ...state.activeRoom,\r\n                    messages: [message].concat(state.activeRoom.messages),\r\n                    lastMessage: message,\r\n                });\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.RECEIVE_MESSAGE: {\r\n            const {message} = action as ReceiveChatMessageAction;\r\n\r\n            let room = state.matchRooms[message.roomId];\r\n            if (room) {\r\n                room = {...room};\r\n                // Start by checking if this is an existing message (e.g. our own message)\r\n                const existingMessage = room.messages.find((m: ChatRoomMessage) => m._id === message.id);\r\n                if (existingMessage) {\r\n                    const msg = {...existingMessage, sent: true, text: message.text};\r\n\r\n                    // Update the message in the list\r\n                    room.messages = room.messages.map((m: ChatRoomMessage) => (m._id === message.id ? msg : m));\r\n\r\n                    // Also update the last message\r\n                    if (!room.lastMessage || msg.createdAt >= room.lastMessage.createdAt) room.lastMessage = msg;\r\n                } else {\r\n                    const user = room.users.find((u: ChatRoomUser) => u._id == message.senderId);\r\n                    if (user) {\r\n                        const msg = convertDtoToChatMessage(user, message);\r\n                        room.messages = [msg].concat(room.messages);\r\n                        room.lastMessage = msg;\r\n                        room.writing[message.senderId] = false;\r\n                    }\r\n                }\r\n                return updateRoom(state, true, room);\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.RECEIVE_WRITING_STATE: {\r\n            const payload = (action as ReceiveChatWritingAction).payload;\r\n            const {profileId, roomId} = payload;\r\n\r\n            // Just ignore if this is about our own writing state\r\n            if (state.localChatUser && state.localChatUser._id === profileId) return state;\r\n\r\n            const room = state.matchRooms[roomId];\r\n            if (room) {\r\n                return updateRoom(state, false, {\r\n                    ...room,\r\n                    writing: {...room.writing, [profileId]: payload.state},\r\n                });\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.READ_MESSAGE: {\r\n            const {roomId, date, messageId, profileId} = (action as ReadChatMessageAction).payload;\r\n\r\n            const room = state.matchRooms[roomId];\r\n            if (room) {\r\n                return updateRoom(state, false, {\r\n                    ...room,\r\n                    users: room.users.map((u: ChatRoomUser) =>\r\n                        u._id == profileId\r\n                            ? {...u, lastMessageSeenDate: new Date(date), lastMessageSeenId: messageId}\r\n                            : u,\r\n                    ),\r\n                });\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_BEGIN: {\r\n            const {room} = action as FetchEarlierMessagesBeginAction;\r\n            return updateRoom(state, false, {\r\n                ...room,\r\n                messagePagination: {...room.messagePagination, fetching: true},\r\n            });\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_FAILURE: {\r\n            const {room} = action as FetchEarlierMessagesFailureAction;\r\n            return updateRoom(state, false, {\r\n                ...room,\r\n                messagePagination: {...room.messagePagination, fetching: false, canFetchMore: false},\r\n            });\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_SUCCESS: {\r\n            const {room, messages, canFetchMore} = action as FetchEarlierMessagesSuccessAction;\r\n            const pagination = room.messagePagination;\r\n            return updateRoom(state, false, {\r\n                ...room,\r\n                messages: room.messages.concat(messages),\r\n                messagePagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            });\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_NEW_MESSAGES_BEGIN: {\r\n            return {\r\n                ...state,\r\n                fetchingNewMessages: true,\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_NEW_MESSAGES_FAILURE: {\r\n            return {\r\n                ...state,\r\n                fetchingNewMessages: false,\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_NEW_MESSAGES_SUCCESS: {\r\n            const {room, messages} = action as FetchNewMessagesSuccessAction;\r\n            const filteredMessages = messages.filter((ma) => !room.messages.some((mb) => mb._id === ma._id));\r\n            const users = room.users.concat(); // copy\r\n\r\n            // Update the last message seen for the user who sent it\r\n            if (filteredMessages.length > 0) {\r\n                const lastMessage = filteredMessages[0];\r\n                const i = users.findIndex((u) => u._id === lastMessage.user._id);\r\n                users[i] = {\r\n                    ...users[i],\r\n                    lastMessageSeenId: lastMessage._id,\r\n                    lastMessageSeenDate: lastMessage.createdAt,\r\n                };\r\n            }\r\n\r\n            return updateRoom({...state, fetchingNewMessages: false}, false, {\r\n                ...room,\r\n                messages: filteredMessages.concat(room.messages),\r\n                users,\r\n                ...(filteredMessages.length > 0 ? {lastMessage: filteredMessages[0]} : {}),\r\n            });\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {\r\n                ...state,\r\n                activeRoom: null,\r\n                matchRooms: {},\r\n                matchRoomsOrdered: [],\r\n                matchRoomsPagination: initialPaginatedState(),\r\n                localChatUser: null,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nfunction updateRoom(state: MessagingState, setAsFirst: boolean, room: ChatRoom): MessagingState {\r\n    const activeRoom = state.activeRoom && state.activeRoom.id == room.id ? room : state.activeRoom;\r\n\r\n    if (setAsFirst) {\r\n        const otherRooms = state.matchRoomsOrdered.filter((id: string) => id !== room.id);\r\n        return {\r\n            ...state,\r\n            matchRooms: {...state.matchRooms, [room.id]: room},\r\n            matchRoomsOrdered: [room.id].concat(otherRooms),\r\n            activeRoom,\r\n        };\r\n    } else {\r\n        return {\r\n            ...state,\r\n            matchRooms: {...state.matchRooms, [room.id]: room},\r\n            activeRoom,\r\n        };\r\n    }\r\n}\r\n","import {NotificationsState} from \"../types\";\r\nimport {NotificationsAction} from \"./actions\";\r\n\r\nexport const initialState: NotificationsState = {};\r\n\r\nexport const notificationsReducer = (\r\n    state: NotificationsState = initialState,\r\n    action: NotificationsAction,\r\n): NotificationsState => {\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {ReportsState} from \"../types\";\r\nimport {ReportAction} from \"./actions\";\r\n\r\nexport const initialState: ReportsState = {};\r\n\r\nexport const reportsReducer = (state: ReportsState = initialState, action: ReportAction): ReportsState => {\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {GroupsState, initialPaginatedState} from \"../types\";\r\nimport {GroupsAction} from \"./actions\";\r\n\r\nexport const initialState: GroupsState = {\r\n    pagination: initialPaginatedState(),\r\n};\r\n\r\nexport const groupsReducer = (state: GroupsState = initialState, action: GroupsAction): GroupsState => {\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import * as React from \"react\";\r\nimport {NavigationContainerRef} from \"@react-navigation/native\";\r\nimport {NavigatorRoute} from \"./types\";\r\nimport {Platform} from \"react-native\";\r\nimport {APP_SCHEME, WEB_TO_APP_TIMEOUT} from \"../constants/config\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Store a ref to the root navigator\r\nexport const rootNavigationRef = React.createRef<NavigationContainerRef>();\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\ntype RouteParams = Record<string, string | object | undefined | null>;\r\n\r\nexport function rootNavigate(route: NavigatorRoute, params?: RouteParams): void {\r\n    rootNavigationRef.current?.navigate(route as string, params);\r\n}\r\n\r\nexport function navigateBack(fallback?: NavigatorRoute): void {\r\n    const nav = rootNavigationRef.current;\r\n    if (nav) {\r\n        if (nav.canGoBack()) nav.goBack();\r\n        else if (fallback) nav.navigate(fallback);\r\n    }\r\n}\r\n\r\nexport function attemptRedirectToApp(routeName: string, fallbackRoute: NavigatorRoute): void {\r\n    const fallback = () => rootNavigate(fallbackRoute);\r\n\r\n    if (Platform.OS === \"web\") {\r\n        const link = `${APP_SCHEME}://${routeName}`;\r\n        window.location.replace(link);\r\n\r\n        // TODO look at Linking.openURL and Linking.canOpenURL\r\n        setTimeout(() => {\r\n            console.log(\r\n                `Failed to redirect to ${link} (perhaps app is not installed on this device) - Staying on web version`,\r\n            );\r\n            fallback();\r\n        }, WEB_TO_APP_TIMEOUT);\r\n    } else fallback();\r\n}\r\n\r\nexport function unauthorizedRedirect(): void {\r\n    rootNavigate(\"LoginRoot\", {screen: \"WelcomeScreen\"});\r\n}\r\n\r\nexport function screenTitle(route: NavigatorRoute): string {\r\n    return i18n.t(`screenTitles.${route}`) + i18n.t(\"screenTitles.suffix\");\r\n}\r\n\r\nexport function headerTitle(route: NavigatorRoute): string {\r\n    return i18n.t(`screenTitles.${route}`);\r\n}\r\n\r\nexport function openChat(roomId: string): void {\r\n    rootNavigate(\"TabMessaging\", {screen: \"ChatScreen\", params: {roomId}});\r\n}\r\n","import {OnboardingScreens} from \"../../navigation/types\";\r\n\r\nexport const ONBOARDING_ORDER: (keyof OnboardingScreens)[] = [\r\n    \"OnboardingProfileScreen2\",\r\n    \"OnboardingRoleScreen\",\r\n    \"OnboardingRoleSpecificScreen\",\r\n    \"OnboardingLegalScreen1\",\r\n    \"OnboardingLegalScreen2\",\r\n    \"OnboardingLegalScreen3\",\r\n    \"OnboardingNameScreen\",\r\n    \"OnboardingProfileScreen1\",\r\n    //\"OnboardingProfileScreen2\",\r\n    // \"OnboardingRoleScreen\",\r\n    //\"OnboardingRoleSpecificScreen\",\r\n    \"OnboardingOffersScreen1\",\r\n    \"OnboardingOffersScreen2\",\r\n    \"OnboardingOffersScreen3\",\r\n];\r\n","import {Platform} from \"react-native\";\r\nimport {AnyAction, Middleware, Dispatch} from \"redux\";\r\nimport {COOKIE_CONSENT_DURATION} from \"../constants/config\";\r\nimport {clearStaticData, storeStaticData} from \"./persistent-storage/static\";\r\nimport {\r\n    LoadProfileInterestsSuccessAction,\r\n    LoadProfileOffersSuccessAction,\r\n    PROFILE_ACTION_TYPES,\r\n} from \"./profile/actions\";\r\nimport {SaveCookiesPreferencesAction, SetLocaleAction, SetThemeAction, SETTINGS_ACTION_TYPES} from \"./settings/actions\";\r\nimport {AppState} from \"./types\";\r\n\r\nexport const staticStorageMiddleware: Middleware<unknown, AppState> = (store) => (next: Dispatch<AnyAction>) => (\r\n    action: AnyAction,\r\n) => {\r\n    // Handle cookie preferences changes\r\n    switch (action.type) {\r\n        case SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES: {\r\n            const oldCookies = store.getState().settings.userSettings.cookies;\r\n            const cookies = (action as SaveCookiesPreferencesAction).preferences;\r\n\r\n            // Store data for cookies that were accepted by the user\r\n            if (!oldCookies.cache && cookies.cache) {\r\n                const {offers, interests} = store.getState().profile;\r\n                storeStaticData(\"interests\", interests, cookies.cache);\r\n                storeStaticData(\"offers\", offers, cookies.cache);\r\n            }\r\n            if (!oldCookies.settings && cookies.settings) {\r\n                const {locale, theme} = store.getState().settings.userSettings;\r\n                storeStaticData(\"locale\", locale, cookies.settings);\r\n                storeStaticData(\"theme\", theme, cookies.settings);\r\n            }\r\n\r\n            // Discard cookies that were refused by the user\r\n            if (oldCookies.cache && !cookies.cache) clearStaticData(\"interests\", \"offers\");\r\n            if (oldCookies.settings && !cookies.settings) clearStaticData(\"locale\", \"theme\");\r\n\r\n            // Store new cookies preferences\r\n            storeStaticData(\"cookies\", cookies, true);\r\n            storeStaticData(\"cookieConsentDate\", new Date(Date.now()).toJSON(), true);\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n    const {cookies, cookieConsentDate} = store.getState().settings.userSettings;\r\n\r\n    // Handle storage that requires cookie consent from the user\r\n    if (hasUserGivenCookieConsent(cookieConsentDate)) {\r\n        switch (action.type) {\r\n            case PROFILE_ACTION_TYPES.LOAD_PROFILE_INTERESTS_SUCCESS: {\r\n                const {interests, fromCache} = action as LoadProfileInterestsSuccessAction;\r\n                if (!fromCache) storeStaticData(\"interests\", interests, cookies.cache);\r\n                break;\r\n            }\r\n            case PROFILE_ACTION_TYPES.LOAD_PROFILE_OFFERS_SUCCESS: {\r\n                const {offers, fromCache} = action as LoadProfileOffersSuccessAction;\r\n                if (!fromCache) storeStaticData(\"offers\", offers, cookies.cache);\r\n                break;\r\n            }\r\n            case SETTINGS_ACTION_TYPES.SET_LOCALE: {\r\n                const {locale, fromCache} = action as SetLocaleAction;\r\n                if (!fromCache) storeStaticData(\"locale\", locale, cookies.settings);\r\n                break;\r\n            }\r\n            case SETTINGS_ACTION_TYPES.SET_THEME: {\r\n                const {theme, fromCache} = action as SetThemeAction;\r\n                if (!fromCache) storeStaticData(\"theme\", theme, cookies.settings);\r\n                break;\r\n            }\r\n            case SETTINGS_ACTION_TYPES.TOGGLE_THEME: {\r\n                const {theme} = store.getState().settings.userSettings;\r\n                storeStaticData(\"theme\", theme === \"dark\" ? \"light\" : \"dark\", cookies.settings);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport function hasUserGivenCookieConsent(consentDate: Date | null): boolean {\r\n    // Never ask the user in the native version of the app\r\n    if (Platform.OS !== \"web\") return true;\r\n    return consentDate !== null && (Date.now() - consentDate.getTime()) / 1000 < COOKIE_CONSENT_DURATION;\r\n}\r\n","import {AnyAction, Middleware, Dispatch} from \"redux\";\r\nimport {AppState} from \"./types\";\r\nimport {AUTH_ACTION_TYPES, LogInSuccessAction} from \"./auth/actions\";\r\nimport {discardAuthInformation, storeAuthInformation} from \"./persistent-storage/auth\";\r\nimport {SaveCookiesPreferencesAction, SETTINGS_ACTION_TYPES} from \"./settings/actions\";\r\nimport {hasUserGivenCookieConsent} from \"./static-storage-middleware\";\r\n\r\nexport const authStorageMiddleware: Middleware<unknown, AppState> = (store) => (next: Dispatch<AnyAction>) => (\r\n    action: AnyAction,\r\n) => {\r\n    switch (action.type) {\r\n        // Handle cookie preferences changes\r\n        case SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES: {\r\n            const cookies = (action as SaveCookiesPreferencesAction).preferences;\r\n            if (cookies.auth) {\r\n                // Store again when accepting the auth cookie\r\n                const token = store.getState().auth.token;\r\n                const user = store.getState().profile.user;\r\n                if (token && user) storeAuthInformation(user.email, token);\r\n            } else {\r\n                // Discard when refusing the auth cookie\r\n                discardAuthInformation();\r\n            }\r\n            break;\r\n        }\r\n        // Discard when needed\r\n        case AUTH_ACTION_TYPES.LOG_OUT:\r\n        case AUTH_ACTION_TYPES.LOG_IN_FAILURE: {\r\n            discardAuthInformation();\r\n            break;\r\n        }\r\n    }\r\n\r\n    const {cookies, cookieConsentDate} = store.getState().settings.userSettings;\r\n\r\n    if (hasUserGivenCookieConsent(cookieConsentDate)) {\r\n        switch (action.type) {\r\n            case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n                const {token, user, usingCachedCredentials} = action as LogInSuccessAction;\r\n                // Store the authentication info only if we didn't use it already to login (in that case it is already stored)\r\n                if (!usingCachedCredentials && cookies.auth) storeAuthInformation(user.email, token);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n","import {requestBackend} from \"../../api/utils\";\r\nimport {AppThunk} from \"../types\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\n\r\nexport enum NOTIFICATIONS_ACTION_TYPES {\r\n    REGISTER_TOKEN_SUCCESS = \"NOTIFICATIONS/REGISTER_TOKEN_SUCCESS\",\r\n    DELETE_TOKEN_SUCCESS = \"NOTIFICATIONS/DELETE_TOKEN_SUCCESS\",\r\n}\r\n\r\nexport type RegisterNotificationSuccessAction = {\r\n    type: string;\r\n};\r\n\r\nexport type DeleteNotificationTokenSuccessAction = {\r\n    type: string;\r\n};\r\n\r\nexport type NotificationsAction = RegisterNotificationSuccessAction & DeleteNotificationTokenSuccessAction;\r\n\r\nexport const registerNotificationToken = (pushToken: string): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"notifications/token\", \"POST\", {}, {token: pushToken}, token, true);\r\n    if (response.status === HttpStatusCode.NO_CONTENT) {\r\n        dispatch(registerNotificationTokenSuccess());\r\n    }\r\n};\r\n\r\nconst registerNotificationTokenSuccess = (): RegisterNotificationSuccessAction => ({\r\n    type: NOTIFICATIONS_ACTION_TYPES.REGISTER_TOKEN_SUCCESS,\r\n});\r\n\r\nexport const deleteNotificationToken = (): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"notifications/token\", \"DELETE\", {}, {}, token, true);\r\n    if (response.status === HttpStatusCode.NO_CONTENT) {\r\n        dispatch(deleteNotificationTokenSuccess());\r\n    }\r\n};\r\n\r\nconst deleteNotificationTokenSuccess = (): DeleteNotificationTokenSuccessAction => ({\r\n    type: NOTIFICATIONS_ACTION_TYPES.DELETE_TOKEN_SUCCESS,\r\n});\r\n","import * as Notifications from \"expo-notifications\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport Constants from \"expo-constants\";\r\nimport {Platform} from \"react-native\";\r\n\r\nexport function areNotificationsSupported(): boolean {\r\n    return Constants.isDevice && Platform.OS !== \"web\";\r\n}\r\n\r\nexport function getNotificationData(notif: Notifications.Notification): {[key: string]: unknown} {\r\n    return notif.request.content.data;\r\n}\r\n\r\nexport async function askForPushNotificationToken(): Promise<string | null> {\r\n    if (!areNotificationsSupported()) return null;\r\n\r\n    let status = (await Permissions.getAsync(Permissions.NOTIFICATIONS)).status;\r\n    if (status !== \"granted\") status = (await Permissions.askAsync(Permissions.NOTIFICATIONS)).status;\r\n\r\n    if (status === \"granted\") {\r\n        const token = (await Notifications.getExpoPushTokenAsync()).data;\r\n        return token;\r\n    } else {\r\n        // User refused notifications\r\n        return null;\r\n    }\r\n}\r\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport {authReducer} from \"./auth/reducer\";\r\nimport {settingsReducer} from \"./settings/reducer\";\r\nimport {profileReducer} from \"./profile/reducer\";\r\nimport {matchingReducer} from \"./matching/reducer\";\r\nimport {messagingReducer} from \"./messaging/reducer\";\r\nimport {notificationsReducer} from \"./notifications/reducer\";\r\nimport {reportsReducer} from \"./reports/reducer\";\r\nimport {groupsReducer} from \"./groups/reducer\";\r\nimport thunk from \"redux-thunk\";\r\nimport {navigationMiddleware} from \"./navigation-middleware\";\r\nimport {authStorageMiddleware} from \"./auth-storage-middleware\";\r\nimport {staticStorageMiddleware} from \"./static-storage-middleware\";\r\nimport {notificationsMiddleware} from \"./notifications-middleware\";\r\nimport {messagingMiddleware} from \"./messaging-middleware\";\r\n\r\nconst rootReducer = combineReducers({\r\n    auth: authReducer,\r\n    settings: settingsReducer,\r\n    profile: profileReducer,\r\n    matching: matchingReducer,\r\n    messaging: messagingReducer,\r\n    notifications: notificationsReducer,\r\n    reports: reportsReducer,\r\n    groups: groupsReducer,\r\n});\r\n\r\nconst combinedMiddleware = applyMiddleware(\r\n    thunk,\r\n    authStorageMiddleware,\r\n    staticStorageMiddleware,\r\n    navigationMiddleware,\r\n    notificationsMiddleware,\r\n    messagingMiddleware,\r\n);\r\n\r\nexport default createStore(rootReducer, combinedMiddleware);\r\n","import {AnyAction, Middleware, Dispatch, MiddlewareAPI} from \"redux\";\r\nimport {DEBUG_MODE} from \"../constants/config\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {ONBOARDING_ORDER} from \"../screens/onboarding\";\r\nimport {AUTH_ACTION_TYPES, beginOnboarding, LogInSuccessAction, LogOutAction} from \"./auth/actions\";\r\nimport {ActionCancelSuccessAction, MATCHING_ACTION_TYPES} from \"./matching/actions\";\r\nimport {PROFILE_ACTION_TYPES} from \"./profile/actions\";\r\nimport {AppState} from \"./types\";\r\n\r\nexport const navigationMiddleware: Middleware<unknown, AppState> = (store: MiddlewareAPI<Dispatch, AppState>) => (\r\n    next: Dispatch<AnyAction>,\r\n) => (action: AnyAction) => {\r\n    if (DEBUG_MODE) console.log(action.type);\r\n\r\n    next(action);\r\n\r\n    switch (action.type) {\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            rootNavigate(\"OnboardingSuccessfulScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {user} = action as LogInSuccessAction;\r\n            if (user.onboarded) rootNavigate(\"MainScreen\");\r\n            else store.dispatch(beginOnboarding());\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            const {redirect} = action as LogOutAction;\r\n            if (redirect) {\r\n                rootNavigate(\"LoginRoot\", {\r\n                    screen: \"LoginScreens\",\r\n                    params: {screen: \"SigninScreen\"},\r\n                });\r\n            }\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.REGISTER_SUCCESS: {\r\n            rootNavigate(\"ValidationEmailSentScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_SUCCESS: {\r\n            // Let the user click\r\n            // attemptRedirectToApp(\"login\", \"SigninScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.BEGIN_ONBOARDING: {\r\n            rootNavigate(\"OnboardingScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.PREVIOUS_ONBOARDING_SLIDE: {\r\n            rootNavigate(ONBOARDING_ORDER[store.getState().auth.onboardingIndex]);\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.NEXT_ONBOARDING_SLIDE: {\r\n            rootNavigate(ONBOARDING_ORDER[store.getState().auth.onboardingIndex]);\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.FORGOT_PASSWORD_SUCCESS: {\r\n            rootNavigate(\"ForgotPasswordEmailSentScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.RESET_PASSWORD_SUCCESS: {\r\n            rootNavigate(\"ResetPasswordSuccessScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.DELETE_ACCOUNT_SUCCESS: {\r\n            rootNavigate(\"DeleteAccountSuccessScreen\");\r\n            break;\r\n        }\r\n        case MATCHING_ACTION_TYPES.ACTION_CANCEL_SUCCESS: {\r\n            const {isMatch} = action as ActionCancelSuccessAction;\r\n            // When un-matching someone, navigate back from their profile to MainScreen\r\n            if (isMatch) rootNavigate(\"MainScreen\", {screen: \"TabMatching\"});\r\n            break;\r\n        }\r\n    }\r\n};\r\n","import {AnyAction, Middleware, Dispatch, MiddlewareAPI} from \"redux\";\r\nimport {AppState, MyThunkDispatch} from \"./types\";\r\nimport {AUTH_ACTION_TYPES} from \"./auth/actions\";\r\nimport {askForPushNotificationToken} from \"../notifications-utils\";\r\nimport {deleteNotificationToken, registerNotificationToken} from \"./notifications/actions\";\r\n\r\nexport const notificationsMiddleware: Middleware<unknown, AppState> = (store: MiddlewareAPI<Dispatch, AppState>) => (\r\n    next: Dispatch<AnyAction>,\r\n) => (action: AnyAction) => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            // Register push notifications\r\n            askForPushNotificationToken().then((pushToken: string | null) => {\r\n                // The token will be null if the device does not support push notifications,\r\n                // or we did not get permission from the user.\r\n                if (pushToken !== null) (store.dispatch as MyThunkDispatch)(registerNotificationToken(pushToken));\r\n            });\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            // Discard the token\r\n            (store.dispatch as MyThunkDispatch)(deleteNotificationToken());\r\n            break;\r\n        }\r\n    }\r\n    next(action);\r\n};\r\n","import {AnyAction, Middleware, Dispatch, MiddlewareAPI} from \"redux\";\r\nimport {AppState, MyThunkDispatch} from \"./types\";\r\nimport {AUTH_ACTION_TYPES} from \"./auth/actions\";\r\nimport {fetchMatchRooms} from \"./messaging/actions\";\r\n\r\nexport const messagingMiddleware: Middleware<unknown, AppState> = (store: MiddlewareAPI<Dispatch, AppState>) => (\r\n    next: Dispatch<AnyAction>,\r\n) => (action: AnyAction) => {\r\n    next(action);\r\n\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            (store.dispatch as MyThunkDispatch)(fetchMatchRooms());\r\n            break;\r\n        }\r\n    }\r\n};\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as Font from \"expo-font\";\r\nimport * as SplashScreen from \"expo-splash-screen\";\r\nimport * as React from \"react\";\r\nimport {APP_VERSION} from \"../constants/config\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport {User} from \"../model/user\";\r\nimport {CookiesPreferences} from \"../model/user-settings\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {attemptLoginFromCache} from \"../state/auth/actions\";\r\nimport {readCachedStaticData, storeStaticData} from \"../state/persistent-storage/static\";\r\nimport {loadProfileInterests, loadProfileOffers} from \"../state/profile/actions\";\r\nimport {loadCookiesPreferences, loadVersionInfo, setLocale, setTheme} from \"../state/settings/actions\";\r\nimport store from \"../state/store\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {ThemeKey} from \"../types\";\r\n\r\nlet loggedInFromCache: User | undefined = undefined;\r\n\r\nexport default function useCachedResources(): {isLoadingComplete: boolean; initialRoute?: keyof RootNavigatorScreens} {\r\n    const [isLoadingComplete, setLoadingComplete] = React.useState(false);\r\n\r\n    // Load any resources or data that we need prior to rendering the app\r\n    React.useEffect(() => {\r\n        async function loadResourcesAndDataAsync() {\r\n            try {\r\n                SplashScreen.preventAutoHideAsync();\r\n\r\n                const dispatch = store.dispatch as MyThunkDispatch;\r\n\r\n                // TODO Improve data loading\r\n                //  - show something if the backend couldn't be reached\r\n\r\n                // Load static data\r\n                await dispatch(loadProfileOffers());\r\n                await dispatch(loadProfileInterests());\r\n\r\n                // Load fonts\r\n                await Font.loadAsync({\r\n                    ...FontAwesome.font,\r\n                    Raleway: require(\"@assets/fonts/Raleway-Regular.ttf\"),\r\n                    RalewayThin: require(\"@assets/fonts/Raleway-Thin.ttf\"),\r\n                    RalewayLight: require(\"@assets/fonts/Raleway-Light.ttf\"),\r\n                    RalewaySemiBold: require(\"@assets/fonts/Raleway-SemiBold.ttf\"),\r\n                    RalewayBold: require(\"@assets/fonts/Raleway-Bold.ttf\"),\r\n                    \"ComicSansMS-Bold\": require(\"@assets/fonts/ComicBold.ttf\"),\r\n                    //ComicSansMS: require(\"@assets/fonts/ComicSansMS-Bold.ttf\"),\r\n                });\r\n\r\n                // Read cookie consent information from persistent storage\r\n                readCachedStaticData(\"cookieConsentDate\").then((consentDate) => {\r\n                    readCachedStaticData(\"cookies\").then((cookies) => {\r\n                        if (consentDate && cookies) {\r\n                            const date = new Date(consentDate.data as string);\r\n                            store.dispatch(loadCookiesPreferences(cookies.data as CookiesPreferences, date));\r\n                        } else {\r\n                            // On mobile, storage is turned on by default on the first visit\r\n                            store.dispatch(\r\n                                loadCookiesPreferences({auth: true, cache: true, settings: true}, new Date()),\r\n                            );\r\n                        }\r\n                    });\r\n                });\r\n\r\n                // Read previous version of the app, so we know if we are launching the app after an update\r\n                readCachedStaticData(\"version\").then((version) => {\r\n                    store.dispatch(loadVersionInfo(version ? (version.data as string) : null));\r\n                    storeStaticData(\"version\", APP_VERSION, true);\r\n                });\r\n\r\n                // Attempt to read the settings from persistent storage\r\n                readCachedStaticData(\"theme\").then((theme) => {\r\n                    if (theme) store.dispatch(setTheme(theme.data as ThemeKey, true));\r\n                });\r\n                readCachedStaticData(\"locale\").then((locale) => {\r\n                    if (locale) store.dispatch(setLocale(locale.data as SupportedLocale, true));\r\n                    else store.dispatch(setLocale(\"en\" as SupportedLocale, true));\r\n                });\r\n\r\n                // Attempt to authenticate using cached data\r\n                loggedInFromCache = await dispatch(attemptLoginFromCache());\r\n            } catch (e) {\r\n                // We might want to provide this error information to an error reporting service\r\n                console.warn(e);\r\n            } finally {\r\n                setLoadingComplete(true);\r\n                SplashScreen.hideAsync();\r\n            }\r\n        }\r\n\r\n        loadResourcesAndDataAsync();\r\n    }, []);\r\n\r\n    let initialRoute: undefined | keyof RootNavigatorScreens = undefined;\r\n    if (loggedInFromCache) initialRoute = loggedInFromCache.onboarded ? \"MainScreen\" : \"OnboardingScreen\";\r\n\r\n    return {isLoadingComplete, initialRoute};\r\n}\r\n","import {Dimensions} from \"react-native\";\r\n\r\nconst width = Dimensions.get(\"window\").width;\r\nconst height = Dimensions.get(\"window\").height;\r\n\r\nexport default {\r\n    window: {\r\n        width,\r\n        height,\r\n    },\r\n    isSmallDevice: width < 375,\r\n    isWideDevice: width / (height + 1) > 0.85,\r\n};\r\n","import {ThemeKey} from \"../types\";\r\n\r\nconst lightThemeText = \"#000\";\r\nconst darkThemeText = \"#fff\";\r\n\r\nexport default {\r\n    light: {\r\n        id: \"light\" as ThemeKey,\r\n        text: lightThemeText,\r\n        textWhite: darkThemeText,\r\n        textBlack: lightThemeText,\r\n        textLight: \"#666\",\r\n        textInverted: \"#fff\",\r\n        background: \"#fff\",\r\n        cardBackground: \"#f7f7f7\", //\"#f7f7f7\",\r\n        accent: \"#003da5\",\r\n        accentSlight: \"#ccd8ea\",\r\n        accentSecondary: \"#009ace\",\r\n        accentTernary: \"#fbe122\",\r\n        error: \"rgba(255,59,48,1)\",\r\n        actionNeutral: \"#555555\",\r\n        okay: \"#00b16a\",\r\n        warn: \"#eecc00\",\r\n        componentBorder: \"#bbb\",\r\n        buttonGroupBorder: \"#dfdfdf\",\r\n        greenModalBackground: \"rgb(60, 175, 130)\",\r\n        chatBubble: \"#ededed\",\r\n        inputPlaceholder: \"#999\",\r\n        onboardingInputBackground: \"#F2F2F7\",\r\n        onboardingInputFocusedBackground: \"#E0E8F4\",\r\n    },\r\n    dark: {\r\n        id: \"dark\" as ThemeKey,\r\n        text: darkThemeText,\r\n        textWhite: darkThemeText,\r\n        textBlack: lightThemeText,\r\n        textLight: \"#ccc\",\r\n        textInverted: \"#111\",\r\n        background: \"rgba(0,0,0,1)\",\r\n        cardBackground: \"rgba(28,28,30,1)\",\r\n        accent: \"#003da5\",\r\n        accentSlight: \"#ccd8ea\",\r\n        accentSecondary: \"#003da5\",\r\n        accentTernary: \"#fbe122\",\r\n        error: \"rgba(255,69,58,1)\",\r\n        actionNeutral: \"#777\",\r\n        okay: \"#00b16a\",\r\n        warn: \"#eecc00\",\r\n        componentBorder: \"#555\",\r\n        buttonGroupBorder: \"#1f1f1f\",\r\n        greenModalBackground: \"rgb(60, 175, 130)\",\r\n        chatBubble: \"#333\",\r\n        inputPlaceholder: \"#bbb\",\r\n        onboardingInputBackground: \"#F2F2F7\",\r\n        onboardingInputFocusedBackground: \"#E0E8F4\",\r\n    },\r\n};\r\n","import {ImageStyle, TextStyle, ViewStyle} from \"react-native\";\r\nimport layout from \"../constants/layout\";\r\nimport themes from \"../constants/themes\";\r\nimport {Theme} from \"../types\";\r\n\r\ntype NamedStyles<T> = {[P in keyof T]: ViewStyle | TextStyle | ImageStyle};\r\ntype ThemedStyles<T extends NamedStyles<T>> = (theme: Theme) => T;\r\ntype ThemedStylesInternal<T extends NamedStyles<T>> = (theme: Theme, wideDevice: boolean) => T;\r\n\r\n/** Tool to pre-generate stylesheet variations for each theme.  */\r\nexport function preTheme<T extends NamedStyles<T>>(generator: ThemedStylesInternal<T>): ThemedStyles<T> {\r\n    // Pre-generate the styles in a key:value map\r\n    const styles: {[key: string]: T} = {};\r\n    const wideDevice = layout.isWideDevice;\r\n    Object.values(themes).forEach((theme: Theme) => (styles[theme.id] = generator(theme, wideDevice)));\r\n    // Wrap the map as a function\r\n    return (theme: Theme) => styles[theme.id];\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleProp, StyleSheet, View, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\ntype ScreenWrapperProps = ThemeProps & {\r\n    forceFullWidth?: boolean;\r\n    wrapperStyle?: StyleProp<ViewStyle>;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n};\r\n\r\nclass ScreenWrapper extends React.Component<ScreenWrapperProps> {\r\n    render(): JSX.Element {\r\n        const {theme, forceFullWidth, wrapperStyle, containerStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={[styles.wrapper, wrapperStyle]}>\r\n                <View style={[styles.container, forceFullWidth ? {maxWidth: undefined} : {}, containerStyle]}>\r\n                    {this.props.children}\r\n                </View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            flexDirection: \"row\",\r\n            overflow: \"hidden\",\r\n        },\r\n        container: {\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            maxWidth: 1000,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ScreenWrapper);\r\n","import {Platform, TextStyle} from \"react-native\";\r\n\r\nexport const styleTextThin: TextStyle =\r\n    Platform.OS == \"android\" ? {fontFamily: \"sans-serif-thin\"} : {fontWeight: \"100\"};\r\n\r\nexport const styleTextLight: TextStyle =\r\n    Platform.OS == \"android\" ? {fontFamily: \"sans-serif-light\"} : {fontWeight: \"200\"};\r\n\r\nexport const webFontFamily =\r\n    Platform.OS == \"web\" ? {fontFamily: `\"Segoe UI\", Roboto, \"Helvetica Neue\", sans-serif`} : {};\r\n\r\nexport const BLUR_HEADER_INTENSITY = Platform.OS === \"ios\" ? 100 : 320;\r\nexport const BLUR_TAB_INTENSITY = Platform.OS === \"ios\" ? 100 : 320;\r\nexport const BLUR_MODAL_INTENSITY = Platform.OS === \"ios\" ? 90 : 80;\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, TouchableOpacity, View} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport {styleTextLight} from \"../styles/general\";\r\nimport store from \"../state/store\";\r\n\r\nexport type NotFoundScreenProps = StackScreenProps<RootNavigatorScreens, \"NotFoundScreen\"> & ThemeProps;\r\n\r\nclass NotFoundScreen extends React.Component<NotFoundScreenProps> {\r\n    render(): JSX.Element {\r\n        const {navigation, theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.title}>{i18n.t(\"notFoundScreen.title\")}</Text>\r\n                    <Text style={styles.subtitle}>{i18n.t(\"notFoundScreen.subtitle\")}</Text>\r\n                    <TouchableOpacity\r\n                        onPress={() => {\r\n                            const {authenticated, onboarded} = store.getState().auth;\r\n                            if (authenticated) {\r\n                                if (onboarded) navigation.replace(\"MainScreen\");\r\n                                else navigation.replace(\"OnboardingScreen\");\r\n                            } else navigation.replace(\"LoginRoot\");\r\n                        }}\r\n                        style={styles.link}\r\n                    >\r\n                        <Text style={styles.linkText}>{i18n.t(\"notFoundScreen.redirect\")}</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            padding: 20,\r\n        },\r\n        title: {\r\n            fontSize: 48,\r\n            ...styleTextLight,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        subtitle: {\r\n            fontSize: 20,\r\n            marginTop: 50,\r\n            color: theme.text,\r\n        },\r\n        link: {\r\n            paddingVertical: 10,\r\n        },\r\n        linkText: {\r\n            fontSize: 16,\r\n            color: \"#2e78b7\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(NotFoundScreen);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet, ActivityIndicator} from \"react-native\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {requestValidateAccount} from \"../state/auth/actions\";\r\nimport {attemptRedirectToApp} from \"../navigation/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {DEBUG_MODE, Environment, ENVIRONMENT} from \"../constants/config\";\r\nimport store from \"../state/store\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    validated: state.auth.validated,\r\n}));\r\n\r\ntype ValidateEmailScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass ValidateEmailScreen extends React.Component<ValidateEmailScreenProps> {\r\n    componentDidMount() {\r\n        const dispatch = this.props.dispatch as MyThunkDispatch;\r\n\r\n        // In DEBUG_MODE / staging environment, attempt to use a verification token sent by the server\r\n        const verificationToken = store.getState().auth.verificationToken;\r\n        if (DEBUG_MODE && ENVIRONMENT == Environment.Staging && verificationToken) {\r\n            dispatch(requestValidateAccount(verificationToken));\r\n        } else if (this.props.route.params) {\r\n            // Attempt to extract a validation token out of the URL\r\n            const params = this.props.route.params as {[key: string]: string};\r\n            const {token} = params;\r\n            if (token) dispatch(requestValidateAccount(token));\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, validated} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    {!validated && (\r\n                        <>\r\n                            <Text style={styles.title}>{i18n.t(\"emailValidation.validating\")}</Text>\r\n                            <ActivityIndicator size=\"large\" color={theme.accentSecondary} />\r\n                        </>\r\n                    )}\r\n                    {validated && (\r\n                        <>\r\n                            <Text style={styles.successText}>\r\n                                {i18n.t(\"emailValidation.success\")[0]}\r\n                                <Text\r\n                                    onPress={() => attemptRedirectToApp(\"login\", \"SigninScreen\")}\r\n                                    style={{color: theme.accent}}\r\n                                >\r\n                                    {i18n.t(\"emailValidation.success\")[1]}\r\n                                </Text>\r\n                            </Text>\r\n                        </>\r\n                    )}\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"75%\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        title: {\r\n            fontSize: 20,\r\n            marginVertical: 20,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        successText: {\r\n            fontSize: 18,\r\n            lineHeight: 40,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ValidateEmailScreen));\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport {AppState} from \"../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport {DEBUG_MODE} from \"../constants/config\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\n// Map props from state\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    registerEmail: state.auth.registerEmail,\r\n}));\r\n\r\ntype ValidationEmailSentScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps;\r\n\r\nclass ValidationEmailSentScreen extends React.Component<ValidationEmailSentScreenProps> {\r\n    render(): JSX.Element {\r\n        const {registerEmail, theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <FontAwesome name=\"envelope-o\" style={styles.mailIcon}></FontAwesome>\r\n                    <Text style={styles.description}>\r\n                        To validate your account, click the link in the email we just sent to\r\n                    </Text>\r\n                    <Text style={styles.email}>{registerEmail}</Text>\r\n\r\n                    {DEBUG_MODE && (\r\n                        <TouchableOpacity onPress={() => rootNavigate(\"ValidateEmailScreen\")}>\r\n                            <Text style={{marginVertical: 30, textAlign: \"center\", fontSize: 16, color: \"blue\"}}>\r\n                                debug: click here\r\n                            </Text>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"75%\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        description: {\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        mailIcon: {\r\n            marginVertical: 30,\r\n            fontSize: 50,\r\n            color: theme.text,\r\n        },\r\n        email: {\r\n            fontSize: 16,\r\n            fontWeight: \"bold\",\r\n            color: theme.text,\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ValidationEmailSentScreen));\r\n","import {LinkingOptions} from \"@react-navigation/native\";\r\nimport * as Linking from \"expo-linking\";\r\nimport {APP_SCHEME, CLIENT_URL} from \"../constants/config\";\r\n\r\nconst config: LinkingOptions = {\r\n    prefixes: [Linking.makeUrl(\"/\"), CLIENT_URL, `${APP_SCHEME}://`],\r\n    config: {\r\n        screens: {\r\n            LoginRoot: {\r\n                screens: {\r\n                    WelcomeScreen: \"welcome\",\r\n                    LoginScreens: {\r\n                        screens: {\r\n                            SigninScreen: \"login\",\r\n                            ForgotPasswordScreen: \"forgot-password\",\r\n                            SignupScreen: \"signup\",\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            ForgotPasswordEmailSentScreen: \"password-email-sent\",\r\n            ValidationEmailSentScreen: \"validation-sent\",\r\n            MainScreen: {\r\n                screens: {\r\n                    TabHome: {\r\n                        screens: {\r\n                            TabHomeScreen: \"home\",\r\n                        },\r\n                    },\r\n                    TabMatching: {\r\n                        screens: {\r\n                            TabMatchingScreen: \"match\",\r\n                            MatchFilteringScren: \"match/filters\",\r\n                        },\r\n                    },\r\n                    TabMessaging: {\r\n                        screens: {\r\n                            ChatRoomsScreen: \"messaging\",\r\n                            ChatScreen: \"chat/:roomId\",\r\n                        },\r\n                    },\r\n                    TabNotifications: {\r\n                        screens: {\r\n                            TabNotificationsScreen: \"notifications\",\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            ValidateEmailSentScreen: \"validate/success\",\r\n            ValidateEmailScreen: \"validate/:token\",\r\n            ResetPasswordScreen: \"reset-password/:token\",\r\n            ResetPasswordSuccessScreen: \"password-reset\",\r\n            MyProfileScreen: \"profile\",\r\n            ProfileScreen: \"profile/:id\",\r\n            SettingsScreen: \"settings\",\r\n            DeleteAccountScreen: \"delete-account\",\r\n            DeleteAccountSuccessScreen: \"account-deleted\",\r\n            OnboardingScreen: {\r\n                screens: {\r\n                    OnboardingNameScreen: \"onboarding/name\",\r\n                    OnboardingProfileScreen1: \"onboarding/profile/1\",\r\n                    OnboardingProfileScreen2: \"onboarding/profile/2\",\r\n                    OnboardingRoleScreen: \"onboarding/role/1\",\r\n                    OnboardingRoleSpecificScreen: \"onboarding/role/2\",\r\n                    OnboardingOffersScreen1: \"onboarding/offers/1\",\r\n                    OnboardingOffersScreen2: \"onboarding/offers/2\",\r\n                    OnboardingOffersScreen3: \"onboarding/offers/3\",\r\n                    OnboardingLegalScreen1: \"onboarding/tos\",\r\n                    OnboardingLegalScreen2: \"onboarding/data\",\r\n                    OnboardingLegalScreen3: \"onboarding/cookies\",\r\n                },\r\n            },\r\n            OnboardingSuccessfulScreen: \"onboarding/success\",\r\n            NotFoundScreen: \"*\",\r\n        },\r\n    },\r\n};\r\n\r\nexport default config;\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type InputLabelProps = ThemeProps & TextProps;\r\n\r\nclass InputLabel extends React.Component<InputLabelProps> {\r\n    render(): JSX.Element {\r\n        const {theme, style, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <Text {...otherProps} style={[styles.text, style]}>\r\n                {this.props.children}\r\n            </Text>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            color: theme.textLight,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            fontSize: 12,\r\n            marginBottom: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(InputLabel);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, StyleSheet} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {localizeError} from \"../api/errors\";\r\n\r\n// Component props\r\nexport type InputErrorTextProps = ThemeProps & TextProps & {error: string | string[] | null | undefined};\r\n\r\nclass InputErrorText extends React.Component<InputErrorTextProps> {\r\n    render(): JSX.Element {\r\n        const {theme, style, error, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const errorStr: string | null = error ? (typeof error === \"string\" ? error : error[0]) : null;\r\n\r\n        return (\r\n            <Text {...otherProps} style={[styles.text, style]}>\r\n                {errorStr ? localizeError(errorStr) : \"\"}\r\n            </Text>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            fontSize: 12,\r\n            marginTop: 2,\r\n            marginBottom: -12, // prevents an offset from appearing when there is an error\r\n            color: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(InputErrorText);\r\n","import React from \"react\";\r\nimport {TextStyle, StyleProp, View, TextInputProps, TextInput, ViewStyle, TouchableOpacity} from \"react-native\";\r\nimport InputLabel from \"./InputLabel\";\r\nimport InputErrorText from \"./InputErrorText\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\n\r\nexport type TextInputStyleProps = {\r\n    style?: StyleProp<ViewStyle>;\r\n    wrapperStyle?: StyleProp<ViewStyle>;\r\n    errorStyle?: StyleProp<TextStyle>;\r\n    validStyle?: StyleProp<TextStyle>;\r\n    focusedStyle?: StyleProp<TextStyle>;\r\n    errorTextStyle?: StyleProp<TextStyle>;\r\n    labelStyle?: StyleProp<TextStyle>;\r\n    inputStyle?: StyleProp<TextStyle>;\r\n    inputFocusedStyle?: StyleProp<TextStyle>;\r\n    showPasswordButtonStyle?: StyleProp<TextStyle>;\r\n    showPasswordIconStyle?: StyleProp<TextStyle>;\r\n    placeholderTextColor?: string;\r\n};\r\n\r\nexport type ValidatedTextInputProps = {\r\n    value: string;\r\n    showErrorText?: boolean;\r\n    error?: string;\r\n    untouched?: boolean;\r\n    label?: string;\r\n    icon?: (focused: boolean, error: boolean, valid: boolean) => JSX.Element;\r\n} & TextInputStyleProps &\r\n    Partial<TextInputProps>;\r\n\r\ntype ValidatedTextInputState = {\r\n    focused: boolean;\r\n    showSecureEntry: boolean;\r\n};\r\n\r\n/**\r\n * An improved TextInput that supports better styling (including specific focused style) and displays validation errors.\r\n */\r\nclass ValidatedTextInput extends React.Component<ValidatedTextInputProps, ValidatedTextInputState> {\r\n    inputRef = React.createRef<TextInput>();\r\n\r\n    static defaultProps = {\r\n        untouched: false,\r\n        style: [],\r\n        wrapperStyle: [],\r\n        errorStyle: [],\r\n        validStyle: [],\r\n        focusedStyle: [],\r\n        errorTextStyle: [],\r\n        labelStyle: [],\r\n    };\r\n\r\n    constructor(props: ValidatedTextInputProps) {\r\n        super(props);\r\n        this.state = {focused: false, showSecureEntry: false} as ValidatedTextInputState;\r\n    }\r\n\r\n    focus(): void {\r\n        this.inputRef.current?.focus();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            showErrorText,\r\n            error,\r\n            value,\r\n            label,\r\n            icon,\r\n            untouched,\r\n            secureTextEntry,\r\n            style,\r\n            wrapperStyle,\r\n            inputStyle,\r\n            inputFocusedStyle,\r\n            errorStyle,\r\n            validStyle,\r\n            focusedStyle,\r\n            errorTextStyle,\r\n            labelStyle,\r\n            showPasswordButtonStyle,\r\n            showPasswordIconStyle,\r\n            placeholderTextColor,\r\n            onBlur,\r\n            onFocus,\r\n            ...otherProps\r\n        } = this.props;\r\n\r\n        const {showSecureEntry} = this.state;\r\n\r\n        const showError = showErrorText && !untouched && error;\r\n        const isSecureEntry = secureTextEntry === true;\r\n\r\n        return (\r\n            <View\r\n                style={[\r\n                    wrapperStyle,\r\n                    {width: \"100%\", flexDirection: \"column\", position: \"relative\", paddingBottom: showError ? 0 : 6},\r\n                ]}\r\n            >\r\n                {label && <InputLabel style={labelStyle}>{label}</InputLabel>}\r\n                <View\r\n                    style={[\r\n                        {flexDirection: \"row\", alignItems: \"center\"},\r\n                        style,\r\n                        this.state.focused ? focusedStyle : {},\r\n                        untouched ? {} : error ? errorStyle : value.length > 0 ? validStyle : {},\r\n                    ]}\r\n                >\r\n                    {icon && icon(this.state.focused, error !== undefined, error !== undefined && value.length > 0)}\r\n                    <TextInput\r\n                        ref={this.inputRef}\r\n                        style={[\r\n                            {flex: 1, height: \"100%\", backgroundColor: \"transparent\"},\r\n                            inputStyle,\r\n                            this.state.focused ? inputFocusedStyle : {},\r\n                            // untouched ? {} : error ? errorStyle : value.length > 0 ? validStyle : {},\r\n                        ]}\r\n                        onBlur={(e) => {\r\n                            if (onBlur) onBlur(e);\r\n                            this.setState({focused: false});\r\n                        }}\r\n                        onFocus={(e) => {\r\n                            if (onFocus) onFocus(e);\r\n                            this.setState({focused: true});\r\n                        }}\r\n                        value={value}\r\n                        placeholderTextColor={placeholderTextColor}\r\n                        {...(isSecureEntry ? {secureTextEntry: !showSecureEntry} : {})}\r\n                        {...otherProps}\r\n                    />\r\n                    {isSecureEntry && (\r\n                        <TouchableOpacity\r\n                            style={showPasswordButtonStyle}\r\n                            onPress={() => this.setState({...this.state, showSecureEntry: !showSecureEntry})}\r\n                        >\r\n                            <FontAwesome name={showSecureEntry ? \"eye-slash\" : \"eye\"} style={showPasswordIconStyle} />\r\n                        </TouchableOpacity>\r\n                    )}\r\n                </View>\r\n                {showError && <InputErrorText style={errorTextStyle} error={error} />}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ValidatedTextInput;\r\n","import React from \"react\";\r\nimport {TextInputProps} from \"react-native\";\r\nimport ValidatedTextInput, {ValidatedTextInputProps} from \"../ValidatedTextInput\";\r\n\r\n// Component props\r\nexport type FormTextInputProps = {\r\n    field: string;\r\n    touched: boolean | undefined;\r\n    showErrorText?: boolean;\r\n    handleChange<T = string | React.ChangeEvent<unknown>>(\r\n        field: T,\r\n    ): T extends React.ChangeEvent<unknown> ? void : (e: string | React.ChangeEvent<unknown>) => void;\r\n    handleBlur<T = string | unknown>(fieldOrEvent: T): T extends string ? (e: unknown) => void : void;\r\n    isEmail?: boolean;\r\n    isPassword?: boolean;\r\n} & ValidatedTextInputProps;\r\n\r\nconst emailProps: Partial<TextInputProps> = {\r\n    keyboardType: \"email-address\",\r\n    autoCompleteType: \"email\",\r\n    textContentType: \"emailAddress\",\r\n    autoCapitalize: \"none\",\r\n    autoCorrect: false,\r\n};\r\nconst passwordProps: Partial<TextInputProps> = {\r\n    secureTextEntry: true,\r\n    autoCompleteType: \"password\",\r\n    textContentType: \"password\",\r\n    autoCapitalize: \"none\",\r\n    autoCorrect: false,\r\n};\r\n\r\n/**\r\n * An improved TextInput for less verbose Formik usage.\r\n */\r\nexport class FormTextInput extends React.Component<FormTextInputProps> {\r\n    inputRef = React.createRef<ValidatedTextInput>();\r\n\r\n    static defaultProps = {\r\n        showErrorText: true,\r\n        /* eslint-disable @typescript-eslint/no-empty-function */\r\n        handleChange: (): void => {},\r\n        handleBlur: (): void => {},\r\n        /* eslint-ensable @typescript-eslint/no-empty-function */\r\n    };\r\n\r\n    focus(): void {\r\n        this.inputRef.current?.focus();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            field,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            error,\r\n            onBlur,\r\n            onChangeText,\r\n            isEmail,\r\n            isPassword,\r\n            ...otherProps\r\n        } = this.props;\r\n\r\n        return (\r\n            <ValidatedTextInput\r\n                ref={this.inputRef}\r\n                error={touched ? error : undefined}\r\n                untouched={!touched}\r\n                onChangeText={(value: string) => {\r\n                    if (onChangeText) onChangeText(value);\r\n                    handleChange(field)(value);\r\n                }}\r\n                onBlur={(e) => {\r\n                    if (onBlur) onBlur(e);\r\n                    handleBlur(this.props.field)(e);\r\n                }}\r\n                {...(isEmail ? emailProps : {})}\r\n                {...(isPassword ? passwordProps : {})}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n","import {StyleSheet, TextStyle} from \"react-native\";\r\nimport {Theme} from \"../types\";\r\nimport {preTheme} from \"./utils\";\r\nimport {styleTextThin} from \"./general\";\r\n\r\nexport const ONBOARDING_INPUT_BORDER_RADIUS = 12;\r\n\r\nexport const onboardingStyle = preTheme((theme: Theme, wideDevice: boolean) => {\r\n    return StyleSheet.create({\r\n        root: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n        },\r\n        wideDeviceLeftPanel: {\r\n            width: \"50%\",\r\n            height: \"100%\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        slideWrapper: {\r\n            width: wideDevice ? \"50%\" : \"100%\",\r\n            height: \"100%\",\r\n            alignItems: \"center\",\r\n        },\r\n        header: {\r\n            marginBottom: 20,\r\n        },\r\n        slideScrollView: {\r\n            width: \"100%\",\r\n        },\r\n        slideContentWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            alignSelf: \"center\",\r\n            paddingTop: 100,\r\n            paddingBottom: 20,\r\n        },\r\n        slideContentContainer: {\r\n            width: \"80%\",\r\n        },\r\n        slideNavWrapper: {\r\n            width: \"80%\",\r\n            alignItems: \"center\",\r\n            marginTop: 15,\r\n            marginBottom: 40,\r\n        },\r\n        slideNavButtons: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-around\",\r\n        },\r\n        navButton: {\r\n            flex: 1,\r\n            marginHorizontal: 0,\r\n            marginVertical: 0,\r\n        },\r\n        navButtonBack: {\r\n            backgroundColor: \"#fff\",\r\n        },\r\n        navButtonIcon: {\r\n            fontSize: 40,\r\n            color: theme.text,\r\n        },\r\n        finishButtonText: {\r\n            fontSize: 20,\r\n        },\r\n        title: {\r\n            ...styleTextThin,\r\n            fontSize: 40,\r\n            letterSpacing: 1.75,\r\n            color: theme.text,\r\n        } as TextStyle,\r\n        subtitle: {\r\n            fontSize: 18,\r\n            textAlign: \"justify\",\r\n            letterSpacing: 0.4,\r\n            lineHeight: 25,\r\n            color: theme.textLight,\r\n        } as TextStyle,\r\n    });\r\n});\r\n\r\nexport const onboardingOffersStyle = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        categoryTitleText: {},\r\n        offerControl: {\r\n            marginVertical: 10,\r\n        },\r\n        offerControlPreText: {\r\n            fontSize: 18,\r\n            letterSpacing: 0.4,\r\n            color: theme.textLight,\r\n            marginVertical: 10,\r\n        },\r\n    });\r\n});\r\n","import {StyleSheet, Platform, TextStyle} from \"react-native\";\r\nimport {Theme} from \"../types\";\r\nimport {FormCheckBoxProps} from \"../components/forms/FormCheckBox\";\r\nimport {preTheme} from \"./utils\";\r\nimport {TextInputStyleProps} from \"../components/ValidatedTextInput\";\r\nimport {ONBOARDING_INPUT_BORDER_RADIUS} from \"./onboarding\";\r\n\r\nexport const formStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        inputFieldIcon: {\r\n            fontSize: 20,\r\n            color: theme.inputPlaceholder,\r\n            marginRight: 10,\r\n        },\r\n        inputFieldIconFocused: {\r\n            color: theme.accent,\r\n        },\r\n    });\r\n});\r\n\r\nexport function getLoginTextInputsStyleProps(theme: Theme, wrapperVerticalMargin = 0): TextInputStyleProps {\r\n    return {\r\n        wrapperStyle: {\r\n            width: \"100%\",\r\n            marginVertical: wrapperVerticalMargin,\r\n        },\r\n        style: {\r\n            width: \"100%\",\r\n            height: 50,\r\n            borderBottomWidth: 2,\r\n            borderColor: theme.componentBorder,\r\n        },\r\n        focusedStyle: {\r\n            borderColor: theme.accent,\r\n        },\r\n        errorStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.error,\r\n        },\r\n        validStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        labelStyle: {\r\n            marginBottom: 4,\r\n        },\r\n        inputStyle: {\r\n            fontSize: 16,\r\n            color: theme.accent,\r\n        },\r\n        inputFocusedStyle: Platform.OS === \"web\" ? ({outline: \"none\"} as TextStyle) : {},\r\n        showPasswordButtonStyle: {\r\n            padding: 8,\r\n        },\r\n        showPasswordIconStyle: {\r\n            fontSize: 22,\r\n            color: theme.textLight,\r\n        },\r\n        placeholderTextColor: theme.inputPlaceholder,\r\n    };\r\n}\r\n\r\nexport function getLoginCheckBoxStyleProps(theme: Theme): Partial<FormCheckBoxProps> {\r\n    const commonStyle = StyleSheet.create({\r\n        checkboxWrapper: {\r\n            width: \"100%\",\r\n            marginVertical: 5,\r\n        },\r\n        checkboxLabel: {\r\n            fontSize: 14,\r\n        },\r\n    });\r\n\r\n    return {\r\n        wrapperStyle: commonStyle.checkboxWrapper,\r\n        labelStyle: [commonStyle.checkboxLabel, {color: theme.text}],\r\n    };\r\n}\r\n\r\nexport function getOnboardingTextInputsStyleProps(theme: Theme): TextInputStyleProps {\r\n    /*return {\r\n        wrapperStyle: {\r\n            width: \"100%\",\r\n            marginVertical: 10,\r\n        },\r\n        style: {\r\n            width: \"100%\",\r\n            height: 60,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n        },\r\n        errorStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.error,\r\n        },\r\n        validStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        inputStyle: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n        },\r\n        inputFocusedStyle:\r\n            Platform.OS === \"web\"\r\n                ? ({\r\n                      backgroundColor: \"transparent\",\r\n                      outline: \"none\",\r\n                  } as TextStyle)\r\n                : {},\r\n    };*/\r\n    return {\r\n        wrapperStyle: {\r\n            width: \"100%\",\r\n            marginVertical: 10,\r\n        },\r\n        style: {\r\n            width: \"100%\",\r\n            height: 55,\r\n            borderRadius: ONBOARDING_INPUT_BORDER_RADIUS,\r\n            borderWidth: 0,\r\n            backgroundColor: theme.onboardingInputBackground,\r\n        },\r\n        focusedStyle: {\r\n            backgroundColor: theme.onboardingInputFocusedBackground,\r\n        },\r\n        errorStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.error,\r\n        },\r\n        validStyle: {},\r\n        inputStyle: {\r\n            fontSize: 18,\r\n            color: theme.text,\r\n            marginHorizontal: 15,\r\n        },\r\n        inputFocusedStyle: {\r\n            ...(Platform.OS === \"web\" ? ({outline: \"none\"} as TextStyle) : {}),\r\n        },\r\n    };\r\n}\r\n","import * as React from \"react\";\r\nimport {Text, View, ViewProps, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {localizeError} from \"../../api/errors\";\r\n\r\n// Component props\r\nexport type FormErrorProps = ThemeProps & {\r\n    error?: string;\r\n} & ViewProps;\r\n\r\nclass FormError extends React.Component<FormErrorProps> {\r\n    render(): JSX.Element {\r\n        const {error, theme, style, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <>\r\n                {error && error.length > 0 && (\r\n                    <View style={[styles.wrapper, style]} {...otherProps}>\r\n                        <Text style={styles.text}>{error ? localizeError(error) : \"\"}</Text>\r\n                    </View>\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            marginTop: 5,\r\n        },\r\n        text: {\r\n            fontSize: 14,\r\n            color: theme.error,\r\n            textAlign: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FormError);\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, TouchableOpacity, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\nexport type ButtonSkinStyle = {button: ViewStyle; text: TextStyle};\r\n\r\nexport const BUTTON_SKINS = {\r\n    \"rounded-filled\": (theme: Theme): ButtonSkinStyle => ({\r\n        button: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n            height: 48,\r\n            marginVertical: 10,\r\n            borderRadius: 100,\r\n            backgroundColor: theme.accent,\r\n            paddingHorizontal: 10,\r\n        },\r\n        text: {\r\n            fontSize: 18,\r\n            letterSpacing: 1,\r\n            color: theme.textWhite,\r\n        },\r\n    }),\r\n    \"rounded-hollow\": (theme: Theme): ButtonSkinStyle => ({\r\n        button: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n            height: 48,\r\n            marginVertical: 10,\r\n            borderRadius: 100,\r\n            borderColor: theme.accent,\r\n            borderWidth: 1,\r\n            paddingHorizontal: 10,\r\n        },\r\n        text: {\r\n            fontSize: 18,\r\n            letterSpacing: 1,\r\n            color: theme.accent,\r\n        },\r\n    }),\r\n};\r\n\r\nexport type ButtonSkin = keyof typeof BUTTON_SKINS;\r\n\r\n// Component props\r\nexport type ButtonProps = {\r\n    onPress?: () => void;\r\n    text?: string;\r\n    icon?: JSX.Element;\r\n    style?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    skin?: ButtonSkin;\r\n} & ThemeProps;\r\n\r\nclass Button extends React.Component<ButtonProps> {\r\n    render(): JSX.Element {\r\n        const {onPress, text, icon, skin, style, textStyle, children, theme} = this.props;\r\n\r\n        const skinStyles = skin ? BUTTON_SKINS[skin](theme) : {button: {}, text: {}};\r\n\r\n        return (\r\n            <TouchableOpacity\r\n                accessibilityRole=\"button\"\r\n                accessibilityLabel={text}\r\n                onPress={onPress}\r\n                style={[{flexDirection: \"row\", alignItems: \"center\"}, skinStyles.button, style]}\r\n            >\r\n                {children || (\r\n                    <>\r\n                        <Text style={[skinStyles.text, textStyle]}>{text}</Text>\r\n                        {icon}\r\n                    </>\r\n                )}\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(Button);\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, StyleProp, TextStyle, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport Button, {ButtonSkin} from \"../Button\";\r\n\r\n// Component props\r\ntype FormSubmitButtonProps = {\r\n    onPress: () => void;\r\n    text: string;\r\n    icon?: JSX.Element;\r\n    submitting: boolean;\r\n    style?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    loadingIndicatorStyle?: StyleProp<ViewStyle>;\r\n    skin?: ButtonSkin;\r\n} & ThemeProps;\r\n\r\nclass FormSubmitButton extends React.Component<FormSubmitButtonProps> {\r\n    render(): JSX.Element {\r\n        const {submitting, onPress, style, loadingIndicatorStyle, theme, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <Button\r\n                {...{onPress: submitting ? undefined : onPress}}\r\n                style={[{flexDirection: \"row\", alignItems: \"center\"}, style]}\r\n                {...otherProps}\r\n            >\r\n                {submitting && <ActivityIndicator color={theme.accentTernary} style={loadingIndicatorStyle} />}\r\n            </Button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(FormSubmitButton);\r\n","import {BlurView} from \"expo-blur\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {StyleProp, TouchableOpacity, View, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {BLUR_MODAL_INTENSITY} from \"../../styles/general\";\r\nimport {ModalImplProps} from \"./ModalImpl.native\";\r\n\r\ntype ModalImplState = {\r\n    modalVisible: boolean;\r\n};\r\n\r\nexport class ModalImplClass extends React.Component<ModalImplProps, ModalImplState> {\r\n    el: HTMLDivElement;\r\n\r\n    constructor(props: ModalImplProps) {\r\n        super(props);\r\n        this.state = {modalVisible: props.visible || false};\r\n        this.el = document.createElement(\"div\");\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        document.body.appendChild(this.el);\r\n    }\r\n\r\n    componentDidUpdate(oldProps: ModalImplProps): void {\r\n        if (oldProps.visible && !this.props.visible) this.setModalVisible(false);\r\n        if (!oldProps.visible && this.props.visible) this.setModalVisible(true);\r\n    }\r\n\r\n    setModalVisible(b: boolean): void {\r\n        this.setState({...this.state, modalVisible: b});\r\n        if (!b && this.props.onHide) this.props.onHide();\r\n        if (b && this.props.onShow) this.props.onShow();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            modalViewStyle,\r\n            bottom,\r\n            fullWidth,\r\n            fullHeight,\r\n            nonDismissable,\r\n            noBackground,\r\n            backdropOpacity,\r\n            backdropBlur,\r\n        } = this.props;\r\n        const {modalVisible} = this.state;\r\n\r\n        const fixedFullSize = {\r\n            position: \"fixed\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n\r\n        const modal = modalVisible ? (\r\n            <>\r\n                {backdropBlur && (\r\n                    <BlurView style={{flex: 1, ...fixedFullSize}} tint={\"dark\"} intensity={BLUR_MODAL_INTENSITY} />\r\n                )}\r\n                <TouchableOpacity\r\n                    style={\r\n                        ({\r\n                            ...fixedFullSize,\r\n                            backgroundColor: `rgba(0,0,0,${backdropOpacity || 0.05})`,\r\n                            cursor: \"pointer\",\r\n                        } as unknown) as StyleProp<ViewStyle> // force typings to accept web-specific styling\r\n                    }\r\n                    activeOpacity={1.0}\r\n                    onPress={nonDismissable ? undefined : () => this.setModalVisible(false)}\r\n                />\r\n                <View\r\n                    style={[\r\n                        ({\r\n                            // Centering\r\n                            position: \"fixed\",\r\n                            left: 0,\r\n                            right: 0,\r\n                            ...(bottom ? {} : {top: 0}),\r\n                            bottom: 0,\r\n                            margin: \"auto\",\r\n                            // Actual styling\r\n                            width: \"80%\",\r\n                            height: \"fit-content\",\r\n                            maxWidth: 300,\r\n                            borderRadius: 3,\r\n                            paddingVertical: 20,\r\n                            paddingHorizontal: 30,\r\n                            alignItems: \"center\",\r\n                        } as unknown) as ViewStyle, // force typings to accept web-specific styling\r\n                        fullWidth ? {width: \"100%\", maxWidth: \"100%\"} : {},\r\n                        fullHeight ? {height: \"100%\"} : {},\r\n                        !noBackground\r\n                            ? (({\r\n                                  backgroundColor: theme.cardBackground,\r\n                                  boxShadow: \"0px 0px 8px 0px rgba(0,0,0,0.05)\",\r\n                              } as unknown) as ViewStyle)\r\n                            : {},\r\n                        modalViewStyle,\r\n                    ]}\r\n                >\r\n                    {this.props.renderContent(() => this.setModalVisible(false))}\r\n                </View>\r\n            </>\r\n        ) : (\r\n            <></>\r\n        );\r\n\r\n        // \"Teleport\" the modal to an element that we previously appended to the <body>\r\n        return ReactDOM.createPortal(modal, this.el);\r\n    }\r\n}\r\n\r\nexport default withTheme(ModalImplClass);\r\n","import React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ModalImpl, {ModalImplClass} from \"./ModalImpl\";\r\nimport {ModalImplProps} from \"./ModalImpl.native\";\r\n\r\nexport type ModalActivator = (show: () => void) => JSX.Element;\r\n\r\nexport type CustomModalProps = ModalImplProps & {activator?: ModalActivator};\r\n\r\nexport class CustomModalClass extends React.Component<CustomModalProps> {\r\n    modalRef = React.createRef<ModalImplClass>();\r\n\r\n    show(): void {\r\n        this.modalRef.current?.setModalVisible(true);\r\n    }\r\n\r\n    hide(): void {\r\n        this.modalRef.current?.setModalVisible(false);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {activator, ...otherProps} = this.props;\r\n\r\n        const activatorElement = activator ? activator(() => this.show()) : <></>;\r\n\r\n        return (\r\n            <>\r\n                {activatorElement}\r\n                <ModalImpl ref={this.modalRef} {...otherProps} />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(CustomModalClass);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\nimport store from \"../../state/store\";\r\nimport {cancelLoginRecovery, requestLogin} from \"../../state/auth/actions\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\n\r\nexport type RecoverAccountModalProps = ThemeProps & Partial<CustomModalProps> & {email: string; password: string};\r\n\r\nclass RecoverAccountModal extends React.Component<RecoverAccountModalProps> {\r\n    render() {\r\n        const {theme, email, password, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                modalViewStyle={styles.modal}\r\n                renderContent={() => (\r\n                    <>\r\n                        <Text style={styles.title}>{i18n.t(\"recoverAccount.title\")}</Text>\r\n                        <Text style={styles.text}>{i18n.t(\"recoverAccount.text\")}</Text>\r\n                        <View style={styles.actionButtonsWrapper}>\r\n                            <Button\r\n                                text={i18n.t(\"cancel\")}\r\n                                onPress={() => store.dispatch(cancelLoginRecovery())}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionText}\r\n                            />\r\n                            <Button\r\n                                text={i18n.t(\"recoverAccount.yes\")}\r\n                                onPress={() => {\r\n                                    (store.dispatch as MyThunkDispatch)(requestLogin(email, password, true));\r\n                                }}\r\n                                skin=\"rounded-filled\"\r\n                                style={[styles.actionButton, styles.redBackground]}\r\n                                textStyle={styles.actionText}\r\n                            />\r\n                        </View>\r\n                    </>\r\n                )}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        modal: {\r\n            paddingHorizontal: 20,\r\n            paddingVertical: 20,\r\n        },\r\n        title: {\r\n            fontSize: 20,\r\n            textAlign: \"left\",\r\n            width: \"100%\",\r\n            marginBottom: 10,\r\n            fontWeight: \"bold\",\r\n        },\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n        },\r\n\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(RecoverAccountModal);\r\n","import * as React from \"react\";\r\nimport {Keyboard, StyleProp, StyleSheet, Text, TouchableOpacity, View, ViewStyle} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState, MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {VALIDATOR_EMAIL_LOGIN, VALIDATOR_PASSWORD_LOGIN} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps, formStyles} from \"../../styles/forms\";\r\nimport {requestLogin} from \"../../state/auth/actions\";\r\nimport FormError from \"./FormError\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {MaterialCommunityIcons, MaterialIcons} from \"@expo/vector-icons\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport Button from \"../Button\";\r\nimport RecoverAccountModal from \"../modals/RecoverAccountModal\";\r\n\r\ntype FormState = {\r\n    email: string;\r\n    password: string;\r\n};\r\n\r\n// Use Yup to create the validation schema\r\nconst LoginFormSchema = Yup.object().shape({\r\n    email: VALIDATOR_EMAIL_LOGIN,\r\n    password: VALIDATOR_PASSWORD_LOGIN,\r\n});\r\n\r\n// Map props from the store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    validatedEmail: state.auth.validatedEmail,\r\n    needsRecovery: state.auth.accountNeedsRecovery,\r\n}));\r\n\r\n// Component props\r\ntype LoginFormProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    FormProps<FormState> & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\ntype LoginFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass LoginForm extends React.Component<LoginFormProps, LoginFormState> {\r\n    pwdInputRef = React.createRef<FormTextInput>();\r\n    setFieldError?: (field: string, message: string) => void;\r\n    setFieldValue: null | ((field: string, value: string, shouldValidate?: boolean | undefined) => void) = null;\r\n\r\n    constructor(props: LoginFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    componentDidUpdate(oldProps: LoginFormProps) {\r\n        const {validatedEmail} = this.props;\r\n        if (this.setFieldValue && validatedEmail && oldProps.validatedEmail != validatedEmail)\r\n            this.setFieldValue(\"email\", validatedEmail);\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        this.setState({...this.state, submitting: true});\r\n        (this.props.dispatch as MyThunkDispatch)(requestLogin(values.email, values.password)).then(\r\n            ({success, errors}: ValidatedActionReturn) => {\r\n                if (success) {\r\n                    if (this.props.onSuccessfulSubmit) this.props.onSuccessfulSubmit(values);\r\n                    // Clear password input\r\n                    if (this.setFieldValue) this.setFieldValue(\"password\", \"\", false);\r\n                }\r\n                if (errors && errors.fields) {\r\n                    const f = errors.fields;\r\n                    Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                }\r\n                this.setState({remoteErrors: errors, submitting: false});\r\n            },\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle, needsRecovery} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n\r\n        const styles = themedStyles(theme);\r\n        const fstyles = formStyles(theme);\r\n\r\n        return (\r\n            <View style={[{width: \"100%\"}, containerStyle]}>\r\n                <Formik\r\n                    initialValues={{email: \"\", password: \"\"} as FormState}\r\n                    validationSchema={LoginFormSchema}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldValue,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 10)};\r\n                        this.setFieldValue = setFieldValue;\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <View>\r\n                                <FormTextInput\r\n                                    field=\"email\"\r\n                                    placeholder={i18n.t(\"emailAddress\")}\r\n                                    accessibilityLabel={i18n.t(\"emailAddress\")}\r\n                                    error={errors.email}\r\n                                    value={values.email}\r\n                                    touched={touched.email}\r\n                                    isEmail={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdInputRef.current?.focus()}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"email\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdInputRef}\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    accessibilityLabel={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"done\"\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"lock\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <TouchableOpacity\r\n                                    accessibilityRole=\"link\"\r\n                                    accessibilityLabel={i18n.t(\"forgotPassword\")}\r\n                                    onPress={() => {\r\n                                        Keyboard.dismiss();\r\n                                        rootNavigate(\"LoginRoot\", {\r\n                                            screen: \"LoginScreens\",\r\n                                            params: {screen: \"ForgotPasswordScreen\"},\r\n                                        });\r\n                                    }}\r\n                                    style={styles.forgotPwdLink}\r\n                                >\r\n                                    <Text style={styles.forgotPasswordText}>{i18n.t(\"forgotPassword\")}</Text>\r\n                                </TouchableOpacity>\r\n\r\n                                <View style={styles.actionsContainer}>\r\n                                    <FormSubmitButton\r\n                                        onPress={() => handleSubmit()}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"loginForm.logIn\")}\r\n                                        icon={<MaterialCommunityIcons name=\"login\" style={styles.loginButtonIcon} />}\r\n                                        submitting={submitting}\r\n                                    />\r\n                                    <View style={styles.separatorContainer}>\r\n                                        <View style={styles.separatorHbar} />\r\n                                        <Text style={styles.separatorText}>{i18n.t(\"loginForm.or\")}</Text>\r\n                                        <View style={styles.separatorHbar} />\r\n                                    </View>\r\n                                    <Button\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            rootNavigate(\"LoginRoot\", {\r\n                                                screen: \"LoginScreens\",\r\n                                                params: {screen: \"SignupScreen\"},\r\n                                            });\r\n                                        }}\r\n                                        skin=\"rounded-hollow\"\r\n                                        text={i18n.t(\"loginForm.signUp\")}\r\n                                    />\r\n                                </View>\r\n                                <RecoverAccountModal\r\n                                    visible={needsRecovery}\r\n                                    email={values.email}\r\n                                    password={values.password}\r\n                                />\r\n                            </View>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsContainer: {\r\n            flexDirection: \"column\",\r\n            width: \"100%\",\r\n        },\r\n        loginButtonIcon: {\r\n            color: theme.textWhite,\r\n            fontSize: 20,\r\n            marginLeft: 5,\r\n        },\r\n        forgotPwdLink: {\r\n            height: 48,\r\n            justifyContent: \"center\",\r\n            paddingHorizontal: 8, // make the button larger to click on\r\n        },\r\n        forgotPasswordText: {\r\n            fontSize: 14,\r\n            letterSpacing: 0.5,\r\n            color: theme.textLight,\r\n            textAlign: \"center\",\r\n        },\r\n        separatorContainer: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        separatorHbar: {\r\n            flex: 1,\r\n            height: 1,\r\n            backgroundColor: theme.text,\r\n            opacity: 0.2,\r\n        },\r\n        separatorText: {\r\n            fontSize: 14,\r\n            color: theme.textLight,\r\n            paddingHorizontal: 10,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(LoginForm));\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet, StyleProp, ViewStyle, Keyboard} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {getLoginTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {VALIDATOR_EMAIL_LOGIN} from \"../../validators\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {forgotPassword} from \"../../state/auth/actions\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport FormError from \"./FormError\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {navigateBack} from \"../../navigation/utils\";\r\nimport Button from \"../Button\";\r\n\r\ntype FormState = {\r\n    email: string;\r\n};\r\n\r\n// Use Yup to create the validation schema\r\nconst ForgotPasswordFormSchema = Yup.object().shape({\r\n    email: VALIDATOR_EMAIL_LOGIN,\r\n});\r\n\r\n// Component props\r\nexport type ForgotPasswordFormProps = ThemeProps & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\n// Component state\r\nexport type ForgotPasswordFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass ForgotPasswordForm extends React.Component<ForgotPasswordFormProps, ForgotPasswordFormState> {\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: ForgotPasswordFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit({email}: FormState) {\r\n        this.setState({...this.state, submitting: true});\r\n        (store.dispatch as MyThunkDispatch)(forgotPassword(email)).then(({errors}: ValidatedActionReturn) => {\r\n            if (errors && errors.fields) {\r\n                const f = errors.fields;\r\n                Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n            }\r\n            this.setState({remoteErrors: errors, submitting: false});\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={[{width: \"100%\"}, containerStyle]}>\r\n                <View style={styles.titleWrapper}>\r\n                    <Text style={styles.title}>{i18n.t(\"newPassword\")}</Text>\r\n                    <Text style={styles.description}>{i18n.t(\"forgotPasswordExplanation\")}</Text>\r\n                </View>\r\n                <Formik\r\n                    initialValues={{email: \"\"} as FormState}\r\n                    validationSchema={ForgotPasswordFormSchema}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikCfg: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikCfg;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"email\"\r\n                                    placeholder={i18n.t(\"emailAddress\")}\r\n                                    error={errors.email}\r\n                                    value={values.email}\r\n                                    touched={touched.email}\r\n                                    isEmail={true}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <View style={styles.actionsContainer}>\r\n                                    <FormSubmitButton\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            handleSubmit();\r\n                                        }}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"send\")}\r\n                                        submitting={submitting}\r\n                                    />\r\n                                    <Button\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            navigateBack();\r\n                                        }}\r\n                                        skin=\"rounded-hollow\"\r\n                                        text={i18n.t(\"cancel\")}\r\n                                    />\r\n                                </View>\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsContainer: {\r\n            flexDirection: \"column\",\r\n            width: \"100%\",\r\n            marginTop: 40,\r\n        },\r\n        titleWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"flex-start\",\r\n            marginBottom: 20,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n        description: {\r\n            textAlign: \"justify\",\r\n            fontSize: 16,\r\n            marginTop: 10,\r\n            color: theme.textLight,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ForgotPasswordForm);\r\n","import * as React from \"react\";\r\nimport {ScrollView, LayoutChangeEvent, StyleProp, ViewStyle, Keyboard, KeyboardAvoidingView} from \"react-native\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\n\r\ntype ScrollFormWrapperProps = ThemeProps & {contentStyle?: StyleProp<ViewStyle>; notKeyboardReactive?: boolean};\r\n\r\ntype ScrollFormWrapperState = {height: number};\r\n\r\nclass ScrollFormWrapper extends React.Component<ScrollFormWrapperProps, ScrollFormWrapperState> {\r\n    keyboardShown = false;\r\n\r\n    constructor(props: ScrollFormWrapperProps) {\r\n        super(props);\r\n        this.state = {height: 0};\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.props.notKeyboardReactive) {\r\n            Keyboard.addListener(\"keyboardDidShow\", () => {\r\n                /*const coords = e.endCoordinates;\r\n                console.log(coords);\r\n                if (coords) this.setState({...this.state, height: coords.height, keyboardTopY: coords.screenY, keyboardOpen: true});*/\r\n                this.keyboardShown = true;\r\n            });\r\n            Keyboard.addListener(\"keyboardDidHide\", () => (this.keyboardShown = false));\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {notKeyboardReactive, contentStyle, theme} = this.props;\r\n        const {height} = this.state;\r\n\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScrollView\r\n                keyboardShouldPersistTaps=\"handled\"\r\n                style={styles.scrollView}\r\n                contentContainerStyle={[\r\n                    styles.scrollViewContent,\r\n                    {\r\n                        minHeight: notKeyboardReactive ? 0 : height,\r\n                    },\r\n                ]}\r\n                onLayout={(e: LayoutChangeEvent) => {\r\n                    if (!notKeyboardReactive || this.state.height == 0) {\r\n                        // Manually give a minimum height to the content\r\n                        // (-5 is to prevent an unnecessary scrollbar from showing on web)\r\n                        if (!this.keyboardShown)\r\n                            this.setState({...this.state, height: e.nativeEvent.layout.height - 5});\r\n                    }\r\n                }}\r\n            >\r\n                <KeyboardAvoidingView\r\n                    behavior=\"padding\"\r\n                    style={[\r\n                        styles.keyboardAvoidingView,\r\n                        // Avoid showing the content until we have the height computed\r\n                        !notKeyboardReactive && this.state.height === 0 ? {opacity: 0} : {},\r\n                        contentStyle,\r\n                    ]}\r\n                >\r\n                    {this.props.children}\r\n                </KeyboardAvoidingView>\r\n            </ScrollView>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => ({\r\n    keyboardAvoidingView: {\r\n        flex: 1,\r\n        width: \"100%\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n    scrollView: {\r\n        flex: 1,\r\n        width: \"100%\",\r\n    },\r\n    scrollViewContent: {\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n}));\r\n\r\nexport default withTheme(ScrollFormWrapper);\r\n","import * as React from \"react\";\r\nimport {StyleProp, StyleSheet, Text, TextInput, View, ViewStyle, Keyboard} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {VALIDATOR_EMAIL_SIGNUP, VALIDATOR_PASSWORD_SIGNUP, VALIDATOR_PASSWORD_REPEAT} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps, formStyles} from \"../../styles/forms\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {requestRegister} from \"../../state/auth/actions\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport FormError from \"./FormError\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {navigateBack} from \"../../navigation/utils\";\r\nimport Button from \"../Button\";\r\n\r\ntype FormState = {\r\n    email: string;\r\n    password: string;\r\n    passwordRepeat: string;\r\n};\r\n\r\nconst initialState = (): FormState => ({\r\n    email: \"\",\r\n    password: \"\",\r\n    passwordRepeat: \"\",\r\n});\r\n\r\n// Use Yup to create the validation schema\r\nconst SignupFormSchema = Yup.object().shape({\r\n    email: VALIDATOR_EMAIL_SIGNUP,\r\n    password: VALIDATOR_PASSWORD_SIGNUP,\r\n    passwordRepeat: VALIDATOR_PASSWORD_REPEAT,\r\n});\r\n\r\n// Component props\r\ntype SignupFormProps = FormProps<FormState> & ThemeProps & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\n// Component state\r\ntype SignupFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass SignupForm extends React.Component<SignupFormProps, SignupFormState> {\r\n    pwdField1Ref = React.createRef<FormTextInput>();\r\n    pwdField2Ref = React.createRef<FormTextInput>();\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: SignupFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        this.setState({...this.state, submitting: true});\r\n        (store.dispatch as MyThunkDispatch)(requestRegister(values.email, values.password)).then(\r\n            ({success, errors}: ValidatedActionReturn) => {\r\n                if (success && this.props.onSuccessfulSubmit) this.props.onSuccessfulSubmit(values);\r\n                if (errors && errors.fields) {\r\n                    const f = errors.fields;\r\n                    Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                }\r\n                this.setState({remoteErrors: errors, submitting: false});\r\n            },\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n        const fstyles = formStyles(theme);\r\n\r\n        return (\r\n            <View style={[{width: \"100%\"}, containerStyle]}>\r\n                <Text style={styles.title}>{i18n.t(\"signupWelcome\")}</Text>\r\n                <Formik\r\n                    initialValues={initialState()}\r\n                    validationSchema={SignupFormSchema}\r\n                    validateOnChange={true}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 5)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"email\"\r\n                                    placeholder={i18n.t(\"emailAddress\")}\r\n                                    accessibilityLabel={i18n.t(\"emailAddress\")}\r\n                                    error={errors.email}\r\n                                    value={values.email}\r\n                                    touched={touched.email}\r\n                                    isEmail={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdField1Ref.current?.focus()}\r\n                                    {...textInputProps}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"email\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdField1Ref}\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    accessibilityLabel={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdField2Ref.current?.focus()}\r\n                                    {...textInputProps}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"lock\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                />\r\n\r\n                                {/* TEMP This is a workaround for a bug on some iOS versions.\r\n                                    See https://github.com/facebook/react-native/issues/21572 */}\r\n                                <TextInput style={{width: 1, height: 1}} />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdField2Ref}\r\n                                    field=\"passwordRepeat\"\r\n                                    placeholder={i18n.t(\"passwordRepeat\")}\r\n                                    accessibilityLabel={i18n.t(\"passwordRepeat\")}\r\n                                    error={errors.passwordRepeat}\r\n                                    value={values.passwordRepeat}\r\n                                    touched={touched.passwordRepeat}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"done\"\r\n                                    {...textInputProps}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"lock\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <View style={styles.actionsContainer}>\r\n                                    <FormSubmitButton\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            handleSubmit();\r\n                                        }}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"createAccount\")}\r\n                                        submitting={submitting}\r\n                                    />\r\n                                    <Button\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            navigateBack();\r\n                                        }}\r\n                                        skin=\"rounded-hollow\"\r\n                                        text={i18n.t(\"cancel\")}\r\n                                    />\r\n                                </View>\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsContainer: {\r\n            flexDirection: \"column\",\r\n            width: \"100%\",\r\n            marginTop: 10,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            marginBottom: 5,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SignupForm);\r\n","import * as React from \"react\";\r\nimport {SvgProps} from \"react-native-svg\";\r\n\r\n// Component props\r\nexport type SvgPlaceholderProps = SvgProps;\r\n\r\nfunction SvgPlaceholder(): JSX.Element {\r\n    return <></>;\r\n}\r\n\r\nexport default SvgPlaceholder;\r\n","import {SvgProps} from \"react-native-svg\";\r\nimport SvgPlaceholder from \"./components/SvgPlaceholder\";\r\nimport {SupportedLocale} from \"./localization\";\r\nimport store from \"./state/store\";\r\nimport {ThemeKey} from \"./types\";\r\n\r\nlet loaded: {[key: string]: number} = {};\r\nlet locale: SupportedLocale | null = null;\r\nlet theme: ThemeKey | null = null;\r\n\r\nasync function assetDictCommon(theme: ThemeKey, key: string): Promise<unknown> {\r\n    switch (key) {\r\n        case \"welcome\":\r\n            return import(\"@assets/images/welcome.svg\");\r\n        case \"login-header\":\r\n            return import(\"@assets/images/login.svg\");\r\n        case \"offers.categories.discover\":\r\n            return import(\"@assets/images/offers/discover.svg\");\r\n        case \"offers.categories.meet\":\r\n            return import(\"@assets/images/offers/meet.svg\");\r\n        case \"offers.categories.collaborate\":\r\n            return import(\"@assets/images/offers/collaborate.svg\");\r\n        case \"background.onboarding\":\r\n            return import(\"@assets/images/background.svg\");\r\n        case \"large-wave-bg\":\r\n            return import(\"@assets/images/large-wave-bg.svg\");\r\n        case \"woman-holding-phone\":\r\n            return import(\"@assets/images/woman-holding-phone.svg\");\r\n        case \"woman-holding-phone-2\":\r\n            return import(\"@assets/images/woman-holding-phone-2.svg\");\r\n        case \"woman-holding-phone-3\":\r\n            return import(\"@assets/images/woman-holding-phone-3.svg\");\r\n        case \"woman-holding-phone-4\":\r\n            return import(\"@assets/images/woman-holding-phone-4.svg\");\r\n        case \"man-holding-phone\":\r\n            return import(\"@assets/images/man-holding-phone.svg\");\r\n        case \"blob-4\":\r\n            return import(\"@assets/images/blob-4.svg\");\r\n        case \"blob-5\":\r\n            return import(\"@assets/images/blob-5.svg\");\r\n        case \"blob-6\":\r\n            return import(\"@assets/images/blob-6.svg\");\r\n        case \"blob-8\":\r\n            return import(\"@assets/images/blob-8.svg\");\r\n        case \"blob-9\":\r\n            return import(\"@assets/images/blob-9.svg\");\r\n        case \"blob-10\":\r\n            return import(\"@assets/images/blob-10.svg\");\r\n        case \"blob-11\":\r\n            return import(\"@assets/images/blob-11.svg\");\r\n        case \"staff\":\r\n            return import(\"@assets/images/staff.svg\");\r\n        case \"student\":\r\n            return import(\"@assets/images/student.svg\");\r\n        case \"logos.sea-eu-around.small\":\r\n            return import(\"@assets/images/logos/sea-eu-around.small.png\");\r\n        case \"store-button.android\":\r\n            return import(\"@assets/images/store-android.png\");\r\n        case \"store-button.ios\":\r\n            return import(\"@assets/images/store-ios.svg\");\r\n        default:\r\n            return import(\"@assets/images/placeholder.png\");\r\n    }\r\n}\r\n\r\nasync function assetDictEn(theme: ThemeKey, key: string): Promise<unknown> {\r\n    switch (key) {\r\n        case \"logos.erasmusLeft\":\r\n            return import(\"@assets/images/logos/logosbeneficaireserasmusleft_en_0.png\");\r\n        default:\r\n            return null;\r\n    }\r\n}\r\n\r\nasync function assetDictFr(theme: ThemeKey, key: string): Promise<unknown> {\r\n    switch (key) {\r\n        case \"logos.erasmusLeft\":\r\n            return import(\"@assets/images/logos/logosbeneficaireserasmusleft_fr_0.png\");\r\n        default:\r\n            return null;\r\n    }\r\n}\r\n\r\nexport function getLocalImage(key: string, onLoad?: () => void): number {\r\n    const settings = store.getState().settings.userSettings;\r\n    if (locale != settings.locale || theme != settings.theme) loaded = {};\r\n    locale = settings.locale;\r\n    theme = settings.theme;\r\n\r\n    if (loaded[key]) return loaded[key];\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const finish = (v: any) => {\r\n        loaded[key] = v.default;\r\n        if (onLoad) onLoad();\r\n    };\r\n\r\n    const localizedDict = locale === \"en\" ? assetDictEn : assetDictFr;\r\n\r\n    localizedDict(theme, key).then((v) => {\r\n        // Fallback to the common dict if needed\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        if (v === null) assetDictCommon(theme!, key).then((v) => finish(v));\r\n        else finish(v);\r\n    });\r\n\r\n    return 0;\r\n}\r\n\r\nexport function getLocalSvg(key: string, onLoad?: () => void): React.FC<SvgProps> {\r\n    const raw = getLocalImage(key, onLoad);\r\n    if (raw === 0) return SvgPlaceholder;\r\n    return (raw as unknown) as React.FC<SvgProps>;\r\n}\r\n","import * as React from \"react\";\r\nimport {Text, TouchableOpacity, StyleSheet, Dimensions, Keyboard, Platform, View} from \"react-native\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport {useSafeAreaInsets, EdgeInsets} from \"react-native-safe-area-context\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport layout from \"../../constants/layout\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    isFirstLaunch: state.settings.isFirstLaunch,\r\n}));\r\n\r\n// Component props\r\ntype LoginHeaderProps = ThemeProps & {insets: EdgeInsets} & ConnectedProps<typeof reduxConnector>;\r\n\r\nexport const LOGIN_HEADER_WAVE_HEIGHT = 60;\r\nconst SVG_VIEWBOX_W = 620;\r\nconst SVG_VIEWBOX_H = 800;\r\n\r\nclass LoginHeaderClass extends React.Component<LoginHeaderProps> {\r\n    height = new ReAnimated.Value<number>(this.getFullHeight() - LOGIN_HEADER_WAVE_HEIGHT);\r\n    imageTop = new ReAnimated.Value<number>(this.getFullHeight() - this.getImageHeight());\r\n\r\n    back(): void {\r\n        Keyboard.dismiss();\r\n        rootNavigate(\"LoginRoot\", {screen: \"WelcomeScreen\"});\r\n    }\r\n\r\n    getImageHeight(): number {\r\n        return (SVG_VIEWBOX_H / SVG_VIEWBOX_W) * Dimensions.get(\"window\").width;\r\n    }\r\n\r\n    getCollapsedHeight(): number {\r\n        const minHeightBelow = /*550*/ 650;\r\n        return Dimensions.get(\"window\").height - minHeightBelow + this.props.insets.top;\r\n    }\r\n\r\n    getFullHeight(): number {\r\n        const maxHeight = 530;\r\n        const minHeightBelow = 420;\r\n        return Math.min(Dimensions.get(\"window\").height - minHeightBelow + this.props.insets.top, maxHeight);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Keyboard.addListener(\"keyboardDidShow\", () => {\r\n            const imageTopVal = this.getCollapsedHeight() - this.getImageHeight();\r\n            const heightVal = this.getCollapsedHeight() - LOGIN_HEADER_WAVE_HEIGHT;\r\n\r\n            if (Platform.OS === \"web\") {\r\n                this.height.setValue(heightVal);\r\n                this.imageTop.setValue(imageTopVal);\r\n            } else {\r\n                const easing: ReAnimated.EasingFunction = Easing.cubic;\r\n                const duration = 100;\r\n\r\n                ReAnimated.timing(this.height, {\r\n                    toValue: heightVal,\r\n                    duration,\r\n                    easing,\r\n                }).start();\r\n                ReAnimated.timing(this.imageTop, {\r\n                    toValue: imageTopVal,\r\n                    duration,\r\n                    easing,\r\n                }).start();\r\n            }\r\n        });\r\n\r\n        Keyboard.addListener(\"keyboardDidHide\", () => {\r\n            const imageTopVal = this.getFullHeight() - this.getImageHeight();\r\n            const heightVal = this.getFullHeight() - LOGIN_HEADER_WAVE_HEIGHT;\r\n\r\n            if (Platform.OS === \"web\") {\r\n                this.height.setValue(heightVal);\r\n                this.imageTop.setValue(imageTopVal);\r\n            } else {\r\n                const easing: ReAnimated.EasingFunction = Easing.cubic;\r\n                const duration = 100;\r\n                ReAnimated.timing(this.height, {\r\n                    toValue: heightVal,\r\n                    duration,\r\n                    easing,\r\n                }).start();\r\n                ReAnimated.timing(this.imageTop, {\r\n                    toValue: imageTopVal,\r\n                    duration,\r\n                    easing,\r\n                }).start();\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, isFirstLaunch} = this.props;\r\n\r\n        const styles = themedStyles(theme);\r\n        const Image = getLocalSvg(\"login-header\", () => this.forceUpdate());\r\n\r\n        return (\r\n            <View style={styles.wrapper}>\r\n                {!layout.isWideDevice && (\r\n                    <ReAnimated.View style={[styles.image, {top: this.imageTop}]}>\r\n                        <Image viewBox={`0 0 ${SVG_VIEWBOX_W} ${SVG_VIEWBOX_H}`} />\r\n                    </ReAnimated.View>\r\n                )}\r\n\r\n                <ReAnimated.View style={[styles.container, {height: this.height}]}>\r\n                    <TouchableOpacity style={styles.navigationButton} onPress={() => this.back()}>\r\n                        <MaterialIcons name=\"chevron-left\" style={styles.navigationIcon} />\r\n                    </TouchableOpacity>\r\n                    <Text style={styles.title}>\r\n                        {i18n.t(isFirstLaunch ? \"loginForm.titleFirstLaunch\" : \"loginForm.title\")}\r\n                    </Text>\r\n                </ReAnimated.View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\n/*\r\n<ReAnimated.View style={[styles.image, {top: this.imageTop}]}>\r\n    <Image viewBox={`0 0 ${SVG_VIEWBOX_W} ${SVG_VIEWBOX_H}`} />\r\n</ReAnimated.View>\r\n<ReAnimated.View style={[styles.container, {height: this.height}]}>\r\n    <TouchableOpacity style={styles.navigationButton} onPress={() => this.back()}>\r\n        <MaterialIcons name=\"chevron-left\" style={styles.navigationIcon} />\r\n    </TouchableOpacity>\r\n    <Text style={styles.title}>\r\n        {i18n.t(isFirstLaunch ? \"loginForm.titleFirstLaunch\" : \"loginForm.title\")}\r\n    </Text>\r\n</ReAnimated.View>\r\n*/\r\n\r\nexport const themedStyles = preTheme((theme: Theme, wideDevice: boolean) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            ...(wideDevice\r\n                ? {\r\n                      position: \"absolute\",\r\n                      top: 0,\r\n                      left: 0,\r\n                      width: \"50%\",\r\n                      height: \"100%\",\r\n                      backgroundColor: theme.accent,\r\n                      zIndex: 1,\r\n                  }\r\n                : {zIndex: 1}),\r\n        },\r\n        container: {\r\n            width: \"100%\",\r\n            padding: 40,\r\n            zIndex: 2,\r\n            overflow: \"hidden\",\r\n        },\r\n        navigationButton: {\r\n            width: 50,\r\n            marginLeft: -15,\r\n        },\r\n        navigationIcon: {\r\n            color: theme.textWhite,\r\n            fontSize: 50,\r\n        },\r\n        title: {\r\n            color: theme.textWhite,\r\n            fontSize: 38,\r\n            maxWidth: 210,\r\n            fontFamily: \"RalewaySemiBold\",\r\n        },\r\n        image: {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            width: Dimensions.get(\"window\").width,\r\n            aspectRatio: SVG_VIEWBOX_W / SVG_VIEWBOX_H,\r\n            zIndex: 1,\r\n        },\r\n    });\r\n});\r\n\r\nfunction LoginHeader(props: ConnectedProps<typeof reduxConnector>): JSX.Element {\r\n    const insets = useSafeAreaInsets();\r\n    return (\r\n        <ThemeConsumer>\r\n            {(themeProps: ThemeProps) => <LoginHeaderClass {...themeProps} insets={insets} {...props} />}\r\n        </ThemeConsumer>\r\n    );\r\n}\r\n\r\nexport default reduxConnector(LoginHeader);\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport LoginForm from \"../components/forms/LoginForm\";\r\nimport ForgotPasswordForm from \"../components/forms/ForgotPasswordForm\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {LoginScreens} from \"../navigation/types\";\r\nimport ScrollFormWrapper from \"../components/forms/ScrollFormWrapper\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport SignupForm from \"../components/forms/SignupForm\";\r\nimport {LOGIN_HEADER_WAVE_HEIGHT} from \"../components/headers/LoginHeader\";\r\nimport layout from \"../constants/layout\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\n\r\n// Sign-in\r\n\r\ntype TabSigninScreenProps = ThemeProps & StackScreenProps<LoginScreens, \"SigninScreen\">;\r\n\r\nclass SigninScreenClass extends React.Component<TabSigninScreenProps> {\r\n    render(): JSX.Element {\r\n        const wide = layout.isWideDevice;\r\n        const styles = themedStyles(this.props.theme);\r\n        const form = <LoginForm containerStyle={styles.formContainer} />;\r\n\r\n        return (\r\n            <ScreenWrapper wrapperStyle={styles.screenWrapper} containerStyle={styles.screenContainer}>\r\n                {wide && form}\r\n                {!wide && <ScrollFormWrapper notKeyboardReactive={true}>{form}</ScrollFormWrapper>}\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\n// Forgot password\r\n\r\ntype ForgotPasswordScreenProps = ThemeProps & StackScreenProps<LoginScreens, \"ForgotPasswordScreen\">;\r\n\r\nclass ForgotPasswordScreenClass extends React.Component<ForgotPasswordScreenProps> {\r\n    render(): JSX.Element {\r\n        const wide = layout.isWideDevice;\r\n        const styles = themedStyles(this.props.theme);\r\n        const form = <ForgotPasswordForm containerStyle={styles.formContainer} />;\r\n\r\n        return (\r\n            <ScreenWrapper wrapperStyle={styles.screenWrapper} containerStyle={styles.screenContainer}>\r\n                {wide && form}\r\n                {!wide && <ScrollFormWrapper notKeyboardReactive={true}>{form}</ScrollFormWrapper>}\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\n// Sign-up\r\n\r\ntype SignupScreenProps = ThemeProps;\r\n\r\nclass SignupScreenClass extends React.Component<SignupScreenProps> {\r\n    render(): JSX.Element {\r\n        const wide = layout.isWideDevice;\r\n        const styles = themedStyles(this.props.theme);\r\n        const form = <SignupForm containerStyle={styles.formContainer} />;\r\n\r\n        return (\r\n            <ScreenWrapper wrapperStyle={styles.screenWrapper} containerStyle={styles.screenContainer}>\r\n                {wide && form}\r\n                {!wide && <ScrollFormWrapper notKeyboardReactive={true}>{form}</ScrollFormWrapper>}\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme, wideDevice: boolean) => {\r\n    if (wideDevice) {\r\n        return StyleSheet.create({\r\n            screenWrapper: {\r\n                width: \"50%\",\r\n                height: \"100%\",\r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: \"50%\",\r\n            },\r\n            screenContainer: {\r\n                width: \"100%\",\r\n                justifyContent: \"center\",\r\n            },\r\n            formContainer: {\r\n                width: \"80%\",\r\n                maxWidth: 400,\r\n            },\r\n        });\r\n    } else {\r\n        return StyleSheet.create({\r\n            screenWrapper: {},\r\n            screenContainer: {},\r\n            formContainer: {\r\n                // Add top padding to the form so the top is below the header wave\r\n                paddingTop: LOGIN_HEADER_WAVE_HEIGHT,\r\n                width: \"80%\",\r\n                maxWidth: 400,\r\n            },\r\n        });\r\n    }\r\n});\r\n\r\nexport const SigninScreen = withTheme(SigninScreenClass);\r\nexport const ForgotPasswordScreen = withTheme(ForgotPasswordScreenClass);\r\nexport const SignupScreen = withTheme(SignupScreenClass);\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\n// Component props\r\nexport type SemiHighlightedTextProps = {\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    text: string;\r\n    fontSize?: number;\r\n} & ThemeProps;\r\n\r\nclass SemiHighlightedText extends React.Component<SemiHighlightedTextProps> {\r\n    render(): JSX.Element {\r\n        const {theme, text, containerStyle, textStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fontSize = this.props.fontSize || 24;\r\n        const underlineHeight = fontSize * 0.55;\r\n        const underlineBottom = -1;\r\n        const underlineSides = fontSize * 0.4;\r\n\r\n        return (\r\n            <View style={[styles.textContainer, containerStyle]}>\r\n                <View style={[styles.underline, {height: underlineHeight, bottom: underlineBottom}]} />\r\n                <Text style={[styles.text, textStyle, {fontSize, paddingHorizontal: underlineSides}]}>{text}</Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        textContainer: {\r\n            alignItems: \"center\",\r\n        },\r\n        text: {\r\n            fontFamily: \"RalewaySemiBold\",\r\n            color: theme.accent,\r\n            zIndex: 2,\r\n\r\n            // Make it more readable with the dark theme\r\n            ...(theme.id === \"dark\"\r\n                ? {\r\n                      textShadowColor: \"rgba(0, 0, 0, 0.6)\",\r\n                      textShadowOffset: {width: 0, height: 1},\r\n                      textShadowRadius: 1,\r\n                  }\r\n                : {}),\r\n        },\r\n        underline: {\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            backgroundColor: theme.accentTernary,\r\n            zIndex: 1,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SemiHighlightedText);\r\n","import * as React from \"react\";\r\nimport {ImageProps, Image} from \"react-native\";\r\nimport {getLocalImage} from \"../assets\";\r\n\r\n// Component props\r\nexport type LocalImageProps = Partial<ImageProps> & {imageKey: string};\r\n\r\nclass LocalImage extends React.Component<LocalImageProps> {\r\n    render(): JSX.Element {\r\n        const {imageKey, ...otherProps} = this.props;\r\n        const img = getLocalImage(imageKey, () => this.forceUpdate());\r\n        return img ? <Image source={img} {...otherProps} /> : <></>;\r\n    }\r\n}\r\n\r\nexport default LocalImage;\r\n","import React from \"react\";\r\nimport {Linking, StyleProp, TouchableOpacity, TouchableOpacityProps, ViewStyle} from \"react-native\";\r\nimport {getLocalSvg} from \"../assets\";\r\nimport LocalImage from \"./LocalImage\";\r\n\r\ntype MobileStoreButtonProps = {\r\n    url: string;\r\n    store: \"ios\" | \"android\";\r\n    scale?: number;\r\n    width?: number;\r\n    linkStyle?: StyleProp<ViewStyle>;\r\n    linkProps?: TouchableOpacityProps;\r\n};\r\n\r\nconst DEFAULT_WIDTH = 204;\r\nconst DEFAULT_HEIGHT = 60;\r\n\r\nclass MobileStoreButton extends React.Component<MobileStoreButtonProps> {\r\n    render(): JSX.Element {\r\n        const {store, url, linkStyle, linkProps} = this.props;\r\n\r\n        const Svg = store === \"ios\" ? getLocalSvg(\"store-button.ios\", () => this.forceUpdate()) : null;\r\n        const scale = this.props.scale === undefined ? 1 : this.props.scale;\r\n        const width = this.props.width === undefined ? DEFAULT_WIDTH * scale : this.props.width * scale;\r\n        const height = (width * DEFAULT_HEIGHT) / DEFAULT_WIDTH;\r\n\r\n        return (\r\n            <TouchableOpacity\r\n                style={[\r\n                    {\r\n                        overflow: \"hidden\",\r\n                        height,\r\n                        width,\r\n                        margin: 10,\r\n                    },\r\n                    linkProps ? linkProps.style : {},\r\n                    linkStyle,\r\n                ]}\r\n                activeOpacity={0.7}\r\n                onPress={() => {\r\n                    Linking.openURL(url);\r\n                }}\r\n                {...linkProps}\r\n            >\r\n                {store === \"android\" && (\r\n                    <LocalImage imageKey=\"store-button.android\" style={{width: \"100%\", height: \"100%\"}} />\r\n                )}\r\n                {store === \"ios\" && Svg && <Svg viewBox=\"0 0 133 40\" width={width} height={height} fill=\"black\" />}\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MobileStoreButton;\r\n","import * as React from \"react\";\r\nimport {Dimensions, Platform, StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport SemiHighlightedText from \"../components/SemiHighlightedText\";\r\nimport {getLocalSvg} from \"../assets\";\r\nimport Button from \"../components/Button\";\r\nimport MobileStoreButton from \"../components/MobileStoreButton\";\r\n\r\nexport type WelcomeScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass WelcomeScreen extends React.Component<WelcomeScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const WelcomeImage = getLocalSvg(\"welcome\", () => this.forceUpdate());\r\n        const storeButtonWidth = Math.min(Dimensions.get(\"window\").width * 0.4, 200);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <View style={styles.imageAndTextContainer}>\r\n                        <View style={styles.imageContainer}>\r\n                            <WelcomeImage />\r\n                        </View>\r\n                        <View style={styles.textContainer}>\r\n                            <SemiHighlightedText text={i18n.t(\"appName\")} fontSize={32} textStyle={styles.appName} />\r\n                            <Text style={styles.subtitle}>{i18n.t(\"welcomeScreen.subtitle\")}</Text>\r\n                        </View>\r\n                    </View>\r\n                    {Platform.OS === \"web\" && (\r\n                        <View style={styles.mobileStoresContainer}>\r\n                            <MobileStoreButton\r\n                                store=\"android\"\r\n                                url=\"https://play.google.com/store/apps/details?id=com.sea_eu.around\"\r\n                                width={storeButtonWidth}\r\n                            />\r\n                            <MobileStoreButton\r\n                                store=\"ios\"\r\n                                url=\"https://apps.apple.com/fr/app/sea-eu-around/id1543605955\"\r\n                                width={storeButtonWidth}\r\n                            />\r\n                        </View>\r\n                    )}\r\n                    <View style={styles.actionsContainer}>\r\n                        <Button\r\n                            text={i18n.t(\"welcomeScreen.signIn\")}\r\n                            onPress={() => {\r\n                                rootNavigate(\"LoginRoot\", {\r\n                                    screen: \"LoginScreens\",\r\n                                    params: {screen: \"SigninScreen\"},\r\n                                });\r\n                            }}\r\n                            skin=\"rounded-filled\"\r\n                        />\r\n                        <Button\r\n                            text={i18n.t(\"welcomeScreen.signUp\")}\r\n                            onPress={() => {\r\n                                rootNavigate(\"LoginRoot\", {\r\n                                    screen: \"LoginScreens\",\r\n                                    params: {screen: \"SignupScreen\"},\r\n                                });\r\n                            }}\r\n                            skin=\"rounded-hollow\"\r\n                        />\r\n                    </View>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"85%\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n        },\r\n        imageAndTextContainer: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        imageContainer: {\r\n            width: \"100%\",\r\n            height: 300,\r\n        },\r\n        textContainer: {\r\n            marginVertical: 20,\r\n        },\r\n        appName: {\r\n            color: theme.accent,\r\n            fontFamily: \"RalewayBold\",\r\n        },\r\n        subtitle: {\r\n            color: theme.accent,\r\n            fontFamily: \"RalewaySemiBold\",\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n            alignSelf: \"center\",\r\n            maxWidth: 250,\r\n            marginTop: 10,\r\n        },\r\n\r\n        mobileStoresContainer: {\r\n            flexDirection: \"row\",\r\n            marginVertical: 20,\r\n        },\r\n\r\n        actionsContainer: {\r\n            width: \"100%\",\r\n            marginBottom: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(WelcomeScreen);\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {TouchableOpacity, Platform} from \"react-native\";\r\nimport {BottomSheet, ListItem, withTheme} from \"react-native-elements\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {beginOnboarding, debugConnect} from \"../state/auth/actions\";\r\nimport store from \"../state/store\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {ThemeProps} from \"../types\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\ntype DebugMenuProps = ThemeProps;\r\ntype DebugMenuState = {visible: boolean};\r\n\r\nclass DebugMenu extends React.Component<DebugMenuProps, DebugMenuState> {\r\n    ACTIONS = [\r\n        {\r\n            title: \"Access MainScreen\",\r\n            onPress: () => {\r\n                rootNavigate(\"MainScreen\");\r\n                this.hide();\r\n            },\r\n        },\r\n        {\r\n            title: \"Access OnBoardingScreen\",\r\n            onPress: () => {\r\n                store.dispatch(beginOnboarding());\r\n                this.hide();\r\n            },\r\n        },\r\n        {\r\n            title: \"Automatically create profile\",\r\n            onPress: () => {\r\n                (store.dispatch as MyThunkDispatch)(debugConnect());\r\n                this.hide();\r\n            },\r\n        },\r\n        {\r\n            title: \"Hide\",\r\n            containerStyle: {backgroundColor: \"red\"},\r\n            titleStyle: {color: \"white\"},\r\n            onPress: () => this.hide(),\r\n        },\r\n    ];\r\n\r\n    constructor(props: DebugMenuProps) {\r\n        super(props);\r\n        this.state = {visible: false};\r\n    }\r\n\r\n    show() {\r\n        this.setState({...this.state, visible: true});\r\n    }\r\n\r\n    hide() {\r\n        this.setState({...this.state, visible: false});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const {visible} = this.state;\r\n\r\n        const debugContent = (\r\n            <>\r\n                <ListItem>\r\n                    <ListItem.Content>\r\n                        <ListItem.Title style={{fontSize: 26, marginBottom: 10, color: theme.textBlack}}>\r\n                            Debug Menu\r\n                        </ListItem.Title>\r\n                    </ListItem.Content>\r\n                </ListItem>\r\n                {this.ACTIONS.map((l, i) => (\r\n                    <ListItem key={`debug-action-${i}`} containerStyle={l.containerStyle} onPress={l.onPress}>\r\n                        <ListItem.Content>\r\n                            <ListItem.Title style={l.titleStyle}>{l.title}</ListItem.Title>\r\n                        </ListItem.Content>\r\n                    </ListItem>\r\n                ))}\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <TouchableOpacity\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        bottom: 10,\r\n                        right: 10,\r\n                        width: 36,\r\n                        height: 36,\r\n                        backgroundColor: theme.error,\r\n                        borderRadius: 20,\r\n                        justifyContent: \"center\",\r\n                        alignItems: \"center\",\r\n                    }}\r\n                    onPress={() => this.show()}\r\n                >\r\n                    <FontAwesome name=\"gear\" color=\"white\" style={{fontSize: 26}} />\r\n                </TouchableOpacity>\r\n                {Platform.OS !== \"web\" && (\r\n                    <BottomSheet modalProps={{statusBarTranslucent: true}} isVisible={visible}>\r\n                        {debugContent}\r\n                    </BottomSheet>\r\n                )}\r\n                {Platform.OS === \"web\" && (\r\n                    <CustomModal visible={visible} onHide={() => this.hide()} renderContent={() => debugContent} />\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(DebugMenu);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {APP_VERSION} from \"../constants/config\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type VersionInfoProps = ThemeProps;\r\n\r\nfunction VersionInfo(props: VersionInfoProps): JSX.Element {\r\n    const {theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    return (\r\n        <View style={styles.versionInfoContainer}>\r\n            <Text style={styles.versionText}>{APP_VERSION} </Text>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        versionInfoContainer: {\r\n            position: \"absolute\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            bottom: 5,\r\n            left: 5,\r\n        },\r\n        versionText: {color: theme.textLight, fontSize: 12},\r\n        versionDisclaimerIcon: {color: theme.error, fontSize: 13},\r\n    });\r\n});\r\n\r\nexport default withTheme(VersionInfo);\r\n","/* eslint-disable react/display-name */\r\nimport * as React from \"react\";\r\nimport {createMaterialTopTabNavigator} from \"@react-navigation/material-top-tabs\";\r\nimport {SigninScreen, SignupScreen, ForgotPasswordScreen} from \"../screens/LoginScreens\";\r\nimport {LoginRoot, LoginScreens} from \"./types\";\r\nimport {screenTitle} from \"./utils\";\r\nimport WelcomeScreen from \"../screens/WelcomeScreen\";\r\nimport LoginHeader from \"../components/headers/LoginHeader\";\r\nimport DebugMenu from \"../components/DebugMenu\";\r\nimport {DEBUG_MODE} from \"../constants/config\";\r\nimport VersionInfo from \"../components/VersionInfo\";\r\n\r\nconst SigninRoot = createMaterialTopTabNavigator<LoginScreens>();\r\nconst Tab = createMaterialTopTabNavigator<LoginRoot>();\r\n\r\nconst LoginNavigator = (): JSX.Element => (\r\n    <Tab.Navigator swipeEnabled={false} tabBar={() => <></>}>\r\n        <Tab.Screen name=\"WelcomeScreen\" component={WelcomeScreen} options={{title: screenTitle(\"WelcomeScreen\")}} />\r\n        <Tab.Screen name=\"LoginScreens\">\r\n            {() => (\r\n                <>\r\n                    <LoginHeader />\r\n\r\n                    <SigninRoot.Navigator tabBar={() => <></>} initialRouteName=\"SigninScreen\" swipeEnabled={false}>\r\n                        <SigninRoot.Screen\r\n                            name=\"ForgotPasswordScreen\"\r\n                            component={ForgotPasswordScreen}\r\n                            options={{\r\n                                title: screenTitle(\"ForgotPasswordScreen\"),\r\n                            }}\r\n                        />\r\n                        <SigninRoot.Screen\r\n                            name=\"SigninScreen\"\r\n                            component={SigninScreen}\r\n                            options={{title: screenTitle(\"SigninScreen\")}}\r\n                        />\r\n                        <SigninRoot.Screen\r\n                            name=\"SignupScreen\"\r\n                            component={SignupScreen}\r\n                            options={{title: screenTitle(\"SignupScreen\")}}\r\n                        />\r\n                    </SigninRoot.Navigator>\r\n\r\n                    <VersionInfo />\r\n                    {DEBUG_MODE && <DebugMenu />}\r\n                </>\r\n            )}\r\n        </Tab.Screen>\r\n    </Tab.Navigator>\r\n);\r\n\r\nexport default LoginNavigator;\r\n","import * as React from \"react\";\r\nimport {\r\n    TouchableOpacity,\r\n    View,\r\n    ViewStyle,\r\n    StyleSheet,\r\n    Platform,\r\n    StyleProp,\r\n    Dimensions,\r\n    Text,\r\n    ViewProps,\r\n} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport Swipeable, {SwipeableProperties} from \"react-native-gesture-handler/Swipeable\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\n\r\n// Theses style elements are defined this way because they have to be set in very specific ways\r\ntype SwipeableLooks = {\r\n    sideMargin: number;\r\n    borderRadius: number;\r\n    verticalSpacing: number;\r\n    minHeight: number;\r\n};\r\n\r\nconst DEFAULT_LOOKS: SwipeableLooks = {\r\n    sideMargin: 15,\r\n    borderRadius: 10,\r\n    verticalSpacing: 8,\r\n    minHeight: 150,\r\n};\r\n\r\n// Component props\r\nexport type SwipeableCardProps = ThemeProps &\r\n    SwipeableProperties & {\r\n        style?: ViewStyle;\r\n        onHidden?: () => void;\r\n        onPress?: () => void;\r\n        looks?: Partial<SwipeableLooks>;\r\n        leftActions?: (hideCard: (noAnimation?: boolean) => void) => JSX.Element;\r\n        rightActions?: (hideCard: (noAnimation?: boolean) => void) => JSX.Element;\r\n        wrapperProps?: ViewProps;\r\n    };\r\n\r\n// Component state\r\nexport type SwipeableCardState = {\r\n    minHeight: ReAnimated.Value<number>;\r\n    right: ReAnimated.Value<number>;\r\n    hidden: boolean;\r\n};\r\n\r\nexport class SwipeableCardClass extends React.Component<SwipeableCardProps, SwipeableCardState> {\r\n    swipeableRef = React.createRef<Swipeable>();\r\n\r\n    constructor(props: SwipeableCardProps) {\r\n        super(props);\r\n\r\n        const {minHeight} = {...DEFAULT_LOOKS, ...props.looks};\r\n\r\n        this.state = {\r\n            minHeight: new ReAnimated.Value(minHeight),\r\n            right: new ReAnimated.Value(0),\r\n            hidden: false,\r\n        };\r\n    }\r\n\r\n    hide(): void {\r\n        this.setState({...this.state, hidden: true});\r\n        if (this.props.onHidden) this.props.onHidden();\r\n    }\r\n\r\n    collapse(onFinish?: () => void, right?: boolean): void {\r\n        const duration = 200;\r\n        ReAnimated.timing(this.state.right, {\r\n            toValue: (right ? -1 : 1) * Dimensions.get(\"window\").width * 1.5,\r\n            duration,\r\n            easing: Easing.ease,\r\n        }).start();\r\n        setTimeout(() => {\r\n            if (onFinish) onFinish();\r\n            this.hide();\r\n        }, duration);\r\n    }\r\n\r\n    resetSwipe(): void {\r\n        this.swipeableRef.current?.close();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            children,\r\n            leftActions,\r\n            rightActions,\r\n            style,\r\n            looks,\r\n            onPress,\r\n            wrapperProps,\r\n            ...swipeableProps\r\n        } = this.props;\r\n        const {minHeight, right, hidden} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const {borderRadius, sideMargin, verticalSpacing} = {...DEFAULT_LOOKS, ...looks};\r\n        const hideCard = (noAnimation?: boolean) => {\r\n            if (noAnimation) this.hide();\r\n            else this.collapse();\r\n        };\r\n\r\n        const container = (\r\n            <Swipeable\r\n                ref={this.swipeableRef}\r\n                containerStyle={[\r\n                    styles.swipeableContainer,\r\n                    {paddingHorizontal: sideMargin, paddingVertical: verticalSpacing},\r\n                ]}\r\n                childrenContainerStyle={[styles.swipeable, {borderRadius}]}\r\n                useNativeAnimations={Platform.OS !== \"web\"}\r\n                friction={1}\r\n                renderLeftActions={leftActions ? () => leftActions(hideCard) : swipeableProps.renderLeftActions}\r\n                renderRightActions={rightActions ? () => rightActions(hideCard) : swipeableProps.renderRightActions}\r\n                {...swipeableProps}\r\n            >\r\n                <TouchableOpacity activeOpacity={0.75} style={styles.touchable} {...(onPress ? {onPress} : {})}>\r\n                    {children}\r\n                </TouchableOpacity>\r\n            </Swipeable>\r\n        );\r\n\r\n        if (Platform.OS === \"web\") {\r\n            return (\r\n                // Use flexBasis, acting as minHeight\r\n                <View\r\n                    style={[\r\n                        styles.wrapper,\r\n                        style,\r\n                        {flexBasis: minHeight[\" __value\"], right: right[\" __value\"]},\r\n                        hidden ? {display: \"none\"} : {},\r\n                    ]}\r\n                    {...wrapperProps}\r\n                >\r\n                    {container}\r\n                </View>\r\n            );\r\n        } else {\r\n            return (\r\n                // Use flexBasis, acting as minHeight\r\n                <ReAnimated.View\r\n                    style={[styles.wrapper, style, {flexBasis: minHeight, right}, hidden ? {display: \"none\"} : {}]}\r\n                    {...wrapperProps}\r\n                >\r\n                    {container}\r\n                </ReAnimated.View>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport type SwipeActionProps = {\r\n    icon?: string;\r\n    text?: string;\r\n    backgroundColor?: string;\r\n    color?: string;\r\n    onPress?: () => void;\r\n    style?: StyleProp<ViewStyle>;\r\n};\r\n\r\nconst oneSidedBorderRadius = (side: \"left\" | \"right\", borderRadius: number) => {\r\n    return side === \"left\"\r\n        ? {borderTopLeftRadius: borderRadius, borderBottomLeftRadius: borderRadius}\r\n        : {borderTopRightRadius: borderRadius, borderBottomRightRadius: borderRadius};\r\n};\r\n\r\nconst SwipeActionButton = withTheme(\r\n    (props: SwipeActionProps & ThemeProps): JSX.Element => {\r\n        const {icon, text, backgroundColor, onPress, style, theme} = props;\r\n        const styles = buttonStyles(theme);\r\n        const color = props.color || theme.textWhite;\r\n\r\n        return (\r\n            <TouchableOpacity onPress={onPress} style={[styles.swipeActionButton, {backgroundColor}, style]}>\r\n                {icon && <MaterialIcons style={[styles.swipeActionButtonIcon, {color}]} name={icon} />}\r\n                {text && <Text style={[styles.swipeActionButtonText, {color}]}>{text}</Text>}\r\n            </TouchableOpacity>\r\n        );\r\n    },\r\n);\r\n\r\ntype SwipeActionsProps = ThemeProps & {\r\n    id: string;\r\n    side: \"left\" | \"right\";\r\n    actions: SwipeActionProps[];\r\n    looks?: Partial<SwipeableLooks>;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n};\r\n\r\nexport const SwipeActionButtons = withTheme(\r\n    (props: React.PropsWithChildren<SwipeActionsProps>): JSX.Element => {\r\n        const {id, actions, side, looks, buttonStyle} = props;\r\n\r\n        const {borderRadius} = {...DEFAULT_LOOKS, ...looks};\r\n\r\n        return (\r\n            <SwipeActionContainer side={side} looks={looks} contentStyle={{aspectRatio: actions.length}}>\r\n                {actions.map((properties: SwipeActionProps, i: number) => {\r\n                    const first = i === 0;\r\n                    const last = i === actions.length - 1;\r\n                    const isExteriorButton = (first && side === \"left\") || (last && side === \"right\");\r\n                    const isInteriorButton = (first && side === \"right\") || (last && side === \"left\");\r\n                    const {backgroundColor} = properties;\r\n\r\n                    // Add a small view to fill the empty area created by the card's border radius\r\n                    const interiorFiller = isInteriorButton ? (\r\n                        <View\r\n                            style={{\r\n                                width: borderRadius,\r\n                                height: \"100%\",\r\n                                position: \"absolute\",\r\n                                top: 0,\r\n                                ...(side === \"left\" ? {right: -borderRadius} : {left: -borderRadius}),\r\n                                backgroundColor,\r\n                            }}\r\n                        />\r\n                    ) : undefined;\r\n\r\n                    return (\r\n                        <React.Fragment key={`swipe-actions-${id}-${side}-${i}`}>\r\n                            {isInteriorButton && interiorFiller}\r\n                            <SwipeActionButton\r\n                                style={[isExteriorButton ? oneSidedBorderRadius(side, borderRadius) : {}, buttonStyle]}\r\n                                {...properties}\r\n                            />\r\n                        </React.Fragment>\r\n                    );\r\n                })}\r\n            </SwipeActionContainer>\r\n        );\r\n    },\r\n);\r\n\r\ntype SwipeActionContainerProps = ThemeProps & {\r\n    side: \"left\" | \"right\";\r\n    looks?: Partial<SwipeableLooks>;\r\n    contentStyle?: StyleProp<ViewStyle>;\r\n    fullCardWidth?: boolean;\r\n};\r\n\r\nexport const SwipeActionContainer = withTheme(\r\n    (props: React.PropsWithChildren<SwipeActionContainerProps>): JSX.Element => {\r\n        const {side, looks, fullCardWidth, contentStyle, theme} = props;\r\n        const styles = buttonStyles(theme);\r\n\r\n        const {borderRadius, sideMargin, verticalSpacing} = {...DEFAULT_LOOKS, ...looks};\r\n\r\n        return (\r\n            <View\r\n                style={[\r\n                    styles.swipeActionsContainer,\r\n                    {paddingVertical: verticalSpacing},\r\n                    side === \"left\"\r\n                        ? {\r\n                              marginLeft: sideMargin,\r\n                              marginRight: -sideMargin,\r\n                              justifyContent: \"flex-start\",\r\n                          }\r\n                        : {\r\n                              marginLeft: -sideMargin,\r\n                              marginRight: sideMargin,\r\n                              justifyContent: \"flex-end\",\r\n                          },\r\n                    fullCardWidth\r\n                        ? {\r\n                              width: \"100%\",\r\n                              marginHorizontal: sideMargin,\r\n                              ...(side === \"left\" ? {paddingRight: sideMargin * 2} : {paddingLeft: sideMargin * 2}),\r\n                          }\r\n                        : {},\r\n                ]}\r\n            >\r\n                <View\r\n                    style={[\r\n                        styles.swipeActionsContent,\r\n                        fullCardWidth ? {borderRadius} : oneSidedBorderRadius(side, borderRadius),\r\n                        contentStyle,\r\n                    ]}\r\n                >\r\n                    {props.children}\r\n                </View>\r\n            </View>\r\n        );\r\n    },\r\n);\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            width: \"100%\",\r\n            overflow: \"hidden\",\r\n        },\r\n        swipeableContainer: {\r\n            width: \"100%\",\r\n        },\r\n        swipeable: {\r\n            width: \"100%\",\r\n            overflow: \"hidden\",\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        touchable: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            overflow: \"hidden\",\r\n        },\r\n    });\r\n});\r\n\r\nconst buttonStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        swipeActionsContainer: {\r\n            height: \"100%\",\r\n        },\r\n        swipeActionsContent: {\r\n            justifyContent: \"flex-start\",\r\n            flexDirection: \"row\",\r\n            height: \"100%\",\r\n        },\r\n        swipeActionButton: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            aspectRatio: 1,\r\n        },\r\n        swipeActionButtonIcon: {\r\n            fontSize: 22,\r\n        },\r\n        swipeActionButtonText: {\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n        },\r\n        swipeActionText: {\r\n            fontSize: 24,\r\n            letterSpacing: 2,\r\n            ...styleTextThin,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SwipeableCardClass);\r\n","import {Theme} from \"../types\";\r\nimport {StyleSheet, TextStyle, ViewStyle} from \"react-native\";\r\nimport {preTheme} from \"./utils\";\r\nimport {ONBOARDING_INPUT_BORDER_RADIUS} from \"./onboarding\";\r\n\r\nexport type PickerButtonStyleVariant = \"classic\" | \"onboarding\";\r\n\r\nexport const pickerStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        overlay: {\r\n            width: \"90%\",\r\n            maxHeight: \"70%\",\r\n            overflow: \"hidden\",\r\n            paddingHorizontal: 0,\r\n            paddingVertical: 0,\r\n        },\r\n        dropdownWrapper: {\r\n            width: \"100%\",\r\n            flex: 1,\r\n        },\r\n        dropdownStyle: {backgroundColor: \"#fafafa\", height: \"100%\"},\r\n        dropdownItemStyle: {justifyContent: \"flex-start\"} as ViewStyle,\r\n        dropdownActiveItemStyle: {},\r\n        dropdownActiveLabelStyle: {color: theme.accentSecondary},\r\n        dropdownLabelStyle: {fontSize: 16},\r\n        okButton: {\r\n            width: \"100%\",\r\n            height: 50,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            borderRadius: 4,\r\n            backgroundColor: theme.accent,\r\n        },\r\n        okButtonText: {\r\n            fontSize: 20,\r\n            color: theme.textWhite,\r\n        },\r\n        chipContainer: {\r\n            marginTop: 10,\r\n        },\r\n    });\r\n});\r\n\r\nexport function getPickerButtonStyleProps(\r\n    variant: PickerButtonStyleVariant = \"classic\",\r\n    theme: Theme,\r\n): {button: ViewStyle; text: TextStyle; textNoneSelected: TextStyle} {\r\n    if (variant === \"onboarding\") {\r\n        return {\r\n            button: {\r\n                width: \"100%\",\r\n                height: 48,\r\n                alignItems: \"flex-start\",\r\n                justifyContent: \"center\",\r\n                paddingVertical: 10,\r\n                paddingHorizontal: 20,\r\n                borderRadius: ONBOARDING_INPUT_BORDER_RADIUS,\r\n                backgroundColor: theme.onboardingInputBackground,\r\n            },\r\n            text: {\r\n                fontSize: 14,\r\n                color: theme.text,\r\n            },\r\n            textNoneSelected: {\r\n                color: theme.textLight,\r\n            },\r\n        };\r\n    } else {\r\n        return {\r\n            button: {\r\n                width: \"100%\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                paddingVertical: 10,\r\n                paddingHorizontal: 20,\r\n                borderWidth: 1,\r\n                borderRadius: 2,\r\n                backgroundColor: theme.background,\r\n                borderColor: theme.componentBorder,\r\n            },\r\n            text: {\r\n                fontSize: 14,\r\n                color: theme.text,\r\n            },\r\n            textNoneSelected: {},\r\n        };\r\n    }\r\n}\r\n","export enum ReportType {\r\n    VIOLENCE = \"violence\",\r\n    NUDITY = \"nudity\",\r\n    HARASSMENT = \"harassment\",\r\n    UNDESIRABLE_CONTENT = \"undesirable-content\",\r\n    HATE_SPEECH = \"hate-speech\",\r\n    VULGAR_CONTENT = \"vulgar-content\",\r\n    OTHER = \"other\",\r\n}\r\n\r\nexport const REPORT_TYPES = [\r\n    ReportType.VIOLENCE,\r\n    ReportType.NUDITY,\r\n    ReportType.HARASSMENT,\r\n    ReportType.UNDESIRABLE_CONTENT,\r\n    ReportType.HATE_SPEECH,\r\n    ReportType.VULGAR_CONTENT,\r\n    ReportType.OTHER,\r\n];\r\n\r\nexport enum ReportEntityType {\r\n    PROFILE_ENTITY = \"ProfileEntity\",\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, ScrollView, TouchableOpacity, TextStyle, ViewStyle, StyleProp} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport CustomModal, {CustomModalClass} from \"./modals/CustomModal\";\r\nimport {getPickerButtonStyleProps, PickerButtonStyleVariant, pickerStyles} from \"../styles/picker\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type PopUpSelectorProps = ThemeProps & {\r\n    values: string[];\r\n    selected: string[];\r\n    label: (value: string, i: number) => string;\r\n    icon?: (value: string, i: number) => JSX.Element;\r\n    onSelect?: (selected: string[]) => void;\r\n    multiple?: boolean;\r\n    atLeastOne?: boolean;\r\n    noOkUnderline?: boolean;\r\n    placeholder?: string;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    valueStyle?: StyleProp<TextStyle>;\r\n    buttonStyleVariant?: PickerButtonStyleVariant;\r\n};\r\n\r\n// Component state\r\nexport type PopUpSelectorState = {\r\n    valueDict: {[key: string]: boolean};\r\n};\r\n\r\nclass PopUpSelector extends React.Component<PopUpSelectorProps, PopUpSelectorState> {\r\n    modalRef = React.createRef<CustomModalClass>();\r\n\r\n    constructor(props: PopUpSelectorProps) {\r\n        super(props);\r\n        this.state = {valueDict: {}};\r\n    }\r\n\r\n    private fromSelectedProp() {\r\n        const valueDict: {[key: string]: boolean} = {};\r\n        this.props.selected.forEach((v) => (valueDict[v] = true));\r\n        this.setState({...this.state, valueDict});\r\n    }\r\n\r\n    show(): void {\r\n        this.fromSelectedProp();\r\n        this.modalRef.current?.show();\r\n    }\r\n\r\n    hide(apply: boolean): void {\r\n        this.modalRef.current?.hide();\r\n        if (apply) this.apply();\r\n        else this.fromSelectedProp();\r\n    }\r\n\r\n    toggleValue(v: string) {\r\n        const dict = this.state.valueDict;\r\n        const newValue = !dict[v];\r\n\r\n        if (this.props.multiple) {\r\n            this.setState({...this.state, valueDict: {...dict, [v]: newValue}});\r\n        } else {\r\n            this.setState({...this.state, valueDict: {[v]: newValue}}, () => {\r\n                if (newValue) this.hide(true);\r\n            });\r\n        }\r\n    }\r\n\r\n    apply(): void {\r\n        const {onSelect} = this.props;\r\n        const valueDict = this.state.valueDict;\r\n        if (onSelect) {\r\n            const selected = Object.keys(valueDict).filter((val: string) => valueDict[val]);\r\n            onSelect(selected);\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            values,\r\n            selected,\r\n            label,\r\n            icon,\r\n            multiple,\r\n            atLeastOne,\r\n            noOkUnderline,\r\n            placeholder,\r\n            buttonStyle,\r\n            valueStyle,\r\n            buttonStyleVariant,\r\n            theme,\r\n        } = this.props;\r\n        const {valueDict} = this.state;\r\n        const styles = themedStyles(theme);\r\n        const pstyles = pickerStyles(theme);\r\n        const buttonStyleProps = getPickerButtonStyleProps(buttonStyleVariant, theme);\r\n\r\n        return (\r\n            <>\r\n                <TouchableOpacity\r\n                    style={[\r\n                        buttonStyleProps.button,\r\n                        selected.length > 0 && !noOkUnderline ? styles.buttonOk : {},\r\n                        buttonStyle,\r\n                    ]}\r\n                    onPress={() => this.show()}\r\n                >\r\n                    {selected.length === 0 && (\r\n                        <Text\r\n                            style={[buttonStyleProps.text, buttonStyleProps.textNoneSelected, valueStyle]}\r\n                            numberOfLines={2}\r\n                        >\r\n                            {placeholder}\r\n                        </Text>\r\n                    )}\r\n                    {selected.length > 0 && (\r\n                        <Text style={[buttonStyleProps.text, valueStyle]} numberOfLines={2}>\r\n                            {selected.map(label).join(\", \")}\r\n                        </Text>\r\n                    )}\r\n                </TouchableOpacity>\r\n                <CustomModal\r\n                    ref={this.modalRef}\r\n                    modalViewStyle={{width: \"100%\", paddingHorizontal: 0, paddingVertical: 0}}\r\n                    renderContent={() => (\r\n                        <>\r\n                            <ScrollView style={styles.scroll} contentContainerStyle={styles.scrollContent}>\r\n                                {values.map((v: string, index: number) => (\r\n                                    <TouchableOpacity\r\n                                        key={`popup-selector-row-${v}`}\r\n                                        style={styles.rowContainer}\r\n                                        onPress={() => this.toggleValue(v)}\r\n                                        activeOpacity={0.5}\r\n                                    >\r\n                                        {icon && icon(v, index)}\r\n                                        <Text style={styles.label}>{label(v, index)}</Text>\r\n                                        <CheckBox\r\n                                            checked={valueDict[v]}\r\n                                            containerStyle={styles.checkboxContainer}\r\n                                            wrapperStyle={styles.checkboxWrapper}\r\n                                            onPress={() => this.toggleValue(v)}\r\n                                            size={26}\r\n                                            {...(multiple\r\n                                                ? {}\r\n                                                : {checkedIcon: \"check-circle\", uncheckedIcon: \"circle-o\"})}\r\n                                        />\r\n                                    </TouchableOpacity>\r\n                                ))}\r\n                            </ScrollView>\r\n                            {multiple && (!atLeastOne || Object.values(valueDict).some((v) => v === true)) && (\r\n                                <TouchableOpacity\r\n                                    onPress={() => this.hide(true)}\r\n                                    style={[pstyles.okButton, {width: \"100%\"}]}\r\n                                >\r\n                                    <Text style={pstyles.okButtonText}>{i18n.t(\"ok\")}</Text>\r\n                                </TouchableOpacity>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            height: 40,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n            backgroundColor: \"transparent\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"flex-end\",\r\n        },\r\n        buttonOk: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        scroll: {\r\n            width: \"100%\",\r\n        },\r\n        scrollContent: {\r\n            paddingHorizontal: 15,\r\n            paddingVertical: 10,\r\n        },\r\n        rowContainer: {\r\n            flexDirection: \"row\",\r\n            width: \"100%\",\r\n            paddingVertical: 2,\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n        },\r\n        label: {\r\n            color: theme.text,\r\n            fontSize: 16,\r\n            flexGrow: 1,\r\n        },\r\n        checkboxContainer: {\r\n            padding: 0,\r\n            marginRight: 0,\r\n        },\r\n        checkboxWrapper: {\r\n            padding: 0,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(PopUpSelector);\r\n","import {AppThunk} from \"../types\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {ReportEntityType, ReportType} from \"../../constants/reports\";\r\n\r\nexport enum REPORT_ACTION_TYPES {\r\n    REPORT_ENTITY_SUCCESS = \"REPORTS/REPORT_ENTITY_SUCCESS\",\r\n    REPORT_ENTITY_FAILURE = \"REPORTS/REPORT_ENTITY_FAILURE\",\r\n}\r\n\r\nexport type ReportEntitySuccessAction = {\r\n    type: string;\r\n    reportType: ReportType;\r\n    entityType: ReportEntityType;\r\n    entityId: string;\r\n};\r\n\r\nexport type ReportEntityFailureAction = {\r\n    type: string;\r\n    reportType: ReportType;\r\n    entityType: ReportEntityType;\r\n    entityId: string;\r\n};\r\n\r\nexport type ReportAction = ReportEntitySuccessAction | ReportEntityFailureAction;\r\n\r\nconst reportEntitySuccess = (\r\n    reportType: ReportType,\r\n    entityType: ReportEntityType,\r\n    entityId: string,\r\n): ReportEntitySuccessAction => ({\r\n    type: REPORT_ACTION_TYPES.REPORT_ENTITY_SUCCESS,\r\n    reportType,\r\n    entityType,\r\n    entityId,\r\n});\r\n\r\nconst reportEntityFailure = (\r\n    reportType: ReportType,\r\n    entityType: ReportEntityType,\r\n    entityId: string,\r\n): ReportEntityFailureAction => ({\r\n    type: REPORT_ACTION_TYPES.REPORT_ENTITY_FAILURE,\r\n    reportType,\r\n    entityType,\r\n    entityId,\r\n});\r\n\r\nexport const reportEntity = (\r\n    type: ReportType,\r\n    entityType: ReportEntityType,\r\n    entityId: string,\r\n): AppThunk<Promise<boolean>> => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"reports\", \"POST\", {}, {type, entityType, entityId}, token, true);\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        dispatch(reportEntitySuccess(type, entityType, entityId));\r\n        return true;\r\n    } else {\r\n        dispatch(reportEntityFailure(type, entityType, entityId));\r\n        return false;\r\n    }\r\n};\r\n","import React from \"react\";\r\nimport {View, StyleSheet, Platform, Text} from \"react-native\";\r\nimport {BottomSheet, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport CustomModal from \"../modals/CustomModal\";\r\nimport i18n from \"i18n-js\";\r\nimport FormSubmitButton from \"../forms/FormSubmitButton\";\r\nimport {Icon} from \"expo\";\r\nimport Button from \"../Button\";\r\n\r\nexport type QuickFormProps = ThemeProps & {\r\n    activator?: (open: () => void) => JSX.Element;\r\n    submit: () => Promise<boolean>;\r\n    hideSubmit?: boolean;\r\n    title?: string;\r\n    titleIcon?: {component: Icon<string, unknown>; name: string};\r\n    confirmationTitle: string;\r\n    confirmationText: string;\r\n    failureTitle?: string;\r\n    failureText?: string;\r\n    submitText: string;\r\n};\r\n\r\ntype QuickFormState = {\r\n    open: boolean;\r\n    confirmationOpen: boolean;\r\n    failureOpen: boolean;\r\n    submitting: boolean;\r\n};\r\n\r\nexport class QuickFormClass extends React.Component<QuickFormProps, QuickFormState> {\r\n    constructor(props: QuickFormProps) {\r\n        super(props);\r\n        this.state = {open: false, confirmationOpen: false, failureOpen: false, submitting: false};\r\n    }\r\n\r\n    open(): void {\r\n        this.setState({...this.state, open: true});\r\n    }\r\n\r\n    close(): void {\r\n        this.setState({...this.state, open: false});\r\n    }\r\n\r\n    submit(): void {\r\n        const {submit} = this.props;\r\n\r\n        this.setState({...this.state, submitting: true});\r\n\r\n        submit().then((success: boolean) => {\r\n            if (success) {\r\n                this.setState({\r\n                    ...this.state,\r\n                    submitting: false,\r\n                    open: false,\r\n                    confirmationOpen: true,\r\n                    failureOpen: false,\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    ...this.state,\r\n                    submitting: false,\r\n                    open: false,\r\n                    confirmationOpen: false,\r\n                    failureOpen: true,\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            activator,\r\n            hideSubmit,\r\n            title,\r\n            titleIcon,\r\n            submitText,\r\n            confirmationTitle,\r\n            confirmationText,\r\n            failureTitle,\r\n            failureText,\r\n            theme,\r\n            children,\r\n        } = this.props;\r\n        const {open, confirmationOpen, failureOpen, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const actionButtons = (\r\n            <>\r\n                {!hideSubmit && (\r\n                    <FormSubmitButton\r\n                        text={submitText}\r\n                        submitting={submitting}\r\n                        onPress={() => this.submit()}\r\n                        skin=\"rounded-filled\"\r\n                        style={styles.actionButton}\r\n                        textStyle={styles.actionButtonText}\r\n                    />\r\n                )}\r\n                <Button\r\n                    text={i18n.t(\"cancel\")}\r\n                    onPress={() => this.close()}\r\n                    skin=\"rounded-hollow\"\r\n                    style={styles.actionButton}\r\n                    textStyle={styles.actionButtonText}\r\n                />\r\n            </>\r\n        );\r\n\r\n        const content = (\r\n            <>\r\n                {(title || titleIcon) && (\r\n                    <View style={styles.titleContainer}>\r\n                        {titleIcon && (\r\n                            <titleIcon.component name={titleIcon.name} style={[styles.title, styles.titleIcon]} />\r\n                        )}\r\n                        {title && <Text style={styles.title}>{title}</Text>}\r\n                    </View>\r\n                )}\r\n                {children}\r\n                {actionButtons}\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <>\r\n                {activator && activator(() => this.open())}\r\n                {Platform.OS === \"web\" ? (\r\n                    <CustomModal\r\n                        visible={open}\r\n                        onHide={() => this.close()}\r\n                        renderContent={() => <View style={styles.containerModal}>{content}</View>}\r\n                    />\r\n                ) : (\r\n                    <BottomSheet modalProps={{statusBarTranslucent: true}} isVisible={open}>\r\n                        <View style={styles.wrapperSheet}>\r\n                            <View style={styles.containerSheet}>{content}</View>\r\n                        </View>\r\n                    </BottomSheet>\r\n                )}\r\n                <CustomModal\r\n                    visible={confirmationOpen}\r\n                    onHide={() => this.setState({...this.state, confirmationOpen: false})}\r\n                    modalViewStyle={styles.feedbackModal}\r\n                    renderContent={() => (\r\n                        <View style={styles.containerModal}>\r\n                            <Text style={styles.feedbackTitle}>{confirmationTitle}</Text>\r\n                            <Text style={styles.feedbackText}>{confirmationText}</Text>\r\n                            <Button\r\n                                text={i18n.t(\"ok\")}\r\n                                onPress={() => this.setState({...this.state, confirmationOpen: false})}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionButtonText}\r\n                            />\r\n                        </View>\r\n                    )}\r\n                />\r\n                <CustomModal\r\n                    visible={failureOpen}\r\n                    onHide={() => this.setState({...this.state, failureOpen: false})}\r\n                    modalViewStyle={styles.feedbackModal}\r\n                    renderContent={() => (\r\n                        <View style={styles.containerModal}>\r\n                            <Text style={styles.feedbackTitle}>{failureTitle}</Text>\r\n                            <Text style={styles.feedbackText}>{failureText}</Text>\r\n                            <Button\r\n                                text={i18n.t(\"ok\")}\r\n                                onPress={() => this.setState({...this.state, failureOpen: false})}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionButtonText}\r\n                            />\r\n                        </View>\r\n                    )}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapperSheet: {\r\n            width: \"100%\",\r\n            paddingVertical: 20,\r\n            alignItems: \"center\",\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        containerSheet: {\r\n            width: \"90%\",\r\n        },\r\n        containerModal: {\r\n            width: \"100%\",\r\n        },\r\n\r\n        // Title\r\n        titleContainer: {\r\n            flexDirection: \"row\",\r\n            marginBottom: 20,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        titleIcon: {\r\n            marginRight: 5,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n\r\n        // Actions\r\n        actionButton: {\r\n            height: 44,\r\n            marginVertical: 0,\r\n            marginTop: 15,\r\n        },\r\n        actionButtonText: {\r\n            fontSize: 16,\r\n        },\r\n\r\n        feedbackModal: {\r\n            paddingVertical: 15,\r\n            paddingHorizontal: 20,\r\n        },\r\n        feedbackTitle: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n            marginBottom: 15,\r\n        },\r\n        feedbackText: {\r\n            fontSize: 15,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(QuickFormClass);\r\n","import React from \"react\";\r\nimport {View, StyleSheet, Text} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport PopUpSelector from \"../PopUpSelector\";\r\nimport {ReportEntityType, ReportType, REPORT_TYPES} from \"../../constants/reports\";\r\nimport InputLabel from \"../InputLabel\";\r\nimport {ChatRoomUser} from \"../../model/chat-room\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport store from \"../../state/store\";\r\nimport {reportEntity} from \"../../state/reports/actions\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport QuickForm, {QuickFormClass} from \"./QuickForm\";\r\n\r\nexport type QuickFormReportProps = ThemeProps & {\r\n    entityType: ReportEntityType;\r\n    entity: unknown;\r\n    activator?: (open: () => void) => JSX.Element;\r\n    onSubmit?: (success: boolean) => void;\r\n};\r\n\r\ntype QuickFormReportState = {\r\n    selectedType: ReportType | null;\r\n};\r\n\r\nexport class QuickFormReportClass extends React.Component<QuickFormReportProps, QuickFormReportState> {\r\n    quickFormRef = React.createRef<QuickFormClass>();\r\n\r\n    constructor(props: QuickFormReportProps) {\r\n        super(props);\r\n        this.state = {selectedType: null};\r\n    }\r\n\r\n    private getEntityInfo(): {id: string; name: string} | null {\r\n        const {entityType, entity} = this.props;\r\n\r\n        if (!entity) return null;\r\n\r\n        switch (entityType) {\r\n            case ReportEntityType.PROFILE_ENTITY:\r\n                if ((entity as ChatRoomUser)._id) {\r\n                    const u = entity as ChatRoomUser;\r\n                    return {name: u.name, id: u._id};\r\n                } else {\r\n                    const p = entity as UserProfile;\r\n                    return {name: `${p.firstName} ${p.lastName}`, id: p.id};\r\n                }\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    open(): void {\r\n        this.quickFormRef.current?.open();\r\n    }\r\n\r\n    close(): void {\r\n        this.quickFormRef.current?.close();\r\n    }\r\n\r\n    async submit(): Promise<boolean> {\r\n        const {entityType, onSubmit} = this.props;\r\n        const {selectedType} = this.state;\r\n\r\n        const info = this.getEntityInfo();\r\n\r\n        let success = false;\r\n        if (selectedType && info)\r\n            success = await (store.dispatch as MyThunkDispatch)(reportEntity(selectedType, entityType, info.id));\r\n\r\n        if (onSubmit) onSubmit(success);\r\n        return success;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {activator, theme} = this.props;\r\n        const {selectedType} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const info = this.getEntityInfo();\r\n\r\n        return (\r\n            <>\r\n                <QuickForm\r\n                    ref={this.quickFormRef}\r\n                    activator={activator}\r\n                    submit={() => this.submit()}\r\n                    titleIcon={{component: MaterialIcons, name: \"report\"}}\r\n                    title={i18n.t(\"report.title\")}\r\n                    submitText={i18n.t(\"report.send\")}\r\n                    confirmationTitle={i18n.t(\"report.confirmationTitle\")}\r\n                    confirmationText={i18n.t(\"report.confirmation\")}\r\n                    failureTitle={i18n.t(\"report.failureTitle\")}\r\n                    failureText={i18n.t(\"report.failure\")}\r\n                    hideSubmit={!selectedType}\r\n                >\r\n                    <View style={styles.inputItem}>\r\n                        <InputLabel>{i18n.t(\"report.what\")}</InputLabel>\r\n                        <Text style={styles.what}>{info ? info.name : \"unknown\"}</Text>\r\n                    </View>\r\n\r\n                    <View style={styles.inputItem}>\r\n                        <InputLabel>{i18n.t(\"report.why\")}</InputLabel>\r\n                        <PopUpSelector\r\n                            values={REPORT_TYPES}\r\n                            label={(t: string) => i18n.t(`report.types.${t}`)}\r\n                            placeholder={i18n.t(\"report.typePlaceholder\")}\r\n                            selected={selectedType ? [selectedType] : []}\r\n                            valueStyle={styles.selectorValue}\r\n                            //buttonStyle={[styles.button, buttonStyle]}\r\n                            onSelect={(values: string[]) => {\r\n                                if (values.length > 0)\r\n                                    this.setState({...this.state, selectedType: values[0] as ReportType});\r\n                            }}\r\n                            buttonStyleVariant=\"onboarding\"\r\n                        />\r\n                    </View>\r\n                </QuickForm>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        inputItem: {\r\n            marginBottom: 20,\r\n        },\r\n        what: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            textAlign: \"right\",\r\n        },\r\n        selectorValue: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(QuickFormReportClass);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ChatRoom, ChatRoomUser} from \"../../model/chat-room\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {GiftedAvatar} from \"react-native-gifted-chat\";\r\nimport {openChat} from \"../../navigation/utils\";\r\nimport SwipeableCard, {SwipeableCardClass, SwipeActionButtons, SwipeActionProps} from \"./SwipeableCard\";\r\nimport QuickFormReport, {QuickFormReportClass} from \"../forms/QuickFormReport\";\r\nimport {ReportEntityType} from \"../../constants/reports\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    localChatUser: state.messaging.localChatUser,\r\n}));\r\n\r\n// Component props\r\nexport type ChatRoomCardProps = {\r\n    room: ChatRoom;\r\n    onPress?: () => void;\r\n    onHidden?: () => void;\r\n} & ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps;\r\n\r\nconst LOOKS = {\r\n    sideMargin: 15,\r\n    verticalSpacing: 5,\r\n    borderRadius: 10,\r\n    minHeight: 75,\r\n};\r\n\r\nclass ChatRoomCard extends React.Component<ChatRoomCardProps> {\r\n    reportFormRef = React.createRef<QuickFormReportClass>();\r\n    swipeableCardRef = React.createRef<SwipeableCardClass>();\r\n\r\n    private getActions(hideCard: () => void): SwipeActionProps[] {\r\n        const {theme} = this.props;\r\n\r\n        return [\r\n            // TODO implement chat mute\r\n            /*{\r\n                icon: \"notifications-off\",\r\n                backgroundColor: \"#ccc\",\r\n            },*/\r\n            {\r\n                icon: \"report\",\r\n                backgroundColor: theme.error,\r\n                onPress: () => this.reportFormRef.current?.open(),\r\n            },\r\n        ];\r\n    }\r\n\r\n    render() {\r\n        const {theme, room, onPress, localChatUser} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const localUser = room.users.find((p: ChatRoomUser) => p._id === localChatUser?._id);\r\n        const user = room.users.filter((p: ChatRoomUser) => p._id !== localChatUser?._id)[0];\r\n\r\n        let lastMessageComponent = <></>;\r\n\r\n        if (room.lastMessage) {\r\n            const date = room.lastMessage.createdAt;\r\n            const isRead =\r\n                localUser &&\r\n                localUser.lastMessageSeenDate &&\r\n                (localUser.lastMessageSeenDate >= date || localUser.lastMessageSeenId == room.lastMessage._id);\r\n            const pad = (num: number) => (num + \"\").padStart(2, \"0\");\r\n            lastMessageComponent = (\r\n                <>\r\n                    <Text style={[styles.lastMessageText, isRead ? {} : styles.lastMessageTextNew]} numberOfLines={1}>\r\n                        {room.lastMessage.user.name.split(\" \")[0]}: {room.lastMessage.text}\r\n                    </Text>\r\n                    <Text style={styles.lastMessageTime}>\r\n                        {pad(date.getHours())}:{pad(date.getMinutes())}\r\n                    </Text>\r\n                </>\r\n            );\r\n        } else {\r\n            lastMessageComponent = (\r\n                <Text style={styles.noMessageText} numberOfLines={1}>\r\n                    {room.users.length === 2 ? i18n.t(\"messaging.sayHiTo\", {name: user.name}) : i18n.t(\"sayHi\")}\r\n                </Text>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SwipeableCard\r\n                ref={this.swipeableCardRef}\r\n                looks={LOOKS}\r\n                rightThreshold={100}\r\n                overshootRight={false}\r\n                rightActions={(hideCard) => (\r\n                    <SwipeActionButtons\r\n                        id={`room-${room.id}`}\r\n                        looks={LOOKS}\r\n                        side=\"right\"\r\n                        actions={this.getActions(hideCard)}\r\n                    />\r\n                )}\r\n                onPress={() => {\r\n                    if (onPress) onPress();\r\n                    openChat(room.id);\r\n                }}\r\n            >\r\n                <View style={styles.cardContent}>\r\n                    <View style={styles.avatarContainer}>\r\n                        <GiftedAvatar avatarStyle={styles.avatar} user={user}></GiftedAvatar>\r\n                    </View>\r\n                    <View style={styles.infoContainer}>\r\n                        <Text style={styles.name}>{user.name}</Text>\r\n                        <View style={styles.lastMessage}>{lastMessageComponent}</View>\r\n                    </View>\r\n                </View>\r\n                <QuickFormReport\r\n                    ref={this.reportFormRef}\r\n                    entityType={ReportEntityType.PROFILE_ENTITY}\r\n                    entity={user}\r\n                    onSubmit={() => this.swipeableCardRef.current?.resetSwipe()}\r\n                />\r\n            </SwipeableCard>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        cardContent: {\r\n            flexDirection: \"row\",\r\n            padding: 10,\r\n        },\r\n        avatarContainer: {\r\n            justifyContent: \"center\",\r\n        },\r\n        avatar: {\r\n            backgroundColor: theme.accentSecondary,\r\n            width: 45,\r\n            height: 45,\r\n            borderRadius: 50,\r\n        },\r\n        infoContainer: {\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            paddingLeft: 10,\r\n        },\r\n        name: {\r\n            fontSize: 18,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n        lastMessage: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            overflow: \"hidden\",\r\n        },\r\n        noMessageText: {\r\n            color: theme.textLight,\r\n            fontSize: 14,\r\n            flex: 1,\r\n        },\r\n        lastMessageText: {\r\n            color: theme.text,\r\n            fontSize: 14,\r\n            flex: 1,\r\n        },\r\n        lastMessageTextNew: {\r\n            fontWeight: \"bold\",\r\n        },\r\n        lastMessageTime: {\r\n            color: theme.textLight,\r\n            fontSize: 14,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ChatRoomCard));\r\n","import React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {SupportedLocale} from \"../../localization\";\r\nimport {AppState} from \"../../state/types\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    locale: state.settings.userSettings.locale,\r\n}));\r\n\r\nexport type LocaleAwareProps = React.PropsWithChildren<ConnectedProps<typeof reduxConnector>> & {\r\n    onLocaleChange?: (locale: SupportedLocale) => void;\r\n};\r\n\r\n/**\r\n * This provider receives the current theme from the store and passes it down to all\r\n * children (direct or indirect) that are exported using withTheme(<component>).\r\n */\r\nclass LocaleAware extends React.Component<LocaleAwareProps> {\r\n    componentDidUpdate(oldProps: LocaleAwareProps) {\r\n        const {locale, onLocaleChange} = this.props;\r\n        if (oldProps.locale !== locale) {\r\n            if (onLocaleChange) onLocaleChange(locale);\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {children} = this.props;\r\n        return <>{children}</>;\r\n    }\r\n}\r\n\r\nexport default reduxConnector(LocaleAware);\r\n","import * as React from \"react\";\r\nimport {\r\n    ActivityIndicator,\r\n    NativeScrollEvent,\r\n    NativeSyntheticEvent,\r\n    RefreshControl,\r\n    ScrollView,\r\n    StyleProp,\r\n    StyleSheet,\r\n    View,\r\n    ViewStyle,\r\n} from \"react-native\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {ThemeProps} from \"../types\";\r\nimport LocaleAware from \"./utility/LocaleAware\";\r\n\r\n// Component props\r\nexport type InfiniteScrollerProps<T> = {\r\n    items: T[];\r\n    id: (item: T) => string;\r\n    fetchMore: () => void;\r\n    refresh: () => void;\r\n    fetching: boolean;\r\n    canFetchMore: boolean;\r\n    fetchLimit: number;\r\n    renderItem: (item: T, hide: () => void) => JSX.Element;\r\n    noResultsComponent: JSX.Element;\r\n    endOfItemsComponent?: JSX.Element;\r\n    currentPage: number;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    navigation: {isFocused: () => boolean; addListener: (k: any, l: () => void) => void};\r\n    itemsContainerStyle?: StyleProp<ViewStyle>;\r\n    progressViewOffset?: number;\r\n    refreshOnFocus?: boolean;\r\n};\r\n\r\n// Component state\r\ntype InfiniteScrollerState = {\r\n    hiddenIds: {[key: string]: boolean};\r\n};\r\n\r\nconst SCROLL_DISTANCE_TO_LOAD = 50;\r\n\r\nexport default class InfiniteScroller<T> extends React.Component<InfiniteScrollerProps<T>, InfiniteScrollerState> {\r\n    scrollViewRef: React.RefObject<ScrollView> = React.createRef<ScrollView>();\r\n\r\n    constructor(props: InfiniteScrollerProps<T>) {\r\n        super(props);\r\n        this.state = {hiddenIds: {}};\r\n    }\r\n\r\n    fetchMore(): void {\r\n        const {fetching, canFetchMore, fetchMore, navigation} = this.props;\r\n        if (!fetching && canFetchMore && navigation.isFocused()) fetchMore();\r\n    }\r\n\r\n    getShownItems(): T[] {\r\n        const {items, id} = this.props;\r\n        return items.filter((it) => !this.state.hiddenIds[id(it)]);\r\n    }\r\n\r\n    hideItem(item: T): void {\r\n        const {fetchLimit, canFetchMore, id} = this.props;\r\n        this.setState({...this.state, hiddenIds: {...this.state.hiddenIds, [id(item)]: true}});\r\n        if (this.getShownItems().length < fetchLimit && canFetchMore) this.fetchMore();\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        const {navigation} = this.props;\r\n        navigation.addListener(\"focus\", () => this.onFocus());\r\n        this.onFocus();\r\n    }\r\n\r\n    onFocus(): void {\r\n        const {items, fetchLimit, fetching, refreshOnFocus, currentPage, refresh, id} = this.props;\r\n        const shown = items.filter((it) => !this.state.hiddenIds[id(it)]).length;\r\n\r\n        if (refreshOnFocus) {\r\n            // Fetch items if currentPage is 1 (because this won't be caught by 'justRefreshed' in componentDidUpdate)\r\n            if (currentPage === 1) this.fetchMore();\r\n            else refresh(); // We don't refresh if the current page is 1 because that means we haven't fetched anything yet\r\n        } else if (shown < fetchLimit && !fetching) this.fetchMore();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: InfiniteScrollerProps<T>): void {\r\n        const {fetchLimit, currentPage, navigation} = this.props;\r\n\r\n        const justRefreshed = oldProps.currentPage > 1 && currentPage === 1;\r\n\r\n        if (navigation.isFocused()) {\r\n            const moreIfNeeded = () => this.getShownItems().length < fetchLimit && this.fetchMore();\r\n            // Reset the hidden profiles when the user purposedly refreshes\r\n            if (justRefreshed) this.setState({...this.state, hiddenIds: {}}, moreIfNeeded);\r\n            else moreIfNeeded();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            items,\r\n            fetching,\r\n            canFetchMore,\r\n            currentPage,\r\n            refresh,\r\n            renderItem,\r\n            noResultsComponent,\r\n            endOfItemsComponent,\r\n            itemsContainerStyle,\r\n            progressViewOffset,\r\n        } = this.props;\r\n\r\n        return (\r\n            <>\r\n                <ThemeConsumer>\r\n                    {({theme}: ThemeProps) => {\r\n                        const styles = themedStyles(theme);\r\n                        return (\r\n                            <ScrollView\r\n                                ref={this.scrollViewRef}\r\n                                style={styles.scroller}\r\n                                contentContainerStyle={[styles.itemsContainer, itemsContainerStyle]}\r\n                                refreshControl={\r\n                                    <RefreshControl\r\n                                        progressViewOffset={progressViewOffset}\r\n                                        refreshing={fetching}\r\n                                        onRefresh={() => {\r\n                                            if (!fetching) refresh();\r\n                                        }}\r\n                                    />\r\n                                }\r\n                                onScroll={(e: NativeSyntheticEvent<NativeScrollEvent>) => {\r\n                                    const {layoutMeasurement, contentOffset, contentSize} = e.nativeEvent;\r\n                                    const distanceToBottom =\r\n                                        contentSize.height - contentOffset.y - layoutMeasurement.height;\r\n                                    if (distanceToBottom < SCROLL_DISTANCE_TO_LOAD) this.fetchMore();\r\n                                }}\r\n                            >\r\n                                {this.getShownItems().map((it: T) => renderItem(it, () => this.hideItem(it)))}\r\n                                {!fetching && items.length > 0 && !canFetchMore && (\r\n                                    <View style={styles.endOfItemsContainer}>{endOfItemsComponent}</View>\r\n                                )}\r\n                                {!fetching && items.length == 0 && (\r\n                                    <View style={styles.noResultsContainer}>{noResultsComponent}</View>\r\n                                )}\r\n                                <View style={styles.loadingIndicatorContainer}>\r\n                                    {fetching && currentPage > 1 && items.length > 0 && (\r\n                                        <ActivityIndicator size=\"large\" color={theme.accentSecondary} />\r\n                                    )}\r\n                                </View>\r\n                            </ScrollView>\r\n                        );\r\n                    }}\r\n                </ThemeConsumer>\r\n                <LocaleAware onLocaleChange={() => this.props.refresh()} />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((/*theme: Theme*/) => {\r\n    return StyleSheet.create({\r\n        scroller: {\r\n            width: \"100%\",\r\n        },\r\n        itemsContainer: {},\r\n        loadingIndicatorContainer: {\r\n            marginTop: 10,\r\n            marginBottom: 20, // compensate for bottom tab bar\r\n            height: 50,\r\n        },\r\n        noResultsContainer: {\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            marginTop: 20,\r\n        },\r\n        endOfItemsContainer: {\r\n            marginTop: 20,\r\n            alignItems: \"center\",\r\n        },\r\n    });\r\n});\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text} from \"react-native\";\r\nimport {AppState, MyThunkDispatch} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {fetchMatchRooms, refreshMatchRooms} from \"../../state/messaging/actions\";\r\nimport ChatRoomCard from \"../../components/cards/ChatRoomCard\";\r\nimport {ROOMS_FETCH_LIMIT} from \"../../constants/config\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {TabMessagingRoot} from \"../../navigation/types\";\r\nimport InfiniteScroller from \"../../components/InfiniteScroller\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    rooms: state.messaging.matchRooms,\r\n    roomIds: state.messaging.matchRoomsOrdered,\r\n    fetchingRooms: state.messaging.matchRoomsPagination.fetching,\r\n    canFetchMore: state.messaging.matchRoomsPagination.canFetchMore,\r\n    currentPage: state.messaging.matchRoomsPagination.page,\r\n}));\r\n\r\ntype ChatRoomsScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & StackScreenProps<TabMessagingRoot>;\r\n\r\nclass ChatRoomsScreen extends React.Component<ChatRoomsScreenProps> {\r\n    private fetchMore(): void {\r\n        (this.props.dispatch as MyThunkDispatch)(fetchMatchRooms());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, rooms, roomIds, fetchingRooms, canFetchMore, currentPage, navigation, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <InfiniteScroller\r\n                    navigation={navigation}\r\n                    fetchLimit={ROOMS_FETCH_LIMIT}\r\n                    fetchMore={() => this.fetchMore()}\r\n                    fetching={fetchingRooms}\r\n                    canFetchMore={canFetchMore}\r\n                    currentPage={currentPage}\r\n                    refreshOnFocus={true}\r\n                    refresh={() => dispatch(refreshMatchRooms())}\r\n                    items={roomIds}\r\n                    id={(roomId: string): string => roomId}\r\n                    noResultsComponent={<Text style={styles.noMatchesText}>{i18n.t(\"messaging.noMatches\")}</Text>}\r\n                    renderItem={(roomId: string) => (\r\n                        <ChatRoomCard key={`chat-room-card-${roomId}`} room={rooms[roomId]} />\r\n                    )}\r\n                    itemsContainerStyle={styles.itemsContainer}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        noMatchesText: {\r\n            color: theme.text,\r\n            letterSpacing: 0.5,\r\n            fontSize: 18,\r\n            lineHeight: 24,\r\n            textAlign: \"center\",\r\n            paddingHorizontal: 50,\r\n        },\r\n        itemsContainer: {\r\n            width: \"100%\",\r\n            maxWidth: 600,\r\n            alignSelf: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ChatRoomsScreen));\r\n","import * as React from \"react\";\r\nimport {Avatar, AvatarProps} from \"react-native-elements\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\n\r\n// Component props\r\nexport type ProfileAvatarProps = {profile?: UserProfile} & AvatarProps;\r\n\r\nclass ProfileAvatar extends React.Component<ProfileAvatarProps> {\r\n    render(): JSX.Element {\r\n        const {children, profile, ...avatarProps} = this.props;\r\n\r\n        const avatarTitle =\r\n            avatarProps.title || (profile ? (profile.firstName[0] + profile.lastName[0]).toUpperCase() : undefined);\r\n\r\n        const avatarSourceProp = profile && profile.avatarUrl ? {source: {uri: profile.avatarUrl}} : {};\r\n\r\n        return (\r\n            <Avatar {...avatarProps} title={avatarTitle} {...avatarSourceProp}>\r\n                {children}\r\n            </Avatar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProfileAvatar;\r\n","import {Theme} from \"../types\";\r\nimport {preTheme} from \"./utils\";\r\nimport {StyleSheet} from \"react-native\";\r\n\r\nexport const headerStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            backgroundColor: theme.background,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            paddingHorizontal: 15,\r\n            height: 90,\r\n            paddingBottom: 5,\r\n        },\r\n        wrapperBlur: {\r\n            backgroundColor: \"transparent\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n        },\r\n        wrapperNoShadow: {\r\n            shadowColor: \"transparent\",\r\n            elevation: 0,\r\n        },\r\n        backButton: {\r\n            width: 40,\r\n            height: 40,\r\n            marginRight: 5,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        backButtonIcon: {\r\n            fontSize: 28,\r\n        },\r\n        avatarContainer: {\r\n            backgroundColor: theme.accentSecondary,\r\n            borderWidth: 1,\r\n            borderColor: theme.componentBorder,\r\n        },\r\n        avatarTitle: {\r\n            color: theme.textWhite,\r\n        },\r\n        title: {\r\n            flex: 1,\r\n            color: theme.text,\r\n            fontWeight: \"600\",\r\n            fontSize: 20,\r\n        },\r\n        rightButton: {\r\n            width: 36,\r\n            height: 36,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            borderRadius: 50,\r\n            marginLeft: 8,\r\n        },\r\n        rightIcon: {\r\n            fontSize: 22,\r\n        },\r\n    });\r\n});\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, TouchableOpacity, View, ViewStyle} from \"react-native\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {StackHeaderProps} from \"@react-navigation/stack\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport {headerTitle, navigateBack, rootNavigate} from \"../../navigation/utils\";\r\nimport {NavigatorRoute} from \"../../navigation/types\";\r\nimport {headerStyles} from \"../../styles/headers\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {BlurProps, BlurView} from \"expo-blur\";\r\nimport {useSafeAreaInsets, EdgeInsets} from \"react-native-safe-area-context\";\r\nimport {Route} from \"@react-navigation/native\";\r\nimport {BLUR_HEADER_INTENSITY} from \"../../styles/general\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    user: state.profile.user,\r\n}));\r\n\r\nexport type HeaderButtonProps = {\r\n    buttonStyle: StyleProp<ViewStyle>;\r\n    iconStyle: StyleProp<TextStyle>;\r\n};\r\n\r\ntype AdditionalProps = {\r\n    rightButtons?: ((props: HeaderButtonProps) => JSX.Element)[];\r\n    backButton?: boolean;\r\n    noAvatar?: boolean;\r\n    noShadow?: boolean;\r\n    noSettingsButton?: boolean;\r\n    blur?: boolean;\r\n    overrideAvatar?: JSX.Element;\r\n    overrideTitle?: string;\r\n    wrapperStyle?: StyleProp<ViewStyle>;\r\n    titleStyle?: StyleProp<TextStyle>;\r\n    color?: string;\r\n    buttonBackgroundColor?: string;\r\n};\r\n\r\nexport type MainHeaderStackProps = Partial<StackHeaderProps> & {route?: Route<string, undefined>};\r\n\r\n// Component props\r\nexport type MainHeaderProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps & {insets: EdgeInsets} & MainHeaderStackProps &\r\n    AdditionalProps;\r\n\r\nclass MainHeaderClass extends React.Component<MainHeaderProps> {\r\n    back(): void {\r\n        navigateBack(\"MainScreen\");\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            insets,\r\n            user,\r\n            rightButtons,\r\n            backButton,\r\n            noAvatar,\r\n            noShadow,\r\n            noSettingsButton,\r\n            blur,\r\n            overrideAvatar,\r\n            overrideTitle,\r\n            wrapperStyle,\r\n            titleStyle,\r\n            color,\r\n        } = this.props;\r\n\r\n        const styles = headerStyles(theme);\r\n\r\n        const routeName = (this.props.route || this.props.scene?.route || {name: \"undef\"}).name;\r\n        const title = headerTitle(routeName as NavigatorRoute);\r\n        const textColor = color || theme.text;\r\n        const buttonBackgroundColor = this.props.buttonBackgroundColor || theme.cardBackground;\r\n\r\n        const WrapperComponent = blur ? BlurView : View;\r\n        const blurProps: Partial<BlurProps> = blur\r\n            ? {\r\n                  tint: theme.id === \"dark\" ? \"dark\" : \"default\",\r\n                  intensity: BLUR_HEADER_INTENSITY,\r\n              }\r\n            : {};\r\n\r\n        return (\r\n            <WrapperComponent\r\n                style={[\r\n                    {paddingTop: insets.top},\r\n                    styles.wrapper,\r\n                    blur ? styles.wrapperBlur : {},\r\n                    noShadow ? styles.wrapperNoShadow : {},\r\n                    wrapperStyle,\r\n                ]}\r\n                {...blurProps}\r\n            >\r\n                {backButton && (\r\n                    <TouchableOpacity style={styles.backButton} onPress={() => this.back()}>\r\n                        <MaterialIcons style={[styles.backButtonIcon, {color: textColor}]} name=\"arrow-back\" />\r\n                    </TouchableOpacity>\r\n                )}\r\n                {!noAvatar &&\r\n                    (overrideAvatar || (\r\n                        <ProfileAvatar\r\n                            profile={user?.profile}\r\n                            rounded\r\n                            size={40}\r\n                            containerStyle={styles.avatarContainer}\r\n                            titleStyle={styles.avatarTitle}\r\n                            activeOpacity={0.75}\r\n                            onPress={() => rootNavigate(\"MyProfileScreen\")}\r\n                        />\r\n                    ))}\r\n                <Text style={[styles.title, {marginLeft: 12, color: textColor}, titleStyle]} numberOfLines={1}>\r\n                    {overrideTitle || title}\r\n                </Text>\r\n                {rightButtons?.map((ButtonComponent, i) => (\r\n                    <ButtonComponent\r\n                        key={`header-button-${routeName.toLowerCase()}-${i}`}\r\n                        buttonStyle={[styles.rightButton, {backgroundColor: buttonBackgroundColor}]}\r\n                        iconStyle={[styles.rightIcon, {color: textColor}]}\r\n                    />\r\n                ))}\r\n                {!noSettingsButton && (\r\n                    <TouchableOpacity\r\n                        style={[styles.rightButton, {backgroundColor: buttonBackgroundColor}]}\r\n                        onPress={() => rootNavigate(\"SettingsScreen\")}\r\n                    >\r\n                        <MaterialIcons name=\"settings\" style={styles.rightIcon} color={textColor} />\r\n                    </TouchableOpacity>\r\n                )}\r\n            </WrapperComponent>\r\n        );\r\n    }\r\n}\r\n\r\nconst MainHeaderComp = reduxConnector(withTheme(MainHeaderClass));\r\n\r\nexport default function MainHeader(props: MainHeaderStackProps & AdditionalProps): JSX.Element {\r\n    const insets = useSafeAreaInsets();\r\n    return <MainHeaderComp insets={insets} {...props} />;\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {GiftedAvatar} from \"react-native-gifted-chat\";\r\nimport {ChatRoom, ChatRoomUser} from \"../../model/chat-room\";\r\nimport {headerStyles} from \"../../styles/headers\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport MainHeader, {MainHeaderStackProps} from \"./MainHeader\";\r\nimport {RootNavigatorScreens} from \"../../navigation/types\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport store from \"../../state/store\";\r\nimport {Route} from \"@react-navigation/native\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    rooms: store.getState().messaging.matchRooms,\r\n    activeRoom: store.getState().messaging.activeRoom,\r\n    profileId: state.profile.user?.profile?.id,\r\n}));\r\n\r\n// Component props\r\nexport type ChatScreenHeaderProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<RootNavigatorScreens> &\r\n    Omit<MainHeaderStackProps, \"route\">;\r\n\r\nclass ChatScreenHeaderClass extends React.Component<ChatScreenHeaderProps> {\r\n    private getRoomId(): string | null {\r\n        const {route} = this.props;\r\n        // Get the room ID from the route parameters\r\n        if (route.params) {\r\n            const params = route.params as {[key: string]: string};\r\n            const {roomId} = params;\r\n            return roomId;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private getRoom(): ChatRoom | null {\r\n        const {rooms, activeRoom} = this.props;\r\n        const roomId = this.getRoomId();\r\n        return activeRoom || (roomId ? rooms[roomId] : null);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, profileId, ...stackProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n        const hstyles = headerStyles(theme);\r\n\r\n        const room = this.getRoom();\r\n\r\n        if (room) {\r\n            const user = room.users.filter((p: ChatRoomUser) => p._id != profileId)[0];\r\n            return (\r\n                <MainHeader\r\n                    {...stackProps}\r\n                    route={stackProps.route as Route<string, undefined>}\r\n                    backButton={true}\r\n                    blur={true}\r\n                    overrideAvatar={\r\n                        <GiftedAvatar\r\n                            avatarStyle={hstyles.avatarContainer}\r\n                            user={user}\r\n                            onPress={() => rootNavigate(\"ProfileScreen\", {id: user._id})}\r\n                        />\r\n                    }\r\n                    overrideTitle={user.name}\r\n                    titleStyle={styles.name}\r\n                />\r\n            );\r\n        } else return <></>;\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        name: {\r\n            fontSize: 18,\r\n            fontWeight: \"600\",\r\n        },\r\n    });\r\n});\r\n\r\nconst ChatScreenHeaderComp = reduxConnector(withTheme(ChatScreenHeaderClass));\r\n\r\nexport default function ChatScreenHeader(\r\n    props: StackScreenProps<RootNavigatorScreens> & MainHeaderStackProps,\r\n): JSX.Element {\r\n    return <ChatScreenHeaderComp {...props} />;\r\n}\r\n","import {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {\r\n    Platform,\r\n    ScrollView,\r\n    ScrollViewProps,\r\n    StyleSheet,\r\n    TextStyle,\r\n    View,\r\n    FlatList,\r\n    KeyboardAvoidingView,\r\n} from \"react-native\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {\r\n    Actions,\r\n    ActionsProps,\r\n    Bubble,\r\n    BubbleProps,\r\n    Composer,\r\n    ComposerProps,\r\n    GiftedAvatar,\r\n    GiftedAvatarProps,\r\n    GiftedChat,\r\n    IMessage,\r\n    InputToolbar,\r\n    InputToolbarProps,\r\n    Message,\r\n    MessageProps,\r\n    Send,\r\n    SendProps,\r\n} from \"react-native-gifted-chat\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport chatSocket from \"../../api/chat-socket\";\r\nimport {RootNavigatorScreens} from \"../../navigation/types\";\r\nimport {\r\n    connectToChat,\r\n    fetchEarlierMessages,\r\n    fetchMatchRoom,\r\n    fetchNewMessages,\r\n    joinChatRoom,\r\n    leaveChatRoom,\r\n    sendChatMessage,\r\n} from \"../../state/messaging/actions\";\r\nimport {AppState, MyThunkDispatch} from \"../../state/types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {TypingAnimation} from \"react-native-typing-animation\";\r\nimport {ChatRoom, ChatRoomUser} from \"../../model/chat-room\";\r\nimport store from \"../../state/store\";\r\nimport {DEBUG_MODE, MESSAGES_FETCH_LIMIT} from \"../../constants/config\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\nimport {normalizeWheelEvent} from \"../../polyfills\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    rooms: state.messaging.matchRooms,\r\n    activeRoom: state.messaging.activeRoom,\r\n    localChatUser: state.messaging.localChatUser,\r\n    connected: state.messaging.socketState.connected,\r\n    connecting: state.messaging.socketState.connecting,\r\n    fetchingNewMessages: state.messaging.fetchingNewMessages,\r\n}));\r\n\r\n// Component props\r\nexport type ChatScreenProps = ThemeProps &\r\n    ConnectedProps<typeof reduxConnector> &\r\n    StackScreenProps<RootNavigatorScreens>;\r\n\r\nconst MIN_INPUT_HEIGHT = 45;\r\nconst INPUT_VERTICAL_MARGIN = 10;\r\n\r\nclass ChatScreen extends React.Component<ChatScreenProps> {\r\n    ref = React.createRef<GiftedChat>();\r\n    listRef: FlatList | null = null;\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    removeScrollListener: () => void = () => {};\r\n\r\n    private getRoomId(): string | null {\r\n        const {route} = this.props;\r\n        // Get the room ID from the route parameters\r\n        if (route.params) {\r\n            const params = route.params as {[key: string]: string};\r\n            const {roomId} = params;\r\n            return roomId;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private getRoom(): ChatRoom | null {\r\n        const {rooms, activeRoom} = this.props;\r\n        const roomId = this.getRoomId();\r\n        return activeRoom || (roomId ? rooms[roomId] : null);\r\n    }\r\n\r\n    private connectToRoom(): void {\r\n        const dispatch = this.props.dispatch as MyThunkDispatch;\r\n\r\n        const joinRoom = async (room: ChatRoom) => {\r\n            dispatch(joinChatRoom(room));\r\n            this.ensureLatestMessages();\r\n        };\r\n\r\n        const roomId = this.getRoomId();\r\n        // If a roomId parameter was given, we first ensure we have that room (in storage or we fetch it) before joining it.\r\n        if (roomId) {\r\n            const room = store.getState().messaging.matchRooms[roomId];\r\n            if (room) joinRoom(room);\r\n            else dispatch(fetchMatchRoom(roomId)).then((r) => r && joinRoom(r));\r\n        }\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        const {navigation} = this.props;\r\n        navigation.addListener(\"blur\", () => this.onBlur());\r\n        navigation.addListener(\"focus\", () => this.onFocus());\r\n        this.onFocus();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: ChatScreenProps): void {\r\n        const {activeRoom, connected} = this.props;\r\n        // If we've just connected to the chat, connect to the room\r\n        if (!oldProps.connected && connected) this.connectToRoom();\r\n        // If we're at the beginning of the messages pagination\r\n        if (!oldProps.activeRoom && activeRoom && activeRoom.messagePagination.page == 1) this.ensureLatestMessages();\r\n    }\r\n\r\n    private onBlur(): void {\r\n        // Leave the room when navigating to another screen\r\n        const {dispatch, activeRoom} = this.props;\r\n        if (activeRoom) (dispatch as MyThunkDispatch)(leaveChatRoom(activeRoom));\r\n    }\r\n\r\n    private onFocus(): void {\r\n        const {connected, connecting, dispatch} = this.props;\r\n\r\n        // If are already connected to the chat, connect to the room\r\n        if (connected) this.connectToRoom();\r\n        // If we are not connected nor connecting to the chat, connect to the chat first\r\n        else if (!connecting) (dispatch as MyThunkDispatch)(connectToChat());\r\n    }\r\n\r\n    /**\r\n     * Ensures that the latest n messages are loaded\r\n     */\r\n    private ensureLatestMessages(): void {\r\n        const {dispatch, fetchingNewMessages} = this.props;\r\n        const room = this.getRoom();\r\n\r\n        // Fetch all messages that are more recent than the last one we have\r\n        if (room && !fetchingNewMessages) (dispatch as MyThunkDispatch)(fetchNewMessages(room));\r\n\r\n        // Fetch earlier messages if we need to\r\n        if (room && room.messages.length < MESSAGES_FETCH_LIMIT) this.fetchEarlier();\r\n    }\r\n\r\n    private fetchEarlier(): void {\r\n        const {dispatch} = this.props;\r\n        const room = this.getRoom();\r\n        if (room && !room.messagePagination.fetching) (dispatch as MyThunkDispatch)(fetchEarlierMessages(room));\r\n    }\r\n\r\n    private setListRef(listRef: FlatList | null): void {\r\n        if (Platform.OS === \"web\") {\r\n            if (listRef === null) this.removeScrollListener();\r\n            else if (this.listRef === null) {\r\n                // fix scrolling being reversed with the mouse wheel\r\n                // taken from https://www.gitmemory.com/issue/necolas/react-native-web/995/511242048\r\n                const scrollNode = listRef.getScrollableNode();\r\n                const listener = scrollNode.addEventListener(\"wheel\", (e: WheelEvent) => {\r\n                    const r = normalizeWheelEvent(e);\r\n                    scrollNode.scrollTop -= r.pixelY * 0.15;\r\n                    e.preventDefault();\r\n                });\r\n                this.removeScrollListener = () => scrollNode.removeEventListener(\"wheel\", listener);\r\n                listRef.setNativeProps({style: {transform: \"translate3d(0,0,0) scaleY(-1)\"}});\r\n            }\r\n            this.listRef = listRef;\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, localChatUser, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const room = this.getRoom();\r\n\r\n        let chatComponent = <></>;\r\n        if (room && localChatUser) {\r\n            const isWritingId = Object.keys(room.writing).find((id: string) => room.writing[id] === true);\r\n            const userWriting = isWritingId ? room.users.find((u) => u._id == isWritingId) : undefined;\r\n\r\n            // Store in a messageId -> user map whether each message is the last seen message of a user\r\n            const lastMessageDict: {[key: string]: ChatRoomUser[]} = {};\r\n            if (room.messages.length > 0) {\r\n                room.users.forEach((u: ChatRoomUser) => {\r\n                    if (u._id != localChatUser._id && u.lastMessageSeenId) {\r\n                        if (lastMessageDict[u.lastMessageSeenId]) lastMessageDict[u.lastMessageSeenId].push(u);\r\n                        else lastMessageDict[u.lastMessageSeenId] = [u];\r\n                    }\r\n                });\r\n            }\r\n\r\n            chatComponent = (\r\n                <GiftedChat\r\n                    ref={this.ref}\r\n                    isKeyboardInternallyHandled={false}\r\n                    messages={room.messages}\r\n                    user={localChatUser}\r\n                    renderSend={(props: SendProps<IMessage>) => (\r\n                        <Send {...props} containerStyle={styles.sendContainer}>\r\n                            <MaterialIcons name=\"send\" style={styles.send} />\r\n                        </Send>\r\n                    )}\r\n                    renderBubble={(props: BubbleProps<IMessage>) => (\r\n                        <Bubble\r\n                            {...props}\r\n                            renderTicks={(currentMessage: IMessage) => (\r\n                                <View style={styles.messageTicksContainer}>\r\n                                    {currentMessage.received && (\r\n                                        <MaterialIcons name=\"check\" style={styles.messageTick} />\r\n                                    )}\r\n                                    {currentMessage.sent && <MaterialIcons name=\"check\" style={styles.messageTick} />}\r\n                                </View>\r\n                            )}\r\n                            textStyle={{left: styles.bubbleTextLeft, right: styles.bubbleTextRight}}\r\n                            wrapperStyle={{left: styles.bubbleWrapperLeft, right: styles.bubbleWrapperRight}}\r\n                        />\r\n                    )}\r\n                    renderMessage={(props: MessageProps<IMessage>) => {\r\n                        const seenBy = props.currentMessage ? lastMessageDict[props.currentMessage._id] : [];\r\n                        return <ChatMessage theme={theme} seenBy={seenBy || []} messageProps={props} />;\r\n                    }}\r\n                    renderInputToolbar={(props: InputToolbarProps) => (\r\n                        <InputToolbar\r\n                            {...props}\r\n                            containerStyle={styles.inputToolbarContainer}\r\n                            primaryStyle={styles.inputToolbarPrimary}\r\n                        />\r\n                    )}\r\n                    renderFooter={() => <ChatFooter userWriting={userWriting} theme={theme} />}\r\n                    renderActions={(props: ActionsProps) => <ChatActions actionsProps={props} theme={theme} />}\r\n                    //renderLoadEarlier={() => <></>}\r\n                    onInputTextChanged={(t) => {\r\n                        if (t.length > 0) chatSocket.setWriting(room);\r\n                    }}\r\n                    onSend={(messages) => {\r\n                        messages.forEach((m) =>\r\n                            (dispatch as MyThunkDispatch)(sendChatMessage(m._id + \"\", m.text, m.createdAt as Date)),\r\n                        );\r\n                    }}\r\n                    loadEarlier={room.messagePagination.canFetchMore && room.messagePagination.fetching}\r\n                    isLoadingEarlier={room.messagePagination.fetching}\r\n                    onLoadEarlier={() => {\r\n                        this.fetchEarlier();\r\n                    }}\r\n                    timeFormat={\"HH:mm\"}\r\n                    listViewProps={{\r\n                        ref: (el: unknown) => this.setListRef(el as FlatList | null),\r\n                        onEndReached: () => this.fetchEarlier(),\r\n                        renderScrollComponent: (props: ScrollViewProps) => (\r\n                            <ScrollView\r\n                                {...props}\r\n                                contentContainerStyle={[\r\n                                    props.contentContainerStyle,\r\n                                    // This is actually a paddingTop but gifted-chat flips the rendering.\r\n                                    // (compensates for the height of the transparent header)\r\n                                    {paddingBottom: 100},\r\n                                ]}\r\n                            />\r\n                        ),\r\n                    }}\r\n                    renderComposer={(props: ComposerProps) => (\r\n                        <Composer\r\n                            {...props}\r\n                            textInputProps={{\r\n                                ...props.textInputProps,\r\n                                autoFocus: false,\r\n                                style: [\r\n                                    styles.textInput,\r\n                                    Platform.OS === \"web\" ? ({outline: \"none\"} as TextStyle) : {},\r\n                                ],\r\n                                multiline: true,\r\n                                ...(Platform.OS === \"web\"\r\n                                    ? {\r\n                                          onFocus: () => this.forceUpdate(), // workaround to get the ugly outline on web to disappear properly\r\n                                          onKeyPress: (ev) => {\r\n                                              const e = (ev as unknown) as KeyboardEvent;\r\n                                              if (e.key === \"Enter\" && !e.altKey && !e.shiftKey && props.text) {\r\n                                                  // The typing expects _id, createdAt and user properties, but gifted-chat creates them itself if not given\r\n                                                  this.ref.current?.onSend([{text: props.text.trim()} as never], true);\r\n                                              }\r\n                                          },\r\n                                      }\r\n                                    : {}),\r\n                            }}\r\n                        />\r\n                    )}\r\n                    minInputToolbarHeight={MIN_INPUT_HEIGHT + INPUT_VERTICAL_MARGIN * 2}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <KeyboardAvoidingView behavior={Platform.OS === \"ios\" ? \"padding\" : undefined} style={styles.container}>\r\n                    {chatComponent}\r\n                </KeyboardAvoidingView>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nfunction ChatFooter({userWriting, theme}: {userWriting?: ChatRoomUser; theme: Theme}): JSX.Element {\r\n    if (userWriting) {\r\n        return (\r\n            <View style={{height: 50, paddingTop: 10, marginBottom: 5}}>\r\n                <Message\r\n                    key=\"isWriting\"\r\n                    user={userWriting}\r\n                    showUserAvatar={true}\r\n                    position=\"left\"\r\n                    renderAvatar={(props: GiftedAvatarProps) => <GiftedAvatar {...props} user={userWriting} />}\r\n                    renderBubble={(props: BubbleProps<IMessage>) => (\r\n                        <Bubble\r\n                            {...props}\r\n                            wrapperStyle={{\r\n                                left: {backgroundColor: \"transparent\"},\r\n                                right: {},\r\n                            }}\r\n                            renderCustomView={() => (\r\n                                <TypingAnimation\r\n                                    dotColor={theme.textLight}\r\n                                    dotAmplitude={3}\r\n                                    dotSpeed={0.16}\r\n                                    dotMargin={8}\r\n                                    dotRadius={4}\r\n                                    dotX={20}\r\n                                    dotY={-25}\r\n                                />\r\n                            )}\r\n                        />\r\n                    )}\r\n                ></Message>\r\n            </View>\r\n        );\r\n    } else return <></>;\r\n}\r\n\r\nfunction ChatMessage({\r\n    theme,\r\n    seenBy,\r\n    messageProps,\r\n}: {\r\n    theme: Theme;\r\n    seenBy: ChatRoomUser[];\r\n    messageProps: MessageProps<IMessage>;\r\n}): JSX.Element {\r\n    const styles = themedStyles(theme);\r\n    return (\r\n        <View style={messageProps.position === \"left\" ? styles.messageContainerLeft : styles.messageContainerRight}>\r\n            <Message\r\n                {...messageProps}\r\n                containerStyle={{\r\n                    left: [messageProps.containerStyle?.left],\r\n                    right: [messageProps.containerStyle?.right, {marginBottom: 2}],\r\n                }}\r\n            />\r\n            {seenBy.length > 0 && (\r\n                <View\r\n                    style={[\r\n                        messageProps.position === \"left\"\r\n                            ? styles.messageReadContainerLeft\r\n                            : styles.messageReadContainerRight,\r\n                    ]}\r\n                >\r\n                    {seenBy.map((u: ChatRoomUser) => (\r\n                        <GiftedAvatar\r\n                            key={`read-message-${u._id}`}\r\n                            user={u}\r\n                            avatarStyle={styles.messageReadAvatar}\r\n                            textStyle={styles.messageReadAvatarText}\r\n                        />\r\n                    ))}\r\n                </View>\r\n            )}\r\n        </View>\r\n    );\r\n}\r\n\r\nfunction ChatActions({actionsProps, theme}: {actionsProps: ActionsProps; theme: Theme}): JSX.Element {\r\n    return <></>;\r\n\r\n    const styles = themedStyles(theme);\r\n    return (\r\n        <>\r\n            {DEBUG_MODE && (\r\n                <Actions\r\n                    {...actionsProps}\r\n                    containerStyle={styles.actionContainer}\r\n                    icon={() => <MaterialIcons style={styles.actionIcon} name=\"photo-camera\" />}\r\n                    options={{\r\n                        \"Send a picture\": async () => {\r\n                            await ImagePicker.launchImageLibraryAsync({\r\n                                mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n                                allowsEditing: true,\r\n                                aspect: [1, 1],\r\n                                //quality: AVATAR_QUALITY,\r\n                            });\r\n                        },\r\n                    }}\r\n                />\r\n            )}\r\n            {DEBUG_MODE && (\r\n                <Actions\r\n                    {...actionsProps}\r\n                    containerStyle={styles.actionContainer}\r\n                    icon={() => <MaterialIcons style={styles.actionIcon} name=\"build\" />}\r\n                    options={{\r\n                        \"Spam Lorem Ipsum\": async () => {\r\n                            const text =\r\n                                \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dosum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?\";\r\n                            const words = text.split(\" \");\r\n                            let i = 0;\r\n                            while (i < words.length) {\r\n                                const n = 1 + Math.min(Math.floor(Math.random() * 12), words.length - 1 - i);\r\n                                const msg = words.slice(i, i + n).join(\" \");\r\n                                const id = GiftedChat.defaultProps.messageIdGenerator();\r\n                                (store.dispatch as MyThunkDispatch)(sendChatMessage(id, msg, new Date()));\r\n                                i += n;\r\n                            }\r\n                        },\r\n                    }}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n        },\r\n        inputToolbarContainer: {\r\n            justifyContent: \"center\",\r\n            borderTopWidth: 0,\r\n            backgroundColor: theme.background,\r\n        },\r\n        inputToolbarPrimary: {\r\n            alignItems: \"flex-end\",\r\n        },\r\n        textInput: {\r\n            backgroundColor: theme.cardBackground,\r\n            //borderWidth: 1,\r\n            //borderColor: theme.cardBackground,\r\n            borderRadius: 20,\r\n            marginVertical: INPUT_VERTICAL_MARGIN,\r\n            marginHorizontal: 20,\r\n            paddingHorizontal: 15,\r\n            paddingTop: 10,\r\n            paddingBottom: 10,\r\n            fontSize: 15,\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            alignSelf: \"flex-end\",\r\n            color: theme.text,\r\n        },\r\n        send: {\r\n            fontSize: 30,\r\n            color: theme.accent,\r\n        },\r\n        sendContainer: {\r\n            height: MIN_INPUT_HEIGHT,\r\n            justifyContent: \"center\",\r\n            marginVertical: INPUT_VERTICAL_MARGIN,\r\n            marginRight: 10,\r\n        },\r\n        actionContainer: {\r\n            height: MIN_INPUT_HEIGHT,\r\n            justifyContent: \"center\",\r\n        },\r\n        actionIcon: {\r\n            fontSize: 28,\r\n            width: 28,\r\n            height: 28,\r\n            color: theme.text,\r\n        },\r\n        bubbleWrapperLeft: {\r\n            backgroundColor: theme.chatBubble,\r\n        },\r\n        bubbleWrapperRight: {\r\n            paddingLeft: 10,\r\n        },\r\n        bubbleTextLeft: {\r\n            color: theme.text,\r\n        },\r\n        bubbleTextRight: {\r\n            marginLeft: 0,\r\n        },\r\n        messageContainerLeft: {},\r\n        messageContainerRight: {\r\n            paddingRight: 20,\r\n        },\r\n        messageReadContainerLeft: {\r\n            position: \"absolute\",\r\n            right: 5,\r\n            bottom: 3,\r\n        },\r\n        messageReadContainerRight: {\r\n            position: \"absolute\",\r\n            right: 5,\r\n            bottom: 3,\r\n        },\r\n        messageReadAvatar: {\r\n            width: 20,\r\n            height: 20,\r\n        },\r\n        messageReadAvatarText: {\r\n            fontSize: 12,\r\n        },\r\n        messageTicksContainer: {\r\n            marginRight: 4,\r\n            minWidth: 15,\r\n        },\r\n        messageTick: {\r\n            fontSize: 14,\r\n            color: theme.textWhite,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ChatScreen));\r\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\r\nimport {Dimensions} from \"react-native\";\r\nimport {colors} from \"react-native-elements\";\r\n\r\nexport function initPolyfills(): void {\r\n    // FIXME: https://github.com/react-native-elements/react-native-elements/pull/2561\r\n\r\n    // @ts-ignore react-native-elements typings are missing \"web\"\r\n    if (!colors.platform.web) {\r\n        // @ts-ignore react-native-elements typings are missing \"web\"\r\n        colors.platform.web = {\r\n            primary: \"#2089dc\",\r\n            secondary: \"#ca71eb\",\r\n            grey: \"#393e42\",\r\n            searchBg: \"#303337\",\r\n            success: \"#52c41a\",\r\n            error: \"#ff190c\",\r\n            warning: \"#faad14\",\r\n        };\r\n    }\r\n}\r\n\r\nexport function normalizeWheelEvent(e: WheelEvent): {spinY: number; pixelY: number} {\r\n    // Reasonable defaults\r\n    const PIXEL_STEP = 10;\r\n    const LINE_HEIGHT = 40;\r\n    const PAGE_HEIGHT = Dimensions.get(\"window\").height;\r\n\r\n    let sY = 0; // spinY\r\n    let pY = 0; // pixelY\r\n\r\n    // Legacy\r\n    if (\"detail\" in e) sY = e.detail;\r\n    if (\"wheelDelta\" in e) sY = -(e as {wheelDelta: number}).wheelDelta / 120;\r\n    if (\"wheelDeltaY\" in e) sY = -(e as {wheelDeltaY: number}).wheelDeltaY / 120;\r\n\r\n    if (\"deltaY\" in e) pY = e.deltaY;\r\n    else pY = sY * PIXEL_STEP;\r\n\r\n    if (pY && e.deltaMode) {\r\n        // delta in LINE units\r\n        if (e.deltaMode == 1) pY *= LINE_HEIGHT;\r\n        // delta in PAGE units\r\n        else pY *= PAGE_HEIGHT;\r\n    }\r\n\r\n    // Fall-back if spin cannot be determined\r\n    if (pY && !sY) sY = pY < 1 ? -1 : 1;\r\n\r\n    return {spinY: sY, pixelY: pY};\r\n}\r\n","import {NavigatorRoute} from \"../navigation/types\";\r\nimport {ONBOARDING_ORDER} from \"../screens/onboarding\";\r\nimport {ThemeKey} from \"../types\";\r\n\r\n// The navigation routes that require a connection to the chat socket.\r\nexport const CHAT_CONNECTED_ROUTES: NavigatorRoute[] = [\"ChatScreen\", \"ChatRoomsScreen\"];\r\n\r\n// Override the status bar theme for certain screens\r\nexport const STATUS_BAR_THEME_OVERRIDES: {[key in NavigatorRoute]?: ThemeKey} = {\r\n    SigninScreen: \"light\",\r\n    SignupScreen: \"light\",\r\n    ForgotPasswordScreen: \"light\",\r\n    ProfileScreen: \"light\",\r\n    MyProfileScreen: \"light\",\r\n};\r\n\r\n// Routes that will redirect when not authenticated\r\nexport const AUTHENTICATED_ROUTES: NavigatorRoute[] = ([\r\n    \"ChatRoomsScreen\",\r\n    \"ChatScreen\",\r\n    \"DeleteAccountScreen\",\r\n    \"MainScreen\",\r\n    \"MatchFilteringScreen\",\r\n    \"MatchHistoryScreen\",\r\n    \"MyProfileScreen\",\r\n    \"OnboardingSuccessfulScreen\",\r\n    \"ProfileScreen\",\r\n    \"SettingsScreen\",\r\n    \"TabHome\",\r\n    \"TabHomeScreen\",\r\n    \"TabMatching\",\r\n    \"TabMatchingScreen\",\r\n    \"TabMessaging\",\r\n    \"TabNotifications\",\r\n    \"TabNotificationsScreen\",\r\n] as NavigatorRoute[]).concat(ONBOARDING_ORDER);\r\n","/* eslint-disable react/display-name */\r\nimport * as React from \"react\";\r\nimport ChatRoomsScreen from \"../screens/messaging/ChatRoomsScreen\";\r\nimport {NavigatorRoute, TabMessagingRoot} from \"./types\";\r\nimport {rootNavigationRef, screenTitle} from \"./utils\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\nimport {createStackNavigator, StackHeaderProps} from \"@react-navigation/stack\";\r\nimport ChatScreenHeader from \"../components/headers/ChatScreenHeader\";\r\nimport ChatScreen from \"../screens/messaging/ChatScreen\";\r\nimport {AppStateStatus, AppState as RNAppState} from \"react-native\";\r\nimport chatSocket from \"../api/chat-socket\";\r\nimport {CHAT_CONNECTED_ROUTES} from \"../constants/route-settings\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {connectToChat, disconnectFromChat} from \"../state/messaging/actions\";\r\nimport store from \"../state/store\";\r\n\r\nconst Stack = createStackNavigator<TabMessagingRoot>();\r\n\r\nclass MessagingNavigator extends React.Component {\r\n    componentDidMount(): void {\r\n        // Handle app state changes (active / inactive)\r\n        let previousAppStatus: AppStateStatus;\r\n        RNAppState.addEventListener(\"change\", (status: AppStateStatus) => {\r\n            // If the app is now active\r\n            if (previousAppStatus !== \"active\" && status === \"active\") this.onAppActive();\r\n            // If the app is no longer active\r\n            if (previousAppStatus === \"active\" && status !== \"active\") this.onAppInactive();\r\n            previousAppStatus = status;\r\n        });\r\n    }\r\n\r\n    private onAppActive(): void {\r\n        // Reconnect to chat if needed\r\n        if (!chatSocket.isConnected()) {\r\n            const route = rootNavigationRef.current?.getCurrentRoute()?.name as NavigatorRoute;\r\n            const isChat = CHAT_CONNECTED_ROUTES.includes(route);\r\n            if (isChat) (store.dispatch as MyThunkDispatch)(connectToChat());\r\n        }\r\n    }\r\n\r\n    private onAppInactive(): void {\r\n        // Disconnect from the chat if connected\r\n        if (chatSocket.isConnected()) store.dispatch(disconnectFromChat());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        return (\r\n            <Stack.Navigator headerMode=\"screen\">\r\n                <Stack.Screen\r\n                    name=\"ChatRoomsScreen\"\r\n                    component={ChatRoomsScreen}\r\n                    options={{\r\n                        title: screenTitle(\"ChatRoomsScreen\"),\r\n                        headerShown: true,\r\n                        header: (props: StackHeaderProps) => <MainHeader {...props} />,\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ChatScreen\"\r\n                    options={() => ({headerShown: false, title: screenTitle(\"ChatScreen\")})}\r\n                >\r\n                    {(props) => (\r\n                        <>\r\n                            <ChatScreen {...props} />\r\n                            <ChatScreenHeader {...props} />\r\n                        </>\r\n                    )}\r\n                </Stack.Screen>\r\n            </Stack.Navigator>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Handle connecting / disconnecting from the chat depending on the focused route.\r\n */\r\nexport function handleRouteChangeForChat(route: NavigatorRoute, previousRoute: NavigatorRoute | undefined): void {\r\n    const toChat = CHAT_CONNECTED_ROUTES.includes(route);\r\n    const fromChat = previousRoute && CHAT_CONNECTED_ROUTES.includes(previousRoute);\r\n    if (!fromChat && toChat) (store.dispatch as MyThunkDispatch)(connectToChat());\r\n    if (fromChat && !toChat) (store.dispatch as MyThunkDispatch)(disconnectFromChat());\r\n}\r\n\r\nexport default MessagingNavigator;\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Text, TextStyle, TouchableOpacity, StyleSheet} from \"react-native\";\r\nimport {logout} from \"../state/auth/actions\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect();\r\n\r\n// Component props\r\nexport type LogOutButtonProps = {\r\n    onLogOut?: () => void;\r\n    style: TextStyle;\r\n} & ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps;\r\n\r\nclass LogOutButton extends React.Component<LogOutButtonProps> {\r\n    render(): JSX.Element {\r\n        const {dispatch, theme, onLogOut, style} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <TouchableOpacity\r\n                onPress={() => {\r\n                    dispatch(logout());\r\n                    if (onLogOut) onLogOut();\r\n                }}\r\n            >\r\n                <Text style={[styles.text, style]}>{i18n.t(\"logOut\")}</Text>\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            fontSize: 20,\r\n            color: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(LogOutButton));\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport LogOutButton from \"../components/LogOutButton\";\r\nimport {styleTextLight} from \"../styles/general\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nexport type TabHomeScreenProps = ThemeProps;\r\n\r\nclass TabHomeScreen extends React.Component<TabHomeScreenProps> {\r\n    private async fetchPostEmbed(shortCode: string): Promise<Response> {\r\n        // seaEuAlliance profile ID: 32204624961\r\n        // url=\r\n        const BASE_URL = \"https://graph.facebook.com/v9.0/instagram_oembed\";\r\n        const CLIENT_TOKEN = \"80cd0bc3c132ad645a15d234ccd841bd\";\r\n        const POST_URL = `https://www.instagram.com/p/${shortCode}/`;\r\n        const url = `${BASE_URL}?url=${POST_URL}&access_token=${CLIENT_TOKEN}`;\r\n\r\n        const headers: {[key: string]: string} = {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n        };\r\n        console.log(url);\r\n        const response = await fetch(url, {method: \"GET\", headers});\r\n        return response;\r\n    }\r\n\r\n    fetchEmbed() {\r\n        this.fetchPostEmbed(\"CJQ-ZX_rZb8\").then((response) => console.log(JSON.stringify(response)));\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    {/*<TouchableOpacity onPress={() => this.fetchEmbed()}>\r\n                        <Text style={{fontSize: 22, padding: 20}}>Fetch</Text>\r\n                    </TouchableOpacity>*/}\r\n                    <FontAwesome style={styles.icon} name=\"heart\" />\r\n                    <Text style={styles.title}>Thank you for participating in the alpha program.</Text>\r\n                    <View style={styles.separator} />\r\n                    <Text style={[styles.alphaText, {fontWeight: \"bold\"}]}>\r\n                        Found a bug or have some feedback for us or ideas for the app?\r\n                    </Text>\r\n                    <Text style={styles.alphaText}>\r\n                        Get in touch with us on Slack and we would be happy to discuss it with you!\r\n                    </Text>\r\n                    <LogOutButton style={styles.logoutButton} />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            padding: 50,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        title: {\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n            fontSize: 24,\r\n            color: theme.text,\r\n            ...styleTextLight,\r\n        },\r\n        alphaText: {\r\n            width: \"100%\",\r\n            textAlign: \"left\",\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            marginVertical: 10,\r\n        },\r\n        icon: {\r\n            color: theme.accent,\r\n            fontSize: 48,\r\n            paddingBottom: 20,\r\n        },\r\n        separator: {\r\n            marginVertical: 30,\r\n            height: 1,\r\n            opacity: 0.1,\r\n            width: \"100%\",\r\n            backgroundColor: theme.text,\r\n        },\r\n        logoutButton: {\r\n            marginTop: 80,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(TabHomeScreen);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport {blockProfile} from \"../../state/matching/actions\";\r\nimport store from \"../../state/store\";\r\nimport CustomModal, {CustomModalClass, CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\nexport type BlockProfileModalProps = ThemeProps &\r\n    Partial<CustomModalProps> & {onBlock?: () => void; profile: UserProfile | null};\r\n\r\nexport class BlockProfileModalClass extends React.Component<BlockProfileModalProps> {\r\n    modalRef = React.createRef<CustomModalClass>();\r\n\r\n    show(): void {\r\n        this.modalRef.current?.show();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, profile, onBlock, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n        return (\r\n            <CustomModal\r\n                ref={this.modalRef}\r\n                {...otherProps}\r\n                renderContent={(hide: () => void) =>\r\n                    profile ? (\r\n                        <>\r\n                            <Text style={styles.text}>\r\n                                {i18n.t(\"block.warning\", {firstname: profile.firstName, lastname: profile.lastName})}\r\n                            </Text>\r\n                            <View style={styles.actionButtonsWrapper}>\r\n                                <Button\r\n                                    text={i18n.t(\"cancel\")}\r\n                                    onPress={() => hide()}\r\n                                    skin=\"rounded-hollow\"\r\n                                    style={styles.actionButton}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"block.action\")}\r\n                                    onPress={() => {\r\n                                        hide();\r\n                                        (store.dispatch as MyThunkDispatch)(blockProfile(profile.id));\r\n                                        if (onBlock) onBlock();\r\n                                    }}\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.actionButton, styles.redBackground]}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                            </View>\r\n                        </>\r\n                    ) : (\r\n                        <></>\r\n                    )\r\n                }\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(BlockProfileModalClass);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, View, ViewStyle} from \"react-native\";\r\nimport {Flag} from \"react-native-country-picker-modal\";\r\nimport i18n from \"i18n-js\";\r\nimport {University} from \"../constants/universities\";\r\n\r\n// Component props\r\nexport type FormattedUniversityProps = {\r\n    university: University | null;\r\n    containerStyle?: ViewStyle;\r\n    flagSize?: number;\r\n    flagEmoji?: boolean;\r\n} & TextProps;\r\n\r\nexport default class FormattedUniversity extends React.Component<FormattedUniversityProps> {\r\n    render(): JSX.Element {\r\n        const {university, containerStyle, flagSize, flagEmoji, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <View style={[{flexDirection: \"row\", alignItems: \"center\"}, containerStyle]}>\r\n                {university && (\r\n                    <>\r\n                        <Flag\r\n                            countryCode={university.country}\r\n                            flagSize={flagSize || 18}\r\n                            withEmoji={flagEmoji || false}\r\n                        />\r\n                        <Text {...otherProps} style={[{marginLeft: -5}, otherProps.style]}>\r\n                            {i18n.t(`universities.${university.key}`)}\r\n                        </Text>\r\n                    </>\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n","import {MaterialIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleProp, Text, View, ViewStyle, StyleSheet, TextStyle, TouchableOpacity} from \"react-native\";\r\nimport {ThemeConsumer, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type ChipsProps<T> = {\r\n    items: T[];\r\n    label?: (item: T) => string;\r\n    removable?: boolean;\r\n    onRemove?: (item: T) => void;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    chipStyle?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n};\r\n\r\nclass Chips<T> extends React.Component<ChipsProps<T>> {\r\n    render(): JSX.Element {\r\n        const {items, label, removable, onRemove, containerStyle, chipStyle, textStyle} = this.props;\r\n\r\n        return (\r\n            // Use a theme consumer instead of the withTheme() pattern because it breaks genericity\r\n            <ThemeConsumer>\r\n                {({theme}: ThemeProps) => {\r\n                    const styles = themedStyles(theme);\r\n                    return (\r\n                        <View style={[styles.container, containerStyle]}>\r\n                            {items.map((it: T, i: number) => (\r\n                                <Chip\r\n                                    key={`chips-${i}-${it}`}\r\n                                    text={label ? label(it) : typeof it === \"string\" ? it : JSON.stringify(it)}\r\n                                    removable={removable}\r\n                                    onRemove={() => {\r\n                                        if (onRemove) onRemove(it);\r\n                                    }}\r\n                                    chipStyle={chipStyle}\r\n                                    textStyle={textStyle}\r\n                                />\r\n                            ))}\r\n                        </View>\r\n                    );\r\n                }}\r\n            </ThemeConsumer>\r\n        );\r\n    }\r\n}\r\n\r\ntype ChipProps = {\r\n    text: string;\r\n    removable?: boolean;\r\n    onRemove?: () => void;\r\n    chipStyle: StyleProp<ViewStyle>;\r\n    textStyle: StyleProp<TextStyle>;\r\n} & ThemeProps;\r\n\r\nconst Chip = withTheme(\r\n    ({text, removable, onRemove, theme, chipStyle, textStyle}: ChipProps): JSX.Element => {\r\n        const styles = themedStyles(theme);\r\n        return (\r\n            <View style={[styles.chip, chipStyle]}>\r\n                <Text\r\n                    style={[\r\n                        styles.chipText,\r\n                        removable ? {marginRight: 20} /* depends on width of \"remove\" button */ : {},\r\n                        textStyle,\r\n                    ]}\r\n                    numberOfLines={1}\r\n                >\r\n                    {text}\r\n                </Text>\r\n                {removable && (\r\n                    <TouchableOpacity\r\n                        style={styles.chipRemoveButton}\r\n                        onPress={() => {\r\n                            if (onRemove) onRemove();\r\n                        }}\r\n                    >\r\n                        <MaterialIcons name=\"close\" style={styles.chipRemoveIcon} />\r\n                    </TouchableOpacity>\r\n                )}\r\n            </View>\r\n        );\r\n    },\r\n);\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flexDirection: \"row\",\r\n            flexWrap: \"wrap\",\r\n            justifyContent: \"flex-start\",\r\n        },\r\n        chip: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            backgroundColor: theme.accentSlight,\r\n            paddingVertical: 6,\r\n            paddingHorizontal: 10,\r\n            borderRadius: 20,\r\n            marginRight: 4,\r\n            marginBottom: 4,\r\n        },\r\n        chipText: {\r\n            fontSize: 14,\r\n            color: theme.textBlack,\r\n        },\r\n        chipRemoveButton: {\r\n            position: \"absolute\",\r\n            right: 0,\r\n            width: 32,\r\n            height: 32,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        chipRemoveIcon: {\r\n            fontSize: 22,\r\n            color: theme.textBlack,\r\n        },\r\n    });\r\n});\r\n\r\nexport default Chips;\r\n","import * as React from \"react\";\r\nimport {useFocusEffect} from \"@react-navigation/native\";\r\n\r\nexport default function FocusAware({onFocus, onBlur}: {onFocus?: () => void; onBlur?: () => void}): JSX.Element {\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            if (onFocus) onFocus();\r\n            return () => {\r\n                if (onBlur) onBlur();\r\n            };\r\n        }, []),\r\n    );\r\n    return <></>;\r\n}\r\n","import {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {StyleProp, TextStyle, View, ViewStyle} from \"react-native\";\r\nimport FocusAware from \"./utility/FocusAware\";\r\n\r\nconst ANIMATION_AMPLITUDE = 25;\r\nconst DURATION = 400; // the animation duration (ms)\r\nconst PAUSE = 1000; // how much time to wait before looping the animation (ms)\r\n\r\n// Component props\r\nexport type SwipeTipProps = {\r\n    direction: \"horizontal\" | \"left\";\r\n    style?: StyleProp<ViewStyle>;\r\n    iconStyle?: StyleProp<TextStyle>;\r\n};\r\n\r\nconst ICON_NAMES: {[key: string]: string} = {\r\n    horizontal: \"gesture-swipe-horizontal\",\r\n    left: \"gesture-swipe-left\",\r\n};\r\n\r\n// Component props\r\nexport type SwipeTipState = {animating: boolean};\r\n\r\nclass SwipeTip extends React.Component<SwipeTipProps, SwipeTipState> {\r\n    offset = new ReAnimated.Value(0);\r\n\r\n    constructor(props: SwipeTipProps) {\r\n        super(props);\r\n        this.state = {animating: false};\r\n    }\r\n\r\n    setAnimating(b: boolean): void {\r\n        if (b === this.state.animating) return;\r\n\r\n        this.setState({...this.state, animating: b});\r\n\r\n        if (b) {\r\n            const dir = this.props.direction;\r\n            if (dir === \"horizontal\") {\r\n                const animate = (even: boolean): void => {\r\n                    ReAnimated.timing(this.offset, {\r\n                        toValue: even ? ANIMATION_AMPLITUDE / 2 : -ANIMATION_AMPLITUDE / 2,\r\n                        duration: DURATION,\r\n                        easing: Easing.inOut(Easing.circle),\r\n                    }).start(() => {\r\n                        // Come back to initial position\r\n                        ReAnimated.timing(this.offset, {\r\n                            toValue: 0,\r\n                            duration: DURATION,\r\n                            easing: Easing.linear,\r\n                        }).start(() => {\r\n                            // Pause before animating again\r\n                            if (this.state.animating) {\r\n                                if (even) setTimeout(() => animate(!even), PAUSE);\r\n                                else animate(!even);\r\n                            }\r\n                        });\r\n                    });\r\n                };\r\n                animate(true);\r\n            } else if (dir === \"left\") {\r\n                const animate = (): void => {\r\n                    ReAnimated.timing(this.offset, {\r\n                        toValue: -ANIMATION_AMPLITUDE / 2,\r\n                        duration: DURATION,\r\n                        easing: Easing.inOut(Easing.circle),\r\n                    }).start(() => {\r\n                        // Come back to initial position\r\n                        ReAnimated.timing(this.offset, {\r\n                            toValue: 0,\r\n                            duration: DURATION,\r\n                            easing: Easing.linear,\r\n                        }).start(() => {\r\n                            // Pause before animating again\r\n                            if (this.state.animating) setTimeout(animate, PAUSE);\r\n                        });\r\n                    });\r\n                };\r\n                animate();\r\n            }\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {direction, style, iconStyle} = this.props;\r\n\r\n        const iconName = ICON_NAMES[direction];\r\n\r\n        return (\r\n            <View style={[style]}>\r\n                <FocusAware onFocus={() => this.setAnimating(true)} onBlur={() => this.setAnimating(false)} />\r\n                <ReAnimated.View style={{left: this.offset}}>\r\n                    {iconName && <MaterialCommunityIcons name={iconName} style={iconStyle} />}\r\n                </ReAnimated.View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SwipeTip;\r\n","import * as React from \"react\";\r\nimport {LayoutChangeEvent, LayoutRectangle, Text, TouchableOpacity, View, StyleSheet, Platform} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {UserProfile, UserProfileStudent} from \"../../model/user-profile\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport BlockProfileModal from \"../modals/BlockProfileModal\";\r\nimport FormattedUniversity from \"../FormattedUniversity\";\r\nimport {OfferValueDto, SpokenLanguageDto} from \"../../api/dto\";\r\nimport {styleTextLight, styleTextThin} from \"../../styles/general\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport Chips from \"../Chips\";\r\nimport SwipeableCard, {SwipeableCardClass, SwipeActionContainer} from \"./SwipeableCard\";\r\nimport SwipeTip from \"../SwipeTip\";\r\n\r\n// Component props\r\nexport type MatchProfileCardProps = ThemeProps & {\r\n    profile: UserProfile;\r\n    onExpand?: (layout: LayoutRectangle) => void;\r\n    onSwipeLeft?: () => void;\r\n    onSwipeRight?: () => void;\r\n    onHidden?: () => void;\r\n    showSwipeTip?: boolean;\r\n};\r\n\r\n// Component state\r\nexport type MatchProfileCardState = {\r\n    expanded: boolean;\r\n    animating: boolean;\r\n    height: ReAnimated.Value<number>;\r\n};\r\n\r\nconst LOOKS = {\r\n    sideMargin: 15,\r\n    verticalSpacing: 10,\r\n    borderRadius: 20,\r\n};\r\n\r\nclass MatchProfileCard extends React.Component<MatchProfileCardProps, MatchProfileCardState> {\r\n    cardRef = React.createRef<SwipeableCardClass>();\r\n    layout: LayoutRectangle;\r\n\r\n    constructor(props: MatchProfileCardProps) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: false,\r\n            height: new ReAnimated.Value(PROFILE_PREVIEW_COLLAPSED_HEIGHT),\r\n            animating: false,\r\n        };\r\n        this.layout = {x: 0, y: 0, width: 0, height: 0};\r\n    }\r\n\r\n    expand() {\r\n        const duration = 200;\r\n        if (Platform.OS === \"web\") {\r\n            this.setState({\r\n                ...this.state,\r\n                expanded: true,\r\n                height: new ReAnimated.Value(PROFILE_PREVIEW_EXPANDED_HEIGHT),\r\n            });\r\n        } else {\r\n            this.setState({...this.state, animating: true});\r\n            ReAnimated.timing(this.state.height, {\r\n                toValue: PROFILE_PREVIEW_EXPANDED_HEIGHT,\r\n                duration,\r\n                easing: Easing.elastic(1.0),\r\n            }).start();\r\n            setTimeout(() => this.setState({...this.state, animating: false, expanded: true}), duration);\r\n        }\r\n    }\r\n\r\n    collapse() {\r\n        if (Platform.OS === \"web\") {\r\n            this.setState({\r\n                ...this.state,\r\n                expanded: false,\r\n                height: new ReAnimated.Value(PROFILE_PREVIEW_COLLAPSED_HEIGHT),\r\n            });\r\n        } else {\r\n            const duration = 100;\r\n            this.setState({...this.state, animating: true, expanded: false});\r\n            ReAnimated.timing(this.state.height, {\r\n                toValue: PROFILE_PREVIEW_COLLAPSED_HEIGHT,\r\n                duration,\r\n                easing: Easing.out(Easing.linear),\r\n            }).start();\r\n            setTimeout(() => this.setState({...this.state, animating: false}), duration);\r\n        }\r\n    }\r\n\r\n    hide(onFinish?: () => void, right?: boolean) {\r\n        /*const duration = this.state.expanded ? 160 : 120;\r\n        this.setState({...this.state, animating: true, expanded: false});\r\n        ReAnimated.timing(this.state.height, {\r\n            toValue: 0,\r\n            duration,\r\n            easing: Easing.linear,\r\n        }).start();\r\n        setTimeout(() => {\r\n            if (onFinish) onFinish();\r\n            this.cardRef.current?.hide();\r\n            if (this.props.onHidden) this.props.onHidden();\r\n        }, duration);*/\r\n        this.cardRef.current?.collapse(onFinish, right);\r\n    }\r\n\r\n    toggleExpanded() {\r\n        if (!this.state.expanded) {\r\n            this.expand();\r\n            if (this.props.onExpand) this.props.onExpand(this.layout);\r\n        } else this.collapse();\r\n    }\r\n\r\n    render() {\r\n        const {theme, profile, showSwipeTip} = this.props;\r\n        const {expanded, animating, height} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fullName = profile.firstName + \" \" + profile.lastName;\r\n\r\n        const chipStyleProps = {chipStyle: styles.chip};\r\n\r\n        const content = (\r\n            <>\r\n                <View style={styles.collapsedContent}>\r\n                    <View style={styles.avatarContainer}>\r\n                        <ProfileAvatar profile={profile} size={120} rounded containerStyle={styles.avatar} />\r\n                    </View>\r\n                    <View style={styles.infoContainer}>\r\n                        <Text style={styles.name}>{fullName}</Text>\r\n                        {profile && <FormattedUniversity style={styles.infoText} university={profile.university} />}\r\n                        <Text style={styles.infoText}>\r\n                            {i18n.t(`genders.${profile.gender}`)}\r\n                            {\", \"}\r\n                            {i18n.t(`allRoles.${profile.type}`)}\r\n                            {profile.type == \"student\"\r\n                                ? ` (${i18n.t(`degrees.${(profile as UserProfileStudent).degree}`)})`\r\n                                : \"\"}\r\n                        </Text>\r\n                        {/*<Text style={styles.infoText}>{i18n.t(`genders.${profile.gender}`)}</Text>*/}\r\n                    </View>\r\n                    {showSwipeTip && (\r\n                        <SwipeTip direction=\"horizontal\" style={styles.swipeTip} iconStyle={styles.swipeTipIcon} />\r\n                    )}\r\n                </View>\r\n                {(expanded || animating) && (\r\n                    <View style={styles.expandedContent}>\r\n                        <Text style={styles.expandedSectionTitle}>{i18n.t(\"spokenLanguages\")}</Text>\r\n                        <Chips\r\n                            items={profile.languages}\r\n                            label={(v: SpokenLanguageDto) =>\r\n                                `${i18n.t(`languageNames.${v.code}`)}${\r\n                                    v.level != \"native\" ? ` (${v.level.toUpperCase()})` : \"\"\r\n                                }`\r\n                            }\r\n                            {...chipStyleProps}\r\n                        />\r\n                        <Text style={styles.expandedSectionTitle}>{i18n.t(\"offers\")}</Text>\r\n                        <Chips\r\n                            items={profile.profileOffers}\r\n                            label={(o: OfferValueDto) => i18n.t(`allOffers.${o.offerId}.name`)}\r\n                            {...chipStyleProps}\r\n                        />\r\n\r\n                        {/*<Text style={styles.expandedSectionTitle}>{i18n.t(\"fieldsOfEducation\")}</Text>\r\n                                <View style={styles.chipsContainer}>\r\n                                    {profile.educationFields.map((fieldId: string) => (\r\n                                        <ItemChip\r\n                                            key={`${profile.id}-${fieldId}`}\r\n                                            text={i18n.t(`educationFields.${fieldId}`)}\r\n                                        />\r\n                                    ))}\r\n                                </View>\r\n                                */}\r\n                        {/*\r\n                                <Text style={styles.expandedSectionTitle}>{i18n.t(\"interests\")}</Text>\r\n                                <View style={styles.chipsContainer}>\r\n                                    {profile.interests.map((interestId: string) => (\r\n                                        <ItemChip\r\n                                            key={`${profile.id}-${interestId}`}\r\n                                            text={i18n.t(`interests.${interestId}`)}\r\n                                        />\r\n                                    ))}\r\n                                </View>\r\n                                */}\r\n                        <BlockProfileModal\r\n                            profile={profile}\r\n                            activator={(open) => (\r\n                                <TouchableOpacity style={styles.blockButton} onPress={() => open()}>\r\n                                    <MaterialIcons style={styles.blockButtonIcon} name=\"block\" />\r\n                                </TouchableOpacity>\r\n                            )}\r\n                            onBlock={() => this.hide()}\r\n                        />\r\n                    </View>\r\n                )}\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <SwipeableCard\r\n                ref={this.cardRef}\r\n                looks={LOOKS}\r\n                wrapperProps={{\r\n                    onLayout: (e: LayoutChangeEvent) => {\r\n                        this.layout = e.nativeEvent.layout;\r\n                    },\r\n                }}\r\n                useNativeAnimations={Platform.OS !== \"web\"}\r\n                friction={1}\r\n                leftThreshold={100}\r\n                rightThreshold={100}\r\n                onSwipeableRightWillOpen={() => {\r\n                    this.hide(() => {\r\n                        if (this.props.onSwipeLeft) this.props.onSwipeLeft();\r\n                    }, false);\r\n                }}\r\n                onSwipeableLeftWillOpen={() => {\r\n                    this.hide(() => {\r\n                        if (this.props.onSwipeRight) this.props.onSwipeRight();\r\n                    }, true);\r\n                }}\r\n                renderRightActions={() => (\r\n                    <SwipeActionContainer\r\n                        side=\"right\"\r\n                        looks={LOOKS}\r\n                        fullCardWidth\r\n                        contentStyle={styles.swipeActionContentRight}\r\n                    >\r\n                        <Text style={styles.swipeActionText}>{i18n.t(\"matching.actionHide\")}</Text>\r\n                    </SwipeActionContainer>\r\n                )}\r\n                renderLeftActions={() => (\r\n                    <SwipeActionContainer\r\n                        side=\"left\"\r\n                        looks={LOOKS}\r\n                        fullCardWidth\r\n                        contentStyle={styles.swipeActionContentLeft}\r\n                    >\r\n                        <Text style={styles.swipeActionText}>{i18n.t(\"matching.actionLike\")}</Text>\r\n                    </SwipeActionContainer>\r\n                )}\r\n                onPress={() => this.toggleExpanded()}\r\n            >\r\n                {Platform.OS !== \"web\" && (\r\n                    <ReAnimated.View style={[styles.cardContent, {height}]}>{content}</ReAnimated.View>\r\n                )}\r\n                {Platform.OS === \"web\" && (\r\n                    <View style={[styles.cardContent, {height: height[\" __value\"]}]}>{content}</View>\r\n                )}\r\n            </SwipeableCard>\r\n        );\r\n    }\r\n}\r\n\r\nexport const Separator = withTheme(({theme}: ThemeProps) => {\r\n    return <View style={themedStyles(theme).separator}></View>;\r\n});\r\n\r\nconst PROFILE_PREVIEW_COLLAPSED_HEIGHT = 150;\r\nconst PROFILE_PREVIEW_EXPANDED_HEIGHT = 360;\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        swipeActionContentRight: {\r\n            backgroundColor: theme.accentTernary,\r\n            alignItems: \"center\",\r\n            justifyContent: \"flex-end\",\r\n            padding: 20,\r\n        },\r\n        swipeActionContentLeft: {\r\n            backgroundColor: theme.accentSlight,\r\n            alignItems: \"center\",\r\n            padding: 20,\r\n        },\r\n        swipeActionText: {\r\n            fontSize: 24,\r\n            letterSpacing: 2,\r\n            textTransform: \"uppercase\",\r\n            ...styleTextThin,\r\n        },\r\n\r\n        // Card content\r\n\r\n        cardContent: {\r\n            padding: 10,\r\n        },\r\n\r\n        collapsedContent: {\r\n            flexDirection: \"row\",\r\n        },\r\n\r\n        avatarContainer: {\r\n            justifyContent: \"center\",\r\n        },\r\n        avatar: {\r\n            backgroundColor: theme.accentSecondary,\r\n        },\r\n        infoContainer: {\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            paddingLeft: 10,\r\n        },\r\n        name: {\r\n            fontSize: 22,\r\n            letterSpacing: 0.8,\r\n            marginBottom: 5,\r\n            flexShrink: 1, // Ensures text wrapping\r\n            color: theme.text,\r\n        },\r\n        infoText: {\r\n            fontSize: 16,\r\n            letterSpacing: 0.5,\r\n            color: theme.textLight,\r\n            flexShrink: 1, // Ensures text wrapping\r\n        },\r\n\r\n        swipeTip: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            right: 5,\r\n        },\r\n        swipeTipIcon: {\r\n            fontSize: 22,\r\n            color: theme.textLight,\r\n        },\r\n\r\n        separator: {\r\n            height: 1,\r\n            width: \"100%\",\r\n            backgroundColor: \"#000\",\r\n            opacity: 0.1,\r\n            alignSelf: \"center\",\r\n            marginBottom: 5,\r\n        },\r\n\r\n        expandedContent: {\r\n            flex: 1,\r\n        },\r\n\r\n        chip: {\r\n            //borderRadius: 6,\r\n            paddingHorizontal: 5,\r\n            paddingVertical: 2,\r\n            flexGrow: 1,\r\n            justifyContent: \"center\",\r\n        },\r\n\r\n        expandedSectionTitle: {\r\n            ...styleTextLight,\r\n            fontSize: 14,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            marginTop: 5,\r\n            color: theme.text,\r\n        },\r\n        blockButton: {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n        },\r\n        blockButtonIcon: {\r\n            fontSize: 30,\r\n            color: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(MatchProfileCard);\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, StyleProp, Text, View, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport Button, {ButtonProps, BUTTON_SKINS} from \"./Button\";\r\n\r\n// Component props\r\nexport type AsyncButtonProps = Omit<ButtonProps, \"onPress\"> & {\r\n    onPress: () => Promise<unknown>;\r\n    loadingIndicatorStyle?: StyleProp<ViewStyle>;\r\n    loadingIndicatorColor?: string;\r\n} & ThemeProps;\r\n\r\n// Component state\r\ntype AsyncButtonState = {\r\n    loading: boolean;\r\n};\r\n\r\nclass AsyncButton extends React.Component<AsyncButtonProps, AsyncButtonState> {\r\n    constructor(props: AsyncButtonProps) {\r\n        super(props);\r\n        this.state = {loading: false};\r\n    }\r\n\r\n    onPress() {\r\n        if (!this.state.loading) {\r\n            this.setState({...this.state, loading: true});\r\n            this.props.onPress().then(() => this.setState({...this.state, loading: false}));\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {loadingIndicatorStyle, loadingIndicatorColor, theme, ...otherProps} = this.props;\r\n        const {loading} = this.state;\r\n\r\n        const skinStyles = this.props.skin ? BUTTON_SKINS[this.props.skin](theme) : {button: {}, text: {}};\r\n\r\n        return (\r\n            <Button {...otherProps} {...{onPress: loading ? undefined : () => this.onPress()}}>\r\n                {loading && (\r\n                    <>\r\n                        <ActivityIndicator\r\n                            color={loadingIndicatorColor || theme.accentTernary}\r\n                            style={[\r\n                                {position: \"absolute\", top: 0, right: 0, bottom: 0, left: 0, margin: \"auto\"},\r\n                                loadingIndicatorStyle,\r\n                            ]}\r\n                        />\r\n                        <View style={{opacity: 0}}>\r\n                            <Text style={[skinStyles.text, this.props.textStyle]}>{this.props.text}</Text>\r\n                            {this.props.icon}\r\n                        </View>\r\n                    </>\r\n                )}\r\n            </Button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(AsyncButton);\r\n","import React from \"react\";\r\nimport {StyleProp, View, ViewStyle} from \"react-native\";\r\nimport Svg, {Path} from \"react-native-svg\";\r\n\r\nexport type WaveProps = {\r\n    style?: StyleProp<ViewStyle>;\r\n    color: string;\r\n    patternIndex?: number | \"random\";\r\n    upsideDown?: boolean;\r\n};\r\n\r\ntype WaveState = {\r\n    wavePatternIdx: number;\r\n};\r\n\r\nconst WAVE_PATTERNS = [\r\n    \"M0,160L48,154.7C96,149,192,139,288,165.3C384,192,480,256,576,245.3C672,235,768,149,864,101.3C960,53,1056,43,1152,64C1248,85,1344,139,1392,165.3L1440,192L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,224L48,197.3C96,171,192,117,288,128C384,139,480,213,576,218.7C672,224,768,160,864,144C960,128,1056,160,1152,181.3C1248,203,1344,213,1392,218.7L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,96L48,106.7C96,117,192,139,288,160C384,181,480,203,576,213.3C672,224,768,224,864,192C960,160,1056,96,1152,85.3C1248,75,1344,117,1392,138.7L1440,160L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,192L48,197.3C96,203,192,213,288,197.3C384,181,480,139,576,122.7C672,107,768,117,864,128C960,139,1056,149,1152,133.3C1248,117,1344,75,1392,53.3L1440,32L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,128L48,138.7C96,149,192,171,288,160C384,149,480,107,576,122.7C672,139,768,213,864,202.7C960,192,1056,96,1152,64C1248,32,1344,64,1392,80L1440,96L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,64L48,90.7C96,117,192,171,288,170.7C384,171,480,117,576,96C672,75,768,85,864,101.3C960,117,1056,139,1152,160C1248,181,1344,203,1392,213.3L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,160L48,154.7C96,149,192,139,288,122.7C384,107,480,85,576,96C672,107,768,149,864,138.7C960,128,1056,64,1152,53.3C1248,43,1344,85,1392,106.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,32L60,69.3C120,107,240,181,360,186.7C480,192,600,128,720,90.7C840,53,960,43,1080,48C1200,53,1320,75,1380,85.3L1440,96L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,128L60,117.3C120,107,240,85,360,64C480,43,600,21,720,64C840,107,960,213,1080,250.7C1200,288,1320,256,1380,240L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,288L60,245.3C120,203,240,117,360,101.3C480,85,600,139,720,176C840,213,960,235,1080,240C1200,245,1320,235,1380,229.3L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,96L60,117.3C120,139,240,181,360,181.3C480,181,600,139,720,138.7C840,139,960,181,1080,202.7C1200,224,1320,224,1380,224L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,160L48,181.3C96,203,192,245,288,261.3C384,277,480,267,576,224C672,181,768,107,864,106.7C960,107,1056,181,1152,202.7C1248,224,1344,192,1392,176L1440,160L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n];\r\n\r\nexport const WAVE_HEADER_HEIGHT = 100;\r\n\r\nexport default class Wave extends React.Component<WaveProps, WaveState> {\r\n    constructor(props: WaveProps) {\r\n        super(props);\r\n        this.state = {\r\n            wavePatternIdx:\r\n                props.patternIndex === \"random\"\r\n                    ? Math.floor(Math.random() * WAVE_PATTERNS.length)\r\n                    : (props.patternIndex as number),\r\n        };\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {style, color, upsideDown} = this.props;\r\n        const {wavePatternIdx} = this.state;\r\n\r\n        const wavePattern = WAVE_PATTERNS[wavePatternIdx];\r\n\r\n        return (\r\n            <View\r\n                style={[\r\n                    {\r\n                        minWidth: 400, // fix empty space above the wave on narrow screens\r\n                        height: WAVE_HEADER_HEIGHT,\r\n                        ...(upsideDown ? {transform: [{rotate: \"180deg\"}]} : {}),\r\n                    },\r\n                    style,\r\n                ]}\r\n            >\r\n                <Svg viewBox=\"0 40 1440 320\" preserveAspectRatio=\"none\">\r\n                    <Path fill={color} d={wavePattern} />\r\n                </Svg>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {openChat, rootNavigate} from \"../../navigation/utils\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\nimport AsyncButton from \"../AsyncButton\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport {OfferValueDto} from \"../../api/dto\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport Button from \"../Button\";\r\nimport {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport CustomModal, {CustomModalClass} from \"./CustomModal\";\r\nimport {getMatchingOffers} from \"../../model/utils\";\r\nimport Wave from \"../Wave\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect(\r\n    (state: AppState) => ({\r\n        localProfile: state.profile.user?.profile,\r\n    }),\r\n    null,\r\n    null,\r\n    {forwardRef: true},\r\n);\r\n\r\n// Component props\r\nexport type MatchSuccessModalProps = ThemeProps & ConnectedProps<typeof reduxConnector>;\r\n\r\ntype MatchSuccessModalState = {\r\n    profile: UserProfile | null;\r\n    roomId: string | null;\r\n    maxOffersDisplayed: number;\r\n    waveWidth: number;\r\n};\r\n\r\nconst VERTICAL_SPACE_AROUND = 0;\r\nconst MAX_WIDTH = 500;\r\n\r\nconst OFFERS_CARD_VERTICAL_PADDING = 10;\r\nconst OFFERS_CARD_LINE_HEIGHT = 20;\r\n\r\nexport class MatchSuccessModalClass extends React.Component<MatchSuccessModalProps, MatchSuccessModalState> {\r\n    private modalRef = React.createRef<CustomModalClass>();\r\n\r\n    constructor(props: MatchSuccessModalProps) {\r\n        super(props);\r\n        this.state = {profile: null, roomId: null, maxOffersDisplayed: 999, waveWidth: 0};\r\n    }\r\n\r\n    show(profile: UserProfile, roomId: string | null): void {\r\n        this.modalRef.current?.show();\r\n\r\n        /*if (Math.random() < 0.5) {\r\n            profile = JSON.parse(\r\n                '{\"id\":\"f70bd845-26e9-4aa9-9c13-33c4ff3d5036\",\"type\":\"student\",\"firstName\":\"Test\",\"lastName\":\"Test\",\"gender\":\"male\",\"nationality\":\"FR\",\"languages\":[{\"code\":\"fr\",\"level\":\"native\"}],\"profileOffers\":[{\"allowStaff\":false,\"allowStudent\":false,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"grab-a-drink\"},{\"allowStaff\":false,\"allowStudent\":false,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"provide-a-couch\"},{\"allowStaff\":false,\"allowStudent\":false,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"get-into-campus-life\"},{\"allowStaff\":true,\"allowStudent\":true,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"cowork-on-a-project\"},{\"allowStaff\":true,\"allowStudent\":true,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"answer-academic-questions\"},{\"allowStaff\":true,\"allowStudent\":true,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"language-tandem\"},{\"allowStaff\":true,\"allowStudent\":true,\"allowMale\":true,\"allowFemale\":true,\"allowOther\":true,\"offerId\":\"share-interests\"}],\"avatar\":null,\"score\":0,\"degree\":\"m2\",\"avatarUrl\":null,\"birthdate\":\"1997-02-13T23:00:00.000Z\",\"educationFields\":[],\"interests\":[\"climbing\",\"bbq\"],\"university\":{\"key\":\"univ-brest\",\"country\":\"FR\"}}'\r\n            );\r\n        }*/\r\n\r\n        this.setState({...this.state, profile, roomId, maxOffersDisplayed: 999});\r\n    }\r\n\r\n    hide(): void {\r\n        this.modalRef.current?.hide();\r\n        this.setState({...this.state, profile: null});\r\n    }\r\n\r\n    async chat(): Promise<void> {\r\n        const {roomId} = this.state;\r\n        this.hide();\r\n        if (roomId) openChat(roomId);\r\n        else rootNavigate(\"MainScreen\", {screen: \"TabMessaging\"});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, localProfile} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const {profile, maxOffersDisplayed, waveWidth} = this.state;\r\n        const profileOffers =\r\n            localProfile && profile && profile.profileOffers\r\n                ? getMatchingOffers(profile.profileOffers, localProfile)\r\n                : [];\r\n\r\n        /*const profileOffers =\r\n            localProfile && profile && profile.profileOffers\r\n                ? getMatchingOffers(\r\n                      [\r\n                          {\r\n                              offerId: \"provide-a-couch\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                          {\r\n                              offerId: \"grab-a-drink\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                          {\r\n                              offerId: \"answer-academic-questions\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                          {\r\n                              offerId: \"get-into-campus-life\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                          {\r\n                              offerId: \"cowork-on-a-project\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                          {\r\n                              offerId: \"share-interests\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                          {\r\n                              offerId: \"language-tandem\",\r\n                              allowMale: true,\r\n                              allowFemale: true,\r\n                              allowOther: true,\r\n                              allowStaff: true,\r\n                              allowStudent: true,\r\n                          },\r\n                      ],\r\n                      localProfile,\r\n                  )\r\n                : [];*/\r\n\r\n        return (\r\n            <CustomModal\r\n                ref={this.modalRef}\r\n                fullHeight\r\n                noBackground\r\n                backdropBlur\r\n                backdropOpacity={0}\r\n                animationType=\"fade\"\r\n                modalViewStyle={styles.modal}\r\n                renderContent={() => (\r\n                    <>\r\n                        <Wave\r\n                            color={theme.greenModalBackground}\r\n                            style={{width: waveWidth}}\r\n                            upsideDown\r\n                            patternIndex={9}\r\n                        />\r\n\r\n                        <View\r\n                            style={styles.container}\r\n                            onLayout={(layout) => {\r\n                                const {width} = layout.nativeEvent.layout;\r\n                                this.setState({...this.state, waveWidth: width});\r\n                            }}\r\n                        >\r\n                            <View style={styles.topContainer}>\r\n                                <Text style={styles.title}>{i18n.t(\"matching.success.title\")}</Text>\r\n                                <View style={styles.separator} />\r\n                            </View>\r\n\r\n                            <View style={styles.profileInfoContainer}>\r\n                                <ProfileAvatar\r\n                                    profile={profile || undefined}\r\n                                    size={150}\r\n                                    rounded\r\n                                    containerStyle={styles.avatarContainer}\r\n                                />\r\n                                <Text style={styles.name}>\r\n                                    {profile?.firstName} {profile?.lastName}\r\n                                </Text>\r\n\r\n                                {profileOffers.length > 0 && (\r\n                                    <View\r\n                                        style={[styles.offersCard, maxOffersDisplayed === 999 ? {opacity: 0} : {}]}\r\n                                        onLayout={(layout) => {\r\n                                            const height = layout.nativeEvent.layout.height;\r\n                                            const availableHeight = height - OFFERS_CARD_VERTICAL_PADDING * 2;\r\n                                            let numItems = Math.floor(availableHeight / OFFERS_CARD_LINE_HEIGHT) - 1;\r\n                                            if (numItems < profileOffers.length) numItems--; // leave space to show \"n more\"\r\n                                            if (numItems >= 0 && numItems != maxOffersDisplayed)\r\n                                                this.setState({...this.state, maxOffersDisplayed: numItems});\r\n                                        }}\r\n                                    >\r\n                                        <Text style={styles.offerText}>{i18n.t(\"matching.success.offersTitle\")}</Text>\r\n                                        {profileOffers.slice(0, maxOffersDisplayed).map((o: OfferValueDto) => (\r\n                                            <View key={`match-profile-offer-${o.offerId}`}>\r\n                                                <Text numberOfLines={1} style={styles.offerText}>\r\n                                                    - {i18n.t(`allOffers.${o.offerId}.name`)}\r\n                                                </Text>\r\n                                            </View>\r\n                                        ))}\r\n                                        {maxOffersDisplayed < profileOffers.length && (\r\n                                            <Text style={styles.offerText}>\r\n                                                {profileOffers.length - maxOffersDisplayed}{\" \"}\r\n                                                {i18n.t(\"matching.success.offersMore\")}\r\n                                            </Text>\r\n                                        )}\r\n                                    </View>\r\n                                )}\r\n                            </View>\r\n\r\n                            <View style={styles.actionsContainer}>\r\n                                <AsyncButton\r\n                                    text={i18n.t(\"matching.success.chat\")}\r\n                                    skin=\"rounded-filled\"\r\n                                    icon={<MaterialCommunityIcons name=\"chat\" style={styles.actionIcon} />}\r\n                                    style={styles.action}\r\n                                    onPress={async () => await this.chat()}\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"matching.success.continue\")}\r\n                                    icon={\r\n                                        <MaterialCommunityIcons\r\n                                            name=\"gesture-swipe-vertical\"\r\n                                            style={styles.actionIcon}\r\n                                        />\r\n                                    }\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.action, {backgroundColor: theme.actionNeutral}]}\r\n                                    onPress={() => this.hide()}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n\r\n                        <Wave color={theme.greenModalBackground} style={{width: waveWidth}} patternIndex={5} />\r\n                    </>\r\n                )}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        modal: {\r\n            paddingHorizontal: 0,\r\n            paddingVertical: VERTICAL_SPACE_AROUND,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            maxWidth: MAX_WIDTH,\r\n            justifyContent: \"center\",\r\n        },\r\n        container: {\r\n            width: \"100%\",\r\n            backgroundColor: theme.greenModalBackground,\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n            overflow: \"hidden\",\r\n            flexShrink: 1,\r\n        },\r\n        topContainer: {\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n        },\r\n        profileInfoContainer: {\r\n            alignItems: \"center\",\r\n            flexShrink: 1,\r\n        },\r\n        actionsContainer: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            width: \"85%\",\r\n            maxWidth: 400,\r\n        },\r\n        title: {\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n            ...styleTextThin,\r\n            fontSize: 26,\r\n            color: theme.textWhite,\r\n            letterSpacing: 1,\r\n            textTransform: \"uppercase\",\r\n        },\r\n        separator: {\r\n            marginTop: 10,\r\n            marginBottom: 20,\r\n            height: 1,\r\n            width: \"80%\",\r\n            backgroundColor: theme.textWhite,\r\n            opacity: 0.4,\r\n        },\r\n        avatarContainer: {\r\n            borderColor: theme.textWhite,\r\n            borderWidth: 0.5,\r\n        },\r\n        name: {\r\n            color: theme.textWhite,\r\n            fontSize: 24,\r\n            marginVertical: 5,\r\n        },\r\n        offersCard: {\r\n            backgroundColor: \"#0001\",\r\n            borderRadius: 20,\r\n            paddingVertical: OFFERS_CARD_VERTICAL_PADDING,\r\n            paddingHorizontal: 20,\r\n            marginVertical: 10,\r\n            flexShrink: 1,\r\n            overflow: \"hidden\",\r\n        },\r\n        offerText: {\r\n            color: theme.textWhite,\r\n            fontSize: 16,\r\n            lineHeight: OFFERS_CARD_LINE_HEIGHT,\r\n        },\r\n        action: {\r\n            flex: 1,\r\n            marginHorizontal: 5,\r\n        },\r\n        actionIcon: {\r\n            fontSize: 22,\r\n            color: theme.textWhite,\r\n            marginLeft: 10,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(MatchSuccessModalClass));\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {LayoutRectangle, StyleSheet, Text} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport MatchProfileCard from \"../components/cards/MatchProfileCard\";\r\nimport {dislikeProfile, fetchProfiles, likeProfile, refreshFetchedProfiles} from \"../state/matching/actions\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {TabMatchingRoot} from \"../navigation/types\";\r\nimport {PROFILES_FETCH_LIMIT} from \"../constants/config\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport InfiniteScroller from \"../components/InfiniteScroller\";\r\nimport MatchSuccessModal, {MatchSuccessModalClass} from \"../components/modals/MatchSuccessModal\";\r\nimport {MatchActionStatus} from \"../api/dto\";\r\nimport layout from \"../constants/layout\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    profiles: state.matching.fetchedProfiles,\r\n    fetchingProfiles: state.matching.profilesPagination.fetching,\r\n    canFetchMore: state.matching.profilesPagination.canFetchMore,\r\n    currentPage: state.matching.profilesPagination.page,\r\n    isFirstLaunch: state.settings.isFirstLaunch,\r\n}));\r\n\r\n// Component props\r\ntype TabMatchingScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<TabMatchingRoot, \"TabMatchingScreen\">;\r\n\r\nclass TabMatchingScreen extends React.Component<TabMatchingScreenProps> {\r\n    scrollerRef = React.createRef<InfiniteScroller<UserProfile>>();\r\n    successModalRef = React.createRef<MatchSuccessModalClass>();\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            profiles,\r\n            theme,\r\n            fetchingProfiles,\r\n            canFetchMore,\r\n            isFirstLaunch,\r\n            currentPage,\r\n            navigation,\r\n            dispatch,\r\n        } = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper forceFullWidth>\r\n                <InfiniteScroller\r\n                    ref={this.scrollerRef}\r\n                    navigation={navigation}\r\n                    fetchLimit={PROFILES_FETCH_LIMIT}\r\n                    fetchMore={() => (dispatch as MyThunkDispatch)(fetchProfiles())}\r\n                    fetching={fetchingProfiles}\r\n                    canFetchMore={canFetchMore}\r\n                    // refreshOnFocus={true}\r\n                    currentPage={currentPage}\r\n                    items={profiles}\r\n                    id={(profile: UserProfile): string => profile.id}\r\n                    noResultsComponent={\r\n                        <>\r\n                            <Text style={styles.noResultsText1}>{i18n.t(\"matching.noResults\")}</Text>\r\n                            <Text style={styles.noResultsText2}>{i18n.t(\"matching.noItemsAdvice\")}</Text>\r\n                        </>\r\n                    }\r\n                    endOfItemsComponent={\r\n                        <>\r\n                            <Text style={styles.noResultsText1}>{i18n.t(\"matching.noMoreItems\")}</Text>\r\n                            <Text style={styles.noResultsText2}>{i18n.t(\"matching.noItemsAdvice\")}</Text>\r\n                        </>\r\n                    }\r\n                    refresh={() => dispatch(refreshFetchedProfiles())}\r\n                    renderItem={(profile: UserProfile, hide: () => void) => (\r\n                        <MatchProfileCard\r\n                            key={`match-profile-card-${profile.id}`}\r\n                            profile={profile}\r\n                            onExpand={(layout: LayoutRectangle) => {\r\n                                const scroll = this.scrollerRef.current?.scrollViewRef.current;\r\n                                if (scroll) scroll.scrollTo({y: layout.y - 100, animated: true});\r\n                            }}\r\n                            onSwipeRight={async () => {\r\n                                const response = await (dispatch as MyThunkDispatch)(likeProfile(profile));\r\n                                if (response && response.status === MatchActionStatus.Matched)\r\n                                    this.successModalRef.current?.show(profile, response.roomId);\r\n                            }}\r\n                            onSwipeLeft={() => (dispatch as MyThunkDispatch)(dislikeProfile(profile))}\r\n                            onHidden={() => hide()}\r\n                            showSwipeTip={profile.id == profiles[0].id && (isFirstLaunch || layout.isWideDevice)}\r\n                        />\r\n                    )}\r\n                    // Compensate for the header\r\n                    itemsContainerStyle={styles.itemsContainer}\r\n                    progressViewOffset={100}\r\n                />\r\n                <MatchSuccessModal ref={this.successModalRef} />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        noResultsText1: {\r\n            fontSize: 20,\r\n            letterSpacing: 0.75,\r\n            color: theme.text,\r\n            marginVertical: 5,\r\n        },\r\n        noResultsText2: {\r\n            fontSize: 16,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n        itemsContainer: {\r\n            width: \"100%\",\r\n            maxWidth: 600,\r\n            alignSelf: \"center\",\r\n            paddingTop: 100,\r\n            paddingBottom: 25,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(TabMatchingScreen));\r\n","import * as React from \"react\";\r\nimport {TouchableOpacity} from \"react-native\";\r\nimport {FontAwesome, MaterialIcons} from \"@expo/vector-icons\";\r\nimport MainHeader, {MainHeaderStackProps} from \"./MainHeader\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\n\r\n// Component props\r\nexport type MatchScreenHeaderProps = MainHeaderStackProps & {\r\n    backButton?: boolean;\r\n    blur?: boolean;\r\n};\r\n\r\nclass MatchScreenHeaderClass extends React.Component<MatchScreenHeaderProps> {\r\n    render(): JSX.Element {\r\n        const {backButton, blur, ...stackProps} = this.props;\r\n\r\n        return (\r\n            <MainHeader\r\n                {...stackProps}\r\n                backButton={backButton || false}\r\n                blur={blur}\r\n                rightButtons={[\r\n                    ({buttonStyle, iconStyle}) => (\r\n                        <TouchableOpacity style={buttonStyle} onPress={() => rootNavigate(\"MatchFilteringScreen\")}>\r\n                            <FontAwesome name=\"sliders\" style={iconStyle} />\r\n                        </TouchableOpacity>\r\n                    ),\r\n                    ({buttonStyle, iconStyle}) => (\r\n                        <TouchableOpacity style={buttonStyle} onPress={() => rootNavigate(\"MatchHistoryScreen\")}>\r\n                            <MaterialIcons name=\"history\" style={iconStyle} />\r\n                        </TouchableOpacity>\r\n                    ),\r\n                ]}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default function MatchScreenHeader(props: MatchScreenHeaderProps): JSX.Element {\r\n    return <MatchScreenHeaderClass {...props} />;\r\n}\r\n","import * as React from \"react\";\r\nimport {View, ViewProps, LayoutChangeEvent, TouchableOpacity, Text} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport DropDownPicker from \"react-native-dropdown-picker\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {getPickerButtonStyleProps, PickerButtonStyleVariant, pickerStyles} from \"../styles/picker\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport Chips from \"./Chips\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\ntype PickerItem = {\r\n    value: string;\r\n    label: string;\r\n};\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    locale: state.settings.userSettings.locale,\r\n}));\r\n\r\n// Component props\r\nexport type MultiPickerProps = ConnectedProps<typeof reduxConnector> & {\r\n    values: string[];\r\n    genLabel?: (value: string) => string;\r\n    onChange?: (values: string[]) => void;\r\n    selected?: string[];\r\n    placeholder?: string;\r\n    multipleText?: string;\r\n    searchablePlaceholder?: string;\r\n    showChips?: boolean;\r\n    single?: boolean;\r\n    buttonStyleVariant?: PickerButtonStyleVariant;\r\n} & ViewProps &\r\n    ThemeProps;\r\n\r\n// Component state\r\nexport type MultiPickerState = {\r\n    items: Map<SupportedLocale, PickerItem[]>;\r\n    open: boolean;\r\n    dropdownWrapperHeight: number;\r\n};\r\n\r\nclass MultiPicker extends React.Component<MultiPickerProps, MultiPickerState> {\r\n    static defaultProps = {\r\n        items: [],\r\n        showSelected: true,\r\n        selected: [],\r\n    };\r\n\r\n    tempSelected: string[] = [];\r\n\r\n    constructor(props: MultiPickerProps) {\r\n        super(props);\r\n        this.state = {\r\n            items: new Map(),\r\n            open: false,\r\n            dropdownWrapperHeight: 0,\r\n        };\r\n        if (props.selected) this.tempSelected = props.selected;\r\n    }\r\n\r\n    updateItems() {\r\n        const locale = this.props.locale;\r\n        if (!this.state.items.has(locale) || this.state.items.get(locale)?.length != this.props.values.length) {\r\n            const items = new Map(this.state.items);\r\n            items.set(\r\n                locale,\r\n                this.props.values.map((value: string) => ({\r\n                    value,\r\n                    label: this.props.genLabel ? i18n.t(this.props.genLabel(value)) : value,\r\n                })),\r\n            );\r\n            this.setState({...this.state, items});\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateItems();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: MultiPickerProps) {\r\n        if (oldProps.locale != this.props.locale || oldProps.values.length != this.props.values.length) {\r\n            this.updateItems();\r\n        }\r\n        this.tempSelected = this.props.selected || [];\r\n    }\r\n\r\n    open() {\r\n        this.setState({...this.state, open: true});\r\n    }\r\n\r\n    close() {\r\n        this.setState({...this.state, open: false});\r\n        this.apply();\r\n    }\r\n\r\n    apply() {\r\n        if (this.props.onChange) this.props.onChange(this.tempSelected);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            locale,\r\n            selected,\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            onChange,\r\n            genLabel,\r\n            placeholder,\r\n            multipleText,\r\n            searchablePlaceholder,\r\n            showChips,\r\n            single,\r\n            buttonStyleVariant,\r\n            ...viewProps\r\n        } = this.props;\r\n        const styles = pickerStyles(theme);\r\n        const buttonStyle = getPickerButtonStyleProps(buttonStyleVariant, theme);\r\n\r\n        const selectedItems = selected || [];\r\n        const items = this.state.items.get(locale) || [];\r\n\r\n        return (\r\n            <View {...viewProps}>\r\n                <View>\r\n                    <TouchableOpacity onPress={() => this.open()} style={buttonStyle.button}>\r\n                        <Text style={[buttonStyle.text, selectedItems.length == 0 ? buttonStyle.textNoneSelected : {}]}>\r\n                            {i18n.t(\"picker.callToAction\").replace(\"%d\", selectedItems.length.toString())}\r\n                        </Text>\r\n                    </TouchableOpacity>\r\n                    {showChips && (\r\n                        <Chips\r\n                            items={selectedItems}\r\n                            label={(v) => (genLabel ? i18n.t(genLabel(v)) : v)}\r\n                            containerStyle={styles.chipContainer}\r\n                            removable={true}\r\n                            onRemove={(item: string) => {\r\n                                this.tempSelected = this.tempSelected.filter((v) => v !== item);\r\n                                this.apply();\r\n                            }}\r\n                        />\r\n                    )}\r\n                </View>\r\n                {this.state.open && (\r\n                    <CustomModal\r\n                        visible={this.state.open}\r\n                        onHide={() => this.close()}\r\n                        modalViewStyle={{\r\n                            height: 150 + items.length * 40,\r\n                            maxHeight: \"70%\",\r\n                            overflow: \"hidden\",\r\n                            paddingHorizontal: 0,\r\n                            paddingVertical: 0,\r\n                        }}\r\n                        renderContent={() => (\r\n                            <>\r\n                                <View\r\n                                    style={styles.dropdownWrapper}\r\n                                    onLayout={(e: LayoutChangeEvent) => {\r\n                                        this.setState({\r\n                                            ...this.state,\r\n                                            dropdownWrapperHeight: e.nativeEvent.layout.height,\r\n                                        });\r\n                                    }}\r\n                                >\r\n                                    <DropDownPicker\r\n                                        items={items}\r\n                                        multiple={!single}\r\n                                        searchable={true}\r\n                                        defaultValue={selected}\r\n                                        onChangeItem={(values: string[]) => {\r\n                                            this.tempSelected = values;\r\n                                        }}\r\n                                        placeholder={placeholder}\r\n                                        multipleText={multipleText}\r\n                                        searchablePlaceholder={searchablePlaceholder}\r\n                                        scrollViewProps={{keyboardShouldPersistTaps: \"handled\"}} // ensures items are clickable even when the keyboard is open\r\n                                        isVisible={true}\r\n                                        showArrow={false}\r\n                                        dropDownMaxHeight={this.state.dropdownWrapperHeight - 10}\r\n                                        // Style props\r\n                                        selectedLabelStyle={{display: \"none\"}}\r\n                                        style={styles.dropdownStyle}\r\n                                        itemStyle={styles.dropdownItemStyle}\r\n                                        activeItemStyle={styles.dropdownActiveItemStyle}\r\n                                        activeLabelStyle={styles.dropdownActiveLabelStyle}\r\n                                        labelStyle={styles.dropdownLabelStyle}\r\n                                    />\r\n                                </View>\r\n                                <TouchableOpacity onPress={() => this.close()} style={styles.okButton}>\r\n                                    <Text style={styles.okButtonText}>OK</Text>\r\n                                </TouchableOpacity>\r\n                            </>\r\n                        )}\r\n                    />\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(MultiPicker));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport MultiPicker, {MultiPickerProps} from \"./MultiPicker\";\r\nimport {PARTNER_UNIVERSITIES, University} from \"../constants/universities\";\r\n\r\nlet values: string[] = [];\r\n\r\n// Component props\r\nexport type MultiUniversityPickerProps = {\r\n    universities: string[];\r\n    onChange?: (unis: string[]) => void;\r\n} & Partial<MultiPickerProps>;\r\n\r\nclass MultiUniversityPicker extends React.Component<MultiUniversityPickerProps> {\r\n    componentDidMount(): void {\r\n        if (values.length == 0) values = PARTNER_UNIVERSITIES.map((uni: University) => uni.key);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {universities, onChange, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <MultiPicker\r\n                values={values}\r\n                genLabel={(univKey: string) => `universities.${univKey}`}\r\n                selected={universities}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                placeholder={i18n.t(\"universitiesPicker.placeholder\")}\r\n                multipleText={i18n.t(\"universitiesPicker.multiple\")}\r\n                searchablePlaceholder={i18n.t(\"universitiesPicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default MultiUniversityPicker;\r\n","import {ButtonGroupProps} from \"react-native-elements\";\r\nimport {Theme} from \"../types\";\r\nimport {ONBOARDING_INPUT_BORDER_RADIUS} from \"./onboarding\";\r\n\r\nexport type ToggleStyleVariant = \"classic\" | \"classic-rounded\" | \"no-buttons\" | \"chips\" | \"onboarding\";\r\n\r\nexport function getToggleStyleProps(variant: ToggleStyleVariant = \"classic\", theme: Theme): Partial<ButtonGroupProps> {\r\n    if (variant === \"no-buttons\") {\r\n        return {\r\n            containerStyle: {\r\n                backgroundColor: \"transparent\",\r\n                height: 28,\r\n                borderWidth: 0,\r\n                marginHorizontal: 0,\r\n                marginBottom: 5,\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-evenly\",\r\n            },\r\n            innerBorderStyle: {\r\n                width: 0,\r\n            },\r\n            buttonContainerStyle: {\r\n                marginHorizontal: 5,\r\n                flex: 0,\r\n            },\r\n            buttonStyle: {\r\n                paddingHorizontal: 10,\r\n            },\r\n            textStyle: {\r\n                color: theme.textLight,\r\n                opacity: 0.5,\r\n                fontSize: 15,\r\n                flexShrink: 1,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: \"transparent\",\r\n                borderColor: theme.accent,\r\n                borderBottomWidth: 0.5,\r\n            },\r\n            selectedTextStyle: {\r\n                color: theme.text,\r\n                opacity: 1,\r\n            },\r\n        };\r\n    } else if (variant === \"chips\") {\r\n        return {\r\n            containerStyle: {\r\n                backgroundColor: \"transparent\",\r\n                height: 32,\r\n                borderWidth: 0,\r\n                marginHorizontal: 0,\r\n                marginBottom: 5,\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-evenly\",\r\n            },\r\n            innerBorderStyle: {\r\n                width: 0,\r\n            },\r\n            buttonContainerStyle: {\r\n                marginHorizontal: 4,\r\n                flex: 1,\r\n            },\r\n            buttonStyle: {\r\n                backgroundColor: theme.accentSlight,\r\n                borderRadius: 50,\r\n            },\r\n            textStyle: {\r\n                color: theme.textBlack,\r\n                opacity: 0.5,\r\n                fontSize: 15,\r\n                flexShrink: 1,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: theme.accent,\r\n            },\r\n            selectedTextStyle: {\r\n                color: theme.textWhite,\r\n                opacity: 1,\r\n            },\r\n        };\r\n    } else if (variant === \"classic-rounded\") {\r\n        return {\r\n            containerStyle: {\r\n                height: 36,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                borderColor: theme.buttonGroupBorder,\r\n                borderRadius: 20,\r\n                borderWidth: 1,\r\n            },\r\n            innerBorderStyle: {\r\n                color: theme.buttonGroupBorder,\r\n                width: 1,\r\n            },\r\n            buttonStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            textStyle: {\r\n                color: theme.text,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: theme.accent,\r\n            },\r\n            disabledStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            disabledSelectedStyle: {\r\n                backgroundColor: theme.background,\r\n            },\r\n            disabledSelectedTextStyle: {\r\n                fontWeight: \"bold\",\r\n            },\r\n        };\r\n    } else if (variant === \"onboarding\") {\r\n        return {\r\n            containerStyle: {\r\n                height: 48,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                borderRadius: ONBOARDING_INPUT_BORDER_RADIUS,\r\n            },\r\n            innerBorderStyle: {\r\n                color: theme.buttonGroupBorder,\r\n                width: 1,\r\n            },\r\n            buttonStyle: {\r\n                backgroundColor: theme.onboardingInputBackground,\r\n            },\r\n            textStyle: {\r\n                color: theme.textLight,\r\n            },\r\n            selectedTextStyle: {\r\n                color: theme.text,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: theme.onboardingInputFocusedBackground,\r\n            },\r\n            disabledStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            disabledSelectedStyle: {\r\n                backgroundColor: theme.background,\r\n            },\r\n            disabledSelectedTextStyle: {\r\n                fontWeight: \"bold\",\r\n            },\r\n        };\r\n    } else {\r\n        return {\r\n            containerStyle: {\r\n                height: 35,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                borderColor: theme.buttonGroupBorder,\r\n                borderWidth: 1,\r\n            },\r\n            innerBorderStyle: {\r\n                color: theme.buttonGroupBorder,\r\n                width: 1,\r\n            },\r\n            buttonStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            textStyle: {\r\n                color: theme.text,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: theme.accent,\r\n            },\r\n            disabledStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            disabledSelectedStyle: {\r\n                backgroundColor: theme.background,\r\n            },\r\n            disabledSelectedTextStyle: {\r\n                fontWeight: \"bold\",\r\n            },\r\n        };\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Degree, DEGREES} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {getToggleStyleProps, ToggleStyleVariant} from \"../styles/toggles\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {ViewStyle} from \"react-native\";\r\n\r\nexport type GenderToggleMultiProps = {\r\n    degrees: Degree[];\r\n    onSelect?: (degrees: Degree[]) => void;\r\n    styleVariant?: ToggleStyleVariant;\r\n    style?: ViewStyle;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction DegreeToggleMulti(props: GenderToggleMultiProps): JSX.Element {\r\n    const buttonLabels = DEGREES.map((r: string) => i18n.t(`degrees.${r}`));\r\n    const {theme, style, degrees, styleVariant, onSelect, ...otherProps} = props;\r\n\r\n    const styleProps = getToggleStyleProps(styleVariant, theme);\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) {\r\n                    const indices: number[] = typeof idx == \"object\" ? (idx as number[]) : [idx];\r\n                    onSelect(indices.map((i: number) => DEGREES[i]));\r\n                }\r\n            }}\r\n            selectMultiple={true}\r\n            selectedIndexes={degrees.map((degree: Degree) => DEGREES.indexOf(degree))}\r\n            buttons={buttonLabels}\r\n            {...styleProps}\r\n            containerStyle={[styleProps.containerStyle, style]}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(DegreeToggleMulti);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport MultiPicker, {MultiPickerProps} from \"./MultiPicker\";\r\nimport {LANGUAGES_CODES} from \"../model/languages\";\r\n\r\n// Component props\r\nexport type LanguagePickerProps = {\r\n    languages?: string[];\r\n    onChange?: (languages: string[]) => void;\r\n    multiple?: boolean;\r\n} & Partial<MultiPickerProps>;\r\n\r\nconst values = LANGUAGES_CODES;\r\n\r\nclass LanguagePicker extends React.Component<LanguagePickerProps> {\r\n    render(): JSX.Element {\r\n        const {languages, onChange, multiple, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <MultiPicker\r\n                single={!multiple}\r\n                values={values}\r\n                genLabel={(languageId: string) => `languageNames.${languageId}`}\r\n                selected={languages}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                placeholder={i18n.t(\"languagePicker.placeholderMultiple\")}\r\n                multipleText={i18n.t(\"languagePicker.multiple\")}\r\n                searchablePlaceholder={i18n.t(\"languagePicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default LanguagePicker;\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Role, ROLES} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {getToggleStyleProps, ToggleStyleVariant} from \"../styles/toggles\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\nexport type RoleToggleMultiProps = {\r\n    roles: Role[];\r\n    onSelect?: (roles: Role[]) => void;\r\n    styleVariant?: ToggleStyleVariant;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction RoleToggleMulti(props: RoleToggleMultiProps): JSX.Element {\r\n    const {theme, roles, styleVariant, onSelect, ...otherProps} = props;\r\n    const buttonLabels = ROLES.map((r: string) => i18n.t(`allRoles.${r}`));\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) {\r\n                    const indices: number[] = typeof idx == \"object\" ? (idx as number[]) : [idx];\r\n                    onSelect(indices.map((i: number) => ROLES[i]));\r\n                }\r\n            }}\r\n            selectMultiple={true}\r\n            selectedIndexes={roles.map((role: Role) => ROLES.indexOf(role))}\r\n            buttons={buttonLabels}\r\n            {...getToggleStyleProps(styleVariant, theme)}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(RoleToggleMulti);\r\n","import * as React from \"react\";\r\nimport {StyleProp, TextStyle, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {OfferCategory} from \"../api/dto\";\r\nimport {getLocalSvg} from \"../assets\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {SvgProps} from \"react-native-svg\";\r\nimport SemiHighlightedText from \"./SemiHighlightedText\";\r\n\r\n// Component props\r\nexport type FormattedOfferCategoryProps = {\r\n    category: OfferCategory;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    iconProps?: Partial<SvgProps>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    iconSize?: number;\r\n    fontSize?: number;\r\n} & ThemeProps;\r\n\r\nclass FormattedOfferCategory extends React.Component<FormattedOfferCategoryProps> {\r\n    render(): JSX.Element {\r\n        const {containerStyle, category, theme, textStyle, iconProps, iconSize, fontSize} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const translationKey = `onboarding.offers${category[0].toUpperCase() + category.slice(1)}.title`;\r\n        const SvgIcon = getLocalSvg(`offers.categories.${category}`, () => this.forceUpdate());\r\n\r\n        const size = iconSize || 75;\r\n\r\n        return (\r\n            <View style={[styles.container, containerStyle]}>\r\n                <SvgIcon width={size} height={size} {...iconProps} />\r\n                <SemiHighlightedText text={i18n.t(translationKey)} textStyle={textStyle} fontSize={fontSize} />\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            marginLeft: -10,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FormattedOfferCategory);\r\n","import * as React from \"react\";\r\nimport {View, ViewProps, TouchableOpacity, Text, StyleSheet, Platform} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {getPickerButtonStyleProps, PickerButtonStyleVariant, pickerStyles} from \"../styles/picker\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport SectionedMultiSelect from \"react-native-sectioned-multi-select\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {styleTextLight, webFontFamily} from \"../styles/general\";\r\nimport Chips from \"./Chips\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\ntype PickerItem = {\r\n    id: string;\r\n    label: string;\r\n};\r\n\r\ntype PickerItemSection = {\r\n    id: string;\r\n    label: string;\r\n    children: PickerItem[];\r\n};\r\n\r\ntype SectionDescriptor = {id: string; items: string[]};\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    locale: state.settings.userSettings.locale,\r\n}));\r\n\r\n// Component props\r\nexport type SectionedMultiPickerProps = ConnectedProps<typeof reduxConnector> & {\r\n    values: SectionDescriptor[];\r\n    genLabel?: (value: string) => string;\r\n    genSectionLabel?: (id: string) => string;\r\n    onChange?: (values: string[]) => void;\r\n    selected?: string[];\r\n    searchablePlaceholder?: string;\r\n    showChips?: boolean;\r\n    buttonStyleVariant?: PickerButtonStyleVariant;\r\n} & ViewProps &\r\n    ThemeProps;\r\n\r\n// Component state\r\nexport type SectionedMultiPickerState = {\r\n    items: Map<SupportedLocale, PickerItemSection[]>;\r\n    open: boolean;\r\n    tempSelected: string[];\r\n};\r\n\r\nclass SectionedMultiPicker extends React.Component<SectionedMultiPickerProps, SectionedMultiPickerState> {\r\n    static defaultProps = {\r\n        items: [],\r\n        showSelected: true,\r\n        selected: [],\r\n    };\r\n\r\n    selectRef: React.RefObject<SectionedMultiSelect<PickerItem>>;\r\n\r\n    constructor(props: SectionedMultiPickerProps) {\r\n        super(props);\r\n        this.selectRef = React.createRef<SectionedMultiSelect<PickerItem>>();\r\n        this.state = {\r\n            items: new Map(),\r\n            open: false,\r\n            tempSelected: props.selected || [],\r\n        };\r\n    }\r\n\r\n    updateItems() {\r\n        const locale = this.props.locale;\r\n        if (!this.state.items.has(locale) || this.state.items.get(locale)?.length != this.props.values.length) {\r\n            const items = new Map(this.state.items);\r\n            items.set(\r\n                locale,\r\n                this.props.values.map((section: SectionDescriptor) => ({\r\n                    id: section.id,\r\n                    label: this.props.genSectionLabel ? i18n.t(this.props.genSectionLabel(section.id)) : section.id,\r\n                    children: section.items.map((value: string) => ({\r\n                        id: value,\r\n                        label: this.props.genLabel ? i18n.t(this.props.genLabel(value)) : value,\r\n                    })),\r\n                })),\r\n            );\r\n            this.setState({...this.state, items});\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateItems();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: SectionedMultiPickerProps) {\r\n        if (oldProps.locale != this.props.locale || oldProps.values.length != this.props.values.length) {\r\n            this.updateItems();\r\n        }\r\n    }\r\n\r\n    open() {\r\n        if (this.selectRef.current) this.selectRef.current._toggleSelector();\r\n        else {\r\n            // This is useful for the web version; the ref won't be set because\r\n            // the element isn't mounted before opening\r\n            setTimeout(() => {\r\n                if (this.selectRef.current) this.selectRef.current._toggleSelector();\r\n            }, 250);\r\n        }\r\n        this.setState({...this.state, open: true, tempSelected: this.props.selected || this.state.tempSelected});\r\n    }\r\n\r\n    close(apply: boolean) {\r\n        if (this.state.open && this.selectRef.current) this.selectRef.current._toggleSelector();\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n            tempSelected: apply ? this.state.tempSelected : this.props.selected || [],\r\n        });\r\n        if (apply) this.apply(this.state.tempSelected);\r\n    }\r\n\r\n    apply(items: string[]) {\r\n        if (this.props.onChange) this.props.onChange(items);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            locale,\r\n            selected,\r\n            genLabel,\r\n            searchablePlaceholder,\r\n            showChips,\r\n            buttonStyleVariant,\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            onChange,\r\n            ...viewProps\r\n        } = this.props;\r\n        const {tempSelected} = this.state;\r\n        const styles = pickerStyles(theme);\r\n        const multiSelectStyles = sectionedMultiSelectStyles(theme);\r\n        const miscStyles = themedStyles(theme);\r\n        const buttonStyle = {...getPickerButtonStyleProps(buttonStyleVariant, theme)};\r\n\r\n        const selectedItems = selected || [];\r\n\r\n        const select = this.state.items.get(locale) ? (\r\n            <SectionedMultiSelect\r\n                ref={this.selectRef}\r\n                items={this.state.items.get(locale)}\r\n                onSelectedItemsChange={(items) =>\r\n                    this.setState({...this.state, tempSelected: (items as unknown) as string[]})\r\n                }\r\n                selectedItems={tempSelected}\r\n                uniqueKey=\"id\"\r\n                displayKey=\"label\"\r\n                subKey=\"children\"\r\n                // Listeners\r\n                onCancel={() => this.close(false)}\r\n                onConfirm={() => this.close(true)}\r\n                // Dirty work-arounds to get the typing to work. This is due to a mistake in react-native-sectioned-multi-select\r\n                IconRenderer={(MaterialIcons as unknown) as JSX.Element}\r\n                icons={undefined as never}\r\n                // Customization\r\n                showDropDowns={true}\r\n                readOnlyHeadings={true}\r\n                showChips={false}\r\n                showCancelButton={true}\r\n                selectedIconOnLeft={true}\r\n                animateDropDowns={false}\r\n                hideSelect={true}\r\n                noResultsComponent={<Text style={miscStyles.noResultsText}>{i18n.t(\"noResultsFound\")}</Text>}\r\n                searchIconComponent={<MaterialIcons name=\"search\" style={miscStyles.searchIcon} />}\r\n                // Localization\r\n                confirmText={i18n.t(\"apply\")}\r\n                searchPlaceholderText={searchablePlaceholder}\r\n                // Styling\r\n                colors={{\r\n                    primary: theme.accent,\r\n                    cancel: theme.error,\r\n                    success: theme.okay,\r\n                    text: theme.text,\r\n                    subText: theme.textLight,\r\n                    searchPlaceholderTextColor: theme.textLight,\r\n                    selectToggleTextColor: theme.error,\r\n                    itemBackground: theme.cardBackground,\r\n                    subItemBackground: theme.cardBackground,\r\n                }}\r\n                confirmFontFamily={webFontFamily}\r\n                itemFontFamily={webFontFamily}\r\n                searchTextFontFamily={webFontFamily}\r\n                subItemFontFamily={webFontFamily}\r\n                styles={multiSelectStyles}\r\n            />\r\n        ) : (\r\n            <></>\r\n        );\r\n\r\n        return (\r\n            <View {...viewProps} style={{position: \"relative\"}}>\r\n                <View>\r\n                    <TouchableOpacity onPress={() => this.open()} style={buttonStyle.button}>\r\n                        <Text style={[buttonStyle.text, selectedItems.length == 0 ? buttonStyle.textNoneSelected : {}]}>\r\n                            {i18n.t(\"picker.callToAction\").replace(\"%d\", selectedItems.length.toString())}\r\n                        </Text>\r\n                    </TouchableOpacity>\r\n                    {showChips && (\r\n                        <Chips\r\n                            items={selectedItems}\r\n                            label={(v) => (genLabel ? i18n.t(genLabel(v)) : v)}\r\n                            containerStyle={styles.chipContainer}\r\n                            removable={true}\r\n                            onRemove={(item: string) => {\r\n                                const selected = this.state.tempSelected.filter((v) => v !== item);\r\n                                this.setState({...this.state, tempSelected: selected});\r\n                                this.apply(selected);\r\n                            }}\r\n                        />\r\n                    )}\r\n                </View>\r\n                {(Platform.OS === \"android\" || Platform.OS === \"ios\") && <View>{select}</View>}\r\n                {Platform.OS === \"web\" && (\r\n                    <CustomModal\r\n                        visible={this.state.open}\r\n                        noBackground\r\n                        fullWidth\r\n                        fullHeight\r\n                        renderContent={() => select}\r\n                    />\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        noResultsText: {\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n            fontSize: 16,\r\n            marginVertical: 20,\r\n        },\r\n        searchIcon: {\r\n            fontSize: 26,\r\n            marginHorizontal: 10,\r\n            color: theme.textLight,\r\n        },\r\n    });\r\n});\r\n\r\nconst sectionedMultiSelectStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        modalWrapper: {\r\n            justifyContent: \"center\",\r\n        },\r\n        container: {\r\n            backgroundColor: theme.cardBackground,\r\n            ...(Platform.OS === \"web\"\r\n                ? {\r\n                      marginVertical: 0,\r\n                      marginHorizontal: 0,\r\n                      alignSelf: \"center\",\r\n                      maxWidth: 700,\r\n                      maxHeight: \"90%\",\r\n                      boxShadow: \"0px 0px 8px 0px rgba(0,0,0,0.1)\",\r\n                  }\r\n                : {}),\r\n        },\r\n        scrollView: {paddingVertical: 10, ...(Platform.OS === \"web\" ? {overflowY: \"auto\"} : {})},\r\n        searchBar: {backgroundColor: theme.background},\r\n        searchTextInput: {color: theme.text},\r\n        toggleIcon: {backgroundColor: theme.cardBackground},\r\n        subItem: {\r\n            borderRadius: 4,\r\n            marginVertical: 2,\r\n        },\r\n        selectedItem: {backgroundColor: theme.background},\r\n        itemText: {\r\n            ...styleTextLight,\r\n            letterSpacing: 1.5,\r\n            fontSize: 14,\r\n            lineHeight: 18,\r\n            textTransform: \"uppercase\",\r\n        },\r\n        subItemText: {\r\n            marginLeft: 5,\r\n        },\r\n        separator: {marginVertical: 8},\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(SectionedMultiPicker));\r\n","/**\r\n * University education fields as specified by the International Standard Classification of Education (ISCED), 2013.\r\n * @see {@link https://ec.europa.eu/eurostat/statistics-explained/index.php/International_Standard_Classification_of_Education_(ISCED)}\r\n * @see page 18 of {@link https://eqe.ge/res/docs/228085e.pdf}\r\n * @see page 18 of {@link http://uis.unesco.org/fr/file/1390} for french translations\r\n * See translations for the actual display name of each field.\r\n */\r\n\r\nexport enum EducationFieldCategory {\r\n    GPQ = \"generic-programmes-qualifications\",\r\n    EDU = \"education\",\r\n    AH = \"arts-humanities\",\r\n    SSJI = \"social-sciences-journalism-information\",\r\n    BAL = \"business-administration-law\",\r\n    NSMS = \"natural-sciences-mathematics-statistics\",\r\n    ICT = \"information-communication-technologies\",\r\n    EMC = \"engineering-manufacturing-construction\",\r\n    AFFV = \"agriculture-forestry-fisheries-veterinary\",\r\n    HW = \"health-welfare\",\r\n    SER = \"services\",\r\n}\r\n\r\nexport const EDUCATION_FIELD_CATEGORIES = Object.values(EducationFieldCategory) as EducationFieldCategory[];\r\n\r\nexport enum EducationFieldSubCategory {\r\n    \"basic-programmes-qualifications\",\r\n    \"literacy-numeracy\",\r\n    \"personal-skills-development\",\r\n    \"education\",\r\n    \"arts\",\r\n    \"humanities\",\r\n    \"languages\",\r\n    \"social-behavioural-sciences\",\r\n    \"journalism-information\",\r\n    \"business-administration\",\r\n    \"law\",\r\n    \"biological-related-sciences\",\r\n    \"environment\",\r\n    \"physical-sciences\",\r\n    \"mathematics-statistics\",\r\n    \"information-communication-technologies\",\r\n    \"engineering-engineering-trades\",\r\n    \"manufacturing-processing\",\r\n    \"architecture-construction\",\r\n    \"agriculture\",\r\n    \"forestry\",\r\n    \"fisheries\",\r\n    \"veterinary\",\r\n    \"health\",\r\n    \"welfare\",\r\n    \"personal-services\",\r\n    \"hygiene-occupational-health-services\",\r\n    \"security-services\",\r\n    \"transport-services\",\r\n}\r\n\r\nexport type EducationField = {\r\n    id: string;\r\n    category: EducationFieldCategory;\r\n    subCategory: EducationFieldSubCategory;\r\n};\r\n\r\nexport const EDUCATION_FIELDS: EducationField[] = [\r\n    {\r\n        id: \"basic-programmes-qualifications\",\r\n        category: EducationFieldCategory.GPQ,\r\n        subCategory: EducationFieldSubCategory[\"basic-programmes-qualifications\"],\r\n    },\r\n    {\r\n        id: \"literacy-numeracy\",\r\n        category: EducationFieldCategory.GPQ,\r\n        subCategory: EducationFieldSubCategory[\"literacy-numeracy\"],\r\n    },\r\n    {\r\n        id: \"personal-skills-development\",\r\n        category: EducationFieldCategory.GPQ,\r\n        subCategory: EducationFieldSubCategory[\"personal-skills-development\"],\r\n    },\r\n    {\r\n        id: \"education-science\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"training-for-pre-school-teachers\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"teacher-training-without-subject-specialisation\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"teacher-training-with-subject-specialisation\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"audio-visual-techniques-media-production\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"fashion-interior-industrial-design\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"fine-arts\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"handicrafts\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"music-performing-arts\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"religion-theology\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"humanities\"],\r\n    },\r\n    {\r\n        id: \"history-archaeology\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"humanities\"],\r\n    },\r\n    {\r\n        id: \"philosophy-ethics\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"humanities\"],\r\n    },\r\n    {\r\n        id: \"language-acquisition\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"languages\"],\r\n    },\r\n    {\r\n        id: \"literature-linguistics\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"languages\"],\r\n    },\r\n    {\r\n        id: \"economics\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"political-sciences-civics\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"psychology\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"sociology-cultural-studies\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"journalism-reporting\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"journalism-information\"],\r\n    },\r\n    {\r\n        id: \"library-information-archival-studies\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"journalism-information\"],\r\n    },\r\n    {\r\n        id: \"accounting-taxation\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"finance-banking-insurance\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"management-administration\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"marketing-advertising\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"secretarial-office-work\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"wholesale-retail-sales\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"work-skills\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"law\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"law\"],\r\n    },\r\n    {\r\n        id: \"biology\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"biological-related-sciences\"],\r\n    },\r\n    {\r\n        id: \"biochemistry\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"biological-related-sciences\"],\r\n    },\r\n    {\r\n        id: \"environmental-sciences\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"environment\"],\r\n    },\r\n    {\r\n        id: \"natural-environments-wildlife\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"environment\"],\r\n    },\r\n    {\r\n        id: \"chemistry\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"physical-sciences\"],\r\n    },\r\n    {\r\n        id: \"earth-sciences\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"physical-sciences\"],\r\n    },\r\n    {\r\n        id: \"physics\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"physical-sciences\"],\r\n    },\r\n    {\r\n        id: \"mathematics\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"mathematics-statistics\"],\r\n    },\r\n    {\r\n        id: \"statistics\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"mathematics-statistics\"],\r\n    },\r\n    {\r\n        id: \"computer-use\",\r\n        category: EducationFieldCategory.ICT,\r\n        subCategory: EducationFieldSubCategory[\"information-communication-technologies\"],\r\n    },\r\n    {\r\n        id: \"database-network-design-administration\",\r\n        category: EducationFieldCategory.ICT,\r\n        subCategory: EducationFieldSubCategory[\"information-communication-technologies\"],\r\n    },\r\n    {\r\n        id: \"software-applications-development-analysis\",\r\n        category: EducationFieldCategory.ICT,\r\n        subCategory: EducationFieldSubCategory[\"information-communication-technologies\"],\r\n    },\r\n    {\r\n        id: \"chemical-engineering-processes\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"environmental-protection-technology\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"electricity-energy\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"electronics-automation\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"mechanics-metal-trades\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"motor-vehicles-ships-aircraft\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"food-processing\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"materials\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"textiles\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"mining-extraction\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"architecture-town-planning\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"architecture-construction\"],\r\n    },\r\n    {\r\n        id: \"building-civil-engineering\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"architecture-construction\"],\r\n    },\r\n    {\r\n        id: \"crop-livestock-production\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"agriculture\"],\r\n    },\r\n    {\r\n        id: \"horticulture\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"agriculture\"],\r\n    },\r\n    {\r\n        id: \"forestry\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"forestry\"],\r\n    },\r\n    {\r\n        id: \"fisheries\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"fisheries\"],\r\n    },\r\n    {\r\n        id: \"veterinary\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"veterinary\"],\r\n    },\r\n    {\r\n        id: \"dental-studies\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"medicine\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"nursing-midwifery\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"medical-diagnostic-treatment-technology\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"therapy-rehabilitation\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"pharmacy\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"traditional-complementary-medicine-therapy\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"care-elderly-disabled-adults\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"welfare\"],\r\n    },\r\n    {\r\n        id: \"child-care-youth-services\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"welfare\"],\r\n    },\r\n    {\r\n        id: \"social-work-counselling\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"welfare\"],\r\n    },\r\n    {\r\n        id: \"domestic-services\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"hair-beauty-services\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"hotel-restaurants-catering\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"sports\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"travel-tourism-leisure\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"community-sanitation\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"hygiene-occupational-health-services\"],\r\n    },\r\n    {\r\n        id: \"occupational-health-safety\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"hygiene-occupational-health-services\"],\r\n    },\r\n    {\r\n        id: \"military-defence\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"security-services\"],\r\n    },\r\n    {\r\n        id: \"protection-of-persons-property\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"security-services\"],\r\n    },\r\n    {\r\n        id: \"transport-services\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"transport-services\"],\r\n    },\r\n];\r\n\r\n/*const organized: Map<EducationFieldCategory, string[]> = new Map();\r\nEDUCATION_FIELD_CATEGORIES.forEach((cat: EducationFieldCategory) => organized.set(cat, []));\r\nEDUCATION_FIELDS.forEach((f) => organized.get(f.category)?.push(f.id));\r\n\r\nexport const EDUCATION_FIELDS_ORGANIZED = organized;*/\r\n\r\n// Pre-process the education fields to pass as the \"items\" prop of dropdowns\r\nconst sectioned: {[key: string]: {id: string; items: string[]}} = {};\r\nEDUCATION_FIELD_CATEGORIES.forEach((id: EducationFieldCategory) => (sectioned[id] = {id, items: []}));\r\nEDUCATION_FIELDS.forEach((f) => sectioned[f.category].items.push(f.id));\r\n\r\nexport const EDUCATION_FIELDS_SECTIONED = Object.values(sectioned);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport SectionedMultiPicker, {SectionedMultiPickerProps} from \"./SectionedMultiPicker\";\r\nimport {EDUCATION_FIELDS_SECTIONED} from \"../model/education-fields\";\r\n\r\n// Component props\r\nexport type EducationFieldPickerProps = {\r\n    fields?: string[];\r\n    onChange?: (fields: string[]) => void;\r\n} & Partial<SectionedMultiPickerProps>;\r\n\r\nclass EducationFieldPicker extends React.Component<EducationFieldPickerProps> {\r\n    render(): JSX.Element {\r\n        const {fields, onChange, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <SectionedMultiPicker\r\n                values={EDUCATION_FIELDS_SECTIONED}\r\n                genLabel={(field: string) => `educationFields.${field}`}\r\n                genSectionLabel={(section: string) => `educationFieldCategories.${section}`}\r\n                selected={fields}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                searchablePlaceholder={i18n.t(\"educationFieldsPicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default EducationFieldPicker;\r\n","import * as React from \"react\";\r\nimport {StyleProp, ViewStyle, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {StaffRole, STAFF_ROLES, STAFF_ROLE_ICONS} from \"../constants/profile-constants\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport PopUpSelector from \"./PopUpSelector\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {PickerButtonStyleVariant} from \"../styles/picker\";\r\n\r\n// Component props\r\nexport type StaffRoleToggleProps = {\r\n    staffRoles: StaffRole[];\r\n    onChange?: (staffRoles: StaffRole[]) => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    buttonStyleVariant?: PickerButtonStyleVariant;\r\n    multiple?: boolean;\r\n    atLeastOne?: boolean;\r\n    noOkUnderline?: boolean;\r\n};\r\n\r\nfunction StaffRolePicker(props: StaffRoleToggleProps & ThemeProps): JSX.Element {\r\n    const {staffRoles, multiple, atLeastOne, noOkUnderline, buttonStyle, buttonStyleVariant, onChange, theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    return (\r\n        <PopUpSelector\r\n            values={STAFF_ROLES}\r\n            label={(r: string) => i18n.t(`staffRoles.${r}`)}\r\n            placeholder={i18n.t(`picker.callToAction`).replace(\"%d\", staffRoles.length + \"\")}\r\n            icon={(_, i: number) => <MaterialIcons name={STAFF_ROLE_ICONS[i]} style={styles.icon} />}\r\n            selected={staffRoles}\r\n            buttonStyle={buttonStyle}\r\n            buttonStyleVariant={buttonStyleVariant}\r\n            onSelect={(values: string[]) => {\r\n                if (onChange) onChange(values as StaffRole[]);\r\n            }}\r\n            multiple={multiple}\r\n            atLeastOne={atLeastOne}\r\n            noOkUnderline={noOkUnderline}\r\n        />\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        icon: {\r\n            fontSize: 20,\r\n            marginRight: 6,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(StaffRolePicker);\r\n","import * as React from \"react\";\r\nimport {ScrollView, StyleSheet, Switch, Text, TouchableOpacity, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {OfferCategory, OfferDto} from \"../api/dto\";\r\nimport MultiUniversityPicker from \"../components/MultiUniversityPicker\";\r\nimport {setMatchingFilters} from \"../state/matching/actions\";\r\nimport {AppState, MatchingFiltersState} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport DegreeToggleMulti from \"../components/DegreeToggleMulti\";\r\nimport LanguagePicker from \"../components/LanguagePicker\";\r\nimport {Degree, Role, StaffRole} from \"../constants/profile-constants\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport RoleToggleMulti from \"../components/RoleToggleMulti\";\r\nimport {defaultMatchingFilters} from \"../state/matching/reducer\";\r\nimport FormattedOfferCategory from \"../components/FormattedOfferCategory\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport EducationFieldPicker from \"../components/EducationFieldPicker\";\r\nimport StaffRolePicker from \"../components/StaffRolePicker\";\r\n\r\n// Map props from state\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    offers: state.profile.offers,\r\n    filters: state.matching.filters,\r\n}));\r\n\r\n// Component props\r\ntype MatchFilteringScreenProps = ThemeProps & ConnectedProps<typeof reduxConnector>;\r\n\r\n// Component state\r\ntype MatchFilteringScreenState = {\r\n    localFilters: MatchingFiltersState;\r\n};\r\n\r\nexport const Separator = withTheme(({theme}: ThemeProps) => {\r\n    return <View style={themedStyles(theme).separator}></View>;\r\n});\r\n\r\nexport const filteringScreenRef = React.createRef<MatchFilteringScreen>();\r\n\r\nclass MatchFilteringScreen extends React.Component<MatchFilteringScreenProps, MatchFilteringScreenState> {\r\n    haveFiltersChanged: boolean;\r\n\r\n    constructor(props: MatchFilteringScreenProps) {\r\n        super(props);\r\n        this.state = {\r\n            localFilters: defaultMatchingFilters(),\r\n        };\r\n        this.haveFiltersChanged = false;\r\n    }\r\n\r\n    updateLocalOfferFilters(id: string, value: boolean) {\r\n        this.haveFiltersChanged = true;\r\n        this.setState({\r\n            ...this.state,\r\n            localFilters: {...this.state.localFilters, offers: {...this.state.localFilters.offers, [id]: value}},\r\n        });\r\n    }\r\n\r\n    updateLocalFilters(filters: Partial<MatchingFiltersState>) {\r\n        this.haveFiltersChanged = true;\r\n        this.setState({...this.state, localFilters: {...this.state.localFilters, ...filters}});\r\n    }\r\n\r\n    resetLocalFilters() {\r\n        this.updateLocalFilters(defaultMatchingFilters());\r\n    }\r\n\r\n    applyFilters() {\r\n        if (this.haveFiltersChanged) this.props.dispatch(setMatchingFilters(this.state.localFilters));\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Set filters from the store when mounting\r\n        this.updateLocalFilters(this.props.filters);\r\n        this.haveFiltersChanged = false;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, offers} = this.props;\r\n        const filters = this.state.localFilters;\r\n        const styles = themedStyles(theme);\r\n\r\n        const categories = Object.values(OfferCategory);\r\n\r\n        // <Text style={styles.sectionTitle}>{i18n.t(`offerCategories.${category}`)}</Text>\r\n        const offerSections = categories.map((category: OfferCategory) => (\r\n            <View key={category} style={styles.sectionContainer}>\r\n                <Separator />\r\n                <FormattedOfferCategory category={category} iconSize={60} fontSize={24} />\r\n                {offers\r\n                    .filter((o: OfferDto) => o.category == category)\r\n                    .map((o: OfferDto) => (\r\n                        <View key={o.id} style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(`allOffers.${o.id}.name`)}</Text>\r\n                            <Switch\r\n                                value={filters.offers[o.id] || false}\r\n                                onValueChange={(value: boolean) => this.updateLocalOfferFilters(o.id, value)}\r\n                            />\r\n                        </View>\r\n                    ))}\r\n            </View>\r\n        ));\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollView style={styles.scroll} contentContainerStyle={styles.scrollContainer}>\r\n                    <TouchableOpacity style={styles.resetButton} onPress={() => this.resetLocalFilters()}>\r\n                        <Text style={styles.resetButtonText}>{i18n.t(\"matching.filtering.buttonReset\")}</Text>\r\n                        <MaterialIcons name=\"refresh\" style={styles.resetButtonIcon} />\r\n                    </TouchableOpacity>\r\n                    <View style={styles.sectionContainer}>\r\n                        <Text style={styles.sectionTitle}>{i18n.t(\"matching.filtering.sectionGeneral\")}</Text>\r\n                        <View style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"university\")}</Text>\r\n                            <View style={styles.entryControls}>\r\n                                <MultiUniversityPicker\r\n                                    universities={filters.universities}\r\n                                    showChips={false}\r\n                                    onChange={(universities: string[]) => this.updateLocalFilters({universities})}\r\n                                />\r\n                                <ClearFilterButton onPress={() => this.updateLocalFilters({universities: []})} />\r\n                            </View>\r\n                        </View>\r\n                        <View style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"spokenLanguages\")}</Text>\r\n                            <View style={styles.entryControls}>\r\n                                <LanguagePicker\r\n                                    languages={filters.languages}\r\n                                    multiple\r\n                                    showChips={false}\r\n                                    onChange={(languages: string[]) => this.updateLocalFilters({languages})}\r\n                                />\r\n                                <ClearFilterButton onPress={() => this.updateLocalFilters({languages: []})} />\r\n                            </View>\r\n                        </View>\r\n                        <View style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"fieldsOfEducation\")}</Text>\r\n                            <View style={styles.entryControls}>\r\n                                <EducationFieldPicker\r\n                                    fields={filters.educationFields}\r\n                                    showChips={false}\r\n                                    onChange={(educationFields: string[]) => this.updateLocalFilters({educationFields})}\r\n                                />\r\n                                <ClearFilterButton onPress={() => this.updateLocalFilters({educationFields: []})} />\r\n                            </View>\r\n                        </View>\r\n                        <View style={styles.twoLineEntryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"profileTypes\")}</Text>\r\n                            <RoleToggleMulti\r\n                                roles={filters.types}\r\n                                onSelect={(types: Role[]) => this.updateLocalFilters({types})}\r\n                                styleVariant=\"classic-rounded\"\r\n                            />\r\n                        </View>\r\n                        {filters.types.indexOf(\"student\") != -1 && (\r\n                            <View style={styles.twoLineEntryContainer}>\r\n                                <Text style={styles.entryLabel}>{i18n.t(\"levelOfStudy\")}</Text>\r\n                                <DegreeToggleMulti\r\n                                    degrees={filters.degrees}\r\n                                    onSelect={(degrees: Degree[]) => this.updateLocalFilters({degrees})}\r\n                                    style={{width: \"100%\"}}\r\n                                    styleVariant=\"classic-rounded\"\r\n                                />\r\n                            </View>\r\n                        )}\r\n                        {filters.types.indexOf(\"staff\") != -1 && (\r\n                            <View style={styles.twoLineEntryContainer}>\r\n                                <Text style={styles.entryLabel}>{i18n.t(\"positions\")}</Text>\r\n                                <View style={styles.entryControls}>\r\n                                    <StaffRolePicker\r\n                                        staffRoles={filters.staffRoles}\r\n                                        onChange={(staffRoles: StaffRole[]) => this.updateLocalFilters({staffRoles})}\r\n                                        buttonStyle={{flex: 1}}\r\n                                        multiple\r\n                                        noOkUnderline\r\n                                    />\r\n                                    <ClearFilterButton onPress={() => this.updateLocalFilters({staffRoles: []})} />\r\n                                </View>\r\n                            </View>\r\n                        )}\r\n                    </View>\r\n                    {offerSections}\r\n                </ScrollView>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        scroll: {\r\n            width: \"100%\",\r\n        },\r\n        scrollContainer: {\r\n            flexDirection: \"column\",\r\n            paddingHorizontal: 40,\r\n            paddingTop: 10,\r\n            paddingBottom: 70,\r\n            width: \"100%\",\r\n        },\r\n        sectionContainer: {\r\n            width: \"100%\",\r\n        },\r\n        sectionTitle: {\r\n            fontSize: 20,\r\n            letterSpacing: 1,\r\n            marginBottom: 5,\r\n            color: theme.text,\r\n        },\r\n        entryContainer: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n        },\r\n        twoLineEntryContainer: {\r\n            flexDirection: \"column\",\r\n        },\r\n        entryLabel: {\r\n            flex: 1,\r\n            fontSize: 16,\r\n            marginVertical: 7,\r\n            marginRight: 10,\r\n            color: theme.textLight,\r\n        },\r\n        entryControls: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            marginVertical: 2,\r\n        },\r\n        separator: {\r\n            height: 1,\r\n            width: \"100%\",\r\n            backgroundColor: \"rgba(0, 0, 0, 0.1)\",\r\n            alignSelf: \"center\",\r\n            marginVertical: 15,\r\n        },\r\n        resetButton: {\r\n            width: \"100%\",\r\n            maxWidth: 200,\r\n            paddingVertical: 7,\r\n            marginBottom: 20,\r\n            backgroundColor: theme.accentSlight,\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            alignSelf: \"center\",\r\n            borderRadius: 50,\r\n            elevation: 1,\r\n        },\r\n        resetButtonText: {\r\n            fontSize: 14,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            color: theme.textBlack,\r\n        },\r\n        resetButtonIcon: {\r\n            fontSize: 16,\r\n            color: theme.textBlack,\r\n            marginLeft: 4,\r\n        },\r\n    });\r\n});\r\n\r\nexport const ClearFilterButton = withTheme(\r\n    ({theme, onPress}: ThemeProps & {onPress: () => void}): JSX.Element => (\r\n        <TouchableOpacity onPress={onPress}>\r\n            <MaterialIcons name=\"close\" style={{fontSize: 28, color: theme.text}} />\r\n        </TouchableOpacity>\r\n    ),\r\n);\r\n\r\nconst wrapper = (props: MatchFilteringScreenProps) => <MatchFilteringScreen ref={filteringScreenRef} {...props} />;\r\nexport default reduxConnector(withTheme(wrapper));\r\n","import * as React from \"react\";\r\nimport {Text, TouchableOpacity, View, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {StackHeaderProps} from \"@react-navigation/stack\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {headerStyles} from \"../../styles/headers\";\r\nimport {headerTitle} from \"../../navigation/utils\";\r\nimport {NavigatorRoute} from \"../../navigation/types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {filteringScreenRef} from \"../../screens/MatchFilteringScreen\";\r\nimport {refreshFetchedProfiles} from \"../../state/matching/actions\";\r\n\r\n// Component props\r\nexport type FilteringScreenHeaderProps = ThemeProps & StackHeaderProps;\r\n\r\nclass FilteringScreenHeaderClass extends React.Component<FilteringScreenHeaderProps> {\r\n    back() {\r\n        const nav = this.props.navigation;\r\n        if (nav.canGoBack()) nav.goBack();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, insets, scene, navigation} = this.props;\r\n        const styles = themedStyles(theme);\r\n        const hstyles = headerStyles(theme);\r\n\r\n        const title = headerTitle(scene.route.name as NavigatorRoute);\r\n\r\n        return (\r\n            <View style={[{paddingTop: insets.top}, hstyles.wrapper]}>\r\n                <TouchableOpacity style={{}} onPress={() => this.back()}>\r\n                    <MaterialIcons name=\"close\" style={styles.actionIcon} />\r\n                </TouchableOpacity>\r\n                <Text style={[hstyles.title, {textAlign: \"center\"}]} numberOfLines={1}>\r\n                    {title}\r\n                </Text>\r\n                <TouchableOpacity\r\n                    style={{paddingVertical: 10}}\r\n                    onPress={() => {\r\n                        if (filteringScreenRef.current) filteringScreenRef.current.applyFilters();\r\n                        navigation.navigate(\"TabMatchingScreen\");\r\n                        store.dispatch(refreshFetchedProfiles());\r\n                    }}\r\n                >\r\n                    <MaterialIcons name=\"check\" style={styles.actionIcon} />\r\n                </TouchableOpacity>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionIcon: {\r\n            fontSize: 28,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nconst FilteringScreenHeaderComp = withTheme(FilteringScreenHeaderClass);\r\n\r\nexport default function FilteringScreenHeader(props: StackHeaderProps): JSX.Element {\r\n    return <FilteringScreenHeaderComp {...props} />;\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {MatchActionStatus} from \"../api/dto\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\n\r\n// Component props\r\nexport type FormattedMatchStatusProps = {\r\n    status: MatchActionStatus;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    iconStyle?: StyleProp<TextStyle>;\r\n} & ThemeProps;\r\n\r\nclass FormattedMatchStatus extends React.Component<FormattedMatchStatusProps> {\r\n    render(): JSX.Element {\r\n        const {status, theme, containerStyle, textStyle, iconStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const text = i18n.t(`matching.history.status.${status}`);\r\n\r\n        let IconComponent;\r\n        let iconName;\r\n\r\n        switch (status) {\r\n            case MatchActionStatus.Blocked:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"block\";\r\n                break;\r\n            case MatchActionStatus.Declined:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"thumb-down\";\r\n                break;\r\n            case MatchActionStatus.Matched:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"people\";\r\n                break;\r\n            case MatchActionStatus.Requested:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"thumb-up\";\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <View style={[styles.container, containerStyle]}>\r\n                <IconComponent style={[styles.icon, iconStyle]} name={iconName} />\r\n                <Text style={[styles.text, textStyle]}>{text}</Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        icon: {\r\n            marginRight: 5,\r\n            paddingTop: 2,\r\n        },\r\n        text: {\r\n            fontSize: 20,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FormattedMatchStatus);\r\n","import * as React from \"react\";\r\nimport {Text, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport FormattedUniversity from \"../FormattedUniversity\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport {MatchHistoryItem} from \"../../model/matching\";\r\nimport FormattedMatchStatus from \"../FormattedMatchStatus\";\r\nimport SwipeableCard, {SwipeableCardClass, SwipeActionButtons, SwipeActionProps} from \"./SwipeableCard\";\r\nimport i18n from \"i18n-js\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport BlockProfileModal, {BlockProfileModalClass} from \"../modals/BlockProfileModal\";\r\nimport {MatchActionStatus} from \"../../api/dto\";\r\nimport QuickFormReport, {QuickFormReportClass} from \"../forms/QuickFormReport\";\r\nimport {ReportEntityType} from \"../../constants/reports\";\r\nimport {cancelMatchAction} from \"../../state/matching/actions\";\r\nimport SwipeTip from \"../SwipeTip\";\r\n\r\n// Component props\r\nexport type HistoryProfileCardProps = ThemeProps & {\r\n    item: MatchHistoryItem;\r\n    style?: ViewStyle;\r\n    onHidden?: () => void;\r\n    showSwipeTip?: boolean;\r\n};\r\n\r\nconst LOOKS = {\r\n    sideMargin: 10,\r\n    borderRadius: 10,\r\n    minHeight: 100,\r\n};\r\n\r\nclass HistoryProfileCard extends React.Component<HistoryProfileCardProps> {\r\n    swipeableCardRef = React.createRef<SwipeableCardClass>();\r\n    reportFormRef = React.createRef<QuickFormReportClass>();\r\n    blockModalRef = React.createRef<BlockProfileModalClass>();\r\n\r\n    private getActions(hideCard: () => void): SwipeActionProps[] {\r\n        const {\r\n            theme,\r\n            item: {id, status},\r\n        } = this.props;\r\n        const dispatch = store.dispatch as MyThunkDispatch;\r\n\r\n        const reportButton = {\r\n            icon: \"report\",\r\n            text: i18n.t(\"matching.history.actions.report\"),\r\n            backgroundColor: theme.error,\r\n            color: theme.textWhite,\r\n            onPress: () => this.reportFormRef.current?.open(),\r\n        };\r\n        const blockButton = {\r\n            icon: \"block\",\r\n            text: i18n.t(\"matching.history.actions.block\"),\r\n            backgroundColor: theme.error,\r\n            color: theme.textWhite,\r\n            onPress: () => this.blockModalRef.current?.show(),\r\n        };\r\n        const cancelButton = {\r\n            icon: \"close\",\r\n            text: i18n.t(`matching.history.actions.cancel.${status}`),\r\n            backgroundColor: theme.accent,\r\n            color: theme.textWhite,\r\n            onPress: () => {\r\n                hideCard();\r\n                dispatch(cancelMatchAction(id));\r\n            },\r\n        };\r\n\r\n        if (status === MatchActionStatus.Blocked) return [reportButton, cancelButton];\r\n        else return [reportButton, blockButton, cancelButton];\r\n    }\r\n\r\n    render() {\r\n        const {theme, item, showSwipeTip} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const profile = item.profile;\r\n        const fullName = profile.firstName + \" \" + profile.lastName;\r\n\r\n        return (\r\n            <>\r\n                <SwipeableCard\r\n                    ref={this.swipeableCardRef}\r\n                    looks={LOOKS}\r\n                    rightThreshold={100}\r\n                    overshootRight={false}\r\n                    rightActions={(hideCard) => (\r\n                        <SwipeActionButtons\r\n                            id={`${item.profile.id}-${item.status}`}\r\n                            looks={LOOKS}\r\n                            side=\"right\"\r\n                            actions={this.getActions(hideCard)}\r\n                            buttonStyle={styles.actionButton}\r\n                        />\r\n                    )}\r\n                >\r\n                    <View style={styles.cardContent}>\r\n                        <View style={styles.avatarContainer}>\r\n                            <ProfileAvatar\r\n                                profile={profile}\r\n                                size={60}\r\n                                rounded\r\n                                containerStyle={styles.avatar}\r\n                                onPress={() => rootNavigate(\"ProfileScreen\", {id: profile.id})}\r\n                            />\r\n                        </View>\r\n                        <View style={styles.infoContainer}>\r\n                            <Text style={styles.name}>{fullName}</Text>\r\n                            {profile && (\r\n                                <FormattedUniversity\r\n                                    flagSize={14}\r\n                                    flagEmoji={true}\r\n                                    style={[styles.infoText, {marginLeft: -10}]}\r\n                                    university={profile.university}\r\n                                />\r\n                            )}\r\n                            <FormattedMatchStatus\r\n                                status={item.status}\r\n                                textStyle={styles.infoText}\r\n                                iconStyle={styles.infoText}\r\n                            />\r\n                        </View>\r\n                        {showSwipeTip && <SwipeTip direction=\"left\" iconStyle={styles.swipeTipIcon} />}\r\n                    </View>\r\n                </SwipeableCard>\r\n                <QuickFormReport\r\n                    ref={this.reportFormRef}\r\n                    entityType={ReportEntityType.PROFILE_ENTITY}\r\n                    entity={profile}\r\n                    onSubmit={() => this.swipeableCardRef.current?.resetSwipe()}\r\n                />\r\n                <BlockProfileModal\r\n                    ref={this.blockModalRef}\r\n                    profile={profile}\r\n                    onBlock={() => this.swipeableCardRef.current?.collapse()}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        cardContent: {\r\n            flexDirection: \"row\",\r\n            padding: 10,\r\n        },\r\n        avatarContainer: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        avatar: {\r\n            backgroundColor: theme.accentSecondary,\r\n        },\r\n        infoContainer: {\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-between\",\r\n            paddingLeft: 10,\r\n        },\r\n        name: {\r\n            fontSize: 18,\r\n            letterSpacing: 0.8,\r\n            color: theme.text,\r\n        },\r\n        infoText: {\r\n            fontSize: 15,\r\n            letterSpacing: 0.5,\r\n            color: theme.textLight,\r\n            flexShrink: 1, // Ensures text wrapping\r\n        },\r\n\r\n        swipeTipIcon: {\r\n            color: theme.textLight,\r\n            fontSize: 18,\r\n        },\r\n\r\n        actionButton: {\r\n            paddingHorizontal: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(HistoryProfileCard);\r\n","import * as React from \"react\";\r\nimport {SearchBar, SearchBarProps} from \"react-native-elements\";\r\n\r\n// Component props\r\nexport type BufferedSearchBarProps = {\r\n    bufferDelay: number;\r\n    onBufferedUpdate?: (text: string) => void;\r\n} & SearchBarProps;\r\n\r\nclass BufferedSearchBar extends React.Component<BufferedSearchBarProps> {\r\n    private updateTimeout: NodeJS.Timeout | null = null;\r\n\r\n    private onChange(text: string) {\r\n        const {bufferDelay, onBufferedUpdate} = this.props;\r\n\r\n        if (this.updateTimeout) clearTimeout(this.updateTimeout);\r\n        this.updateTimeout = setTimeout(() => {\r\n            this.updateTimeout = null;\r\n            if (onBufferedUpdate) onBufferedUpdate(text);\r\n        }, bufferDelay);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        const {bufferDelay, onBufferedUpdate, onChangeText, ...searchBarProps} = this.props;\r\n\r\n        return (\r\n            <SearchBar\r\n                onChangeText={(search: string) => {\r\n                    if (onChangeText) onChangeText(search);\r\n                    this.onChange(search);\r\n                }}\r\n                {...searchBarProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default BufferedSearchBar;\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {Button, withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {fetchHistory, refreshFetchedHistory, setHistoryFilters} from \"../state/matching/actions\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {TabMatchingRoot} from \"../navigation/types\";\r\nimport {HISTORY_FETCH_LIMIT, SEARCH_BUFFER_DELAY} from \"../constants/config\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport HistoryProfileCard from \"../components/cards/HistoryProfileCard\";\r\nimport InfiniteScroller from \"../components/InfiniteScroller\";\r\nimport {MATCH_ACTION_HISTORY_STATUSES} from \"../api/dto\";\r\nimport {MatchHistoryItem} from \"../model/matching\";\r\nimport BufferedSearchBar from \"../components/BufferedSearchBar\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    historyItems: state.matching.historyItems,\r\n    fetchingHistory: state.matching.historyPagination.fetching,\r\n    canFetchMore: state.matching.historyPagination.canFetchMore,\r\n    currentPage: state.matching.historyPagination.page,\r\n    historyFilters: state.matching.historyFilters,\r\n}));\r\n\r\n// Component props\r\ntype MatchHistoryScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<TabMatchingRoot, \"MatchHistoryScreen\">;\r\n\r\n// Component state\r\ntype MatchHistoryScreenState = {\r\n    search: string;\r\n};\r\n\r\nclass MatchHistoryScreen extends React.Component<MatchHistoryScreenProps, MatchHistoryScreenState> {\r\n    constructor(props: MatchHistoryScreenProps) {\r\n        super(props);\r\n        this.state = {search: \"\"};\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            historyItems,\r\n            theme,\r\n            historyFilters,\r\n            fetchingHistory,\r\n            canFetchMore,\r\n            currentPage,\r\n            navigation,\r\n            dispatch,\r\n        } = this.props;\r\n        const {search} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const filters = MATCH_ACTION_HISTORY_STATUSES;\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.filtersContainer}>\r\n                    {filters.map((key: string) => (\r\n                        <Filter\r\n                            theme={theme}\r\n                            key={`match-history-filter-${key}`}\r\n                            filterKey={key}\r\n                            selected={historyFilters[key]}\r\n                            onPress={() => {\r\n                                dispatch(setHistoryFilters({[key]: !historyFilters[key]}));\r\n                                dispatch(refreshFetchedHistory());\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </View>\r\n                <BufferedSearchBar\r\n                    onBufferedUpdate={() => dispatch(refreshFetchedHistory())}\r\n                    bufferDelay={SEARCH_BUFFER_DELAY}\r\n                    placeholder={i18n.t(\"search\")}\r\n                    onChangeText={(search: string) => this.setState({...this.state, search})}\r\n                    value={search}\r\n                    containerStyle={styles.searchBarContainer}\r\n                    inputContainerStyle={styles.searchBarInputContainer}\r\n                    inputStyle={styles.searchBarInput}\r\n                />\r\n                <InfiniteScroller\r\n                    navigation={navigation}\r\n                    fetchLimit={HISTORY_FETCH_LIMIT}\r\n                    fetchMore={() => (dispatch as MyThunkDispatch)(fetchHistory(search))}\r\n                    fetching={fetchingHistory}\r\n                    canFetchMore={canFetchMore}\r\n                    currentPage={currentPage}\r\n                    items={historyItems}\r\n                    id={(it: MatchHistoryItem): string => it.id}\r\n                    noResultsComponent={\r\n                        <>\r\n                            <Text style={styles.noResultsText1}>{i18n.t(\"matching.history.noResults\")}</Text>\r\n                            <Text style={styles.noResultsText2}>{i18n.t(\"matching.history.noResultsAdvice\")}</Text>\r\n                        </>\r\n                    }\r\n                    refresh={() => dispatch(refreshFetchedHistory())}\r\n                    refreshOnFocus\r\n                    renderItem={(item: MatchHistoryItem, hide: () => void) => (\r\n                        <HistoryProfileCard\r\n                            key={`history-card-${item.id}-${item.status}`}\r\n                            item={item}\r\n                            onHidden={hide}\r\n                            showSwipeTip={item.id === historyItems[0].id}\r\n                        />\r\n                    )}\r\n                    itemsContainerStyle={styles.itemsContainer}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Filter({\r\n    theme,\r\n    selected,\r\n    filterKey,\r\n    onPress,\r\n}: {\r\n    theme: Theme;\r\n    selected: boolean;\r\n    filterKey: string;\r\n    onPress: () => void;\r\n}): JSX.Element {\r\n    const styles = themedStyles(theme);\r\n    return (\r\n        <Button\r\n            onPress={onPress}\r\n            title={i18n.t(`matching.history.status.${filterKey}`)}\r\n            containerStyle={styles.filterButtonContainer}\r\n            buttonStyle={[styles.filterButton, selected ? styles.filterButtonSelected : {}]}\r\n            titleStyle={[styles.filterLabel, selected ? styles.filterLabelSelected : {}]}\r\n            raised={false}\r\n        />\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        topBar: {\r\n            flexBasis: 90,\r\n            paddingTop: 40,\r\n            paddingHorizontal: 20,\r\n            width: \"100%\",\r\n        },\r\n        title: {\r\n            fontSize: 20,\r\n            fontWeight: \"bold\",\r\n        },\r\n        separator: {\r\n            marginVertical: 20,\r\n            height: 1,\r\n            width: \"100%\",\r\n        },\r\n        itemsContainer: {\r\n            width: \"100%\",\r\n            maxWidth: 600,\r\n            alignSelf: \"center\",\r\n        },\r\n        headerContainer: {\r\n            flexDirection: \"row\",\r\n            paddingRight: 10,\r\n        },\r\n        noResultsText1: {\r\n            fontSize: 20,\r\n            letterSpacing: 0.75,\r\n            color: theme.text,\r\n            marginVertical: 5,\r\n        },\r\n        noResultsText2: {\r\n            fontSize: 16,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n        // Filters\r\n        filtersContainer: {\r\n            width: \"100%\",\r\n            marginVertical: 10,\r\n            flexDirection: \"row\",\r\n        },\r\n        filterButtonContainer: {\r\n            flex: 1,\r\n            marginHorizontal: 15,\r\n            borderRadius: 25,\r\n        },\r\n        filterButton: {\r\n            height: 40,\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        filterButtonSelected: {\r\n            backgroundColor: theme.accent,\r\n        },\r\n        filterLabel: {\r\n            color: theme.text,\r\n            fontSize: 14,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 0.6,\r\n        },\r\n        filterLabelSelected: {\r\n            color: theme.textWhite,\r\n            fontWeight: \"600\",\r\n        },\r\n        filterIcon: {\r\n            fontSize: 18,\r\n            color: theme.text,\r\n            marginRight: 4,\r\n        },\r\n        filterIconSelected: {\r\n            color: theme.textWhite,\r\n        },\r\n        // Search bar\r\n        searchBarContainer: {\r\n            width: \"100%\",\r\n            marginBottom: 5,\r\n            paddingVertical: 0,\r\n            paddingHorizontal: 15,\r\n            backgroundColor: \"transparent\",\r\n            borderTopWidth: 0,\r\n            borderBottomWidth: 0,\r\n        },\r\n        searchBarInputContainer: {\r\n            height: 40,\r\n            backgroundColor: theme.cardBackground,\r\n            elevation: 2,\r\n            borderRadius: 25,\r\n        },\r\n        searchBarInput: {\r\n            fontSize: 14,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(MatchHistoryScreen));\r\n","/* eslint-disable react/display-name */\r\nimport * as React from \"react\";\r\nimport {createStackNavigator, StackHeaderProps} from \"@react-navigation/stack\";\r\nimport {TabMatchingRoot} from \"./types\";\r\nimport TabMatchingScreen from \"../screens/TabMatchingScreen\";\r\nimport {screenTitle} from \"./utils\";\r\nimport MatchScreenHeader from \"../components/headers/MatchScreenHeader\";\r\nimport MatchFilteringScreen from \"../screens/MatchFilteringScreen\";\r\nimport FilteringScreenHeader from \"../components/headers/FilteringScreenHeader\";\r\nimport MatchHistoryScreen from \"../screens/MatchHistoryScreen\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\n\r\nconst TabMatchingStack = createStackNavigator<TabMatchingRoot>();\r\n\r\nexport const TabMatchingNavigator = (): JSX.Element => (\r\n    <TabMatchingStack.Navigator>\r\n        <TabMatchingStack.Screen\r\n            name=\"TabMatchingScreen\"\r\n            options={() => ({\r\n                headerShown: false,\r\n                title: screenTitle(\"TabMatchingScreen\"),\r\n            })}\r\n        >\r\n            {(props) => (\r\n                <>\r\n                    <TabMatchingScreen {...props} />\r\n                    <MatchScreenHeader blur={true} {...props} />\r\n                </>\r\n            )}\r\n        </TabMatchingStack.Screen>\r\n        <TabMatchingStack.Screen\r\n            name=\"MatchFilteringScreen\"\r\n            component={MatchFilteringScreen}\r\n            options={{\r\n                headerShown: true,\r\n                title: screenTitle(\"MatchFilteringScreen\"),\r\n                header: FilteringScreenHeader,\r\n            }}\r\n        />\r\n        <TabMatchingStack.Screen\r\n            name=\"MatchHistoryScreen\"\r\n            component={MatchHistoryScreen}\r\n            options={{\r\n                headerShown: true,\r\n                title: screenTitle(\"MatchHistoryScreen\"),\r\n                header: (props: StackHeaderProps) => <MainHeader backButton={true} {...props} />,\r\n            }}\r\n        />\r\n        {/* TODO delete */}\r\n        {/*<TabMatchingStack.Screen\r\n            name=\"MatchSuccessScreen\"\r\n            component={MatchSuccessScreen}\r\n            options={{\r\n                headerShown: false,\r\n                cardStyleInterpolator:\r\n                    Platform.OS == \"ios\"\r\n                        ? CardStyleInterpolators.forVerticalIOS\r\n                        : CardStyleInterpolators.forFadeFromBottomAndroid,\r\n                title: screenTitle(\"MatchSuccessScreen\"),\r\n            }}\r\n        />*/}\r\n    </TabMatchingStack.Navigator>\r\n);\r\n","import * as React from \"react\";\r\nimport {Text, StyleSheet, Platform} from \"react-native\";\r\nimport {BottomTabBar, BottomTabBarProps} from \"@react-navigation/bottom-tabs\";\r\nimport {BlurView} from \"expo-blur\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport {useSafeAreaInsets, EdgeInsets} from \"react-native-safe-area-context\";\r\nimport {LabelPosition} from \"@react-navigation/bottom-tabs/lib/typescript/src/types\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {BLUR_TAB_INTENSITY} from \"../../styles/general\";\r\n\r\n// Component props\r\nexport type MainTabBarProps = ThemeProps & BottomTabBarProps & {insets: EdgeInsets};\r\n\r\nclass MainTabBarClass extends React.Component<MainTabBarProps> {\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            insets: {bottom},\r\n            ...tabBarProps\r\n        } = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <BlurView\r\n                style={styles.blurViewStyle}\r\n                tint={theme.id === \"dark\" ? \"dark\" : \"default\"}\r\n                intensity={BLUR_TAB_INTENSITY}\r\n            >\r\n                <BottomTabBar\r\n                    {...tabBarProps}\r\n                    activeTintColor={theme.accent}\r\n                    style={[styles.tabBar, {paddingBottom: bottom}]}\r\n                    tabStyle={styles.tab}\r\n                    iconStyle={styles.icon}\r\n                    showLabel={false}\r\n                />\r\n            </BlurView>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        blurViewStyle:\r\n            Platform.OS === \"web\"\r\n                ? {} // On web, scrolling on certain pages breaks if the tab bar is position absolutely\r\n                : {\r\n                      position: \"absolute\",\r\n                      bottom: 0,\r\n                      left: 0,\r\n                      right: 0,\r\n                  },\r\n        tabBar: {\r\n            borderTopWidth: 0,\r\n            elevation: 0,\r\n            backgroundColor: \"transparent\",\r\n        },\r\n        tab: {\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n        },\r\n        icon: {\r\n            flex: 1,\r\n        },\r\n    });\r\n});\r\n\r\nfunction MainTabBar(props: BottomTabBarProps): JSX.Element {\r\n    const insets = useSafeAreaInsets();\r\n    return (\r\n        <ThemeConsumer>\r\n            {(themeProps: ThemeProps) => <MainTabBarClass insets={insets} {...themeProps} {...props} />}\r\n        </ThemeConsumer>\r\n    );\r\n}\r\n\r\nexport type MainTabBarIconProps = {\r\n    focused: boolean;\r\n    color: string;\r\n    size: number;\r\n};\r\nexport type MainTabBarLabelProps = {\r\n    focused: boolean;\r\n    color: string;\r\n    position: LabelPosition;\r\n};\r\n\r\nexport function MainTabBarIcon({name, color}: {name: string} & MainTabBarIconProps): JSX.Element {\r\n    return <MaterialIcons size={26} name={name} color={color} />;\r\n}\r\n\r\n// Unused\r\nexport function MainTabBarLabel({text, color}: {text: string} & MainTabBarLabelProps): JSX.Element {\r\n    return <Text style={{color, fontSize: 12}}>{text}</Text>;\r\n}\r\n\r\nexport default MainTabBar;\r\n","import * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport {ChatRoomUser} from \"../../model/chat-room\";\r\nimport {MainTabBarIcon} from \"./MainTabBar\";\r\nimport {View, StyleSheet} from \"react-native\";\r\nimport {preTheme} from \"../../styles/utils\";\r\n\r\nconst reduxConnector = connect(({messaging}: AppState) => ({\r\n    firstRoom:\r\n        messaging.matchRoomsOrdered.length > 0 ? messaging.matchRooms[messaging.matchRoomsOrdered[0]] : undefined,\r\n    localChatUser: messaging.localChatUser,\r\n}));\r\n\r\nconst INDICATOR_SIZE = 16;\r\n\r\nexport type MessagingTabIconProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps & {focused: boolean; color: string; size: number};\r\n\r\nclass MessagingTabIcon extends React.Component<MessagingTabIconProps> {\r\n    render(): JSX.Element {\r\n        const {firstRoom, localChatUser, theme, ...props} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const localUser = firstRoom && firstRoom.users.find((p: ChatRoomUser) => p._id === localChatUser?._id);\r\n        const lastMessage = firstRoom?.lastMessage;\r\n\r\n        // Check if there is an unread message\r\n        // Since we keep rooms ordered by most recent activity, if there is an unread message it will be on the first room\r\n        const isNotRead =\r\n            lastMessage &&\r\n            localUser &&\r\n            ((localUser.lastMessageSeenDate !== null && localUser.lastMessageSeenDate < lastMessage.createdAt) ||\r\n                localUser.lastMessageSeenId != lastMessage._id);\r\n\r\n        const icon = <MainTabBarIcon name=\"message\" {...props} />;\r\n        let indicator = <></>;\r\n\r\n        if (isNotRead) {\r\n            indicator = (\r\n                <View style={styles.indicatorContainer}>\r\n                    <FontAwesome size={INDICATOR_SIZE - 4} name=\"exclamation\" color={theme.textWhite} />\r\n                </View>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <View>\r\n                {icon}\r\n                {indicator}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        indicatorContainer: {\r\n            position: \"absolute\",\r\n            backgroundColor: theme.error,\r\n            width: INDICATOR_SIZE,\r\n            height: INDICATOR_SIZE,\r\n            borderRadius: INDICATOR_SIZE,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            left: 18,\r\n            bottom: 15,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(MessagingTabIcon));\r\n","/* eslint-disable react/display-name */\r\nimport {createBottomTabNavigator} from \"@react-navigation/bottom-tabs\";\r\nimport {createStackNavigator, StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {MainNavigatorTabs, RootNavigatorScreens, TabHomeRoot} from \"../navigation/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport MessagingNavigator from \"./MessagingNavigator\";\r\nimport {BottomTabBarButtonProps, BottomTabBarProps} from \"@react-navigation/bottom-tabs/lib/typescript/src/types\";\r\nimport {ThemeProps} from \"../types\";\r\nimport TabHomeScreen from \"../screens/TabHomeScreen\";\r\nimport {rootNavigate, screenTitle} from \"./utils\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\nimport {TabMatchingNavigator} from \"./TabMatchingNavigator\";\r\nimport MainTabBar, {MainTabBarIcon} from \"../components/tabs/MainTabBar\";\r\nimport {getFocusedRouteNameFromRoute} from \"@react-navigation/native\";\r\nimport {TouchableOpacity} from \"react-native\";\r\nimport MessagingTabIcon from \"../components/tabs/MessagingTabIcon\";\r\n\r\nconst TabNavigator = createBottomTabNavigator<MainNavigatorTabs>();\r\n\r\n// Component props\r\nexport type MainNavigatorProps = ThemeProps & StackScreenProps<RootNavigatorScreens, \"MainScreen\">;\r\n\r\nfunction MainNavigatorComponent(): JSX.Element {\r\n    return (\r\n        <TabNavigator.Navigator\r\n            initialRouteName=\"TabMatching\"\r\n            tabBar={(props: BottomTabBarProps) => <MainTabBar {...props} />}\r\n        >\r\n            {/*<TabNavigator.Screen\r\n                name=\"TabHome\"\r\n                component={TabHomeNavigator}\r\n                options={{\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"home\" {...props} />,\r\n                }}\r\n            />*/}\r\n            <TabNavigator.Screen\r\n                name=\"TabMatching\"\r\n                component={TabMatchingNavigator}\r\n                options={{\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"contacts\" {...props} />,\r\n                }}\r\n            />\r\n            <TabNavigator.Screen\r\n                name=\"TabMessaging\"\r\n                component={MessagingNavigator}\r\n                options={({route}) => ({\r\n                    tabBarVisible: getFocusedRouteNameFromRoute(route) !== \"ChatScreen\",\r\n                    tabBarIcon: (props) => <MessagingTabIcon {...props} />,\r\n                    // Override the button to make sure we redirect to the rooms screen instead of a previously open conversation\r\n                    tabBarButton: (props: BottomTabBarButtonProps) => (\r\n                        <TouchableOpacity\r\n                            {...props}\r\n                            activeOpacity={1}\r\n                            onPress={() => rootNavigate(\"TabMessaging\", {screen: \"ChatRoomsScreen\"})}\r\n                        />\r\n                    ),\r\n                })}\r\n            />\r\n            {/*\r\n            <TabNavigator.Screen\r\n                name=\"TabNotifications\"\r\n                component={TabNotificationsNavigator}\r\n                options={{\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"notifications\" {...props} />,\r\n                }}\r\n            />\r\n            */}\r\n        </TabNavigator.Navigator>\r\n    );\r\n}\r\n\r\nconst TabHomeStack = createStackNavigator<TabHomeRoot>();\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst TabHomeNavigator = (): JSX.Element => (\r\n    <TabHomeStack.Navigator screenOptions={{header: MainHeader}}>\r\n        <TabHomeStack.Screen\r\n            name=\"TabHomeScreen\"\r\n            component={TabHomeScreen}\r\n            options={{title: screenTitle(\"TabHomeScreen\")}}\r\n        />\r\n    </TabHomeStack.Navigator>\r\n);\r\n\r\n/*\r\nconst TabNotificationsStack = createStackNavigator<TabNotificationsRoot>();\r\n\r\nconst TabNotificationsNavigator = (): JSX.Element => (\r\n    <TabNotificationsStack.Navigator screenOptions={{header: MainHeader}}>\r\n        <TabNotificationsStack.Screen\r\n            name=\"TabNotificationsScreen\"\r\n            component={TabNotImplementedScreen}\r\n            options={{title: screenTitle(\"TabNotificationsScreen\")}}\r\n        />\r\n    </TabNotificationsStack.Navigator>\r\n);\r\n*/\r\n\r\nexport default withTheme(MainNavigatorComponent);\r\n","import * as React from \"react\";\r\nimport {View, StyleSheet, StyleProp, ViewStyle, Platform} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {ONBOARDING_ORDER} from \"../screens/onboarding\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {SafeAreaInsetsContext} from \"react-native-safe-area-context\";\r\n\r\nexport type OnboardingProgressBarProps = {\r\n    index: number;\r\n    style?: StyleProp<ViewStyle>;\r\n    foregroundStyle?: StyleProp<ViewStyle>;\r\n} & ThemeProps;\r\n\r\nclass OnboardingProgressBar extends React.Component<OnboardingProgressBarProps> {\r\n    containerWidth = 0;\r\n    width = new ReAnimated.Value<number>(0);\r\n\r\n    componentDidMount() {\r\n        this.setIndex(this.props.index);\r\n    }\r\n\r\n    componentDidUpdate(oldProps: OnboardingProgressBarProps): void {\r\n        const {index} = this.props;\r\n        if (oldProps.index !== index) this.setIndex(index);\r\n    }\r\n\r\n    private setIndex(index: number) {\r\n        const progress = (index + 1) / ONBOARDING_ORDER.length;\r\n        const targetWidth = progress * this.containerWidth;\r\n\r\n        if (Platform.OS === \"web\") this.width.setValue(targetWidth);\r\n        else {\r\n            ReAnimated.timing(this.width, {\r\n                toValue: targetWidth,\r\n                duration: 150,\r\n                easing: Easing.sin,\r\n            }).start();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {style, foregroundStyle, theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <SafeAreaInsetsContext.Consumer>\r\n                {(insets) => (\r\n                    <View\r\n                        style={[styles.background, {bottom: (insets?.bottom || 0) + 15}, style]}\r\n                        onLayout={(layout) => {\r\n                            this.containerWidth = layout.nativeEvent.layout.width;\r\n                            this.setIndex(this.props.index);\r\n                        }}\r\n                    >\r\n                        <ReAnimated.View style={[styles.foreground, {width: this.width}, foregroundStyle]} />\r\n                    </View>\r\n                )}\r\n            </SafeAreaInsetsContext.Consumer>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme, isWideDevice: boolean) => {\r\n    return StyleSheet.create({\r\n        background: {\r\n            position: \"absolute\",\r\n            left: isWideDevice ? \"55%\" : \"10%\",\r\n\r\n            width: isWideDevice ? \"40%\" : \"80%\",\r\n            height: 8,\r\n            borderRadius: 8,\r\n            backgroundColor: theme.accentSlight,\r\n        },\r\n        foreground: {\r\n            borderRadius: 8,\r\n            backgroundColor: theme.accent,\r\n            height: \"100%\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OnboardingProgressBar);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Gender, GENDERS} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {getToggleStyleProps, ToggleStyleVariant} from \"../styles/toggles\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\nexport type GenderToggleMultiProps = {\r\n    genders: Gender[];\r\n    onSelect?: (genders: Gender[]) => void;\r\n    styleVariant?: ToggleStyleVariant;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction GenderToggleMulti(props: GenderToggleMultiProps): JSX.Element {\r\n    const buttonLabels = GENDERS.map((r: string) => i18n.t(`genders.${r}`));\r\n    const {theme, genders, styleVariant, onSelect, ...otherProps} = props;\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) {\r\n                    const indices: number[] = typeof idx == \"object\" ? (idx as number[]) : [idx];\r\n                    onSelect(indices.map((i: number) => GENDERS[i]));\r\n                }\r\n            }}\r\n            selectMultiple={true}\r\n            selectedIndexes={genders.map((gender: Gender) => GENDERS.indexOf(gender))}\r\n            buttons={buttonLabels}\r\n            {...getToggleStyleProps(styleVariant, theme)}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(GenderToggleMulti);\r\n","import React from \"react\";\r\nimport {Text, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme} from \"../types\";\r\nimport CustomModal, {CustomModalClass} from \"./modals/CustomModal\";\r\nimport {CustomTooltipProps} from \"./CustomTooltip.native\";\r\n\r\nclass CustomTooltip extends React.Component<CustomTooltipProps> {\r\n    modalRef = React.createRef<CustomModalClass>();\r\n\r\n    render(): JSX.Element {\r\n        const {theme, text} = this.props;\r\n        const styles = tooltipStyles(theme);\r\n\r\n        return (\r\n            <>\r\n                <TouchableOpacity activeOpacity={0.5} onPress={() => this.modalRef.current?.show()}>\r\n                    {this.props.children}\r\n                </TouchableOpacity>\r\n                <CustomModal\r\n                    ref={this.modalRef}\r\n                    onHide={() => this.setState({...this.state, shown: false})}\r\n                    modalViewStyle={styles.container}\r\n                    renderContent={() => <Text style={styles.text}>{text}</Text>}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const tooltipStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            textAlign: \"justify\",\r\n            paddingVertical: 10,\r\n            fontSize: 14,\r\n            color: theme.textBlack,\r\n        },\r\n        container: {\r\n            alignContent: \"center\",\r\n            borderRadius: 4,\r\n            paddingHorizontal: 20,\r\n            width: 250,\r\n            paddingVertical: 0,\r\n            backgroundColor: theme.accentSlight,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(CustomTooltip);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet, ViewStyle, TouchableOpacity} from \"react-native\";\r\nimport {initOfferValue, OfferDto, OfferValueDto} from \"../api/dto\";\r\nimport {Gender, Role} from \"../constants/profile-constants\";\r\nimport GenderToggleMulti from \"./GenderToggleMulti\";\r\nimport RoleToggleMulti from \"./RoleToggleMulti\";\r\nimport i18n from \"i18n-js\";\r\nimport {FontAwesome, MaterialIcons} from \"@expo/vector-icons\";\r\nimport CustomTooltip from \"./CustomTooltip\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport CustomModal, {CustomModalClass} from \"./modals/CustomModal\";\r\nimport InputLabel from \"./InputLabel\";\r\nimport Button from \"./Button\";\r\n\r\nexport type OfferControlProps = {\r\n    offer: OfferDto;\r\n    value: OfferValueDto;\r\n    onChange?: (value: OfferValueDto) => void;\r\n    style?: ViewStyle;\r\n} & ThemeProps;\r\n\r\nclass OfferControl extends React.Component<OfferControlProps> {\r\n    settingsModalRef = React.createRef<CustomModalClass>();\r\n\r\n    offerValueChange(changed: Partial<OfferValueDto>): void {\r\n        const {onChange} = this.props;\r\n        if (onChange) onChange({...this.props.value, ...changed});\r\n    }\r\n\r\n    setAllValues(b: boolean) {\r\n        this.offerValueChange(initOfferValue(this.props.offer, b));\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, offer, value, style} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const genders: Gender[] = [];\r\n        if (offer.allowChooseGender) {\r\n            if (value.allowFemale) genders.push(\"female\");\r\n            if (value.allowMale) genders.push(\"male\");\r\n            if (value.allowOther) genders.push(\"other\");\r\n        }\r\n\r\n        const roles: Role[] = [];\r\n        if (offer.allowChooseProfileType) {\r\n            if (value.allowStaff) roles.push(\"staff\");\r\n            if (value.allowStudent) roles.push(\"student\");\r\n        }\r\n\r\n        const isSomethingSelected =\r\n            (!offer.allowChooseGender || genders.length > 0) && (!offer.allowInterRole || roles.length > 0);\r\n\r\n        return (\r\n            <View style={[styles.wrapper, style]}>\r\n                <View style={styles.titleWrapper}>\r\n                    <View style={styles.titleLeft}>\r\n                        <CheckBox\r\n                            checked={isSomethingSelected}\r\n                            onPress={() => this.setAllValues(!isSomethingSelected)}\r\n                            containerStyle={styles.checkboxContainer}\r\n                        />\r\n                        <TouchableOpacity\r\n                            style={styles.offerNameTouchable}\r\n                            onPress={() => this.setAllValues(!isSomethingSelected)}\r\n                        >\r\n                            <Text style={styles.offerName}>{i18n.t(`allOffers.${offer.id}.name`)}</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    <View style={{flexDirection: \"row\"}}>\r\n                        <TouchableOpacity\r\n                            style={styles.sideButton}\r\n                            onPress={() => this.settingsModalRef.current?.show()}\r\n                        >\r\n                            <FontAwesome style={styles.sideButtonIcon} name=\"gear\" />\r\n                        </TouchableOpacity>\r\n                        <CustomTooltip text={i18n.t(`allOffers.${offer.id}.help`)}>\r\n                            <MaterialIcons style={[styles.sideButton, styles.sideButtonIcon]} name=\"help\" />\r\n                        </CustomTooltip>\r\n                    </View>\r\n                </View>\r\n                {/*isSomethingSelected && (\r\n                    <View style={styles.buttonsWrapper}>\r\n                        {offer.allowChooseGender && (\r\n                            <GenderToggleMulti\r\n                                styleVariant=\"chips\"\r\n                                genders={genders}\r\n                                onSelect={(selected: Gender[]) =>\r\n                                    this.offerValueChange({\r\n                                        allowFemale: selected.indexOf(\"female\") != -1,\r\n                                        allowMale: selected.indexOf(\"male\") != -1,\r\n                                        allowOther: selected.indexOf(\"other\") != -1,\r\n                                    })\r\n                                }\r\n                            />\r\n                        )}\r\n                        {offer.allowChooseProfileType && (\r\n                            <RoleToggleMulti\r\n                                styleVariant=\"chips\"\r\n                                roles={roles}\r\n                                onSelect={(selected: Role[]) =>\r\n                                    this.offerValueChange({\r\n                                        allowStaff: selected.indexOf(\"staff\") != -1,\r\n                                        allowStudent: selected.indexOf(\"student\") != -1,\r\n                                    })\r\n                                }\r\n                            />\r\n                        )}\r\n                    </View>\r\n                )*/}\r\n                <CustomModal\r\n                    ref={this.settingsModalRef}\r\n                    modalViewStyle={styles.settingsModal}\r\n                    renderContent={(hide: () => void) => (\r\n                        <>\r\n                            {offer.allowChooseGender && (\r\n                                <View style={styles.settingsModalTargetType}>\r\n                                    <InputLabel>{i18n.t(\"offerSettings.genders\")}</InputLabel>\r\n                                    <GenderToggleMulti\r\n                                        styleVariant=\"classic-rounded\"\r\n                                        genders={genders}\r\n                                        onSelect={(selected: Gender[]) =>\r\n                                            this.offerValueChange({\r\n                                                allowFemale: selected.indexOf(\"female\") != -1,\r\n                                                allowMale: selected.indexOf(\"male\") != -1,\r\n                                                allowOther: selected.indexOf(\"other\") != -1,\r\n                                            })\r\n                                        }\r\n                                    />\r\n                                </View>\r\n                            )}\r\n\r\n                            {offer.allowChooseProfileType && (\r\n                                <View style={styles.settingsModalTargetType}>\r\n                                    <InputLabel>{i18n.t(\"offerSettings.roles\")}</InputLabel>\r\n                                    <RoleToggleMulti\r\n                                        styleVariant=\"classic-rounded\"\r\n                                        roles={roles}\r\n                                        onSelect={(selected: Role[]) =>\r\n                                            this.offerValueChange({\r\n                                                allowStaff: selected.indexOf(\"staff\") != -1,\r\n                                                allowStudent: selected.indexOf(\"student\") != -1,\r\n                                            })\r\n                                        }\r\n                                    />\r\n                                </View>\r\n                            )}\r\n                            <Button\r\n                                style={styles.settingsModalButton}\r\n                                textStyle={styles.settingsModalButtonText}\r\n                                skin=\"rounded-filled\"\r\n                                text={i18n.t(\"ok\")}\r\n                                onPress={hide}\r\n                            />\r\n                        </>\r\n                    )}\r\n                />\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            flexDirection: \"column\",\r\n            alignItems: \"flex-start\",\r\n        },\r\n        titleWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n        },\r\n        titleLeft: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            flex: 1,\r\n        },\r\n        offerNameTouchable: {\r\n            flex: 1,\r\n        },\r\n        offerName: {\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            color: theme.text,\r\n        },\r\n        sideButton: {\r\n            paddingVertical: 10,\r\n            paddingHorizontal: 5,\r\n        },\r\n        sideButtonIcon: {\r\n            fontSize: 20,\r\n            color: theme.textLight,\r\n        },\r\n        checkboxContainer: {\r\n            padding: 0,\r\n            marginTop: 0,\r\n            marginBottom: 0,\r\n            marginLeft: 0,\r\n            marginRight: 5,\r\n        },\r\n\r\n        settingsModal: {\r\n            paddingVertical: 20,\r\n            paddingHorizontal: 15,\r\n            alignItems: \"flex-start\",\r\n        },\r\n        settingsModalTargetType: {\r\n            width: \"100%\",\r\n            marginBottom: 10,\r\n        },\r\n        settingsModalButton: {\r\n            height: 38,\r\n            marginHorizontal: 5,\r\n            marginVertical: 0,\r\n            marginTop: 20,\r\n        },\r\n        settingsModalButtonText: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OfferControl);\r\n","import * as React from \"react\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    CreateProfileDto,\r\n    CreateProfileDtoCommon,\r\n    CreateProfileDtoStaff,\r\n    CreateProfileDtoStudent,\r\n    initOfferValue,\r\n    OfferCategory,\r\n    OfferDto,\r\n    OfferValueDto,\r\n} from \"../../api/dto\";\r\nimport OfferControl from \"../../components/OfferControl\";\r\nimport {setOnboardingOfferValue} from \"../../state/auth/actions\";\r\nimport {createProfile} from \"../../state/profile/actions\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, OnboardingState} from \"../../state/types\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\nimport {Theme} from \"../../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {Text} from \"react-native\";\r\n\r\nexport function createOfferControls(\r\n    offers: OfferDto[],\r\n    category: OfferCategory,\r\n    onboardingState: OnboardingState,\r\n    dispatch: React.Dispatch<AnyAction>,\r\n    theme: Theme,\r\n): JSX.Element {\r\n    const styles = onboardingOffersStyle(theme);\r\n    return (\r\n        <>\r\n            <Text style={styles.offerControlPreText}>{i18n.t(\"offersPreText\")}</Text>\r\n            {offers\r\n                .filter((offer: OfferDto) => offer.category == category)\r\n                .map((offer: OfferDto, i: number) => (\r\n                    <OfferControl\r\n                        key={i}\r\n                        offer={offer}\r\n                        value={onboardingState.offerValues[offer.id] || initOfferValue(offer)}\r\n                        onChange={(value: OfferValueDto) => dispatch(setOnboardingOfferValue(offer.id, value))}\r\n                        style={styles.offerControl}\r\n                    />\r\n                ))}\r\n        </>\r\n    );\r\n}\r\n\r\nfunction onboardingStateToDto(onboardingState: OnboardingState): CreateProfileDto | null {\r\n    /* eslint-disable @typescript-eslint/no-non-null-assertion */\r\n\r\n    const base: CreateProfileDtoCommon = {\r\n        type: onboardingState.type!,\r\n        firstName: onboardingState.firstname!,\r\n        lastName: onboardingState.lastname!,\r\n        gender: onboardingState.gender!,\r\n        birthdate: onboardingState.birthdate!.toJSON(),\r\n        nationality: onboardingState.nationality!,\r\n        languages: onboardingState.languages,\r\n        interests: onboardingState.interestIds.map((id) => ({id})),\r\n        profileOffers: Object.values(onboardingState.offerValues),\r\n        educationFields: onboardingState.educationFields.map((id) => ({id})),\r\n    };\r\n\r\n    if (onboardingState.type == \"student\") {\r\n        return {\r\n            ...base,\r\n            degree: onboardingState.degree,\r\n        } as CreateProfileDtoStudent;\r\n    } else if (onboardingState.type == \"staff\") {\r\n        return {\r\n            ...base,\r\n            staffRoles: Object.keys(onboardingState.staffRoles)\r\n                .filter((k) => onboardingState.staffRoles[k])\r\n                .map((id: string) => ({id})),\r\n        } as CreateProfileDtoStaff;\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function finishOnboarding(onboardingState: OnboardingState): void {\r\n    const createProfileDto = onboardingStateToDto(onboardingState);\r\n    if (createProfileDto) (store.dispatch as MyThunkDispatch)(createProfile(createProfileDto));\r\n}\r\n","import * as React from \"react\";\r\nimport {Text, View, ScrollView, KeyboardAvoidingView, ViewStyle, StyleProp, Alert, Platform} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {onboardingStyle} from \"../../styles/onboarding\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {finishOnboarding} from \"./helpers\";\r\nimport i18n from \"i18n-js\";\r\nimport store from \"../../state/store\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\nimport {logout} from \"../../state/auth/actions\";\r\nimport Button from \"../../components/Button\";\r\nimport layout from \"../../constants/layout\";\r\n\r\nexport type OnboardingScreenProps = {\r\n    index: number;\r\n    previous: () => void;\r\n    next: () => void;\r\n    hasNext: boolean;\r\n    noKeyboardAvoidance?: boolean;\r\n};\r\n\r\nexport type OnboardingSlideProps = {\r\n    title?: string | JSX.Element;\r\n    subtitle?: string;\r\n    handleSubmit?: (e?: React.FormEvent<HTMLFormElement> | undefined) => void;\r\n    hideNavNext?: boolean;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    background?: JSX.Element;\r\n    illustration?: JSX.Element;\r\n    textColor?: string;\r\n} & OnboardingScreenProps &\r\n    ThemeProps;\r\n\r\nfunction ButtonSpacer(): JSX.Element {\r\n    return <View style={{width: 10, height: 1}}></View>;\r\n}\r\n\r\nclass OnboardingSlide extends React.Component<OnboardingSlideProps> {\r\n    render(): JSX.Element {\r\n        const {\r\n            title,\r\n            subtitle,\r\n            index,\r\n            hideNavNext,\r\n            hasNext,\r\n            handleSubmit,\r\n            next,\r\n            containerStyle,\r\n            background,\r\n            illustration,\r\n            textColor,\r\n            noKeyboardAvoidance,\r\n            theme,\r\n        } = this.props;\r\n        const styles = onboardingStyle(theme);\r\n\r\n        const hasPrevious = index > 0;\r\n\r\n        const navigateRight = () => {\r\n            if (handleSubmit) handleSubmit();\r\n            else if (hasNext) next();\r\n        };\r\n\r\n        const wide = layout.isWideDevice;\r\n\r\n        return (\r\n            <ScreenWrapper forceFullWidth containerStyle={styles.root}>\r\n                {wide ? <View style={styles.wideDeviceLeftPanel}>{illustration}</View> : <></>}\r\n                <View style={styles.slideWrapper}>\r\n                    {background}\r\n                    <ScrollView\r\n                        style={styles.slideScrollView}\r\n                        contentContainerStyle={[containerStyle, styles.slideContentWrapper]}\r\n                    >\r\n                        <KeyboardAvoidingView\r\n                            behavior=\"position\"\r\n                            keyboardVerticalOffset={70}\r\n                            enabled={!noKeyboardAvoidance}\r\n                            style={styles.slideContentContainer}\r\n                        >\r\n                            <View style={styles.header}>\r\n                                {title && typeof title === \"string\" && (\r\n                                    <Text style={[styles.title, textColor ? {color: textColor} : {}]}>{title}</Text>\r\n                                )}\r\n                                {title && typeof title !== \"string\" && title}\r\n                                {subtitle && (\r\n                                    <Text style={[styles.subtitle, textColor ? {color: textColor} : {}]}>\r\n                                        {subtitle}\r\n                                    </Text>\r\n                                )}\r\n                            </View>\r\n                            {!wide && illustration}\r\n                            {this.props.children}\r\n                        </KeyboardAvoidingView>\r\n                    </ScrollView>\r\n                    <View style={styles.slideNavWrapper}>\r\n                        <View style={styles.slideNavButtons}>\r\n                            {hasPrevious && (\r\n                                <Button\r\n                                    style={[styles.navButton, styles.navButtonBack]}\r\n                                    skin=\"rounded-hollow\"\r\n                                    text={i18n.t(\"onboarding.back\")}\r\n                                    onPress={() => this.props.previous()}\r\n                                />\r\n                            )}\r\n                            {!hasPrevious && (\r\n                                <Button\r\n                                    style={[styles.navButton, styles.navButtonBack]}\r\n                                    skin=\"rounded-hollow\"\r\n                                    text={i18n.t(\"onboarding.leave\")}\r\n                                    onPress={() => this.quitOnboarding()}\r\n                                />\r\n                            )}\r\n                            {!hideNavNext && hasNext && (\r\n                                <>\r\n                                    <ButtonSpacer />\r\n                                    <Button\r\n                                        style={styles.navButton}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"onboarding.next\")}\r\n                                        onPress={navigateRight}\r\n                                    />\r\n                                </>\r\n                            )}\r\n                            {!hasNext && (\r\n                                <>\r\n                                    <ButtonSpacer />\r\n                                    <Button\r\n                                        style={styles.navButton}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"onboarding.submit\")}\r\n                                        onPress={() => {\r\n                                            if (handleSubmit) handleSubmit();\r\n                                            finishOnboarding(store.getState().auth.onboarding);\r\n                                        }}\r\n                                    />\r\n                                </>\r\n                            )}\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n\r\n    quitOnboarding() {\r\n        const quit = () => store.dispatch(logout());\r\n\r\n        if (Platform.OS === \"web\") {\r\n            quit(); // no alerts on web\r\n        } else {\r\n            Alert.alert(i18n.t(\"onboarding.quit.title\"), i18n.t(\"onboarding.quit.text\"), [\r\n                {\r\n                    text: i18n.t(\"onboarding.quit.cancel\"),\r\n                    style: \"cancel\",\r\n                },\r\n                {text: i18n.t(\"onboarding.quit.yes\"), onPress: quit, style: \"destructive\"},\r\n            ]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default withTheme(OnboardingSlide);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport {Keyboard, View} from \"react-native\";\r\nimport {FormTextInput} from \"../../components/forms/FormTextInput\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {VALIDATOR_FIRSTNAME, VALIDATOR_LASTNAME} from \"../../validators\";\r\nimport {getOnboardingTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport layout from \"../../constants/layout\";\r\nimport {useState} from \"react\";\r\n\r\ntype OnboardingNameFormState = {\r\n    firstname: string;\r\n    lastname: string;\r\n};\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    firstname: VALIDATOR_FIRSTNAME,\r\n    lastname: VALIDATOR_LASTNAME,\r\n});\r\n\r\ntype OnboardingNameScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\nclass OnboardingNameScreen extends React.Component<OnboardingNameScreenProps> {\r\n    lastNameInputRef = React.createRef<FormTextInput>();\r\n\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingNameScreenProps>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.firstname != next.firstname || prev.lastname != next.lastname;\r\n    }\r\n\r\n    submit(values: OnboardingNameFormState) {\r\n        Keyboard.dismiss();\r\n        this.props.dispatch(setOnboardingValues(values));\r\n        this.props.next();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, onboardingState} = this.props;\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingNameFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingNameFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingNameFormState>) => {\r\n                    const {handleSubmit, values, errors, touched, handleChange, handleBlur} = formikProps;\r\n                    const textInputProps = (field: string) => ({\r\n                        field,\r\n                        value: (values as {[key: string]: string})[field],\r\n                        error: (errors as {[key: string]: string | undefined})[field],\r\n                        touched: (touched as {[key: string]: boolean | undefined})[field],\r\n                        handleChange,\r\n                        handleBlur,\r\n                        ...getOnboardingTextInputsStyleProps(theme),\r\n                    });\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.name.title\")}\r\n                            subtitle={i18n.t(\"onboarding.name.subtitle\")}\r\n                            illustration={<Illustration />}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <FormTextInput\r\n                                {...textInputProps(\"firstname\")}\r\n                                label={i18n.t(\"firstname\")}\r\n                                placeholder={i18n.t(\"firstname\")}\r\n                                autoCompleteType=\"name\"\r\n                                enablesReturnKeyAutomatically={true}\r\n                                returnKeyType=\"next\"\r\n                                blurOnSubmit={false}\r\n                                onSubmitEditing={() => this.lastNameInputRef.current?.focus()}\r\n                            />\r\n\r\n                            <FormTextInput\r\n                                {...textInputProps(\"lastname\")}\r\n                                ref={this.lastNameInputRef}\r\n                                label={i18n.t(\"lastname\")}\r\n                                placeholder={i18n.t(\"lastname\")}\r\n                                autoCompleteType=\"name\"\r\n                                enablesReturnKeyAutomatically={true}\r\n                                returnKeyType=\"done\"\r\n                                onSubmitEditing={() => handleSubmit()}\r\n                            />\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Illustration(): JSX.Element {\r\n    const wide = layout.isWideDevice;\r\n    const svgWidth = wide ? 600 : 380;\r\n    const svgHeight = wide ? 350 : 200;\r\n\r\n    const [value, setValue] = useState(0);\r\n    const forceUpdate = () => setValue(value + 1);\r\n\r\n    const Svg1 = getLocalSvg(\"woman-holding-phone-2\", () => forceUpdate());\r\n    const Svg2 = getLocalSvg(\"man-holding-phone\", () => forceUpdate());\r\n    const Blob1 = getLocalSvg(\"blob-4\", () => forceUpdate());\r\n    const Blob2 = getLocalSvg(\"blob-5\", () => forceUpdate());\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                width: svgWidth,\r\n                height: svgHeight,\r\n                alignSelf: \"center\",\r\n            }}\r\n        >\r\n            <Blob1\r\n                style={{position: \"absolute\", left: 0, top: 0}}\r\n                width={svgHeight * (260 / 250)}\r\n                height={svgHeight}\r\n                viewBox=\"0 0 260 250\" // necessary for web\r\n                preserveAspectRatio=\"xMinYMid\"\r\n            />\r\n            <Svg1\r\n                style={{position: \"absolute\", left: svgWidth * 0.15, top: svgHeight * 0.1}}\r\n                width={svgHeight * 0.8 * (140 / 200)}\r\n                height={svgHeight * 0.8}\r\n                viewBox=\"0 0 140 200\"\r\n                preserveAspectRatio=\"xMinYMid\"\r\n            />\r\n            <Blob2\r\n                style={{position: \"absolute\", right: 0}}\r\n                width={svgHeight * (250 / 275)}\r\n                height={svgHeight}\r\n                viewBox=\"0 0 250 275\"\r\n                preserveAspectRatio=\"xMaxYMid\"\r\n            />\r\n            <Svg2\r\n                style={{position: \"absolute\", right: svgWidth * 0.12, top: svgHeight * 0.1}}\r\n                width={svgHeight * 0.8 * (150 / 200)}\r\n                height={svgHeight * 0.8}\r\n                viewBox=\"0 0 150 200\"\r\n                preserveAspectRatio=\"xMaxYMid\"\r\n            />\r\n        </View>\r\n    );\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingNameScreen));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Gender, GENDERS} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {getToggleStyleProps, ToggleStyleVariant} from \"../styles/toggles\";\r\n\r\n// Component props\r\nexport type GenderToggleProps = {\r\n    gender?: Gender | null;\r\n    onSelect?: (gender: Gender) => void;\r\n    disabled?: boolean;\r\n    styleVariant?: ToggleStyleVariant;\r\n};\r\n\r\nfunction GenderToggle(props: GenderToggleProps & ThemeProps): JSX.Element {\r\n    const buttonLabels = GENDERS.map((r: string) => i18n.t(`genders.${r}`));\r\n    const {gender, disabled, styleVariant, theme} = props;\r\n\r\n    const onUpdate = (idx: number) => {\r\n        if (props.onSelect) props.onSelect(GENDERS[idx]);\r\n    };\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={onUpdate}\r\n            selectedIndex={gender !== undefined && gender !== null ? GENDERS.indexOf(gender) : -1}\r\n            buttons={buttonLabels}\r\n            disabled={disabled}\r\n            {...getToggleStyleProps(styleVariant, theme)}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(GenderToggle);\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport CountryPicker, {\r\n    Country,\r\n    CountryCode,\r\n    DARK_THEME,\r\n    DEFAULT_THEME,\r\n    TranslationLanguageCode,\r\n} from \"react-native-country-picker-modal\";\r\nimport i18n from \"i18n-js\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\n// Component props\r\nexport type NationalityPickerProps = ThemeProps & {\r\n    nationality?: CountryCode;\r\n    open?: boolean;\r\n    onSelect?: (countryCode: CountryCode) => void;\r\n    onHide?: () => void;\r\n};\r\n\r\n// Component state\r\nexport type NationalityPickerState = {\r\n    open: boolean;\r\n};\r\n\r\nclass NationalityPicker extends React.Component<NationalityPickerProps, NationalityPickerState> {\r\n    constructor(props: NationalityPickerProps) {\r\n        super(props);\r\n        this.state = {\r\n            open: props.open === undefined ? true : props.open,\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(oldProps: NationalityPickerProps) {\r\n        if (!oldProps.open && this.props.open) this.showModal();\r\n        if (oldProps.open && !this.props.open) this.hideModal();\r\n    }\r\n\r\n    showModal(): void {\r\n        if (!this.state.open) this.setState({...this.state, open: true});\r\n    }\r\n\r\n    hideModal(): void {\r\n        if (this.state.open) {\r\n            this.setState({...this.state, open: false});\r\n            if (this.props.onHide !== undefined) this.props.onHide();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, onSelect} = this.props;\r\n        const {open} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CountryPicker\r\n                countryCode={this.props.nationality || \"FR\"}\r\n                filterProps={{placeholder: i18n.t(\"search\")}}\r\n                withFlag={true}\r\n                withFilter={true}\r\n                withEmoji={false}\r\n                onSelect={(country: Country) => {\r\n                    if (onSelect) onSelect(country.cca2);\r\n                }}\r\n                onClose={() => this.hideModal()}\r\n                translation={i18n.t(\"countryPickerLanguageCode\") as TranslationLanguageCode}\r\n                visible={open}\r\n                containerButtonStyle={styles.pickerContainerButton}\r\n                theme={theme.id === \"dark\" ? DARK_THEME : DEFAULT_THEME}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        pickerContainerButton: {\r\n            display: \"none\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(NationalityPicker);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, View} from \"react-native\";\r\nimport {CountryCode, Flag, TranslationLanguageCode} from \"react-native-country-picker-modal\";\r\nimport {CountryInfo, getCountryInfoAsync} from \"react-native-country-picker-modal/lib/CountryService\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type FormattedNationalityProps = {\r\n    countryCode: CountryCode;\r\n    flagSize?: number;\r\n} & TextProps;\r\n\r\n// Component state\r\nexport type FormattedNationalityState = {\r\n    countryName: string;\r\n};\r\n\r\nclass FormattedNationality extends React.Component<FormattedNationalityProps, FormattedNationalityState> {\r\n    constructor(props: FormattedNationalityProps) {\r\n        super(props);\r\n        this.state = {\r\n            countryName: \"\",\r\n        };\r\n        this.updateCountryName();\r\n    }\r\n\r\n    updateCountryName(): void {\r\n        const {countryCode} = this.props;\r\n        const translation = i18n.t(\"countryPickerLanguageCode\") as TranslationLanguageCode;\r\n        getCountryInfoAsync({countryCode, translation}).then((info: CountryInfo) => {\r\n            this.setState({countryName: info.countryName});\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps: FormattedNationalityProps): void {\r\n        if (this.props.countryCode != prevProps.countryCode) {\r\n            this.updateCountryName();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {countryCode, ...otherProps} = this.props;\r\n        const {countryName} = this.state;\r\n\r\n        const flagSize = this.props.flagSize || 20;\r\n\r\n        return (\r\n            <View style={{flexDirection: \"row\"}}>\r\n                <Flag countryCode={countryCode} flagSize={flagSize} withEmoji={false}></Flag>\r\n                <Text {...otherProps}>{countryName}</Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FormattedNationality;\r\n","import * as React from \"react\";\r\nimport {TouchableOpacity, View, StyleSheet, StyleProp, ViewStyle, Text} from \"react-native\";\r\nimport NationalityPicker from \"./NationalityPicker\";\r\nimport FormattedNationality from \"./FormattedNationality\";\r\nimport {CountryCode} from \"../model/country-codes\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type NationalityControlProps = ThemeProps & {\r\n    nationality?: CountryCode;\r\n    onSelect?: (countryCode: CountryCode) => void;\r\n    onHide?: () => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    buttonValidStyle?: StyleProp<ViewStyle>;\r\n};\r\n\r\n// Component state\r\nexport type NationalityControlState = {\r\n    open: boolean;\r\n};\r\n\r\nclass NationalityControl extends React.Component<NationalityControlProps, NationalityControlState> {\r\n    constructor(props: NationalityControlProps) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n        };\r\n    }\r\n\r\n    showModal(): void {\r\n        if (!this.state.open) this.setState({...this.state, open: true});\r\n    }\r\n\r\n    hideModal(): void {\r\n        if (this.state.open) {\r\n            this.setState({...this.state, open: false});\r\n            if (this.props.onHide) this.props.onHide();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onSelect, onHide, nationality, buttonStyle, buttonValidStyle, theme} = this.props;\r\n        const {open} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={styles.wrapper}>\r\n                <TouchableOpacity\r\n                    style={[styles.button, buttonStyle, nationality ? [styles.buttonOk, buttonValidStyle] : {}]}\r\n                    onPress={() => this.showModal()}\r\n                >\r\n                    {nationality && <FormattedNationality countryCode={nationality} style={styles.nationality} />}\r\n                    {!nationality && <Text style={styles.placeholder}>{i18n.t(\"nationalityPicker.placeholder\")}</Text>}\r\n                </TouchableOpacity>\r\n                <NationalityPicker\r\n                    nationality={this.props.nationality}\r\n                    open={open}\r\n                    onSelect={(country: CountryCode) => {\r\n                        if (onSelect) onSelect(country);\r\n                    }}\r\n                    onHide={() => {\r\n                        this.hideModal();\r\n                        if (onHide) onHide();\r\n                    }}\r\n                />\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            width: \"100%\",\r\n        },\r\n        button: {\r\n            width: \"100%\",\r\n            height: 60,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n            backgroundColor: \"transparent\",\r\n            justifyContent: \"center\",\r\n        },\r\n        buttonOk: {\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        nationality: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n        placeholder: {\r\n            fontSize: 16,\r\n            color: theme.textLight,\r\n            paddingHorizontal: 10,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(NationalityControl);\r\n","import * as React from \"react\";\r\n\r\nimport {Text, TextProps} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type FormattedDateProps = {\r\n    date?: Date;\r\n} & TextProps;\r\n\r\nexport function FormattedDate(props: FormattedDateProps): JSX.Element {\r\n    const {date, ...otherProps} = props;\r\n\r\n    if (date) {\r\n        const localizedMonth = i18n.t(`months.${date.getMonth()}`);\r\n        //const day = ((date.getDate() + \"\").length == 1 ? \"0\" : \"\") + date.getDate();\r\n        const day = date.getDate() + \"\";\r\n        const formattedDate = `${day} ${localizedMonth} ${date.getFullYear()}`;\r\n\r\n        return <Text {...otherProps}>{formattedDate}</Text>;\r\n    } else return <></>;\r\n}\r\n","import * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {TextInput, TextInputProps, View, StyleSheet, StyleProp, TextStyle, ViewStyle, Platform} from \"react-native\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type DateInputProps = {\r\n    date?: Date;\r\n    onChange?: (date?: Date, error?: string) => void;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    inputStyle?: StyleProp<TextStyle>;\r\n    inputStyleFocused?: StyleProp<TextStyle>;\r\n    inputStyleValid?: StyleProp<TextStyle>;\r\n    minimumDate?: Date;\r\n    maximumDate?: Date;\r\n    autoFocus?: boolean;\r\n} & ThemeProps;\r\n\r\n// Component state\r\ntype DateInputState = {\r\n    year: string;\r\n    month: string;\r\n    day: string;\r\n    touched: boolean;\r\n    error: string | undefined;\r\n    focused1: boolean;\r\n    focused2: boolean;\r\n    focused3: boolean;\r\n};\r\n\r\nconst dateInputProps = (\r\n    ref: React.RefObject<TextInput>,\r\n    value: string,\r\n    maxLength: number,\r\n    next?: React.RefObject<TextInput>,\r\n    onChange?: (v: string) => void,\r\n): TextInputProps => ({\r\n    autoCorrect: false,\r\n    clearTextOnFocus: true,\r\n    keyboardType: \"number-pad\",\r\n    returnKeyType: next ? \"next\" : \"done\",\r\n    value,\r\n    maxLength,\r\n    onSubmitEditing: () => {\r\n        if (next) next.current?.focus();\r\n    },\r\n    onChangeText: (text: string) => {\r\n        text = text.replace(/\\D+/g, \"\"); // only keep numbers\r\n        if (onChange) onChange(text);\r\n        if (text.length == maxLength) {\r\n            if (next) next.current?.focus();\r\n            else ref.current?.blur();\r\n        }\r\n    },\r\n});\r\n\r\nexport class DateInputClass extends React.Component<DateInputProps, DateInputState> {\r\n    constructor(props: DateInputProps) {\r\n        super(props);\r\n        this.state = this.deriveStateFromDate(props.date);\r\n    }\r\n\r\n    input1Ref = React.createRef<TextInput>();\r\n    input2Ref = React.createRef<TextInput>();\r\n    input3Ref = React.createRef<TextInput>();\r\n\r\n    componentDidUpdate(oldProps: DateInputProps): void {\r\n        if (this.props.date != oldProps.date) {\r\n            this.setState({...this.state, ...this.deriveStateFromDate(this.props.date)});\r\n        }\r\n    }\r\n\r\n    focus(): void {\r\n        this.input1Ref.current?.focus();\r\n    }\r\n\r\n    private validDate(): {date?: Date; error?: string} {\r\n        const {year, month, day} = this.state;\r\n        const parsable = year.length >= 4 && month.length > 0 && day.length > 0;\r\n\r\n        if (parsable) {\r\n            try {\r\n                const pyear = parseInt(year);\r\n                const pmonth = parseInt(month) - 1;\r\n                const pday = parseInt(day);\r\n                // Verify that all individual parts of the date are correct.\r\n                if (pyear > 0 && pmonth >= 0 && pmonth < 12 && pday > 0 && pday <= 31) {\r\n                    const date = new Date(pyear, pmonth, pday);\r\n                    const error = this.getError(date);\r\n                    if (error) return {error};\r\n                    else return {date};\r\n                }\r\n            } catch (e) {}\r\n            return {error: \"validation.date.invalid\"};\r\n        } else if (this.state.touched) return {error: \"validation.date.invalid\"};\r\n\r\n        // If one of the fields is empty, we only output an error if the input was touched\r\n        // i.e. it was completed before\r\n        return {};\r\n    }\r\n\r\n    private getError(date: Date): string | undefined {\r\n        const {minimumDate, maximumDate} = this.props;\r\n        if (maximumDate && date > maximumDate) return \"validation.date.tooYoung\";\r\n        else if (minimumDate && date < minimumDate) return \"validation.date.invalid\";\r\n        else return undefined;\r\n    }\r\n\r\n    deriveStateFromDate(date?: Date): DateInputState {\r\n        const year = date?.getFullYear();\r\n        const month = date?.getMonth();\r\n        const day = date?.getDate();\r\n\r\n        return {\r\n            year: year === undefined ? \"\" : year + \"\",\r\n            month: month === undefined ? \"\" : month + 1 + \"\",\r\n            day: day === undefined ? \"\" : day + \"\",\r\n            touched: date !== undefined,\r\n            error: date ? this.getError(date) : undefined,\r\n            focused1: this.state ? this.state.focused1 : false,\r\n            focused2: this.state ? this.state.focused2 : false,\r\n            focused3: this.state ? this.state.focused3 : false,\r\n        };\r\n    }\r\n\r\n    set(values: Partial<DateInputState>): void {\r\n        const {onChange} = this.props;\r\n        this.setState({...this.state, ...values}, () => {\r\n            if (onChange) {\r\n                const {date, error} = this.validDate();\r\n                if (date || error) {\r\n                    onChange(date, error);\r\n                    this.setState({...this.state, touched: true, error});\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {inputStyle, containerStyle, autoFocus, theme} = this.props;\r\n        const {year, month, day, touched, error, focused1, focused2, focused3} = this.state;\r\n        const styles = themedStyles(theme);\r\n        const valid = touched && !error;\r\n        const inputStyleValid = valid ? this.props.inputStyleValid : {};\r\n        const inputStyleFocused = [Platform.OS === \"web\" ? {outline: \"none\"} : {}, this.props.inputStyleFocused];\r\n\r\n        return (\r\n            <View style={[styles.container, containerStyle]}>\r\n                <View style={styles.containerDay}>\r\n                    <TextInput\r\n                        {...dateInputProps(this.input1Ref, day, 2, this.input2Ref, (day) => this.set({day}))}\r\n                        ref={this.input1Ref}\r\n                        style={[\r\n                            styles.input,\r\n                            styles.inputDay,\r\n                            inputStyle,\r\n                            focused1 ? inputStyleFocused : {},\r\n                            inputStyleValid,\r\n                        ]}\r\n                        blurOnSubmit={false}\r\n                        returnKeyType=\"next\"\r\n                        placeholder={i18n.t(\"dateInput.dayPlaceholder\")}\r\n                        autoFocus={autoFocus}\r\n                        onBlur={() => this.setState({focused1: false})}\r\n                        onFocus={() => this.setState({focused1: true})}\r\n                    />\r\n                </View>\r\n                <View style={styles.containerMonth}>\r\n                    <TextInput\r\n                        {...dateInputProps(this.input2Ref, month, 2, this.input3Ref, (month) => this.set({month}))}\r\n                        ref={this.input2Ref}\r\n                        style={[\r\n                            styles.input,\r\n                            styles.inputMonth,\r\n                            inputStyle,\r\n                            focused2 ? inputStyleFocused : {},\r\n                            inputStyleValid,\r\n                        ]}\r\n                        blurOnSubmit={false}\r\n                        onSubmitEditing={() => this.input3Ref.current?.focus()}\r\n                        returnKeyType=\"next\"\r\n                        placeholder={i18n.t(\"dateInput.monthPlaceholder\")}\r\n                        onBlur={() => this.setState({focused2: false})}\r\n                        onFocus={() => this.setState({focused2: true})}\r\n                    />\r\n                </View>\r\n                <View style={styles.containerYear}>\r\n                    <TextInput\r\n                        {...dateInputProps(this.input3Ref, year, 4, undefined, (year) => this.set({year}))}\r\n                        ref={this.input3Ref}\r\n                        style={[\r\n                            styles.input,\r\n                            styles.inputYear,\r\n                            inputStyle,\r\n                            focused3 ? inputStyleFocused : {},\r\n                            inputStyleValid,\r\n                        ]}\r\n                        returnKeyType=\"done\"\r\n                        placeholder={i18n.t(\"dateInput.yearPlaceholder\")}\r\n                        onBlur={() => this.setState({focused3: false})}\r\n                        onFocus={() => this.setState({focused3: true})}\r\n                    />\r\n                </View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n        },\r\n        input: {\r\n            borderWidth: 1,\r\n            borderColor: theme.componentBorder,\r\n            paddingHorizontal: 6,\r\n            textAlign: \"center\",\r\n        },\r\n        containerDay: {flex: 1},\r\n        containerMonth: {flex: 1, paddingLeft: 10},\r\n        containerYear: {flex: 2, paddingLeft: 10},\r\n        inputDay: {},\r\n        inputMonth: {},\r\n        inputYear: {},\r\n    });\r\n});\r\n\r\nexport default withTheme(DateInputClass);\r\n","import * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {MIN_AGE} from \"../constants/profile-constants\";\r\nimport DateInput, {DateInputClass, DateInputProps} from \"./DateInput\";\r\n\r\n// Component props\r\nexport type BirthDateInputProps = Omit<Omit<DateInputProps, \"minimumDate\">, \"maximumDate\">;\r\n\r\nconst minDate = new Date(1920, 0, 0);\r\nconst maxDate = new Date(Date.now());\r\nmaxDate.setFullYear(maxDate.getFullYear() - MIN_AGE);\r\n\r\nexport class BirthDateInputClass extends React.Component<BirthDateInputProps> {\r\n    dateInputRef = React.createRef<DateInputClass>();\r\n\r\n    focus(): void {\r\n        this.dateInputRef.current?.focus();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const dateInputProps = this.props;\r\n        return <DateInput ref={this.dateInputRef} minimumDate={minDate} maximumDate={maxDate} {...dateInputProps} />;\r\n    }\r\n}\r\n\r\nexport default withTheme(BirthDateInputClass);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {\r\n    VALIDATOR_ONBOARDING_BIRTHDATE,\r\n    VALIDATOR_ONBOARDING_GENDER,\r\n    VALIDATOR_ONBOARDING_NATIONALITY,\r\n} from \"../../validators\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport {Gender} from \"../../constants/profile-constants\";\r\nimport GenderToggle from \"../../components/GenderToggle\";\r\nimport NationalityControl from \"../../components/NationalityControl\";\r\nimport {CountryCode} from \"../../model/country-codes\";\r\nimport EducationFieldPicker from \"../../components/EducationFieldPicker\";\r\nimport {StyleSheet, View} from \"react-native\";\r\nimport {FormattedDate} from \"../../components/FormattedDate\";\r\nimport BirthDateInput from \"../../components/BirthDateInput\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ONBOARDING_INPUT_BORDER_RADIUS} from \"../../styles/onboarding\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport layout from \"../../constants/layout\";\r\nimport {useState} from \"react\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    birthdate: VALIDATOR_ONBOARDING_BIRTHDATE,\r\n    gender: VALIDATOR_ONBOARDING_GENDER,\r\n    nationality: VALIDATOR_ONBOARDING_NATIONALITY,\r\n});\r\n\r\ntype OnboardingProfileScreen1Props = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\ntype OnboardingProfile1FormState = {\r\n    birthdate: Date | null;\r\n    gender: Gender | null;\r\n    nationality: CountryCode | null;\r\n    educationFields: string[];\r\n};\r\n\r\nclass OnboardingProfileScreen1 extends React.Component<OnboardingProfileScreen1Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingProfileScreen1Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return (\r\n            prev.birthdate != next.birthdate ||\r\n            prev.gender != next.gender ||\r\n            prev.nationality != next.nationality ||\r\n            prev.educationFields != next.educationFields\r\n        );\r\n    }\r\n\r\n    submit(values: OnboardingProfile1FormState) {\r\n        if (values.birthdate && values.gender && values.nationality && values.educationFields) {\r\n            this.props.next();\r\n            this.props.dispatch(\r\n                setOnboardingValues({\r\n                    birthdate: values.birthdate,\r\n                    gender: values.gender,\r\n                    nationality: values.nationality,\r\n                    educationFields: values.educationFields,\r\n                }),\r\n            );\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, theme} = this.props;\r\n\r\n        const spacing = 30;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingProfile1FormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingProfile1FormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingProfile1FormState>) => {\r\n                    const {\r\n                        handleSubmit,\r\n                        values,\r\n                        errors,\r\n                        touched,\r\n                        setFieldValue,\r\n                        setFieldError,\r\n                        setFieldTouched,\r\n                    } = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.profile1.title\")}\r\n                            illustration={<Illustration />}\r\n                            handleSubmit={handleSubmit}\r\n                            noKeyboardAvoidance={true}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel>{i18n.t(\"dateOfBirth\")}</InputLabel>\r\n                            <BirthDateInput\r\n                                inputStyle={styles.dateTextInput}\r\n                                inputStyleFocused={styles.dateTextInputFocused}\r\n                                inputStyleValid={styles.dateTextInputValid}\r\n                                onChange={(date, error) => {\r\n                                    if (error) setFieldError(\"birthdate\", error);\r\n                                    else setFieldValue(\"birthdate\", date);\r\n                                    setFieldTouched(\"birthdate\", true);\r\n                                }}\r\n                            />\r\n                            {values.birthdate && !errors.birthdate && (\r\n                                <FormattedDate style={styles.birthdateText} date={values.birthdate} />\r\n                            )}\r\n                            {touched.birthdate && <InputErrorText error={errors.birthdate}></InputErrorText>}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"nationality\")}</InputLabel>\r\n                            <NationalityControl\r\n                                buttonStyle={styles.nationalityButton}\r\n                                buttonValidStyle={styles.nationalityButtonValid}\r\n                                nationality={values.nationality || undefined}\r\n                                onSelect={(nationality: CountryCode) => setFieldValue(\"nationality\", nationality)}\r\n                            />\r\n                            {touched.nationality && <InputErrorText error={errors.nationality}></InputErrorText>}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"gender\")}</InputLabel>\r\n                            <GenderToggle\r\n                                gender={values.gender}\r\n                                onSelect={(gender: Gender) => setFieldValue(\"gender\", gender)}\r\n                                styleVariant=\"onboarding\"\r\n                            />\r\n                            {touched.gender && <InputErrorText error={errors.gender}></InputErrorText>}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"fieldsOfEducation\")}</InputLabel>\r\n                            <EducationFieldPicker\r\n                                fields={values.educationFields}\r\n                                onChange={(fields: string[]) => setFieldValue(\"educationFields\", fields)}\r\n                                showChips={true}\r\n                                buttonStyleVariant=\"onboarding\"\r\n                            />\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        dateTextInput: {\r\n            height: 48,\r\n            borderRadius: ONBOARDING_INPUT_BORDER_RADIUS,\r\n            paddingHorizontal: 10,\r\n            borderWidth: 0,\r\n            backgroundColor: theme.onboardingInputBackground,\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n        dateTextInputFocused: {\r\n            backgroundColor: theme.onboardingInputFocusedBackground,\r\n        },\r\n        dateTextInputValid: {\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        birthdateText: {\r\n            textAlign: \"right\",\r\n            marginTop: 4,\r\n            fontSize: 12,\r\n        },\r\n        nationalityButton: {\r\n            height: 48,\r\n            borderRadius: ONBOARDING_INPUT_BORDER_RADIUS,\r\n            backgroundColor: theme.onboardingInputBackground,\r\n            paddingHorizontal: 10,\r\n            borderBottomWidth: 0,\r\n        },\r\n        nationalityButtonValid: {},\r\n    });\r\n});\r\n\r\nfunction Illustration(): JSX.Element {\r\n    const wide = layout.isWideDevice;\r\n    const svgHeight = wide ? 400 : 300;\r\n\r\n    const [value, setValue] = useState(0);\r\n    const forceUpdate = () => setValue(value + 1);\r\n\r\n    const Svg = getLocalSvg(\"woman-holding-phone-3\", forceUpdate);\r\n    const Blob = getLocalSvg(\"blob-6\", forceUpdate);\r\n\r\n    return (\r\n        <View\r\n            style={[\r\n                {height: svgHeight, zIndex: -1},\r\n                !wide && {\r\n                    position: \"absolute\",\r\n                    top: -190,\r\n                    right: -150,\r\n                },\r\n            ]}\r\n        >\r\n            <Blob width={svgHeight * (350 / 360)} height={svgHeight} viewBox=\"0 0 350 360\" />\r\n            <Svg\r\n                style={{\r\n                    position: \"absolute\",\r\n                    ...(wide\r\n                        ? {left: svgHeight * 0.075, top: svgHeight * 0.1}\r\n                        : {left: svgHeight * 0.1, top: svgHeight * 0.28}),\r\n                }}\r\n                width={svgHeight * (wide ? 0.9 : 0.7) * (275 / 385)}\r\n                height={svgHeight * (wide ? 0.9 : 0.7)}\r\n                viewBox=\"0 0 275 385\"\r\n            />\r\n        </View>\r\n    );\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingProfileScreen1));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {StyleProp, StyleSheet, ViewStyle} from \"react-native\";\r\nimport {LanguageLevel, LANGUAGE_LEVELS} from \"../constants/profile-constants\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport PopUpSelector from \"./PopUpSelector\";\r\nimport {PickerButtonStyleVariant} from \"../styles/picker\";\r\n\r\n// Component props\r\nexport type LanguageLevelPickerProps = {\r\n    level?: LanguageLevel;\r\n    onChange?: (level: LanguageLevel) => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    buttonStyleVariant?: PickerButtonStyleVariant;\r\n} & ThemeProps;\r\n\r\nclass LanguageLevelPicker extends React.Component<LanguageLevelPickerProps> {\r\n    render(): JSX.Element {\r\n        const {onChange, level, theme, buttonStyle, buttonStyleVariant} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <PopUpSelector\r\n                values={LANGUAGE_LEVELS}\r\n                label={(l: string) => i18n.t(`languageLevels.${l}`)}\r\n                placeholder={i18n.t(\"languageLevelPicker.placeholder\")}\r\n                selected={level ? [level] : []}\r\n                buttonStyle={[styles.button, buttonStyle]}\r\n                buttonStyleVariant={buttonStyleVariant}\r\n                onSelect={(values: string[]) => {\r\n                    if (values.length > 0 && onChange) onChange(values[0] as LanguageLevel);\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            width: 70,\r\n            height: 32,\r\n            alignItems: \"center\",\r\n            paddingHorizontal: 0,\r\n            paddingVertical: 0,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(LanguageLevelPicker);\r\n","import * as React from \"react\";\r\nimport {View, StyleSheet, ViewStyle, Text, Alert, TouchableOpacity} from \"react-native\";\r\nimport LanguagePicker from \"./LanguagePicker\";\r\nimport LanguageLevelPicker from \"./LanguageLevelPicker\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {LanguageLevel} from \"../constants/profile-constants\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {SpokenLanguageDto} from \"../api/dto\";\r\nimport {MAX_SPOKEN_LANGUAGES} from \"../constants/config\";\r\nimport i18n from \"i18n-js\";\r\nimport {PickerButtonStyleVariant} from \"../styles/picker\";\r\nimport {ONBOARDING_INPUT_BORDER_RADIUS} from \"../styles/onboarding\";\r\n\r\n// Component props\r\nexport type SpokenLanguagesInputProps = ThemeProps & {\r\n    languages: SpokenLanguageDto[];\r\n    onChange?: (languages: SpokenLanguageDto[], hasErrors: boolean) => void;\r\n    style?: ViewStyle;\r\n    pickerButtonStyleVariant?: PickerButtonStyleVariant;\r\n};\r\n\r\n// Component state\r\nexport type SpokenLanguagesInputState = {\r\n    languages: Partial<SpokenLanguageDto>[];\r\n};\r\n\r\nclass SpokenLanguagesInput extends React.Component<SpokenLanguagesInputProps, SpokenLanguagesInputState> {\r\n    constructor(props: SpokenLanguagesInputProps) {\r\n        super(props);\r\n        const languages = props.languages || [];\r\n        this.state = {languages};\r\n    }\r\n\r\n    onChange(languages: Partial<SpokenLanguageDto>[]) {\r\n        this.setState({...this.state, languages});\r\n        const hasErrors = languages.filter((l) => !l.level).length > 0;\r\n\r\n        if (this.props.onChange) {\r\n            this.props.onChange(\r\n                languages\r\n                    .filter((l: Partial<SpokenLanguageDto>) => l.code && l.level)\r\n                    .map((l: Partial<SpokenLanguageDto>) => l as SpokenLanguageDto),\r\n                hasErrors,\r\n            );\r\n        }\r\n    }\r\n\r\n    removeRow(idx: number) {\r\n        if (idx >= 0 && idx < this.state.languages.length)\r\n            this.onChange(this.state.languages.filter((v, i) => i !== idx));\r\n    }\r\n\r\n    setLanguages(codes: string[]) {\r\n        const levelDict = new Map(this.state.languages.map((l) => [l.code, l.level]));\r\n        const languages = codes.map((code: string) => ({code, level: levelDict.get(code)}));\r\n        this.onChange(languages);\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            languages,\r\n        });\r\n    }\r\n\r\n    setLanguageLevel(idx: number, level: LanguageLevel) {\r\n        const languages = this.state.languages.map((l, i) => (i === idx ? {...l, level} : l));\r\n        this.onChange(languages);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, style, pickerButtonStyleVariant} = this.props;\r\n        const {languages} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const rows = languages.map((sl: Partial<SpokenLanguageDto>, i: number) => {\r\n            return (\r\n                <View\r\n                    key={`spoken-languages-input-${sl.code}`}\r\n                    style={[styles.rowContainer, i === 0 ? styles.firstRowContainer : {}]}\r\n                >\r\n                    <View style={styles.languageLabelContainer}>\r\n                        <Text style={styles.languageLabel} numberOfLines={1}>\r\n                            {i18n.t(`languageNames.${sl.code}`)}\r\n                        </Text>\r\n                    </View>\r\n                    <LanguageLevelPicker\r\n                        level={sl.level}\r\n                        buttonStyle={styles.levelPicker}\r\n                        onChange={(level: LanguageLevel) => this.setLanguageLevel(i, level)}\r\n                        buttonStyleVariant={pickerButtonStyleVariant}\r\n                    />\r\n                    <TouchableOpacity style={styles.deleteIconContainer} onPress={() => this.removeRow(i)}>\r\n                        <MaterialIcons style={styles.deleteIcon} name=\"close\" />\r\n                    </TouchableOpacity>\r\n                </View>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <View style={style}>\r\n                <LanguagePicker\r\n                    multiple={true}\r\n                    languages={languages.map((l) => l.code || \"\")}\r\n                    style={styles.languagePicker}\r\n                    onChange={(languageCodes: string[]) => {\r\n                        if (languageCodes.length > MAX_SPOKEN_LANGUAGES)\r\n                            Alert.alert(`You cannot select more than ${MAX_SPOKEN_LANGUAGES} languages`);\r\n                        this.setLanguages(languageCodes.slice(0, MAX_SPOKEN_LANGUAGES));\r\n                    }}\r\n                    showChips={false}\r\n                    buttonStyleVariant={pickerButtonStyleVariant}\r\n                />\r\n                {rows}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        rowContainer: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            height: 32,\r\n            marginVertical: 3,\r\n        },\r\n        firstRowContainer: {\r\n            marginTop: 10,\r\n        },\r\n        deleteIconContainer: {\r\n            width: 30,\r\n            height: 30,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            backgroundColor: theme.error,\r\n            borderRadius: 100,\r\n        },\r\n        deleteIcon: {\r\n            fontSize: 16,\r\n            color: theme.textWhite,\r\n        },\r\n        languagePicker: {},\r\n        languageLabelContainer: {\r\n            flex: 1,\r\n            paddingHorizontal: 10,\r\n            backgroundColor: theme.onboardingInputBackground,\r\n            borderRadius: ONBOARDING_INPUT_BORDER_RADIUS,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            height: \"100%\",\r\n        },\r\n        languageLabel: {\r\n            fontSize: 14,\r\n            color: theme.text,\r\n        },\r\n        levelPicker: {\r\n            marginHorizontal: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SpokenLanguagesInput);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {InterestDto} from \"../api/dto\";\r\nimport MultiPicker, {MultiPickerProps} from \"./MultiPicker\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    allInterests: state.profile.interests,\r\n}));\r\n\r\nlet values: string[] = [];\r\n\r\n// Component props\r\nexport type InterestsPickerProps = ConnectedProps<typeof reduxConnector> & {\r\n    interests: string[];\r\n    onChange?: (interests: string[]) => void;\r\n} & Partial<MultiPickerProps>;\r\n\r\nclass InterestsPicker extends React.Component<InterestsPickerProps> {\r\n    componentDidMount() {\r\n        if (values.length == 0) this.updateValues();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: InterestsPickerProps) {\r\n        if (oldProps.allInterests.length != this.props.allInterests.length) this.updateValues();\r\n    }\r\n\r\n    updateValues() {\r\n        values = this.props.allInterests.map((interest: InterestDto) => interest.id);\r\n        this.forceUpdate();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {interests, onChange, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <MultiPicker\r\n                values={values}\r\n                genLabel={(interestId: string) => `interestNames.${interestId}`}\r\n                selected={interests}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                placeholder={i18n.t(\"interestsPicker.placeholder\")}\r\n                multipleText={i18n.t(\"interestsPicker.multiple\")}\r\n                searchablePlaceholder={i18n.t(\"interestsPicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(InterestsPicker);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {VALIDATOR_ONBOARDING_INTERESTS, VALIDATOR_ONBOARDING_LANGUAGES} from \"../../validators\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport SpokenLanguagesInput from \"../../components/SpokenLanguagesInput\";\r\nimport {SpokenLanguageDto} from \"../../api/dto\";\r\nimport InterestsPicker from \"../../components/InterestsPicker\";\r\nimport layout from \"../../constants/layout\";\r\nimport {View} from \"react-native\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport {useState} from \"react\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    languages: VALIDATOR_ONBOARDING_LANGUAGES,\r\n    interestIds: VALIDATOR_ONBOARDING_INTERESTS,\r\n});\r\n\r\ntype OnboardingProfileScreen2Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps;\r\n\r\ntype OnboardingProfileScreen2State = {\r\n    hasErrors: boolean;\r\n};\r\n\r\ntype OnboardingProfile2FormState = {\r\n    languages: SpokenLanguageDto[];\r\n    interestIds: string[];\r\n};\r\n\r\nclass OnboardingProfileScreen2 extends React.Component<OnboardingProfileScreen2Props, OnboardingProfileScreen2State> {\r\n    constructor(props: OnboardingProfileScreen2Props) {\r\n        super(props);\r\n        this.state = {hasErrors: false};\r\n    }\r\n\r\n    submit(values: OnboardingProfile2FormState) {\r\n        if (!this.state.hasErrors) {\r\n            this.props.dispatch(setOnboardingValues({languages: values.languages, interestIds: values.interestIds}));\r\n            this.props.next();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState} = this.props;\r\n        const {hasErrors} = this.state;\r\n\r\n        const spacing = 30;\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingProfile2FormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingProfile2FormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingProfile2FormState>) => {\r\n                    const {handleSubmit, values, touched, setFieldValue, errors} = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.profile2.title\")}\r\n                            illustration={<Illustration />}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel>{i18n.t(\"spokenLanguages\")}</InputLabel>\r\n                            <SpokenLanguagesInput\r\n                                languages={values.languages}\r\n                                onChange={(languages: SpokenLanguageDto[], hasErrors: boolean) => {\r\n                                    setFieldValue(\"languages\", languages);\r\n                                    this.setState({...this.state, hasErrors});\r\n                                }}\r\n                                pickerButtonStyleVariant=\"onboarding\"\r\n                            />\r\n                            {touched.languages && hasErrors && (\r\n                                <InputErrorText\r\n                                    error={\"validation.language.specifyLevel\"}\r\n                                    style={{marginBottom: 0, marginTop: 10}}\r\n                                />\r\n                            )}\r\n                            {touched.languages && !hasErrors && values.languages.length == 0 && (\r\n                                <InputErrorText\r\n                                    error={\"validation.language.atLeastOne\"}\r\n                                    style={{marginBottom: 0, marginTop: 10}}\r\n                                />\r\n                            )}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"chooseInterests\")}</InputLabel>\r\n                            <InterestsPicker\r\n                                interests={values.interestIds}\r\n                                onChange={(interestIds: string[]) => {\r\n                                    setFieldValue(\"interestIds\", interestIds);\r\n                                }}\r\n                                showChips={true}\r\n                                buttonStyleVariant=\"onboarding\"\r\n                            />\r\n                            {touched.interestIds && <InputErrorText error={errors.interestIds} />}\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Illustration(): JSX.Element {\r\n    const wide = layout.isWideDevice;\r\n    const svgHeight = wide ? 400 : 300;\r\n\r\n    const [value, setValue] = useState(0);\r\n    const forceUpdate = () => setValue(value + 1);\r\n\r\n    const Svg = getLocalSvg(\"woman-holding-phone-3\", () => forceUpdate());\r\n    const Blob = getLocalSvg(\"blob-6\", () => forceUpdate());\r\n\r\n    return (\r\n        <View\r\n            style={[\r\n                {height: svgHeight, zIndex: -1},\r\n                !wide && {\r\n                    position: \"absolute\",\r\n                    top: -190,\r\n                    right: -150,\r\n                },\r\n            ]}\r\n        >\r\n            <Blob width={svgHeight * (350 / 360)} height={svgHeight} viewBox=\"0 0 350 360\" />\r\n            <Svg\r\n                style={{\r\n                    position: \"absolute\",\r\n                    ...(wide\r\n                        ? {left: svgHeight * 0.075, top: svgHeight * 0.1}\r\n                        : {left: svgHeight * 0.1, top: svgHeight * 0.28}),\r\n                }}\r\n                width={svgHeight * (wide ? 0.9 : 0.7) * (275 / 385)}\r\n                height={svgHeight * (wide ? 0.9 : 0.7)}\r\n                viewBox=\"0 0 275 385\"\r\n            />\r\n        </View>\r\n    );\r\n}\r\n\r\nexport default reduxConnector(OnboardingProfileScreen2);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, TouchableOpacity, View, Dimensions} from \"react-native\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport {Role} from \"../../constants/profile-constants\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {getLocalSvg} from \"../../assets\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\ntype OnboardingRoleScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\ntype OnboardingRoleFormState = {\r\n    type: Role;\r\n};\r\n\r\nclass OnboardingRoleScreen extends React.Component<OnboardingRoleScreenProps> {\r\n    submit(values: OnboardingRoleFormState) {\r\n        this.props.dispatch(setOnboardingValues(values));\r\n        this.props.next();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const StudentBlob = getLocalSvg(\"blob-9\", () => this.forceUpdate());\r\n        const StudentSvg = getLocalSvg(\"student\", () => this.forceUpdate());\r\n        const StaffBlob = getLocalSvg(\"blob-8\", () => this.forceUpdate());\r\n        const StaffSvg = getLocalSvg(\"staff\", () => this.forceUpdate());\r\n\r\n        const svgHeight = (Dimensions.get(\"window\").height - 300) / 2;\r\n\r\n        return (\r\n            <OnboardingSlide title={i18n.t(\"onboarding.role.title\")} hideNavNext={true} {...this.props}>\r\n                <View style={[styles.buttonsContainer, {maxWidth: svgHeight * 1.3}]}>\r\n                    <TouchableOpacity\r\n                        style={{alignSelf: \"flex-start\"}}\r\n                        activeOpacity={0.8}\r\n                        onPress={() => this.submit({type: \"student\"})}\r\n                    >\r\n                        <StudentBlob width={svgHeight * (300 / 280)} height={svgHeight} viewBox=\"0 0 300 280\" />\r\n                        <StudentSvg\r\n                            style={{position: \"absolute\", left: svgHeight * 0.26, top: svgHeight * 0.1}}\r\n                            width={svgHeight * 0.85 * (200 / 240)}\r\n                            height={svgHeight * 0.85}\r\n                            viewBox=\"0 0 200 240\"\r\n                        />\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity\r\n                        style={{alignSelf: \"flex-end\", marginTop: -20}}\r\n                        activeOpacity={0.8}\r\n                        onPress={() => this.submit({type: \"staff\"})}\r\n                    >\r\n                        <StaffBlob width={svgHeight * (290 / 305)} height={svgHeight} viewBox=\"0 0 290 305\" />\r\n                        <StaffSvg\r\n                            style={{position: \"absolute\", right: svgHeight * 0.1, top: svgHeight * 0.12}}\r\n                            width={svgHeight * 0.82 * (210 / 235)}\r\n                            height={svgHeight * 0.82}\r\n                            viewBox=\"0 0 210 235\"\r\n                        />\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        buttonsContainer: {\r\n            width: \"100%\",\r\n            alignSelf: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(OnboardingRoleScreen));\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {createOfferControls} from \"./helpers\";\r\nimport {OfferCategory} from \"../../api/dto\";\r\nimport FormattedOfferCategory from \"../../components/FormattedOfferCategory\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\n\r\n// State-linked props\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n    offers: state.profile.offers,\r\n}));\r\n\r\n// Component props\r\ntype OnboardingOfferScreen1Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps & ThemeProps;\r\n\r\nclass OnboardingOfferScreen1 extends React.Component<OnboardingOfferScreen1Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingOfferScreen1Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.offerValues != next.offerValues;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, offers, dispatch, theme} = this.props;\r\n        const styles = onboardingOffersStyle(theme);\r\n        const category = OfferCategory.Discover;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={\r\n                    <FormattedOfferCategory category={category} textStyle={styles.categoryTitleText} fontSize={24} />\r\n                }\r\n                subtitle={i18n.t(\"onboarding.offersDiscover.subtitle\")}\r\n                {...this.props}\r\n            >\r\n                {createOfferControls(offers, category, onboardingState, dispatch, theme)}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingOfferScreen1));\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {createOfferControls} from \"./helpers\";\r\nimport {OfferCategory} from \"../../api/dto\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport FormattedOfferCategory from \"../../components/FormattedOfferCategory\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\n\r\n// State-linked props\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n    offers: state.profile.offers,\r\n}));\r\n\r\n// Component props\r\ntype OnboardingOfferScreen2Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps & ThemeProps;\r\n\r\nclass OnboardingOfferScreen2 extends React.Component<OnboardingOfferScreen2Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingOfferScreen2Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.offerValues != next.offerValues;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, offers, dispatch, theme} = this.props;\r\n        const styles = onboardingOffersStyle(theme);\r\n        const category = OfferCategory.Collaborate;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={\r\n                    <FormattedOfferCategory category={category} textStyle={styles.categoryTitleText} fontSize={24} />\r\n                }\r\n                subtitle={i18n.t(\"onboarding.offersCollaborate.subtitle\")}\r\n                {...this.props}\r\n            >\r\n                {createOfferControls(offers, category, onboardingState, dispatch, theme)}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingOfferScreen2));\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {createOfferControls} from \"./helpers\";\r\nimport {OfferCategory} from \"../../api/dto\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport FormattedOfferCategory from \"../../components/FormattedOfferCategory\";\r\n\r\n// State-linked props\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n    offers: state.profile.offers,\r\n}));\r\n\r\n// Component props\r\ntype OnboardingOfferScreen3Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps & ThemeProps;\r\n\r\nclass OnboardingOfferScreen3 extends React.Component<OnboardingOfferScreen3Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingOfferScreen3Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.offerValues != next.offerValues;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, offers, dispatch, theme} = this.props;\r\n        const styles = onboardingOffersStyle(theme);\r\n        const category = OfferCategory.Meet;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={\r\n                    <FormattedOfferCategory category={category} textStyle={styles.categoryTitleText} fontSize={24} />\r\n                }\r\n                subtitle={i18n.t(\"onboarding.offersMeet.subtitle\")}\r\n                {...this.props}\r\n            >\r\n                {createOfferControls(offers, category, onboardingState, dispatch, theme)}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingOfferScreen3));\r\n","import * as React from \"react\";\r\nimport {ButtonGroup, withTheme} from \"react-native-elements\";\r\nimport i18n from \"i18n-js\";\r\nimport {Degree, DEGREES} from \"../constants/profile-constants\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {getToggleStyleProps, ToggleStyleVariant} from \"../styles/toggles\";\r\n\r\nexport type DegreeToggleProps = {\r\n    degree?: Degree;\r\n    onUpdate?: (degree?: Degree) => void;\r\n    styleVariant?: ToggleStyleVariant;\r\n} & ThemeProps;\r\n\r\nclass DegreeToggle extends React.Component<DegreeToggleProps> {\r\n    render(): JSX.Element {\r\n        const buttonLabels = DEGREES.map((d: string) => i18n.t(`degrees.${d}`));\r\n        const {degree, theme, styleVariant} = this.props;\r\n\r\n        return (\r\n            <ButtonGroup\r\n                onPress={(idx: number) => {\r\n                    if (this.props.onUpdate) this.props.onUpdate(idx == -1 ? undefined : DEGREES[idx]);\r\n                }}\r\n                selectedIndex={degree ? DEGREES.indexOf(degree) : -1}\r\n                buttons={buttonLabels}\r\n                {...getToggleStyleProps(styleVariant, theme)}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(DegreeToggle);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport {Degree, StaffRole, STAFF_ROLES, STAFF_ROLE_ICONS} from \"../../constants/profile-constants\";\r\nimport DegreeToggle from \"../../components/DegreeToggle\";\r\nimport {TouchableOpacity, Text, StyleSheet, Switch, View} from \"react-native\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {VALIDATOR_ONBOARDING_DEGREE} from \"../../validators\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport layout from \"../../constants/layout\";\r\nimport {useState} from \"react\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    degree: VALIDATOR_ONBOARDING_DEGREE,\r\n});\r\n\r\ntype OnboardingRoleSpecificScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\ntype OnboardingRoleSpecificScreenFormState = {\r\n    degree: Degree;\r\n};\r\n\r\nclass OnboardingRoleSpecificScreen extends React.Component<OnboardingRoleSpecificScreenProps> {\r\n    submit(values: Partial<OnboardingRoleSpecificScreenFormState>) {\r\n        this.props.dispatch(setOnboardingValues(values));\r\n        this.props.next();\r\n    }\r\n\r\n    studentRender(): JSX.Element {\r\n        const {onboardingState, theme} = this.props;\r\n        const styles = studentThemedStyles(theme);\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingRoleSpecificScreenFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingRoleSpecificScreenFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingRoleSpecificScreenFormState>) => {\r\n                    const {handleSubmit, values, errors, touched, setFieldValue} = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(`onboarding.roleSpecific1.student.title`)}\r\n                            illustration={<StudentIllustration />}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel style={styles.label}>{i18n.t(\"levelOfStudy\")}</InputLabel>\r\n                            <DegreeToggle\r\n                                degree={values.degree}\r\n                                onUpdate={(degree?: Degree) => setFieldValue(\"degree\", degree)}\r\n                                styleVariant=\"onboarding\"\r\n                            />\r\n                            {touched.degree && <InputErrorText error={errors.degree}></InputErrorText>}\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n\r\n    staffRender(): JSX.Element {\r\n        const {theme, onboardingState, dispatch} = this.props;\r\n        const styles = staffThemedStyles(theme);\r\n        const staffRoles = onboardingState.staffRoles;\r\n        const atLeastOne = Object.values(staffRoles).some((v) => v === true);\r\n\r\n        const setValue = (sr: StaffRole, b: boolean) =>\r\n            dispatch(setOnboardingValues({staffRoles: {...staffRoles, [sr]: b}}));\r\n\r\n        const buttons = STAFF_ROLES.map((sr: StaffRole, i: number) => (\r\n            <TouchableOpacity\r\n                key={i}\r\n                style={styles.button}\r\n                activeOpacity={0.6}\r\n                onPress={() => setValue(sr, !staffRoles[sr])}\r\n            >\r\n                <MaterialIcons name={STAFF_ROLE_ICONS[i]} style={styles.buttonIcon} />\r\n                <Text style={styles.buttonText}>{i18n.t(`staffRoles.${sr}`)}</Text>\r\n                <Switch\r\n                    value={staffRoles[sr]}\r\n                    thumbColor={theme.accent}\r\n                    trackColor={{true: theme.accentTernary, false: theme.accentSlight}}\r\n                    onValueChange={(b: boolean) => setValue(sr, b)}\r\n                />\r\n            </TouchableOpacity>\r\n        ));\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={i18n.t(\"onboarding.roleSpecific1.staff.title\")}\r\n                illustration={<StaffIllustration />}\r\n                hideNavNext={!atLeastOne}\r\n                {...this.props}\r\n            >\r\n                {buttons}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState} = this.props;\r\n        return (\r\n            <>\r\n                {onboardingState.type === \"student\" && this.studentRender()}\r\n                {onboardingState.type === \"staff\" && this.staffRender()}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const studentThemedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        label: {\r\n            marginTop: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport const staffThemedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            height: 60,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        buttonText: {\r\n            ...styleTextThin,\r\n            fontSize: 25,\r\n            letterSpacing: 1.25,\r\n            color: theme.text,\r\n            flexGrow: 1,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 30,\r\n            marginRight: 10,\r\n            color: theme.accent,\r\n        },\r\n    });\r\n});\r\n\r\nfunction StudentIllustration(): JSX.Element {\r\n    const wide = layout.isWideDevice;\r\n    const svgHeight = wide ? 500 : 275;\r\n\r\n    const [value, setValue] = useState(0);\r\n    const forceUpdate = () => setValue(value + 1);\r\n\r\n    const Svg = getLocalSvg(\"woman-holding-phone-4\", () => forceUpdate());\r\n    const Blob = getLocalSvg(\"blob-10\", () => forceUpdate());\r\n\r\n    return (\r\n        <View style={[{height: svgHeight}, !wide && {marginLeft: svgHeight * 0.4}]}>\r\n            <Blob width={svgHeight * (405 / 365)} height={svgHeight} viewBox=\"0 0 405 365\" />\r\n            <Svg\r\n                style={{\r\n                    position: \"absolute\",\r\n                    ...(wide\r\n                        ? {left: svgHeight * 0.25, top: svgHeight * 0.1}\r\n                        : {right: -svgHeight * 0.22, top: svgHeight * 0.12}),\r\n                }}\r\n                width={svgHeight * 0.85 * (225 / 320)}\r\n                height={svgHeight * 0.85}\r\n                viewBox=\"0 0 225 320\"\r\n            />\r\n        </View>\r\n    );\r\n}\r\n\r\nfunction StaffIllustration(): JSX.Element {\r\n    const wide = layout.isWideDevice;\r\n    const svgHeight = wide ? 500 : 300;\r\n\r\n    const [value, setValue] = useState(0);\r\n    const forceUpdate = () => setValue(value + 1);\r\n\r\n    const Svg = getLocalSvg(\"woman-holding-phone-4\", () => forceUpdate());\r\n    const Blob = getLocalSvg(\"blob-11\", () => forceUpdate());\r\n\r\n    return (\r\n        <View\r\n            style={[\r\n                {height: svgHeight, zIndex: -1},\r\n                !wide && {\r\n                    position: \"absolute\",\r\n                    top: -120,\r\n                    right: -150,\r\n                },\r\n            ]}\r\n        >\r\n            <Blob width={svgHeight * (415 / 450)} height={svgHeight} viewBox=\"0 0 415 450\" />\r\n            <Svg\r\n                style={{\r\n                    position: \"absolute\",\r\n                    ...(wide\r\n                        ? {left: svgHeight * 0.11, top: svgHeight * 0.1}\r\n                        : {left: svgHeight * 0.12, top: svgHeight * 0.06}),\r\n                }}\r\n                width={svgHeight * 0.8 * (225 / 320)}\r\n                height={svgHeight * 0.8}\r\n                viewBox=\"0 0 225 320\"\r\n            />\r\n        </View>\r\n    );\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingRoleSpecificScreen));\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\nexport type TOSDeclinedModalProps = ThemeProps & Partial<CustomModalProps>;\r\n\r\nclass TOSDeclinedModal extends React.Component<TOSDeclinedModalProps> {\r\n    render() {\r\n        const {theme, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                renderContent={(hide: () => void) => (\r\n                    <>\r\n                        <Text style={styles.text}>\r\n                            {i18n.t(\"legal.modal.disclaimer1\")}\r\n                            {\"\\n\\n\"}\r\n                            {i18n.t(\"legal.modal.disclaimer2\")}\r\n                        </Text>\r\n                        <View style={styles.actionButtonsWrapper}>\r\n                            <Button\r\n                                text={i18n.t(\"cancel\")}\r\n                                onPress={() => hide()}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionText}\r\n                            />\r\n                            <Button\r\n                                text={i18n.t(\"legal.decline\")}\r\n                                onPress={() => {\r\n                                    hide();\r\n                                    rootNavigate(\"LoginRoot\", {\r\n                                        screen: \"LoginScreens\",\r\n                                        params: {screen: \"SigninScreen\"},\r\n                                    });\r\n                                }}\r\n                                skin=\"rounded-filled\"\r\n                                style={[styles.actionButton, styles.redBackground]}\r\n                                textStyle={styles.actionText}\r\n                            />\r\n                        </View>\r\n                    </>\r\n                )}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(TOSDeclinedModal);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps} from \"react-native\";\r\n\r\n// Component props\r\nexport type TextLinkProps = {\r\n    text: string;\r\n} & TextProps;\r\n\r\nfunction TextLink(props: React.PropsWithChildren<TextLinkProps>): JSX.Element {\r\n    const {text, ...textProps} = props;\r\n\r\n    return (\r\n        <Text {...textProps} style={[textProps ? textProps.style : {}, {color: \"#2e78b7\"}]}>\r\n            {text}\r\n        </Text>\r\n    );\r\n}\r\n\r\nexport default TextLink;\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport {Text, TouchableOpacity, View, StyleSheet} from \"react-native\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport TOSDeclinedModal from \"../../components/modals/TOSDeclinedModal\";\r\nimport i18n from \"i18n-js\";\r\nimport TextLink from \"../../components/TextLink\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {TERMS_AND_CONDITIONS_URL} from \"../../constants/config\";\r\nimport {Linking} from \"expo\";\r\nimport {LinearGradient} from \"expo-linear-gradient\";\r\n\r\n// Component props\r\ntype OnboardingLegalSlideProps = ThemeProps &\r\n    OnboardingScreenProps & {title: string; text: string; specialBackground?: boolean};\r\n\r\nclass OnboardingLegalSlide extends React.Component<OnboardingLegalSlideProps> {\r\n    render(): JSX.Element {\r\n        const {theme, title, text, specialBackground, next, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const textColor = specialBackground ? theme.textWhite : theme.textLight;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={title}\r\n                hideNavNext={true}\r\n                next={next}\r\n                {...(specialBackground\r\n                    ? {\r\n                          background: <LinearGradient style={styles.background} colors={[theme.accent, \"#862ADF\"]} />,\r\n                          textColor: theme.textWhite,\r\n                      }\r\n                    : {})}\r\n                {...otherProps}\r\n            >\r\n                <Text style={[styles.legalText, {color: textColor}]}>{text}</Text>\r\n                <Text style={[styles.readMoreText, {color: textColor}]}>\r\n                    {i18n.t(\"legal.readMore\")[0]}\r\n                    <TextLink\r\n                        onPress={() => Linking.openURL(TERMS_AND_CONDITIONS_URL)}\r\n                        text={i18n.t(\"legal.readMore\")[1]}\r\n                        style={{fontWeight: \"bold\"}}\r\n                    />\r\n                    {i18n.t(\"legal.readMore\")[2]}\r\n                </Text>\r\n\r\n                <View style={styles.actionsWrapper}>\r\n                    <TOSDeclinedModal\r\n                        activator={(show) => (\r\n                            <TouchableOpacity style={[styles.actionButton, styles.actionButtonDecline]} onPress={show}>\r\n                                <Text style={styles.actionButtonText}>{i18n.t(\"legal.decline\")}</Text>\r\n                                <MaterialIcons name=\"close\" style={styles.actionButtonText} />\r\n                            </TouchableOpacity>\r\n                        )}\r\n                    />\r\n                    <TouchableOpacity style={[styles.actionButton, styles.actionButtonAccept]} onPress={() => next()}>\r\n                        <Text style={styles.actionButtonText}>{i18n.t(\"legal.accept\")}</Text>\r\n                        <MaterialIcons name=\"check\" style={styles.actionButtonText} />\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nconst buttonsRadius = 100;\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        background: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n        },\r\n        actionsWrapper: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-around\",\r\n            borderRadius: buttonsRadius,\r\n\r\n            shadowColor: \"#000\",\r\n            shadowOffset: {width: 0, height: 5},\r\n            shadowOpacity: 0.34,\r\n            shadowRadius: 6.27,\r\n            elevation: 10,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            padding: 14,\r\n        },\r\n        actionButtonDecline: {\r\n            backgroundColor: theme.error,\r\n            borderTopLeftRadius: buttonsRadius,\r\n            borderBottomLeftRadius: buttonsRadius,\r\n        },\r\n        actionButtonAccept: {\r\n            backgroundColor: theme.okay,\r\n            borderTopRightRadius: buttonsRadius,\r\n            borderBottomRightRadius: buttonsRadius,\r\n        },\r\n        actionButtonText: {\r\n            fontSize: 18,\r\n            paddingHorizontal: 2,\r\n            color: theme.textWhite,\r\n        },\r\n        readMoreText: {\r\n            fontSize: 16,\r\n            lineHeight: 20,\r\n            textAlign: \"justify\",\r\n            marginVertical: 30,\r\n            letterSpacing: 0.4,\r\n        },\r\n        legalText: {\r\n            textAlign: \"justify\",\r\n            fontSize: 16,\r\n            lineHeight: 22,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OnboardingLegalSlide);\r\n","import OnboardingNameScreen from \"./OnboardingNameScreen\";\r\nimport OnboardingProfileScreen1 from \"./OnboardingProfileScreen1\";\r\nimport OnboardingProfileScreen2 from \"./OnboardingProfileScreen2\";\r\nimport OnboardingRoleScreen from \"./OnboardingRoleScreen\";\r\nimport OnboardingOffersScreen1 from \"./OnboardingOffersScreen1\";\r\nimport OnboardingOffersScreen2 from \"./OnboardingOffersScreen2\";\r\nimport OnboardingOffersScreen3 from \"./OnboardingOffersScreen3\";\r\nimport OnboardingRoleSpecificScreen from \"./OnboardingRoleSpecificScreen\";\r\nimport OnboardingLegalScreen1 from \"./OnboardingLegalScreen1\";\r\nimport OnboardingLegalScreen2 from \"./OnboardingLegalScreen2\";\r\nimport OnboardingLegalScreen3 from \"./OnboardingLegalScreen3\";\r\n\r\nexport const ONBOARDING_SCREENS = {\r\n    OnboardingNameScreen,\r\n    OnboardingProfileScreen1,\r\n    OnboardingProfileScreen2,\r\n    OnboardingRoleScreen,\r\n    OnboardingRoleSpecificScreen,\r\n    OnboardingOffersScreen1,\r\n    OnboardingOffersScreen2,\r\n    OnboardingOffersScreen3,\r\n    OnboardingLegalScreen1,\r\n    OnboardingLegalScreen2,\r\n    OnboardingLegalScreen3,\r\n};\r\n","import * as React from \"react\";\r\nimport {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingLegalSlide from \"./OnboardingLegalSlide\";\r\n\r\nclass OnboardingLegalScreen1 extends React.Component<OnboardingScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <OnboardingLegalSlide\r\n                title={i18n.t(\"onboarding.legal1.title\")}\r\n                text={i18n.t(\"onboarding.legal1.text\")}\r\n                specialBackground={true}\r\n                {...this.props}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default OnboardingLegalScreen1;\r\n","import * as React from \"react\";\r\nimport {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingLegalSlide from \"./OnboardingLegalSlide\";\r\n\r\nclass OnboardingLegalScreen1 extends React.Component<OnboardingScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <OnboardingLegalSlide\r\n                title={i18n.t(\"onboarding.legal2.title\")}\r\n                text={i18n.t(\"onboarding.legal2.text\")}\r\n                {...this.props}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default OnboardingLegalScreen1;\r\n","import * as React from \"react\";\r\nimport {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingLegalSlide from \"./OnboardingLegalSlide\";\r\n\r\nclass OnboardingLegalScreen1 extends React.Component<OnboardingScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <OnboardingLegalSlide\r\n                title={i18n.t(\"onboarding.legal3.title\")}\r\n                text={i18n.t(\"onboarding.legal3.text\")}\r\n                specialBackground={true}\r\n                {...this.props}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default OnboardingLegalScreen1;\r\n","import * as React from \"react\";\r\nimport {OnboardingScreens} from \"../navigation/types\";\r\nimport {createMaterialTopTabNavigator} from \"@react-navigation/material-top-tabs\";\r\nimport {ONBOARDING_ORDER} from \"../screens/onboarding\";\r\nimport {screenTitle} from \"./utils\";\r\nimport OnboardingProgressBar from \"../components/OnboardingProgressBar\";\r\nimport {nextOnboardingSlide, previousOnboardingSlide} from \"../state/auth/actions\";\r\nimport store from \"../state/store\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {ONBOARDING_SCREENS} from \"../screens/onboarding/screens\";\r\n\r\nconst OnboardingStack = createMaterialTopTabNavigator<OnboardingScreens>();\r\n\r\nconst screens = ONBOARDING_ORDER.map((name: keyof OnboardingScreens, i: number) => {\r\n    const hasNext = i < ONBOARDING_ORDER.length - 1;\r\n    const next = () => hasNext && store.dispatch(nextOnboardingSlide());\r\n    const previous = () => i > 0 && store.dispatch(previousOnboardingSlide());\r\n\r\n    const ComponentClass = ONBOARDING_SCREENS[name] as typeof React.Component;\r\n    function Wrapper(): JSX.Element {\r\n        return <ComponentClass next={next} previous={previous} index={i} hasNext={hasNext} />;\r\n    }\r\n\r\n    return <OnboardingStack.Screen key={i} name={name} component={Wrapper} options={{title: screenTitle(name)}} />;\r\n});\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingIndex: state.auth.onboardingIndex,\r\n}));\r\n\r\nfunction OnboardingNavigator({onboardingIndex}: {onboardingIndex: number}): JSX.Element {\r\n    return (\r\n        <>\r\n            <OnboardingStack.Navigator\r\n                initialRouteName={ONBOARDING_ORDER[onboardingIndex]}\r\n                tabBarOptions={{showLabel: false, showIcon: false}}\r\n                tabBar={() => <></>}\r\n                springConfig={{\r\n                    stiffness: 500,\r\n                    damping: 2000,\r\n                    mass: 5,\r\n                }}\r\n                swipeEnabled={false}\r\n                lazy={true}\r\n                lazyPreloadDistance={0}\r\n            >\r\n                {screens}\r\n            </OnboardingStack.Navigator>\r\n            <OnboardingProgressBar index={onboardingIndex} />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default reduxConnector(OnboardingNavigator);\r\n","import * as React from \"react\";\r\nimport {Dimensions, StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport i18n from \"i18n-js\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport Button from \"../../components/Button\";\r\nimport layout from \"../../constants/layout\";\r\nimport {DEBUG_MODE} from \"../../constants/config\";\r\nimport {LinearGradient} from \"expo-linear-gradient\";\r\n\r\nexport type OnboardingSuccessfulScreenProps = ThemeProps;\r\n\r\nclass OnboardingSuccessfulScreen extends React.Component<OnboardingSuccessfulScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const BackgroundSvg = getLocalSvg(\"large-wave-bg\", () => this.forceUpdate());\r\n        const ForegroundSvg = getLocalSvg(\"woman-holding-phone\", () => this.forceUpdate());\r\n\r\n        const height = Dimensions.get(\"window\").height;\r\n\r\n        return (\r\n            <ScreenWrapper forceFullWidth>\r\n                <View style={styles.root}>\r\n                    {layout.isWideDevice ? (\r\n                        <View style={styles.wideDeviceLeftPanel}>\r\n                            <LinearGradient\r\n                                style={styles.gradient}\r\n                                colors={[\"#32C5FF\", \"#B620E0\", \"#F7B500\"]}\r\n                                locations={[0.0, 0.6, 1.0]}\r\n                                start={{x: 1, y: 0}}\r\n                                end={{x: 0.3, y: 0.6}}\r\n                            />\r\n                            <View style={{position: \"absolute\", bottom: -150, left: -100, width: \"100%\"}}>\r\n                                <ForegroundSvg />\r\n                            </View>\r\n                        </View>\r\n                    ) : (\r\n                        <>\r\n                            <View\r\n                                style={{\r\n                                    position: \"absolute\",\r\n                                    width: \"100%\",\r\n                                    ...(height > 1000 ? {bottom: 0} : {top: 250}),\r\n                                }}\r\n                            >\r\n                                <BackgroundSvg width=\"100%\" />\r\n                            </View>\r\n                            <View\r\n                                style={{\r\n                                    position: \"absolute\",\r\n                                    width: \"100%\",\r\n                                    ...(height > 1000 ? {bottom: -200} : {top: 350}),\r\n                                    left: -100,\r\n                                }}\r\n                            >\r\n                                <ForegroundSvg />\r\n                            </View>\r\n                        </>\r\n                    )}\r\n                    <View style={styles.container}>\r\n                        <View>\r\n                            <Text style={styles.title}>{i18n.t(\"onboarding.success.title\")}</Text>\r\n                            <Text style={styles.subtitle}>{i18n.t(\"onboarding.success.subtitle\")}</Text>\r\n                            {layout.isWideDevice && (\r\n                                /* Hey, you have found an easter egg...plant */\r\n                                <Text style={styles.wideDeviceIcon}>{DEBUG_MODE ? \"🍆\" : \"🚀\"}</Text>\r\n                            )}\r\n                        </View>\r\n                        <Button\r\n                            text={i18n.t(\"onboarding.success.button\")}\r\n                            onPress={() => rootNavigate(\"MainScreen\")}\r\n                            skin=\"rounded-filled\"\r\n                            style={{opacity: 0.9}}\r\n                        />\r\n                    </View>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme, wideDevice: boolean) => {\r\n    return StyleSheet.create({\r\n        root: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n        },\r\n        wideDeviceLeftPanel: {\r\n            width: \"50%\",\r\n        },\r\n        gradient: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        },\r\n        container: {\r\n            width: wideDevice ? \"50%\" : \"100%\",\r\n            height: \"100%\",\r\n            paddingTop: wideDevice ? 150 : 100,\r\n            paddingBottom: 100,\r\n            paddingHorizontal: 60,\r\n            justifyContent: \"space-between\",\r\n            alignItems: wideDevice ? \"center\" : \"flex-start\",\r\n        },\r\n        title: {\r\n            fontSize: 36,\r\n            letterSpacing: 0.5,\r\n            lineHeight: 40,\r\n            color: theme.text,\r\n            fontWeight: \"600\",\r\n            maxWidth: wideDevice ? 9999 : 200,\r\n            textAlign: wideDevice ? \"center\" : \"left\",\r\n        },\r\n        subtitle: {\r\n            fontSize: 18,\r\n            marginTop: 20,\r\n            color: theme.text,\r\n            textAlign: wideDevice ? \"center\" : \"left\",\r\n        },\r\n        wideDeviceIcon: {\r\n            fontSize: 80,\r\n            textAlign: \"center\",\r\n            marginVertical: 100,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OnboardingSuccessfulScreen);\r\n","import * as React from \"react\";\r\nimport {StyleProp, StyleSheet, Text, TextInput, View, ViewStyle} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {VALIDATOR_PASSWORD_SIGNUP, VALIDATOR_PASSWORD_REPEAT} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {resetPassword} from \"../../state/auth/actions\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport FormError from \"./FormError\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\n\r\ntype FormState = {\r\n    password: string;\r\n    passwordRepeat: string;\r\n};\r\n\r\nconst initialState = (): FormState => ({\r\n    password: \"\",\r\n    passwordRepeat: \"\",\r\n});\r\n\r\n// Use Yup to create the validation schema\r\nconst ResetPasswordFormSchema = Yup.object().shape({\r\n    password: VALIDATOR_PASSWORD_SIGNUP,\r\n    passwordRepeat: VALIDATOR_PASSWORD_REPEAT,\r\n});\r\n\r\n// Component props\r\ntype ResetPasswordFormProps = {token?: string; containerStyle?: StyleProp<ViewStyle>} & FormProps<FormState> &\r\n    ThemeProps;\r\n\r\n// Component state\r\ntype ResetPasswordFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass ResetPasswordForm extends React.Component<ResetPasswordFormProps, ResetPasswordFormState> {\r\n    pwdRepeatRef = React.createRef<FormTextInput>();\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: ResetPasswordFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        const {token, onSuccessfulSubmit} = this.props;\r\n        this.setState({...this.state, submitting: true});\r\n\r\n        if (token) {\r\n            (store.dispatch as MyThunkDispatch)(resetPassword(token, values.password)).then(\r\n                ({success, errors}: ValidatedActionReturn) => {\r\n                    if (success && onSuccessfulSubmit) onSuccessfulSubmit(values);\r\n                    if (errors && errors.fields) {\r\n                        const f = errors.fields;\r\n                        Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                    }\r\n                    this.setState({remoteErrors: errors, submitting: false});\r\n                },\r\n            );\r\n        } else {\r\n            this.setState({remoteErrors: {general: \"error.reset_password_no_token\", fields: {}}, submitting: false});\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={containerStyle}>\r\n                <Text style={styles.title}>{i18n.t(\"resetPassword.title\")}</Text>\r\n                <Formik\r\n                    initialValues={initialState()}\r\n                    validationSchema={ResetPasswordFormSchema}\r\n                    validateOnChange={true}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 15)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdRepeatRef.current?.focus()}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                {/* TEMP This is a workaround for a bug on some iOS versions.\r\n                                    See https://github.com/facebook/react-native/issues/21572 */}\r\n                                <TextInput style={{width: 1, height: 1}} />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdRepeatRef}\r\n                                    field=\"passwordRepeat\"\r\n                                    placeholder={i18n.t(\"passwordRepeat\")}\r\n                                    error={errors.passwordRepeat}\r\n                                    value={values.passwordRepeat}\r\n                                    touched={touched.passwordRepeat}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"done\"\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <FormSubmitButton\r\n                                    onPress={() => handleSubmit()}\r\n                                    style={styles.button}\r\n                                    skin=\"rounded-filled\"\r\n                                    text={i18n.t(\"resetPassword.button\")}\r\n                                    submitting={submitting}\r\n                                />\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        title: {\r\n            width: \"100%\",\r\n            fontSize: 22,\r\n            color: theme.text,\r\n            marginBottom: 20,\r\n        },\r\n        button: {\r\n            marginTop: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ResetPasswordForm);\r\n","import * as React from \"react\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ResetPasswordForm from \"../components/forms/ResetPasswordForm\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ScrollFormWrapper from \"../components/forms/ScrollFormWrapper\";\r\n\r\ntype ResetPasswordScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\ntype ResetPasswordScreenState = {token?: string};\r\n\r\nclass ResetPasswordScreen extends React.Component<ResetPasswordScreenProps, ResetPasswordScreenState> {\r\n    constructor(props: ResetPasswordScreenProps) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Attempt to extract a token out of the route parameters\r\n        const params = this.props.route.params as {[key: string]: string};\r\n        if (params && params.token) this.setState({...this.state, token: params.token});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {token} = this.state;\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper>\r\n                    <ResetPasswordForm token={token} containerStyle={{width: \"80%\", maxWidth: 400}} />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(ResetPasswordScreen);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport i18n from \"i18n-js\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\ntype ForgotPasswordEmailSentScreenProps = ThemeProps;\r\n\r\nclass ForgotPasswordEmailSentScreen extends React.Component<ForgotPasswordEmailSentScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <FontAwesome name=\"envelope-o\" style={styles.mailIcon}></FontAwesome>\r\n                    <Text style={styles.description}>{i18n.t(\"resetPassword.instructions\")}</Text>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"75%\",\r\n        },\r\n        description: {\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        mailIcon: {\r\n            marginVertical: 30,\r\n            fontSize: 50,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ForgotPasswordEmailSentScreen);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport Button from \"../components/Button\";\r\n\r\ntype ResetPasswordSuccessScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass ResetPasswordSuccessScreen extends React.Component<ResetPasswordSuccessScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.successText}>{i18n.t(\"resetPassword.success\")}</Text>\r\n                    <Button\r\n                        text={i18n.t(\"login\")}\r\n                        icon={<MaterialCommunityIcons name=\"login\" style={styles.buttonIcon} />}\r\n                        onPress={() => {\r\n                            rootNavigate(\"LoginRoot\", {\r\n                                screen: \"LoginScreens\",\r\n                                params: {screen: \"SigninScreen\"},\r\n                            });\r\n                        }}\r\n                        skin=\"rounded-filled\"\r\n                        style={styles.button}\r\n                    />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"75%\",\r\n        },\r\n        successText: {\r\n            fontSize: 18,\r\n            lineHeight: 40,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        button: {\r\n            marginTop: 30,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 20,\r\n            color: theme.textWhite,\r\n            marginLeft: 4,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ResetPasswordSuccessScreen);\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Role, ROLES} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\n\r\nexport type RoleToggleProps = {\r\n    role: Role;\r\n    onSelect?: (role: Role) => void;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction RoleToggle(props: RoleToggleProps): JSX.Element {\r\n    const {role, onSelect, theme, ...otherProps} = props;\r\n    const styles = themedStyles(theme);\r\n    const styleProps = getToggleStyleProps(false, theme);\r\n\r\n    const buttonLabels = ROLES.map((r: string) => i18n.t(`allRoles.${r}`));\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) onSelect(ROLES[idx]);\r\n            }}\r\n            selectedIndex={ROLES.indexOf(role)}\r\n            buttons={buttonLabels}\r\n            containerStyle={styles.container}\r\n            {...styleProps}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            height: 35,\r\n            marginLeft: 0,\r\n            marginRight: 0,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(RoleToggle);\r\n","import {MaterialIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport {Platform, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ImageInfo} from \"expo-image-picker/build/ImagePicker.types\";\r\nimport {AVATAR_QUALITY} from \"../constants/config\";\r\n\r\n// Component props\r\nexport type AvatarEditButtonProps = ThemeProps & {\r\n    onPictureSelected?: (imageInfo: ImageInfo) => void;\r\n};\r\n\r\nclass AvatarEditButton extends React.Component<AvatarEditButtonProps> {\r\n    ensurePermission = async () => {\r\n        if (Platform.OS !== \"web\") {\r\n            let {status} = await Permissions.getAsync(Permissions.CAMERA_ROLL);\r\n            if (status !== \"granted\") {\r\n                status = await (await Permissions.askAsync(Permissions.CAMERA_ROLL)).status;\r\n                /*if (status !== \"granted\") {\r\n                    alert(\"Sorry, we need camera roll permissions to make this work!\");\r\n                }*/\r\n                return status === \"granted\";\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    showPicker = async () => {\r\n        const authorized = this.ensurePermission();\r\n\r\n        if (authorized) {\r\n            try {\r\n                const result = await ImagePicker.launchImageLibraryAsync({\r\n                    mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n                    allowsEditing: true,\r\n                    aspect: [1, 1],\r\n                    quality: AVATAR_QUALITY,\r\n                });\r\n                if (!result.cancelled) {\r\n                    const info: ImageInfo = result;\r\n                    if (this.props.onPictureSelected) this.props.onPictureSelected(info);\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Could not get image. Check console for error.\");\r\n                console.log(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <TouchableOpacity style={styles.button} onPress={() => this.showPicker()}>\r\n                <MaterialIcons style={styles.buttonIcon} name=\"edit\" />\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n            borderRadius: 20,\r\n            padding: 4,\r\n            backgroundColor: theme.cardBackground,\r\n\r\n            shadowColor: \"#000\",\r\n            shadowOffset: {width: 0, height: 1},\r\n            shadowOpacity: 0.2,\r\n            shadowRadius: 1.41,\r\n            elevation: 2,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(AvatarEditButton);\r\n","import * as React from \"react\";\r\nimport {Text, TouchableOpacity, TouchableOpacityProps, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {ArraySchema, Schema, ValidationError} from \"yup\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport CustomModal from \"../modals/CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\n// Component props\r\ntype ValueCardProps<T> = {\r\n    label: string;\r\n    icon?: JSX.Element;\r\n    display?: JSX.Element;\r\n    noModal?: boolean;\r\n    overrideModal?: (hide: () => void) => JSX.Element;\r\n    renderInput?: (value: T, error: string | null, onChange: (value: T, error?: string | null) => void) => JSX.Element;\r\n    validator?: Schema<unknown> | ArraySchema<unknown>;\r\n    initialValue?: T;\r\n    apply?: (value: T) => void;\r\n    locked?: boolean;\r\n    oneLine?: boolean;\r\n    onPress?: () => void;\r\n    onModalShown?: () => void;\r\n    blank?: boolean;\r\n} & TouchableOpacityProps;\r\n\r\n// Component state\r\ntype ValueCardState<T> = {\r\n    modalOpen: boolean;\r\n    error: string | null;\r\n    value: T | undefined;\r\n};\r\n\r\nclass ValueCard<T> extends React.Component<ValueCardProps<T>, ValueCardState<T>> {\r\n    constructor(props: ValueCardProps<T>) {\r\n        super(props);\r\n        this.state = {\r\n            modalOpen: false,\r\n            error: null,\r\n            value: props.initialValue,\r\n        };\r\n    }\r\n\r\n    setModal(modalOpen: boolean): void {\r\n        const {initialValue} = this.props;\r\n        // Reset to initial value when opening the modal\r\n        this.setState({...this.state, modalOpen, value: initialValue, error: null});\r\n    }\r\n\r\n    setError(error: string | null): void {\r\n        this.setState({...this.state, error});\r\n    }\r\n\r\n    onChange(value: T, error?: string | null): void {\r\n        if (error === undefined) error = this.state.error;\r\n        this.setState({...this.state, value, error}, () => this.validate());\r\n    }\r\n\r\n    validate(): boolean {\r\n        const {validator} = this.props;\r\n        if (!validator) return true;\r\n        try {\r\n            validator.validateSync(this.state.value);\r\n            this.setError(null);\r\n            return true;\r\n        } catch (err) {\r\n            this.setError((err as ValidationError).errors[0]);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    apply(): void {\r\n        if (this.validate()) {\r\n            if (this.props.apply && this.state.value) this.props.apply(this.state.value);\r\n            this.setModal(false);\r\n        }\r\n    }\r\n\r\n    renderModalContent = (theme: Theme): JSX.Element => {\r\n        const {label, renderInput, oneLine} = this.props;\r\n        const {value, error} = this.state;\r\n\r\n        const styles = themedStyles(oneLine)(theme);\r\n\r\n        return (\r\n            <>\r\n                <Text style={styles.modalLabel}>{label}</Text>\r\n                {renderInput && value ? (\r\n                    renderInput(value, error, (value: T, error?: string | null) => this.onChange(value, error))\r\n                ) : (\r\n                    <></>\r\n                )}\r\n                <Text style={styles.modalErrorText}>{/*touched && */ error ? i18n.t(error) : \"\"}</Text>\r\n                <View style={styles.modalButtonsContainer}>\r\n                    <Button\r\n                        onPress={() => this.apply()}\r\n                        style={styles.modalButton}\r\n                        text={i18n.t(\"apply\")}\r\n                        skin=\"rounded-filled\"\r\n                    />\r\n                    <Button\r\n                        onPress={() => this.setModal(false)}\r\n                        style={styles.modalButton}\r\n                        text={i18n.t(\"cancel\")}\r\n                        skin=\"rounded-hollow\"\r\n                    />\r\n                </View>\r\n            </>\r\n        );\r\n    };\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            label,\r\n            icon,\r\n            display,\r\n            overrideModal,\r\n            noModal,\r\n            style,\r\n            locked,\r\n            oneLine,\r\n            blank,\r\n            onPress,\r\n            onModalShown,\r\n            ...otherProps\r\n        } = this.props;\r\n        const {modalOpen} = this.state;\r\n\r\n        const onShow = () => {\r\n            if (onModalShown) onModalShown();\r\n        };\r\n\r\n        return (\r\n            // We have to use a ThemeConsumer here instead of the standard withTheme(...) pattern so our generic typing doesn't break.\r\n            <ThemeConsumer>\r\n                {({theme}: ThemeProps) => {\r\n                    const styles = themedStyles(oneLine)(theme);\r\n                    return (\r\n                        <>\r\n                            <TouchableOpacity\r\n                                style={[styles.cardWrapper, style]}\r\n                                activeOpacity={0.9}\r\n                                disabled={noModal && !onPress}\r\n                                onPress={() => {\r\n                                    if (!noModal) {\r\n                                        if (!locked) this.setModal(true);\r\n                                    } else if (onPress) onPress();\r\n                                }}\r\n                                {...otherProps}\r\n                            >\r\n                                <View style={styles.cardContent}>\r\n                                    <View style={styles.cardLabelContainer}>\r\n                                        {!blank && icon}\r\n                                        <Text style={styles.cardLabel}>{!blank && label}</Text>\r\n                                    </View>\r\n                                    <View>\r\n                                        {!blank && display !== undefined && display}\r\n                                        {!blank && display === undefined && this.props.children}\r\n                                    </View>\r\n                                </View>\r\n                                {!noModal && (\r\n                                    <View style={styles.rightIconContainer}>\r\n                                        <MaterialIcons\r\n                                            name={locked ? \"lock\" : \"keyboard-arrow-right\"}\r\n                                            size={locked ? 30 : 40}\r\n                                            style={styles.rightIcon}\r\n                                        />\r\n                                    </View>\r\n                                )}\r\n                            </TouchableOpacity>\r\n                            {!noModal && (\r\n                                <>\r\n                                    {overrideModal !== undefined &&\r\n                                        modalOpen &&\r\n                                        overrideModal(() => this.setModal(false))}\r\n                                    {overrideModal === undefined && modalOpen && (\r\n                                        <CustomModal\r\n                                            visible={modalOpen}\r\n                                            modalViewStyle={styles.modalContent}\r\n                                            animationType=\"slide\"\r\n                                            renderContent={() => this.renderModalContent(theme)}\r\n                                            onShow={onShow}\r\n                                            onHide={() => this.setModal(false)}\r\n                                        />\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </>\r\n                    );\r\n                }}\r\n            </ThemeConsumer>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = (oneLine?: boolean) =>\r\n    preTheme((theme: Theme) => {\r\n        return StyleSheet.create({\r\n            modalContent: {\r\n                alignItems: \"flex-start\",\r\n                paddingHorizontal: 20,\r\n            },\r\n            modalErrorText: {\r\n                fontSize: 12,\r\n                color: theme.error,\r\n            },\r\n            modalLabel: {\r\n                color: theme.textLight,\r\n                textTransform: \"uppercase\",\r\n                letterSpacing: 1.5,\r\n                fontSize: 13,\r\n                marginBottom: 12,\r\n            },\r\n            modalButtonsContainer: {\r\n                flexDirection: \"column\",\r\n                width: \"100%\",\r\n            },\r\n            modalButton: {\r\n                marginVertical: 0,\r\n                marginTop: 15,\r\n            },\r\n            cardWrapper: {\r\n                width: \"100%\",\r\n                flexDirection: \"row\",\r\n                backgroundColor: theme.cardBackground,\r\n                paddingHorizontal: 10,\r\n                justifyContent: \"space-evenly\",\r\n                paddingVertical: 15,\r\n                minHeight: oneLine ? 0 : 80,\r\n                borderRadius: 10,\r\n            },\r\n            cardContent: {\r\n                flex: 1,\r\n                flexDirection: oneLine ? \"row\" : \"column\",\r\n                ...(oneLine ? {alignItems: \"center\"} : {}),\r\n                justifyContent: \"space-between\",\r\n            },\r\n            cardLabelContainer: {\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n                marginBottom: oneLine ? 0 : 10,\r\n            },\r\n            cardLabel: {\r\n                color: theme.textLight,\r\n                textTransform: \"uppercase\",\r\n                letterSpacing: 1,\r\n                fontSize: 11,\r\n            },\r\n            rightIconContainer: {justifyContent: \"center\"},\r\n            rightIcon: {color: theme.textLight},\r\n        });\r\n    });\r\n\r\nexport default ValueCard;\r\n","import * as React from \"react\";\r\nimport {AvatarProps, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport ProfileAvatar from \"./ProfileAvatar\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\n// Component props\r\nexport type EnlargeableAvatarProps = {profile?: UserProfile} & AvatarProps & ThemeProps;\r\n\r\n// Component state\r\nexport type EnlargeableAvatarState = {\r\n    enlarged: boolean;\r\n};\r\n\r\nclass EnlargeableAvatar extends React.Component<EnlargeableAvatarProps, EnlargeableAvatarState> {\r\n    constructor(props: EnlargeableAvatarProps) {\r\n        super(props);\r\n        this.state = {enlarged: false};\r\n    }\r\n\r\n    showEnlarged() {\r\n        this.setState({...this.state, enlarged: true});\r\n    }\r\n\r\n    hideEnlarged() {\r\n        this.setState({...this.state, enlarged: false});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, children, profile, ...avatarProps} = this.props;\r\n        const {enlarged} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const onPress = () => {\r\n            if (avatarProps.onPress) avatarProps.onPress();\r\n            this.showEnlarged();\r\n        };\r\n\r\n        return (\r\n            <>\r\n                <ProfileAvatar\r\n                    profile={profile}\r\n                    {...avatarProps}\r\n                    {...(avatarProps.source || profile?.avatarUrl ? {onPress} : {})}\r\n                >\r\n                    {children}\r\n                </ProfileAvatar>\r\n                <CustomModal\r\n                    visible={enlarged}\r\n                    onHide={() => this.hideEnlarged()}\r\n                    fullWidth\r\n                    noBackground\r\n                    backdropOpacity={0.5}\r\n                    modalViewStyle={styles.modal}\r\n                    renderContent={() => (\r\n                        <ProfileAvatar\r\n                            profile={profile}\r\n                            source={avatarProps.source}\r\n                            containerStyle={styles.enlargedAvatarContainer}\r\n                            avatarStyle={styles.enlargedAvatar}\r\n                            activeOpacity={0.8}\r\n                            onPress={() => this.hideEnlarged()}\r\n                            rounded\r\n                        />\r\n                    )}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        modal: {\r\n            aspectRatio: 1,\r\n            paddingHorizontal: 20,\r\n            paddingVertical: 20,\r\n            maxWidth: 400,\r\n            maxHeight: 400,\r\n        },\r\n        enlargedAvatar: {\r\n            borderRadius: 300,\r\n        },\r\n        enlargedAvatarContainer: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(EnlargeableAvatar);\r\n","import React from \"react\";\r\nimport {StyleProp, View, ViewStyle} from \"react-native\";\r\nimport Wave from \"../Wave\";\r\n\r\nexport type WavyHeaderProps = {\r\n    style?: StyleProp<ViewStyle>;\r\n    color: string;\r\n    wavePatternIndex?: number | \"random\";\r\n    upsideDown?: boolean;\r\n};\r\n\r\ntype WavyHeaderState = {\r\n    headerWidth: number;\r\n    waveTop: number;\r\n};\r\n\r\nexport default class WavyHeader extends React.Component<WavyHeaderProps, WavyHeaderState> {\r\n    constructor(props: WavyHeaderProps) {\r\n        super(props);\r\n        this.state = {\r\n            headerWidth: 0,\r\n            waveTop: props.upsideDown ? 1 : -1,\r\n        };\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {style, color, upsideDown, children, wavePatternIndex} = this.props;\r\n        const {headerWidth, waveTop} = this.state;\r\n\r\n        return (\r\n            <>\r\n                <View\r\n                    style={[{backgroundColor: color, width: \"100%\", zIndex: 10}, style]}\r\n                    onLayout={(layout) => {\r\n                        const {y, height, width} = layout.nativeEvent.layout;\r\n                        this.setState({...this.state, headerWidth: width, waveTop: y + height});\r\n                    }}\r\n                >\r\n                    {children}\r\n                </View>\r\n                {waveTop !== -1 && (\r\n                    <Wave\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            top: waveTop + (upsideDown ? 1 : -1),\r\n                            width: headerWidth,\r\n                            zIndex: 10,\r\n                        }}\r\n                        color={color}\r\n                        patternIndex={wavePatternIndex || \"random\"}\r\n                        upsideDown={upsideDown}\r\n                    />\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, Text, View, ScrollView} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport EducationFieldPicker from \"../EducationFieldPicker\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport DegreeToggle from \"../DegreeToggle\";\r\nimport {CountryCode} from \"../../model/country-codes\";\r\nimport RoleToggle from \"../RoleToggle\";\r\nimport {Degree, Gender, StaffRole} from \"../../constants/profile-constants\";\r\nimport StaffRolePicker from \"../StaffRolePicker\";\r\nimport GenderToggle from \"../GenderToggle\";\r\nimport AvatarEditButton from \"../AvatarEditButton\";\r\nimport ValueCard from \"../cards/ValueCard\";\r\nimport {FormattedDate} from \"../FormattedDate\";\r\nimport NationalityPicker from \"../NationalityPicker\";\r\nimport FormattedNationality from \"../FormattedNationality\";\r\nimport FormattedUniversity from \"../FormattedUniversity\";\r\nimport InterestsPicker from \"../InterestsPicker\";\r\nimport {initOfferValue, OfferCategory, OfferDto, OfferValueDto, SpokenLanguageDto} from \"../../api/dto\";\r\nimport {UserProfile, UserProfileStaff, UserProfileStudent} from \"../../model/user-profile\";\r\nimport {User} from \"../../model/user\";\r\nimport {VALIDATOR_ONBOARDING_LANGUAGES} from \"../../validators\";\r\nimport SpokenLanguagesInput from \"../SpokenLanguagesInput\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ImageInfo} from \"expo-image-picker/build/ImagePicker.types\";\r\nimport store from \"../../state/store\";\r\nimport {AppState, MyThunkDispatch} from \"../../state/types\";\r\nimport {setAvatar} from \"../../state/profile/actions\";\r\nimport EnlargeableAvatar from \"../EnlargeableAvatar\";\r\nimport OfferControl from \"../OfferControl\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport Chips from \"../Chips\";\r\nimport WavyHeader from \"../headers/WavyHeader\";\r\nimport BirthDateInput, {BirthDateInputClass} from \"../BirthDateInput\";\r\n\r\n// Component props\r\nexport type EditProfileFormProps = ThemeProps & {\r\n    user: User | null;\r\n    onChange?: (fields: Partial<UserProfile>) => void;\r\n};\r\n\r\nfunction Spacer(): JSX.Element {\r\n    return <View style={{height: 25}}></View>;\r\n}\r\n\r\nclass EditProfileForm extends React.Component<EditProfileFormProps> {\r\n    birthDateInputRef = React.createRef<BirthDateInputClass>();\r\n\r\n    onFieldChanged(fields: Partial<UserProfile>): void {\r\n        if (this.props.onChange !== undefined) this.props.onChange(fields);\r\n    }\r\n\r\n    render() {\r\n        const {theme, user} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fullName = user && user.profile ? user.profile.firstName + \" \" + user.profile.lastName : \"\";\r\n\r\n        const profile = user?.profile;\r\n\r\n        return (\r\n            <ScrollView style={styles.rootScroll} contentContainerStyle={styles.scrollContent} overScrollMode=\"never\">\r\n                <WavyHeader style={styles.header} color={theme.accent}>\r\n                    <EnlargeableAvatar\r\n                        profile={user?.profile}\r\n                        size={140}\r\n                        rounded\r\n                        containerStyle={styles.avatarContainer}\r\n                        activeOpacity={0.8}\r\n                    >\r\n                        {user && (\r\n                            <AvatarEditButton\r\n                                onPictureSelected={(imageInfo: ImageInfo) => {\r\n                                    (store.dispatch as MyThunkDispatch)(setAvatar(imageInfo));\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </EnlargeableAvatar>\r\n                    <Text style={styles.name}>{fullName}</Text>\r\n                    {profile && (\r\n                        <FormattedUniversity\r\n                            containerStyle={styles.universityContainer}\r\n                            style={styles.university}\r\n                            university={profile.university}\r\n                        />\r\n                    )}\r\n                </WavyHeader>\r\n\r\n                <View style={styles.body}>\r\n                    <Text style={styles.title}>{i18n.t(\"myProfile\")}</Text>\r\n                    {!user && <ActivityIndicator size=\"large\" style={styles.loadingIndicator} color={theme.accent} />}\r\n\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"emailAddress\")}\r\n                        initialValue={user?.email}\r\n                        display={(user && <Text style={styles.cardText}>{user.email}</Text>) || undefined}\r\n                        locked={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"dateOfBirth\")}\r\n                        initialValue={profile?.birthdate}\r\n                        display={profile && <FormattedDate style={styles.cardText} date={profile.birthdate} />}\r\n                        renderInput={(value: Date, _error, onChange) => (\r\n                            <BirthDateInput\r\n                                ref={this.birthDateInputRef}\r\n                                date={value}\r\n                                containerStyle={styles.birthdateInputContainer}\r\n                                inputStyle={styles.birthdateInput}\r\n                                onChange={(birthdate?: Date, inputError?: string) => {\r\n                                    onChange(birthdate || value, inputError || null);\r\n                                }}\r\n                            />\r\n                        )}\r\n                        onModalShown={() => this.birthDateInputRef.current?.focus()}\r\n                        apply={(birthdate: Date) => this.onFieldChanged({birthdate})}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"nationality\")}\r\n                        initialValue={profile?.nationality}\r\n                        display={\r\n                            profile && (\r\n                                <FormattedNationality style={styles.cardText} countryCode={profile.nationality} />\r\n                            )\r\n                        }\r\n                        overrideModal={\r\n                            profile &&\r\n                            ((hide: () => void) => (\r\n                                <NationalityPicker\r\n                                    nationality={profile.nationality}\r\n                                    onSelect={(cc: CountryCode) => this.onFieldChanged({nationality: cc})}\r\n                                    onHide={hide}\r\n                                />\r\n                            ))\r\n                        }\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"gender\")}\r\n                        initialValue={profile?.gender}\r\n                        display={\r\n                            profile && (\r\n                                <GenderToggle\r\n                                    gender={profile.gender}\r\n                                    onSelect={(gender: Gender) => this.onFieldChanged({gender})}\r\n                                />\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"profileType\")}\r\n                        initialValue={profile?.type}\r\n                        display={\r\n                            profile && (\r\n                                <>\r\n                                    <RoleToggle role={profile.type} disabled={true} />\r\n                                    {profile.type == \"staff\" && (\r\n                                        <StaffRolePicker\r\n                                            staffRoles={(profile as UserProfileStaff).staffRoles}\r\n                                            onChange={(staffRoles: StaffRole[]) => this.onFieldChanged({staffRoles})}\r\n                                            multiple={true}\r\n                                            atLeastOne={true}\r\n                                            buttonStyle={styles.staffRoleButton}\r\n                                        />\r\n                                    )}\r\n                                    {profile.type == \"student\" && (\r\n                                        <DegreeToggle\r\n                                            degree={(profile as UserProfileStudent).degree}\r\n                                            onUpdate={(degree?: Degree) => this.onFieldChanged({degree})}\r\n                                        />\r\n                                    )}\r\n                                </>\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"fieldsOfEducation\")}\r\n                        initialValue={profile?.educationFields}\r\n                        display={\r\n                            <EducationFieldPicker\r\n                                fields={profile?.educationFields}\r\n                                onChange={(educationFields: string[]) => this.onFieldChanged({educationFields})}\r\n                                showChips={true}\r\n                            />\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"interests\")}\r\n                        initialValue={profile?.interests}\r\n                        display={\r\n                            profile && (\r\n                                <InterestsPicker\r\n                                    interests={profile.interests}\r\n                                    onChange={(interests: string[]) => this.onFieldChanged({interests})}\r\n                                    showChips={true}\r\n                                />\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!user}\r\n                        label={i18n.t(\"spokenLanguages\")}\r\n                        initialValue={profile?.languages}\r\n                        validator={VALIDATOR_ONBOARDING_LANGUAGES}\r\n                        display={\r\n                            profile && (\r\n                                <Chips\r\n                                    items={profile?.languages}\r\n                                    label={(item: SpokenLanguageDto) =>\r\n                                        `${i18n.t(`languageNames.${item.code}`)} (${i18n.t(\r\n                                            `languageLevels.${item.level}`,\r\n                                        )})`\r\n                                    }\r\n                                />\r\n                            )\r\n                        }\r\n                        renderInput={(\r\n                            value: SpokenLanguageDto[],\r\n                            error: string | null,\r\n                            onChange: (value: SpokenLanguageDto[]) => void,\r\n                        ) => (\r\n                            <SpokenLanguagesInput\r\n                                languages={value}\r\n                                onChange={(languages: SpokenLanguageDto[]) => onChange(languages)}\r\n                                style={{width: \"100%\"}}\r\n                            />\r\n                        )}\r\n                        apply={(languages: SpokenLanguageDto[]) => this.onFieldChanged({languages})}\r\n                    />\r\n                    <Spacer />\r\n                    <OfferCategoryRow\r\n                        category={OfferCategory.Discover}\r\n                        profileOffers={profile?.profileOffers}\r\n                        onApply={(profileOffers: OfferValueDto[]) => this.onFieldChanged({profileOffers})}\r\n                        theme={theme}\r\n                    />\r\n                    <Spacer />\r\n                    <OfferCategoryRow\r\n                        category={OfferCategory.Collaborate}\r\n                        profileOffers={profile?.profileOffers}\r\n                        onApply={(profileOffers: OfferValueDto[]) => this.onFieldChanged({profileOffers})}\r\n                        theme={theme}\r\n                    />\r\n                    <Spacer />\r\n                    <OfferCategoryRow\r\n                        category={OfferCategory.Meet}\r\n                        profileOffers={profile?.profileOffers}\r\n                        onApply={(profileOffers: OfferValueDto[]) => this.onFieldChanged({profileOffers})}\r\n                        theme={theme}\r\n                    />\r\n                </View>\r\n            </ScrollView>\r\n        );\r\n    }\r\n}\r\n\r\n// Map props from the store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    offers: state.profile.offers,\r\n    offerIdToCategory: state.profile.offerIdToCategory,\r\n}));\r\n\r\ntype OfferCategoryRowProps = {\r\n    category: OfferCategory;\r\n    profileOffers: OfferValueDto[] | undefined;\r\n    onApply: (offerValues: OfferValueDto[]) => void;\r\n    theme: Theme;\r\n} & ConnectedProps<typeof reduxConnector>;\r\n\r\nconst OfferCategoryRow = reduxConnector(\r\n    ({category, profileOffers, onApply, offers, offerIdToCategory, theme}: OfferCategoryRowProps): JSX.Element => {\r\n        const items = profileOffers?.filter((o) => offerIdToCategory.get(o.offerId) == category) || [];\r\n        return (\r\n            <ValueCard\r\n                blank={!profileOffers}\r\n                label={i18n.t(`offerCategories.${category}`)}\r\n                initialValue={profileOffers}\r\n                display={\r\n                    items.length > 0 ? (\r\n                        <Chips\r\n                            items={items}\r\n                            label={(item: OfferValueDto) => i18n.t(`allOffers.${item.offerId}.name`)}\r\n                        />\r\n                    ) : (\r\n                        <Text style={{color: theme.textLight}}>{i18n.t(\"profile.noOffersSelected\")}</Text>\r\n                    )\r\n                }\r\n                renderInput={(value: OfferValueDto[], error, onChange) => (\r\n                    <>\r\n                        {offers\r\n                            .filter((o) => o.category == category)\r\n                            .map((offer: OfferDto) => (\r\n                                <OfferControl\r\n                                    key={`profile-${offer.id}`}\r\n                                    offer={offer}\r\n                                    value={value.find((o) => o.offerId == offer.id) || initOfferValue(offer)}\r\n                                    onChange={(offerVal: OfferValueDto) => {\r\n                                        const updatedVal = value\r\n                                            .filter((o) => o.offerId != offer.id)\r\n                                            .concat([offerVal]);\r\n                                        onChange(updatedVal);\r\n                                    }}\r\n                                    style={{marginVertical: 10, width: \"100%\"}}\r\n                                />\r\n                            ))}\r\n                    </>\r\n                )}\r\n                apply={(profileOffers: OfferValueDto[]) => onApply(profileOffers)}\r\n            />\r\n        );\r\n    },\r\n);\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        rootScroll: {\r\n            width: \"100%\",\r\n        },\r\n        scrollContent: {\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n        },\r\n\r\n        // Header-related styles\r\n        header: {\r\n            alignItems: \"center\",\r\n            paddingBottom: 10,\r\n        },\r\n        name: {\r\n            fontSize: 28,\r\n            color: theme.textWhite,\r\n            marginTop: 10,\r\n        },\r\n        university: {\r\n            fontSize: 14,\r\n            color: theme.textWhite,\r\n        },\r\n        universityContainer: {\r\n            marginVertical: 5,\r\n        },\r\n        avatarContainer: {\r\n            backgroundColor: theme.accentSecondary,\r\n            borderColor: theme.cardBackground,\r\n            borderWidth: 2,\r\n        },\r\n        avatarAccessory: {\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: 20,\r\n            borderWidth: 0,\r\n            borderColor: \"transparent\",\r\n            shadowRadius: 0,\r\n            textShadowRadius: 0,\r\n            color: \"#444\",\r\n        },\r\n\r\n        // Content-related style\r\n        body: {\r\n            width: \"90%\",\r\n            maxWidth: 600,\r\n            paddingTop: 90,\r\n            paddingBottom: 50,\r\n        },\r\n        loadingIndicator: {\r\n            position: \"absolute\",\r\n            top: 70,\r\n            left: 0,\r\n            right: 0,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n            marginBottom: 20,\r\n            width: \"100%\",\r\n        },\r\n\r\n        cardText: {\r\n            color: theme.text,\r\n        },\r\n        staffRoleButton: {\r\n            marginTop: 10,\r\n        },\r\n        birthdateInputContainer: {\r\n            marginTop: 20,\r\n            marginBottom: 50,\r\n        },\r\n        birthdateInput: {\r\n            height: 50,\r\n            fontSize: 16,\r\n            borderRadius: 10,\r\n            backgroundColor: theme.cardBackground,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(EditProfileForm);\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport EditProfileForm from \"../components/forms/EditProfileForm\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {fetchUser, setProfileFields} from \"../state/profile/actions\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    user: state.profile.user,\r\n}));\r\n\r\ntype MyProfileScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<RootNavigatorScreens, \"MyProfileScreen\">;\r\n\r\nclass MyProfileScreen extends React.Component<MyProfileScreenProps> {\r\n    componentDidMount() {\r\n        this.props.navigation.addListener(\"focus\", () => this.onFocus());\r\n        this.onFocus();\r\n    }\r\n\r\n    onFocus() {\r\n        (this.props.dispatch as MyThunkDispatch)(fetchUser());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {user, dispatch} = this.props;\r\n\r\n        return (\r\n            <ScreenWrapper forceFullWidth>\r\n                <EditProfileForm\r\n                    user={user}\r\n                    onChange={(fields) => (dispatch as MyThunkDispatch)(setProfileFields(fields))}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(MyProfileScreen));\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextProps, TextStyle, View, ViewStyle} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Gender} from \"../constants/profile-constants\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\n\r\n// Component props\r\nexport type FormattedGenderProps = {\r\n    gender: Gender;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    iconStyle?: StyleProp<TextStyle>;\r\n} & TextProps &\r\n    ThemeProps;\r\n\r\nclass FormattedGender extends React.Component<FormattedGenderProps> {\r\n    render(): JSX.Element {\r\n        const {gender, containerStyle, iconStyle, theme, ...otherProps} = this.props;\r\n\r\n        const icon = gender === \"female\" ? \"female\" : gender === \"male\" ? \"male\" : undefined;\r\n        return (\r\n            <View style={[{flexDirection: \"row\", alignItems: \"center\"}, containerStyle]}>\r\n                {icon && <FontAwesome name={icon} size={24} color={theme.textLight} style={iconStyle} />}\r\n                <Text {...otherProps} style={[{marginLeft: icon ? 10 : 0}, otherProps.style]}>\r\n                    {i18n.t(`genders.${gender}`)}\r\n                </Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(FormattedGender);\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, StyleSheet, Text, View} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ScrollView} from \"react-native\";\r\nimport {FormattedDate} from \"./FormattedDate\";\r\nimport FormattedNationality from \"./FormattedNationality\";\r\nimport FormattedUniversity from \"./FormattedUniversity\";\r\nimport {UserProfile, UserProfileStaff, UserProfileStudent} from \"../model/user-profile\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {StaffRole} from \"../constants/profile-constants\";\r\nimport ValueCard from \"./cards/ValueCard\";\r\nimport EnlargeableAvatar from \"./EnlargeableAvatar\";\r\nimport {OfferCategory, OfferValueDto, SpokenLanguageDto} from \"../api/dto\";\r\nimport FormattedGender from \"./FormattedGender\";\r\nimport Chips from \"./Chips\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport WavyHeader from \"./headers/WavyHeader\";\r\n\r\n// Component props\r\nexport type ProfileViewProps = ThemeProps & {\r\n    profile: UserProfile | null;\r\n    actionBar?: JSX.Element;\r\n};\r\n\r\nfunction Spacer(): JSX.Element {\r\n    return <View style={{height: 25}}></View>;\r\n}\r\n\r\nclass ProfileView extends React.Component<ProfileViewProps> {\r\n    render() {\r\n        const {theme, profile, actionBar} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fullName = profile ? profile.firstName + \" \" + profile.lastName : \"\";\r\n\r\n        return (\r\n            <ScrollView style={styles.rootScroll} contentContainerStyle={styles.scrollContent} overScrollMode=\"never\">\r\n                <WavyHeader style={styles.header} color={theme.accent}>\r\n                    <EnlargeableAvatar\r\n                        profile={profile || undefined}\r\n                        size={120}\r\n                        rounded\r\n                        containerStyle={styles.avatarContainer}\r\n                        activeOpacity={0.8}\r\n                    />\r\n                    {!profile && (\r\n                        <ActivityIndicator size=\"large\" color={theme.textWhite} style={styles.loadingIndicator} />\r\n                    )}\r\n                    <Text style={styles.name}>{fullName}</Text>\r\n                    <FormattedUniversity\r\n                        containerStyle={styles.universityContainer}\r\n                        style={styles.university}\r\n                        university={profile?.university || null}\r\n                    />\r\n                    {actionBar}\r\n                </WavyHeader>\r\n\r\n                <View style={styles.body}>\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"dateOfBirth\")}\r\n                        display={profile ? <FormattedDate style={styles.cardText} date={profile.birthdate} /> : <></>}\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"nationality\")}\r\n                        display={\r\n                            profile ? (\r\n                                <FormattedNationality style={styles.cardText} countryCode={profile.nationality} />\r\n                            ) : (\r\n                                <></>\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"gender\")}\r\n                        display={profile ? <FormattedGender style={styles.cardText} gender={profile.gender} /> : <></>}\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"profileType\")}\r\n                        display={\r\n                            profile ? (\r\n                                <>\r\n                                    <Text style={styles.cardText}>{i18n.t(`allRoles.${profile.type}`)}</Text>\r\n                                    {profile.type == \"staff\" && (\r\n                                        <>\r\n                                            {(profile as UserProfileStaff).staffRoles.map((sr: StaffRole) => (\r\n                                                <Text key={`profile-staff-role-${sr}`}>\r\n                                                    {i18n.t(`staffRoles.${sr}`)}\r\n                                                </Text>\r\n                                            ))}\r\n                                        </>\r\n                                    )}\r\n                                    {profile.type == \"student\" && (\r\n                                        <Text style={styles.cardText}>\r\n                                            {i18n.t(`degrees.${(profile as UserProfileStudent).degree}`)}\r\n                                        </Text>\r\n                                    )}\r\n                                </>\r\n                            ) : (\r\n                                <></>\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"fieldsOfEducation\")}\r\n                        display={\r\n                            profile ? (\r\n                                <Chips\r\n                                    items={profile.educationFields}\r\n                                    label={(item: string) => i18n.t(`educationFields.${item}`)}\r\n                                />\r\n                            ) : (\r\n                                <></>\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"interests\")}\r\n                        display={\r\n                            profile ? (\r\n                                <Chips\r\n                                    items={profile.interests}\r\n                                    label={(item: string) => i18n.t(`interestNames.${item}`)}\r\n                                />\r\n                            ) : (\r\n                                <></>\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <ValueCard\r\n                        blank={!profile}\r\n                        label={i18n.t(\"spokenLanguages\")}\r\n                        display={\r\n                            profile ? (\r\n                                <Chips\r\n                                    items={profile.languages}\r\n                                    label={(item: SpokenLanguageDto) =>\r\n                                        `${i18n.t(`languageNames.${item.code}`)} (${i18n.t(\r\n                                            `languageLevels.${item.level}`,\r\n                                        )})`\r\n                                    }\r\n                                />\r\n                            ) : (\r\n                                <></>\r\n                            )\r\n                        }\r\n                        noModal={true}\r\n                    />\r\n                    <Spacer />\r\n                    <OfferCategoryRow\r\n                        category={OfferCategory.Discover}\r\n                        profileOffers={profile?.profileOffers || null}\r\n                    />\r\n                    <Spacer />\r\n                    <OfferCategoryRow\r\n                        category={OfferCategory.Collaborate}\r\n                        profileOffers={profile?.profileOffers || null}\r\n                    />\r\n                    <Spacer />\r\n                    <OfferCategoryRow category={OfferCategory.Meet} profileOffers={profile?.profileOffers || null} />\r\n                </View>\r\n            </ScrollView>\r\n        );\r\n    }\r\n}\r\n\r\n// Map props from the store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    offerIdToCategory: state.profile.offerIdToCategory,\r\n}));\r\n\r\ntype OfferCategoryRowProps = {\r\n    category: OfferCategory;\r\n    profileOffers: OfferValueDto[] | null;\r\n} & ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps;\r\n\r\nconst OfferCategoryRow = reduxConnector(\r\n    withTheme(\r\n        ({category, profileOffers, offerIdToCategory, theme}: OfferCategoryRowProps): JSX.Element => {\r\n            const items = profileOffers?.filter((o) => offerIdToCategory.get(o.offerId) == category) || [];\r\n            const styles = themedStyles(theme);\r\n\r\n            return (\r\n                <ValueCard\r\n                    blank={!profileOffers}\r\n                    label={i18n.t(`offerCategories.${category}`)}\r\n                    display={\r\n                        items.length > 0 ? (\r\n                            <Chips\r\n                                items={items}\r\n                                label={(item: OfferValueDto) => i18n.t(`allOffers.${item.offerId}.name`)}\r\n                            />\r\n                        ) : (\r\n                            <Text style={styles.cardText}>{i18n.t(\"profile.noOffersSelected\")}</Text>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n            );\r\n        },\r\n    ),\r\n);\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        rootScroll: {\r\n            width: \"100%\",\r\n        },\r\n        scrollContent: {\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n        },\r\n\r\n        header: {\r\n            alignItems: \"center\",\r\n        },\r\n        // Content-related style\r\n        body: {\r\n            width: \"90%\",\r\n            maxWidth: 600,\r\n            paddingTop: 90,\r\n            paddingBottom: 50,\r\n        },\r\n        loadingIndicator: {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            right: 0,\r\n            top: 140,\r\n        },\r\n        name: {\r\n            fontSize: 24,\r\n            color: theme.textWhite,\r\n            marginTop: 10,\r\n            height: 30,\r\n        },\r\n        university: {\r\n            fontSize: 14,\r\n            color: theme.textWhite,\r\n        },\r\n        universityContainer: {\r\n            height: 25,\r\n            marginTop: 5,\r\n        },\r\n        avatarContainer: {\r\n            borderColor: theme.textWhite,\r\n            borderWidth: 1,\r\n            backgroundColor: theme.accentSecondary,\r\n        },\r\n        cardText: {\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ProfileView);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport {blockProfile, cancelMatchAction} from \"../../state/matching/actions\";\r\nimport store from \"../../state/store\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\nexport type UnmatchProfileModalProps = ThemeProps &\r\n    Partial<CustomModalProps> & {\r\n        onSubmit?: (block: boolean) => void;\r\n        profile: UserProfile | null;\r\n        matchId: string | null;\r\n    };\r\n\r\ntype UnmatchProfileModalState = {block: boolean};\r\n\r\nclass UnmatchProfileModal extends React.Component<UnmatchProfileModalProps, UnmatchProfileModalState> {\r\n    constructor(props: UnmatchProfileModalProps) {\r\n        super(props);\r\n        this.state = {block: false};\r\n    }\r\n\r\n    render() {\r\n        const {theme, profile, matchId, onSubmit, ...otherProps} = this.props;\r\n        const {block} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                renderContent={(hide: () => void) =>\r\n                    profile ? (\r\n                        <>\r\n                            <Text style={styles.text}>\r\n                                {i18n.t(\"unmatch.text\", {firstname: profile.firstName, lastname: profile.lastName})}\r\n                            </Text>\r\n                            <Text style={styles.text}>\r\n                                {i18n.t(\"unmatch.blockQuestion\", {\r\n                                    firstname: profile.firstName,\r\n                                    lastname: profile.lastName,\r\n                                })}\r\n                            </Text>\r\n                            <TouchableOpacity\r\n                                style={styles.blockTouchable}\r\n                                onPress={() => this.setState({...this.state, block: !block})}\r\n                            >\r\n                                <CheckBox\r\n                                    containerStyle={styles.checkboxContainer}\r\n                                    checked={block}\r\n                                    onPress={() => this.setState({...this.state, block: !block})}\r\n                                />\r\n                                <Text style={styles.text}>{i18n.t(\"block.action\")}</Text>\r\n                            </TouchableOpacity>\r\n                            <View style={styles.actionButtonsWrapper}>\r\n                                <Button\r\n                                    text={i18n.t(\"cancel\")}\r\n                                    onPress={() => hide()}\r\n                                    skin=\"rounded-hollow\"\r\n                                    style={styles.actionButton}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"unmatch.action\")}\r\n                                    onPress={() => {\r\n                                        hide();\r\n                                        if (matchId)\r\n                                            (store.dispatch as MyThunkDispatch)(cancelMatchAction(matchId, true));\r\n                                        if (block) (store.dispatch as MyThunkDispatch)(blockProfile(profile.id));\r\n                                        if (onSubmit) onSubmit(block);\r\n                                    }}\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.actionButton, styles.redBackground]}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                            </View>\r\n                        </>\r\n                    ) : (\r\n                        <></>\r\n                    )\r\n                }\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n        blockTouchable: {\r\n            width: \"100%\",\r\n            marginTop: 5,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        checkboxContainer: {\r\n            padding: 0,\r\n            marginLeft: 0,\r\n            marginRight: 5,\r\n        },\r\n\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 7,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(UnmatchProfileModal);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View, TouchableOpacity} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {styleTextLight} from \"../styles/general\";\r\nimport BlockProfileModal from \"./modals/BlockProfileModal\";\r\nimport QuickFormReport from \"./forms/QuickFormReport\";\r\nimport {ReportEntityType} from \"../constants/reports\";\r\nimport UnmatchProfileModal from \"./modals/UnmatchProfileModal\";\r\nimport i18n from \"i18n-js\";\r\nimport {navigateBack, openChat} from \"../navigation/utils\";\r\n\r\nexport type ProfileActionBarProps = {\r\n    profile: UserProfile | null;\r\n    isMatched: boolean;\r\n    roomId: string | null;\r\n    matchId: string | null;\r\n} & ThemeProps;\r\n\r\nfunction ProfileActionBar(props: ProfileActionBarProps): JSX.Element {\r\n    const {profile, isMatched, roomId, matchId, theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    let buttons;\r\n\r\n    const buttonBlock = (\r\n        <BlockProfileModal\r\n            profile={profile}\r\n            activator={(open) => (\r\n                <ActionButton blank={!profile} text={i18n.t(\"profile.action.block\")} icon=\"block\" onPress={open} />\r\n            )}\r\n        />\r\n    );\r\n\r\n    const buttonReport = (\r\n        <QuickFormReport\r\n            entity={profile}\r\n            entityType={ReportEntityType.PROFILE_ENTITY}\r\n            activator={(open) => (\r\n                <ActionButton blank={!profile} text={i18n.t(\"profile.action.report\")} icon=\"report\" onPress={open} />\r\n            )}\r\n        />\r\n    );\r\n\r\n    if (isMatched) {\r\n        const buttonChat = (\r\n            <ActionButton\r\n                blank={!profile}\r\n                text={i18n.t(\"profile.action.chat\")}\r\n                icon=\"chat\"\r\n                onPress={() => roomId && openChat(roomId)}\r\n            />\r\n        );\r\n\r\n        // TODO implement chat mute\r\n        /*const buttonMute = (\r\n            <ActionButton blank={!profile} text={i18n.t(\"profile.action.mute\")} icon=\"notifications-off\" />\r\n        );*/\r\n        const buttonMute = <></>;\r\n\r\n        const buttonUnmatch = (\r\n            <UnmatchProfileModal\r\n                profile={profile}\r\n                matchId={matchId}\r\n                onSubmit={(block: boolean) => {\r\n                    if (block) navigateBack();\r\n                }}\r\n                activator={(open) => (\r\n                    <ActionButton\r\n                        blank={!profile}\r\n                        text={i18n.t(\"profile.action.unmatch\")}\r\n                        icon=\"close\"\r\n                        onPress={open}\r\n                    />\r\n                )}\r\n            />\r\n        );\r\n\r\n        buttons = (\r\n            <>\r\n                {buttonChat}\r\n                {buttonMute}\r\n                {buttonUnmatch}\r\n                {buttonReport}\r\n            </>\r\n        );\r\n    } else {\r\n        buttons = (\r\n            <>\r\n                {buttonBlock}\r\n                {buttonReport}\r\n            </>\r\n        );\r\n    }\r\n\r\n    return <View style={styles.container}>{buttons}</View>;\r\n}\r\n\r\ntype ActionButtonProps = ThemeProps & {\r\n    text: string;\r\n    icon?: string;\r\n    onPress?: () => void;\r\n    blank?: boolean;\r\n};\r\n\r\nconst ActionButton = withTheme(\r\n    ({text, icon, onPress, blank, theme}: ActionButtonProps): JSX.Element => {\r\n        const styles = themedStyles(theme);\r\n        return (\r\n            <TouchableOpacity style={styles.button} activeOpacity={0.75} onPress={blank ? undefined : onPress}>\r\n                {icon && (\r\n                    <View style={[styles.buttonTop, blank ? styles.buttonTopBlank : {}]}>\r\n                        {!blank && <MaterialIcons name={icon} style={styles.buttonTopIcon} />}\r\n                    </View>\r\n                )}\r\n                <Text style={styles.buttonText}>{text}</Text>\r\n            </TouchableOpacity>\r\n        );\r\n    },\r\n);\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n            marginVertical: 15,\r\n        },\r\n        button: {\r\n            width: 75,\r\n            marginHorizontal: 10,\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        buttonText: {\r\n            fontSize: 12,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 0.5,\r\n            color: theme.textWhite,\r\n            textAlign: \"center\",\r\n            ...styleTextLight,\r\n        },\r\n        buttonTop: {\r\n            fontSize: 24,\r\n            width: 36,\r\n            height: 36,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            borderRadius: 60,\r\n            marginBottom: 5,\r\n            backgroundColor: \"#fff4\",\r\n        },\r\n        buttonTopBlank: {\r\n            opacity: 0.4,\r\n            backgroundColor: \"transparent\",\r\n            borderColor: theme.textWhite,\r\n            borderWidth: 1,\r\n        },\r\n        buttonTopIcon: {\r\n            fontSize: 24,\r\n            color: theme.textInverted,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ProfileActionBar);\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ProfileView from \"../components/ProfileView\";\r\nimport {UserProfile, UserProfileWithMatchInfo} from \"../model/user-profile\";\r\nimport {fetchProfile} from \"../state/profile/actions\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ProfileActionBar from \"../components/ProfileActionBar\";\r\n\r\nconst reduxConnector = connect(() => ({}));\r\n\r\n// Component props\r\ntype ProfileScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\n// Component state\r\ntype ProfileScreenState = {\r\n    profile: UserProfile | null;\r\n    isMatched: boolean;\r\n    roomId: string | null;\r\n    matchId: string | null;\r\n};\r\n\r\nclass ProfileScreen extends React.Component<ProfileScreenProps, ProfileScreenState> {\r\n    constructor(props: ProfileScreenProps) {\r\n        super(props);\r\n        this.state = {profile: null, isMatched: false, roomId: null, matchId: null};\r\n    }\r\n\r\n    getRouteParams(): {[key: string]: string | boolean | number} {\r\n        const params = this.props.route.params;\r\n        return params ? (params as {[key: string]: string | boolean | number}) : {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {dispatch, navigation} = this.props;\r\n\r\n        navigation.addListener(\"focus\", () => {\r\n            const {id} = this.getRouteParams();\r\n            if (id && (!this.state.profile || this.state.profile.id !== id)) {\r\n                (dispatch as MyThunkDispatch)(fetchProfile(id as string)).then(\r\n                    (profileWithMatchInfo: UserProfileWithMatchInfo | null) => {\r\n                        if (profileWithMatchInfo) {\r\n                            const {profile, isMatched, roomId, matchingId} = profileWithMatchInfo;\r\n                            this.setState({...this.state, profile, isMatched, roomId, matchId: matchingId});\r\n                        } else {\r\n                            this.setState({\r\n                                ...this.state,\r\n                                profile: null,\r\n                                isMatched: false,\r\n                                roomId: null,\r\n                                matchId: null,\r\n                            });\r\n                        }\r\n                    },\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {profile, isMatched, roomId, matchId} = this.state;\r\n\r\n        return (\r\n            <ScreenWrapper forceFullWidth>\r\n                <ProfileView\r\n                    profile={profile}\r\n                    actionBar={\r\n                        <ProfileActionBar profile={profile} isMatched={isMatched} roomId={roomId} matchId={matchId} />\r\n                    }\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(ProfileScreen));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {StyleProp, StyleSheet, TextStyle, ViewStyle} from \"react-native\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport PopUpSelector from \"./PopUpSelector\";\r\nimport {SupportedLocale, SUPPORTED_LOCALES} from \"../localization\";\r\nimport {PickerButtonStyleVariant} from \"../styles/picker\";\r\n\r\n// Component props\r\nexport type LocalePickerProps = {\r\n    locale?: SupportedLocale;\r\n    onChange?: (locale: SupportedLocale) => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    valueStyle?: StyleProp<TextStyle>;\r\n    buttonStyleVariant?: PickerButtonStyleVariant;\r\n} & ThemeProps;\r\n\r\nclass LocalePicker extends React.Component<LocalePickerProps> {\r\n    render(): JSX.Element {\r\n        const {onChange, locale, theme, buttonStyle, valueStyle, buttonStyleVariant} = this.props;\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <PopUpSelector\r\n                values={SUPPORTED_LOCALES}\r\n                label={(l: string) => i18n.t(`locales.${l}`)}\r\n                selected={locale ? [locale] : []}\r\n                valueStyle={valueStyle}\r\n                buttonStyle={buttonStyle}\r\n                buttonStyleVariant={buttonStyleVariant}\r\n                onSelect={(values: string[]) => {\r\n                    if (values.length > 0 && onChange) onChange(values[0] as SupportedLocale);\r\n                }}\r\n                noOkUnderline\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({});\r\n});\r\n\r\nexport default withTheme(LocalePicker);\r\n","import {SupportedLocale} from \"../localization\";\r\nimport {ThemeKey} from \"../types\";\r\n\r\nexport type CookiesPreferences = {\r\n    auth: boolean;\r\n    cache: boolean;\r\n    settings: boolean;\r\n};\r\n\r\nexport const COOKIES_PREFERENCES_KEYS = [\"auth\", \"cache\", \"settings\"];\r\n\r\nexport type UserSettings = {\r\n    theme: ThemeKey;\r\n    locale: SupportedLocale;\r\n    cookies: CookiesPreferences;\r\n    cookieConsentDate: Date | null;\r\n};\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {AppState} from \"../../state/types\";\r\nimport store from \"../../state/store\";\r\nimport {CookiesPreferences, COOKIES_PREFERENCES_KEYS} from \"../../model/user-settings\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {saveCookiesPreferences} from \"../../state/settings/actions\";\r\nimport Button from \"../Button\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    cookies: state.settings.userSettings.cookies,\r\n}));\r\n\r\n// Component props\r\nexport type CustomizeCookiesModalProps = ThemeProps & Partial<CustomModalProps> & ConnectedProps<typeof reduxConnector>;\r\n\r\n// Component state\r\nexport type CustomizeCookiesModalState = {cookies: CookiesPreferences};\r\n\r\nclass CustomizeCookiesModal extends React.Component<CustomizeCookiesModalProps, CustomizeCookiesModalState> {\r\n    constructor(props: CustomizeCookiesModalProps) {\r\n        super(props);\r\n        this.state = {cookies: props.cookies};\r\n    }\r\n\r\n    private onShow(): void {\r\n        const storeCookies = this.props.cookies as {[key: string]: boolean};\r\n        const localCookies = this.state.cookies as {[key: string]: boolean};\r\n\r\n        // Update component cookies state with the state from the store if it is different\r\n        const changed = Object.keys(storeCookies).some((key: string) => storeCookies[key] != localCookies[key]);\r\n        if (changed) this.setState({...this.state, cookies: this.props.cookies});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, ...otherProps} = this.props;\r\n        const {cookies} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const cookieDict = this.state.cookies as {[key: string]: boolean};\r\n\r\n        const toggleCookie = (key: string) =>\r\n            this.setState({...this.state, cookies: {...cookies, [key]: !cookieDict[key]}});\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                modalViewStyle={[{paddingHorizontal: 20, alignItems: \"flex-start\"}, otherProps.modalViewStyle]}\r\n                onShow={() => {\r\n                    this.onShow();\r\n                    if (otherProps.onShow) otherProps.onShow();\r\n                }}\r\n                renderContent={(hide: () => void) => (\r\n                    <>\r\n                        <Text style={styles.title}>{i18n.t(\"cookies.title\")}</Text>\r\n                        <Text style={styles.text}>{i18n.t(\"cookies.preferences.text\")}</Text>\r\n                        {COOKIES_PREFERENCES_KEYS.map((k) => (\r\n                            <View style={styles.preferenceRow} key={`cookie-preference-${k}`}>\r\n                                <TouchableOpacity style={styles.preferenceRowButton} onPress={() => toggleCookie(k)}>\r\n                                    <CheckBox\r\n                                        checked={cookieDict[k]}\r\n                                        containerStyle={styles.checkBoxContainer}\r\n                                        onPress={() => toggleCookie(k)}\r\n                                    />\r\n                                    <Text style={styles.preferenceName}>{i18n.t(`cookies.preferences.${k}.name`)}</Text>\r\n                                </TouchableOpacity>\r\n                                <Text style={styles.preferenceDescription}>\r\n                                    {i18n.t(`cookies.preferences.${k}.description`)}\r\n                                </Text>\r\n                            </View>\r\n                        ))}\r\n                        <View style={styles.actions}>\r\n                            <Button\r\n                                text={i18n.t(\"save\")}\r\n                                onPress={() => {\r\n                                    hide();\r\n                                    store.dispatch(saveCookiesPreferences(cookies));\r\n                                }}\r\n                                skin=\"rounded-filled\"\r\n                                textStyle={styles.buttonText}\r\n                                style={styles.button}\r\n                            />\r\n                            <Button\r\n                                text={i18n.t(\"cancel\")}\r\n                                onPress={() => {\r\n                                    hide();\r\n                                    this.setState({...this.state, cookies: this.props.cookies});\r\n                                }}\r\n                                skin=\"rounded-hollow\"\r\n                                textStyle={styles.buttonText}\r\n                                style={styles.button}\r\n                            />\r\n                        </View>\r\n                    </>\r\n                )}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        title: {\r\n            fontSize: 20,\r\n            textAlign: \"left\",\r\n            marginBottom: 10,\r\n            color: theme.text,\r\n        },\r\n        text: {\r\n            fontSize: 14,\r\n            lineHeight: 18,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n\r\n        preferenceRow: {\r\n            marginTop: 10,\r\n        },\r\n        preferenceRowButton: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        checkBoxContainer: {\r\n            marginLeft: 0,\r\n            marginRight: 5,\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            paddingVertical: 0,\r\n        },\r\n        preferenceName: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n        preferenceDescription: {\r\n            fontSize: 14,\r\n            color: theme.textLight,\r\n        },\r\n\r\n        actions: {\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n            width: \"100%\",\r\n            maxWidth: 350,\r\n        },\r\n        button: {\r\n            flex: 1,\r\n            height: 40,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        buttonText: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(CustomizeCookiesModal));\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {Alert, Dimensions, Platform, ScrollView, StyleSheet, Switch, Text, View} from \"react-native\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ValueCard from \"../components/cards/ValueCard\";\r\nimport i18n from \"i18n-js\";\r\nimport {FontAwesome, MaterialCommunityIcons, MaterialIcons} from \"@expo/vector-icons\";\r\nimport {AppState} from \"../state/types\";\r\nimport {setLocale, setTheme} from \"../state/settings/actions\";\r\nimport LocalePicker from \"../components/LocalePicker\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport {APP_VERSION, BUG_REPORT_EMAIL_ADDRESS, TERMS_AND_CONDITIONS_URL} from \"../constants/config\";\r\nimport LocalImage from \"../components/LocalImage\";\r\nimport {logout} from \"../state/auth/actions\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport CustomizeCookiesModal from \"../components/modals/CustomizeCookiesModal\";\r\nimport Button from \"../components/Button\";\r\nimport * as Linking from \"expo-linking\";\r\nimport store from \"../state/store\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    settings: state.settings.userSettings,\r\n}));\r\n\r\n// Component props\r\ntype SettingsScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nlet versionClickCount = 0;\r\n\r\nclass SettingsScreen extends React.Component<SettingsScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme, settings, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollView style={styles.scroll} contentContainerStyle={styles.container}>\r\n                    <Section theme={theme} title={i18n.t(\"settings.sections.general\")}>\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.language\")}\r\n                            icon={<FontAwesome name=\"language\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            display={\r\n                                <LocalePicker\r\n                                    locale={settings.locale}\r\n                                    onChange={(l: SupportedLocale) => dispatch(setLocale(l))}\r\n                                    buttonStyle={styles.localeButton}\r\n                                    valueStyle={styles.localButtonValue}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.darkTheme\")}\r\n                            icon={<MaterialCommunityIcons name=\"theme-light-dark\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            onPress={() => dispatch(setTheme(settings.theme === \"dark\" ? \"light\" : \"dark\"))}\r\n                            display={\r\n                                <Switch\r\n                                    value={settings.theme === \"dark\"}\r\n                                    onValueChange={() =>\r\n                                        dispatch(setTheme(settings.theme === \"dark\" ? \"light\" : \"dark\"))\r\n                                    }\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.logOut\")}\r\n                            icon={<MaterialCommunityIcons name=\"logout\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            display={\r\n                                <Button\r\n                                    text={i18n.t(\"settings.logOut\")}\r\n                                    onPress={() => dispatch(logout())}\r\n                                    skin=\"rounded-filled\"\r\n                                    textStyle={styles.cardButtonText}\r\n                                    style={[styles.oneLineCardButton, styles.redBackground]}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.customizeCookies\")}\r\n                            icon={<MaterialCommunityIcons name=\"cookie\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            overrideModal={(hide) => <CustomizeCookiesModal visible={true} onHide={hide} />}\r\n                        />\r\n                    </Section>\r\n                    <Section\r\n                        theme={theme}\r\n                        title={i18n.t(\"settings.sections.about\")}\r\n                        icon={{name: \"info\", color: theme.accent}}\r\n                    >\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.version\")}\r\n                            oneLine={true}\r\n                            onPress={() => {\r\n                                // Easter-egg trigger\r\n                                versionClickCount++;\r\n                                if (versionClickCount === 7) {\r\n                                    versionClickCount = 0;\r\n                                    Alert.alert(\"Insert easter egg here\");\r\n                                }\r\n                                setTimeout(() => (versionClickCount = Math.max(0, versionClickCount - 1)), 3000);\r\n                            }}\r\n                            display={<Text style={styles.infoText}>{APP_VERSION}</Text>}\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.termsOfService\")}\r\n                            oneLine={true}\r\n                            onPress={() => Linking.openURL(TERMS_AND_CONDITIONS_URL)}\r\n                            display={<Text style={styles.infoText}>{\"\"}</Text>}\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.reportABug\")}\r\n                            icon={<MaterialIcons name=\"bug-report\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            onPress={() => {\r\n                                const {width, height} = Dimensions.get(\"window\");\r\n                                const fromEmail = store.getState().profile.user?.email;\r\n                                let text = \"\";\r\n                                text += `Platform: ${Platform.OS} (${Platform.Version})\\n`;\r\n                                text += `Dimensions: ${Math.round(width)} x ${Math.round(height)}\\n`;\r\n                                text += `App version: ${APP_VERSION}\\n`;\r\n                                text += `User: ${fromEmail}\\n`;\r\n                                text += `_______________________\\n\\n`;\r\n                                text += `${i18n.t(\"bugReport.mailTitle\")}\\n\\n`;\r\n\r\n                                const subject = i18n.t(\"bugReport.mailSubject\");\r\n                                Linking.openURL(`mailto:${BUG_REPORT_EMAIL_ADDRESS}?subject=${subject}&body=${text}`);\r\n                            }}\r\n                            display={<Text style={styles.infoText}>{\"\"}</Text>}\r\n                            noModal={true}\r\n                        />\r\n                    </Section>\r\n                    <Section\r\n                        theme={theme}\r\n                        title={i18n.t(\"settings.sections.danger\")}\r\n                        icon={{name: \"warning\", color: theme.warn}}\r\n                    >\r\n                        <ValueCard\r\n                            style={[styles.card, {height: 100}]}\r\n                            label={i18n.t(\"settings.deleteAccount\")}\r\n                            display={\r\n                                <Button\r\n                                    text={i18n.t(\"settings.deleteMyAccount\")}\r\n                                    onPress={() => rootNavigate(\"DeleteAccountScreen\")}\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.cardButton, styles.redBackground]}\r\n                                    textStyle={styles.cardButtonText}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                    </Section>\r\n                    <View style={styles.logosContainer}>\r\n                        <LocalImage\r\n                            imageKey=\"logos.sea-eu-around.small\"\r\n                            resizeMode=\"contain\"\r\n                            style={[styles.logo, styles.logoSeaEuAround]}\r\n                        />\r\n                        <LocalImage\r\n                            imageKey=\"logos.erasmusLeft\"\r\n                            resizeMode=\"contain\"\r\n                            style={[styles.logo, styles.logoErasmus]}\r\n                        />\r\n                    </View>\r\n                </ScrollView>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\ntype SectionProps = {\r\n    theme: Theme;\r\n    title: string;\r\n    icon?: {name: string; color: string};\r\n};\r\n\r\nclass Section extends React.Component<SectionProps> {\r\n    render(): JSX.Element {\r\n        const {title, icon, theme, children} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={styles.section}>\r\n                <View style={styles.sectionTitleContainer}>\r\n                    {icon && <MaterialIcons name={icon.name} color={icon.color} style={styles.sectionIcon} />}\r\n                    <Text style={styles.sectionTitle}>{title}</Text>\r\n                </View>\r\n                {children}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        scroll: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n        },\r\n        container: {\r\n            width: \"100%\",\r\n            maxWidth: 700,\r\n            alignSelf: \"center\",\r\n            paddingTop: 10,\r\n            paddingBottom: 50,\r\n            paddingHorizontal: 20,\r\n        },\r\n        section: {\r\n            paddingVertical: 10,\r\n            justifyContent: \"flex-start\",\r\n        },\r\n        sectionTitleContainer: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            marginBottom: 10,\r\n        },\r\n        sectionTitle: {\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            fontSize: 11,\r\n            color: theme.textLight,\r\n        },\r\n        sectionIcon: {\r\n            fontSize: 16,\r\n            marginRight: 5,\r\n        },\r\n        card: {\r\n            marginVertical: 6,\r\n            height: 60,\r\n        },\r\n        cardIcon: {\r\n            marginRight: 6,\r\n            padding: 0,\r\n            fontSize: 18,\r\n            color: theme.textLight,\r\n        },\r\n        localeButton: {\r\n            height: 30,\r\n        },\r\n        localButtonValue: {\r\n            fontSize: 14,\r\n            marginHorizontal: 10,\r\n        },\r\n        cardButton: {\r\n            height: 42,\r\n            marginVertical: 0,\r\n        },\r\n        oneLineCardButton: {\r\n            width: 140,\r\n            height: 40,\r\n            marginVertical: 0,\r\n        },\r\n        cardButtonText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n\r\n        infoText: {\r\n            color: theme.text,\r\n            fontSize: 16,\r\n        },\r\n        logosContainer: {},\r\n        logo: {\r\n            marginTop: 30,\r\n            width: \"100%\",\r\n        },\r\n        logoErasmus: {height: 40},\r\n        logoSeaEuAround: {height: 60},\r\n        /*logoJA: {height: 40},\r\n        developedBy: {\r\n            textTransform: \"uppercase\",\r\n            textAlign: \"center\",\r\n            letterSpacing: 1,\r\n            fontSize: 11,\r\n            color: theme.textLight,\r\n            marginTop: 40,\r\n        },*/\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(SettingsScreen));\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport Button from \"../components/Button\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\n\r\ntype DeleteAccountSuccessScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass DeleteAccountSuccessScreen extends React.Component<DeleteAccountSuccessScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.successText}>{i18n.t(\"deleteAccount.success1\")}</Text>\r\n                    <Text style={styles.successText}>{i18n.t(\"deleteAccount.success2\")}</Text>\r\n                    <Button\r\n                        text={i18n.t(\"deleteAccount.leave\")}\r\n                        icon={<MaterialCommunityIcons name=\"logout\" style={styles.buttonIcon} />}\r\n                        onPress={() => rootNavigate(\"LoginRoot\", {screen: \"WelcomeScreen\"})}\r\n                        skin=\"rounded-filled\"\r\n                        style={styles.button}\r\n                    />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"75%\",\r\n        },\r\n        successText: {\r\n            fontSize: 18,\r\n            lineHeight: 25,\r\n            marginTop: 20,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        button: {\r\n            marginTop: 30,\r\n            backgroundColor: theme.error,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 20,\r\n            color: theme.textWhite,\r\n            marginLeft: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(DeleteAccountSuccessScreen);\r\n","import * as React from \"react\";\r\nimport {StyleProp, StyleSheet, Text, View, ViewStyle} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {VALIDATOR_PASSWORD_LOGIN} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport FormError from \"./FormError\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {deleteAccount} from \"../../state/auth/actions\";\r\n\r\ntype FormState = {password: string};\r\n\r\nconst initialState = (): FormState => ({password: \"\"});\r\n\r\n// Use Yup to create the validation schema\r\nconst DeleteAccountFormSchema = Yup.object().shape({\r\n    password: VALIDATOR_PASSWORD_LOGIN,\r\n});\r\n\r\n// Component props\r\ntype DeleteAccountFormProps = FormProps<FormState> & ThemeProps & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\n// Component state\r\ntype DeleteAccountFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass DeleteAccountForm extends React.Component<DeleteAccountFormProps, DeleteAccountFormState> {\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: DeleteAccountFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        const {onSuccessfulSubmit} = this.props;\r\n        this.setState({...this.state, submitting: true});\r\n        (store.dispatch as MyThunkDispatch)(deleteAccount(values.password)).then(\r\n            ({success, errors}: ValidatedActionReturn) => {\r\n                if (success && onSuccessfulSubmit) onSuccessfulSubmit(values);\r\n                if (errors && errors.fields) {\r\n                    const f = errors.fields;\r\n                    Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                }\r\n                this.setState({remoteErrors: errors, submitting: false});\r\n            },\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={containerStyle}>\r\n                <View style={styles.titleWrapper}>\r\n                    <Text style={styles.title}>{i18n.t(\"deleteAccount.title\")}</Text>\r\n                    <MaterialIcons name=\"warning\" style={styles.warningIcon} />\r\n                    <Text style={styles.warning}>{i18n.t(\"deleteAccount.warning\")}</Text>\r\n                </View>\r\n                <Formik\r\n                    initialValues={initialState()}\r\n                    validationSchema={DeleteAccountFormSchema}\r\n                    validateOnChange={true}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 15)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    label={i18n.t(\"deleteAccount.inputLabel\")}\r\n                                    isPassword={true}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <FormSubmitButton\r\n                                    onPress={() => handleSubmit()}\r\n                                    style={styles.button}\r\n                                    skin=\"rounded-filled\"\r\n                                    text={i18n.t(\"deleteAccount.button\")}\r\n                                    submitting={submitting}\r\n                                />\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        titleWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"flex-start\",\r\n            marginBottom: 20,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n        warning: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            textAlign: \"justify\",\r\n        },\r\n        warningIcon: {\r\n            color: theme.warn,\r\n            fontSize: 32,\r\n            marginTop: 20,\r\n        },\r\n        button: {\r\n            backgroundColor: theme.error,\r\n            marginTop: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(DeleteAccountForm);\r\n","import * as React from \"react\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport DeleteAccountForm from \"../components/forms/DeleteAccountForm\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ScrollFormWrapper from \"../components/forms/ScrollFormWrapper\";\r\n\r\ntype DeleteAccountScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass DeleteAccountScreen extends React.Component<DeleteAccountScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper>\r\n                    <DeleteAccountForm containerStyle={{width: \"80%\", maxWidth: 400}} />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(DeleteAccountScreen);\r\n","/* eslint-disable react/display-name */\r\nimport {NavigationContainer, DefaultTheme, DarkTheme, NavigationState} from \"@react-navigation/native\";\r\nimport {createStackNavigator, StackHeaderProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\r\nimport ValidateEmailScreen from \"../screens/ValidateEmailScreen\";\r\nimport ValidationEmailSentScreen from \"../screens/ValidationEmailSentScreen\";\r\nimport {NavigatorRoute, RootNavigatorScreens} from \"../navigation/types\";\r\nimport LinkingConfiguration from \"./linking-config\";\r\nimport LoginNavigator from \"./LoginNavigator\";\r\nimport MainNavigator from \"./MainNavigator\";\r\nimport OnboardingNavigator from \"./OnboardingNavigator\";\r\nimport {rootNavigationRef, screenTitle, unauthorizedRedirect} from \"./utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport OnboardingSuccessfulScreen from \"../screens/onboarding/OnboardingSuccessfulScreen\";\r\nimport ResetPasswordScreen from \"../screens/ResetPasswordScreen\";\r\nimport ForgotPasswordEmailSentScreen from \"../screens/ForgotPasswordEmailSentScreen\";\r\nimport ResetPasswordSuccessScreen from \"../screens/ResetPasswordSuccessScreen\";\r\nimport MyProfileScreen from \"../screens/MyProfileScreen\";\r\nimport ProfileScreen from \"../screens/ProfileScreen\";\r\nimport {AUTHENTICATED_ROUTES} from \"../constants/route-settings\";\r\nimport store from \"../state/store\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\nimport SettingsScreen from \"../screens/SettingsScreen\";\r\nimport DeleteAccountSuccessScreen from \"../screens/DeleteAccountSuccessScreen\";\r\nimport DeleteAccountScreen from \"../screens/DeleteAccountScreen\";\r\nimport {handleRouteChangeForChat} from \"./MessagingNavigator\";\r\nimport {DEBUG_MODE} from \"../constants/config\";\r\nimport {BackHandler} from \"react-native\";\r\n\r\ntype RootNavigationProps = React.PropsWithRef<ThemeProps & {initialRoute?: keyof RootNavigatorScreens}> & {\r\n    onReady?: () => void;\r\n};\r\n\r\n// The root stack navigator\r\nconst Stack = createStackNavigator<RootNavigatorScreens>();\r\n\r\nlet consumedInitialRoute = false;\r\nlet previousRoute: NavigatorRoute | undefined = undefined;\r\nlet prePreviousRoute: NavigatorRoute | undefined = undefined;\r\nlet savedNavigationState: NavigationState | undefined = undefined;\r\n\r\n// Handle route changes\r\nfunction onStateChange(state: NavigationState | undefined) {\r\n    if (state) savedNavigationState = state;\r\n    const route = rootNavigationRef.current?.getCurrentRoute()?.name as NavigatorRoute | undefined;\r\n    if (route) {\r\n        // Handle redirecting when not authenticated\r\n        if (!DEBUG_MODE) {\r\n            if (!store.getState().auth.authenticated && AUTHENTICATED_ROUTES.includes(route)) unauthorizedRedirect();\r\n        }\r\n\r\n        handleRouteChangeForChat(route, previousRoute);\r\n\r\n        prePreviousRoute = previousRoute;\r\n        previousRoute = route;\r\n    }\r\n}\r\n\r\nfunction Navigation({theme, initialRoute, onReady}: RootNavigationProps): JSX.Element {\r\n    // Ensure we do not go back to the initial route when the navigation container updates (e.g. on theme change)\r\n    //const initialRouteName = consumedInitialRoute ? (previousRoute as keyof RootNavigatorScreens) : initialRoute;\r\n    const initialRouteName = \"OnboardingSuccessfulScreen\";\r\n    consumedInitialRoute = true;\r\n\r\n    const reactNavigationTheme = {\r\n        dark: theme.id === \"dark\",\r\n        colors: {\r\n            ...(theme.id === \"dark\" ? DarkTheme : DefaultTheme).colors,\r\n            background: theme.background,\r\n        },\r\n    };\r\n\r\n    return (\r\n        <NavigationContainer\r\n            ref={rootNavigationRef}\r\n            initialState={savedNavigationState}\r\n            linking={LinkingConfiguration}\r\n            theme={reactNavigationTheme}\r\n            onReady={() => {\r\n                onStateChange(undefined);\r\n                // Prevent going back to a screen where the user shouldn't go\r\n                BackHandler.addEventListener(\"hardwareBackPress\", () => {\r\n                    if (prePreviousRoute) {\r\n                        const toAuthRoute = AUTHENTICATED_ROUTES.indexOf(prePreviousRoute) !== -1;\r\n                        const authenticated = store.getState().auth.authenticated;\r\n                        if (toAuthRoute && !authenticated) return true;\r\n                        if (!toAuthRoute && authenticated) return true;\r\n                    }\r\n                    return false;\r\n                });\r\n                if (onReady) onReady();\r\n            }}\r\n            onStateChange={onStateChange}\r\n        >\r\n            <Stack.Navigator screenOptions={{headerShown: false}} initialRouteName={initialRouteName}>\r\n                <Stack.Screen name=\"LoginRoot\" component={LoginNavigator} />\r\n                <Stack.Screen\r\n                    name=\"ForgotPasswordEmailSentScreen\"\r\n                    component={ForgotPasswordEmailSentScreen}\r\n                    options={{title: screenTitle(\"ForgotPasswordEmailSentScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ValidationEmailSentScreen\"\r\n                    component={ValidationEmailSentScreen}\r\n                    options={{title: screenTitle(\"ValidationEmailSentScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ValidateEmailScreen\"\r\n                    component={ValidateEmailScreen}\r\n                    options={{title: screenTitle(\"ValidateEmailScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ResetPasswordScreen\"\r\n                    component={ResetPasswordScreen}\r\n                    options={{title: screenTitle(\"ResetPasswordScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ResetPasswordSuccessScreen\"\r\n                    component={ResetPasswordSuccessScreen}\r\n                    options={{title: screenTitle(\"ResetPasswordSuccessScreen\")}}\r\n                />\r\n                <Stack.Screen name=\"MainScreen\" component={MainNavigator} />\r\n                <Stack.Screen\r\n                    name=\"MyProfileScreen\"\r\n                    component={MyProfileScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"MyProfileScreen\"),\r\n                        header: (props: StackHeaderProps) => (\r\n                            <MainHeader\r\n                                {...props}\r\n                                backButton={true}\r\n                                noAvatar={true}\r\n                                noShadow={true}\r\n                                buttonBackgroundColor={theme.accent}\r\n                                wrapperStyle={{backgroundColor: theme.accent}}\r\n                                color={theme.textWhite}\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ProfileScreen\"\r\n                    component={ProfileScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"ProfileScreen\"),\r\n                        header: (props: StackHeaderProps) => (\r\n                            <MainHeader\r\n                                {...props}\r\n                                backButton={true}\r\n                                noShadow={true}\r\n                                buttonBackgroundColor={theme.accent}\r\n                                wrapperStyle={{backgroundColor: theme.accent}}\r\n                                color={theme.textWhite}\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"SettingsScreen\"\r\n                    component={SettingsScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"SettingsScreen\"),\r\n                        header: (props: StackHeaderProps) => (\r\n                            <MainHeader {...props} backButton={true} noSettingsButton={true} />\r\n                        ),\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"DeleteAccountScreen\"\r\n                    component={DeleteAccountScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"DeleteAccountScreen\"),\r\n                        header: (props: StackHeaderProps) => <MainHeader {...props} backButton={true} />,\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"DeleteAccountSuccessScreen\"\r\n                    component={DeleteAccountSuccessScreen}\r\n                    options={{title: screenTitle(\"DeleteAccountSuccessScreen\")}}\r\n                />\r\n                <Stack.Screen name=\"OnboardingScreen\" component={OnboardingNavigator} />\r\n                <Stack.Screen\r\n                    name=\"OnboardingSuccessfulScreen\"\r\n                    component={OnboardingSuccessfulScreen}\r\n                    options={{title: screenTitle(\"OnboardingSuccessfulScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"NotFoundScreen\"\r\n                    component={NotFoundScreen}\r\n                    options={{title: screenTitle(\"NotFoundScreen\")}}\r\n                />\r\n            </Stack.Navigator>\r\n        </NavigationContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(Navigation);\r\n","import React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport themes from \"../../constants/themes\";\r\nimport {ThemeProvider} from \"react-native-elements\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    currentTheme: state.settings.userSettings.theme,\r\n}));\r\n\r\nexport type ConnectedThemeProviderProps = React.PropsWithChildren<ConnectedProps<typeof reduxConnector>>;\r\n\r\n/**\r\n * This provider receives the current theme from the store and passes it down to all\r\n * children (direct or indirect) that are exported using withTheme(<component>).\r\n */\r\nclass ConnectedThemeProvider extends React.Component<ConnectedThemeProviderProps> {\r\n    render(): JSX.Element {\r\n        const {children, currentTheme} = this.props;\r\n        return (\r\n            <ThemeProvider key={currentTheme} theme={themes[currentTheme]}>\r\n                {children}\r\n            </ThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(ConnectedThemeProvider);\r\n","import {StatusBar} from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {STATUS_BAR_THEME_OVERRIDES} from \"../constants/route-settings\";\r\nimport {NavigatorRoute} from \"../navigation/types\";\r\nimport {rootNavigationRef} from \"../navigation/utils\";\r\nimport {ThemeKey, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type ThemedStatusBarProps = ThemeProps;\r\n\r\nclass ThemedStatusBar extends React.Component<ThemedStatusBarProps> {\r\n    previousThemeOverride: ThemeKey | undefined;\r\n\r\n    getThemeOverride(): ThemeKey | undefined {\r\n        const routeName = rootNavigationRef.current?.getCurrentRoute()?.name as NavigatorRoute;\r\n        return STATUS_BAR_THEME_OVERRIDES[routeName];\r\n    }\r\n\r\n    componentDidMount() {\r\n        const nav = rootNavigationRef.current;\r\n\r\n        if (nav) {\r\n            // Ensure we update the status bar theme when needed\r\n            nav.addListener(\"state\", () => {\r\n                const override = this.getThemeOverride();\r\n                if (override !== this.previousThemeOverride) this.forceUpdate();\r\n                this.previousThemeOverride = override;\r\n            });\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const defaultStyle: ThemeKey = theme.id == \"dark\" ? \"light\" : \"dark\";\r\n\r\n        return <StatusBar style={this.getThemeOverride() || defaultStyle} />;\r\n    }\r\n}\r\n\r\nexport default withTheme(ThemedStatusBar);\r\n","import React from \"react\";\r\nimport {Text, StyleSheet, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {acceptAllCookies} from \"../state/settings/actions\";\r\nimport store from \"../state/store\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\nimport i18n from \"i18n-js\";\r\nimport CustomizeCookiesModal from \"./modals/CustomizeCookiesModal\";\r\nimport {hasUserGivenCookieConsent} from \"../state/static-storage-middleware\";\r\nimport Button from \"./Button\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    cookies: state.settings.userSettings.cookies,\r\n    consentDate: state.settings.userSettings.cookieConsentDate,\r\n}));\r\n\r\n// Component props\r\nexport type CookieBannerProps = ThemeProps & ConnectedProps<typeof reduxConnector>;\r\n\r\n// Component state\r\nexport type CookieBannerState = {showCustomize: boolean};\r\n\r\nclass CookieBanner extends React.Component<CookieBannerProps, CookieBannerState> {\r\n    constructor(props: CookieBannerProps) {\r\n        super(props);\r\n        this.state = {showCustomize: false};\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, consentDate} = this.props;\r\n        const {showCustomize} = this.state;\r\n\r\n        const styles = themedStyles(theme);\r\n\r\n        if (hasUserGivenCookieConsent(consentDate)) return <></>;\r\n\r\n        return (\r\n            <>\r\n                <CustomModal\r\n                    visible={!showCustomize}\r\n                    animationType=\"slide\"\r\n                    fullWidth\r\n                    bottom\r\n                    nonDismissable\r\n                    modalViewStyle={styles.modalView}\r\n                    renderContent={() => (\r\n                        <>\r\n                            <Text style={styles.cookieText}>{i18n.t(\"cookies.bannerText\")}</Text>\r\n                            <View style={styles.actions}>\r\n                                <Button\r\n                                    text={i18n.t(\"cookies.acceptAll\")}\r\n                                    onPress={() => (store.dispatch as MyThunkDispatch)(acceptAllCookies())}\r\n                                    style={styles.action}\r\n                                    textStyle={styles.actionText}\r\n                                    skin=\"rounded-filled\"\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"cookies.customize\")}\r\n                                    onPress={() => this.setState({...this.state, showCustomize: true})}\r\n                                    style={styles.action}\r\n                                    textStyle={styles.actionText}\r\n                                    skin=\"rounded-hollow\"\r\n                                />\r\n                            </View>\r\n                        </>\r\n                    )}\r\n                />\r\n                <CustomizeCookiesModal\r\n                    visible={showCustomize}\r\n                    onHide={() => this.setState({...this.state, showCustomize: false})}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        modalView: {\r\n            paddingHorizontal: 20,\r\n            paddingVertical: 20,\r\n            justifyContent: \"center\",\r\n        },\r\n        cookieText: {\r\n            fontSize: 14,\r\n            lineHeight: 20,\r\n            color: theme.text,\r\n            textAlign: \"justify\",\r\n        },\r\n        actions: {\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n            width: \"100%\",\r\n            maxWidth: 350,\r\n        },\r\n        action: {\r\n            flex: 1,\r\n            height: 40,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(CookieBanner));\r\n","import {registerRootComponent} from \"expo\";\r\nimport React, {useState} from \"react\";\r\nimport useCachedResources from \"./hooks/useCachedResources\";\r\nimport Navigation from \"./navigation\";\r\nimport {Provider} from \"react-redux\";\r\nimport configureLocalization from \"./localization\";\r\nimport {SafeAreaProvider} from \"react-native-safe-area-context\";\r\nimport ConnectedThemeProvider from \"./components/providers/ConnectedThemeProvider\";\r\nimport store from \"./state/store\";\r\nimport ThemedStatusBar from \"./components/ThemedStatusBar\";\r\nimport {configureNotifications} from \"./notifications\";\r\nimport {initPolyfills} from \"./polyfills\";\r\nimport CookieBanner from \"./components/CookieBanner\";\r\n\r\nfunction App() {\r\n    initPolyfills();\r\n    const {isLoadingComplete, initialRoute} = useCachedResources();\r\n    configureLocalization();\r\n    configureNotifications();\r\n\r\n    const [navigationReady, setNavigationReady] = useState<boolean>(false);\r\n\r\n    if (!isLoadingComplete) {\r\n        return null;\r\n    } else {\r\n        return (\r\n            <SafeAreaProvider>\r\n                <Provider store={store}>\r\n                    <ConnectedThemeProvider>\r\n                        <Navigation onReady={() => setNavigationReady(true)} initialRoute={initialRoute} />\r\n                        {navigationReady && <ThemedStatusBar />}\r\n                        <CookieBanner />\r\n                    </ConnectedThemeProvider>\r\n                </Provider>\r\n            </SafeAreaProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default registerRootComponent(App);\r\n","import * as Notifications from \"expo-notifications\";\r\nimport {Platform} from \"react-native\";\r\nimport {openChat} from \"./navigation/utils\";\r\nimport {ResponseChatMessageDto} from \"./api/dto\";\r\nimport {receiveChatMessage} from \"./state/messaging/actions\";\r\nimport {areNotificationsSupported, getNotificationData} from \"./notifications-utils\";\r\nimport store from \"./state/store\";\r\n\r\nexport function configureNotifications(): void {\r\n    if (!areNotificationsSupported()) return;\r\n\r\n    Notifications.setNotificationHandler({\r\n        handleNotification: async () => ({\r\n            shouldShowAlert: true,\r\n            shouldPlaySound: true,\r\n            shouldSetBadge: false,\r\n        }),\r\n    });\r\n\r\n    Notifications.addNotificationReceivedListener((notification) => {\r\n        const data = getNotificationData(notification);\r\n\r\n        console.log(\"Notification received:\");\r\n        console.log(data);\r\n\r\n        if (data.roomId && data.text) {\r\n            // TODO notifications to receiveChatMessage\r\n            //const message = data as ResponseChatMessageDto;\r\n            //store.dispatch(receiveChatMessage(message));\r\n        }\r\n    });\r\n\r\n    Notifications.addNotificationResponseReceivedListener((response) => {\r\n        console.log(\"Notification response received:\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const data = response.notification ? getNotificationData(response.notification) : (response as any).body;\r\n\r\n        Notifications.getPresentedNotificationsAsync().then((notifs: Notifications.Notification[]) => {\r\n            if (data.roomId) {\r\n                // Dismiss all notifications of the same room\r\n                notifs\r\n                    .filter((n) => getNotificationData(n).roomId === data.roomId)\r\n                    .map((n) => n.request.identifier)\r\n                    .forEach(Notifications.dismissNotificationAsync);\r\n            }\r\n        });\r\n\r\n        if (data.roomId) openChat(data.roomId as string);\r\n    });\r\n\r\n    if (Platform.OS === \"android\") {\r\n        Notifications.setNotificationChannelAsync(\"default\", {\r\n            name: \"default\",\r\n            importance: Notifications.AndroidImportance.MAX,\r\n            vibrationPattern: [0, 250, 250, 250],\r\n            lightColor: \"#FF231F7C\",\r\n        });\r\n    }\r\n}\r\n"],"sourceRoot":""}