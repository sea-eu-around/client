{"version":3,"sources":["web-build/register-service-worker.js","assets/fonts/Raleway-Regular.ttf","assets/fonts/Raleway-Thin.ttf","assets/fonts/Raleway-Light.ttf","assets/fonts/Raleway-SemiBold.ttf","assets/fonts/Raleway-Bold.ttf","src/constants/config.ts","src/constants/http-status.ts","src/api/utils.ts","src/api/converters.ts","src/state/types.ts","src/state/profile/actions.ts","src/state/persistent-storage/static.ts","src/state/auth/actions.ts","src/api/errors.ts","src/state/persistent-storage/auth.ts","src/state/settings/actions.ts","src/constants/universities.ts","src/model/utils.ts","src/state/auth/reducer.ts","src/constants/profile-constants.ts","src/validators/index.ts","src/constants/translations.ts","src/localization.ts","src/model/languages.ts","src/state/settings/reducer.ts","src/state/profile/reducer.ts","src/api/dto.ts","src/state/matching/actions.ts","src/state/matching/reducer.ts","src/state/messaging/actions.ts","src/api/chat-socket.ts","src/state/messaging/reducer.ts","src/state/notifications/reducer.ts","src/state/reports/reducer.ts","src/navigation/utils.ts","src/state/static-storage-middleware.ts","src/state/auth-storage-middleware.ts","src/state/notifications/actions.ts","src/notifications.ts","src/state/store.ts","src/state/navigation-middleware.ts","src/state/notifications-middleware.ts","src/hooks/useCachedResources.ts","src/constants/themes.ts","src/styles/utils.ts","src/screens/ScreenWrapper.tsx","src/styles/general.ts","src/screens/NotFoundScreen.tsx","src/screens/ValidateEmailScreen.tsx","src/screens/ValidationEmailSentScreen.tsx","src/navigation/linking-config.ts","src/components/InputLabel.tsx","src/components/InputErrorText.tsx","src/components/ValidatedTextInput.tsx","src/components/forms/FormTextInput.tsx","src/styles/forms.ts","src/components/forms/FormError.tsx","src/components/Button.tsx","src/components/forms/FormSubmitButton.tsx","src/components/forms/LoginForm.tsx","src/components/forms/ForgotPasswordForm.tsx","src/components/forms/ScrollFormWrapper.tsx","src/components/forms/SignupForm.tsx","src/components/SvgPlaceholder.tsx","src/assets.ts","src/components/headers/LoginHeader.tsx","src/screens/TabLoginScreen.tsx","src/components/SemiHighlightedText.tsx","src/screens/WelcomeScreen.tsx","src/components/modals/ModalImpl.tsx","src/components/modals/CustomModal.tsx","src/components/DebugMenu.tsx","src/components/VersionInfo.tsx","src/components/FloatingThemeToggle.tsx","src/navigation/LoginNavigator.tsx","src/components/LogOutButton.tsx","src/screens/TabNotImplementedScreen.tsx","src/components/cards/SwipeableCard.tsx","src/styles/picker.ts","src/constants/reports.ts","src/components/PopUpSelector.tsx","src/state/reports/actions.ts","src/components/forms/QuickForm.tsx","src/components/forms/QuickFormReport.tsx","src/components/cards/ChatRoomCard.tsx","src/components/InfiniteScroller.tsx","src/screens/messaging/ChatRoomsScreen.tsx","src/components/ProfileAvatar.tsx","src/styles/headers.ts","src/components/headers/MainHeader.tsx","src/components/headers/ChatScreenHeader.tsx","src/screens/messaging/ChatScreen.tsx","src/navigation/MessagingNavigator.tsx","src/screens/TabHomeScreen.tsx","src/components/modals/BlockProfileModal.tsx","src/components/FormattedUniversity.tsx","src/components/Chips.tsx","src/components/SwipeTip.tsx","src/components/cards/MatchProfileCard.tsx","src/screens/TabMatchingScreen.tsx","src/components/headers/MatchScreenHeader.tsx","src/components/MultiPicker.tsx","src/components/MultiUniversityPicker.tsx","src/styles/toggles.ts","src/components/DegreeToggleMulti.tsx","src/components/LanguagePicker.tsx","src/components/RoleToggleMulti.tsx","src/components/FormattedOfferCategory.tsx","src/screens/MatchFilteringScreen.tsx","src/components/headers/FilteringScreenHeader.tsx","src/components/FormattedMatchStatus.tsx","src/components/cards/HistoryProfileCard.tsx","src/components/BufferedSearchBar.tsx","src/screens/MatchHistoryScreen.tsx","src/navigation/TabMatchingNavigator.tsx","src/components/tabs/MainTabBar.tsx","src/navigation/MainNavigator.tsx","src/styles/onboarding.ts","src/components/GenderToggleMulti.tsx","src/styles/tooltips.ts","src/components/CustomTooltip.tsx","src/components/OfferControl.tsx","src/screens/onboarding/helpers.tsx","src/screens/onboarding/OnboardingSlide.tsx","src/screens/onboarding/OnboardingNameScreen.tsx","src/components/GenderToggle.tsx","src/components/NationalityPicker.tsx","src/components/FormattedNationality.tsx","src/components/NationalityControl.tsx","src/components/SectionedMultiPicker.tsx","src/model/education-fields.ts","src/components/EducationFieldPicker.tsx","src/components/FormattedDate.tsx","src/components/DateInput.tsx","src/components/BirthDateInput.tsx","src/screens/onboarding/OnboardingPersonalInfoScreen.tsx","src/components/LanguageLevelPicker.tsx","src/components/SpokenLanguagesInput.tsx","src/screens/onboarding/OnboardingLanguageScreen.tsx","src/components/InterestsPicker.tsx","src/screens/onboarding/OnboardingInterestsScreen.tsx","src/screens/onboarding/OnboardingRoleScreen.tsx","src/screens/onboarding/OnboardingOffersScreen1.tsx","src/screens/onboarding/OnboardingOffersScreen2.tsx","src/screens/onboarding/OnboardingOffersScreen3.tsx","src/components/DegreeToggle.tsx","src/screens/onboarding/OnboardingRoleSpecificScreen.tsx","src/components/modals/TOSDeclinedModal.tsx","src/components/TextLink.tsx","src/screens/onboarding/OnboardingLegalSlide.tsx","src/screens/onboarding/index.ts","src/screens/onboarding/OnboardingLegalScreen1.tsx","src/screens/onboarding/OnboardingLegalScreen2.tsx","src/screens/onboarding/OnboardingLegalScreen3.tsx","src/navigation/OnboardingNavigator.tsx","src/screens/onboarding/OnboardingSuccessfulScreen.tsx","src/components/AsyncButton.tsx","src/screens/MatchSuccessScreen.tsx","src/components/forms/ResetPasswordForm.tsx","src/screens/ResetPasswordScreen.tsx","src/screens/ForgotPasswordEmailSentScreen.tsx","src/screens/ResetPasswordSuccessScreen.tsx","src/components/RoleToggle.tsx","src/components/StaffRolePicker.tsx","src/components/AvatarEditButton.tsx","src/components/cards/ValueCard.tsx","src/components/EnlargeableAvatar.tsx","src/components/headers/WavyHeader.tsx","src/components/forms/EditProfileForm.tsx","src/screens/MyProfileScreen.tsx","src/components/FormattedGender.tsx","src/components/ProfileView.tsx","src/components/modals/UnmatchProfileModal.tsx","src/components/ProfileActionBar.tsx","src/screens/ProfileScreen.tsx","src/components/LocalePicker.tsx","src/components/LocalImage.tsx","src/model/user-settings.ts","src/components/modals/CustomizeCookiesModal.tsx","src/screens/SettingsScreen.tsx","src/screens/DeleteAccountSuccessScreen.tsx","src/components/forms/DeleteAccountForm.tsx","src/screens/DeleteAccountScreen.tsx","src/navigation/index.tsx","src/components/providers/ConnectedThemeProvider.tsx","src/constants/status-bar-theming.ts","src/components/ThemedStatusBar.tsx","src/components/CookieBanner.tsx","src/App.tsx","src/state/polyfills.ts"],"names":["navigator","window","addEventListener","serviceWorker","register","scope","then","info","catch","error","console","module","exports","Environment","HttpStatusCode","extra","Constants","manifest","APP_VERSION","version","APP_SCHEME","scheme","ENVIRONMENT","TARGET","DEBUG_MODE","DEBUG","CLIENT_URL","BACKEND_URL","SERVER_HOST","SERVER_URL","CHAT_CONNECTED_ROUTES","encodeRequestParams","args","str","Object","keys","filter","key","undefined","map","encodeURIPrimitive","v","Array","isArray","join","encodeURIComponent","length","requestBackend","endpoint","a","async","method","params","body","authToken","verbose","headers","Accept","Alert","alert","errorType","description","status","Authorization","accessToken","formattedParams","response","log","JSON","stringify","fetch","json","data","NO_CONTENT","stripSuperfluousOffers","offers","o","allowFemale","allowMale","allowOther","allowStaff","allowStudent","convertDtoToProfile","dto","complete","common","avatarUrl","avatar","birthdate","Date","educationFields","id","profileOffers","interests","i","languages","type","staffDto","staffRoles","r","studentDto","degree","convertPartialProfileToCreateDto","profile","toJSON","staff","student","convertDtoToUser","convertDtoToRoom","users","profiles","p","_id","name","firstName","lastName","lastMessageSeenId","lastMessageSeenDate","lastMessage","msg","sender","find","u","senderId","convertDtoToChatMessage","messages","writing","messagePagination","page","canFetchMore","fetching","user","createdAt","updatedAt","convertDtoToHistoryItem","date","PROFILE_ACTION_TYPES","storeStaticData","cookieConsent","storageObject","AsyncStorage","setItem","clearStaticData","s","multiRemove","readCachedStaticData","getItem","raw","parse","AUTH_ACTION_TYPES","setProfileFieldsSuccess","fields","PROFILE_SET_FIELDS_SUCCESS","createProfileSuccess","PROFILE_CREATE_SUCCESS","createProfile","dispatch","getState","token","auth","CREATED","payload","loadProfileOffersSuccess","fromCache","LOAD_PROFILE_OFFERS_SUCCESS","loadProfileInterestsSuccess","LOAD_PROFILE_INTERESTS_SUCCESS","fetchUserSuccess","FETCH_USER_SUCCESS","fetchProfileSuccess","FETCH_PROFILE_SUCCESS","localizeError","err","i18n","t","defaultValue","extractError","code","gatherValidationErrors","resp","OK","output","general","UNPROCESSABLE_ENTITY","errors","forEach","e","property","codes","generalError","storeAuthInformation","email","toStore","discardAuthInformation","removeItem","readCachedCredentials","SETTINGS_ACTION_TYPES","registerBegin","password","REGISTER_BEGIN","requestRegister","locale","settings","userSettings","registerSuccess","success","registerFailure","REGISTER_SUCCESS","REGISTER_FAILURE","loginSuccess","usingCachedCredentials","LOG_IN_SUCCESS","loginFailure","LOG_IN_FAILURE","requestLogin","logout","LOG_OUT","requestValidateAccount","validationToken","validateAccountSuccess","validateAccountFailure","VALIDATE_ACCOUNT_SUCCESS","VALIDATE_ACCOUNT_FAILURE","forgotPasswordSuccess","FORGOT_PASSWORD_SUCCESS","forgotPasswordFailure","FORGOT_PASSWORD_FAILURE","resetPasswordSuccess","RESET_PASSWORD_SUCCESS","deleteAccountSuccess","DELETE_ACCOUNT_SUCCESS","setOnboardingValues","values","SET_ONBOARDING_VALUES","setTheme","theme","SET_THEME","toggleTheme","TOGGLE_THEME","setLocale","SET_LOCALE","loadCookiesPreferences","preferences","consentDate","LOAD_COOKIES_PREFERENCES","saveCookiesPreferences","SAVE_COOKIES_PREFERENCES","PARTNER_UNIVERSITIES","domain","country","extractNamesFromEmail","splitName","split","capitalize","toUpperCase","slice","firstname","lastname","getUniversityFromEmail","trim","uni","initialState","authenticated","validated","registerEmail","validatedEmail","onboarded","onboarding","gender","nationality","offerValues","interestIds","DEGREES","LANGUAGE_LEVELS","ROLES","STAFF_ROLES","STAFF_ROLE_ICONS","GENDERS","VALIDATOR_EMAIL_SIGNUP","Yup","required","VALIDATOR_PASSWORD_SIGNUP","min","matches","VALIDATOR_PASSWORD_REPEAT","oneOf","VALIDATOR_EMAIL_LOGIN","VALIDATOR_PASSWORD_LOGIN","VALIDATOR_FIRSTNAME","VALIDATOR_LASTNAME","VALIDATOR_ONBOARDING_BIRTHDATE","nullable","VALIDATOR_ONBOARDING_GENDER","VALIDATOR_ONBOARDING_NATIONALITY","VALIDATOR_ONBOARDING_DEGREE","VALIDATOR_ONBOARDING_LANGUAGES","VALIDATOR_ONBOARDING_INTERESTS","en","locales","fr","appName","welcome","picker","callToAction","login","tabsignin","tabsignup","emailAddress","passwordRepeat","send","forgotPassword","newPassword","forgotPasswordExplanation","cancel","ok","signupWelcome","save","noResultsFound","legal","modal","disclaimer1","disclaimer2","decline","accept","readMore","privacy","emailNotificationsLabel","emailValidation","validating","createAccount","validation","atLeastOne","addAtLeastOne","invalid","invalidDomain","tooShort","noDigit","noUpperCase","noLowerCase","noSymbol","repeatWrong","language","specifyLevel","tooYoung","error_user_not_verified","user_not_found","email_or_password_incorrect","reset_password_no_token","unique","is_email","pageNotFound","pageDoesntExist","goHome","tabs","home","matching","messaging","notifications","myProfile","editProfile","educationFieldsPicker","placeholder","searchPlaceholder","multiple","educationFieldCategories","education","services","handicrafts","economics","psychology","law","biology","biochemistry","chemistry","physics","mathematics","statistics","materials","textiles","horticulture","forestry","fisheries","veterinary","medicine","pharmacy","sports","levelOfStudy","degrees","bsc1","bsc2","bsc3","m1","m2","phd","university","search","selectCountry","countryPickerLanguageCode","profileType","profileTypes","allRoles","teaching","research","administration","technical","other","genders","male","female","dateOfBirth","months","0","1","2","3","4","5","6","7","8","9","10","11","fieldsOfEducation","apply","universities","universitiesPicker","logOut","title","subtitle","personalInfo","role","roleSpecific1","offersMeet","offersDiscover","offersCollaborate","legal1","text","legal2","legal3","submit","getStarted","profileCreated","quit","yes","spokenLanguages","languagePicker","placeholderSingle","placeholderMultiple","languageLevelPicker","languageLevels","a1","a2","b1","b2","c1","c2","native","languageNames","aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","eo","es","et","eu","fa","ff","fi","fj","fo","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rc","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","sh","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu","chooseInterests","interestsPicker","interestNames","tango","sneakers","baking","tarot","art","tea","picnicking","motorcycles","parties","shopping","couchsurfing","netflix","cooking","vegan","brunch","politics","bbq","surfing","spirituality","gardening","astrology","climbing","tennis","writer","comedy","wine","diy","coffee","sailing","music","cycling","activism","trivia","travel","instagram","museum","karaoke","fashion","blogging","yoga","investing","petanque","theater","environmentalism","crossfit","dancing","hiking","running","golf","photography","vlogging","volunteering","tattoos","outdoors","esports","snowboarding","athlete","extrovert","podcasts","walking","vegetarian","reading","movies","foodie","soccer","skiing","sushi","introvert","skateboarder","festivals","fishing","swimming","expositions","gamer","piano","offerCategories","meet","discover","collaborate","allOffers","help","unmatch","blockQuestion","action","block","warning","welcomeScreen","signIn","signUp","loginForm","logIn","cookies","bannerText","acceptAll","customize","cache","report","what","why","typePlaceholder","types","violence","nudity","harassment","confirmationTitle","confirmation","failureTitle","failure","resetPassword","instructions","button","deleteAccount","success1","success2","leave","inputLabel","noMatches","noResults","noResultsAdvice","filtering","sectionGeneral","buttonReset","actionLike","actionHide","chat","continue","history","requested","declined","blocked","actions","mute","noOffersSelected","screenTitles","suffix","WelcomeScreen","LoginScreen","ForgotPasswordScreen","SignupScreen","OnboardingNameScreen","OnboardingPersonalInfoScreen","OnboardingLanguageScreen","OnboardingInterestsScreen","OnboardingRoleScreen","OnboardingRoleSpecificScreen","OnboardingOffersScreen1","OnboardingOffersScreen2","OnboardingOffersScreen3","OnboardingLegalScreen1","OnboardingPrivacyScreen","ChatRoomsScreen","ChatScreen","TabHomeScreen","TabMatchingScreen","MatchFilteringScreen","MatchHistoryScreen","TabNotificationsScreen","MyProfileScreen","ProfileScreen","SettingsScreen","DeleteAccountScreen","DeleteAccountSuccessScreen","ValidationEmailSentScreen","ValidateEmailScreen","ResetPasswordScreen","ResetPasswordSuccessScreen","OnboardingSuccessfulScreen","NotFoundScreen","MatchSuccessScreen","ForgotPasswordEmailSentScreen","sections","danger","about","darkTheme","deleteMyAccount","termsOfService","reportABug","customizeCookies","signup","SUPPORTED_LOCALES","getDefaultLocale","l","Localization","LANGUAGES_CODES","getLocalizedLanguageItems","dict","translations","label","value","cookieConsentDate","localizedLanguageItems","OfferCategory","offerIdToCategory","Map","MatchActionStatus","initOfferValue","val","genderVal","allowChooseGender","typeVal","allowChooseProfileType","offerId","MATCHING_ACTION_TYPES","MATCH_ACTION_HISTORY_STATUSES","Declined","Blocked","Requested","fetchProfilesFailure","FETCH_PROFILES_FAILURE","fetchProfilesSuccess","FETCH_PROFILES_SUCCESS","refreshFetchedProfiles","FETCH_PROFILES_REFRESH","likeProfileSuccess","profileId","matchStatus","roomId","LIKE_PROFILE_SUCCESS","dislikeProfileSuccess","DISLIKE_PROFILE_SUCCESS","blockProfileSuccess","BLOCK_PROFILE_SUCCESS","blockProfile","toProfileId","fetchHistorySuccess","items","FETCH_HISTORY_SUCCESS","refreshFetchedHistory","FETCH_HISTORY_REFRESH","cancelActionFailure","historyItemId","ACTION_CANCEL_FAILURE","cancelActionSuccess","ACTION_CANCEL_SUCCESS","cancelMatchAction","matchingEntityId","MESSAGING_ACTION_TYPES","filters","fetchedProfiles","profilesPagination","historyPagination","historyFilters","k","initialHistoryFilters","historyItems","myMatches","fetchingMyMatches","SOCKET_LOCATION","this","socket","connectCallbacks","writingTimeout","lastSentWritingState","connecting","connected","connectedState","f","listeners","on","consumeConnectCallbacks","m","onMessageReceived","onMessageRead","onWritingStateChange","emit","room","state","clearTimeout","setTimeout","sendWritingState","callback","push","connect","query","authorization","reconnectionDelay","reconnectionAttempts","registerListeners","readMessage","messageId","refreshWritingTimeout","disconnect","fetchMatchRoomsSuccess","rooms","FETCH_MATCH_ROOMS_SUCCESS","connectToChat","socketState","fail","CONNECT_TO_CHAT_FAILURE","CONNECT_TO_CHAT_BEGIN","chatSocket","activeRoom","receiveChatMessage","readChatMessage","receiveChatWriting","hasConnected","CONNECT_TO_CHAT_SUCCESS","disconnectFromChat","DISCONNECT_FROM_CHAT","joinChatRoomBegin","JOIN_CHAT_ROOM_BEGIN","joinChatRoomSuccess","JOIN_CHAT_ROOM_SUCCESS","joinChatRoom","JOIN_CHAT_ROOM_FAILURE","joinRoom","sendChatMessageSuccess","message","SEND_MESSAGE_SUCCESS","sendChatMessage","localChatUser","sent","sendMessage","SEND_MESSAGE_FAILURE","RECEIVE_MESSAGE","RECEIVE_WRITING_STATE","READ_MESSAGE","beginFetchEarlierMessages","FETCH_EARLIER_MESSAGES_BEGIN","fetchEarlierMessagesFailure","FETCH_EARLIER_MESSAGES_FAILURE","fetchEarlierMessagesSuccess","FETCH_EARLIER_MESSAGES_SUCCESS","matchRooms","matchRoomsOrdered","matchRoomsPagination","toLocalChatUser","updateRoom","setAsFirst","otherRooms","concat","rootNavigationRef","React","rootNavigate","route","current","navigate","navigateBack","fallback","nav","canGoBack","goBack","screenTitle","headerTitle","openChat","screen","hasUserGivenCookieConsent","Platform","OS","now","getTime","NOTIFICATIONS_ACTION_TYPES","areNotificationsSupported","isDevice","registerNotificationTokenSuccess","REGISTER_TOKEN_SUCCESS","deleteNotificationTokenSuccess","DELETE_TOKEN_SUCCESS","rootReducer","combineReducers","verificationToken","names","SET_ONBOARDING_OFFER_VALUE","category","sort","b","SET_AVATAR_SUCCESS","SET_OFFER_FILTER","SET_FILTERS","FETCH_PROFILES_BEGIN","pagination","FETCH_MY_MATCHES_BEGIN","FETCH_MY_MATCHES_FAILURE","FETCH_MY_MATCHES_SUCCESS","FETCH_HISTORY_BEGIN","FETCH_HISTORY_FAILURE","SET_HISTORY_FILTERS","FETCH_MATCH_ROOMS_BEGIN","FETCH_MATCH_ROOMS_FAILURE","FETCH_MATCH_ROOMS_REFRESH","LEAVE_ROOM","existingMessage","reports","combinedMiddleware","applyMiddleware","thunk","store","next","oldCookies","Matched","Permissions","Notifications","askForPushNotificationToken","pushToken","registerNotificationToken","createStore","loggedInFromCache","light","textWhite","textBlack","textLight","textInverted","background","cardBackground","accent","accentSlight","accentSecondary","accentTernary","actionNeutral","okay","warn","componentBorder","chatBubble","inputPlaceholder","dark","preTheme","generator","styles","themes","ScreenWrapper","props","themedStyles","View","style","wrapper","container","children","StyleSheet","create","flex","justifyContent","flexDirection","alignItems","maxWidth","withTheme","styleTextThin","fontFamily","fontWeight","styleTextLight","webFontFamily","BLUR_HEADER_INTENSITY","BLUR_TAB_INTENSITY","navigation","Text","TouchableOpacity","onPress","replace","link","linkText","padding","fontSize","textAlign","color","marginTop","paddingVertical","reduxConnector","Staging","ActivityIndicator","size","successText","routeName","fallbackRoute","location","attemptRedirectToApp","width","marginVertical","lineHeight","FontAwesome","mailIcon","config","prefixes","Linking","screens","SigninScreen","MainScreen","TabHome","TabMatching","MAtchFilteringScren","TabMessaging","TabNotifications","ValidateEmailSentScreen","OnboardingScreen","OnboardingTosScreen","InputLabel","otherProps","textTransform","letterSpacing","InputErrorText","errorStr","marginBottom","ValidatedTextInput","inputRef","createRef","focused","focus","showErrorText","icon","untouched","wrapperStyle","inputStyle","inputFocusedStyle","errorStyle","validStyle","focusedStyle","errorTextStyle","labelStyle","placeholderTextColor","onBlur","onFocus","showError","position","paddingBottom","TextInput","ref","height","backgroundColor","setState","Component","defaultProps","emailProps","keyboardType","autoCompleteType","textContentType","autoCapitalize","autoCorrect","passwordProps","secureTextEntry","FormTextInput","field","touched","handleChange","handleBlur","onChangeText","isEmail","isPassword","formStyles","inputFieldIcon","marginRight","inputFieldIconFocused","getLoginTextInputsStyleProps","wrapperVerticalMargin","borderBottomWidth","borderColor","borderBottomColor","outline","FormError","SKINS","borderRadius","borderWidth","Button","skin","textStyle","skinStyles","accessibilityRole","accessibilityLabel","FormSubmitButton","submitting","loadingIndicatorStyle","LoginFormSchema","shape","LoginForm","pwdInputRef","setFieldValue","oldProps","onSuccessfulSubmit","setFieldError","remoteErrors","containerStyle","fstyles","initialValues","validationSchema","validateOnBlur","onSubmit","formikProps","handleSubmit","textInputProps","returnKeyType","blurOnSubmit","onSubmitEditing","MaterialIcons","Keyboard","dismiss","forgotPwdLink","forgotPasswordText","actionsContainer","MaterialCommunityIcons","loginButtonIcon","separatorContainer","separatorHbar","separatorText","marginLeft","paddingHorizontal","opacity","ForgotPasswordFormSchema","ForgotPasswordForm","titleWrapper","formikCfg","ScrollFormWrapper","keyboardShown","notKeyboardReactive","addListener","contentStyle","ScrollView","keyboardShouldPersistTaps","scrollView","contentContainerStyle","scrollViewContent","minHeight","onLayout","nativeEvent","layout","KeyboardAvoidingView","behavior","keyboardAvoidingView","SignupFormSchema","SignupForm","pwdField1Ref","pwdField2Ref","validateOnChange","SvgPlaceholder","loaded","assetDictEn","assetDictFr","getLocalImage","onLoad","finish","default","assetDictCommon","getLocalSvg","LoginHeaderClass","ReAnimated","Value","getFullHeight","imageTop","getImageHeight","Dimensions","get","insets","top","Math","easing","Easing","cubic","timing","toValue","getCollapsedHeight","duration","start","Image","image","viewBox","navigationButton","back","navigationIcon","zIndex","left","aspectRatio","SVG_VIEWBOX_W","LoginHeader","useSafeAreaInsets","themeProps","paddingTop","SemiHighlightedText","underlineHeight","underlineSides","textContainer","underline","bottom","textShadowColor","textShadowOffset","textShadowRadius","WelcomeImage","forceUpdate","imageContainer","numberOfLines","alignSelf","ModalImplClass","modalVisible","visible","document","createElement","appendChild","setModalVisible","onHide","onShow","modalViewStyle","fullWidth","fullHeight","nonDismissable","noBackground","backdropOpacity","cursor","activeOpacity","right","margin","boxShadow","renderContent","ReactDOM","createPortal","CustomModalClass","modalRef","activator","activatorElement","show","ModalImpl","DebugMenu","ACTIONS","hide","n","round","random","level","titleStyle","debugContent","Content","Title","modalProps","statusBarTranslucent","isVisible","CustomModal","versionInfoContainer","versionText","versionAlphaText","versionDisclaimerIcon","toggleThemeContainer","toggleThemeButton","toggleThemeIcon","SigninRoot","createMaterialTopTabNavigator","Tab","LoginNavigator","Navigator","swipeEnabled","tabBar","Screen","component","options","initialRouteName","LogOutButton","onLogOut","TabNotImplementedScreen","FontAwesome5","constructionIcon","separator","logoutButton","DEFAULT_LOOKS","sideMargin","verticalSpacing","SwipeableCardClass","swipeableRef","looks","hidden","onHidden","onFinish","ease","close","leftActions","rightActions","wrapperProps","swipeableProps","hideCard","noAnimation","collapse","flexBasis","display","Swipeable","swipeableContainer","childrenContainerStyle","swipeable","useNativeAnimations","friction","renderLeftActions","renderRightActions","touchable","oneSidedBorderRadius","side","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","SwipeActionButton","buttonStyles","swipeActionButton","swipeActionButtonIcon","swipeActionButtonText","SwipeActionButtons","buttonStyle","SwipeActionContainer","properties","first","last","isExteriorButton","isInteriorButton","interiorFiller","fullCardWidth","swipeActionsContainer","marginHorizontal","paddingRight","paddingLeft","swipeActionsContent","overflow","swipeActionText","pickerStyles","overlay","maxHeight","dropdownWrapper","dropdownStyle","dropdownItemStyle","dropdownActiveItemStyle","dropdownActiveLabelStyle","dropdownLabelStyle","okButton","okButtonText","openButton","openButtonText","chipContainer","ReportType","PopUpSelector","valueDict","selected","fromSelectedProp","newValue","onSelect","valueStyle","pstyles","buttonOk","placeholderText","scroll","scrollContent","index","rowContainer","toggleValue","checked","checkboxContainer","checkboxWrapper","checkedIcon","uncheckedIcon","some","flexGrow","ReportEntityType","REPORT_ACTION_TYPES","REPORT_TYPES","VIOLENCE","NUDITY","HARASSMENT","UNDESIRABLE_CONTENT","HATE_SPEECH","VULGAR_CONTENT","OTHER","reportEntitySuccess","reportType","entityType","entityId","REPORT_ENTITY_SUCCESS","reportEntityFailure","REPORT_ENTITY_FAILURE","reportEntity","QuickFormClass","open","confirmationOpen","failureOpen","hideSubmit","titleIcon","submitText","confirmationText","failureText","actionButtons","actionButton","actionButtonText","content","titleContainer","containerModal","wrapperSheet","containerSheet","feedbackModal","feedbackTitle","feedbackText","QuickFormReportClass","quickFormRef","selectedType","entity","PROFILE_ENTITY","getEntityInfo","QuickForm","inputItem","selectorValue","LOOKS","ChatRoomCard","reportFormRef","swipeableCardRef","localUser","lastMessageComponent","isRead","pad","num","padStart","lastMessageText","lastMessageTextNew","lastMessageTime","getHours","getMinutes","noMessageText","SwipeableCard","rightThreshold","overshootRight","getActions","cardContent","avatarContainer","avatarStyle","infoContainer","QuickFormReport","resetSwipe","InfiniteScroller","scrollViewRef","hiddenIds","fetchMore","isFocused","item","fetchLimit","getShownItems","refreshOnFocus","refresh","currentPage","justRefreshed","renderItem","noResultsComponent","itemsContainerStyle","progressViewOffset","scroller","itemsContainer","refreshControl","RefreshControl","refreshing","onRefresh","onScroll","layoutMeasurement","contentOffset","contentSize","y","hideItem","loadingIndicatorContainer","noResultsContainer","roomIds","fetchingRooms","limit","paginated","meta","totalPages","noMatchesText","ProfileAvatar","avatarProps","avatarTitle","avatarSourceProp","source","uri","headerStyles","wrapperBlur","wrapperNoShadow","shadowColor","elevation","backButton","backButtonIcon","rightButton","rightIcon","MainHeaderClass","rightButtons","noAvatar","noShadow","noSettingsButton","blur","overrideAvatar","overrideTitle","scene","textColor","buttonBackgroundColor","WrapperComponent","BlurView","blurProps","tint","intensity","rounded","ButtonComponent","toLowerCase","iconStyle","MainHeaderComp","MainHeader","ChatScreenHeaderClass","stackProps","hstyles","ChatScreenHeaderComp","ChatScreenHeader","fetchMatchRoom","connectToRoom","leaveRoom","fetchEarlier","beforeDate","convertDto","chatComponent","isWritingId","userWriting","lastMessageDict","renderSend","sendContainer","renderBubble","renderTicks","currentMessage","messageTicksContainer","received","messageTick","bubbleTextLeft","bubbleTextRight","bubbleWrapperLeft","bubbleWrapperRight","renderMessage","lm","messageReadContainer","messageReadAvatar","messageReadAvatarText","renderInputToolbar","inputToolbarContainer","primaryStyle","inputToolbarPrimary","renderFooter","ChatFooter","renderActions","ChatActions","actionsProps","onInputTextChanged","setWriting","onSend","loadEarlier","isLoadingEarlier","onLoadEarlier","timeFormat","listViewProps","onEndReached","autoFocus","textInput","multiline","minInputToolbarHeight","MIN_INPUT_HEIGHT","showUserAvatar","renderAvatar","renderCustomView","dotColor","dotAmplitude","dotSpeed","dotMargin","dotRadius","dotX","dotY","actionContainer","actionIcon","ImagePicker","mediaTypes","Images","allowsEditing","aspect","words","floor","GiftedChat","messageIdGenerator","borderTopWidth","minWidth","Stack","createStackNavigator","MessagingNavigator","headerMode","headerShown","header","shortCode","url","BASE_URL","fetchPostEmbed","alphaText","BlockProfileModalClass","onBlock","actionButtonsWrapper","actionText","redBackground","FormattedUniversity","flagSize","flagEmoji","countryCode","withEmoji","Chips","removable","onRemove","chipStyle","Chip","chip","chipText","chipRemoveButton","chipRemoveIcon","flexWrap","FocusAware","useFocusEffect","SwipeTip","offset","animating","animate","even","ANIMATION_AMPLITUDE","inOut","circle","linear","direction","iconName","setAnimating","MatchProfileCard","cardRef","expanded","PROFILE_PREVIEW_COLLAPSED_HEIGHT","x","PROFILE_PREVIEW_EXPANDED_HEIGHT","elastic","out","expand","onExpand","showSwipeTip","univ","fullName","chipStyleProps","leftThreshold","onSwipeableRightWillOpen","onSwipeLeft","onSwipeableLeftWillOpen","onSwipeRight","swipeActionContentRight","swipeActionContentLeft","toggleExpanded","collapsedContent","infoText","swipeTip","swipeTipIcon","expandedContent","expandedSectionTitle","BlockProfileModal","blockButton","blockButtonIcon","flexShrink","fetchingProfiles","scrollerRef","notEmpty","filterParams","noResultsText1","noResultsText2","scrollTo","animated","MatchScreenHeaderClass","MatchScreenHeader","MultiPicker","tempSelected","dropdownWrapperHeight","has","set","genLabel","updateItems","onChange","multipleText","searchablePlaceholder","showChips","single","viewProps","selectedItems","toString","searchable","onChangeItem","scrollViewProps","showArrow","dropDownMaxHeight","selectedLabelStyle","itemStyle","activeItemStyle","activeLabelStyle","showSelected","MultiUniversityPicker","univKey","getToggleStyleProps","nobuttonBariant","innerBorderStyle","buttonContainerStyle","selectedButtonStyle","selectedTextStyle","disabledStyle","disabledSelectedStyle","disabledSelectedTextStyle","buttonLabels","noButtonVariant","styleProps","idx","selectMultiple","selectedIndexes","indexOf","buttons","LanguagePicker","languageId","roles","FormattedOfferCategory","iconProps","iconSize","translationKey","SvgIcon","Separator","filteringScreenRef","localFilters","haveFiltersChanged","updateLocalFilters","offerSections","sectionContainer","entryContainer","entryLabel","Switch","onValueChange","updateLocalOfferFilters","scrollContainer","resetButton","resetLocalFilters","resetButtonText","resetButtonIcon","sectionTitle","entryControls","ClearFilterButton","twoLineEntryContainer","FilteringScreenHeaderClass","applyFilters","FilteringScreenHeaderComp","FilteringScreenHeader","FormattedMatchStatus","IconComponent","HistoryProfileCard","blockModalRef","reportButton","cancelButton","swipeLeftIcon","BufferedSearchBar","updateTimeout","bufferDelay","onBufferedUpdate","searchBarProps","fetchingHistory","filtersContainer","Filter","filterKey","setHistoryFilters","searchBarContainer","inputContainerStyle","searchBarInputContainer","searchBarInput","fetchHistory","filterButtonContainer","filterButton","filterButtonSelected","filterLabel","filterLabelSelected","raised","topBar","filtersIcon","headerContainer","filterIcon","filterIconSelected","TabMatchingStack","TabMatchingNavigator","MainTabBarClass","tabBarProps","blurViewStyle","BottomTabBar","activeTintColor","tabStyle","tab","showLabel","MainTabBarIcon","MainTabBar","TabNavigator","createBottomTabNavigator","TabHomeStack","TabHomeNavigator","screenOptions","TabNotificationsStack","TabNotificationsNavigator","tabBarIcon","tabBarVisible","getFocusedRouteNameFromRoute","onboardingStyle","wavyHeader","slideScrollView","slideContentWrapper","slideNavWrapper","navButton","navButtonIcon","finishButtonText","onboardingOffersStyle","categoryTitleText","tooltipStyles","alignContent","CustomTooltip","popover","OfferControl","changed","offerValueChange","offer","isSomethingSelected","allowInterRole","setAllValues","offerNameTouchable","offerName","helpIcon","buttonsWrapper","createOfferControls","onboardingState","setOnboardingOfferValue","finishOnboarding","createProfileDto","base","onboardingStateToDto","OnboardingSlide","hideNavNext","hasNext","noKeyboardAvoidance","hasPrevious","Background","preserveAspectRatio","keyboardVerticalOffset","enabled","previous","quitOnboarding","VALIDATION_SCHEMA","lastNameInputRef","nextProps","prev","getOnboardingTextInputsStyleProps","enablesReturnKeyAutomatically","disabled","selectedIndex","NationalityPicker","showModal","hideModal","filterProps","withFlag","withFilter","cca2","onClose","translation","containerButtonStyle","pickerContainerButton","DARK_THEME","DEFAULT_THEME","FormattedNationality","countryName","updateCountryName","getCountryInfoAsync","prevProps","NationalityControl","SectionedMultiPicker","selectRef","section","genSectionLabel","_toggleSelector","multiSelectStyles","sectionedMultiSelectStyles","miscStyles","select","onSelectedItemsChange","uniqueKey","displayKey","subKey","onCancel","onConfirm","IconRenderer","icons","showDropDowns","readOnlyHeadings","showCancelButton","selectedIconOnLeft","animateDropDowns","hideSelect","noResultsText","searchIconComponent","searchIcon","confirmText","searchPlaceholderText","colors","primary","subText","searchPlaceholderTextColor","selectToggleTextColor","itemBackground","subItemBackground","confirmFontFamily","itemFontFamily","searchTextFontFamily","subItemFontFamily","modalWrapper","EducationFieldCategory","overflowY","searchBar","searchTextInput","toggleIcon","subItem","selectedItem","itemText","subItemText","EducationFieldSubCategory","EDUCATION_FIELD_CATEGORIES","EDUCATION_FIELDS","GPQ","subCategory","EDU","AH","SSJI","BAL","NSMS","ICT","EMC","AFFV","HW","SER","sectioned","EDUCATION_FIELDS_SECTIONED","EducationFieldPicker","FormattedDate","localizedMonth","getMonth","formattedDate","getDate","getFullYear","dateInputProps","maxLength","clearTextOnFocus","DateInputClass","input1Ref","input2Ref","input3Ref","deriveStateFromDate","year","month","day","pyear","parseInt","pmonth","pday","getError","minimumDate","maximumDate","validDate","inputStyleValid","input","inputDay","inputMonth","inputYear","minDate","maxDate","setFullYear","BirthDateInputClass","dateInputRef","DateInput","setFieldTouched","BirthDateInput","dateTextInput","dateTextInputValid","birthdateText","LanguageLevelPicker","SpokenLanguagesInput","hasErrors","levelDict","rows","languageLabel","levelPicker","setLanguageLevel","removeRow","deleteIcon","languageCodes","setLanguages","allInterests","updateValues","interest","interestId","roleButton","roleButtonIconStudent","roleButtonTextStudent","roleButtonIconStaff","roleButtonTextStaff","studentColor","staffColor","roleButtonText","roleButtonIcon","OnboardingOfferScreen1","Discover","OnboardingOfferScreen2","Collaborate","OnboardingOfferScreen3","Meet","DegreeToggle","d","onUpdate","studentThemedStyles","staffThemedStyles","setValue","buttonIcon","buttonText","thumbColor","trackColor","true","false","studentRender","staffRender","TOSDeclinedModal","TextLink","textProps","OnboardingLegalSlide","legalText","readMoreText","actionsWrapper","actionButtonTextDecline","actionButtonTextAccept","ONBOARDING_SCREENS","OnboardingLegalScreen2","OnboardingLegalScreen3","ONBOARDING_ORDER","OnboardingStack","ComponentClass","temp","OnboardingNavigator","tabBarOptions","showIcon","springConfig","stiffness","damping","mass","lazy","lazyPreloadDistance","AsyncButton","loading","getRoomId","ResetPasswordFormSchema","ResetPasswordForm","pwdRepeatRef","_","AvatarEditButton","ensurePermission","showPicker","quality","result","cancelled","onPictureSelected","shadowOffset","shadowOpacity","shadowRadius","ValueCard","renderModalContent","renderInput","oneLine","modalLabel","modalErrorText","modalButtonsContainer","modalButton","setModal","modalOpen","initialValue","validate","validator","validateSync","setError","overrideModal","noModal","locked","blank","onModalShown","cardWrapper","cardLabelContainer","cardLabel","rightIconContainer","modalContent","animationType","EnlargeableAvatar","enlarged","showEnlarged","hideEnlarged","enlargedAvatarContainer","enlargedAvatar","WAVE_PATTERNS","WavyHeader","waveTop","wavePatternIdx","wavePattern","fill","Spacer","EditProfileForm","birthDateInputRef","profileFieldComponents","cardText","_error","birthdateInputContainer","birthdateInput","inputError","onFieldChanged","cc","staffRoleButton","OfferCategoryRow","onApply","imageInfo","mimeType","SET_AVATAR_FAILURE","fileName","s3Url","blob","imageBlob","response2","payload2","universityContainer","offerVal","updatedVal","avatarAccessory","PROFILE_SET_FIELDS_FAILURE","setProfileFields","FormattedGender","ProfileView","actionBar","loadingIndicator","scrollWrapper","formWrapper","buttonSend","UnmatchProfileModal","blockTouchable","ActionButton","buttonTop","buttonTopBlank","buttonTopIcon","isMatched","buttonBlock","buttonReport","buttonChat","buttonMute","buttonUnmatch","getRouteParams","profileWithMatchInfo","fetchProfile","LocalePicker","LocalImage","imageKey","img","COOKIES_PREFERENCES_KEYS","CustomizeCookiesModal","storeCookies","localCookies","cookieDict","toggleCookie","preferenceRow","preferenceRowButton","checkBoxContainer","preferenceName","preferenceDescription","versionClickCount","card","cardIcon","localeButton","localButtonValue","cardButtonText","oneLineCardButton","max","cardButton","logosContainer","resizeMode","logo","logoSeaEuAround","logoErasmus","Section","sectionTitleContainer","sectionIcon","DeleteAccountFormSchema","DeleteAccountForm","warningIcon","previousAppStatus","consumedInitialRoute","previousRoute","onStateChange","getCurrentRoute","toChat","fromChat","onAppStateChange","connectedToChat","initialRoute","onReady","reactNavigationTheme","DarkTheme","DefaultTheme","NavigationContainer","linking","LinkingConfiguration","AppState","MainNavigator","cardStyleInterpolator","CardStyleInterpolators","forVerticalIOS","forFadeFromBottomAndroid","currentTheme","STATUS_BAR_THEME_OVERRIDES","ThemedStatusBar","override","getThemeOverride","previousThemeOverride","defaultStyle","StatusBar","CookieBanner","showCustomize","modalView","cookieText","registerRootComponent","platform","web","secondary","grey","searchBg","isLoadingComplete","setLoadingComplete","SplashScreen","cacheIsGood","Font","font","Raleway","require","RalewayThin","RalewayLight","RalewaySemiBold","RalewayBold","credentials","loadResourcesAndDataAsync","useCachedResources","fallbacks","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","notification","request","importance","MAX","vibrationPattern","lightColor","useState","navigationReady","setNavigationReady"],"mappings":"oHAEI,kBAAmBA,WACrBC,OAAOC,iBAAiB,QAAQ,WAC9BF,UAAUG,cACPC,SAAS,0BAA2B,CAAEC,MAAO,MAC7CC,MAAK,SAAUC,OAGfC,OAAM,SAAUC,GACfC,QAAQH,KAAK,oCAAqCE,U,wCCV1DE,EAAOC,QAAU,IAA0B,+B,oBCA3CD,EAAOC,QAAU,IAA0B,4B,oBCA3CD,EAAOC,QAAU,IAA0B,6B,oBCA3CD,EAAOC,QAAU,IAA0B,gC,oBCA3CD,EAAOC,QAAU,IAA0B,4B,4CCI/BC,E,gIAAAA,K,kBAAAA,E,yBAAAA,M,KAKZ,ICJYC,EDINC,EAAQC,IAAUC,SAASF,MAEpBG,EAAsBF,IAAUC,SAASE,QACzCC,EAAqBJ,IAAUC,SAASI,OACxCC,EAA2BP,EAAMQ,OACjCC,EAAsBT,EAAMU,MAC5BC,EAAqBX,EAAMW,WAE3BC,GADsBZ,EAAMa,YACNb,EAAMc,YA6B5BC,EAA0C,CAAC,aAAc,mB,ikBEzB/D,SAASC,EAAoBC,GAChC,IAAMC,EAAMC,OAAOC,KAAKH,GACnBI,QAAO,SAACC,GAAD,YAA+BC,IAAdN,EAAKK,MAC7BE,KAAI,SAACF,GAAD,OAAoBA,EAApB,IAdb,SAASG,EAAmBC,GACxB,OAAOC,MAAMC,QAAQF,GACfA,EAAEF,KAAI,SAACE,GAAD,OAAOD,EAAmBC,MAAIG,KAAK,KACzCC,mBAAmBJ,GAWWD,CAAmBR,EAAKK,OACvDO,KAAK,KACV,OAAqB,GAAdX,EAAIa,OAAcb,EAAM,IAAMA,EAalC,SAAec,EAClBC,GADG,2CAAAC,EAAAC,OAAA,mDAEHC,EAFG,+BAEM,MACTC,EAHG,+BAGiB,GACpBC,EAJG,+BAImB,GACtBC,EALG,oCAKsChB,EACzCiB,EANG,gCAQGC,EAAmC,CACrCC,OAAQ,mBACR,eAAgB,yBAGFnB,IAAdgB,EAbD,oBAcmB,OAAdA,EAdL,wBAeK5C,QAAQD,MAAR,gCAA8CuC,EAA9C,+BACAU,IAAMC,MAAM,yCAhBjB,kBAiBY,CAACC,UAAW,gBAAiBC,YAAa,mCAAoCC,OAAQ,MAjBlG,QAkBQN,EAAQO,cAAR,UAAkCT,EAAUU,YAlBpD,eAqBGC,EAAkBlC,EAAoBqB,GACxCc,EAA4B,KAtB7B,UAyBKX,IACA7C,QAAQyD,IAAR,oBAAgChB,EAAhC,KAA2CH,EAAWiB,GACtDvD,QAAQyD,IAAR,cAA0BC,KAAKC,UAAUb,IACzC9C,QAAQyD,IAAR,cAA0BC,KAAKC,UAAUhB,KA5B9C,YAAAJ,EAAA,MA+BkBqB,MAAS3C,EAAJ,IAAmBqB,EAAWiB,EAA9B,GAClBd,SACAK,WACc,OAAVL,EAAkB,GAAK,CAACE,KAAMe,KAAKC,UAAUhB,OAlCtD,WA+BCa,EA/BD,OAqCKK,EAAO,CAACT,OAAQI,EAASJ,OAAQU,KAAM,IACvCN,EAASJ,SAAWhD,EAAe2D,WAtCxC,yCAsC+DF,GAtC/D,YAAAtB,EAAA,MAsC+EiB,EAASK,QAtCxF,oBAsCoDA,GAtCpD,kCAwCKhB,IACA7C,QAAQyD,IAAR,0BAAsCnB,EAAtC,KACAtC,QAAQyD,IAAII,IA1CjB,kBA6CQA,GA7CR,0CA+CC7D,QAAQD,MACJ,iDAAiDuC,EAAjD,cACgBG,EADhB,iBACuCG,EADvC,YAC4Dc,KAAKC,UAAUjB,GAD3E,UAEYgB,KAAKC,UAAUhB,IAE/B3C,QAAQD,MAAR,MACAC,QAAQD,MAAM,iCAAkCyD,GArDjD,kBAsDQ,CAACN,UAAW,gBAAiBC,YAAa,sCAAuCC,OAAQ,MAtDjG,mE,SDlCKhD,O,yBAAAA,I,+CAAAA,I,6BAAAA,I,aAAAA,I,uBAAAA,I,yBAAAA,I,mEAAAA,I,6BAAAA,I,mCAAAA,I,uCAAAA,I,iCAAAA,I,yCAAAA,I,uBAAAA,I,yCAAAA,I,2CAAAA,I,mBAAAA,I,2BAAAA,I,iCAAAA,I,2BAAAA,I,iCAAAA,I,6CAAAA,I,6CAAAA,I,+BAAAA,I,iCAAAA,I,yCAAAA,I,2BAAAA,I,2BAAAA,I,6CAAAA,I,qCAAAA,I,mEAAAA,I,uCAAAA,I,yBAAAA,I,iBAAAA,I,uCAAAA,I,+CAAAA,I,2CAAAA,I,iCAAAA,I,qDAAAA,I,mDAAAA,I,6CAAAA,I,mCAAAA,I,+CAAAA,I,iDAAAA,I,qBAAAA,I,2CAAAA,I,yCAAAA,I,mDAAAA,I,2CAAAA,I,uEAAAA,I,mEAAAA,I,mDAAAA,I,uCAAAA,I,+BAAAA,I,+CAAAA,I,uCAAAA,I,6DAAAA,I,uDAAAA,I,iDAAAA,I,mCAAAA,I,iCAAAA,I,wEAAAA,M,skBEuBL,SAAS4D,EAAuBC,GACnC,OAAOA,EACDA,EAAOvC,QAAO,SAACwC,GAAD,OAAOA,EAAEC,aAAeD,EAAEE,WAAaF,EAAEG,YAAcH,EAAEI,YAAcJ,EAAEK,gBACvF,GAGH,SAASC,EAAoBC,GAChC,IAUIC,EAVEC,EAAyB,OACxBF,GADwB,IAE3BG,UAAWH,EAAII,OACfC,UAAW,IAAIC,KAAKN,EAAIK,WACxBE,iBAAkBP,EAAIO,iBAAmB,IAAInD,KAAI,SAAC4C,GAAD,OAA4BA,EAAIQ,MACjFC,cAAeT,EAAIS,eAAiB,GACpCC,WAAYV,EAAIU,WAAa,IAAItD,KAAI,SAACuD,GAAD,OAAOA,EAAEH,MAC9CI,UAAWZ,EAAIY,WAAa,KAIhC,GAAiB,UAAbZ,EAAIa,KAAkB,CACtB,IAAMC,EAAWd,EACjBC,EAAQ,OAAOC,GAAP,IAAea,YAAaD,EAASC,YAAc,IAAI3D,KAAI,SAAC4D,GAAD,OAAOA,EAAER,YACzE,CACH,IAAMS,EAAajB,EACnBC,EAAQ,OAAOC,GAAP,IAAegB,OAAQD,EAAWC,SAG9C,OAAOjB,EAwBJ,SAASkB,EACZC,EACAP,GAC0B,IAAD,MAUrBZ,EATEC,EAAuC,OACtCkB,GADsC,IAEzCP,OACAR,UAAS,SAAEe,EAAQf,gBAAV,EAAE,EAAmBgB,SAC9Bd,gBAAe,SAAEa,EAAQb,sBAAV,EAAE,EAAyBnD,KAAI,SAACoD,GAAD,MAAiB,CAACA,SAChEE,UAAS,SAAEU,EAAQV,gBAAV,EAAE,EAAmBtD,KAAI,SAACoD,GAAD,MAAiB,CAACA,SACpDC,cAAeW,EAAQX,cAAgBlB,EAAuB6B,EAAQX,oBAAiBtD,IAI3F,GAAa,UAAT0D,EAAkB,CAClB,IAAMS,EAAQF,EACdnB,EAAQ,OAAOC,GAAP,IAAea,YAAaO,EAAMP,YAAc,IAAI3D,KAAI,SAACoD,GAAD,MAAiB,CAACA,eAC/E,CACH,IAAMe,EAAUH,EAChBnB,EAAQ,OAAOC,GAAP,IAAegB,OAAQK,EAAQL,SAG3C,OAAOjB,EAGJ,SAASuB,EAAiBxB,GAC7B,OAAO,OACAA,GADP,IAEIoB,QAASpB,EAAIoB,QAAUrB,EAAoBC,EAAIoB,cAAWjE,IAI3D,SAASsE,EAAiBzB,GAC7B,IAAM0B,EAAwB1B,EAAI2B,SAASvE,KAAI,SAACwE,GAAD,MAA4B,CACvEC,IAAKD,EAAEpB,GACPsB,KAASF,EAAEG,UAAP,IAAoBH,EAAEI,SAC1B5B,OAAQwB,EAAExB,QAAU,GACpB6B,kBAAmBL,EAAEK,kBACrBC,oBAAqBN,EAAEM,oBAAsB,IAAI5B,KAAKsB,EAAEM,qBAAuB,SAI/EC,EAAc,KAClB,GAAInC,EAAImC,YAAa,CACjB,IAAMC,EAA8BpC,EAAImC,YAClCE,EAASX,EAAMY,MAAK,SAACC,GAAD,OAAOA,EAAEV,KAAOO,EAAII,YAC1CH,IAAQF,EAAcM,EAAwBJ,EAAQD,IAG9D,OAAO,OACApC,GADP,IAEI0B,QACAgB,SAAU,GACVP,cACAQ,QAAS,GACTC,kBC5GoD,CAACC,KAAM,EAAGC,cAAc,EAAMC,UAAU,KDgH7F,SAASN,EAAwBO,EAAoBhD,GACxD,OAAO,OACAA,GADP,IAEI6B,IAAK7B,EAAIQ,GACTyC,UAAW,IAAI3C,KAAKN,EAAIkD,WACxBF,SAID,SAASG,EAAwBnD,GACpC,MAAO,CACHoB,QAASrB,EAAoBC,EAAIoB,SACjCzC,OAAQqB,EAAIrB,OACZyE,KAAM,IAAI9C,KAAKN,EAAIoD,MACnB5C,GAAIR,EAAIQ,I,IE7HJ6C,E,SCbL,SAASC,EAAmBpG,EAAamC,EAASkE,GACrD,GAAIA,EAAe,CACfhI,QAAQyD,IAAR,4BAAwC9B,EAAxC,MAGA,IAAMsG,EAAgB,CAClBN,WAAW,IAAI5C,MAAOe,SACtBhC,QAGJoE,IAAaC,QAAQxG,EAAK+B,KAAKC,UAAUsE,KAQ1C,SAASG,IAA6C,IAAD,uBAAtB3G,EAAsB,yBAAtBA,EAAsB,gBACxDzB,QAAQyD,IAAR,4BAAwChC,EAAKI,KAAI,SAACwG,GAAD,UAAWA,EAAX,OAAiBnG,KAAK,MAAvE,KACAgG,IAAaI,YAAY7G,GAQtB,SAAe8G,EAAwB5G,GAAvC,eAAAY,EAAAC,OAAA,kEAAAD,EAAA,MACe2F,IAAaM,QAAQ7G,IADpC,cACG8G,EADH,2BAEIA,GAAM/E,KAAKgF,MAAMD,IAFrB,6D,SDfKX,K,8CAAAA,E,0CAAAA,E,0DAAAA,E,gDAAAA,E,gEAAAA,E,wDAAAA,E,wDAAAA,E,gCAAAA,E,gDAAAA,E,gDAAAA,E,sDAAAA,E,gCAAAA,E,gDAAAA,E,iDAAAA,M,KAoGZ,IEpHYa,EFoHNC,EAA0B,SAACC,GAAD,MAAkE,CAC9FvD,KAAMwC,EAAqBgB,2BAC3BD,WAiBEE,EAAuB,SAAClD,GAAD,MAAuD,CAChFP,KAAMwC,EAAqBkB,uBAC3BnD,YAGSoD,EAAgB,SAACpD,GAAD,OAAyC,SAAOqD,EAAUC,GAAjB,qBAAA5G,EAAAC,OAAA,uDAC5D4G,EAAQD,IAAWE,KAAKD,MADoC,WAAA7G,EAAA,MAE3CF,EAAe,WAAY,OAAQ,GAAIwD,EAASuD,IAFL,QAE5D5F,EAF4D,QAGrDJ,SAAWhD,EAAekJ,UAC7BC,EAAW/F,EAAuCM,KAClD+B,EAAUrB,EAAoB+E,GACpCL,EAASH,EAAqBlD,KANgC,8DA0BhE2D,EAA2B,SAACvF,GAAD,IAAqBwF,EAArB,8DAA4E,CACzGnE,KAAMwC,EAAqB4B,4BAC3BzF,SACAwF,cAmBEE,EAA8B,SAChCxE,GADgC,IAEhCsE,EAFgC,8DAGK,CACrCnE,KAAMwC,EAAqB8B,+BAC3BzE,YACAsE,cAaEI,EAAmB,SAACpC,GAAD,MAAyC,CAC9DnC,KAAMwC,EAAqBgC,mBAC3BrC,SAkBEsC,EAAsB,SAAClE,GAAD,MAAmE,CAC3FP,KAAMwC,EAAqBkC,sBAC3BnE,Y,kBG3OSoE,GAAgB,SAACC,GAAD,OAAyBC,KAAKC,EAAEF,EAAK,CAACG,aAAcH,KAE3EI,GAAe,SAAC,GAAsE,IAArEC,EAAoE,EAApEA,KAAMpH,EAA8D,EAA9DA,YAEzB,MADyE,WAA3CgH,KAAKC,EAAEG,EAAM,CAACF,aAAc,YAC3BlH,EAAcoH,GAG1C,SAASC,GAAuBC,GACnC,GAAIA,EAAKrH,QAAUhD,EAAesK,GAAlC,CACM,IAAD,EACgCD,EAA1BvH,EADN,EACMA,UAAWC,EADjB,EACiBA,YACZwH,EAAiC,CAACC,QAASN,GAAa,CAACC,KAAMrH,EAAWC,gBAAe0F,OAAQ,IAOvG,OANI4B,EAAKrH,QAAUhD,EAAeyK,sBACbJ,EAAVK,OAGAC,SAAQ,SAACC,GAAD,OAAQL,EAAO9B,OAAOmC,EAAEC,UAAYX,GAAaU,EAAEE,MAAM,OAErEP,GAQR,SAASQ,GAAaL,GACzB,OAAKA,EACItJ,OAAOC,KAAKqJ,EAAOjC,QAAQzG,OAAS,OAAG,EACpC0I,EAAOF,aAFN,ECtBV,SAASQ,GAAqBC,EAAejC,GAChD,IAAMkC,EAAoC,CAACD,QAAOjC,SAClDlB,IAAaC,QAAQ,OAAQzE,KAAKC,UAAU2H,IAMzC,SAASC,KACZrD,IAAasD,WAAW,QAOrB,SAAeC,KAAf,eAAAlJ,EAAAC,OAAA,kEAAAD,EAAA,MACe2F,IAAaM,QAAQ,SADpC,cACGC,EADH,2BAEIA,GAAM/E,KAAKgF,MAAMD,IAFrB,6D,SFfKE,K,qCAAAA,E,yCAAAA,E,yCAAAA,E,qCAAAA,E,qCAAAA,E,uBAAAA,E,yCAAAA,E,yDAAAA,E,yDAAAA,E,mDAAAA,E,6DAAAA,E,uDAAAA,E,uDAAAA,E,qDAAAA,E,sDAAAA,M,KAsFZ,IG1FY+C,GH0FNC,GAAgB,SAACN,EAAeO,GAAhB,MAA2D,CAC7EtG,KAAMqD,EAAkBkD,eACxBR,QACAO,aAISE,GAAkB,SAACT,EAAeO,GAAhB,OAA2D,SACtF1C,EACAC,GAFsF,iBAAA5G,EAAAC,OAAA,uDAItF0G,EAASyC,GAAcN,EAAOO,IACxBG,EAAS5C,IAAW6C,SAASC,aAAaF,OALsC,WAAAxJ,EAAA,MAO/DF,EAAe,gBAAiB,OAAQ,GAAI,CAACgJ,QAAOO,WAAUG,YAPC,WAOhFvI,EAPgF,QASzEJ,QAAUhD,EAAesK,GATgD,wBAWlFxB,EAASgD,GADW1I,EACiBM,OAX6C,kBAY3E,CAACqI,SAAS,IAZiE,eAclFjD,EAASkD,MAdyE,kBAe3E,CAACD,SAAS,EAAOrB,OAAQN,GAAuBhH,KAf2B,+DAmBpF0I,GAAkB,SAACzE,GAAD,MAAwC,CAC5DnC,KAAMqD,EAAkB0D,iBACxB5E,SAGE2E,GAAkB,iBAA8B,CAClD9G,KAAMqD,EAAkB2D,mBAKtBC,GAAe,SAACnD,EAAiB3B,EAAY+E,GAA9B,MAAuF,CACxGlH,KAAMqD,EAAkB8D,eACxBrD,QACA3B,OACA+E,2BAGEE,GAAe,iBAA2B,CAC5CpH,KAAMqD,EAAkBgE,iBAyBfC,GAAe,SAACvB,EAAeO,GAAhB,OAA2D,SAAO1C,GAAP,iBAAA3G,EAAAC,OAAA,kEAAAD,EAAA,MAC5DF,EAAe,aAAc,OAAQ,GAAI,CAACgJ,QAAOO,cADW,WAC7EpI,EAD6E,QAGtEJ,QAAUhD,EAAesK,GAH6C,uBAIzEnB,EAAW/F,EAAuCM,KACxDoF,EAASqD,GAAahD,EAAQH,MAAOnD,EAAiBsD,EAAQ9B,OAAO,IALU,kBAMxE,CAAC0E,SAAS,IAN8D,cAQ/EjD,EAASwD,MARsE,kBASxE,CAACP,SAAS,EAAOrB,OAAQN,GAAuBhH,KATwB,+DAa1EqJ,GAAS,iBAAqB,CACvCvH,KAAMqD,EAAkBmE,UAKfC,GAAyB,SAACC,GAAD,OAAuC,SAAO9D,GAAP,mBAAA3G,EAAAC,OAAA,kEAAAD,EAAA,MAClDF,EAAe,cAAe,OAAQ,GAAI,CAAC+G,MAAO4D,KADA,QACnExJ,EADmE,QAG5DJ,QAAUhD,EAAesK,IAC5BnB,EAAW/F,EAAuCM,KACjDuH,EAAS9B,EAAT8B,MACPnC,EAAS+D,GAAuB5B,KAEhCnC,EAASgE,MAR4D,8DAYvED,GAAyB,SAAC5B,GAAD,MAAkD,CAC7E/F,KAAMqD,EAAkBwE,yBACxB9B,UAGE6B,GAAyB,iBAAqC,CAChE5H,KAAMqD,EAAkByE,2BAiBtBC,GAAwB,SAAChC,GAAD,MAAiD,CAC3E/F,KAAMqD,EAAkB2E,wBACxBjC,UAGEkC,GAAwB,iBAAoC,CAC9DjI,KAAMqD,EAAkB6E,0BActBC,GAAuB,iBAAmC,CAC5DnI,KAAMqD,EAAkB+E,yBAetBC,GAAuB,iBAAmC,CAC5DrI,KAAMqD,EAAkBiF,yBAKfC,GAAsB,SAACC,GAAD,MAAkE,CACjGxI,KAAMqD,EAAkBoF,sBACxBD,Y,SGlQQpC,K,+BAAAA,E,qCAAAA,E,iCAAAA,E,6DAAAA,E,8DAAAA,Q,KAqCL,IAAMsC,GAAW,SAACC,EAAiBxE,GAAlB,MACnB,CAACnE,KAAMoG,GAAsBwC,UAAWD,QAAOxE,cAEvC0E,GAAc,iBAA0B,CAAC7I,KAAMoG,GAAsB0C,eAErEC,GAAY,SAACtC,EAAyBtC,GAE/C,OADAU,KAAK4B,OAASA,EACP,CAACzG,KAAMoG,GAAsB4C,WAAYvC,SAAQtC,cAG/C8E,GAAyB,SAClCC,EACAC,GAFkC,MAGF,CAChCnJ,KAAMoG,GAAsBgD,yBAC5BF,cACAC,gBAGSE,GAAyB,SAACH,GAAD,MAAoE,CACtGlJ,KAAMoG,GAAsBkD,yBAC5BJ,gB,UCrDSK,GAAqC,CAC9C,CACIlN,IAAK,aACLmN,OAAQ,SACRC,QAAS,MAEb,CACIpN,IAAK,aACLmN,OAAQ,gBACRC,QAAS,MAEb,CACIpN,IAAK,cACLmN,OAAQ,YACRC,QAAS,MAEb,CACIpN,IAAK,aACLmN,OAAQ,YACRC,QAAS,MAEb,CACIpN,IAAK,YACLmN,OAAQ,kBACRC,QAAS,MAEb,CACIpN,IAAK,aACLmN,OAAQ,WACRC,QAAS,OCjCV,SAASC,GAAsB3D,GAClC,IAAM4D,EAAY5D,EAAM6D,MAAM,KAAK,GAAGA,MAAM,KACtCC,EAAa,SAAC5N,GAAD,OAAgC,GAAdA,EAAIa,OAAcb,EAAMA,EAAI,GAAG6N,cAAgB7N,EAAI8N,MAAM,IAC9F,OAAOJ,EAAU7M,QAAU,EACrB,CACIkN,UAAWH,EAAWF,EAAU,IAChCM,SAAUJ,EAAWF,EAAU,KAEnC,KAQH,SAASO,GAAuBnE,GACnC,IAAM6D,EAAQ7D,EAAM6D,MAAM,KAC1B,GAAIA,EAAM9M,OAAS,EAAG,CAClB,IAAM0M,EAASI,EAAM,GAAGO,OACxB,OAAOZ,GAAqB9H,MAAK,SAAC2I,GAAD,OAAqBA,EAAIZ,QAAUA,MAAW,KAEnF,OAAO,K,qkBCfX,IAeaa,GAA0B,CACnCC,eAAe,EACfxG,MAAO,KACPyG,WAAW,EACXC,cAAe,GACfC,eAAgB,KAChBC,WAAW,EACXC,WAtBmD,CACnDX,UAAW,GACXC,SAAU,GACVzK,UAAW,KACXoL,OAAQ,KACRC,YAAa,KACb7K,KAAM,KACNK,OAAQ,KACRH,WAAY,GACZH,UAAW,GACX+K,YAAa,GACbC,YAAa,GACbrL,gBAAiB,K,mBCzBRsL,GAAoB,CAAC,OAAQ,OAAQ,OAAQ,KAAM,KAAM,OAGzDC,GAAmC,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,UAGxEC,GAAgB,CAAC,UAAW,SAG5BC,GAA2B,CAAC,WAAY,WAAY,iBAAkB,YAAa,SAGnFC,GAAmB,CAAC,SAAU,gBAAiB,kBAAmB,QAAS,QAI3EC,GAAoB,CAAC,OAAQ,SAAU,SCTvCC,GAAyBC,OAAaC,SAAS,uBAAuBzF,MAAM,4BAQ5E0F,GAA4BF,OACpCC,SAAS,uBACTE,IAf8B,EAeL,gCAEzBC,QAAQ,WAAY,+BAEpBA,QAAQ,cAAe,mCAEvBA,QAAQ,cAAe,mCAEvBA,QAAQ,mBAAoB,gCAEpBC,GAA4BL,OACpCC,SAAS,uBACTK,MAAM,CAACN,KAAQ,aAAc,mCAErBO,GAAwBP,OAAaC,SAAS,uBAAuBzF,MAAM,4BAC3EgG,GAA2BR,OAAaC,SAAS,uBAEjDQ,GAAsBT,OAAapB,OAAOqB,SAAS,uBAEnDS,GAAqBV,OAAapB,OAAOqB,SAAS,uBAElDU,GAAiCX,OAAWY,WAAWX,SAAS,uBAChEY,GAA8Bb,OAAaY,WAAWX,SAAS,uBAC/Da,GAAmCd,OAAaY,WAAWX,SAAS,uBACpEc,GAA8Bf,OAAaM,MAAMb,GAAS,uBAC1DuB,GAAiChB,OAAYC,SAAS,4BACtDgB,GAAiCjB,OAAYC,SAAS,4BC1CpD,IACXiB,GAAI,CACAC,QAAS,CACLD,GAAI,UACJE,GAAI,UAERC,QAAS,gBACTC,QAAS,UAETC,OAAQ,CACJC,aAAc,wBAElBC,MAAO,SACPC,UAAW,SACXC,UAAW,UACXC,aAAc,gBACd7G,SAAU,WACV8G,eAAgB,kBAChBC,KAAM,OACNC,eAAgB,kBAChBC,YAAa,eACbC,0BACI,6HACJC,OAAQ,SACRC,GAAI,KACJC,cAAe,+CACfC,KAAM,OACN5D,UAAW,aACXC,SAAU,YACV4D,eAAgB,mBAChBC,MAAO,CACHC,MAAO,CACHC,YACI,iHACJC,YAAa,sDAEjBC,QAAS,UACTC,OAAQ,SACRC,SAAU,CAAC,0CAA2C,OAAQ,MAElEC,QAAS,CACLD,SAAU,CAAC,sCAAuC,OAAQ,MAE9DE,wBAAyB,yCACzBC,gBAAiB,CACbC,WAAY,aACZ3H,QAAS,CAAC,gDAAiD,WAE/D4H,cAAe,iBACfC,WAAY,CACRlD,SAAU,kBACVmD,WAAY,8BACZC,cAAe,2BACf7I,MAAO,CACH8I,QAAS,wCACTC,cAAe,kEAEnBxI,SAAU,CACNyI,SAAS,iDACTC,QAAS,iDACTC,YAAa,gEACbC,YAAa,gEACbC,SAAU,6DACVC,YAAa,gCAEjBC,SAAU,CACNV,WAAY,uCACZW,aAAc,8CAElB/M,KAAM,CACFgN,SAAU,iDACVV,QAAS,+BAGjBpU,MAAO,CACH+U,wBAAyB,0DACzBC,eAAgB,kBAChBC,4BAA6B,+BAC7BC,wBAAyB,kCACzBC,OAAQ,CACJzN,KAAM,CACF4D,MAAO,0CAGf2I,WAAY,CACR3I,MAAO,CACH8J,SAAU,2CAItBC,aAAc,uBACdC,gBAAiB,2BACjBC,OAAQ,oBACRC,KAAM,CACFC,KAAM,OACNC,SAAU,WACVC,UAAW,YACXC,cAAe,iBAEnBC,UAAW,aACXC,YAAa,eACbC,sBAAuB,CACnBC,YAAa,gBACbC,kBAAmB,SACnBC,SAAU,eAEdC,yBAA0B,CACtB,oCAAqC,wCACrCC,UAAW,YACX,kBAAmB,sBACnB,yCAA0C,8CAC1C,8BAA+B,mCAC/B,0CAA2C,+CAC3C,yCAA0C,oDAC1C,yCAA0C,8CAC1C,4CAA6C,kDAC7C,iBAAkB,qBAClBC,SAAU,YAEdpR,gBAAiB,CACb,kCAAmC,sCACnC,oBAAqB,wBACrB,8BAA+B,kCAC/B,oBAAqB,oBACrB,mCAAoC,mCACpC,kDAAmD,kDACnD,+CAAgD,+CAChD,2CAA4C,+CAC5C,qCAAsC,0CACtC,YAAa,YACbqR,YAAa,cACb,wBAAyB,4BACzB,oBAAqB,wBACrB,sBAAuB,0BACvB,oBAAqB,wBACrB,uBAAwB,uBACxB,yBAA0B,6BAC1BC,UAAW,YACX,4BAA6B,gCAC7BC,WAAY,aACZ,6BAA8B,iCAC9B,uBAAwB,2BACxB,uCAAwC,4CACxC,sBAAuB,0BACvB,4BAA6B,iCAC7B,4BAA6B,gCAC7B,wBAAyB,4BACzB,0BAA2B,8BAC3B,yBAA0B,6BAC1B,cAAe,cACfC,IAAK,MACLC,QAAS,UACTC,aAAc,eACd,yBAA0B,yBAC1B,gCAAiC,oCACjCC,UAAW,YACX,iBAAkB,iBAClBC,QAAS,UACTC,YAAa,cACbC,WAAY,aACZ,eAAgB,eAChB,yCAA0C,iDAC1C,6CAA8C,qDAC9C,iCAAkC,qCAClC,sCAAuC,sCACvC,qBAAsB,yBACtB,yBAA0B,6BAC1B,yBAA0B,6BAC1B,gCAAiC,qCACjC,kBAAmB,kBACnBC,UAAW,6CACXC,SAAU,2CACV,oBAAqB,wBACrB,6BAA8B,iCAC9B,6BAA8B,iCAC9B,4BAA6B,gCAC7BC,aAAc,eACdC,SAAU,WACVC,UAAW,YACXC,WAAY,aACZ,iBAAkB,iBAClBC,SAAU,WACV,oBAAqB,wBACrB,0CAA2C,8CAC3C,yBAA0B,6BAC1BC,SAAU,WACV,6CAA8C,qDAC9C,oBAAqB,oBACrB,uBAAwB,2BACxB,6BAA8B,kCAC9BC,OAAQ,SACR,yBAA0B,8BAC1B,uBAAwB,uBACxB,6BAA8B,iCAC9B,mBAAoB,uBACpB,iCAAkC,qCAClC,qBAAsB,sBAE1BC,aAAc,iBACdC,QAAS,CACLC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,GAAI,KACJC,GAAI,KACJC,IAAK,OAET5H,YAAa,cACb6H,WAAY,aACZC,OAAQ,SACRC,cAAe,iBACfC,0BAA2B,SAC3BC,YAAa,OACbC,aAAc,QACdC,SAAU,CACNtS,QAAS,UACTD,MAAO,SAEXP,WAAY,CACR+S,SAAU,WACVC,SAAU,WACVC,eAAgB,iBAChBC,UAAW,YACXC,MAAO,SAEXzI,OAAQ,SACR0I,QAAS,CACLC,KAAM,OACNC,OAAQ,SACRH,MAAO,SAEXI,YAAa,gBACbC,OAAQ,CACJC,EAAG,UACHC,EAAG,WACHC,EAAG,QACHC,EAAG,QACHC,EAAG,MACHC,EAAG,OACHC,EAAG,OACHC,EAAG,SACHC,EAAG,YACHC,EAAG,UACHC,GAAI,WACJC,GAAI,YAERC,kBAAmB,sBACnBC,MAAO,QACPC,aAAc,CACV,aAAc,yBACd,aAAc,qCACd,cAAe,4BACf,aAAc,sBACd,YAAa,qBACb,aAAc,uBAElBC,mBAAoB,CAChBjE,YAAa,sBACbC,kBAAmB,SACnBC,SAAU,eAEdgE,OAAQ,UACRhK,WAAY,CACR1J,KAAM,CACF2T,MAAO,UACPC,SACI,6GAERC,aAAc,CACVF,MAAO,WAEXvF,SAAU,CACNuF,MAAO,aAEX/U,UAAW,CACP+U,MAAO,aAEXG,KAAM,CACFH,MAAO,aAEXI,cAAe,CACXtU,QAAS,CACLkU,MAAO,uBAEXnU,MAAO,CACHmU,MAAO,gBAGfK,WAAY,CACRL,MAAO,OACPC,SAAU,0CAEdK,eAAgB,CACZN,MAAO,WACPC,SAAU,kCAEdM,kBAAmB,CACfP,MAAO,cACPC,SAAU,qDAEdO,OAAQ,CACJR,MAAO,qBACPS,KACI,wYAERC,OAAQ,CACJV,MAAO,cACPS,KACI,uYAERE,OAAQ,CACJX,MAAO,UACPS,KACI,6TAERG,OAAQ,SACRC,WAAY,cACZC,eAAgB,wCAChBC,KAAM,CACFf,MAAO,mBACPS,KAAM,qDACN5H,OAAQ,SACRmI,IAAK,QAGbC,gBAAiB,mBACjBC,eAAgB,CACZC,kBAAmB,WACnBC,oBAAqB,mBACrBtF,kBAAmB,uBACnBC,SAAU,eAEdsF,oBAAqB,CACjBxF,YAAa,SAEjByF,eAAgB,CACZC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,OAAQ,UAEZC,cAAe,CACXC,GAAI,OACJC,GAAI,YACJC,GAAI,UACJC,GAAI,YACJC,GAAI,OACJC,GAAI,UACJC,GAAI,YACJC,GAAI,SACJC,GAAI,WACJC,GAAI,SACJC,GAAI,SACJC,GAAI,cACJC,GAAI,UACJC,GAAI,aACJC,GAAI,YACJC,GAAI,mBACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,SACJC,GAAI,UACJC,GAAI,sBACJC,GAAI,UACJC,GAAI,WACJC,GAAI,WACJC,GAAI,OACJC,GAAI,QACJC,GAAI,2CACJC,GAAI,UACJC,GAAI,QACJC,GAAI,SACJC,GAAI,SACJC,GAAI,+BACJC,GAAI,WACJC,GAAI,MACJC,GAAI,QACJtM,GAAI,UACJuM,GAAI,YACJC,GAAI,UACJC,GAAI,WACJC,GAAI,SACJC,GAAI,UACJC,GAAI,QACJC,GAAI,UACJC,GAAI,SACJC,GAAI,UACJ7M,GAAI,SACJ8M,GAAI,kBACJC,GAAI,QACJC,GAAI,kBACJC,GAAI,WACJC,GAAI,UACJC,GAAI,WACJC,GAAI,OACJC,GAAI,QACJC,GAAI,SACJC,GAAI,QACJC,GAAI,YACJC,GAAI,WACJC,GAAI,iBACJC,GAAI,YACJC,GAAI,WACJC,GAAI,SACJC,GAAI,cACJ9a,GAAI,aACJ+a,GAAI,2BACJC,GAAI,OACJC,GAAI,qBACJC,GAAI,UACJC,GAAI,MACJC,GAAI,YACJC,GAAI,UACJC,GAAI,YACJC,GAAI,WACJC,GAAI,WACJC,GAAI,WACJC,GAAI,QACJC,GAAI,kBACJC,GAAI,sBACJC,GAAI,SACJC,GAAI,4BACJC,GAAI,gBACJC,GAAI,UACJC,GAAI,SACJC,GAAI,SACJC,GAAI,WACJC,GAAI,UACJC,GAAI,OACJC,GAAI,UACJC,GAAI,mBACJC,GAAI,QACJC,GAAI,gCACJC,GAAI,QACJC,GAAI,qCACJC,GAAI,UACJC,GAAI,MACJC,GAAI,aACJC,GAAI,eACJC,GAAI,UACJC,GAAI,WACJC,GAAI,cACJC,GAAI,QACJC,GAAI,aACJC,GAAI,YACJC,GAAI,YACJC,GAAI,UACJC,GAAI,QACJC,GAAI,UACJC,GAAI,UACJC,GAAI,QACJC,GAAI,sBACJC,GAAI,gBACJC,GAAI,SACJC,GAAI,SACJC,GAAI,kBACJC,GAAI,oBACJC,GAAI,YACJC,GAAI,gBACJC,GAAI,kBACJC,GAAI,4BACJC,GAAI,UACJC,GAAI,SACJC,GAAI,QACJC,GAAI,QACJC,GAAI,qBACJC,GAAI,oBACJC,GAAI,OACJC,GAAI,SACJC,GAAI,kBACJC,GAAI,aACJC,GAAI,UACJC,GAAI,aACJC,GAAI,UACJC,GAAI,QACJC,GAAI,uBACJC,GAAI,UACJC,GAAI,cACJC,GAAI,WACJC,GAAI,YACJC,GAAI,SACJC,GAAI,gBACJC,GAAI,QACJC,GAAI,iBACJC,GAAI,sBACJC,GAAI,SACJC,GAAI,YACJC,GAAI,SACJC,GAAI,QACJC,GAAI,SACJC,GAAI,WACJC,GAAI,UACJC,GAAI,QACJC,GAAI,iBACJC,GAAI,YACJC,GAAI,UACJC,GAAI,UACJC,GAAI,QACJC,GAAI,SACJC,GAAI,QACJC,GAAI,OACJC,GAAI,WACJC,GAAI,UACJC,GAAI,UACJC,GAAI,SACJC,GAAI,wBACJC,GAAI,UACJC,GAAI,SACJC,GAAI,QACJC,GAAI,MACJC,GAAI,WACJC,GAAI,kBACJC,GAAI,YACJC,GAAI,OACJC,GAAI,QACJC,GAAI,QACJC,GAAI,aACJC,GAAI,aACJC,GAAI,UACJC,GAAI,QACJC,GAAI,QACJC,GAAI,UACJC,GAAI,SACJC,GAAI,kBACJC,GAAI,UACJC,GAAI,QAERpiB,UAAW,YACXqiB,gBAAiB,mBACjBC,gBAAiB,CACb1R,YAAa,mBACbC,kBAAmB,SACnBC,SAAU,eAEdyR,cAAe,CACX,oBAAqB,oBACrB,sBAAuB,sBACvB,cAAe,cACf,aAAc,aACdC,MAAO,QACPC,SAAU,WACVrQ,OAAQ,SACRsQ,OAAQ,SACRC,MAAO,QACPC,IAAK,MACLC,IAAK,MACLC,WAAY,aACZC,YAAa,cACbC,QAAS,UACTC,SAAU,WACVC,aAAc,gBACdC,QAAS,UACTC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACR,eAAgB,eAChB,eAAgB,eAChB,cAAe,cACf,YAAa,YACb,cAAe,cACf,aAAc,aACd,eAAgB,eAChB,aAAc,aACd,kBAAmB,kBACnB,iBAAkB,iBAClB,uBAAwB,uBACxBC,SAAU,WACVC,IAAK,MACLC,QAAS,UACTC,aAAc,eACdC,UAAW,YACXC,UAAW,YACXC,SAAU,WACVC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,KAAM,OACNC,IAAK,MACLC,OAAQ,SACRC,QAAS,UACTC,MAAO,QACPC,QAAS,UACTC,SAAU,WACVC,OAAQ,SACRC,OAAQ,SACRC,UAAW,YACXC,OAAQ,SACRC,QAAS,UACTC,QAAS,UACTC,SAAU,WACVC,KAAM,OACNC,UAAW,YACXC,SAAU,WACVC,QAAS,UACTC,iBAAkB,mBAClBC,SAAU,WACVC,QAAS,UACTC,OAAQ,SACRC,QAAS,UACTC,KAAM,OACNC,YAAa,cACbC,SAAU,WACVC,aAAc,eACdC,QAAS,UACTC,SAAU,WACVC,QAAS,UACTC,aAAc,eACdC,QAAS,UACTC,UAAW,YACXC,SAAU,WACVC,QAAS,UACTC,WAAY,aACZC,QAAS,UACTC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,MAAO,QACPC,UAAW,YACXC,aAAc,eACdC,UAAW,YACXC,QAAS,UACTC,SAAU,WACVC,YAAa,cACbC,MAAO,QACPC,MAAO,QACP,cAAe,cACf,YAAa,YACb,YAAa,aAEjBC,gBAAiB,CACbC,KAAM,OACNC,SAAU,WACVC,YAAa,eAEjBxoB,OAAQ,SACRyoB,UAAW,CACP,eAAgB,CACZnmB,KAAM,eACNomB,KAAM,wEAEV,kBAAmB,CACfpmB,KAAM,kBACNomB,KAAM,mDAEV,uBAAwB,CACpBpmB,KAAM,uBACNomB,KAAM,iDAEV,sBAAuB,CACnBpmB,KAAM,uBACNomB,KAAM,iDAEV,4BAA6B,CACzBpmB,KAAM,4BACNomB,KAAM,uFAEV,kBAAmB,CACfpmB,KAAM,kBACNomB,KAAM,iEAEV,kBAAmB,CACfpmB,KAAM,kBACNomB,KAAM,qFAIdC,QAAS,CACLjS,KAAM,+FACNkS,cAAe,2FACfC,OAAQ,WAGZC,MAAO,CACHC,QACI,+GACJF,OAAQ,SAGZG,cAAe,CACXC,OAAQ,SACRC,OAAQ,UACRhT,SAAU,mEAGdiT,UAAW,CACPlT,MAAO,gBACPmT,MAAO,SACPF,OAAQ,UACRzJ,GAAI,MAGR4J,QAAS,CACLC,WACI,uQACJC,UAAW,iBACXC,UAAW,YACXjf,YAAa,CACTnF,KAAM,CACF9C,KAAM,iBACNpD,YAAa,0EAEjBuqB,MAAO,CACHnnB,KAAM,QACNpD,YAAa,sEAEjB6I,SAAU,CAACzF,KAAM,WAAYpD,YAAa,kDAIlDwqB,OAAQ,CACJzT,MAAO,SACPvH,KAAM,OACNI,OAAQ,SACR6a,KAAM,cACNC,IAAK,OACLC,gBAAiB,kBACjBC,MAAO,CACHC,SAAU,WACVC,OAAQ,SACRC,WAAY,aACZ,sBAAuB,sBACvB,cAAe,cACf,iBAAkB,iBAClBvV,MAAO,SAEXwV,kBAAmB,YACnBC,aAAc,yDACdC,aAAc,QACdC,QAAS,0CAGbC,cAAe,CACXC,aAAc,0EACdtU,MAAO,+BACPuU,OAAQ,OACRtiB,QAAS,mCAGbuiB,cAAe,CACXxU,MAAO,sBACP8S,QACI,qOACJyB,OAAQ,SACRE,SAAU,gEACVC,SAAU,8BACVC,MAAO,QACPC,WAAY,6BAGhBpZ,UAAW,CACPqZ,UAAW,2DAGftZ,SAAU,CACNuZ,UAAW,mBACXC,gBAAiB,oCACjBC,UAAW,CACPC,eAAgB,UAChBC,YAAa,SAEjBC,WAAY,OACZC,WAAY,OACZnjB,QAAS,CACL+N,MAAO,iBACPqV,KAAM,iBACNC,SAAU,kBAEdC,QAAS,CACLrsB,OAAQ,CACJssB,UAAW,QACXC,SAAU,SACVC,QAAS,WAEbC,QAAS,CACLlC,OAAQ,SACR5a,OAAQ,CACJ2c,UAAW,cACXC,SAAU,cACVC,QAAS,gBAEb7C,MAAO,SAEXiC,UAAW,mBACXC,gBAAiB,sCAIzBppB,QAAS,CACLinB,OAAQ,CACJyC,KAAM,OACNO,KAAM,OACN/C,MAAO,QACPH,QAAS,UACTe,OAAQ,UAEZoC,iBAAkB,uBAEtBC,aAAc,CACVC,OAAQ,mBACRC,cAAe,UACfC,YAAa,QACbC,qBAAsB,kBACtBC,aAAc,UACdC,qBAAsB,UACtBC,6BAA8B,UAC9BC,yBAA0B,UAC1BC,0BAA2B,UAC3BC,qBAAsB,UACtBC,6BAA8B,UAC9BC,wBAAyB,WACzBC,wBAAyB,cACzBC,wBAAyB,OACzBC,uBAAwB,qBACxBC,wBAAyB,iBACzBC,gBAAiB,WACjBC,WAAY,OACZC,cAAe,OACfC,kBAAmB,QACnBC,qBAAsB,UACtBC,mBAAoB,UACpBC,uBAAwB,gBACxBC,gBAAiB,UACjBC,cAAe,UACfC,eAAgB,WAChBC,oBAAqB,iBACrBC,2BAA4B,kBAC5BC,0BAA2B,wBAC3BC,oBAAqB,wBACrBC,oBAAqB,sBACrBC,2BAA4B,iBAC5BC,2BAA4B,0BAC5BC,eAAgB,YAChBC,mBAAoB,SACpBC,8BAA+B,mBAGnCpmB,SAAU,CACNqmB,SAAU,CACNznB,QAAS,UACT0nB,OAAQ,cACRC,MAAO,SAEX5d,SAAU,WACV6d,UAAW,aACX9D,cAAe,iBACf+D,gBAAiB,oBACjBhyB,QAAS,UACTiyB,eAAgB,mBAChBC,WAAY,eACZ1Y,OAAQ,UACR2Y,iBAAkB,sBAG1B3gB,GAAI,CACAD,QAAS,CACLD,GAAI,UACJE,GAAI,eAERC,QAAS,gBACTC,QAAS,YACTG,MAAO,YACPugB,OAAQ,cACRpgB,aAAc,gBACd7G,SAAU,eACVgH,eAAgB,yBAChBuF,0BAA2B,QCp2BtB2a,GAAuC,CAAC,KAAM,MAEpD,SAASC,KACZ,OAAOD,GAAkB/rB,MAAK,SAACisB,GAAD,OAAwBA,GAAKC,SAAwB,KCPhF,IAAMC,GAA4B,CACrC,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,M,qkBC9KJ,SAASC,GAA0BpnB,GAC/B,IAAMqnB,EAAOC,GACPrX,EAAiBoX,EAAKrnB,GAAQiQ,eAAiBoX,EAAI,GAAOpX,cAChE,OAAOkX,GAAgBrxB,KAAI,SAAC0I,GAAD,MAAmB,CAC1C+oB,MAAOtX,EAAczR,IAAd,wBAA+CA,EAA/C,IACPgpB,MAAOhpB,MAIR,IAAMoF,GAA8B,CACvC1D,aAAc,CACVgC,MAAO,QACPlC,OAAQgnB,KACRzF,QAAS,CACLjkB,MAAM,EACNqkB,OAAO,EACP1hB,UAAU,GAEdwnB,kBAAmB,MAEvBC,uBAAwBN,GAA0BJ,O,qkBClB/C,IC+EKW,GD/EC/jB,GAA6B,CACtClI,KAAM,KACNxD,OAAQ,GACR0vB,kBAAmB,IAAIC,IACvBzuB,UAAW,K,SC2EHuuB,K,oBAAAA,E,0BAAAA,E,aAAAA,Q,KA+BL,IA+DKG,GA/DCC,GAAiB,SAAC5vB,GAA6C,IAAhC6vB,EAA+B,wDACjEC,EAAYD,GAAO7vB,EAAE+vB,kBACrBC,EAAUH,GAAO7vB,EAAEiwB,uBACzB,MAAO,CACHC,QAASlwB,EAAEe,GACXd,YAAa6vB,EACb5vB,UAAW4vB,EACX3vB,WAAY2vB,EACZzvB,aAAc2vB,EACd5vB,WAAY4vB,K,SAsDRL,K,oBAAAA,E,kBAAAA,E,kBAAAA,E,uBAAAA,Q,KAML,IClLKQ,GDkLC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","file":"static/js/app.86fc5f92.chunk.js","sourcesContent":["/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/expo-service-worker.js', { scope: '/' })\n      .then(function (info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function (error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Regular.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Thin.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Light.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-SemiBold.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/Raleway-Bold.ttf\";","/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nimport Constants from \"expo-constants\";\r\nimport {NavigatorRoute} from \"../navigation/types\";\r\n\r\nexport enum Environment {\r\n    Staging = \"STAGING\",\r\n    Production = \"PRODUCTION\",\r\n}\r\n\r\nconst extra = Constants.manifest.extra;\r\n\r\nexport const APP_VERSION: string = Constants.manifest.version!;\r\nexport const APP_SCHEME: string = Constants.manifest.scheme;\r\nexport const ENVIRONMENT: Environment = extra.TARGET;\r\nexport const DEBUG_MODE: boolean = extra.DEBUG;\r\nexport const CLIENT_URL: string = extra.CLIENT_URL;\r\nexport const SERVER_HOST: string = extra.SERVER_HOST;\r\nexport const BACKEND_URL: string = extra.SERVER_URL;\r\n\r\n/**\r\n * Specify the quality of compression, from 0 to 1.\r\n * 0 means compress for small size, 1 means compress for maximum quality.\r\n */\r\nexport const AVATAR_QUALITY = 0.75;\r\n\r\n/**\r\n * The number of resources fetched per request when scrolling in infinite scrolling containers.\r\n */\r\nexport const PROFILES_FETCH_LIMIT = 8; // Matching tab\r\nexport const ROOMS_FETCH_LIMIT = 10; // Messaging tab\r\nexport const MESSAGES_FETCH_LIMIT = 12; // Chat\r\nexport const HISTORY_FETCH_LIMIT = 12; // Match history tab\r\n\r\n/**\r\n * The buffer delay before sending a remote request when typing in a search bar (ms).\r\n */\r\nexport const SEARCH_BUFFER_DELAY = 250;\r\n\r\n/**\r\n * The maximum number of spoken languages a user can select.\r\n */\r\nexport const MAX_SPOKEN_LANGUAGES = 8;\r\n\r\n/**\r\n * The navigation routes that require a connection to the chat socket.\r\n */\r\nexport const CHAT_CONNECTED_ROUTES: NavigatorRoute[] = [\"ChatScreen\", \"ChatRoomsScreen\"];\r\n\r\n/**\r\n * The time before we ask the user to consent for cookies again.\r\n */\r\nexport const COOKIE_CONSENT_DURATION = 365 * 24 * 60 * 60;\r\n\r\n/**\r\n * The amount of time before we fall back to the web version when trying to\r\n * redirect to the app.\r\n */\r\nexport const WEB_TO_APP_TIMEOUT = 5000;\r\n","/**\r\n * Hypertext Transfer Protocol (HTTP) response status codes.\r\n * @see {@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}\r\n * @see {@link https://gist.github.com/scokmen/f813c904ef79022e84ab2409574d1b45}\r\n */\r\nexport enum HttpStatusCode {\r\n    /**\r\n     * The server has received the request headers and the client should proceed to send the request body\r\n     * (in the case of a request for which a body needs to be sent; for example, a POST request).\r\n     * Sending a large request body to a server after a request has been rejected for inappropriate headers would be inefficient.\r\n     * To have a server check the request's headers, a client must send Expect: 100-continue as a header in its initial request\r\n     * and receive a 100 Continue status code in response before sending the body. The response 417 Expectation Failed indicates the request should not be continued.\r\n     */\r\n    CONTINUE = 100,\r\n\r\n    /**\r\n     * The requester has asked the server to switch protocols and the server has agreed to do so.\r\n     */\r\n    SWITCHING_PROTOCOLS = 101,\r\n\r\n    /**\r\n     * A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request.\r\n     * This code indicates that the server has received and is processing the request, but no response is available yet.\r\n     * This prevents the client from timing out and assuming the request was lost.\r\n     */\r\n    PROCESSING = 102,\r\n\r\n    /**\r\n     * Standard response for successful HTTP requests.\r\n     * The actual response will depend on the request method used.\r\n     * In a GET request, the response will contain an entity corresponding to the requested resource.\r\n     * In a POST request, the response will contain an entity describing or containing the result of the action.\r\n     */\r\n    OK = 200,\r\n\r\n    /**\r\n     * The request has been fulfilled, resulting in the creation of a new resource.\r\n     */\r\n    CREATED = 201,\r\n\r\n    /**\r\n     * The request has been accepted for processing, but the processing has not been completed.\r\n     * The request might or might not be eventually acted upon, and may be disallowed when processing occurs.\r\n     */\r\n    ACCEPTED = 202,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The server is a transforming proxy that received a 200 OK from its origin,\r\n     * but is returning a modified version of the origin's response.\r\n     */\r\n    NON_AUTHORITATIVE_INFORMATION = 203,\r\n\r\n    /**\r\n     * The server successfully processed the request and is not returning any content.\r\n     */\r\n    NO_CONTENT = 204,\r\n\r\n    /**\r\n     * The server successfully processed the request, but is not returning any content.\r\n     * Unlike a 204 response, this response requires that the requester reset the document view.\r\n     */\r\n    RESET_CONTENT = 205,\r\n\r\n    /**\r\n     * The server is delivering only part of the resource (byte serving) due to a range header sent by the client.\r\n     * The range header is used by HTTP clients to enable resuming of interrupted downloads,\r\n     * or split a download into multiple simultaneous streams.\r\n     */\r\n    PARTIAL_CONTENT = 206,\r\n\r\n    /**\r\n     * The message body that follows is an XML message and can contain a number of separate response codes,\r\n     * depending on how many sub-requests were made.\r\n     */\r\n    MULTI_STATUS = 207,\r\n\r\n    /**\r\n     * The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response,\r\n     * and are not being included again.\r\n     */\r\n    ALREADY_REPORTED = 208,\r\n\r\n    /**\r\n     * The server has fulfilled a request for the resource,\r\n     * and the response is a representation of the result of one or more instance-manipulations applied to the current instance.\r\n     */\r\n    IM_USED = 226,\r\n\r\n    /**\r\n     * Indicates multiple options for the resource from which the client may choose (via agent-driven content negotiation).\r\n     * For example, this code could be used to present multiple video format options,\r\n     * to list files with different filename extensions, or to suggest word-sense disambiguation.\r\n     */\r\n    MULTIPLE_CHOICES = 300,\r\n\r\n    /**\r\n     * This and all future requests should be directed to the given URI.\r\n     */\r\n    MOVED_PERMANENTLY = 301,\r\n\r\n    /**\r\n     * This is an example of industry practice contradicting the standard.\r\n     * The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect\r\n     * (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302\r\n     * with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307\r\n     * to distinguish between the two behaviours. However, some Web applications and frameworks\r\n     * use the 302 status code as if it were the 303.\r\n     */\r\n    FOUND = 302,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The response to the request can be found under another URI using a GET method.\r\n     * When received in response to a POST (or PUT/DELETE), the client should presume that\r\n     * the server has received the data and should issue a redirect with a separate GET message.\r\n     */\r\n    SEE_OTHER = 303,\r\n\r\n    /**\r\n     * Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.\r\n     * In such case, there is no need to retransmit the resource since the client still has a previously-downloaded copy.\r\n     */\r\n    NOT_MODIFIED = 304,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The requested resource is available only through a proxy, the address for which is provided in the response.\r\n     * Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons.\r\n     */\r\n    USE_PROXY = 305,\r\n\r\n    /**\r\n     * No longer used. Originally meant \"Subsequent requests should use the specified proxy.\"\r\n     */\r\n    SWITCH_PROXY = 306,\r\n\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * In this case, the request should be repeated with another URI; however, future requests should still use the original URI.\r\n     * In contrast to how 302 was historically implemented, the request method is not allowed to be changed when reissuing the original request.\r\n     * For example, a POST request should be repeated using another POST request.\r\n     */\r\n    TEMPORARY_REDIRECT = 307,\r\n\r\n    /**\r\n     * The request and all future requests should be repeated using another URI.\r\n     * 307 and 308 parallel the behaviors of 302 and 301, but do not allow the HTTP method to change.\r\n     * So, for example, submitting a form to a permanently redirected resource may continue smoothly.\r\n     */\r\n    PERMANENT_REDIRECT = 308,\r\n\r\n    /**\r\n     * The server cannot or will not process the request due to an apparent client error\r\n     * (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing).\r\n     */\r\n    BAD_REQUEST = 400,\r\n\r\n    /**\r\n     * Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet\r\n     * been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the\r\n     * requested resource. See Basic access authentication and Digest access authentication. 401 semantically means\r\n     * \"unauthenticated\",i.e. the user does not have the necessary credentials.\r\n     */\r\n    UNAUTHORIZED = 401,\r\n\r\n    /**\r\n     * Reserved for future use. The original intention was that this code might be used as part of some form of digital\r\n     * cash or micro payment scheme, but that has not happened, and this code is not usually used.\r\n     * Google Developers API uses this status if a particular developer has exceeded the daily limit on requests.\r\n     */\r\n    PAYMENT_REQUIRED = 402,\r\n\r\n    /**\r\n     * The request was valid, but the server is refusing action.\r\n     * The user might not have the necessary permissions for a resource.\r\n     */\r\n    FORBIDDEN = 403,\r\n\r\n    /**\r\n     * The requested resource could not be found but may be available in the future.\r\n     * Subsequent requests by the client are permissible.\r\n     */\r\n    NOT_FOUND = 404,\r\n\r\n    /**\r\n     * A request method is not supported for the requested resource;\r\n     * for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.\r\n     */\r\n    METHOD_NOT_ALLOWED = 405,\r\n\r\n    /**\r\n     * The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.\r\n     */\r\n    NOT_ACCEPTABLE = 406,\r\n\r\n    /**\r\n     * The client must first authenticate itself with the proxy.\r\n     */\r\n    PROXY_AUTHENTICATION_REQUIRED = 407,\r\n\r\n    /**\r\n     * The server timed out waiting for the request.\r\n     * According to HTTP specifications:\r\n     * \"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.\"\r\n     */\r\n    REQUEST_TIMEOUT = 408,\r\n\r\n    /**\r\n     * Indicates that the request could not be processed because of conflict in the request,\r\n     * such as an edit conflict between multiple simultaneous updates.\r\n     */\r\n    CONFLICT = 409,\r\n\r\n    /**\r\n     * Indicates that the resource requested is no longer available and will not be available again.\r\n     * This should be used when a resource has been intentionally removed and the resource should be purged.\r\n     * Upon receiving a 410 status code, the client should not request the resource in the future.\r\n     * Clients such as search engines should remove the resource from their indices.\r\n     * Most use cases do not require clients and search engines to purge the resource, and a \"404 Not Found\" may be used instead.\r\n     */\r\n    GONE = 410,\r\n\r\n    /**\r\n     * The request did not specify the length of its content, which is required by the requested resource.\r\n     */\r\n    LENGTH_REQUIRED = 411,\r\n\r\n    /**\r\n     * The server does not meet one of the preconditions that the requester put on the request.\r\n     */\r\n    PRECONDITION_FAILED = 412,\r\n\r\n    /**\r\n     * The request is larger than the server is willing or able to process. Previously called \"Request Entity Too Large\".\r\n     */\r\n    PAYLOAD_TOO_LARGE = 413,\r\n\r\n    /**\r\n     * The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request,\r\n     * in which case it should be converted to a POST request.\r\n     * Called \"Request-URI Too Long\" previously.\r\n     */\r\n    URI_TOO_LONG = 414,\r\n\r\n    /**\r\n     * The request entity has a media type which the server or resource does not support.\r\n     * For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format.\r\n     */\r\n    UNSUPPORTED_MEDIA_TYPE = 415,\r\n\r\n    /**\r\n     * The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.\r\n     * For example, if the client asked for a part of the file that lies beyond the end of the file.\r\n     * Called \"Requested Range Not Satisfiable\" previously.\r\n     */\r\n    RANGE_NOT_SATISFIABLE = 416,\r\n\r\n    /**\r\n     * The server cannot meet the requirements of the Expect request-header field.\r\n     */\r\n    EXPECTATION_FAILED = 417,\r\n\r\n    /**\r\n     * This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol,\r\n     * and is not expected to be implemented by actual HTTP servers. The RFC specifies this code should be returned by\r\n     * teapots requested to brew coffee. This HTTP status is used as an Easter egg in some websites, including Google.com.\r\n     */\r\n    I_AM_A_TEAPOT = 418,\r\n\r\n    /**\r\n     * The request was directed at a server that is not able to produce a response (for example because a connection reuse).\r\n     */\r\n    MISDIRECTED_REQUEST = 421,\r\n\r\n    /**\r\n     * The request was well-formed but was unable to be followed due to semantic errors.\r\n     */\r\n    UNPROCESSABLE_ENTITY = 422,\r\n\r\n    /**\r\n     * The resource that is being accessed is locked.\r\n     */\r\n    LOCKED = 423,\r\n\r\n    /**\r\n     * The request failed due to failure of a previous request (e.g., a PROPPATCH).\r\n     */\r\n    FAILED_DEPENDENCY = 424,\r\n\r\n    /**\r\n     * The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.\r\n     */\r\n    UPGRADE_REQUIRED = 426,\r\n\r\n    /**\r\n     * The origin server requires the request to be conditional.\r\n     * Intended to prevent \"the 'lost update' problem, where a client\r\n     * GETs a resource's state, modifies it, and PUTs it back to the server,\r\n     * when meanwhile a third party has modified the state on the server, leading to a conflict.\"\r\n     */\r\n    PRECONDITION_REQUIRED = 428,\r\n\r\n    /**\r\n     * The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.\r\n     */\r\n    TOO_MANY_REQUESTS = 429,\r\n\r\n    /**\r\n     * The server is unwilling to process the request because either an individual header field,\r\n     * or all the header fields collectively, are too large.\r\n     */\r\n    REQUEST_HEADER_FIELDS_TOO_LARGE = 431,\r\n\r\n    /**\r\n     * A server operator has received a legal demand to deny access to a resource or to a set of resources\r\n     * that includes the requested resource. The code 451 was chosen as a reference to the novel Fahrenheit 451.\r\n     */\r\n    UNAVAILABLE_FOR_LEGAL_REASONS = 451,\r\n\r\n    /**\r\n     * A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.\r\n     */\r\n    INTERNAL_SERVER_ERROR = 500,\r\n\r\n    /**\r\n     * The server either does not recognize the request method, or it lacks the ability to fulfill the request.\r\n     * Usually this implies future availability (e.g., a new feature of a web-service API).\r\n     */\r\n    NOT_IMPLEMENTED = 501,\r\n\r\n    /**\r\n     * The server was acting as a gateway or proxy and received an invalid response from the upstream server.\r\n     */\r\n    BAD_GATEWAY = 502,\r\n\r\n    /**\r\n     * The server is currently unavailable (because it is overloaded or down for maintenance).\r\n     * Generally, this is a temporary state.\r\n     */\r\n    SERVICE_UNAVAILABLE = 503,\r\n\r\n    /**\r\n     * The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.\r\n     */\r\n    GATEWAY_TIMEOUT = 504,\r\n\r\n    /**\r\n     * The server does not support the HTTP protocol version used in the request\r\n     */\r\n    HTTP_VERSION_NOT_SUPPORTED = 505,\r\n\r\n    /**\r\n     * Transparent content negotiation for the request results in a circular reference.\r\n     */\r\n    VARIANT_ALSO_NEGOTIATES = 506,\r\n\r\n    /**\r\n     * The server is unable to store the representation needed to complete the request.\r\n     */\r\n    INSUFFICIENT_STORAGE = 507,\r\n\r\n    /**\r\n     * The server detected an infinite loop while processing the request.\r\n     */\r\n    LOOP_DETECTED = 508,\r\n\r\n    /**\r\n     * Further extensions to the request are required for the server to fulfill it.\r\n     */\r\n    NOT_EXTENDED = 510,\r\n\r\n    /**\r\n     * The client needs to authenticate to gain network access.\r\n     * Intended for use by intercepting proxies used to control access to the network (e.g., \"captive portals\" used\r\n     * to require agreement to Terms of Service before granting full Internet access via a Wi-Fi hotspot).\r\n     */\r\n    NETWORK_AUTHENTICATION_REQUIRED = 511,\r\n}\r\n","import {Alert} from \"react-native\";\r\nimport {BACKEND_URL} from \"../constants/config\";\r\nimport {HttpStatusCode} from \"../constants/http-status\";\r\nimport {RequestResponse, TokenDto} from \"./dto\";\r\n\r\n// Request-related types\r\ntype Primitive = string | number | boolean | Primitive[] | undefined;\r\ntype URLParams = {[key: string]: Primitive};\r\ntype URLBodyParams = {[key: string]: Primitive | Primitive[] | URLBodyParams | URLBodyParams[]};\r\n\r\nfunction encodeURIPrimitive(v: Primitive): string {\r\n    return Array.isArray(v)\r\n        ? v.map((v) => encodeURIPrimitive(v)).join(\",\")\r\n        : encodeURIComponent(v as string | number | boolean);\r\n}\r\n\r\n/**\r\n * Encode parameters for an HTTP request (e.g. param1=value1&param2=value2)\r\n * @param args - A map that contains argument keys and associated values.\r\n * @returns the given arguments, formatted into a HTTP request suffix.\r\n */\r\nexport function encodeRequestParams(args: URLParams): string {\r\n    const str = Object.keys(args)\r\n        .filter((key: string) => args[key] !== undefined)\r\n        .map((key: string) => `${key}=${encodeURIPrimitive(args[key])}`)\r\n        .join(\"&\");\r\n    return str.length == 0 ? str : \"?\" + str;\r\n}\r\n\r\n/**\r\n * Send a request to the backend.\r\n * @param endpoint - Which endpoint to hit (e.g. auth/login)\r\n * @param method - Which HTTP method to use (GET, PUT, POST, ...)\r\n * @param params - The URL parameters (?param1=value1&param2=value2 ...)\r\n * @param body - The body of the request.\r\n * @param auth - Whether or not this request should be authenticated.\r\n * @param verbose - Whether or not to print information about the request and response.\r\n * @param authToken - The authentication token. If not given, the token from the redux store will be used.\r\n */\r\nexport async function requestBackend(\r\n    endpoint: string,\r\n    method = \"GET\",\r\n    params: URLParams = {},\r\n    body: URLBodyParams = {},\r\n    authToken: TokenDto | null | undefined = undefined,\r\n    verbose = false,\r\n): Promise<RequestResponse> {\r\n    const headers: {[key: string]: string} = {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n    };\r\n\r\n    if (authToken !== undefined) {\r\n        if (authToken === null) {\r\n            console.error(`Cannot authentify request to ${endpoint} : no auth token available.`);\r\n            Alert.alert(\"A request could not be authenticated.\");\r\n            return {errorType: \"error.no-auth\", description: \"Endpoint requires authentication\", status: 401};\r\n        } else headers.Authorization = `Bearer ${authToken.accessToken}`;\r\n    }\r\n\r\n    const formattedParams = encodeRequestParams(params);\r\n    let response: Response | null = null;\r\n\r\n    try {\r\n        if (verbose) {\r\n            console.log(`Sending request: ${method} /${endpoint}${formattedParams}`);\r\n            console.log(`  headers: ${JSON.stringify(headers)}`);\r\n            console.log(`  body   : ${JSON.stringify(body)}`);\r\n        }\r\n\r\n        response = await fetch(`${BACKEND_URL}/${endpoint}${formattedParams}`, {\r\n            method,\r\n            headers,\r\n            ...(method == \"GET\" ? {} : {body: JSON.stringify(body)}),\r\n        });\r\n\r\n        let json = {status: response.status, data: {}};\r\n        if (response.status !== HttpStatusCode.NO_CONTENT) json = {...json, ...(await response.json())};\r\n\r\n        if (verbose) {\r\n            console.log(`Response from endpoint ${endpoint}:`);\r\n            console.log(json);\r\n        }\r\n\r\n        return json;\r\n    } catch (error) {\r\n        console.error(\r\n            `An unexpected error occured with a request to ${endpoint}. ` +\r\n                `Method = ${method}, authToken = ${authToken}, params=${JSON.stringify(params)}, ` +\r\n                `body=${JSON.stringify(body)}`,\r\n        );\r\n        console.error(error);\r\n        console.error(\"Response received from server:\", response);\r\n        return {errorType: \"error.unknown\", description: \"A client-side exception was raised.\", status: 400};\r\n    }\r\n}\r\n","import {\r\n    ChatRoomProfileDto,\r\n    CreateProfileDto,\r\n    CreateProfileDtoCommon,\r\n    EducationFieldDto,\r\n    MatchHistoryItemDto,\r\n    OfferValueDto,\r\n    ResponseChatMessageDto,\r\n    ResponseProfileDto,\r\n    ResponseProfileDtoStaff,\r\n    ResponseProfileDtoStudent,\r\n    ResponseRoomDto,\r\n    ResponseUserDto,\r\n    ResponseProfileWithMatchInfoDto,\r\n} from \"./dto\";\r\nimport {\r\n    UserProfile,\r\n    UserProfileCommon,\r\n    UserProfileStaff,\r\n    UserProfileStudent,\r\n    UserProfileWithMatchInfo,\r\n} from \"../model/user-profile\";\r\nimport {User} from \"../model/user\";\r\nimport {ChatRoom, ChatRoomMessage, ChatRoomUser} from \"../model/chat-room\";\r\nimport {initialPaginatedState} from \"../state/types\";\r\nimport {Role, StaffRole} from \"../constants/profile-constants\";\r\nimport {MatchHistoryItem} from \"../model/matching\";\r\n\r\nexport function stripSuperfluousOffers(offers: OfferValueDto[]): OfferValueDto[] {\r\n    return offers\r\n        ? offers.filter((o) => o.allowFemale || o.allowMale || o.allowOther || o.allowStaff || o.allowStudent)\r\n        : [];\r\n}\r\n\r\nexport function convertDtoToProfile(dto: ResponseProfileDto): UserProfile {\r\n    const common: UserProfileCommon = {\r\n        ...dto,\r\n        avatarUrl: dto.avatar,\r\n        birthdate: new Date(dto.birthdate),\r\n        educationFields: (dto.educationFields || []).map((dto: EducationFieldDto) => dto.id),\r\n        profileOffers: dto.profileOffers || [],\r\n        interests: (dto.interests || []).map((i) => i.id),\r\n        languages: dto.languages || [],\r\n    };\r\n\r\n    let complete: UserProfile;\r\n    if (dto.type === \"staff\") {\r\n        const staffDto = dto as ResponseProfileDtoStaff;\r\n        complete = {...common, staffRoles: (staffDto.staffRoles || []).map((r) => r.id as StaffRole)};\r\n    } else {\r\n        const studentDto = dto as ResponseProfileDtoStudent;\r\n        complete = {...common, degree: studentDto.degree};\r\n    }\r\n\r\n    return complete;\r\n}\r\n\r\nexport function convertProfileToCreateDto(profile: UserProfile): CreateProfileDto {\r\n    const common: CreateProfileDtoCommon = {\r\n        ...profile,\r\n        birthdate: profile.birthdate.toJSON(),\r\n        educationFields: profile.educationFields.map((id: string) => ({id})),\r\n        interests: profile.interests.map((id: string) => ({id})),\r\n        profileOffers: stripSuperfluousOffers(profile.profileOffers),\r\n    };\r\n\r\n    let complete: CreateProfileDto;\r\n    if (profile.type === \"staff\") {\r\n        const staff = profile as UserProfileStaff;\r\n        complete = {...common, staffRoles: staff.staffRoles.map((id: string) => ({id}))};\r\n    } else {\r\n        const student = profile as UserProfileStudent;\r\n        complete = {...common, degree: student.degree};\r\n    }\r\n\r\n    return complete;\r\n}\r\n\r\nexport function convertPartialProfileToCreateDto(\r\n    profile: Partial<UserProfile>,\r\n    type?: Role,\r\n): Partial<CreateProfileDto> {\r\n    const common: Partial<CreateProfileDtoCommon> = {\r\n        ...profile,\r\n        type,\r\n        birthdate: profile.birthdate?.toJSON(),\r\n        educationFields: profile.educationFields?.map((id: string) => ({id})),\r\n        interests: profile.interests?.map((id: string) => ({id})),\r\n        profileOffers: profile.profileOffers ? stripSuperfluousOffers(profile.profileOffers) : undefined,\r\n    };\r\n\r\n    let complete: Partial<CreateProfileDto>;\r\n    if (type === \"staff\") {\r\n        const staff = profile as Partial<UserProfileStaff>;\r\n        complete = {...common, staffRoles: (staff.staffRoles || []).map((id: string) => ({id}))};\r\n    } else {\r\n        const student = profile as Partial<UserProfileStudent>;\r\n        complete = {...common, degree: student.degree};\r\n    }\r\n\r\n    return complete;\r\n}\r\n\r\nexport function convertDtoToUser(dto: ResponseUserDto): User {\r\n    return {\r\n        ...dto,\r\n        profile: dto.profile ? convertDtoToProfile(dto.profile) : undefined,\r\n    };\r\n}\r\n\r\nexport function convertDtoToRoom(dto: ResponseRoomDto): ChatRoom {\r\n    const users: ChatRoomUser[] = dto.profiles.map((p: ChatRoomProfileDto) => ({\r\n        _id: p.id,\r\n        name: `${p.firstName} ${p.lastName}`,\r\n        avatar: p.avatar || \"\",\r\n        lastMessageSeenId: p.lastMessageSeenId,\r\n        lastMessageSeenDate: p.lastMessageSeenDate ? new Date(p.lastMessageSeenDate) : null,\r\n    }));\r\n\r\n    // Try to find the sender of the last message in the list of users that are in the room\r\n    let lastMessage = null;\r\n    if (dto.lastMessage) {\r\n        const msg: ResponseChatMessageDto = dto.lastMessage;\r\n        const sender = users.find((u) => u._id == msg.senderId);\r\n        if (sender) lastMessage = convertDtoToChatMessage(sender, msg);\r\n    }\r\n\r\n    return {\r\n        ...dto,\r\n        users,\r\n        messages: [],\r\n        lastMessage,\r\n        writing: {},\r\n        messagePagination: initialPaginatedState(),\r\n    };\r\n}\r\n\r\nexport function convertDtoToChatMessage(user: ChatRoomUser, dto: ResponseChatMessageDto): ChatRoomMessage {\r\n    return {\r\n        ...dto,\r\n        _id: dto.id,\r\n        createdAt: new Date(dto.updatedAt),\r\n        user,\r\n    };\r\n}\r\n\r\nexport function convertDtoToHistoryItem(dto: MatchHistoryItemDto): MatchHistoryItem {\r\n    return {\r\n        profile: convertDtoToProfile(dto.profile),\r\n        status: dto.status,\r\n        date: new Date(dto.date),\r\n        id: dto.id,\r\n    };\r\n}\r\n\r\nexport function convertDtoToProfileWithMatchInfo(dto: ResponseProfileWithMatchInfoDto): UserProfileWithMatchInfo {\r\n    return {\r\n        ...dto,\r\n        profile: convertDtoToProfile(dto.profile),\r\n    };\r\n}\r\n","import {ThunkAction, ThunkDispatch} from \"redux-thunk\";\r\nimport {Action, AnyAction} from \"redux\";\r\nimport {\r\n    InterestDto,\r\n    OfferCategory,\r\n    OfferDto,\r\n    OfferValueDto,\r\n    RemoteValidationErrors,\r\n    SpokenLanguageDto,\r\n    TokenDto,\r\n} from \"../api/dto\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport {User} from \"../model/user\";\r\nimport {Degree, Gender, Role} from \"../constants/profile-constants\";\r\nimport {CountryCode} from \"../model/country-codes\";\r\nimport {ChatRoom, ChatRoomUser} from \"../model/chat-room\";\r\nimport {UserSettings} from \"../model/user-settings\";\r\nimport {MatchHistoryItem} from \"../model/matching\";\r\n\r\nexport type FailableActionReturn = {success: boolean; errors?: string[]};\r\nexport type FailableThunkAction = AppThunk<Promise<FailableActionReturn>>;\r\nexport type ValidatedActionReturn = {success: boolean; errors?: RemoteValidationErrors};\r\nexport type ValidatedThunkAction = AppThunk<Promise<ValidatedActionReturn>>;\r\n\r\nexport type PaginatedState = {page: number; canFetchMore: boolean; fetching: boolean};\r\nexport const initialPaginatedState = (): PaginatedState => ({page: 1, canFetchMore: true, fetching: false});\r\n\r\nexport type OnboardingState = {\r\n    firstname: string;\r\n    lastname: string;\r\n    birthdate: Date | null;\r\n    gender: Gender | null;\r\n    nationality: CountryCode | null;\r\n    type: Role | null;\r\n    degree: Degree | null;\r\n    staffRoles: {[key: string]: boolean};\r\n    languages: SpokenLanguageDto[];\r\n    interestIds: string[];\r\n    offerValues: {[key: string]: OfferValueDto};\r\n    educationFields: string[];\r\n};\r\n\r\nexport type AuthState = {\r\n    authenticated: boolean;\r\n    validated: boolean;\r\n    token: null | TokenDto;\r\n    registerEmail: string;\r\n    validatedEmail: string | null;\r\n    // This is available only in DEBUG_MODE on the staging server\r\n    verificationToken?: string;\r\n    onboarded: boolean;\r\n    onboarding: OnboardingState;\r\n};\r\n\r\nexport type SettingsState = {\r\n    userSettings: UserSettings;\r\n    localizedLanguageItems: {value: string; label: string}[];\r\n};\r\n\r\nexport type ProfileState = {\r\n    user: User | null;\r\n    offers: OfferDto[];\r\n    offerIdToCategory: Map<string, OfferCategory>;\r\n    interests: InterestDto[];\r\n};\r\n\r\nexport type MatchingFiltersState = {\r\n    offers: {[key: string]: boolean};\r\n    universities: string[];\r\n    degrees: Degree[];\r\n    languages: string[];\r\n    types: Role[];\r\n};\r\n\r\nexport type MatchingState = {\r\n    filters: MatchingFiltersState;\r\n    fetchedProfiles: UserProfile[];\r\n    profilesPagination: PaginatedState;\r\n    historyPagination: PaginatedState;\r\n    historyFilters: {[key: string]: boolean};\r\n    historyItems: MatchHistoryItem[];\r\n    myMatches: UserProfile[];\r\n    fetchingMyMatches: boolean;\r\n};\r\n\r\nexport type MessagingState = {\r\n    socketState: {connecting: boolean; connected: boolean};\r\n    matchRooms: {[key: string]: ChatRoom}; // store by id for faster access\r\n    matchRoomsOrdered: string[];\r\n    matchRoomsPagination: PaginatedState;\r\n    activeRoom: ChatRoom | null;\r\n    localChatUser: ChatRoomUser | null;\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport type NotificationsState = {};\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport type ReportsState = {};\r\n\r\nexport type AppState = {\r\n    auth: AuthState;\r\n    settings: SettingsState;\r\n    profile: ProfileState;\r\n    matching: MatchingState;\r\n    messaging: MessagingState;\r\n    notifications: NotificationsState;\r\n};\r\n\r\n// Shortcut type for redux-thunk actions (async actions)\r\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, AppState, unknown, Action<string>>;\r\n\r\n// Shortcut type for redux-thunk dispatch (cast dispatch function to this for async actions)\r\nexport type MyThunkDispatch = ThunkDispatch<AppState, void, AnyAction>;\r\n","import {AppThunk} from \"../types\";\r\nimport {\r\n    AvatarSuccessfulUpdatedDto,\r\n    CreateProfileDto,\r\n    InterestDto,\r\n    OfferDto,\r\n    RequestResponse,\r\n    ResponseProfileDto,\r\n    ResponseUserDto,\r\n    SignedUrlResponseDto,\r\n    SuccessfulRequestResponse,\r\n    ResponseProfileWithMatchInfoDto,\r\n} from \"../../api/dto\";\r\nimport {UserProfile, UserProfileWithMatchInfo} from \"../../model/user-profile\";\r\nimport {User} from \"../../model/user\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {\r\n    convertDtoToProfile,\r\n    convertDtoToProfileWithMatchInfo,\r\n    convertDtoToUser,\r\n    convertPartialProfileToCreateDto,\r\n} from \"../../api/converters\";\r\nimport {ImageInfo} from \"expo-image-picker/build/ImagePicker.types\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {readCachedStaticData} from \"../persistent-storage/static\";\r\n\r\nexport enum PROFILE_ACTION_TYPES {\r\n    LOAD_USER_PROFILE = \"PROFILE/LOAD_USER_PROFILE\",\r\n    LOAD_PROFILE_OFFERS = \"LOAD_PROFILE_OFFERS\",\r\n    LOAD_PROFILE_OFFERS_SUCCESS = \"LOAD_PROFILE_OFFERS_SUCCESS\",\r\n    LOAD_PROFILE_INTERESTS = \"LOAD_PROFILE_INTERESTS\",\r\n    LOAD_PROFILE_INTERESTS_SUCCESS = \"LOAD_PROFILE_INTERESTS_SUCCESS\",\r\n    PROFILE_SET_FIELDS_SUCCESS = \"PROFILE/SET_FIELDS_SUCCESS\",\r\n    PROFILE_SET_FIELDS_FAILURE = \"PROFILE/SET_FIELDS_FAILURE\",\r\n    PROFILE_CREATE = \"PROFILE/CREATE\",\r\n    PROFILE_CREATE_SUCCESS = \"PROFILE/CREATE_SUCCESS\",\r\n    FETCH_USER_SUCCESS = \"PROFILE/FETCH_USER_SUCCESS\",\r\n    FETCH_PROFILE_SUCCESS = \"PROFILE/FETCH_PROFILE_SUCCESS\",\r\n    SET_AVATAR = \"PROFILE/SET_AVATAR\",\r\n    SET_AVATAR_SUCCESS = \"PROFILE/SET_AVATAR_SUCCESS\",\r\n    SET_AVATAR_FAILURE = \"PROFILE/SET_AVATAR_FAILURE\",\r\n}\r\n\r\nexport type LoadUserProfileAction = {\r\n    type: string;\r\n    id: string;\r\n};\r\n\r\nexport type SetProfileFieldsAction = {\r\n    type: string;\r\n    fields: Partial<UserProfile>;\r\n};\r\n\r\nexport type SetProfileFieldsFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetProfileFieldsSuccessAction = {\r\n    type: string;\r\n    fields: Partial<UserProfile>;\r\n};\r\n\r\nexport type CreateProfileAction = {\r\n    type: string;\r\n    profile: CreateProfileDto;\r\n};\r\n\r\nexport type CreateProfileSuccessAction = {\r\n    type: string;\r\n    profile: UserProfile;\r\n};\r\n\r\nexport type LoadProfileOffersAction = {\r\n    type: string;\r\n};\r\n\r\nexport type LoadProfileOffersSuccessAction = {\r\n    type: string;\r\n    offers: OfferDto[];\r\n    fromCache: boolean;\r\n};\r\n\r\nexport type LoadProfileInterestsAction = {\r\n    type: string;\r\n};\r\n\r\nexport type LoadProfileInterestsSuccessAction = {\r\n    type: string;\r\n    interests: InterestDto[];\r\n    fromCache: boolean;\r\n};\r\n\r\nexport type FetchUserSuccessAction = {\r\n    type: string;\r\n    user: User;\r\n};\r\n\r\nexport type FetchProfileSuccessAction = {\r\n    type: string;\r\n    profile: UserProfileWithMatchInfo;\r\n};\r\n\r\nexport type SetAvatarSuccessAction = {\r\n    type: string;\r\n    avatarUrl: string;\r\n};\r\n\r\nexport type SetAvatarFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type ProfileAction =\r\n    | SetProfileFieldsAction\r\n    | SetProfileFieldsFailureAction\r\n    | SetProfileFieldsSuccessAction\r\n    | CreateProfileAction\r\n    | CreateProfileSuccessAction\r\n    | LoadProfileOffersAction\r\n    | LoadProfileOffersSuccessAction\r\n    | LoadProfileInterestsAction\r\n    | LoadProfileInterestsSuccessAction\r\n    | FetchUserSuccessAction\r\n    | FetchProfileSuccessAction\r\n    | SetAvatarSuccessAction\r\n    | SetAvatarFailureAction;\r\n\r\nconst setProfileFieldsSuccess = (fields: Partial<UserProfile>): SetProfileFieldsSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.PROFILE_SET_FIELDS_SUCCESS,\r\n    fields,\r\n});\r\n\r\nconst setProfileFieldsFailure = (): SetProfileFieldsFailureAction => ({\r\n    type: PROFILE_ACTION_TYPES.PROFILE_SET_FIELDS_FAILURE,\r\n});\r\n\r\nexport const setProfileFields = (fields: Partial<UserProfile>): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const type = getState().profile.user?.profile?.type;\r\n\r\n    const dto: Partial<CreateProfileDto> = convertPartialProfileToCreateDto(fields, type);\r\n    const response = await requestBackend(\"profiles\", \"PATCH\", {}, dto, token);\r\n    if (response.status === HttpStatusCode.OK) dispatch(setProfileFieldsSuccess(fields));\r\n    else dispatch(setProfileFieldsFailure());\r\n};\r\n\r\nconst createProfileSuccess = (profile: UserProfile): CreateProfileSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS,\r\n    profile,\r\n});\r\n\r\nexport const createProfile = (profile: CreateProfileDto): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"profiles\", \"POST\", {}, profile, token);\r\n    if (response.status === HttpStatusCode.CREATED) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const profile = convertDtoToProfile(payload as ResponseProfileDto);\r\n        dispatch(createProfileSuccess(profile));\r\n    }\r\n};\r\n\r\nexport const loadProfileOffers = (): AppThunk => async (dispatch) => {\r\n    const fromCache = await readCachedStaticData<OfferDto[]>(\"offers\");\r\n    const params = fromCache ? {updatedAt: fromCache.updatedAt} : {};\r\n\r\n    requestBackend(\"offers\", \"GET\", params).then((response: RequestResponse) => {\r\n        if (response.status === HttpStatusCode.OK) {\r\n            const payload = (response as SuccessfulRequestResponse).data;\r\n            const offers = payload as OfferDto[];\r\n            if (fromCache) {\r\n                const cacheIsGood = offers.length == 0;\r\n                dispatch(loadProfileOffersSuccess(cacheIsGood ? fromCache.data : offers, cacheIsGood));\r\n            } else dispatch(loadProfileOffersSuccess(offers));\r\n        }\r\n    });\r\n};\r\n\r\nconst loadProfileOffersSuccess = (offers: OfferDto[], fromCache = false): LoadProfileOffersSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.LOAD_PROFILE_OFFERS_SUCCESS,\r\n    offers,\r\n    fromCache,\r\n});\r\n\r\nexport const loadProfileInterests = (): AppThunk => async (dispatch) => {\r\n    const fromCache = await readCachedStaticData<InterestDto[]>(\"interests\");\r\n    const params = fromCache ? {updatedAt: fromCache.updatedAt} : {};\r\n\r\n    requestBackend(\"interests\", \"GET\", params).then((response: RequestResponse) => {\r\n        if (response.status === HttpStatusCode.OK) {\r\n            const payload = (response as SuccessfulRequestResponse).data;\r\n            const interests = payload as InterestDto[];\r\n            if (fromCache) {\r\n                const cacheIsGood = interests.length == 0;\r\n                dispatch(loadProfileInterestsSuccess(cacheIsGood ? fromCache.data : interests, cacheIsGood));\r\n            } else dispatch(loadProfileInterestsSuccess(interests));\r\n        }\r\n    });\r\n};\r\n\r\nconst loadProfileInterestsSuccess = (\r\n    interests: InterestDto[],\r\n    fromCache = false,\r\n): LoadProfileInterestsSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.LOAD_PROFILE_INTERESTS_SUCCESS,\r\n    interests,\r\n    fromCache,\r\n});\r\n\r\nexport const fetchUser = (): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"auth/me\", \"GET\", {}, {}, token);\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const user = convertDtoToUser(payload as ResponseUserDto);\r\n        dispatch(fetchUserSuccess(user));\r\n    }\r\n};\r\n\r\nconst fetchUserSuccess = (user: User): FetchUserSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.FETCH_USER_SUCCESS,\r\n    user,\r\n});\r\n\r\nexport const fetchProfile = (id: string): AppThunk<Promise<UserProfileWithMatchInfo | null>> => async (\r\n    dispatch,\r\n    getState,\r\n) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(`profiles/${id}`, \"GET\", {}, {}, token, true);\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data as ResponseProfileWithMatchInfoDto;\r\n        const profileWithMatchInfo = convertDtoToProfileWithMatchInfo(payload);\r\n        dispatch(fetchProfileSuccess(profileWithMatchInfo));\r\n        return profileWithMatchInfo;\r\n    }\r\n    return null;\r\n};\r\n\r\nconst fetchProfileSuccess = (profile: UserProfileWithMatchInfo): FetchProfileSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.FETCH_PROFILE_SUCCESS,\r\n    profile,\r\n});\r\n\r\nconst setAvatarSuccess = (avatarUrl: string): SetAvatarSuccessAction => ({\r\n    type: PROFILE_ACTION_TYPES.SET_AVATAR_SUCCESS,\r\n    avatarUrl,\r\n});\r\n\r\nconst setAvatarFailure = (): SetAvatarFailureAction => ({\r\n    type: PROFILE_ACTION_TYPES.SET_AVATAR_FAILURE,\r\n});\r\n\r\nexport const setAvatar = (image: ImageInfo): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"common/signedUrl\", \"GET\", {mimeType: \"image/jpeg\"}, {}, token);\r\n\r\n    const fail = () => dispatch(setAvatarFailure());\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const {fileName, s3Url} = payload as SignedUrlResponseDto;\r\n\r\n        try {\r\n            // Fetch the image from the device and convert it to a blob\r\n            const imageBlob = await (await fetch(image.uri)).blob();\r\n\r\n            // PUT the image in the aws bucket\r\n            await fetch(s3Url, {\r\n                method: \"PUT\",\r\n                body: imageBlob,\r\n            });\r\n\r\n            // Submit the file name to the server\r\n            const response2 = await requestBackend(\"profiles/avatar\", \"POST\", {}, {fileName}, token);\r\n\r\n            if (response2.status === HttpStatusCode.OK) {\r\n                const payload2 = (response2 as SuccessfulRequestResponse).data;\r\n                const {avatar} = payload2 as AvatarSuccessfulUpdatedDto;\r\n                dispatch(setAvatarSuccess(avatar));\r\n            } else fail();\r\n        } catch (error) {\r\n            console.error(error);\r\n            console.error(\"An unexpected error occured with a request to the avatar bucket.\");\r\n            fail();\r\n        }\r\n    } else fail();\r\n};\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\ntype StaticDataObject<T> = {\r\n    updatedAt: string;\r\n    data: T;\r\n};\r\n\r\n/**\r\n * Store the given data (with the current date) to unsecure persistent storage (unsuitable for sensitive info).\r\n * @param key - The name under which to store the given object.\r\n * @param data - An object to store.\r\n * @param cookieConsent - Whether or not the user has agreed to storing this type of data. This is here so we don't forget.\r\n */\r\nexport function storeStaticData<T>(key: string, data: T, cookieConsent: boolean): void {\r\n    if (cookieConsent) {\r\n        console.log(`Updating static storage '${key}'.`);\r\n\r\n        // Store the data along with the date\r\n        const storageObject = {\r\n            updatedAt: new Date().toJSON(),\r\n            data,\r\n        };\r\n\r\n        AsyncStorage.setItem(key, JSON.stringify(storageObject));\r\n    }\r\n}\r\n\r\n/**\r\n * Clear the data at the given keys from persistent storage.\r\n * @param keys - The keys to clear.\r\n */\r\nexport function clearStaticData<T>(...keys: string[]): void {\r\n    console.log(`Clearing static storage: ${keys.map((s) => `'${s}'`).join(\", \")}.`);\r\n    AsyncStorage.multiRemove(keys);\r\n}\r\n\r\n/**\r\n * Read static data that was stored under a given key.\r\n * @param key - A key that identifies the resource we want to get (@see storeStaticData).\r\n * @return The object along with the date at which it was stored (in JSON format), or false if nothing was stored under this key.\r\n */\r\nexport async function readCachedStaticData<T>(key: string): Promise<false | StaticDataObject<T>> {\r\n    const raw = await AsyncStorage.getItem(key);\r\n    return raw ? JSON.parse(raw) : false;\r\n}\r\n","import {AppThunk, OnboardingState, ValidatedThunkAction} from \"../types\";\r\nimport {LoginDto, OfferValueDto, ResponseUserDto, SuccessfulRequestResponse, TokenDto} from \"../../api/dto\";\r\nimport {User} from \"../../model/user\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {createProfile} from \"../profile/actions\";\r\nimport {convertDtoToUser} from \"../../api/converters\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {gatherValidationErrors} from \"../../api/errors\";\r\nimport {readCachedCredentials} from \"../persistent-storage/auth\";\r\n\r\nexport enum AUTH_ACTION_TYPES {\r\n    REGISTER_BEGIN = \"AUTH/REGISTER_BEGIN\",\r\n    REGISTER_SUCCESS = \"AUTH/REGISTER_SUCCESS\",\r\n    REGISTER_FAILURE = \"AUTH/REGISTER_FAILURE\",\r\n    LOG_IN_SUCCESS = \"AUTH/LOG_IN_SUCCESS\",\r\n    LOG_IN_FAILURE = \"AUTH/LOG_IN_FAILURE\",\r\n    LOG_OUT = \"AUTH/LOG_OUT\",\r\n    VALIDATE_ACCOUNT = \"AUTH/VALIDATE_ACCOUNT\",\r\n    VALIDATE_ACCOUNT_SUCCESS = \"AUTH/VALIDATE_ACCOUNT_SUCCESS\",\r\n    VALIDATE_ACCOUNT_FAILURE = \"AUTH/VALIDATE_ACCOUNT_FAILURE\",\r\n    SET_ONBOARDING_VALUES = \"AUTH/SET_ONBOARDING_VALUES\",\r\n    SET_ONBOARDING_OFFER_VALUE = \"AUTH/SET_ONBOARDING_OFFER_VALUE\",\r\n    FORGOT_PASSWORD_FAILURE = \"AUTH/FORGOT_PASSWORD_FAILURE\",\r\n    FORGOT_PASSWORD_SUCCESS = \"AUTH/FORGOT_PASSWORD_SUCCESS\",\r\n    RESET_PASSWORD_SUCCESS = \"AUTH/RESET_PASSWORD_SUCCESS\",\r\n    DELETE_ACCOUNT_SUCCESS = \"AUTH/DELETE_ACCOUNT_SUCCESS\",\r\n}\r\n\r\nexport type RegisterBeginAction = {\r\n    type: string;\r\n    email: string;\r\n    password: string;\r\n};\r\n\r\nexport type RegisterSuccessAction = {type: string; user: User};\r\n\r\nexport type RegisterFailureAction = {type: string};\r\n\r\nexport type LogInSuccessAction = {\r\n    type: string;\r\n    token: TokenDto;\r\n    user: User;\r\n    usingCachedCredentials: boolean;\r\n};\r\n\r\nexport type LogOutAction = {type: string};\r\n\r\nexport type LogInFailureAction = {type: string};\r\n\r\nexport type ValidateAccountSuccessAction = {\r\n    type: string;\r\n    email: string;\r\n};\r\n\r\nexport type ValidateAccountFailureAction = {type: string};\r\n\r\nexport type SetOnboardingValuesAction = {\r\n    type: string;\r\n    values: Partial<OnboardingState>;\r\n};\r\n\r\nexport type SetOnboardingOfferValueAction = {\r\n    type: string;\r\n    id: string;\r\n    value: OfferValueDto;\r\n};\r\n\r\nexport type ForgotPasswordFailureAction = {type: string};\r\n\r\nexport type ForgotPasswordSuccessAction = {\r\n    type: string;\r\n    email: string;\r\n};\r\n\r\nexport type ResetPasswordSuccessAction = {type: string};\r\n\r\nexport type DeleteAccountSuccessAction = {type: string};\r\n\r\nexport type AuthAction =\r\n    | RegisterBeginAction\r\n    | RegisterSuccessAction\r\n    | RegisterFailureAction\r\n    | LogInSuccessAction\r\n    | LogInFailureAction\r\n    | LogOutAction\r\n    | ValidateAccountSuccessAction\r\n    | ValidateAccountFailureAction\r\n    | SetOnboardingValuesAction\r\n    | SetOnboardingOfferValueAction\r\n    | ForgotPasswordFailureAction\r\n    | ForgotPasswordSuccessAction\r\n    | ResetPasswordSuccessAction\r\n    | DeleteAccountSuccessAction;\r\n\r\n// Register actions\r\n\r\nconst registerBegin = (email: string, password: string): RegisterBeginAction => ({\r\n    type: AUTH_ACTION_TYPES.REGISTER_BEGIN,\r\n    email,\r\n    password,\r\n});\r\n\r\n// Redux-thunk asynchronous action creator\r\nexport const requestRegister = (email: string, password: string): ValidatedThunkAction => async (\r\n    dispatch,\r\n    getState,\r\n) => {\r\n    dispatch(registerBegin(email, password));\r\n    const locale = getState().settings.userSettings.locale;\r\n\r\n    const response = await requestBackend(\"auth/register\", \"POST\", {}, {email, password, locale});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        const successResp = response as SuccessfulRequestResponse;\r\n        dispatch(registerSuccess(successResp.data as User));\r\n        return {success: true};\r\n    } else {\r\n        dispatch(registerFailure());\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst registerSuccess = (user: User): RegisterSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.REGISTER_SUCCESS,\r\n    user,\r\n});\r\n\r\nconst registerFailure = (): RegisterFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.REGISTER_FAILURE,\r\n});\r\n\r\n// Log in actions\r\n\r\nconst loginSuccess = (token: TokenDto, user: User, usingCachedCredentials: boolean): LogInSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_IN_SUCCESS,\r\n    token,\r\n    user,\r\n    usingCachedCredentials,\r\n});\r\n\r\nconst loginFailure = (): LogInFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_IN_FAILURE,\r\n});\r\n\r\nexport const attemptLoginFromCache = (): AppThunk<Promise<User | undefined>> => async (\r\n    dispatch,\r\n): Promise<User | undefined> => {\r\n    const credentials = await readCachedCredentials();\r\n\r\n    if (credentials) {\r\n        const {token} = credentials;\r\n\r\n        // Get user information\r\n        const response = await requestBackend(\"auth/me\", \"GET\", {}, {}, token);\r\n\r\n        if (response.status == HttpStatusCode.OK) {\r\n            const payload = (response as SuccessfulRequestResponse).data as ResponseUserDto;\r\n            const user = convertDtoToUser(payload);\r\n            dispatch(loginSuccess(token, user, true));\r\n            return user;\r\n        } else dispatch(loginFailure()); // e.g. token is invalid\r\n    }\r\n    // If no credentials are available in cache, the action does nothing.\r\n    return undefined;\r\n};\r\n\r\nexport const requestLogin = (email: string, password: string): ValidatedThunkAction => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/login\", \"POST\", {}, {email, password});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data as LoginDto;\r\n        dispatch(loginSuccess(payload.token, convertDtoToUser(payload.user), false));\r\n        return {success: true};\r\n    } else {\r\n        dispatch(loginFailure());\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nexport const logout = (): LogOutAction => ({\r\n    type: AUTH_ACTION_TYPES.LOG_OUT,\r\n});\r\n\r\n// Account validation actions\r\n\r\nexport const requestValidateAccount = (validationToken: string): AppThunk => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/verify\", \"POST\", {}, {token: validationToken});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const {email} = payload as {email: string};\r\n        dispatch(validateAccountSuccess(email));\r\n    } else {\r\n        dispatch(validateAccountFailure());\r\n    }\r\n};\r\n\r\nconst validateAccountSuccess = (email: string): ValidateAccountSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_SUCCESS,\r\n    email,\r\n});\r\n\r\nconst validateAccountFailure = (): ValidateAccountFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_FAILURE,\r\n});\r\n\r\n// Forgot password actions\r\n\r\nexport const forgotPassword = (email: string): ValidatedThunkAction => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/password/forgot\", \"POST\", {}, {email});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        dispatch(forgotPasswordSuccess(email));\r\n        return {success: true};\r\n    } else {\r\n        dispatch(forgotPasswordFailure());\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst forgotPasswordSuccess = (email: string): ForgotPasswordSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.FORGOT_PASSWORD_SUCCESS,\r\n    email,\r\n});\r\n\r\nconst forgotPasswordFailure = (): ForgotPasswordFailureAction => ({\r\n    type: AUTH_ACTION_TYPES.FORGOT_PASSWORD_FAILURE,\r\n});\r\n\r\nexport const resetPassword = (token: string, password: string): ValidatedThunkAction => async (dispatch) => {\r\n    const response = await requestBackend(\"auth/password/reset\", \"POST\", {}, {token, password});\r\n\r\n    if (response.status == HttpStatusCode.OK) {\r\n        dispatch(resetPasswordSuccess());\r\n        return {success: true};\r\n    } else {\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst resetPasswordSuccess = (): ResetPasswordSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.RESET_PASSWORD_SUCCESS,\r\n});\r\n\r\nexport const deleteAccount = (password: string): ValidatedThunkAction => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"users\", \"DELETE\", {}, {password}, token, true);\r\n\r\n    if (response.status == HttpStatusCode.NO_CONTENT) {\r\n        dispatch(deleteAccountSuccess());\r\n        return {success: true};\r\n    } else {\r\n        return {success: false, errors: gatherValidationErrors(response)};\r\n    }\r\n};\r\n\r\nconst deleteAccountSuccess = (): DeleteAccountSuccessAction => ({\r\n    type: AUTH_ACTION_TYPES.DELETE_ACCOUNT_SUCCESS,\r\n});\r\n\r\n// Onboarding actions\r\n\r\nexport const setOnboardingValues = (values: Partial<OnboardingState>): SetOnboardingValuesAction => ({\r\n    type: AUTH_ACTION_TYPES.SET_ONBOARDING_VALUES,\r\n    values,\r\n});\r\n\r\nexport const setOnboardingOfferValue = (id: string, value: OfferValueDto): SetOnboardingOfferValueAction => ({\r\n    type: AUTH_ACTION_TYPES.SET_ONBOARDING_OFFER_VALUE,\r\n    id,\r\n    value,\r\n});\r\n\r\nexport const debugConnect = (): AppThunk => async (dispatch, getState) => {\r\n    const n = Math.round(1e3 * Math.random());\r\n    const email = `test${n}.test@univ-brest.fr`;\r\n    const password = \"PASSword$1\";\r\n\r\n    await dispatch(requestRegister(email, password));\r\n    const {verificationToken} = getState().auth;\r\n\r\n    if (verificationToken) {\r\n        await dispatch(requestValidateAccount(verificationToken));\r\n        await dispatch(requestLogin(email, password));\r\n        await dispatch(\r\n            createProfile({\r\n                type: \"staff\",\r\n                birthdate: \"2002-11-12T07:21:22.110Z\",\r\n                firstName: \"Kevin\" + n,\r\n                lastName: \"Test\",\r\n                gender: \"male\",\r\n                languages: [\r\n                    {code: \"fr\", level: \"native\"},\r\n                    {code: \"en\", level: \"c1\"},\r\n                ],\r\n                nationality: \"FR\",\r\n                interests: [{id: \"baking\"}, {id: \"art\"}, {id: \"brunch\"}],\r\n                profileOffers: [\r\n                    {\r\n                        offerId: \"provide-a-couch\",\r\n                        allowMale: true,\r\n                        allowFemale: true,\r\n                        allowOther: true,\r\n                        allowStaff: false,\r\n                        allowStudent: true,\r\n                    },\r\n                    {\r\n                        offerId: \"grab-a-drink\",\r\n                        allowMale: true,\r\n                        allowFemale: true,\r\n                        allowOther: true,\r\n                        allowStaff: false,\r\n                        allowStudent: true,\r\n                    },\r\n                    {\r\n                        offerId: \"answer-academic-questions\",\r\n                        allowMale: true,\r\n                        allowFemale: true,\r\n                        allowOther: true,\r\n                        allowStaff: true,\r\n                        allowStudent: true,\r\n                    },\r\n                ],\r\n                educationFields: [{id: \"education-science\"}, {id: \"music-performing-arts\"}],\r\n                //degree: \"m2\",\r\n                staffRoles: [{id: \"research\"}, {id: \"teaching\"}],\r\n            }),\r\n        );\r\n    }\r\n};\r\n","import i18n from \"i18n-js\";\r\nimport {HttpStatusCode} from \"../constants/http-status\";\r\nimport {ErrorRequestResponse, RemoteValidationErrors, RequestResponse, UnprocessableEntityRequestResponse} from \"./dto\";\r\n\r\nexport const localizeError = (err: string): string => i18n.t(err, {defaultValue: err});\r\n\r\nconst extractError = ({code, description}: {code: string; description: string}): string => {\r\n    const isMissingLocalization = i18n.t(code, {defaultValue: \"missing\"}) == \"missing\";\r\n    return isMissingLocalization ? description : code;\r\n};\r\n\r\nexport function gatherValidationErrors(resp: RequestResponse): RemoteValidationErrors | undefined {\r\n    if (resp.status == HttpStatusCode.OK) return undefined;\r\n    else {\r\n        const {errorType, description} = resp as ErrorRequestResponse;\r\n        const output: RemoteValidationErrors = {general: extractError({code: errorType, description}), fields: {}};\r\n        if (resp.status == HttpStatusCode.UNPROCESSABLE_ENTITY) {\r\n            const {errors} = resp as UnprocessableEntityRequestResponse;\r\n            //errors.forEach((e) => (output.fields[e.property] = e.codes.map(extractError)));\r\n            // Only keep the first error (makes displaying errors a lot easier)\r\n            errors.forEach((e) => (output.fields[e.property] = extractError(e.codes[0])));\r\n        }\r\n        return output;\r\n    }\r\n}\r\n\r\n/**\r\n * Get the non-specific error field from remote errors. If field-specific errors are available, yields undefined instead.\r\n * @param errors - Remote validation errors.\r\n */\r\nexport function generalError(errors?: RemoteValidationErrors): string | undefined {\r\n    if (!errors) return undefined;\r\n    else if (Object.keys(errors.fields).length > 0) return undefined;\r\n    else return errors.general;\r\n}\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {TokenDto} from \"../../api/dto\";\r\nimport {CredentialsStorageObject} from \"../../types\";\r\n\r\n/**\r\n * Override auth information in secure.\r\n * @param email - The user's email.\r\n * @param token - The user's authentication token.\r\n */\r\nexport function storeAuthInformation(email: string, token: TokenDto): void {\r\n    const toStore: CredentialsStorageObject = {email, token};\r\n    AsyncStorage.setItem(\"auth\", JSON.stringify(toStore));\r\n}\r\n\r\n/**\r\n * Remove the user's auth information from storage.\r\n */\r\nexport function discardAuthInformation(): void {\r\n    AsyncStorage.removeItem(\"auth\");\r\n}\r\n\r\n/**\r\n * Read auth information from storage.\r\n * @return an object containing the email and auth token, or false if SecureStore is unavailable or no data was stored.\r\n */\r\nexport async function readCachedCredentials(): Promise<false | CredentialsStorageObject> {\r\n    const raw = await AsyncStorage.getItem(\"auth\");\r\n    return raw ? JSON.parse(raw) : false;\r\n}\r\n","import {ThemeKey} from \"../../types\";\r\nimport {SupportedLocale} from \"../../localization\";\r\nimport i18n from \"i18n-js\";\r\nimport {CookiesPreferences} from \"../../model/user-settings\";\r\nimport {AppThunk} from \"../types\";\r\n\r\nexport enum SETTINGS_ACTION_TYPES {\r\n    SET_THEME = \"SETTINGS/SET_THEME\",\r\n    TOGGLE_THEME = \"SETTINGS/TOGGLE_THEME\",\r\n    SET_LOCALE = \"SETTINGS/SET_LOCALE\",\r\n    LOAD_COOKIES_PREFERENCES = \"SETTINGS/LOAD_COOKIES_PREFERENCES\",\r\n    SAVE_COOKIES_PREFERENCES = \"SETTINGS/SAVE_COOKIES_PREFERENCES\",\r\n}\r\n\r\nexport type SetThemeAction = {\r\n    type: string;\r\n    theme: ThemeKey;\r\n    fromCache?: boolean;\r\n};\r\n\r\nexport type ToggleThemeAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetLocaleAction = {\r\n    type: string;\r\n    locale: SupportedLocale;\r\n    fromCache?: boolean;\r\n};\r\n\r\nexport type LoadCookiesPreferencesAction = {\r\n    type: string;\r\n    preferences: CookiesPreferences;\r\n    consentDate: Date;\r\n};\r\n\r\nexport type SaveCookiesPreferencesAction = {\r\n    type: string;\r\n    preferences: CookiesPreferences;\r\n};\r\n\r\nexport type SettingsAction = SetThemeAction | SetLocaleAction | LoadCookiesPreferencesAction;\r\n\r\nexport const setTheme = (theme: ThemeKey, fromCache?: boolean): SetThemeAction =>\r\n    ({type: SETTINGS_ACTION_TYPES.SET_THEME, theme, fromCache} as SetThemeAction);\r\n\r\nexport const toggleTheme = (): ToggleThemeAction => ({type: SETTINGS_ACTION_TYPES.TOGGLE_THEME} as ToggleThemeAction);\r\n\r\nexport const setLocale = (locale: SupportedLocale, fromCache?: boolean): SetLocaleAction => {\r\n    i18n.locale = locale;\r\n    return {type: SETTINGS_ACTION_TYPES.SET_LOCALE, locale, fromCache} as SetLocaleAction;\r\n};\r\n\r\nexport const loadCookiesPreferences = (\r\n    preferences: CookiesPreferences,\r\n    consentDate: Date,\r\n): LoadCookiesPreferencesAction => ({\r\n    type: SETTINGS_ACTION_TYPES.LOAD_COOKIES_PREFERENCES,\r\n    preferences,\r\n    consentDate,\r\n});\r\n\r\nexport const saveCookiesPreferences = (preferences: CookiesPreferences): SaveCookiesPreferencesAction => ({\r\n    type: SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES,\r\n    preferences,\r\n});\r\n\r\nexport const acceptAllCookies = (): AppThunk => async (dispatch) => {\r\n    dispatch(saveCookiesPreferences({auth: true, cache: true, settings: true}));\r\n};\r\n","import {CountryCode} from \"../model/country-codes\";\r\n\r\nexport type UniversityKey = \"univ-cadiz\" | \"univ-brest\" | \"univ-gdansk\" | \"univ-malta\" | \"univ-kiel\" | \"univ-split\";\r\n\r\nexport type University = {\r\n    key: UniversityKey;\r\n    domain: string;\r\n    country: CountryCode;\r\n};\r\n\r\n// List of partner universities\r\nexport const PARTNER_UNIVERSITIES: University[] = [\r\n    {\r\n        key: \"univ-cadiz\",\r\n        domain: \"uca.es\",\r\n        country: \"ES\",\r\n    },\r\n    {\r\n        key: \"univ-brest\",\r\n        domain: \"univ-brest.fr\",\r\n        country: \"FR\",\r\n    },\r\n    {\r\n        key: \"univ-gdansk\",\r\n        domain: \"ug.edu.pl\",\r\n        country: \"PL\",\r\n    },\r\n    {\r\n        key: \"univ-malta\",\r\n        domain: \"um.edu.mt\",\r\n        country: \"MT\",\r\n    },\r\n    {\r\n        key: \"univ-kiel\",\r\n        domain: \"kms.uni-kiel.de\",\r\n        country: \"DE\",\r\n    },\r\n    {\r\n        key: \"univ-split\",\r\n        domain: \"unist.hr\",\r\n        country: \"HR\",\r\n    },\r\n];\r\n","import {PARTNER_UNIVERSITIES, University} from \"../constants/universities\";\r\n\r\n/**\r\n * Attempts to extract names from a given email.\r\n * @param email A valid email address.\r\n * @returns the first and last name if they were successfuly extracted, null otherwise.\r\n */\r\nexport function extractNamesFromEmail(email: string): {firstname: string; lastname: string} | null {\r\n    const splitName = email.split(\"@\")[0].split(\".\");\r\n    const capitalize = (str: string) => (str.length == 0 ? str : str[0].toUpperCase() + str.slice(1));\r\n    return splitName.length >= 2\r\n        ? {\r\n              firstname: capitalize(splitName[0]),\r\n              lastname: capitalize(splitName[1]),\r\n          }\r\n        : null;\r\n}\r\n\r\n/**\r\n * Extracts a partner university from a given email.\r\n * @param email A valid email address.\r\n * @returns a University object if one matches the given email, null otherwise.\r\n */\r\nexport function getUniversityFromEmail(email: string): University | null {\r\n    const split = email.split(\"@\");\r\n    if (split.length > 0) {\r\n        const domain = split[1].trim();\r\n        return PARTNER_UNIVERSITIES.find((uni: University) => uni.domain == domain) || null;\r\n    }\r\n    return null;\r\n}\r\n","import {extractNamesFromEmail} from \"../../model/utils\";\r\nimport {PROFILE_ACTION_TYPES} from \"../profile/actions\";\r\nimport {AuthState, OnboardingState} from \"../types\";\r\nimport {\r\n    AuthAction,\r\n    LogInSuccessAction,\r\n    RegisterBeginAction,\r\n    RegisterSuccessAction,\r\n    ValidateAccountSuccessAction,\r\n    SetOnboardingValuesAction,\r\n    AUTH_ACTION_TYPES,\r\n    SetOnboardingOfferValueAction,\r\n} from \"./actions\";\r\n\r\nconst initialOnboardingState = (): OnboardingState => ({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    birthdate: null,\r\n    gender: null,\r\n    nationality: null,\r\n    type: null,\r\n    degree: null,\r\n    staffRoles: {},\r\n    languages: [],\r\n    offerValues: {},\r\n    interestIds: [],\r\n    educationFields: [],\r\n});\r\n\r\nexport const initialState: AuthState = {\r\n    authenticated: false,\r\n    token: null,\r\n    validated: false,\r\n    registerEmail: \"\",\r\n    validatedEmail: null,\r\n    onboarded: false,\r\n    onboarding: initialOnboardingState(),\r\n};\r\n\r\nexport const authReducer = (state: AuthState = initialState, action: AuthAction): AuthState => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.REGISTER_BEGIN: {\r\n            const {email} = <RegisterBeginAction>action;\r\n            return {\r\n                ...state,\r\n                registerEmail: email,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.REGISTER_SUCCESS: {\r\n            const {\r\n                user: {verificationToken, onboarded},\r\n            } = <RegisterSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                verificationToken,\r\n                onboarded,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_SUCCESS: {\r\n            const {email} = <ValidateAccountSuccessAction>action;\r\n            return {...state, validated: true, validatedEmail: email};\r\n        }\r\n        case AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_FAILURE: {\r\n            return {...state, validated: false};\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {\r\n                token,\r\n                user: {onboarded, email},\r\n            } = <LogInSuccessAction>action;\r\n\r\n            // Pre-fill some of the on-boarding values\r\n            const onboarding = {...state.onboarding};\r\n            if (!onboarded) {\r\n                const names = extractNamesFromEmail(email);\r\n                if (names) {\r\n                    onboarding.firstname = names.firstname;\r\n                    onboarding.lastname = names.lastname;\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                authenticated: true,\r\n                token,\r\n                onboarded,\r\n                onboarding,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {\r\n                ...state,\r\n                token: null,\r\n                authenticated: false,\r\n                validated: false,\r\n                validatedEmail: null,\r\n                onboarded: false,\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.SET_ONBOARDING_VALUES: {\r\n            const {values} = <SetOnboardingValuesAction>action;\r\n            return {...state, onboarding: {...state.onboarding, ...values}};\r\n        }\r\n        case AUTH_ACTION_TYPES.SET_ONBOARDING_OFFER_VALUE: {\r\n            const {id, value} = <SetOnboardingOfferValueAction>action;\r\n            return {\r\n                ...state,\r\n                onboarding: {\r\n                    ...state.onboarding,\r\n                    offerValues: {\r\n                        ...state.onboarding.offerValues,\r\n                        [id]: value,\r\n                    },\r\n                },\r\n            };\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            return {...state, onboarded: true, onboarding: initialOnboardingState()};\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export type Degree = \"bsc1\" | \"bsc2\" | \"bsc3\" | \"m1\" | \"m2\" | \"phd\";\r\nexport const DEGREES: Degree[] = [\"bsc1\", \"bsc2\", \"bsc3\", \"m1\", \"m2\", \"phd\"];\r\n\r\nexport type LanguageLevel = \"a1\" | \"a2\" | \"b1\" | \"b2\" | \"c1\" | \"c2\" | \"native\";\r\nexport const LANGUAGE_LEVELS: LanguageLevel[] = [\"a1\", \"a2\", \"b1\", \"b2\", \"c1\", \"c2\", \"native\"];\r\n\r\nexport type Role = \"student\" | \"staff\";\r\nexport const ROLES: Role[] = [\"student\", \"staff\"];\r\n\r\nexport type StaffRole = \"teaching\" | \"research\" | \"administration\" | \"technical\" | \"other\";\r\nexport const STAFF_ROLES: StaffRole[] = [\"teaching\", \"research\", \"administration\", \"technical\", \"other\"];\r\n\r\n// MaterialIcons\r\nexport const STAFF_ROLE_ICONS = [\"school\", \"library-books\", \"account-balance\", \"build\", \"help\"];\r\n// \"verified-user\" icon for ambassadors?\r\n\r\nexport type Gender = \"male\" | \"female\" | \"other\";\r\nexport const GENDERS: Gender[] = [\"male\", \"female\", \"other\"];\r\n\r\nexport const MIN_AGE = 16;\r\n","import * as Yup from \"yup\";\r\nimport {DEGREES} from \"../constants/profile-constants\";\r\n\r\nexport const MIN_PASSWORD_LENGTH = 8;\r\n\r\n// Email domains are not verified to allow for server-side whitelisting of specific adresses.\r\n// const VALID_EMAIL_DOMAINS = PARTNER_UNIVERSITIES.map((uni: University) => uni.domain);\r\n\r\nexport const VALIDATOR_EMAIL_SIGNUP = Yup.string().required(\"validation.required\").email(\"validation.email.invalid\");\r\n/*.test(\r\n    \"email-domain\",\r\n    \"validation.email.invalidDomain\",\r\n    (value: string | null | undefined) =>\r\n        value !== null && value !== undefined && VALID_EMAIL_DOMAINS.some((domain) => value.endsWith(domain)),\r\n);*/\r\n\r\nexport const VALIDATOR_PASSWORD_SIGNUP = Yup.string()\r\n    .required(\"validation.required\")\r\n    .min(MIN_PASSWORD_LENGTH, \"validation.password.tooShort\")\r\n    // At least one digit\r\n    .matches(/(?=.*\\d)/, \"validation.password.noDigit\")\r\n    // At least one lower-case character\r\n    .matches(/(?=.*[a-z])/, \"validation.password.noLowerCase\")\r\n    // At least one upper-case character\r\n    .matches(/(?=.*[A-Z])/, \"validation.password.noUpperCase\")\r\n    // At least one symbol\r\n    .matches(/(?=.*[#@$!%*?&])/, \"validation.password.noSymbol\");\r\n\r\nexport const VALIDATOR_PASSWORD_REPEAT = Yup.string()\r\n    .required(\"validation.required\")\r\n    .oneOf([Yup.ref(\"password\")], \"validation.password.repeatWrong\");\r\n\r\nexport const VALIDATOR_EMAIL_LOGIN = Yup.string().required(\"validation.required\").email(\"validation.email.invalid\");\r\nexport const VALIDATOR_PASSWORD_LOGIN = Yup.string().required(\"validation.required\");\r\n\r\nexport const VALIDATOR_FIRSTNAME = Yup.string().trim().required(\"validation.required\");\r\n\r\nexport const VALIDATOR_LASTNAME = Yup.string().trim().required(\"validation.required\");\r\n\r\nexport const VALIDATOR_ONBOARDING_BIRTHDATE = Yup.date().nullable().required(\"validation.required\"); // make it nullable so we can use null to represent a non given value (will fail the 'required' test anyway)\r\nexport const VALIDATOR_ONBOARDING_GENDER = Yup.string().nullable().required(\"validation.required\");\r\nexport const VALIDATOR_ONBOARDING_NATIONALITY = Yup.string().nullable().required(\"validation.required\");\r\nexport const VALIDATOR_ONBOARDING_DEGREE = Yup.string().oneOf(DEGREES, \"validation.required\");\r\nexport const VALIDATOR_ONBOARDING_LANGUAGES = Yup.array().required(\"validation.addAtLeastOne\");\r\nexport const VALIDATOR_ONBOARDING_INTERESTS = Yup.array().required(\"validation.addAtLeastOne\");\r\n","import {MIN_PASSWORD_LENGTH} from \"../validators\";\r\n\r\nexport default {\r\n    en: {\r\n        locales: {\r\n            en: \"English\",\r\n            fr: \"French\",\r\n        },\r\n        appName: \"SEA-EU Around\",\r\n        welcome: \"Welcome\",\r\n        // Component-related\r\n        picker: {\r\n            callToAction: \"Select (%d selected)\",\r\n        },\r\n        login: \"Log in\",\r\n        tabsignin: \"Log in\",\r\n        tabsignup: \"Sign up\",\r\n        emailAddress: \"Email address\",\r\n        password: \"Password\",\r\n        passwordRepeat: \"Repeat password\",\r\n        send: \"Send\",\r\n        forgotPassword: \"Forgot Password\",\r\n        newPassword: \"New Password\",\r\n        forgotPasswordExplanation:\r\n            \"Enter the email address associated with your account below. Instructions for choosing a new password will be sent shortly.\",\r\n        cancel: \"Cancel\",\r\n        ok: \"OK\",\r\n        signupWelcome: \"We can't wait for you to join our community!\",\r\n        save: \"Save\",\r\n        firstname: \"First name\",\r\n        lastname: \"Last name\",\r\n        noResultsFound: \"No results found\",\r\n        legal: {\r\n            modal: {\r\n                disclaimer1:\r\n                    \"Please understand that you will not be able to use our services if you decide to decline the terms of service.\",\r\n                disclaimer2: \"Declining will abort the profile creation process.\",\r\n            },\r\n            decline: \"Decline\",\r\n            accept: \"Accept\",\r\n            readMore: [\"Read more about our terms & conditions \", \"here\", \".\"],\r\n        },\r\n        privacy: {\r\n            readMore: [\"Read more about our privacy policy \", \"here\", \".\"],\r\n        },\r\n        emailNotificationsLabel: \"Send me useful notifications by email.\",\r\n        emailValidation: {\r\n            validating: \"Validating\",\r\n            success: [\"Your account has been validated! You may now \", \"log in\"],\r\n        },\r\n        createAccount: \"Create account\",\r\n        validation: {\r\n            required: \"Required field.\",\r\n            atLeastOne: \"Please select at least one.\",\r\n            addAtLeastOne: \"Please add at least one.\",\r\n            email: {\r\n                invalid: \"Please provide a valid email address.\",\r\n                invalidDomain: \"Your email address must match one of our partner universities.\",\r\n            },\r\n            password: {\r\n                tooShort: `Your password must have at least ${MIN_PASSWORD_LENGTH} characters.`,\r\n                noDigit: \"Your password must contain at least one digit.\",\r\n                noUpperCase: \"Your password must contain at least one upper case character.\",\r\n                noLowerCase: \"Your password must contain at least one lower case character.\",\r\n                noSymbol: \"Your password must contain at least one symbol (#@$!%*?&).\",\r\n                repeatWrong: \"These passwords don't match.\",\r\n            },\r\n            language: {\r\n                atLeastOne: \"Please select at least one language.\",\r\n                specifyLevel: \"Please specify a level for your languages.\",\r\n            },\r\n            date: {\r\n                tooYoung: \"You must be 16 or older to join this platform.\",\r\n                invalid: \"Please enter a valid date.\",\r\n            },\r\n        },\r\n        error: {\r\n            error_user_not_verified: \"This account's email address has not been verified yet.\",\r\n            user_not_found: \"User not found.\",\r\n            email_or_password_incorrect: \"Incorrect email or password.\",\r\n            reset_password_no_token: \"Could not fulfill this request.\",\r\n            unique: {\r\n                user: {\r\n                    email: \"This email address is already in use.\",\r\n                },\r\n            },\r\n            validation: {\r\n                email: {\r\n                    is_email: \"Please provide a valid email address.\",\r\n                },\r\n            },\r\n        },\r\n        pageNotFound: \"404: Page not found.\",\r\n        pageDoesntExist: \"This page doesn't exist.\",\r\n        goHome: \"Go to home screen\",\r\n        tabs: {\r\n            home: \"Home\",\r\n            matching: \"Matching\",\r\n            messaging: \"Messaging\",\r\n            notifications: \"Notifications\",\r\n        },\r\n        myProfile: \"My Profile\",\r\n        editProfile: \"Edit profile\",\r\n        educationFieldsPicker: {\r\n            placeholder: \"Select fields\",\r\n            searchPlaceholder: \"Search\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        educationFieldCategories: {\r\n            \"generic-programmes-qualifications\": \"Generic programmes and qualifications\",\r\n            education: \"Education\",\r\n            \"arts-humanities\": \"Arts and humanities\",\r\n            \"social-sciences-journalism-information\": \"Social sciences, journalism and information\",\r\n            \"business-administration-law\": \"Business, administration and law\",\r\n            \"natural-sciences-mathematics-statistics\": \"Natural sciences, mathematics and statistics\",\r\n            \"information-communication-technologies\": \"Information and Communication Technologies (ICTs)\",\r\n            \"engineering-manufacturing-construction\": \"Engineering, manufacturing and construction\",\r\n            \"agriculture-forestry-fisheries-veterinary\": \"Agriculture, forestry, fisheries and veterinary\",\r\n            \"health-welfare\": \"Health and welfare\",\r\n            services: \"Services\",\r\n        },\r\n        educationFields: {\r\n            \"basic-programmes-qualifications\": \"Basic programmes and qualifications\",\r\n            \"literacy-numeracy\": \"Literacy and numeracy\",\r\n            \"personal-skills-development\": \"Personal skills and development\",\r\n            \"education-science\": \"Education science\",\r\n            \"training-for-pre-school-teachers\": \"Training for pre-school teachers\",\r\n            \"teacher-training-without-subject-specialisation\": \"Teacher training without subject specialisation\",\r\n            \"teacher-training-with-subject-specialisation\": \"Teacher training with subject specialisation\",\r\n            \"audio-visual-techniques-media-production\": \"Audio-visual techniques and media production\",\r\n            \"fashion-interior-industrial-design\": \"Fashion, interior and industrial design\",\r\n            \"fine-arts\": \"Fine arts\",\r\n            handicrafts: \"Handicrafts\",\r\n            \"music-performing-arts\": \"Music and performing arts\",\r\n            \"religion-theology\": \"Religion and theology\",\r\n            \"history-archaeology\": \"History and archaeology\",\r\n            \"philosophy-ethics\": \"Philosophy and ethics\",\r\n            \"language-acquisition\": \"Language acquisition\",\r\n            \"literature-linguistics\": \"Literature and linguistics\",\r\n            economics: \"Economics\",\r\n            \"political-sciences-civics\": \"Political sciences and civics\",\r\n            psychology: \"Psychology\",\r\n            \"sociology-cultural-studies\": \"Sociology and cultural studies\",\r\n            \"journalism-reporting\": \"Journalism and reporting\",\r\n            \"library-information-archival-studies\": \"Library, information and archival studies\",\r\n            \"accounting-taxation\": \"Accounting and taxation\",\r\n            \"finance-banking-insurance\": \"Finance, banking and insurance\",\r\n            \"management-administration\": \"Management and administration\",\r\n            \"marketing-advertising\": \"Marketing and advertising\",\r\n            \"secretarial-office-work\": \"Secretarial and office work\",\r\n            \"wholesale-retail-sales\": \"Wholesale and retail sales\",\r\n            \"work-skills\": \"Work skills\",\r\n            law: \"Law\",\r\n            biology: \"Biology\",\r\n            biochemistry: \"Biochemistry\",\r\n            \"environmental-sciences\": \"Environmental sciences\",\r\n            \"natural-environments-wildlife\": \"Natural environments and wildlife\",\r\n            chemistry: \"Chemistry\",\r\n            \"earth-sciences\": \"Earth sciences\",\r\n            physics: \"Physics\",\r\n            mathematics: \"Mathematics\",\r\n            statistics: \"Statistics\",\r\n            \"computer-use\": \"Computer use\",\r\n            \"database-network-design-administration\": \"Database and network design and administration\",\r\n            \"software-applications-development-analysis\": \"Software and applications development and analysis\",\r\n            \"chemical-engineering-processes\": \"Chemical engineering and processes\",\r\n            \"environmental-protection-technology\": \"Environmental protection technology\",\r\n            \"electricity-energy\": \"Electricity and energy\",\r\n            \"electronics-automation\": \"Electronics and automation\",\r\n            \"mechanics-metal-trades\": \"Mechanics and metal trades\",\r\n            \"motor-vehicles-ships-aircraft\": \"Motor vehicles, ships and aircraft\",\r\n            \"food-processing\": \"Food processing\",\r\n            materials: \"Materials (glass, paper, plastic and wood)\",\r\n            textiles: \"Textiles (clothes, footwear and leather)\",\r\n            \"mining-extraction\": \"Mining and extraction\",\r\n            \"architecture-town-planning\": \"Architecture and town planning\",\r\n            \"building-civil-engineering\": \"Building and civil engineering\",\r\n            \"crop-livestock-production\": \"Crop and livestock production\",\r\n            horticulture: \"Horticulture\",\r\n            forestry: \"Forestry\",\r\n            fisheries: \"Fisheries\",\r\n            veterinary: \"Veterinary\",\r\n            \"dental-studies\": \"Dental studies\",\r\n            medicine: \"Medicine\",\r\n            \"nursing-midwifery\": \"Nursing and midwifery\",\r\n            \"medical-diagnostic-treatment-technology\": \"Medical diagnostic and treatment technology\",\r\n            \"therapy-rehabilitation\": \"Therapy and rehabilitation\",\r\n            pharmacy: \"Pharmacy\",\r\n            \"traditional-complementary-medicine-therapy\": \"Traditional and complementary medicine and therapy\",\r\n            \"domestic-services\": \"Domestic services\",\r\n            \"hair-beauty-services\": \"Hair and beauty services\",\r\n            \"hotel-restaurants-catering\": \"Hotel, restaurants and catering\",\r\n            sports: \"Sports\",\r\n            \"travel-tourism-leisure\": \"Travel, tourism and leisure\",\r\n            \"community-sanitation\": \"Community sanitation\",\r\n            \"occupational-health-safety\": \"Occupational health and safety\",\r\n            \"military-defence\": \"Military and defence\",\r\n            \"protection-of-persons-property\": \"Protection of persons and property\",\r\n            \"transport-services\": \"Transport services\",\r\n        },\r\n        levelOfStudy: \"Level of study\",\r\n        degrees: {\r\n            bsc1: \"BSc1\",\r\n            bsc2: \"BSc2\",\r\n            bsc3: \"BSc3\",\r\n            m1: \"M1\",\r\n            m2: \"M2\",\r\n            phd: \"PhD\",\r\n        },\r\n        nationality: \"Nationality\",\r\n        university: \"University\",\r\n        search: \"Search\",\r\n        selectCountry: \"Select country\",\r\n        countryPickerLanguageCode: \"common\", // see TranslationLanguageCode from react-native-country-picker-modal\r\n        profileType: \"Type\",\r\n        profileTypes: \"Types\",\r\n        allRoles: {\r\n            student: \"Student\",\r\n            staff: \"Staff\",\r\n        },\r\n        staffRoles: {\r\n            teaching: \"Teaching\",\r\n            research: \"Research\",\r\n            administration: \"Administration\",\r\n            technical: \"Technical\",\r\n            other: \"Other\",\r\n        },\r\n        gender: \"Gender\",\r\n        genders: {\r\n            male: \"Male\",\r\n            female: \"Female\",\r\n            other: \"Other\",\r\n        },\r\n        dateOfBirth: \"Date of birth\",\r\n        months: {\r\n            0: \"January\",\r\n            1: \"February\",\r\n            2: \"March\",\r\n            3: \"April\",\r\n            4: \"May\",\r\n            5: \"June\",\r\n            6: \"July\",\r\n            7: \"August\",\r\n            8: \"September\",\r\n            9: \"October\",\r\n            10: \"November\",\r\n            11: \"December\",\r\n        },\r\n        fieldsOfEducation: \"Fields of education\",\r\n        apply: \"Apply\",\r\n        universities: {\r\n            \"univ-cadiz\": \"University of Cdiz\",\r\n            \"univ-brest\": \"University of Bretagne Occidentale\",\r\n            \"univ-gdansk\": \"University of Gdask\",\r\n            \"univ-malta\": \"University of Malta\",\r\n            \"univ-kiel\": \"University of Kiel\",\r\n            \"univ-split\": \"University of Split\",\r\n        },\r\n        universitiesPicker: {\r\n            placeholder: \"Select universities\",\r\n            searchPlaceholder: \"Search\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        logOut: \"Log out\",\r\n        onboarding: {\r\n            name: {\r\n                title: \"Welcome\",\r\n                subtitle:\r\n                    \"Before we start, we need to know a little bit more about you to ensure the best possible recommendations.\",\r\n            },\r\n            personalInfo: {\r\n                title: \"Profile\",\r\n            },\r\n            language: {\r\n                title: \"Languages\",\r\n            },\r\n            interests: {\r\n                title: \"Interests\",\r\n            },\r\n            role: {\r\n                title: \"I am a...\",\r\n            },\r\n            roleSpecific1: {\r\n                student: {\r\n                    title: \"Student information\",\r\n                },\r\n                staff: {\r\n                    title: \"Staff roles\",\r\n                },\r\n            },\r\n            offersMeet: {\r\n                title: \"Meet\",\r\n                subtitle: \"Meet up with new friends in real life.\",\r\n            },\r\n            offersDiscover: {\r\n                title: \"Discover\",\r\n                subtitle: \"Find out about other cultures.\",\r\n            },\r\n            offersCollaborate: {\r\n                title: \"Collaborate\",\r\n                subtitle: \"Find people to work on projects, academic or not.\",\r\n            },\r\n            legal1: {\r\n                title: \"Terms & Conditions\",\r\n                text:\r\n                    \"As explained in details in our Terms & Conditions, you agree to use SEA-EU Around and its services only to be put into contact, on a non-business and non-profit basis, with people wishing to meet, collaborate and interact online or in the frame of a mobility. You commit to carry out respectful exchanges with other members. Your name and surname will be visible by other members.\",\r\n            },\r\n            legal2: {\r\n                title: \"Data Policy\",\r\n                text:\r\n                    \"In the context of your use of SEA-EU Around, you will provide some personal data to create your profile as further explained in our Terms & Conditions. This data is collected and processed by UBO through SEA-EU Around in order to enable matching among Members, according to needs/offers and interests defined by Members of SEA-EU Around. Your data will be visible only by  other Members.\",\r\n            },\r\n            legal3: {\r\n                title: \"Cookies\",\r\n                text:\r\n                    \"I acknowledge that cookies might be used. The information is kept only for application purposes and does not permit to identify the Member except for the cookie enabling UBO to re-authenticate the Member on its arrival on SEA-EU Around, saving the Member from having to re-enter their password at each connection.\",\r\n            },\r\n            submit: \"Submit\",\r\n            getStarted: \"Get Started\",\r\n            profileCreated: \"Welcome! Your profile is now created.\",\r\n            quit: {\r\n                title: \"Quit on-boarding\",\r\n                text: \"Do you really wish to leave? You can resume later.\",\r\n                cancel: \"Cancel\",\r\n                yes: \"Yes\",\r\n            },\r\n        },\r\n        spokenLanguages: \"Spoken languages\",\r\n        languagePicker: {\r\n            placeholderSingle: \"Language\",\r\n            placeholderMultiple: \"Select languages\",\r\n            searchPlaceholder: \"Search for languages\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        languageLevelPicker: {\r\n            placeholder: \"Level\",\r\n        },\r\n        languageLevels: {\r\n            a1: \"A1\",\r\n            a2: \"A2\",\r\n            b1: \"B1\",\r\n            b2: \"B2\",\r\n            c1: \"C1\",\r\n            c2: \"C2\",\r\n            native: \"Native\",\r\n        },\r\n        languageNames: {\r\n            aa: \"Afar\",\r\n            ab: \"Abkhazian\",\r\n            ae: \"Avestan\",\r\n            af: \"Afrikaans\",\r\n            ak: \"Akan\",\r\n            am: \"Amharic\",\r\n            an: \"Aragonese\",\r\n            ar: \"Arabic\",\r\n            as: \"Assamese\",\r\n            av: \"Avaric\",\r\n            ay: \"Aymara\",\r\n            az: \"Azerbaijani\",\r\n            ba: \"Bashkir\",\r\n            be: \"Belarusian\",\r\n            bg: \"Bulgarian\",\r\n            bh: \"Bihari languages\",\r\n            bi: \"Bislama\",\r\n            bm: \"Bambara\",\r\n            bn: \"Bengali\",\r\n            bo: \"Tibetan\",\r\n            br: \"Breton\",\r\n            bs: \"Bosnian\",\r\n            ca: \"Catalan / Valencian\",\r\n            ce: \"Chechen\",\r\n            ch: \"Chamorro\",\r\n            co: \"Corsican\",\r\n            cr: \"Cree\",\r\n            cs: \"Czech\",\r\n            cu: \"Old Bulgarian / Church Slavic / Slavonic\",\r\n            cv: \"Chuvash\",\r\n            cy: \"Welsh\",\r\n            da: \"Danish\",\r\n            de: \"German\",\r\n            dv: \"Divehi / Dhivehi / Maldivian\",\r\n            dz: \"Dzongkha\",\r\n            ee: \"Ewe\",\r\n            el: \"Greek\",\r\n            en: \"English\",\r\n            eo: \"Esperanto\",\r\n            es: \"Spanish\",\r\n            et: \"Estonian\",\r\n            eu: \"Basque\",\r\n            fa: \"Persian\",\r\n            ff: \"Fulah\",\r\n            fi: \"Finnish\",\r\n            fj: \"Fijian\",\r\n            fo: \"Faroese\",\r\n            fr: \"French\",\r\n            fy: \"Western Frisian\",\r\n            ga: \"Irish\",\r\n            gd: \"Scottish Gaelic\",\r\n            gl: \"Galician\",\r\n            gn: \"Guarani\",\r\n            gu: \"Gujarati\",\r\n            gv: \"Manx\",\r\n            ha: \"Hausa\",\r\n            he: \"Hebrew\",\r\n            hi: \"Hindi\",\r\n            ho: \"Hiri Motu\",\r\n            hr: \"Croatian\",\r\n            ht: \"Haitian Creole\",\r\n            hu: \"Hungarian\",\r\n            hy: \"Armenian\",\r\n            hz: \"Herero\",\r\n            ia: \"Interlingua\",\r\n            id: \"Indonesian\",\r\n            ie: \"Interlingue / Occidental\",\r\n            ig: \"Igbo\",\r\n            ii: \"Sichuan Yi / Nuosu\",\r\n            ik: \"Inupiaq\",\r\n            io: \"Ido\",\r\n            is: \"Icelandic\",\r\n            it: \"Italian\",\r\n            iu: \"Inuktitut\",\r\n            ja: \"Japanese\",\r\n            jv: \"Javanese\",\r\n            ka: \"Georgian\",\r\n            kg: \"Kongo\",\r\n            ki: \"Kikuyu / Gikuyu\",\r\n            kj: \"Kuanyama / Kwanyama\",\r\n            kk: \"Kazakh\",\r\n            kl: \"Kalaallisut / Greenlandic\",\r\n            km: \"Central Khmer\",\r\n            kn: \"Kannada\",\r\n            ko: \"Korean\",\r\n            kr: \"Kanuri\",\r\n            ks: \"Kashmiri\",\r\n            ku: \"Kurdish\",\r\n            kv: \"Komi\",\r\n            kw: \"Cornish\",\r\n            ky: \"Kirghiz / Kyrgyz\",\r\n            la: \"Latin\",\r\n            lb: \"Luxembourgish / Letzeburgesch\",\r\n            lg: \"Ganda\",\r\n            li: \"Limburgan / Limburger / Limburgish\",\r\n            ln: \"Lingala\",\r\n            lo: \"Lao\",\r\n            lt: \"Lithuanian\",\r\n            lu: \"Luba-Katanga\",\r\n            lv: \"Latvian\",\r\n            mg: \"Malagasy\",\r\n            mh: \"Marshallese\",\r\n            mi: \"Maori\",\r\n            mk: \"Macedonian\",\r\n            ml: \"Malayalam\",\r\n            mn: \"Mongolian\",\r\n            mr: \"Marathi\",\r\n            ms: \"Malay\",\r\n            mt: \"Maltese\",\r\n            my: \"Burmese\",\r\n            na: \"Nauru\",\r\n            nb: \"Norwegian Bokml\",\r\n            nd: \"North Ndebele\",\r\n            ne: \"Nepali\",\r\n            ng: \"Ndonga\",\r\n            nl: \"Dutch / Flemish\",\r\n            nn: \"Norwegian Nynorsk\",\r\n            no: \"Norwegian\",\r\n            nr: \"South Ndebele\",\r\n            nv: \"Navajo / Navaho\",\r\n            ny: \"Chichewa / Chewa / Nyanja\",\r\n            oc: \"Occitan\",\r\n            oj: \"Ojibwa\",\r\n            om: \"Oromo\",\r\n            or: \"Oriya\",\r\n            os: \"Ossetian / Ossetic\",\r\n            pa: \"Punjabi / Panjabi\",\r\n            pi: \"Pali\",\r\n            pl: \"Polish\",\r\n            ps: \"Pashto / Pushto\",\r\n            pt: \"Portuguese\",\r\n            qu: \"Quechua\",\r\n            rc: \"Reunionese\",\r\n            rm: \"Romansh\",\r\n            rn: \"Rundi\",\r\n            ro: \"Romanian / Moldavian\",\r\n            ru: \"Russian\",\r\n            rw: \"Kinyarwanda\",\r\n            sa: \"Sanskrit\",\r\n            sc: \"Sardinian\",\r\n            sd: \"Sindhi\",\r\n            se: \"Northern Sami\",\r\n            sg: \"Sango\",\r\n            sh: \"Serbo-Croatian\",\r\n            si: \"Sinhala / Sinhalese\",\r\n            sk: \"Slovak\",\r\n            sl: \"Slovenian\",\r\n            sm: \"Samoan\",\r\n            sn: \"Shona\",\r\n            so: \"Somali\",\r\n            sq: \"Albanian\",\r\n            sr: \"Serbian\",\r\n            ss: \"Swati\",\r\n            st: \"Southern Sotho\",\r\n            su: \"Sundanese\",\r\n            sv: \"Swedish\",\r\n            sw: \"Swahili\",\r\n            ta: \"Tamil\",\r\n            te: \"Telugu\",\r\n            tg: \"Tajik\",\r\n            th: \"Thai\",\r\n            ti: \"Tigrinya\",\r\n            tk: \"Turkmen\",\r\n            tl: \"Tagalog\",\r\n            tn: \"Tswana\",\r\n            to: \"Tonga (Tonga Islands)\",\r\n            tr: \"Turkish\",\r\n            ts: \"Tsonga\",\r\n            tt: \"Tatar\",\r\n            tw: \"Twi\",\r\n            ty: \"Tahitian\",\r\n            ug: \"Uighur / Uyghur\",\r\n            uk: \"Ukrainian\",\r\n            ur: \"Urdu\",\r\n            uz: \"Uzbek\",\r\n            ve: \"Venda\",\r\n            vi: \"Vietnamese\",\r\n            vo: \"Volapk\",\r\n            wa: \"Walloon\",\r\n            wo: \"Wolof\",\r\n            xh: \"Xhosa\",\r\n            yi: \"Yiddish\",\r\n            yo: \"Yoruba\",\r\n            za: \"Zhuang / Chuang\",\r\n            zh: \"Chinese\",\r\n            zu: \"Zulu\",\r\n        },\r\n        interests: \"Interests\",\r\n        chooseInterests: \"Choose interests\",\r\n        interestsPicker: {\r\n            placeholder: \"Select interests\",\r\n            searchPlaceholder: \"Search\",\r\n            multiple: \"%d selected\",\r\n        },\r\n        interestNames: {\r\n            \"language-exchange\": \"Language exchange\",\r\n            \"second-hand-apparel\": \"Second hand apparel\",\r\n            \"board-games\": \"Board games\",\r\n            \"road-trips\": \"Road trips\",\r\n            tango: \"Tango\",\r\n            sneakers: \"Sneakers\",\r\n            sports: \"Sports\",\r\n            baking: \"Baking\",\r\n            tarot: \"Tarot\",\r\n            art: \"Art\",\r\n            tea: \"Tea\",\r\n            picnicking: \"Picnicking\",\r\n            motorcycles: \"Motorcycles\",\r\n            parties: \"Parties\",\r\n            shopping: \"Shopping\",\r\n            couchsurfing: \"Couch-surfing\",\r\n            netflix: \"Netflix\",\r\n            cooking: \"Cooking\",\r\n            vegan: \"Vegan\",\r\n            brunch: \"Brunch\",\r\n            \"motor-sports\": \"Motor sports\",\r\n            \"grab-a-drink\": \"Grab a drink\",\r\n            \"working-out\": \"Working out\",\r\n            \"start-ups\": \"Start ups\",\r\n            \"street-food\": \"Street food\",\r\n            \"craft-beer\": \"Craft beer\",\r\n            \"amateur-cook\": \"Amateur cook\",\r\n            \"happy-hour\": \"Happy hour\",\r\n            \"vintage-fashion\": \"Vintage fashion\",\r\n            \"walking-my-dog\": \"Walking my dog\",\r\n            \"second-hand-shopping\": \"Second hand shopping\",\r\n            politics: \"Politics\",\r\n            bbq: \"BBQ\",\r\n            surfing: \"Surfing\",\r\n            spirituality: \"Spirituality\",\r\n            gardening: \"Gardening\",\r\n            astrology: \"Astrology\",\r\n            climbing: \"Climbing\",\r\n            tennis: \"Tennis\",\r\n            writer: \"Writer\",\r\n            comedy: \"Comedy\",\r\n            wine: \"Wine\",\r\n            diy: \"Diy\",\r\n            coffee: \"Coffee\",\r\n            sailing: \"Sailing\",\r\n            music: \"Music\",\r\n            cycling: \"Cycling\",\r\n            activism: \"Activism\",\r\n            trivia: \"Trivia\",\r\n            travel: \"Travel\",\r\n            instagram: \"Instagram\",\r\n            museum: \"Museum\",\r\n            karaoke: \"Karaoke\",\r\n            fashion: \"Fashion\",\r\n            blogging: \"Blogging\",\r\n            yoga: \"Yoga\",\r\n            investing: \"Investing\",\r\n            petanque: \"Petanque\",\r\n            theater: \"Theater\",\r\n            environmentalism: \"Environmentalism\",\r\n            crossfit: \"Crossfit\",\r\n            dancing: \"Dancing\",\r\n            hiking: \"Hiking\",\r\n            running: \"Running\",\r\n            golf: \"Golf\",\r\n            photography: \"Photography\",\r\n            vlogging: \"Vlogging\",\r\n            volunteering: \"Volunteering\",\r\n            tattoos: \"Tattoos\",\r\n            outdoors: \"Outdoors\",\r\n            esports: \"Esports\",\r\n            snowboarding: \"Snowboarding\",\r\n            athlete: \"Athlete\",\r\n            extrovert: \"Extrovert\",\r\n            podcasts: \"Podcasts\",\r\n            walking: \"Walking\",\r\n            vegetarian: \"Vegetarian\",\r\n            reading: \"Reading\",\r\n            movies: \"Movies\",\r\n            foodie: \"Foodie\",\r\n            soccer: \"Soccer\",\r\n            skiing: \"Skiing\",\r\n            sushi: \"Sushi\",\r\n            introvert: \"Introvert\",\r\n            skateboarder: \"Skateboarder\",\r\n            festivals: \"Festivals\",\r\n            fishing: \"Fishing\",\r\n            swimming: \"Swimming\",\r\n            expositions: \"Expositions\",\r\n            gamer: \"Gamer\",\r\n            piano: \"Piano\",\r\n            \"foodie-tour\": \"Foodie Tour\",\r\n            \"dog-lover\": \"Dog Lover\",\r\n            \"cat-lover\": \"Cat Lover\",\r\n        },\r\n        offerCategories: {\r\n            meet: \"Meet\",\r\n            discover: \"Discover\",\r\n            collaborate: \"Collaborate\",\r\n        },\r\n        offers: \"Offers\",\r\n        allOffers: {\r\n            \"grab-a-drink\": {\r\n                name: \"Grab a drink\",\r\n                help: \"I am open to having a drink with the people I meet on this platform.\",\r\n            },\r\n            \"provide-a-couch\": {\r\n                name: \"Provide a couch\",\r\n                help: \"I am open to letting someone sleep on my couch.\",\r\n            },\r\n            \"get-into-campus-life\": {\r\n                name: \"Get into campus life\",\r\n                help: \"I am open to helping someone visit my campus.\",\r\n            },\r\n            \"cowork-on-a-project\": {\r\n                name: \"Co-work on a project\",\r\n                help: \"I am looking for collaborators for a project.\",\r\n            },\r\n            \"answer-academic-questions\": {\r\n                name: \"Answer academic questions\",\r\n                help: \"I can give information about my university or answer to general academic questions.\",\r\n            },\r\n            \"share-interests\": {\r\n                name: \"Share interests\",\r\n                help: \"I would like to chat with other users about common interests.\",\r\n            },\r\n            \"language-tandem\": {\r\n                name: \"Language tandem\",\r\n                help: \"I am willing to join a language tandem to help others learn one of my languages.\",\r\n            },\r\n        },\r\n        // Unmatch modal\r\n        unmatch: {\r\n            text: \"Are you sure you want to unmatch {{firstname}}? You will not be able to communicate anymore.\",\r\n            blockQuestion: \"If you don't want {{firstname}} to be able to find you anymore, you can also block them:\",\r\n            action: \"Unmatch\",\r\n        },\r\n        // Block modal\r\n        block: {\r\n            warning:\r\n                \"Are you sure you want to block this user? You and {{firstname}} will not be able to find each other anymore.\",\r\n            action: \"Block\",\r\n        },\r\n        // Welcome screen\r\n        welcomeScreen: {\r\n            signIn: \"Log in\",\r\n            signUp: \"Sign up\",\r\n            subtitle: \"Join an alliance united around the values of European identity.\",\r\n        },\r\n        // Login\r\n        loginForm: {\r\n            title: \"Welcome Back!\",\r\n            logIn: \"Log in\",\r\n            signUp: \"Sign up\",\r\n            or: \"or\",\r\n        },\r\n        // Cookies\r\n        cookies: {\r\n            bannerText:\r\n                \"We use cookies to provide you with the best possible user experience.\\nOur usage of cookies includes caching data for faster loading, storing your preferences and authentication. We do not collect any information that could be used for tracking or advertising.\",\r\n            acceptAll: \"Accept cookies\",\r\n            customize: \"Customize\",\r\n            preferences: {\r\n                auth: {\r\n                    name: \"Authentication\",\r\n                    description: \"Store information used to sign-in automatically when starting the app.\",\r\n                },\r\n                cache: {\r\n                    name: \"Cache\",\r\n                    description: \"Store some data on your device (less than 1MB) for faster loading.\",\r\n                },\r\n                settings: {name: \"Settings\", description: \"Store your settings (e.g. theme and locale).\"},\r\n            },\r\n        },\r\n        // Report\r\n        report: {\r\n            title: \"Report\",\r\n            send: \"Send\",\r\n            cancel: \"Cancel\",\r\n            what: \"What / who?\",\r\n            why: \"Why?\",\r\n            typePlaceholder: \"Select a reason\",\r\n            types: {\r\n                violence: \"Violence\",\r\n                nudity: \"Nudity\",\r\n                harassment: \"Harassment\",\r\n                \"undesirable-content\": \"Undesirable content\",\r\n                \"hate-speech\": \"Hate speech\",\r\n                \"vulgar-content\": \"Vulgar content\",\r\n                other: \"Other\",\r\n            },\r\n            confirmationTitle: \"Thank you\",\r\n            confirmation: \"An administrator will investigate your report shortly.\",\r\n            failureTitle: \"Sorry\",\r\n            failure: \"We are unable to fulfill your request.\",\r\n        },\r\n        // Reset password\r\n        resetPassword: {\r\n            instructions: \"To choose a new password, click the link in the email we just sent you.\",\r\n            title: \"Please choose a new password\",\r\n            button: \"Send\",\r\n            success: \"Your password has been updated.\",\r\n        },\r\n        // Delete account\r\n        deleteAccount: {\r\n            title: \"Delete your account\",\r\n            warning:\r\n                \"Your account and all associated data will be deleted within six months. Please be aware that after this time, your account will be irreversibly deleted. If you sign in during this month however, the deletion will be cancelled.\",\r\n            button: \"Delete\",\r\n            success1: \"Your request has been received and will be processed shortly.\",\r\n            success2: \"We are sorry to see you go.\",\r\n            leave: \"Leave\",\r\n            inputLabel: \"Enter password to confirm\",\r\n        },\r\n        // Messaging tab\r\n        messaging: {\r\n            noMatches: \"It appears that you haven't matched with anyone yet. :(\",\r\n        },\r\n        // Matching tab\r\n        matching: {\r\n            noResults: \"No results found\",\r\n            noResultsAdvice: \"Perhaps try removing some filters\",\r\n            filtering: {\r\n                sectionGeneral: \"General\",\r\n                buttonReset: \"Reset\",\r\n            },\r\n            actionLike: \"Like\",\r\n            actionHide: \"Hide\",\r\n            success: {\r\n                title: \"It's a match !\",\r\n                chat: \"Start chatting\",\r\n                continue: \"Keep scrolling\",\r\n            },\r\n            history: {\r\n                status: {\r\n                    requested: \"Liked\",\r\n                    declined: \"Hidden\",\r\n                    blocked: \"Blocked\",\r\n                },\r\n                actions: {\r\n                    report: \"Report\",\r\n                    cancel: {\r\n                        requested: \"Cancel like\",\r\n                        declined: \"Cancel hide\",\r\n                        blocked: \"Cancel block\",\r\n                    },\r\n                    block: \"Block\",\r\n                },\r\n                noResults: \"No results found\",\r\n                noResultsAdvice: \"Perhaps try removing some filters\",\r\n            },\r\n        },\r\n        // Profile tab\r\n        profile: {\r\n            action: {\r\n                chat: \"Chat\",\r\n                mute: \"Mute\",\r\n                block: \"Block\",\r\n                unmatch: \"Unmatch\",\r\n                report: \"Report\",\r\n            },\r\n            noOffersSelected: \"No offers selected.\",\r\n        },\r\n        screenTitles: {\r\n            suffix: \" - SEA-EU Around\",\r\n            WelcomeScreen: \"Welcome\",\r\n            LoginScreen: \"Login\",\r\n            ForgotPasswordScreen: \"Forgot Password\",\r\n            SignupScreen: \"Sign up\",\r\n            OnboardingNameScreen: \"Welcome\",\r\n            OnboardingPersonalInfoScreen: \"Profile\",\r\n            OnboardingLanguageScreen: \"Profile\",\r\n            OnboardingInterestsScreen: \"Profile\",\r\n            OnboardingRoleScreen: \"Profile\",\r\n            OnboardingRoleSpecificScreen: \"Profile\",\r\n            OnboardingOffersScreen1: \"Discover\",\r\n            OnboardingOffersScreen2: \"Collaborate\",\r\n            OnboardingOffersScreen3: \"Meet\",\r\n            OnboardingLegalScreen1: \"Terms & Conditions\",\r\n            OnboardingPrivacyScreen: \"Privacy Policy\",\r\n            ChatRoomsScreen: \"Messages\",\r\n            ChatScreen: \"Chat\",\r\n            TabHomeScreen: \"Home\",\r\n            TabMatchingScreen: \"Match\",\r\n            MatchFilteringScreen: \"Filters\",\r\n            MatchHistoryScreen: \"History\",\r\n            TabNotificationsScreen: \"Notifications\",\r\n            MyProfileScreen: \"Profile\",\r\n            ProfileScreen: \"Profile\",\r\n            SettingsScreen: \"Settings\",\r\n            DeleteAccountScreen: \"Delete Account\",\r\n            DeleteAccountSuccessScreen: \"Account Deleted\",\r\n            ValidationEmailSentScreen: \"Validate your account\",\r\n            ValidateEmailScreen: \"Validate your account\",\r\n            ResetPasswordScreen: \"Reset your password\",\r\n            ResetPasswordSuccessScreen: \"Password reset\",\r\n            OnboardingSuccessfulScreen: \"Successful registration\",\r\n            NotFoundScreen: \"Not Found\",\r\n            MatchSuccessScreen: \"Match!\",\r\n            ForgotPasswordEmailSentScreen: \"Forgot password\",\r\n        },\r\n        // Settings screen\r\n        settings: {\r\n            sections: {\r\n                general: \"General\",\r\n                danger: \"Danger zone\",\r\n                about: \"About\",\r\n            },\r\n            language: \"Language\",\r\n            darkTheme: \"Dark theme\",\r\n            deleteAccount: \"Delete Account\",\r\n            deleteMyAccount: \"Delete my account\",\r\n            version: \"Version\",\r\n            termsOfService: \"Terms of Service\",\r\n            reportABug: \"Report a Bug\",\r\n            logOut: \"Log out\",\r\n            customizeCookies: \"Customize cookies\",\r\n        },\r\n    },\r\n    fr: {\r\n        locales: {\r\n            en: \"Anglais\",\r\n            fr: \"Franais\",\r\n        },\r\n        appName: \"SEA-EU Around\",\r\n        welcome: \"Bienvenue\",\r\n        login: \"Connexion\",\r\n        signup: \"Inscription\",\r\n        emailAddress: \"Adresse email\",\r\n        password: \"Mot de passe\",\r\n        forgotPassword: \"Mot de passe oubli\",\r\n        countryPickerLanguageCode: \"fra\", // see TranslationLanguageCode from react-native-country-picker-modal\r\n    },\r\n};\r\n","import * as Localization from \"expo-localization\";\r\nimport i18n from \"i18n-js\";\r\nimport translations from \"./constants/translations\";\r\n\r\nexport type SupportedLocale = \"en\" | \"fr\";\r\nexport const SUPPORTED_LOCALES: SupportedLocale[] = [\"en\", \"fr\"];\r\n\r\nexport function getDefaultLocale(): SupportedLocale {\r\n    return SUPPORTED_LOCALES.find((l: SupportedLocale) => l == Localization.locale) || \"en\";\r\n}\r\n\r\nexport default function configureLocalization(): void {\r\n    // Set the key-value pairs for the supported languages.\r\n    i18n.translations = translations;\r\n\r\n    // Set the locale on startup\r\n    i18n.locale = getDefaultLocale();\r\n\r\n    // When a value is missing from a language, fallback to another language with the key present.\r\n    i18n.fallbacks = true;\r\n}\r\n","// ISO 639-1 Language codes\r\nexport const LANGUAGES_CODES: string[] = [\r\n    \"hr\",\r\n    \"en\",\r\n    \"fr\",\r\n    \"de\",\r\n    \"mt\",\r\n    \"pl\",\r\n    \"es\",\r\n    \"aa\",\r\n    \"ab\",\r\n    \"ae\",\r\n    \"af\",\r\n    \"ak\",\r\n    \"am\",\r\n    \"an\",\r\n    \"ar\",\r\n    \"as\",\r\n    \"av\",\r\n    \"ay\",\r\n    \"az\",\r\n    \"ba\",\r\n    \"be\",\r\n    \"bg\",\r\n    \"bh\",\r\n    \"bi\",\r\n    \"bm\",\r\n    \"bn\",\r\n    \"bo\",\r\n    \"br\",\r\n    \"bs\",\r\n    \"ca\",\r\n    \"ce\",\r\n    \"ch\",\r\n    \"co\",\r\n    \"cr\",\r\n    \"cs\",\r\n    \"cu\",\r\n    \"cv\",\r\n    \"cy\",\r\n    \"da\",\r\n    \"dv\",\r\n    \"dz\",\r\n    \"ee\",\r\n    \"el\",\r\n    \"eo\",\r\n    \"et\",\r\n    \"eu\",\r\n    \"fa\",\r\n    \"ff\",\r\n    \"fi\",\r\n    \"fj\",\r\n    \"fo\",\r\n    \"fy\",\r\n    \"ga\",\r\n    \"gd\",\r\n    \"gl\",\r\n    \"gn\",\r\n    \"gu\",\r\n    \"gv\",\r\n    \"ha\",\r\n    \"he\",\r\n    \"hi\",\r\n    \"ho\",\r\n    \"ht\",\r\n    \"hu\",\r\n    \"hy\",\r\n    \"hz\",\r\n    \"ia\",\r\n    \"id\",\r\n    \"ie\",\r\n    \"ig\",\r\n    \"ii\",\r\n    \"ik\",\r\n    \"io\",\r\n    \"is\",\r\n    \"it\",\r\n    \"iu\",\r\n    \"ja\",\r\n    \"jv\",\r\n    \"ka\",\r\n    \"kg\",\r\n    \"ki\",\r\n    \"kj\",\r\n    \"kk\",\r\n    \"kl\",\r\n    \"km\",\r\n    \"kn\",\r\n    \"ko\",\r\n    \"kr\",\r\n    \"ks\",\r\n    \"ku\",\r\n    \"kv\",\r\n    \"kw\",\r\n    \"ky\",\r\n    \"la\",\r\n    \"lb\",\r\n    \"lg\",\r\n    \"li\",\r\n    \"ln\",\r\n    \"lo\",\r\n    \"lt\",\r\n    \"lu\",\r\n    \"lv\",\r\n    \"mg\",\r\n    \"mh\",\r\n    \"mi\",\r\n    \"mk\",\r\n    \"ml\",\r\n    \"mn\",\r\n    \"mr\",\r\n    \"ms\",\r\n    \"my\",\r\n    \"na\",\r\n    \"nb\",\r\n    \"nd\",\r\n    \"ne\",\r\n    \"ng\",\r\n    \"nl\",\r\n    \"nn\",\r\n    \"no\",\r\n    \"nr\",\r\n    \"nv\",\r\n    \"ny\",\r\n    \"oc\",\r\n    \"oj\",\r\n    \"om\",\r\n    \"or\",\r\n    \"os\",\r\n    \"pa\",\r\n    \"pi\",\r\n    \"ps\",\r\n    \"pt\",\r\n    \"qu\",\r\n    \"rc\",\r\n    \"rm\",\r\n    \"rn\",\r\n    \"ro\",\r\n    \"ru\",\r\n    \"rw\",\r\n    \"sa\",\r\n    \"sc\",\r\n    \"sd\",\r\n    \"se\",\r\n    \"sg\",\r\n    \"sh\",\r\n    \"si\",\r\n    \"sk\",\r\n    \"sl\",\r\n    \"sm\",\r\n    \"sn\",\r\n    \"so\",\r\n    \"sq\",\r\n    \"sr\",\r\n    \"ss\",\r\n    \"st\",\r\n    \"su\",\r\n    \"sv\",\r\n    \"sw\",\r\n    \"ta\",\r\n    \"te\",\r\n    \"tg\",\r\n    \"th\",\r\n    \"ti\",\r\n    \"tk\",\r\n    \"tl\",\r\n    \"tn\",\r\n    \"to\",\r\n    \"tr\",\r\n    \"ts\",\r\n    \"tt\",\r\n    \"tw\",\r\n    \"ty\",\r\n    \"ug\",\r\n    \"uk\",\r\n    \"ur\",\r\n    \"uz\",\r\n    \"ve\",\r\n    \"vi\",\r\n    \"vo\",\r\n    \"wa\",\r\n    \"wo\",\r\n    \"xh\",\r\n    \"yi\",\r\n    \"yo\",\r\n    \"za\",\r\n    \"zh\",\r\n    \"zu\",\r\n];\r\n\r\n/* Mining translations from https://www.loc.gov/standards/iso639-2/php/code_list.php */\r\n/*\r\nlet entries = {};\r\nlet items = $(\"body > table > tbody > tr > td > table:nth-child(6) tbody\").children;\r\nfor(const tr of items) {\r\n    const code = tr.children[1].innerText.trim();\r\n    if(code.length == 2) {\r\n        const english = tr.children[2].innerText.trim();\r\n        const french = tr.children[3].innerText.trim();\r\n        const german = tr.children[4].innerText.trim();\r\n        entries[code] = english;\r\n    }\r\n}\r\nconsole.log(entries);\r\n*/\r\n\r\n/* Mining translations from https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes */\r\n/*\r\nlet entries = {};\r\n$(\"#Table > tbody\").children().each((i,tr) => {\r\n    const code = tr.children[4].innerText.trim();\r\n    if(code.length == 2) {\r\n        const english = tr.children[2].innerText.trim();\r\n        entries[code] = english;\r\n    }\r\n});\r\nconsole.log(entries);\r\n*/\r\n","import {getDefaultLocale, SupportedLocale} from \"../../localization\";\r\nimport {LANGUAGES_CODES} from \"../../model/languages\";\r\nimport translations from \"../../constants/translations\";\r\nimport {\r\n    LoadCookiesPreferencesAction,\r\n    SaveCookiesPreferencesAction,\r\n    SetLocaleAction,\r\n    SetThemeAction,\r\n    SettingsAction,\r\n    SETTINGS_ACTION_TYPES,\r\n} from \"./actions\";\r\nimport {SettingsState} from \"../types\";\r\n\r\nfunction getLocalizedLanguageItems(locale: SupportedLocale) {\r\n    const dict = translations as {[key: string]: {[key: string]: unknown}};\r\n    const languageNames = (dict[locale].languageNames || dict[\"en\"].languageNames) as {[key: string]: string};\r\n    return LANGUAGES_CODES.map((code: string) => ({\r\n        label: languageNames[code] || `Missing translation (${code})`, //i18n.t(`languageNameM${code}`${code})s, // Cannot rely on i18n as it is not initialized yet\r\n        value: code,\r\n    }));\r\n}\r\n\r\nexport const initialState: SettingsState = {\r\n    userSettings: {\r\n        theme: \"light\",\r\n        locale: getDefaultLocale(),\r\n        cookies: {\r\n            auth: false,\r\n            cache: false,\r\n            settings: false,\r\n        },\r\n        cookieConsentDate: null,\r\n    },\r\n    localizedLanguageItems: getLocalizedLanguageItems(getDefaultLocale()),\r\n};\r\n\r\nexport const settingsReducer = (state: SettingsState = initialState, action: SettingsAction): SettingsState => {\r\n    switch (action.type) {\r\n        case SETTINGS_ACTION_TYPES.LOAD_COOKIES_PREFERENCES: {\r\n            const {preferences, consentDate} = action as LoadCookiesPreferencesAction;\r\n            return {\r\n                ...state,\r\n                userSettings: {...state.userSettings, cookieConsentDate: consentDate, cookies: preferences},\r\n            };\r\n        }\r\n        case SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES: {\r\n            const {preferences} = action as SaveCookiesPreferencesAction;\r\n            return {\r\n                ...state,\r\n                userSettings: {...state.userSettings, cookieConsentDate: new Date(Date.now()), cookies: preferences},\r\n            };\r\n        }\r\n        case SETTINGS_ACTION_TYPES.SET_THEME: {\r\n            const {theme} = action as SetThemeAction;\r\n            return {...state, userSettings: {...state.userSettings, theme}};\r\n        }\r\n        case SETTINGS_ACTION_TYPES.TOGGLE_THEME: {\r\n            const theme = state.userSettings.theme == \"light\" ? \"dark\" : \"light\";\r\n            return {...state, userSettings: {...state.userSettings, theme}};\r\n        }\r\n        case SETTINGS_ACTION_TYPES.SET_LOCALE: {\r\n            const {locale} = action as SetLocaleAction;\r\n            return {\r\n                ...state,\r\n                localizedLanguageItems: getLocalizedLanguageItems(locale),\r\n                userSettings: {...state.userSettings, locale},\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {stripSuperfluousOffers} from \"../../api/converters\";\r\nimport {OfferDto} from \"../../api/dto\";\r\nimport {AuthAction, AUTH_ACTION_TYPES, LogInSuccessAction} from \"../auth/actions\";\r\nimport {ProfileState} from \"../types\";\r\nimport {\r\n    CreateProfileSuccessAction,\r\n    FetchUserSuccessAction,\r\n    LoadProfileInterestsSuccessAction,\r\n    LoadProfileOffersSuccessAction,\r\n    ProfileAction,\r\n    PROFILE_ACTION_TYPES,\r\n    SetAvatarSuccessAction,\r\n    SetProfileFieldsSuccessAction,\r\n} from \"./actions\";\r\n\r\nexport const initialState: ProfileState = {\r\n    user: null,\r\n    offers: [],\r\n    offerIdToCategory: new Map(),\r\n    interests: [],\r\n};\r\n\r\nexport const profileReducer = (\r\n    state: ProfileState = initialState,\r\n    action: ProfileAction | AuthAction,\r\n): ProfileState => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {user} = action as LogInSuccessAction;\r\n            return {...state, user};\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_SET_FIELDS_SUCCESS: {\r\n            if (state.user) {\r\n                const {fields} = action as SetProfileFieldsSuccessAction;\r\n                if (fields.profileOffers) fields.profileOffers = stripSuperfluousOffers(fields.profileOffers);\r\n                return {\r\n                    ...state,\r\n                    user: {...state.user, profile: state.user.profile ? {...state.user.profile, ...fields} : undefined},\r\n                };\r\n            } else return {...state};\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            const {profile} = action as CreateProfileSuccessAction;\r\n            return state.user ? {...state, user: {...state.user, profile}} : state;\r\n        }\r\n        case PROFILE_ACTION_TYPES.LOAD_PROFILE_OFFERS_SUCCESS: {\r\n            const {offers} = action as LoadProfileOffersSuccessAction;\r\n            const offerIdToCategory = new Map(offers.map((o: OfferDto) => [o.id, o.category]));\r\n            return {...state, offers, offerIdToCategory};\r\n        }\r\n        case PROFILE_ACTION_TYPES.LOAD_PROFILE_INTERESTS_SUCCESS: {\r\n            const {interests} = action as LoadProfileInterestsSuccessAction;\r\n            // Sort alphabetically\r\n            interests.sort((a, b) => (a.id > b.id ? 1 : -1));\r\n            return {...state, interests};\r\n        }\r\n        case PROFILE_ACTION_TYPES.FETCH_USER_SUCCESS: {\r\n            const {user} = action as FetchUserSuccessAction;\r\n            return {...state, user};\r\n        }\r\n        case PROFILE_ACTION_TYPES.SET_AVATAR_SUCCESS: {\r\n            const {avatarUrl} = action as SetAvatarSuccessAction;\r\n            if (state.user === null) return {...state};\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    user: {...state.user, profile: state.user.profile ? {...state.user.profile, avatarUrl} : undefined},\r\n                };\r\n            }\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {...state, user: null};\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {Degree, Gender, LanguageLevel, Role} from \"../constants/profile-constants\";\r\nimport {UniversityKey} from \"../constants/universities\";\r\nimport {CountryCode} from \"../model/country-codes\";\r\n\r\n/* General response-related types */\r\n\r\n// Any response from the server should follow this structure\r\nexport type RequestResponse = SuccessfulRequestResponse | UnprocessableEntityRequestResponse | ErrorRequestResponse;\r\nexport type SuccessfulRequestResponse = {status: number; data: unknown} & {[key: string]: unknown};\r\nexport type PaginatedRequestResponse = SuccessfulRequestResponse & {\r\n    meta: {\r\n        currentPage: number;\r\n        itemCount: number;\r\n        itemsPerPage: number;\r\n        totalItems: number;\r\n        totalPages: number;\r\n    };\r\n    links: {\r\n        first: string;\r\n        last: string;\r\n        next: string;\r\n        previous: string;\r\n    };\r\n};\r\n\r\nexport type ErrorRequestResponse = {status: number; errorType: string; description: string};\r\n\r\n// Only on 422 status\r\nexport type UnprocessableEntityRequestResponse = ErrorRequestResponse & {\r\n    errors: {property: string; codes: {description: string; code: string}[]}[];\r\n};\r\n\r\nexport type RemoteValidationErrors = {general: string; fields: {[key: string]: string}};\r\n\r\n/* Specific DTOs */\r\n\r\nexport type SpokenLanguageDto = {\r\n    code: string;\r\n    level: LanguageLevel;\r\n};\r\n\r\nexport type UserRole = \"user\" | \"admin\";\r\n\r\nexport type ResponseUserDto = {\r\n    id: string;\r\n    role: UserRole;\r\n    email: string;\r\n    isVerified: boolean;\r\n    onboarded: boolean;\r\n    profile: ResponseProfileDto;\r\n};\r\n\r\nexport type TokenDto = {\r\n    expiresIn: number;\r\n    accessToken: string;\r\n};\r\n\r\nexport type LoginDto = {\r\n    user: ResponseUserDto;\r\n    token: TokenDto;\r\n};\r\n\r\nexport type CreateProfileDtoCommon = {\r\n    type: Role;\r\n    firstName: string;\r\n    lastName: string;\r\n    gender: Gender;\r\n    birthdate: string;\r\n    nationality: CountryCode;\r\n    languages: SpokenLanguageDto[];\r\n    interests: InterestDto[];\r\n    profileOffers: OfferValueDto[];\r\n    educationFields: EducationFieldDto[];\r\n};\r\n\r\nexport type CreateProfileDtoStudent = CreateProfileDtoCommon & {\r\n    degree: Degree;\r\n};\r\nexport type CreateProfileDtoStaff = CreateProfileDtoCommon & {\r\n    staffRoles: StaffRoleDto[];\r\n};\r\nexport type CreateProfileDto = CreateProfileDtoStudent | CreateProfileDtoStaff;\r\n\r\nexport type ResponseProfileDtoCommon = CreateProfileDtoCommon & {\r\n    id: string;\r\n    university: UniversityKey;\r\n    avatar: string;\r\n};\r\nexport type ResponseProfileDtoStudent = ResponseProfileDtoCommon & CreateProfileDtoStudent;\r\nexport type ResponseProfileDtoStaff = ResponseProfileDtoCommon & CreateProfileDtoStaff;\r\nexport type ResponseProfileDto = ResponseProfileDtoStudent | ResponseProfileDtoStaff;\r\n\r\nexport type ResponseProfileWithMatchInfoDto = {isMatched: boolean; roomId: string | null; profile: ResponseProfileDto};\r\n\r\nexport enum OfferCategory {\r\n    Discover = \"discover\",\r\n    Collaborate = \"collaborate\",\r\n    Meet = \"meet\",\r\n}\r\n\r\nexport type EducationFieldDto = {\r\n    id: string;\r\n};\r\n\r\nexport type StaffRoleDto = {\r\n    id: string;\r\n};\r\n\r\nexport type OfferDto = {\r\n    id: string;\r\n    category: OfferCategory;\r\n    allowChooseProfileType: boolean;\r\n    allowChooseGender: boolean;\r\n    allowInterRole: boolean;\r\n};\r\n\r\nexport type OfferValueDto = {\r\n    offerId: string;\r\n    allowStaff: boolean;\r\n    allowStudent: boolean;\r\n    allowMale: boolean;\r\n    allowFemale: boolean;\r\n    allowOther: boolean;\r\n};\r\n\r\nexport const initOfferValue = (o: OfferDto, val = false): OfferValueDto => {\r\n    const genderVal = val && o.allowChooseGender;\r\n    const typeVal = val && o.allowChooseProfileType;\r\n    return {\r\n        offerId: o.id,\r\n        allowFemale: genderVal,\r\n        allowMale: genderVal,\r\n        allowOther: genderVal,\r\n        allowStudent: typeVal,\r\n        allowStaff: typeVal,\r\n    };\r\n};\r\n\r\nexport type InterestDto = {\r\n    id: string;\r\n};\r\n\r\nexport type SignedUrlResponseDto = {\r\n    fileName: string;\r\n    s3Url: string;\r\n};\r\n\r\nexport type AvatarSuccessfulUpdatedDto = {\r\n    avatar: string;\r\n};\r\n\r\nexport type ChatRoomProfileDto = {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    avatar: string | null;\r\n    lastMessageSeenId: string | null;\r\n    lastMessageSeenDate: string | null;\r\n};\r\n\r\nexport type ResponseRoomDto = {\r\n    id: string;\r\n    profiles: ChatRoomProfileDto[];\r\n    lastMessage: ResponseChatMessageDto | null;\r\n};\r\n\r\nexport type ResponseChatMessageDto = {\r\n    roomId: string;\r\n    id: string;\r\n    senderId: string;\r\n    sent: boolean;\r\n    text: string;\r\n    updatedAt: string;\r\n};\r\n\r\nexport type ResponseChatMessageReadDto = {\r\n    roomId: string;\r\n    date: string;\r\n    messageId: string;\r\n    profileId: string;\r\n};\r\n\r\nexport type ResponseChatWritingDto = {\r\n    roomId: string;\r\n    profileId: string;\r\n    state: boolean;\r\n};\r\n\r\nexport enum MatchActionStatus {\r\n    Declined = \"declined\",\r\n    Blocked = \"blocked\",\r\n    Matched = \"matched\",\r\n    Requested = \"requested\",\r\n}\r\nexport const MATCH_ACTION_HISTORY_STATUSES: MatchActionStatus[] = [\r\n    MatchActionStatus.Declined,\r\n    MatchActionStatus.Blocked,\r\n    MatchActionStatus.Requested,\r\n];\r\n\r\nexport type MatchActionResponseDto = {\r\n    roomId: string | null;\r\n    status: MatchActionStatus;\r\n};\r\n\r\nexport type MatchHistoryItemDto = {\r\n    profile: ResponseProfileDto;\r\n    status: MatchActionStatus;\r\n    date: string;\r\n    id: string;\r\n};\r\n","import {convertDtoToHistoryItem, convertDtoToProfile} from \"../../api/converters\";\r\nimport {\r\n    MatchActionResponseDto,\r\n    MatchActionStatus,\r\n    MatchHistoryItemDto,\r\n    PaginatedRequestResponse,\r\n    ResponseProfileDto,\r\n    SuccessfulRequestResponse,\r\n} from \"../../api/dto\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {MatchingFiltersState, AppThunk} from \"../types\";\r\nimport {HISTORY_FETCH_LIMIT, PROFILES_FETCH_LIMIT} from \"../../constants/config\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {MatchHistoryItem} from \"../../model/matching\";\r\n\r\nexport enum MATCHING_ACTION_TYPES {\r\n    SET_FILTERS = \"MATCHING/SET_FILTERS\",\r\n    SET_OFFER_FILTER = \"MATCHING/SET_OFFER_FILTER\",\r\n\r\n    FETCH_PROFILES_BEGIN = \"MATCHING/FETCH_PROFILES_BEGIN\",\r\n    FETCH_PROFILES_FAILURE = \"MATCHING/FETCH_PROFILES_FAILURE\",\r\n    FETCH_PROFILES_SUCCESS = \"MATCHING/FETCH_PROFILES_SUCCESS\",\r\n    FETCH_PROFILES_REFRESH = \"MATCHING/FETCH_PROFILES_REFRESH\",\r\n\r\n    LIKE_PROFILE_SUCCESS = \"MATCHING/LIKE_PROFILE_SUCCESS\",\r\n    DISLIKE_PROFILE_SUCCESS = \"MATCHING/DISLIKE_PROFILE_SUCCESS\",\r\n    BLOCK_PROFILE_SUCCESS = \"MATCHING/BLOCK_PROFILE_SUCCESS\",\r\n\r\n    FETCH_MY_MATCHES_BEGIN = \"MATCHING/FETCH_MY_MATCHES_BEGIN\",\r\n    FETCH_MY_MATCHES_FAILURE = \"MATCHING/FETCH_MY_MATCHES_FAILURE\",\r\n    FETCH_MY_MATCHES_SUCCESS = \"MATCHING/FETCH_MY_MATCHES_SUCCESS\",\r\n\r\n    FETCH_HISTORY_BEGIN = \"MATCHING/FETCH_HISTORY_BEGIN\",\r\n    FETCH_HISTORY_FAILURE = \"MATCHING/FETCH_HISTORY_FAILURE\",\r\n    FETCH_HISTORY_SUCCESS = \"MATCHING/FETCH_HISTORY_SUCCESS\",\r\n    FETCH_HISTORY_REFRESH = \"MATCHING/FETCH_HISTORY_REFRESH\",\r\n\r\n    ACTION_CANCEL_SUCCESS = \"MATCHING/ACTION_CANCEL_SUCCESS\",\r\n    ACTION_CANCEL_FAILURE = \"MATCHING/ACTION_CANCEL_FAILURE\",\r\n\r\n    SET_HISTORY_FILTERS = \"MATCHING/SET_HISTORY_FILTERS\",\r\n}\r\n\r\nexport type SetOfferFilterAction = {\r\n    type: string;\r\n    offerId: string;\r\n    value: boolean;\r\n};\r\n\r\nexport type ResetMatchingFiltersAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetMatchingFiltersAction = {\r\n    type: string;\r\n    filters: Partial<MatchingFiltersState>;\r\n};\r\n\r\nexport type LikeProfileSuccessAction = {\r\n    type: string;\r\n    profileId: string;\r\n    matchStatus: MatchActionStatus;\r\n    roomId: string | null;\r\n};\r\n\r\nexport type DislikeProfileSuccessAction = {\r\n    type: string;\r\n    profileId: string;\r\n};\r\n\r\nexport type BlockProfileSuccessAction = {\r\n    type: string;\r\n    profileId: string;\r\n};\r\n\r\nexport type FetchProfilesRefreshAction = {\r\n    type: string;\r\n};\r\n\r\nexport type BeginFetchProfilesAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchProfilesFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchProfilesSuccessAction = {\r\n    type: string;\r\n    profiles: UserProfile[];\r\n    canFetchMore: boolean;\r\n};\r\n\r\nexport type BeginFetchMyMatchesAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchMyMatchesFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchMyMatchesSuccessAction = {\r\n    type: string;\r\n    profiles: UserProfile[];\r\n};\r\n\r\nexport type BeginFetchHistoryAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchHistoryFailureAction = {\r\n    type: string;\r\n};\r\n\r\nexport type FetchHistorySuccessAction = {\r\n    type: string;\r\n    items: MatchHistoryItem[];\r\n    canFetchMore: boolean;\r\n};\r\n\r\nexport type FetchHistoryRefreshAction = {\r\n    type: string;\r\n};\r\n\r\nexport type SetHistoryFiltersAction = {\r\n    type: string;\r\n    filters: {[key: string]: boolean};\r\n};\r\n\r\nexport type ActionCancelSuccessAction = {\r\n    type: string;\r\n    historyItemId: string;\r\n};\r\n\r\nexport type ActionCancelFailureAction = {\r\n    type: string;\r\n    historyItemId: string;\r\n};\r\n\r\nexport type MatchingAction =\r\n    | SetOfferFilterAction\r\n    | SetMatchingFiltersAction\r\n    | ResetMatchingFiltersAction\r\n    | BeginFetchProfilesAction\r\n    | FetchProfilesSuccessAction\r\n    | FetchProfilesFailureAction\r\n    | FetchProfilesRefreshAction\r\n    | LikeProfileSuccessAction\r\n    | DislikeProfileSuccessAction\r\n    | BlockProfileSuccessAction\r\n    | BeginFetchMyMatchesAction\r\n    | FetchMyMatchesFailureAction\r\n    | FetchMyMatchesSuccessAction\r\n    | SetHistoryFiltersAction\r\n    | ActionCancelSuccessAction\r\n    | ActionCancelFailureAction;\r\n\r\nexport const setOfferFilter = (offerId: string, value: boolean): SetOfferFilterAction => ({\r\n    type: MATCHING_ACTION_TYPES.SET_OFFER_FILTER,\r\n    offerId,\r\n    value,\r\n});\r\n\r\nexport const setMatchingFilters = (filters: Partial<MatchingFiltersState>): SetMatchingFiltersAction => ({\r\n    type: MATCHING_ACTION_TYPES.SET_FILTERS,\r\n    filters,\r\n});\r\n\r\nconst beginFetchProfiles = (): BeginFetchProfilesAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_BEGIN,\r\n});\r\n\r\nexport const fetchProfiles = (): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        auth: {token},\r\n        matching: {filters, profilesPagination},\r\n    } = getState();\r\n\r\n    if (!profilesPagination.canFetchMore) console.log(\"Cannot fetch more profiles\");\r\n\r\n    if (profilesPagination.fetching || !profilesPagination.canFetchMore) return;\r\n\r\n    dispatch(beginFetchProfiles());\r\n\r\n    // Replaces empty arrays with \"undefined\"\r\n    function notEmpty<T>(t: Array<T>) {\r\n        return t.length == 0 ? undefined : t;\r\n    }\r\n\r\n    const offers = Object.keys(filters.offers).filter((k) => filters.offers[k] === true);\r\n\r\n    const filterParams = {\r\n        universities: notEmpty(filters.universities),\r\n        spokenLanguages: notEmpty(filters.languages),\r\n        degrees: notEmpty(filters.degrees),\r\n        types: notEmpty(filters.types),\r\n        offers: notEmpty(offers),\r\n    };\r\n\r\n    const response = await requestBackend(\r\n        \"profiles\",\r\n        \"GET\",\r\n        {\r\n            page: profilesPagination.page,\r\n            limit: PROFILES_FETCH_LIMIT,\r\n            ...filterParams,\r\n        },\r\n        {},\r\n        token,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const paginated = response as PaginatedRequestResponse;\r\n        const profiles = (paginated.data as ResponseProfileDto[]).map(convertDtoToProfile);\r\n        const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n        dispatch(fetchProfilesSuccess(profiles, canFetchMore));\r\n    } else dispatch(fetchProfilesFailure());\r\n};\r\n\r\nconst fetchProfilesFailure = (): FetchProfilesFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_FAILURE,\r\n});\r\n\r\nconst fetchProfilesSuccess = (profiles: UserProfile[], canFetchMore: boolean): FetchProfilesSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_SUCCESS,\r\n    profiles,\r\n    canFetchMore,\r\n});\r\n\r\nexport const refreshFetchedProfiles = (): FetchProfilesRefreshAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_PROFILES_REFRESH,\r\n});\r\n\r\nconst likeProfileSuccess = (\r\n    profileId: string,\r\n    matchStatus: MatchActionStatus,\r\n    roomId: string | null,\r\n): LikeProfileSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.LIKE_PROFILE_SUCCESS,\r\n    profileId,\r\n    matchStatus,\r\n    roomId,\r\n});\r\n\r\nexport const likeProfile = (profileId: string): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"matching/like\", \"POST\", {}, {toProfileId: profileId}, token, true);\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const {status, roomId} = payload as MatchActionResponseDto;\r\n        dispatch(likeProfileSuccess(profileId, status, roomId));\r\n    }\r\n};\r\n\r\nconst dislikeProfileSuccess = (profileId: string): DislikeProfileSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.DISLIKE_PROFILE_SUCCESS,\r\n    profileId,\r\n});\r\n\r\nexport const dislikeProfile = (profileId: string): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"matching/decline\", \"POST\", {}, {toProfileId: profileId}, token, true);\r\n    if (response.status === HttpStatusCode.OK) dispatch(dislikeProfileSuccess(profileId));\r\n};\r\n\r\nconst blockProfileSuccess = (profileId: string): BlockProfileSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.BLOCK_PROFILE_SUCCESS,\r\n    profileId,\r\n});\r\n\r\nexport const blockProfile = (profileId: string): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"matching/block\", \"POST\", {}, {toProfileId: profileId}, token, true);\r\n    if (response.status === HttpStatusCode.OK) dispatch(blockProfileSuccess(profileId));\r\n};\r\n\r\nconst beginFetchMyMatches = (): BeginFetchMyMatchesAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_BEGIN,\r\n});\r\n\r\nconst fetchMyMatchesFailure = (): FetchMyMatchesFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_FAILURE,\r\n});\r\n\r\nconst fetchMyMatchesSuccess = (profiles: UserProfile[]): FetchMyMatchesSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_SUCCESS,\r\n    profiles,\r\n});\r\n\r\nexport const fetchMyMatches = (): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        auth: {token},\r\n        matching,\r\n    } = getState();\r\n    if (matching.fetchingMyMatches) return;\r\n\r\n    dispatch(beginFetchMyMatches());\r\n\r\n    const response = await requestBackend(\"matching\", \"GET\", {}, {}, token);\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        const profiles = (payload as ResponseProfileDto[]).map(convertDtoToProfile);\r\n        dispatch(fetchMyMatchesSuccess(profiles));\r\n    } else dispatch(fetchMyMatchesFailure());\r\n};\r\n\r\nconst beginFetchHistory = (): BeginFetchHistoryAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_BEGIN,\r\n});\r\n\r\nconst fetchHistoryFailure = (): FetchHistoryFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_FAILURE,\r\n});\r\n\r\nconst fetchHistorySuccess = (items: MatchHistoryItem[], canFetchMore: boolean): FetchHistorySuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_SUCCESS,\r\n    items,\r\n    canFetchMore,\r\n});\r\n\r\nexport const refreshFetchedHistory = (): FetchHistoryRefreshAction => ({\r\n    type: MATCHING_ACTION_TYPES.FETCH_HISTORY_REFRESH,\r\n});\r\n\r\nexport const fetchHistory = (search?: string): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        auth: {token},\r\n        matching: {historyPagination, historyFilters},\r\n    } = getState();\r\n\r\n    if (historyPagination.fetching || !historyPagination.canFetchMore) return;\r\n\r\n    dispatch(beginFetchHistory());\r\n\r\n    const response = await requestBackend(\r\n        \"matching/history\",\r\n        \"GET\",\r\n        {\r\n            page: historyPagination.page,\r\n            limit: HISTORY_FETCH_LIMIT,\r\n            status: Object.keys(historyFilters).filter((k) => historyFilters[k]),\r\n            search,\r\n        },\r\n        {},\r\n        token,\r\n        true,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const paginated = response as PaginatedRequestResponse;\r\n        const items = (paginated.data as MatchHistoryItemDto[]).map(convertDtoToHistoryItem);\r\n        const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n        dispatch(fetchHistorySuccess(items, canFetchMore));\r\n    } else dispatch(fetchHistoryFailure());\r\n};\r\n\r\nexport const setHistoryFilters = (filters: {[key: string]: boolean}): SetHistoryFiltersAction => ({\r\n    type: MATCHING_ACTION_TYPES.SET_HISTORY_FILTERS,\r\n    filters,\r\n});\r\n\r\nconst cancelActionFailure = (historyItemId: string): ActionCancelFailureAction => ({\r\n    type: MATCHING_ACTION_TYPES.ACTION_CANCEL_FAILURE,\r\n    historyItemId,\r\n});\r\n\r\nconst cancelActionSuccess = (historyItemId: string): ActionCancelSuccessAction => ({\r\n    type: MATCHING_ACTION_TYPES.ACTION_CANCEL_SUCCESS,\r\n    historyItemId,\r\n});\r\n\r\nexport const cancelMatchAction = (historyItemId: string): AppThunk<Promise<boolean>> => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\r\n        \"matching/cancel\",\r\n        \"POST\",\r\n        {},\r\n        {matchingEntityId: historyItemId},\r\n        token,\r\n        true,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        dispatch(cancelActionSuccess(historyItemId));\r\n        return true;\r\n    } else {\r\n        dispatch(cancelActionFailure(historyItemId));\r\n        return false;\r\n    }\r\n};\r\n","import {MATCH_ACTION_HISTORY_STATUSES} from \"../../api/dto\";\r\nimport {MatchHistoryItem} from \"../../model/matching\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {AUTH_ACTION_TYPES} from \"../auth/actions\";\r\nimport {initialPaginatedState, MatchingFiltersState, MatchingState} from \"../types\";\r\nimport {\r\n    MatchingAction,\r\n    MATCHING_ACTION_TYPES,\r\n    SetOfferFilterAction,\r\n    SetMatchingFiltersAction,\r\n    FetchProfilesSuccessAction,\r\n    DislikeProfileSuccessAction,\r\n    BlockProfileSuccessAction,\r\n    LikeProfileSuccessAction,\r\n    FetchMyMatchesSuccessAction,\r\n    FetchHistorySuccessAction,\r\n    SetHistoryFiltersAction,\r\n    ActionCancelSuccessAction,\r\n} from \"./actions\";\r\n\r\nexport const defaultMatchingFilters = (): MatchingFiltersState => ({\r\n    offers: {},\r\n    universities: [],\r\n    degrees: [],\r\n    languages: [],\r\n    types: [],\r\n});\r\n\r\nconst initialHistoryFilters = () => {\r\n    const filters: {[key: string]: boolean} = {};\r\n    MATCH_ACTION_HISTORY_STATUSES.forEach((k) => (filters[k] = true));\r\n    return filters;\r\n};\r\n\r\nexport const initialState: MatchingState = {\r\n    filters: defaultMatchingFilters(),\r\n    fetchedProfiles: [],\r\n    profilesPagination: initialPaginatedState(),\r\n    historyPagination: initialPaginatedState(),\r\n    historyFilters: initialHistoryFilters(),\r\n    historyItems: [],\r\n    myMatches: [],\r\n    fetchingMyMatches: false,\r\n};\r\n\r\nexport const matchingReducer = (state: MatchingState = initialState, action: MatchingAction): MatchingState => {\r\n    switch (action.type) {\r\n        case MATCHING_ACTION_TYPES.SET_OFFER_FILTER: {\r\n            const {offerId, value} = <SetOfferFilterAction>action;\r\n            return {\r\n                ...state,\r\n                filters: {\r\n                    ...state.filters,\r\n                    offers: {...state.filters.offers, [offerId]: value},\r\n                },\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.SET_FILTERS: {\r\n            const {filters} = <SetMatchingFiltersAction>action;\r\n            return {\r\n                ...state,\r\n                filters: {...state.filters, ...filters},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_BEGIN: {\r\n            return {...state, profilesPagination: {...state.profilesPagination, fetching: true}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_FAILURE: {\r\n            return {...state, profilesPagination: {...state.profilesPagination, fetching: false, canFetchMore: false}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_SUCCESS: {\r\n            const {profiles, canFetchMore} = <FetchProfilesSuccessAction>action;\r\n            const pagination = state.profilesPagination;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.concat(profiles),\r\n                profilesPagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_PROFILES_REFRESH: {\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: [],\r\n                profilesPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_BEGIN: {\r\n            return {...state, fetchingMyMatches: true};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_FAILURE: {\r\n            return {...state, fetchingMyMatches: false};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_MY_MATCHES_SUCCESS: {\r\n            const {profiles} = <FetchMyMatchesSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                myMatches: profiles,\r\n                fetchingMyMatches: false,\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.LIKE_PROFILE_SUCCESS: {\r\n            const {profileId} = <LikeProfileSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.filter((p: UserProfile) => p.id != profileId),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.DISLIKE_PROFILE_SUCCESS: {\r\n            const {profileId} = <DislikeProfileSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.filter((p: UserProfile) => p.id != profileId),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.BLOCK_PROFILE_SUCCESS: {\r\n            const {profileId} = <BlockProfileSuccessAction>action;\r\n            return {\r\n                ...state,\r\n                fetchedProfiles: state.fetchedProfiles.filter((p: UserProfile) => p.id != profileId),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_BEGIN: {\r\n            return {...state, historyPagination: {...state.historyPagination, fetching: true}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_FAILURE: {\r\n            return {...state, historyPagination: {...state.historyPagination, fetching: false, canFetchMore: false}};\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_SUCCESS: {\r\n            const {items, canFetchMore} = <FetchHistorySuccessAction>action;\r\n            const pagination = state.historyPagination;\r\n            return {\r\n                ...state,\r\n                historyItems: state.historyItems.concat(items),\r\n                historyPagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.FETCH_HISTORY_REFRESH: {\r\n            return {\r\n                ...state,\r\n                historyItems: [],\r\n                historyPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.SET_HISTORY_FILTERS: {\r\n            const {filters} = action as SetHistoryFiltersAction;\r\n            return {\r\n                ...state,\r\n                historyFilters: {...state.historyFilters, ...filters},\r\n            };\r\n        }\r\n        case MATCHING_ACTION_TYPES.ACTION_CANCEL_SUCCESS: {\r\n            const {historyItemId} = action as ActionCancelSuccessAction;\r\n            return {\r\n                ...state,\r\n                historyItems: state.historyItems.filter((it: MatchHistoryItem) => it.id !== historyItemId),\r\n            };\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {\r\n                ...state,\r\n                filters: defaultMatchingFilters(),\r\n                fetchedProfiles: [],\r\n                profilesPagination: initialPaginatedState(),\r\n                myMatches: [],\r\n                fetchingMyMatches: false,\r\n                historyItems: [],\r\n                historyPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import chatSocket from \"../../api/chat-socket\";\r\nimport {convertDtoToChatMessage, convertDtoToRoom} from \"../../api/converters\";\r\nimport {\r\n    PaginatedRequestResponse,\r\n    ResponseChatMessageDto,\r\n    ResponseChatMessageReadDto,\r\n    ResponseChatWritingDto,\r\n    ResponseRoomDto,\r\n    SuccessfulRequestResponse,\r\n} from \"../../api/dto\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {MESSAGES_FETCH_LIMIT, ROOMS_FETCH_LIMIT} from \"../../constants/config\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {ChatRoom, ChatRoomMessage} from \"../../model/chat-room\";\r\nimport {AppThunk} from \"../types\";\r\n\r\nexport enum MESSAGING_ACTION_TYPES {\r\n    FETCH_MATCH_ROOMS_BEGIN = \"MESSAGING/FETCH_MATCH_ROOMS_BEGIN\",\r\n    FETCH_MATCH_ROOMS_FAILURE = \"MESSAGING/FETCH_MATCH_ROOMS_FAILURE\",\r\n    FETCH_MATCH_ROOMS_SUCCESS = \"MESSAGING/FETCH_MATCH_ROOMS_SUCCESS\",\r\n    FETCH_MATCH_ROOMS_REFRESH = \"MESSAGING/FETCH_MATCH_ROOMS_REFRESH\",\r\n    CONNECT_TO_CHAT_BEGIN = \"MESSAGING/CONNECT_TO_CHAT_BEGIN\",\r\n    CONNECT_TO_CHAT_FAILURE = \"MESSAGING/CONNECT_TO_CHAT_FAILURE\",\r\n    CONNECT_TO_CHAT_SUCCESS = \"MESSAGING/CONNECT_TO_CHAT_SUCCESS\",\r\n    DISCONNECT_FROM_CHAT = \"MESSAGING/DISCONNECT_FROM_CHAT\",\r\n    JOIN_CHAT_ROOM_BEGIN = \"MESSAGING/JOIN_CHAT_ROOM_BEGIN\",\r\n    JOIN_CHAT_ROOM_FAILURE = \"MESSAGING/JOIN_CHAT_ROOM_FAILURE\",\r\n    JOIN_CHAT_ROOM_SUCCESS = \"MESSAGING/JOIN_CHAT_ROOM_SUCCESS\",\r\n    LEAVE_ROOM = \"MESSAGING/LEAVE_ROOM\",\r\n    SEND_MESSAGE_FAILURE = \"MESSAGING/SEND_MESSAGE_FAILURE\",\r\n    SEND_MESSAGE_SUCCESS = \"MESSAGING/SEND_MESSAGE_SUCCESS\",\r\n    RECEIVE_MESSAGE = \"MESSAGING/RECEIVE_MESSAGE\",\r\n    RECEIVE_WRITING_STATE = \"MESSAGING/RECEIVE_WRITING_STATE\",\r\n    READ_MESSAGE = \"MESSAGING/READ_MESSAGE\",\r\n    FETCH_EARLIER_MESSAGES_BEGIN = \"MESSAGING/FETCH_EARLIER_MESSAGES_BEGIN\",\r\n    FETCH_EARLIER_MESSAGES_FAILURE = \"MESSAGING/FETCH_EARLIER_MESSAGES_FAILURE\",\r\n    FETCH_EARLIER_MESSAGES_SUCCESS = \"MESSAGING/FETCH_EARLIER_MESSAGES_SUCCESS\",\r\n}\r\n\r\nexport type FetchMatchRoomsBeginAction = {type: string};\r\nexport type FetchMatchRoomsFailureAction = {type: string};\r\nexport type FetchMatchRoomsSuccessAction = {\r\n    type: string;\r\n    rooms: ChatRoom[];\r\n    canFetchMore: boolean;\r\n};\r\nexport type FetchMatchRoomsRefreshAction = {type: string};\r\n\r\nexport type ConnectToChatBeginAction = {type: string};\r\nexport type ConnectToChatFailureAction = {type: string};\r\nexport type ConnectToChatSuccessAction = {type: string};\r\n\r\nexport type JoinChatRoomBeginAction = {type: string; room: ChatRoom};\r\nexport type JoinChatRoomFailureAction = {type: string};\r\nexport type JoinChatRoomSuccessAction = {type: string; room: ChatRoom};\r\nexport type LeaveChatRoomAction = {type: string};\r\n\r\nexport type DisconnectFromChatAction = {type: string};\r\n\r\nexport type SendMessageFailureAction = {type: string};\r\nexport type SendMessageSuccessAction = {type: string; message: ChatRoomMessage};\r\nexport type ReceiveChatMessageAction = {type: string; message: ResponseChatMessageDto};\r\nexport type ReceiveChatWritingAction = {type: string; payload: ResponseChatWritingDto};\r\nexport type ReadChatMessageAction = {type: string; payload: ResponseChatMessageReadDto};\r\n\r\nexport type FetchEarlierMessagesBeginAction = {type: string; room: ChatRoom};\r\nexport type FetchEarlierMessagesFailureAction = {type: string; room: ChatRoom};\r\nexport type FetchEarlierMessagesSuccessAction = {\r\n    type: string;\r\n    room: ChatRoom;\r\n    messages: ChatRoomMessage[];\r\n    canFetchMore: boolean;\r\n};\r\n\r\nexport type MessagingAction =\r\n    | FetchMatchRoomsFailureAction\r\n    | FetchMatchRoomsSuccessAction\r\n    | FetchMatchRoomsRefreshAction\r\n    | ConnectToChatBeginAction\r\n    | ConnectToChatFailureAction\r\n    | ConnectToChatSuccessAction\r\n    | JoinChatRoomBeginAction\r\n    | JoinChatRoomFailureAction\r\n    | JoinChatRoomSuccessAction\r\n    | LeaveChatRoomAction\r\n    | DisconnectFromChatAction\r\n    | SendMessageFailureAction\r\n    | SendMessageSuccessAction\r\n    | ReceiveChatMessageAction\r\n    | FetchEarlierMessagesBeginAction\r\n    | FetchEarlierMessagesFailureAction\r\n    | FetchEarlierMessagesSuccessAction;\r\n\r\nconst beginFetchMatchRooms = (): FetchMatchRoomsBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_BEGIN,\r\n});\r\n\r\nconst fetchMatchRoomsFailure = (): FetchMatchRoomsFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_FAILURE,\r\n});\r\n\r\nconst fetchMatchRoomsSuccess = (rooms: ChatRoom[], canFetchMore: boolean): FetchMatchRoomsSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_SUCCESS,\r\n    rooms,\r\n    canFetchMore,\r\n});\r\n\r\nexport const fetchMatchRooms = (search?: string): AppThunk => async (dispatch, getState) => {\r\n    const state = getState();\r\n    const token = state.auth.token;\r\n    const pagination = state.messaging.matchRoomsPagination;\r\n\r\n    if (pagination.fetching || !pagination.canFetchMore) return;\r\n\r\n    dispatch(beginFetchMatchRooms());\r\n\r\n    const response = await requestBackend(\r\n        \"rooms\",\r\n        \"GET\",\r\n        {page: pagination.page, limit: ROOMS_FETCH_LIMIT, search},\r\n        {},\r\n        token,\r\n    );\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const paginated = response as PaginatedRequestResponse;\r\n        const rooms = (paginated.data as ResponseRoomDto[]).map(convertDtoToRoom);\r\n        const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n        dispatch(fetchMatchRoomsSuccess(rooms, canFetchMore));\r\n    } else dispatch(fetchMatchRoomsFailure());\r\n};\r\n\r\nexport const refreshMatchRooms = (): FetchMatchRoomsRefreshAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_REFRESH,\r\n});\r\n\r\nconst connectToChatBegin = (): ConnectToChatBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_BEGIN,\r\n});\r\n\r\nconst connectToChatFailure = (): ConnectToChatFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_FAILURE,\r\n});\r\n\r\nconst connectToChatSuccess = (): ConnectToChatSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_SUCCESS,\r\n});\r\n\r\nexport const connectToChat = (callback?: (connected: boolean) => void): AppThunk => async (dispatch, getState) => {\r\n    const {connected, connecting} = getState().messaging.socketState;\r\n    const authToken = getState().auth.token;\r\n\r\n    const fail = () => {\r\n        dispatch(connectToChatFailure());\r\n        if (callback) callback(false);\r\n    };\r\n\r\n    if (connected) {\r\n        if (callback) callback(true);\r\n    } else if (authToken) {\r\n        if (!connecting) {\r\n            dispatch(connectToChatBegin());\r\n            chatSocket.connect(\r\n                authToken,\r\n                {\r\n                    onMessageReceived: (m) => {\r\n                        const {activeRoom} = getState().messaging;\r\n                        // Tell the server we've read the message if this is the active room\r\n                        if (activeRoom && m.roomId == activeRoom.id)\r\n                            chatSocket.readMessage(activeRoom.id, m.id, m.updatedAt);\r\n                        dispatch(receiveChatMessage(m));\r\n                    },\r\n                    onMessageRead: (p) => dispatch(readChatMessage(p)),\r\n                    onWritingStateChange: (m) => dispatch(receiveChatWriting(m)),\r\n                },\r\n                (hasConnected: boolean) => {\r\n                    if (hasConnected) {\r\n                        dispatch(connectToChatSuccess());\r\n                        if (callback) callback(true);\r\n                    } else fail();\r\n                },\r\n            );\r\n        }\r\n    } else fail();\r\n};\r\n\r\nexport const disconnectFromChat = (): DisconnectFromChatAction => {\r\n    chatSocket.disconnect();\r\n    return {type: MESSAGING_ACTION_TYPES.DISCONNECT_FROM_CHAT};\r\n};\r\n\r\nconst joinChatRoomBegin = (room: ChatRoom): JoinChatRoomBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_BEGIN,\r\n    room,\r\n});\r\n\r\nconst joinChatRoomFailure = (): JoinChatRoomFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_FAILURE,\r\n});\r\n\r\nconst joinChatRoomSuccess = (room: ChatRoom): JoinChatRoomSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_SUCCESS,\r\n    room,\r\n});\r\n\r\nexport const joinChatRoom = (room: ChatRoom): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        socketState: {connected},\r\n        activeRoom,\r\n    } = getState().messaging;\r\n\r\n    if (activeRoom || !connected) dispatch(joinChatRoomFailure());\r\n    else {\r\n        dispatch(joinChatRoomBegin(room));\r\n        chatSocket.joinRoom(room);\r\n        dispatch(joinChatRoomSuccess(room));\r\n    }\r\n};\r\n\r\nexport const leaveChatRoom = (room: ChatRoom): LeaveChatRoomAction => {\r\n    chatSocket.leaveRoom(room);\r\n    return {type: MESSAGING_ACTION_TYPES.LEAVE_ROOM};\r\n};\r\n\r\nconst sendChatMessageFailure = (): SendMessageFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.SEND_MESSAGE_FAILURE,\r\n});\r\n\r\nconst sendChatMessageSuccess = (message: ChatRoomMessage): SendMessageSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.SEND_MESSAGE_SUCCESS,\r\n    message,\r\n});\r\n\r\nexport const sendChatMessage = (id: string, text: string, createdAt: Date): AppThunk => async (dispatch, getState) => {\r\n    const {\r\n        socketState: {connected},\r\n        activeRoom,\r\n        localChatUser,\r\n    } = getState().messaging;\r\n\r\n    if (connected && activeRoom && localChatUser) {\r\n        const message: ChatRoomMessage = {\r\n            _id: id,\r\n            createdAt,\r\n            user: localChatUser,\r\n            text,\r\n            sent: false,\r\n        };\r\n        dispatch(sendChatMessageSuccess(message));\r\n        chatSocket.sendMessage(activeRoom.id, id, text);\r\n    } else dispatch(sendChatMessageFailure());\r\n};\r\n\r\nconst receiveChatMessage = (message: ResponseChatMessageDto): ReceiveChatMessageAction => ({\r\n    type: MESSAGING_ACTION_TYPES.RECEIVE_MESSAGE,\r\n    message,\r\n});\r\n\r\nconst receiveChatWriting = (payload: ResponseChatWritingDto): ReceiveChatWritingAction => ({\r\n    type: MESSAGING_ACTION_TYPES.RECEIVE_WRITING_STATE,\r\n    payload,\r\n});\r\n\r\nconst readChatMessage = (payload: ResponseChatMessageReadDto): ReadChatMessageAction => ({\r\n    type: MESSAGING_ACTION_TYPES.READ_MESSAGE,\r\n    payload,\r\n});\r\n\r\nconst beginFetchEarlierMessages = (room: ChatRoom): FetchEarlierMessagesBeginAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_BEGIN,\r\n    room,\r\n});\r\n\r\nconst fetchEarlierMessagesFailure = (room: ChatRoom): FetchEarlierMessagesFailureAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_FAILURE,\r\n    room,\r\n});\r\n\r\nconst fetchEarlierMessagesSuccess = (\r\n    room: ChatRoom,\r\n    messages: ChatRoomMessage[],\r\n    canFetchMore: boolean,\r\n): FetchEarlierMessagesSuccessAction => ({\r\n    type: MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_SUCCESS,\r\n    room,\r\n    messages,\r\n    canFetchMore,\r\n});\r\n\r\nexport const fetchEarlierMessages = (room: ChatRoom): AppThunk => async (dispatch, getState) => {\r\n    const state = getState();\r\n    const {\r\n        socketState: {connected},\r\n        localChatUser,\r\n    } = state.messaging;\r\n    const token = state.auth.token;\r\n    const pagination = room.messagePagination;\r\n\r\n    if (pagination.fetching || !pagination.canFetchMore) return;\r\n\r\n    if (connected && localChatUser) {\r\n        dispatch(beginFetchEarlierMessages(room));\r\n\r\n        // Fetch messages only before the date of the earliest message we have\r\n        const beforeDate =\r\n            room.messages.length > 0 ? room.messages[room.messages.length - 1].createdAt.toJSON() : undefined;\r\n\r\n        const response = await requestBackend(\r\n            `rooms/${room.id}/messages`,\r\n            \"GET\",\r\n            {page: pagination.page, limit: MESSAGES_FETCH_LIMIT, beforeDate},\r\n            {},\r\n            token,\r\n        );\r\n\r\n        const convertDto = (dto: ResponseChatMessageDto): ChatRoomMessage | undefined => {\r\n            const user = room.users.find((u) => u._id === dto.senderId);\r\n            return user ? convertDtoToChatMessage(user, dto) : undefined;\r\n        };\r\n\r\n        if (response.status === HttpStatusCode.OK) {\r\n            const paginated = response as PaginatedRequestResponse;\r\n            const messages = (paginated.data as ResponseChatMessageDto[])\r\n                .map(convertDto)\r\n                .filter((m) => m !== undefined);\r\n            const canFetchMore = paginated.meta.currentPage < paginated.meta.totalPages;\r\n            dispatch(fetchEarlierMessagesSuccess(room, messages as ChatRoomMessage[], canFetchMore));\r\n            return;\r\n        }\r\n    }\r\n\r\n    dispatch(fetchEarlierMessagesFailure(room));\r\n};\r\n\r\nexport const fetchMatchRoom = (roomId: string): AppThunk<Promise<ChatRoom | null>> => async (dispatch, getState) => {\r\n    const {token} = getState().auth;\r\n\r\n    const response = await requestBackend(`rooms/${roomId}`, \"GET\", {}, {}, token);\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        const payload = (response as SuccessfulRequestResponse).data;\r\n        return convertDtoToRoom(payload as ResponseRoomDto);\r\n    } else return null;\r\n};\r\n","import io from \"socket.io-client\";\r\nimport {BACKEND_URL} from \"../constants/config\";\r\nimport {ChatRoom} from \"../model/chat-room\";\r\nimport {ResponseChatWritingDto, ResponseChatMessageDto, TokenDto, ResponseChatMessageReadDto} from \"./dto\";\r\n\r\nconst SOCKET_LOCATION = `${BACKEND_URL}/chat`;\r\n\r\nconst WRITING_STATE_DELAY = 1000;\r\nconst CONNECT_TIMEOUT = 6500;\r\nconst RECONNECT_DELAY = 2000;\r\nconst RECONNECT_ATTEMPTS = 3;\r\n\r\nexport type ChatSocketEventListeners = {\r\n    onMessageReceived: (m: ResponseChatMessageDto) => void;\r\n    onWritingStateChange: (m: ResponseChatWritingDto) => void;\r\n    onMessageRead: (m: ResponseChatMessageReadDto) => void;\r\n};\r\n\r\nclass ChatSocket {\r\n    private socket: SocketIOClient.Socket | null;\r\n    private connectCallbacks: ((connected: boolean) => void)[];\r\n    private writingTimeout: NodeJS.Timeout | null;\r\n    private lastSentWritingState: boolean;\r\n    private connecting: boolean;\r\n    private connected: boolean;\r\n\r\n    constructor() {\r\n        this.socket = null;\r\n        this.connectCallbacks = [];\r\n        this.writingTimeout = null;\r\n        this.lastSentWritingState = false;\r\n        this.connecting = false;\r\n        this.connected = false;\r\n    }\r\n\r\n    private consumeConnectCallbacks(connectedState: boolean) {\r\n        this.connectCallbacks.forEach((f) => f(connectedState));\r\n        this.connectCallbacks = [];\r\n    }\r\n\r\n    private registerListeners(listeners: ChatSocketEventListeners) {\r\n        if (!this.socket) return;\r\n\r\n        this.socket.on(\"connect\", () => {\r\n            console.log(\"[ChatSocket] connected\");\r\n            this.consumeConnectCallbacks(true);\r\n            this.connecting = false;\r\n            this.connected = true;\r\n        });\r\n\r\n        this.socket.on(\"connect_failed\", () => {\r\n            console.log(\"[ChatSocket] connect_failed\");\r\n        });\r\n        this.socket.on(\"connect_error\", () => {\r\n            console.log(\"[ChatSocket] connect_error\");\r\n        });\r\n\r\n        this.socket.on(\"close\", () => {\r\n            this.connecting = false;\r\n            this.connected = false;\r\n            console.log(\"[ChatSocket] close\");\r\n        });\r\n\r\n        this.socket.on(\"error\", () => {\r\n            console.log(\"[ChatSocket]\", \"Error.\");\r\n        });\r\n\r\n        this.socket.on(\"exception\", (e: unknown) => {\r\n            console.log(\"[ChatSocket] <----\", \"Exception\", JSON.stringify(e));\r\n        });\r\n\r\n        this.socket.on(\"disconnect\", () => {\r\n            this.connecting = false;\r\n            this.connected = false;\r\n            console.log(\"[ChatSocket] disconnected\");\r\n        });\r\n\r\n        this.socket.on(\"receiveMessage\", (m: ResponseChatMessageDto) => listeners.onMessageReceived(m));\r\n        this.socket.on(\"readMessage\", (m: ResponseChatMessageReadDto) => listeners.onMessageRead(m));\r\n        this.socket.on(\"isWriting\", (m: ResponseChatWritingDto) => listeners.onWritingStateChange(m));\r\n    }\r\n\r\n    private emit(msg: string, payload: unknown) {\r\n        console.log(`[ChatSocket] ----> '${msg}' - payload: ${JSON.stringify(payload)}`);\r\n        this.socket?.emit(msg, payload);\r\n    }\r\n\r\n    private sendWritingState(room: ChatRoom, state: boolean) {\r\n        this.lastSentWritingState = state;\r\n        this.emit(\"isWriting\", {roomId: room.id, state});\r\n    }\r\n\r\n    private refreshWritingTimeout(room: ChatRoom) {\r\n        if (this.writingTimeout !== null) {\r\n            clearTimeout(this.writingTimeout);\r\n            this.writingTimeout = null;\r\n        }\r\n        this.writingTimeout = setTimeout(() => {\r\n            this.sendWritingState(room, false);\r\n        }, WRITING_STATE_DELAY);\r\n    }\r\n\r\n    connect(authToken: TokenDto, listeners: ChatSocketEventListeners, callback?: (connected: boolean) => void) {\r\n        console.log(\"Connecting to\", SOCKET_LOCATION);\r\n\r\n        if (callback) this.connectCallbacks.push(callback);\r\n\r\n        // Check if we're already attempting to connect\r\n        if (this.connecting) return;\r\n        this.connecting = true;\r\n\r\n        if (this.socket) this.socket.connect();\r\n        else {\r\n            console.log(\"[ChatSocket] ----> Authenticating - token =\", authToken.accessToken);\r\n            this.socket = io(SOCKET_LOCATION, {\r\n                query: {authorization: authToken.accessToken},\r\n                reconnectionDelay: RECONNECT_DELAY,\r\n                reconnectionAttempts: RECONNECT_ATTEMPTS,\r\n            });\r\n            this.registerListeners(listeners);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (!this.connected) {\r\n                this.connecting = false;\r\n                this.consumeConnectCallbacks(false);\r\n            }\r\n        }, CONNECT_TIMEOUT);\r\n    }\r\n\r\n    joinRoom(room: ChatRoom) {\r\n        this.emit(\"joinRoom\", {roomId: room.id});\r\n        // Inform the server that we have read the last message of the room\r\n        if (room.lastMessage) this.readMessage(room.id, room.lastMessage._id, room.lastMessage.createdAt.toJSON());\r\n    }\r\n\r\n    leaveRoom(room: ChatRoom) {\r\n        this.emit(\"leaveRoom\", {roomId: room.id});\r\n    }\r\n\r\n    sendMessage(roomId: string, id: string, text: string) {\r\n        this.emit(\"sendMessage\", {roomId, id, text});\r\n    }\r\n\r\n    readMessage(roomId: string, messageId: string, createdAt: string) {\r\n        this.emit(\"readMessage\", {roomId, messageId, date: createdAt});\r\n    }\r\n\r\n    setWriting(room: ChatRoom) {\r\n        // Refesh the timeout - in a fixed amount of time, this will tell the server we are no longer writing\r\n        this.refreshWritingTimeout(room);\r\n\r\n        // If we are beginning to write, inform the server now\r\n        if (this.lastSentWritingState === false) this.sendWritingState(room, true);\r\n    }\r\n\r\n    disconnect() {\r\n        if (this.socket) this.socket.disconnect();\r\n    }\r\n}\r\n\r\nexport default new ChatSocket();\r\n","import {convertDtoToChatMessage} from \"../../api/converters\";\r\nimport {ChatRoom, ChatRoomMessage, ChatRoomUser} from \"../../model/chat-room\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {AUTH_ACTION_TYPES, LogInSuccessAction} from \"../auth/actions\";\r\nimport {CreateProfileSuccessAction, FetchUserSuccessAction, PROFILE_ACTION_TYPES} from \"../profile/actions\";\r\nimport {MessagingState, initialPaginatedState} from \"../types\";\r\nimport {\r\n    FetchEarlierMessagesBeginAction,\r\n    FetchEarlierMessagesFailureAction,\r\n    FetchEarlierMessagesSuccessAction,\r\n    FetchMatchRoomsSuccessAction,\r\n    JoinChatRoomSuccessAction,\r\n    MessagingAction,\r\n    MESSAGING_ACTION_TYPES,\r\n    ReadChatMessageAction,\r\n    ReceiveChatMessageAction,\r\n    ReceiveChatWritingAction,\r\n    SendMessageSuccessAction,\r\n} from \"./actions\";\r\n\r\nexport const initialState: MessagingState = {\r\n    matchRooms: {},\r\n    matchRoomsOrdered: [],\r\n    matchRoomsPagination: initialPaginatedState(),\r\n    socketState: {connected: false, connecting: false},\r\n    activeRoom: null,\r\n    localChatUser: null,\r\n};\r\n\r\nfunction toLocalChatUser(profile: UserProfile): ChatRoomUser | null {\r\n    return {\r\n        _id: profile.id,\r\n        name: `${profile.firstName} ${profile.lastName}`,\r\n        avatar: profile.avatarUrl || \"\",\r\n        lastMessageSeenDate: null,\r\n        lastMessageSeenId: null,\r\n    };\r\n}\r\n\r\n// TODO reset rooms when disconnecting from chat?\r\n\r\nexport const messagingReducer = (state: MessagingState = initialState, action: MessagingAction): MessagingState => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {user} = action as LogInSuccessAction;\r\n            return user.profile ? {...state, localChatUser: toLocalChatUser(user.profile)} : {...state};\r\n        }\r\n        case PROFILE_ACTION_TYPES.FETCH_USER_SUCCESS: {\r\n            const {user} = action as FetchUserSuccessAction;\r\n            return user.profile ? {...state, localChatUser: toLocalChatUser(user.profile)} : {...state};\r\n        }\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            const {profile} = action as CreateProfileSuccessAction;\r\n            return {...state, localChatUser: toLocalChatUser(profile)};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_BEGIN: {\r\n            return {...state, matchRoomsPagination: {...state.matchRoomsPagination, fetching: true}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_FAILURE: {\r\n            return {\r\n                ...state,\r\n                matchRoomsPagination: {...state.matchRoomsPagination, fetching: false, canFetchMore: false},\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_SUCCESS: {\r\n            const {rooms, canFetchMore} = <FetchMatchRoomsSuccessAction>action;\r\n            const pagination = state.matchRoomsPagination;\r\n            const matchRooms = {...state.matchRooms};\r\n            // Add entries in the rooms dictionary\r\n            rooms.forEach((r: ChatRoom) => (matchRooms[r.id] = r));\r\n\r\n            return {\r\n                ...state,\r\n                matchRooms,\r\n                matchRoomsOrdered: state.matchRoomsOrdered.concat(rooms.map((r: ChatRoom) => r.id)),\r\n                matchRoomsPagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_MATCH_ROOMS_REFRESH: {\r\n            return {\r\n                ...state,\r\n                matchRooms: {},\r\n                matchRoomsOrdered: [],\r\n                matchRoomsPagination: initialPaginatedState(),\r\n            };\r\n        }\r\n        case MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_BEGIN: {\r\n            return {...state, socketState: {connected: false, connecting: true}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_FAILURE: {\r\n            return {...state, socketState: {connected: false, connecting: false}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.CONNECT_TO_CHAT_SUCCESS: {\r\n            return {...state, socketState: {connected: true, connecting: false}};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.DISCONNECT_FROM_CHAT: {\r\n            return {...state, socketState: {connected: false, connecting: false}, activeRoom: null};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.JOIN_CHAT_ROOM_SUCCESS: {\r\n            const {room} = action as JoinChatRoomSuccessAction;\r\n            return {...state, activeRoom: room};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.LEAVE_ROOM: {\r\n            return {...state, activeRoom: null};\r\n        }\r\n        case MESSAGING_ACTION_TYPES.SEND_MESSAGE_SUCCESS: {\r\n            const {message} = action as SendMessageSuccessAction;\r\n            if (state.activeRoom) {\r\n                return updateRoom(state, true, {\r\n                    ...state.activeRoom,\r\n                    messages: [message].concat(state.activeRoom.messages),\r\n                    lastMessage: message,\r\n                });\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.RECEIVE_MESSAGE: {\r\n            const {message} = action as ReceiveChatMessageAction;\r\n\r\n            let room = state.matchRooms[message.roomId];\r\n            if (room) {\r\n                room = {...room};\r\n                // Start by checking if this is an existing message (e.g. our own message)\r\n                const existingMessage = room.messages.find((m: ChatRoomMessage) => m._id === message.id);\r\n                if (existingMessage) {\r\n                    const msg = {...existingMessage, sent: true, text: message.text};\r\n\r\n                    // Update the message in the list\r\n                    room.messages = room.messages.map((m: ChatRoomMessage) => (m._id === message.id ? msg : m));\r\n\r\n                    // Also update the last message\r\n                    if (!room.lastMessage || msg.createdAt >= room.lastMessage.createdAt) room.lastMessage = msg;\r\n                } else {\r\n                    const user = room.users.find((u: ChatRoomUser) => u._id == message.senderId);\r\n                    if (user) {\r\n                        const msg = convertDtoToChatMessage(user, message);\r\n                        room.messages = [msg].concat(room.messages);\r\n                        room.lastMessage = msg;\r\n                        room.writing[message.senderId] = false;\r\n                    }\r\n                }\r\n                return updateRoom(state, true, room);\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.RECEIVE_WRITING_STATE: {\r\n            const payload = (action as ReceiveChatWritingAction).payload;\r\n            const {profileId, roomId} = payload;\r\n\r\n            // Just ignore if this is about our own writing state\r\n            if (state.localChatUser && state.localChatUser._id === profileId) return state;\r\n\r\n            const room = state.matchRooms[roomId];\r\n            if (room) {\r\n                return updateRoom(state, false, {\r\n                    ...room,\r\n                    writing: {...room.writing, [profileId]: payload.state},\r\n                });\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.READ_MESSAGE: {\r\n            const {roomId, date, messageId, profileId} = (action as ReadChatMessageAction).payload;\r\n\r\n            const room = state.matchRooms[roomId];\r\n            if (room) {\r\n                return updateRoom(state, false, {\r\n                    ...room,\r\n                    users: room.users.map((u: ChatRoomUser) =>\r\n                        u._id == profileId\r\n                            ? {...u, lastMessageSeenDate: new Date(date), lastMessageSeenId: messageId}\r\n                            : u,\r\n                    ),\r\n                });\r\n            }\r\n            return state;\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_BEGIN: {\r\n            const {room} = action as FetchEarlierMessagesBeginAction;\r\n            return updateRoom(state, false, {\r\n                ...room,\r\n                messagePagination: {...room.messagePagination, fetching: true},\r\n            });\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_FAILURE: {\r\n            const {room} = action as FetchEarlierMessagesFailureAction;\r\n            return updateRoom(state, false, {\r\n                ...room,\r\n                messagePagination: {...room.messagePagination, fetching: false, canFetchMore: false},\r\n            });\r\n        }\r\n        case MESSAGING_ACTION_TYPES.FETCH_EARLIER_MESSAGES_SUCCESS: {\r\n            const {room, messages, canFetchMore} = action as FetchEarlierMessagesSuccessAction;\r\n            const pagination = room.messagePagination;\r\n            return updateRoom(state, false, {\r\n                ...room,\r\n                messages: room.messages.concat(messages),\r\n                messagePagination: {...pagination, fetching: false, page: pagination.page + 1, canFetchMore},\r\n            });\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            return {\r\n                ...state,\r\n                activeRoom: null,\r\n                matchRooms: {},\r\n                matchRoomsOrdered: [],\r\n                matchRoomsPagination: initialPaginatedState(),\r\n                localChatUser: null,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nfunction updateRoom(state: MessagingState, setAsFirst: boolean, room: ChatRoom): MessagingState {\r\n    const activeRoom = state.activeRoom && state.activeRoom.id == room.id ? room : state.activeRoom;\r\n\r\n    if (setAsFirst) {\r\n        const otherRooms = state.matchRoomsOrdered.filter((id: string) => id !== room.id);\r\n        return {\r\n            ...state,\r\n            matchRooms: {...state.matchRooms, [room.id]: room},\r\n            matchRoomsOrdered: [room.id].concat(otherRooms),\r\n            activeRoom,\r\n        };\r\n    } else {\r\n        return {\r\n            ...state,\r\n            matchRooms: {...state.matchRooms, [room.id]: room},\r\n            activeRoom,\r\n        };\r\n    }\r\n}\r\n","import {NotificationsState} from \"../types\";\r\nimport {NotificationsAction} from \"./actions\";\r\n\r\nexport const initialState: NotificationsState = {};\r\n\r\nexport const notificationsReducer = (\r\n    state: NotificationsState = initialState,\r\n    action: NotificationsAction,\r\n): NotificationsState => {\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {ReportsState} from \"../types\";\r\nimport {ReportAction} from \"./actions\";\r\n\r\nexport const initialState: ReportsState = {};\r\n\r\nexport const reportsReducer = (state: ReportsState = initialState, action: ReportAction): ReportsState => {\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import * as React from \"react\";\r\nimport {NavigationContainerRef} from \"@react-navigation/native\";\r\nimport {NavigatorRoute} from \"./types\";\r\nimport {Platform} from \"react-native\";\r\nimport {APP_SCHEME, WEB_TO_APP_TIMEOUT} from \"../constants/config\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Store a ref to the root navigator\r\nexport const rootNavigationRef = React.createRef<NavigationContainerRef>();\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\ntype RouteParams = Record<string, string | object | undefined | null>;\r\n\r\nexport function rootNavigate(route: NavigatorRoute, params?: RouteParams): void {\r\n    rootNavigationRef.current?.navigate(route as string, params);\r\n}\r\n\r\nexport function navigateBack(fallback?: NavigatorRoute): void {\r\n    const nav = rootNavigationRef.current;\r\n    if (nav) {\r\n        if (nav.canGoBack()) nav.goBack();\r\n        else if (fallback) nav.navigate(fallback);\r\n    }\r\n}\r\n\r\nexport function attemptRedirectToApp(routeName: string, fallbackRoute: NavigatorRoute): void {\r\n    const fallback = () => rootNavigate(fallbackRoute);\r\n\r\n    if (Platform.OS === \"web\") {\r\n        const link = `${APP_SCHEME}://${routeName}`;\r\n        window.location.replace(link);\r\n\r\n        // TODO look at Linking.openURL and Linking.canOpenURL\r\n        setTimeout(() => {\r\n            console.log(\r\n                `Failed to redirect to ${link} (perhaps app is not installed on this device) - Staying on web version`,\r\n            );\r\n            fallback();\r\n        }, WEB_TO_APP_TIMEOUT);\r\n    } else fallback();\r\n}\r\n\r\nexport function screenTitle(route: NavigatorRoute): string {\r\n    return i18n.t(`screenTitles.${route}`) + i18n.t(\"screenTitles.suffix\");\r\n}\r\n\r\nexport function headerTitle(route: NavigatorRoute): string {\r\n    return i18n.t(`screenTitles.${route}`);\r\n}\r\n\r\nexport function openChat(roomId: string): void {\r\n    rootNavigate(\"TabMessaging\", {screen: \"ChatScreen\", params: {roomId}});\r\n}\r\n","import {Platform} from \"react-native\";\r\nimport {AnyAction, Middleware, Dispatch} from \"redux\";\r\nimport {COOKIE_CONSENT_DURATION} from \"../constants/config\";\r\nimport {clearStaticData, storeStaticData} from \"./persistent-storage/static\";\r\nimport {\r\n    LoadProfileInterestsSuccessAction,\r\n    LoadProfileOffersSuccessAction,\r\n    PROFILE_ACTION_TYPES,\r\n} from \"./profile/actions\";\r\nimport {SaveCookiesPreferencesAction, SetLocaleAction, SetThemeAction, SETTINGS_ACTION_TYPES} from \"./settings/actions\";\r\nimport {AppState} from \"./types\";\r\n\r\nexport const staticStorageMiddleware: Middleware<unknown, AppState> = (store) => (next: Dispatch<AnyAction>) => (\r\n    action: AnyAction,\r\n) => {\r\n    // Handle cookie preferences changes\r\n    switch (action.type) {\r\n        case SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES: {\r\n            const oldCookies = store.getState().settings.userSettings.cookies;\r\n            const cookies = (action as SaveCookiesPreferencesAction).preferences;\r\n\r\n            // Store data for cookies that were accepted by the user\r\n            if (!oldCookies.cache && cookies.cache) {\r\n                const {offers, interests} = store.getState().profile;\r\n                storeStaticData(\"interests\", interests, cookies.cache);\r\n                storeStaticData(\"offers\", offers, cookies.cache);\r\n            }\r\n            if (!oldCookies.settings && cookies.settings) {\r\n                const {locale, theme} = store.getState().settings.userSettings;\r\n                storeStaticData(\"locale\", locale, cookies.settings);\r\n                storeStaticData(\"theme\", theme, cookies.settings);\r\n            }\r\n\r\n            // Discard cookies that were refused by the user\r\n            if (oldCookies.cache && !cookies.cache) clearStaticData(\"interests\", \"offers\");\r\n            if (oldCookies.settings && !cookies.settings) clearStaticData(\"locale\", \"theme\");\r\n\r\n            // Store new cookies preferences\r\n            storeStaticData(\"cookies\", cookies, true);\r\n            storeStaticData(\"cookieConsentDate\", new Date(Date.now()).toJSON(), true);\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n    const {cookies, cookieConsentDate} = store.getState().settings.userSettings;\r\n\r\n    // Handle storage that requires cookie consent from the user\r\n    if (hasUserGivenCookieConsent(cookieConsentDate)) {\r\n        switch (action.type) {\r\n            case PROFILE_ACTION_TYPES.LOAD_PROFILE_INTERESTS_SUCCESS: {\r\n                const {interests, fromCache} = action as LoadProfileInterestsSuccessAction;\r\n                if (!fromCache) storeStaticData(\"interests\", interests, cookies.cache);\r\n                break;\r\n            }\r\n            case PROFILE_ACTION_TYPES.LOAD_PROFILE_OFFERS_SUCCESS: {\r\n                const {offers, fromCache} = action as LoadProfileOffersSuccessAction;\r\n                if (!fromCache) storeStaticData(\"offers\", offers, cookies.cache);\r\n                break;\r\n            }\r\n            case SETTINGS_ACTION_TYPES.SET_LOCALE: {\r\n                const {locale, fromCache} = action as SetLocaleAction;\r\n                if (!fromCache) storeStaticData(\"locale\", locale, cookies.settings);\r\n                break;\r\n            }\r\n            case SETTINGS_ACTION_TYPES.SET_THEME: {\r\n                const {theme, fromCache} = action as SetThemeAction;\r\n                if (!fromCache) storeStaticData(\"theme\", theme, cookies.settings);\r\n                break;\r\n            }\r\n            case SETTINGS_ACTION_TYPES.TOGGLE_THEME: {\r\n                const {theme} = store.getState().settings.userSettings;\r\n                storeStaticData(\"theme\", theme === \"dark\" ? \"light\" : \"dark\", cookies.settings);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport function hasUserGivenCookieConsent(consentDate: Date | null): boolean {\r\n    // Never ask the user in the native version of the app\r\n    if (Platform.OS !== \"web\") return true;\r\n    return consentDate !== null && (Date.now() - consentDate.getTime()) / 1000 < COOKIE_CONSENT_DURATION;\r\n}\r\n","import {AnyAction, Middleware, Dispatch} from \"redux\";\r\nimport {AppState} from \"./types\";\r\nimport {AUTH_ACTION_TYPES, LogInSuccessAction} from \"./auth/actions\";\r\nimport {discardAuthInformation, storeAuthInformation} from \"./persistent-storage/auth\";\r\nimport {SaveCookiesPreferencesAction, SETTINGS_ACTION_TYPES} from \"./settings/actions\";\r\nimport {hasUserGivenCookieConsent} from \"./static-storage-middleware\";\r\n\r\nexport const authStorageMiddleware: Middleware<unknown, AppState> = (store) => (next: Dispatch<AnyAction>) => (\r\n    action: AnyAction,\r\n) => {\r\n    switch (action.type) {\r\n        // Handle cookie preferences changes\r\n        case SETTINGS_ACTION_TYPES.SAVE_COOKIES_PREFERENCES: {\r\n            const cookies = (action as SaveCookiesPreferencesAction).preferences;\r\n            if (cookies.auth) {\r\n                // Store again when accepting the auth cookie\r\n                const token = store.getState().auth.token;\r\n                const user = store.getState().profile.user;\r\n                if (token && user) storeAuthInformation(user.email, token);\r\n            } else {\r\n                // Discard when refusing the auth cookie\r\n                discardAuthInformation();\r\n            }\r\n            break;\r\n        }\r\n        // Discard when needed\r\n        case AUTH_ACTION_TYPES.LOG_OUT:\r\n        case AUTH_ACTION_TYPES.LOG_IN_FAILURE: {\r\n            discardAuthInformation();\r\n            break;\r\n        }\r\n    }\r\n\r\n    const {cookies, cookieConsentDate} = store.getState().settings.userSettings;\r\n\r\n    if (hasUserGivenCookieConsent(cookieConsentDate)) {\r\n        switch (action.type) {\r\n            case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n                const {token, user, usingCachedCredentials} = action as LogInSuccessAction;\r\n                // Store the authentication info only if we didn't use it already to login (in that case it is already stored)\r\n                if (!usingCachedCredentials && cookies.auth) storeAuthInformation(user.email, token);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n","import {requestBackend} from \"../../api/utils\";\r\nimport {AppThunk} from \"../types\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\n\r\nexport enum NOTIFICATIONS_ACTION_TYPES {\r\n    REGISTER_TOKEN_SUCCESS = \"NOTIFICATIONS/REGISTER_TOKEN_SUCCESS\",\r\n    DELETE_TOKEN_SUCCESS = \"NOTIFICATIONS/DELETE_TOKEN_SUCCESS\",\r\n}\r\n\r\nexport type RegisterNotificationSuccessAction = {\r\n    type: string;\r\n};\r\n\r\nexport type DeleteNotificationTokenSuccessAction = {\r\n    type: string;\r\n};\r\n\r\nexport type NotificationsAction = RegisterNotificationSuccessAction & DeleteNotificationTokenSuccessAction;\r\n\r\nexport const registerNotificationToken = (pushToken: string): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"notifications/token\", \"POST\", {}, {token: pushToken}, token, true);\r\n    if (response.status === HttpStatusCode.NO_CONTENT) {\r\n        dispatch(registerNotificationTokenSuccess());\r\n    }\r\n};\r\n\r\nconst registerNotificationTokenSuccess = (): RegisterNotificationSuccessAction => ({\r\n    type: NOTIFICATIONS_ACTION_TYPES.REGISTER_TOKEN_SUCCESS,\r\n});\r\n\r\nexport const deleteNotificationToken = (): AppThunk => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"notifications/token\", \"DELETE\", {}, {}, token, true);\r\n    if (response.status === HttpStatusCode.NO_CONTENT) {\r\n        dispatch(deleteNotificationTokenSuccess());\r\n    }\r\n};\r\n\r\nconst deleteNotificationTokenSuccess = (): DeleteNotificationTokenSuccessAction => ({\r\n    type: NOTIFICATIONS_ACTION_TYPES.DELETE_TOKEN_SUCCESS,\r\n});\r\n","import * as Notifications from \"expo-notifications\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport Constants from \"expo-constants\";\r\nimport {Platform} from \"react-native\";\r\nimport {openChat} from \"./navigation/utils\";\r\n\r\nfunction areNotificationsSupported(): boolean {\r\n    return Constants.isDevice && Platform.OS !== \"web\";\r\n}\r\n\r\nexport function configureNotifications(): void {\r\n    if (!areNotificationsSupported()) return;\r\n\r\n    Notifications.setNotificationHandler({\r\n        handleNotification: async () => ({\r\n            shouldShowAlert: true,\r\n            shouldPlaySound: true,\r\n            shouldSetBadge: false,\r\n        }),\r\n    });\r\n\r\n    Notifications.addNotificationReceivedListener((notification) => {\r\n        console.log(\"Notification received:\");\r\n        console.log(notification.request.content);\r\n    });\r\n\r\n    Notifications.addNotificationResponseReceivedListener((response) => {\r\n        console.log(\"Notification response received:\");\r\n        const data = response.notification.request.content.data;\r\n\r\n        if (data.roomId) openChat(data.roomId as string);\r\n    });\r\n\r\n    if (Platform.OS === \"android\") {\r\n        Notifications.setNotificationChannelAsync(\"default\", {\r\n            name: \"default\",\r\n            importance: Notifications.AndroidImportance.MAX,\r\n            vibrationPattern: [0, 250, 250, 250],\r\n            lightColor: \"#FF231F7C\",\r\n        });\r\n    }\r\n}\r\n\r\nexport async function askForPushNotificationToken(): Promise<string | null> {\r\n    if (!areNotificationsSupported()) return null;\r\n\r\n    let status = (await Permissions.getAsync(Permissions.NOTIFICATIONS)).status;\r\n    if (status !== \"granted\") status = (await Permissions.askAsync(Permissions.NOTIFICATIONS)).status;\r\n\r\n    if (status === \"granted\") {\r\n        const token = (await Notifications.getExpoPushTokenAsync()).data;\r\n        return token;\r\n    } else {\r\n        // User refused notifications\r\n        return null;\r\n    }\r\n}\r\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport {authReducer} from \"./auth/reducer\";\r\nimport {settingsReducer} from \"./settings/reducer\";\r\nimport {profileReducer} from \"./profile/reducer\";\r\nimport {matchingReducer} from \"./matching/reducer\";\r\nimport {messagingReducer} from \"./messaging/reducer\";\r\nimport {notificationsReducer} from \"./notifications/reducer\";\r\nimport {reportsReducer} from \"./reports/reducer\";\r\nimport thunk from \"redux-thunk\";\r\nimport {navigationMiddleware} from \"./navigation-middleware\";\r\nimport {authStorageMiddleware} from \"./auth-storage-middleware\";\r\nimport {staticStorageMiddleware} from \"./static-storage-middleware\";\r\nimport {notificationsMiddleware} from \"./notifications-middleware\";\r\n\r\nconst rootReducer = combineReducers({\r\n    auth: authReducer,\r\n    settings: settingsReducer,\r\n    profile: profileReducer,\r\n    matching: matchingReducer,\r\n    messaging: messagingReducer,\r\n    notifications: notificationsReducer,\r\n    reports: reportsReducer,\r\n});\r\n\r\nconst combinedMiddleware = applyMiddleware(\r\n    thunk,\r\n    authStorageMiddleware,\r\n    staticStorageMiddleware,\r\n    navigationMiddleware,\r\n    notificationsMiddleware,\r\n);\r\n\r\nexport default createStore(rootReducer, combinedMiddleware);\r\n","import {AnyAction, Middleware, Dispatch} from \"redux\";\r\nimport {MatchActionStatus} from \"../api/dto\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {AUTH_ACTION_TYPES, LogInSuccessAction} from \"./auth/actions\";\r\nimport {LikeProfileSuccessAction, MATCHING_ACTION_TYPES} from \"./matching/actions\";\r\nimport {PROFILE_ACTION_TYPES} from \"./profile/actions\";\r\nimport {AppState} from \"./types\";\r\n\r\nexport const navigationMiddleware: Middleware<unknown, AppState> = (/*store: MiddlewareAPI<Dispatch, AppState>*/) => (\r\n    next: Dispatch<AnyAction>,\r\n) => (action: AnyAction) => {\r\n    // TEMP action printing\r\n    console.log(action.type);\r\n\r\n    switch (action.type) {\r\n        case PROFILE_ACTION_TYPES.PROFILE_CREATE_SUCCESS: {\r\n            rootNavigate(\"OnboardingSuccessfulScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            const {user} = action as LogInSuccessAction;\r\n            rootNavigate(user.onboarded ? \"MainScreen\" : \"OnboardingScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            rootNavigate(\"LoginScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.REGISTER_SUCCESS: {\r\n            rootNavigate(\"ValidationEmailSentScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.VALIDATE_ACCOUNT_SUCCESS: {\r\n            // Let the user click\r\n            // attemptRedirectToApp(\"login\", \"SigninScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.FORGOT_PASSWORD_SUCCESS: {\r\n            rootNavigate(\"ForgotPasswordEmailSentScreen\");\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.RESET_PASSWORD_SUCCESS: {\r\n            rootNavigate(\"ResetPasswordSuccessScreen\");\r\n            break;\r\n        }\r\n        case MATCHING_ACTION_TYPES.LIKE_PROFILE_SUCCESS: {\r\n            const {matchStatus, roomId} = action as LikeProfileSuccessAction;\r\n            if (matchStatus == MatchActionStatus.Matched) rootNavigate(\"MatchSuccessScreen\", {roomId});\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.DELETE_ACCOUNT_SUCCESS: {\r\n            rootNavigate(\"LoginScreen\");\r\n            break;\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n","import {AnyAction, Middleware, Dispatch, MiddlewareAPI} from \"redux\";\r\nimport {AppState, MyThunkDispatch} from \"./types\";\r\nimport {AUTH_ACTION_TYPES} from \"./auth/actions\";\r\nimport {askForPushNotificationToken} from \"../notifications\";\r\nimport {deleteNotificationToken, registerNotificationToken} from \"./notifications/actions\";\r\n\r\nexport const notificationsMiddleware: Middleware<unknown, AppState> = (store: MiddlewareAPI<Dispatch, AppState>) => (\r\n    next: Dispatch<AnyAction>,\r\n) => (action: AnyAction) => {\r\n    switch (action.type) {\r\n        case AUTH_ACTION_TYPES.LOG_IN_SUCCESS: {\r\n            // Register push notifications\r\n            askForPushNotificationToken().then((pushToken: string | null) => {\r\n                // The token will be null if the device does not support push notifications,\r\n                // or we did not get permission from the user.\r\n                if (pushToken !== null) (store.dispatch as MyThunkDispatch)(registerNotificationToken(pushToken));\r\n            });\r\n            break;\r\n        }\r\n        case AUTH_ACTION_TYPES.LOG_OUT: {\r\n            // Discard the token\r\n            (store.dispatch as MyThunkDispatch)(deleteNotificationToken());\r\n            break;\r\n        }\r\n    }\r\n    next(action);\r\n};\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as Font from \"expo-font\";\r\nimport * as SplashScreen from \"expo-splash-screen\";\r\nimport * as React from \"react\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport {User} from \"../model/user\";\r\nimport {CookiesPreferences} from \"../model/user-settings\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {attemptLoginFromCache} from \"../state/auth/actions\";\r\nimport {readCachedStaticData} from \"../state/persistent-storage/static\";\r\nimport {loadProfileInterests, loadProfileOffers} from \"../state/profile/actions\";\r\nimport {loadCookiesPreferences, setLocale, setTheme} from \"../state/settings/actions\";\r\nimport store from \"../state/store\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {ThemeKey} from \"../types\";\r\n\r\nlet loggedInFromCache: User | undefined = undefined;\r\n\r\nexport default function useCachedResources(): {isLoadingComplete: boolean; initialRoute?: keyof RootNavigatorScreens} {\r\n    const [isLoadingComplete, setLoadingComplete] = React.useState(false);\r\n\r\n    // Load any resources or data that we need prior to rendering the app\r\n    React.useEffect(() => {\r\n        async function loadResourcesAndDataAsync() {\r\n            try {\r\n                SplashScreen.preventAutoHideAsync();\r\n\r\n                const dispatch = store.dispatch as MyThunkDispatch;\r\n\r\n                // TODO Improve data loading\r\n                //  - show something if the backend couldn't be reached\r\n\r\n                // Load static data\r\n                await dispatch(loadProfileOffers());\r\n                await dispatch(loadProfileInterests());\r\n\r\n                // Load fonts\r\n                await Font.loadAsync({\r\n                    ...FontAwesome.font,\r\n                    Raleway: require(\"@assets/fonts/Raleway-Regular.ttf\"),\r\n                    RalewayThin: require(\"@assets/fonts/Raleway-Thin.ttf\"),\r\n                    RalewayLight: require(\"@assets/fonts/Raleway-Light.ttf\"),\r\n                    RalewaySemiBold: require(\"@assets/fonts/Raleway-SemiBold.ttf\"),\r\n                    RalewayBold: require(\"@assets/fonts/Raleway-Bold.ttf\"),\r\n                });\r\n\r\n                // Read cookie consent information from persistent storage\r\n                readCachedStaticData(\"cookieConsentDate\").then((consentDate) => {\r\n                    readCachedStaticData(\"cookies\").then((cookies) => {\r\n                        if (consentDate && cookies) {\r\n                            const date = new Date(consentDate.data as string);\r\n                            store.dispatch(loadCookiesPreferences(cookies.data as CookiesPreferences, date));\r\n                        } else {\r\n                            // On mobile, storage is turned on by default on the first visit\r\n                            store.dispatch(\r\n                                loadCookiesPreferences({auth: true, cache: true, settings: true}, new Date()),\r\n                            );\r\n                        }\r\n                    });\r\n                });\r\n\r\n                // Attempt to read the settings from persistent storage\r\n                readCachedStaticData(\"theme\").then((theme) => {\r\n                    if (theme) store.dispatch(setTheme(theme.data as ThemeKey, true));\r\n                });\r\n                readCachedStaticData(\"locale\").then((locale) => {\r\n                    if (locale) store.dispatch(setLocale(locale.data as SupportedLocale, true));\r\n                });\r\n\r\n                // Attempt to authenticate using cached data\r\n                loggedInFromCache = await dispatch(attemptLoginFromCache());\r\n            } catch (e) {\r\n                // We might want to provide this error information to an error reporting service\r\n                console.warn(e);\r\n            } finally {\r\n                setLoadingComplete(true);\r\n                SplashScreen.hideAsync();\r\n            }\r\n        }\r\n\r\n        loadResourcesAndDataAsync();\r\n    }, []);\r\n\r\n    let initialRoute: undefined | keyof RootNavigatorScreens = undefined;\r\n    if (loggedInFromCache) initialRoute = loggedInFromCache.onboarded ? \"MainScreen\" : \"OnboardingScreen\";\r\n\r\n    return {isLoadingComplete, initialRoute};\r\n}\r\n","import {ThemeKey} from \"../types\";\r\n\r\nconst lightThemeText = \"#000\";\r\nconst darkThemeText = \"#fff\";\r\n\r\nexport default {\r\n    light: {\r\n        id: \"light\" as ThemeKey,\r\n        text: lightThemeText,\r\n        textWhite: darkThemeText,\r\n        textBlack: lightThemeText,\r\n        textLight: \"#666\",\r\n        textInverted: \"#fff\",\r\n        background: \"#fff\",\r\n        cardBackground: \"#f7f7f7\", //\"#f7f7f7\",\r\n        accent: \"#003da5\",\r\n        accentSlight: \"#ccd8ea\",\r\n        accentSecondary: \"#009ace\",\r\n        accentTernary: \"#fbe122\",\r\n        error: \"rgba(255,59,48,1)\",\r\n        actionNeutral: \"#555555\",\r\n        okay: \"#00b16a\",\r\n        warn: \"#eecc00\",\r\n        componentBorder: \"#bbb\",\r\n        chatBubble: \"#ededed\",\r\n        inputPlaceholder: \"#999\",\r\n    },\r\n    dark: {\r\n        id: \"dark\" as ThemeKey,\r\n        text: darkThemeText,\r\n        textWhite: darkThemeText,\r\n        textBlack: lightThemeText,\r\n        textLight: \"#ccc\",\r\n        textInverted: \"#111\",\r\n        background: \"rgba(0,0,0,1)\",\r\n        cardBackground: \"rgba(28,28,30,1)\",\r\n        accent: \"#003da5\",\r\n        accentSlight: \"#ccd8ea\",\r\n        accentSecondary: \"#003da5\",\r\n        accentTernary: \"#fbe122\",\r\n        error: \"rgba(255,69,58,1)\",\r\n        actionNeutral: \"#777\",\r\n        okay: \"#00b16a\",\r\n        warn: \"#eecc00\",\r\n        componentBorder: \"#555\",\r\n        chatBubble: \"#333\",\r\n        inputPlaceholder: \"#bbb\",\r\n    },\r\n};\r\n","import {ImageStyle, TextStyle, ViewStyle} from \"react-native\";\r\nimport themes from \"../constants/themes\";\r\nimport {Theme} from \"../types\";\r\n\r\ntype NamedStyles<T> = {[P in keyof T]: ViewStyle | TextStyle | ImageStyle};\r\ntype ThemedStyles<T extends NamedStyles<T>> = (theme: Theme) => T;\r\n\r\n/** Tool to pre-generate stylesheet variations for each theme.  */\r\nexport function preTheme<T extends NamedStyles<T>>(generator: ThemedStyles<T>): ThemedStyles<T> {\r\n    // Pre-generate the styles in a key:value map\r\n    const styles: {[key: string]: T} = {};\r\n    Object.values(themes).forEach((theme: Theme) => (styles[theme.id] = generator(theme)));\r\n    // Wrap the map as a function\r\n    return (theme: Theme) => styles[theme.id];\r\n}\r\n","import * as React from \"react\";\r\nimport {Platform, StyleSheet, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\ntype ScreenWrapperProps = ThemeProps;\r\n\r\nclass ScreenWrapper extends React.Component<ScreenWrapperProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={styles.wrapper}>\r\n                <View style={styles.container}>{this.props.children}</View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            flexDirection: \"row\",\r\n        },\r\n        container: {\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            ...(Platform.OS === \"web\" ? {maxWidth: 1000} : {}),\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ScreenWrapper);\r\n","import {Platform, TextStyle} from \"react-native\";\r\n\r\nexport const styleTextThin: TextStyle =\r\n    Platform.OS == \"android\" ? {fontFamily: \"sans-serif-thin\"} : {fontWeight: \"100\"};\r\n\r\nexport const styleTextLight: TextStyle =\r\n    Platform.OS == \"android\" ? {fontFamily: \"sans-serif-light\"} : {fontWeight: \"200\"};\r\n\r\nexport const webFontFamily =\r\n    Platform.OS == \"web\" ? {fontFamily: `\"Segoe UI\", Roboto, \"Helvetica Neue\", sans-serif`} : {};\r\n\r\nexport const BLUR_HEADER_INTENSITY = Platform.OS === \"ios\" ? 100 : 320;\r\nexport const BLUR_TAB_INTENSITY = Platform.OS === \"ios\" ? 100 : 320;\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, TouchableOpacity, View} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport {styleTextLight} from \"../styles/general\";\r\n\r\nexport type NotFoundScreenProps = StackScreenProps<RootNavigatorScreens, \"NotFoundScreen\"> & ThemeProps;\r\n\r\nclass NotFoundScreen extends React.Component<NotFoundScreenProps> {\r\n    render(): JSX.Element {\r\n        const {navigation, theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.title}>{i18n.t(\"pageNotFound\")}</Text>\r\n                    <Text style={styles.subtitle}>{i18n.t(\"pageDoesntExist\")}</Text>\r\n                    <TouchableOpacity onPress={() => navigation.replace(\"LoginScreen\")} style={styles.link}>\r\n                        <Text style={styles.linkText}>{i18n.t(\"goHome\")}</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            padding: 20,\r\n        },\r\n        title: {\r\n            fontSize: 48,\r\n            ...styleTextLight,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        subtitle: {\r\n            fontSize: 20,\r\n            marginTop: 50,\r\n            color: theme.text,\r\n        },\r\n        link: {\r\n            paddingVertical: 10,\r\n        },\r\n        linkText: {\r\n            fontSize: 16,\r\n            color: \"#2e78b7\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(NotFoundScreen);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet, ActivityIndicator} from \"react-native\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {requestValidateAccount} from \"../state/auth/actions\";\r\nimport {attemptRedirectToApp} from \"../navigation/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {DEBUG_MODE, Environment, ENVIRONMENT} from \"../constants/config\";\r\nimport store from \"../state/store\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    validated: state.auth.validated,\r\n}));\r\n\r\ntype ValidateEmailScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass ValidateEmailScreen extends React.Component<ValidateEmailScreenProps> {\r\n    componentDidMount() {\r\n        const dispatch = this.props.dispatch as MyThunkDispatch;\r\n\r\n        // In DEBUG_MODE / staging environment, attempt to use a verification token sent by the server\r\n        const verificationToken = store.getState().auth.verificationToken;\r\n        if (DEBUG_MODE && ENVIRONMENT == Environment.Staging && verificationToken) {\r\n            dispatch(requestValidateAccount(verificationToken));\r\n        } else if (this.props.route.params) {\r\n            // Attempt to extract a validation token out of the URL\r\n            const params = this.props.route.params as {[key: string]: string};\r\n            const {token} = params;\r\n            if (token) dispatch(requestValidateAccount(token));\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, validated} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    {!validated && (\r\n                        <>\r\n                            <Text style={styles.title}>{i18n.t(\"emailValidation.validating\")}</Text>\r\n                            <ActivityIndicator size=\"large\" color={theme.accentSecondary} />\r\n                        </>\r\n                    )}\r\n                    {validated && (\r\n                        <>\r\n                            <Text style={styles.successText}>\r\n                                {i18n.t(\"emailValidation.success\")[0]}\r\n                                <Text\r\n                                    onPress={() => attemptRedirectToApp(\"login\", \"LoginScreen\")}\r\n                                    style={{color: theme.accent}}\r\n                                >\r\n                                    {i18n.t(\"emailValidation.success\")[1]}\r\n                                </Text>\r\n                            </Text>\r\n                        </>\r\n                    )}\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"75%\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        title: {\r\n            fontSize: 20,\r\n            marginVertical: 20,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        successText: {\r\n            fontSize: 18,\r\n            lineHeight: 40,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ValidateEmailScreen));\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport {AppState} from \"../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport {DEBUG_MODE} from \"../constants/config\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\n// Map props from state\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    registerEmail: state.auth.registerEmail,\r\n}));\r\n\r\ntype ValidationEmailSentScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps;\r\n\r\nclass ValidationEmailSentScreen extends React.Component<ValidationEmailSentScreenProps> {\r\n    render(): JSX.Element {\r\n        const {registerEmail, theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <FontAwesome name=\"envelope-o\" style={styles.mailIcon}></FontAwesome>\r\n                    <Text style={styles.description}>\r\n                        To validate your account, click the link in the email we just sent to\r\n                    </Text>\r\n                    <Text style={styles.email}>{registerEmail}</Text>\r\n\r\n                    {DEBUG_MODE && (\r\n                        <TouchableOpacity onPress={() => rootNavigate(\"ValidateEmailScreen\")}>\r\n                            <Text style={{marginVertical: 30, textAlign: \"center\", fontSize: 16, color: \"blue\"}}>\r\n                                debug: click here\r\n                            </Text>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"75%\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        description: {\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        mailIcon: {\r\n            marginVertical: 30,\r\n            fontSize: 50,\r\n            color: theme.text,\r\n        },\r\n        email: {\r\n            fontSize: 16,\r\n            fontWeight: \"bold\",\r\n            color: theme.text,\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ValidationEmailSentScreen));\r\n","import {LinkingOptions} from \"@react-navigation/native\";\r\nimport * as Linking from \"expo-linking\";\r\nimport {APP_SCHEME, CLIENT_URL} from \"../constants/config\";\r\n\r\nconst config: LinkingOptions = {\r\n    prefixes: [Linking.makeUrl(\"/\"), CLIENT_URL, `${APP_SCHEME}://`],\r\n    config: {\r\n        screens: {\r\n            LoginScreen: {\r\n                screens: {\r\n                    WelcomeScreen: \"welcome\",\r\n                    SigninScreen: {\r\n                        screens: {\r\n                            LoginScreen: \"login\",\r\n                            ForgotPasswordScreen: \"forgot-password\",\r\n                            SignupScreen: \"signup\",\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            ForgotPasswordEmailSentScreen: \"password-email-sent\",\r\n            ValidationEmailSentScreen: \"validation-sent\",\r\n            MainScreen: {\r\n                screens: {\r\n                    TabHome: {\r\n                        screens: {\r\n                            TabHomeScreen: \"home\",\r\n                        },\r\n                    },\r\n                    TabMatching: {\r\n                        screens: {\r\n                            TabMatchingScreen: \"match\",\r\n                            MAtchFilteringScren: \"match/filters\",\r\n                        },\r\n                    },\r\n                    TabMessaging: {\r\n                        screens: {\r\n                            ChatRoomsScreen: \"messaging\",\r\n                            ChatScreen: \"chat/:roomId\",\r\n                        },\r\n                    },\r\n                    TabNotifications: {\r\n                        screens: {\r\n                            TabNotificationsScreen: \"notifications\",\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            ValidateEmailSentScreen: \"validate/success\",\r\n            ValidateEmailScreen: \"validate/:token\",\r\n            ResetPasswordScreen: \"reset-password/:token\",\r\n            ResetPasswordSuccessScreen: \"password-reset\",\r\n            MyProfileScreen: \"profile\",\r\n            ProfileScreen: \"profile/:id\",\r\n            SettingsScreen: \"settings\",\r\n            DeleteAccountScreen: \"delete-account\",\r\n            DeleteAccountSuccessScreen: \"account-deleted\",\r\n            OnboardingScreen: {\r\n                screens: {\r\n                    OnboardingNameScreen: \"onboarding/name\",\r\n                    OnboardingPersonalInfoScreen: \"onboarding/info\",\r\n                    OnboardingLanguageScreen: \"onboarding/language\",\r\n                    OnboardingInterestsScreen: \"onboarding/interests\",\r\n                    OnboardingRoleScreen: \"onboarding/role/1\",\r\n                    OnboardingRoleSpecificScreen: \"onboarding/role/2\",\r\n                    OnboardingOffersScreen1: \"onboarding/offers/1\",\r\n                    OnboardingOffersScreen2: \"onboarding/offers/2\",\r\n                    OnboardingOffersScreen3: \"onboarding/offers/3\",\r\n                    OnboardingTosScreen: \"onboarding/tos\",\r\n                    OnboardingPrivacyScreen: \"onboarding/privacy\",\r\n                },\r\n            },\r\n            OnboardingSuccessfulScreen: \"onboarding/success\",\r\n            MatchSuccessScreen: \"match/success\",\r\n            NotFoundScreen: \"*\",\r\n        },\r\n    },\r\n};\r\n\r\nexport default config;\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type InputLabelProps = ThemeProps & TextProps;\r\n\r\nclass InputLabel extends React.Component<InputLabelProps> {\r\n    render(): JSX.Element {\r\n        const {theme, style, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <Text {...otherProps} style={[styles.text, style]}>\r\n                {this.props.children}\r\n            </Text>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            color: theme.textLight,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            fontSize: 12,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(InputLabel);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, StyleSheet} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {localizeError} from \"../api/errors\";\r\n\r\n// Component props\r\nexport type InputErrorTextProps = ThemeProps & TextProps & {error: string | string[] | null | undefined};\r\n\r\nclass InputErrorText extends React.Component<InputErrorTextProps> {\r\n    render(): JSX.Element {\r\n        const {theme, style, error, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const errorStr: string | null = error ? (typeof error === \"string\" ? error : error[0]) : null;\r\n\r\n        return (\r\n            <Text {...otherProps} style={[styles.text, style]}>\r\n                {errorStr ? localizeError(errorStr) : \"\"}\r\n            </Text>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            fontSize: 12,\r\n            marginTop: 2,\r\n            marginBottom: -12, // prevents an offset from appearing when there is an error\r\n            color: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(InputErrorText);\r\n","import React from \"react\";\r\nimport {TextStyle, StyleProp, View, TextInputProps, TextInput, ViewStyle} from \"react-native\";\r\nimport InputLabel from \"./InputLabel\";\r\nimport InputErrorText from \"./InputErrorText\";\r\n\r\nexport type TextInputStyleProps = {\r\n    style?: StyleProp<ViewStyle>;\r\n    wrapperStyle?: StyleProp<ViewStyle>;\r\n    errorStyle?: StyleProp<TextStyle>;\r\n    validStyle?: StyleProp<TextStyle>;\r\n    focusedStyle?: StyleProp<TextStyle>;\r\n    errorTextStyle?: StyleProp<TextStyle>;\r\n    labelStyle?: StyleProp<TextStyle>;\r\n    inputStyle?: StyleProp<TextStyle>;\r\n    inputFocusedStyle?: StyleProp<TextStyle>;\r\n    placeholderTextColor?: string;\r\n};\r\n\r\nexport type ValidatedTextInputProps = {\r\n    value: string;\r\n    showErrorText?: boolean;\r\n    error?: string;\r\n    untouched?: boolean;\r\n    label?: string;\r\n    icon?: (focused: boolean, error: boolean, valid: boolean) => JSX.Element;\r\n} & TextInputStyleProps &\r\n    Partial<TextInputProps>;\r\n\r\ntype ValidatedTextInputState = {\r\n    focused: boolean;\r\n};\r\n\r\n/**\r\n * An improved TextInput that supports better styling (including specific focused style) and displays validation errors.\r\n */\r\nclass ValidatedTextInput extends React.Component<ValidatedTextInputProps, ValidatedTextInputState> {\r\n    inputRef = React.createRef<TextInput>();\r\n\r\n    static defaultProps = {\r\n        untouched: false,\r\n        style: [],\r\n        wrapperStyle: [],\r\n        errorStyle: [],\r\n        validStyle: [],\r\n        focusedStyle: [],\r\n        errorTextStyle: [],\r\n        labelStyle: [],\r\n    };\r\n\r\n    constructor(props: ValidatedTextInputProps) {\r\n        super(props);\r\n        this.state = {focused: false} as ValidatedTextInputState;\r\n    }\r\n\r\n    focus(): void {\r\n        this.inputRef.current?.focus();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            showErrorText,\r\n            error,\r\n            value,\r\n            label,\r\n            icon,\r\n            untouched,\r\n            style,\r\n            wrapperStyle,\r\n            inputStyle,\r\n            inputFocusedStyle,\r\n            errorStyle,\r\n            validStyle,\r\n            focusedStyle,\r\n            errorTextStyle,\r\n            labelStyle,\r\n            placeholderTextColor,\r\n            onBlur,\r\n            onFocus,\r\n            ...otherProps\r\n        } = this.props;\r\n\r\n        const showError = showErrorText && !untouched && error;\r\n\r\n        return (\r\n            <View\r\n                style={[\r\n                    wrapperStyle,\r\n                    {width: \"100%\", flexDirection: \"column\", position: \"relative\", paddingBottom: showError ? 0 : 6},\r\n                ]}\r\n            >\r\n                {label && <InputLabel style={labelStyle}>{label}</InputLabel>}\r\n                <View\r\n                    style={[\r\n                        {flexDirection: \"row\", alignItems: \"center\"},\r\n                        style,\r\n                        this.state.focused ? focusedStyle : {},\r\n                        untouched ? {} : error ? errorStyle : value.length > 0 ? validStyle : {},\r\n                    ]}\r\n                >\r\n                    {icon && icon(this.state.focused, error !== undefined, error !== undefined && value.length > 0)}\r\n                    <TextInput\r\n                        ref={this.inputRef}\r\n                        style={[\r\n                            {flex: 1, height: \"100%\", backgroundColor: \"transparent\"},\r\n                            inputStyle,\r\n                            this.state.focused ? inputFocusedStyle : {},\r\n                            // untouched ? {} : error ? errorStyle : value.length > 0 ? validStyle : {},\r\n                        ]}\r\n                        onBlur={(e) => {\r\n                            if (onBlur) onBlur(e);\r\n                            this.setState({focused: false});\r\n                        }}\r\n                        onFocus={(e) => {\r\n                            if (onFocus) onFocus(e);\r\n                            this.setState({focused: true});\r\n                        }}\r\n                        value={value}\r\n                        placeholderTextColor={placeholderTextColor}\r\n                        {...otherProps}\r\n                    />\r\n                </View>\r\n                {showError && <InputErrorText style={errorTextStyle} error={error} />}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ValidatedTextInput;\r\n","import React from \"react\";\r\nimport {TextInputProps} from \"react-native\";\r\nimport ValidatedTextInput, {ValidatedTextInputProps} from \"../ValidatedTextInput\";\r\n\r\n// Component props\r\nexport type FormTextInputProps = {\r\n    field: string;\r\n    touched: boolean | undefined;\r\n    showErrorText?: boolean;\r\n    handleChange<T = string | React.ChangeEvent<unknown>>(\r\n        field: T,\r\n    ): T extends React.ChangeEvent<unknown> ? void : (e: string | React.ChangeEvent<unknown>) => void;\r\n    handleBlur<T = string | unknown>(fieldOrEvent: T): T extends string ? (e: unknown) => void : void;\r\n    isEmail?: boolean;\r\n    isPassword?: boolean;\r\n} & ValidatedTextInputProps;\r\n\r\nconst emailProps: Partial<TextInputProps> = {\r\n    keyboardType: \"email-address\",\r\n    autoCompleteType: \"email\",\r\n    textContentType: \"emailAddress\",\r\n    autoCapitalize: \"none\",\r\n    autoCorrect: false,\r\n};\r\nconst passwordProps: Partial<TextInputProps> = {\r\n    secureTextEntry: true,\r\n    autoCompleteType: \"password\",\r\n    textContentType: \"password\",\r\n    autoCapitalize: \"none\",\r\n    autoCorrect: false,\r\n};\r\n\r\n/**\r\n * An improved TextInput for less verbose Formik usage.\r\n */\r\nexport class FormTextInput extends React.Component<FormTextInputProps> {\r\n    inputRef = React.createRef<ValidatedTextInput>();\r\n\r\n    static defaultProps = {\r\n        showErrorText: true,\r\n        /* eslint-disable @typescript-eslint/no-empty-function */\r\n        handleChange: (): void => {},\r\n        handleBlur: (): void => {},\r\n        /* eslint-ensable @typescript-eslint/no-empty-function */\r\n    };\r\n\r\n    focus(): void {\r\n        this.inputRef.current?.focus();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            field,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            error,\r\n            onBlur,\r\n            onChangeText,\r\n            isEmail,\r\n            isPassword,\r\n            ...otherProps\r\n        } = this.props;\r\n\r\n        return (\r\n            <ValidatedTextInput\r\n                ref={this.inputRef}\r\n                error={touched ? error : undefined}\r\n                untouched={!touched}\r\n                onChangeText={(value: string) => {\r\n                    if (onChangeText) onChangeText(value);\r\n                    handleChange(field)(value);\r\n                }}\r\n                onBlur={(e) => {\r\n                    if (onBlur) onBlur(e);\r\n                    handleBlur(this.props.field)(e);\r\n                }}\r\n                {...(isEmail ? emailProps : {})}\r\n                {...(isPassword ? passwordProps : {})}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n","import {StyleSheet, Platform, TextStyle} from \"react-native\";\r\nimport {Theme} from \"../types\";\r\nimport {FormCheckBoxProps} from \"../components/forms/FormCheckBox\";\r\nimport {preTheme} from \"./utils\";\r\nimport {TextInputStyleProps} from \"../components/ValidatedTextInput\";\r\n\r\nexport const formStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        inputFieldIcon: {\r\n            fontSize: 20,\r\n            color: theme.inputPlaceholder,\r\n            marginRight: 10,\r\n        },\r\n        inputFieldIconFocused: {\r\n            color: theme.accent,\r\n        },\r\n    });\r\n});\r\n\r\nexport function getLoginTextInputsStyleProps(theme: Theme, wrapperVerticalMargin = 0): TextInputStyleProps {\r\n    return {\r\n        wrapperStyle: {\r\n            width: \"100%\",\r\n            marginVertical: wrapperVerticalMargin,\r\n        },\r\n        style: {\r\n            width: \"100%\",\r\n            height: 50,\r\n            borderBottomWidth: 2,\r\n            borderColor: theme.componentBorder,\r\n        },\r\n        focusedStyle: {\r\n            borderColor: theme.accent,\r\n        },\r\n        errorStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.error,\r\n        },\r\n        validStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        labelStyle: {\r\n            marginBottom: 4,\r\n        },\r\n        inputStyle: {\r\n            fontSize: 16,\r\n            color: theme.accent,\r\n        },\r\n        inputFocusedStyle: Platform.OS === \"web\" ? ({outline: \"none\"} as TextStyle) : {},\r\n        placeholderTextColor: theme.inputPlaceholder,\r\n    };\r\n}\r\n\r\nexport function getLoginCheckBoxStyleProps(theme: Theme): Partial<FormCheckBoxProps> {\r\n    const commonStyle = StyleSheet.create({\r\n        checkboxWrapper: {\r\n            width: \"100%\",\r\n            marginVertical: 5,\r\n        },\r\n        checkboxLabel: {\r\n            fontSize: 14,\r\n        },\r\n    });\r\n\r\n    return {\r\n        wrapperStyle: commonStyle.checkboxWrapper,\r\n        labelStyle: [commonStyle.checkboxLabel, {color: theme.text}],\r\n    };\r\n}\r\n\r\nexport function getOnboardingTextInputsStyleProps(theme: Theme): TextInputStyleProps {\r\n    return {\r\n        wrapperStyle: {\r\n            width: \"100%\",\r\n            marginVertical: 10,\r\n        },\r\n        style: {\r\n            width: \"100%\",\r\n            height: 60,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n        },\r\n        errorStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.error,\r\n        },\r\n        validStyle: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        inputStyle: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n        },\r\n        inputFocusedStyle:\r\n            Platform.OS === \"web\"\r\n                ? ({\r\n                      backgroundColor: \"transparent\",\r\n                      outline: \"none\",\r\n                  } as TextStyle)\r\n                : {},\r\n    };\r\n}\r\n","import * as React from \"react\";\r\nimport {Text, View, ViewProps, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {localizeError} from \"../../api/errors\";\r\n\r\n// Component props\r\nexport type FormErrorProps = ThemeProps & {\r\n    error?: string;\r\n} & ViewProps;\r\n\r\nclass FormError extends React.Component<FormErrorProps> {\r\n    render(): JSX.Element {\r\n        const {error, theme, style, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <>\r\n                {error && error.length > 0 && (\r\n                    <View style={[styles.wrapper, style]} {...otherProps}>\r\n                        <Text style={styles.text}>{error ? localizeError(error) : \"\"}</Text>\r\n                    </View>\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            marginTop: 5,\r\n        },\r\n        text: {\r\n            fontSize: 14,\r\n            color: theme.error,\r\n            textAlign: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FormError);\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, TouchableOpacity, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\nconst SKINS = {\r\n    \"rounded-filled\": (theme: Theme) => ({\r\n        button: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n            height: 48,\r\n            marginVertical: 10,\r\n            borderRadius: 100,\r\n            backgroundColor: theme.accent,\r\n        },\r\n        text: {\r\n            fontSize: 18,\r\n            letterSpacing: 1,\r\n            color: theme.textWhite,\r\n        },\r\n    }),\r\n    \"rounded-hollow\": (theme: Theme) => ({\r\n        button: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n            height: 48,\r\n            marginVertical: 10,\r\n            borderRadius: 100,\r\n            borderColor: theme.accent,\r\n            borderWidth: 1,\r\n        },\r\n        text: {\r\n            fontSize: 18,\r\n            letterSpacing: 1,\r\n            color: theme.accent,\r\n        },\r\n    }),\r\n};\r\n\r\nexport type ButtonSkin = keyof typeof SKINS;\r\n\r\n// Component props\r\ntype ButtonProps = {\r\n    onPress?: () => void;\r\n    text?: string;\r\n    icon?: JSX.Element;\r\n    style?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    skin?: ButtonSkin;\r\n} & ThemeProps;\r\n\r\nclass Button extends React.Component<ButtonProps> {\r\n    render(): JSX.Element {\r\n        const {onPress, text, icon, skin, style, textStyle, children, theme} = this.props;\r\n\r\n        const skinStyles = skin ? SKINS[skin](theme) : {button: {}, text: {}};\r\n\r\n        return (\r\n            <TouchableOpacity\r\n                accessibilityRole=\"button\"\r\n                accessibilityLabel={text}\r\n                onPress={onPress}\r\n                style={[{flexDirection: \"row\", alignItems: \"center\"}, skinStyles.button, style]}\r\n            >\r\n                {children || (\r\n                    <>\r\n                        <Text style={[skinStyles.text, textStyle]}>{text}</Text>\r\n                        {icon}\r\n                    </>\r\n                )}\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(Button);\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, StyleProp, TextStyle, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport Button, {ButtonSkin} from \"../Button\";\r\n\r\n// Component props\r\ntype FormSubmitButtonProps = {\r\n    onPress: () => void;\r\n    text: string;\r\n    icon?: JSX.Element;\r\n    submitting: boolean;\r\n    style?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    loadingIndicatorStyle?: StyleProp<ViewStyle>;\r\n    skin?: ButtonSkin;\r\n} & ThemeProps;\r\n\r\nclass FormSubmitButton extends React.Component<FormSubmitButtonProps> {\r\n    render(): JSX.Element {\r\n        const {submitting, onPress, style, loadingIndicatorStyle, theme, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <Button\r\n                {...{onPress: submitting ? undefined : onPress}}\r\n                style={[{flexDirection: \"row\", alignItems: \"center\"}, style]}\r\n                {...otherProps}\r\n            >\r\n                {submitting && <ActivityIndicator color={theme.accentTernary} style={loadingIndicatorStyle} />}\r\n            </Button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(FormSubmitButton);\r\n","import * as React from \"react\";\r\nimport {Keyboard, StyleProp, StyleSheet, Text, TouchableOpacity, View, ViewStyle} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState, MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {VALIDATOR_EMAIL_LOGIN, VALIDATOR_PASSWORD_LOGIN} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps, formStyles} from \"../../styles/forms\";\r\nimport {requestLogin} from \"../../state/auth/actions\";\r\nimport FormError from \"./FormError\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {MaterialCommunityIcons, MaterialIcons} from \"@expo/vector-icons\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport Button from \"../Button\";\r\n\r\ntype FormState = {\r\n    email: string;\r\n    password: string;\r\n};\r\n\r\n// Use Yup to create the validation schema\r\nconst LoginFormSchema = Yup.object().shape({\r\n    email: VALIDATOR_EMAIL_LOGIN,\r\n    password: VALIDATOR_PASSWORD_LOGIN,\r\n});\r\n\r\n// Map props from the store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    validatedEmail: state.auth.validatedEmail,\r\n}));\r\n\r\n// Component props\r\ntype LoginFormProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    FormProps<FormState> & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\ntype LoginFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass LoginForm extends React.Component<LoginFormProps, LoginFormState> {\r\n    pwdInputRef = React.createRef<FormTextInput>();\r\n    setFieldError?: (field: string, message: string) => void;\r\n    setFieldValue: null | ((field: string, value: string, shouldValidate?: boolean | undefined) => void) = null;\r\n\r\n    constructor(props: LoginFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    componentDidUpdate(oldProps: LoginFormProps) {\r\n        const {validatedEmail} = this.props;\r\n        if (this.setFieldValue && validatedEmail && oldProps.validatedEmail != validatedEmail)\r\n            this.setFieldValue(\"email\", validatedEmail);\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        this.setState({...this.state, submitting: true});\r\n        (this.props.dispatch as MyThunkDispatch)(requestLogin(values.email, values.password)).then(\r\n            ({success, errors}: ValidatedActionReturn) => {\r\n                if (success && this.props.onSuccessfulSubmit) this.props.onSuccessfulSubmit(values);\r\n                if (errors && errors.fields) {\r\n                    const f = errors.fields;\r\n                    Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                }\r\n                this.setState({remoteErrors: errors, submitting: false});\r\n            },\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n\r\n        const styles = themedStyles(theme);\r\n        const fstyles = formStyles(theme);\r\n\r\n        return (\r\n            <View style={[{width: \"100%\"}, containerStyle]}>\r\n                <Formik\r\n                    initialValues={{email: \"\", password: \"\"} as FormState}\r\n                    validationSchema={LoginFormSchema}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldValue,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 10)};\r\n                        this.setFieldValue = setFieldValue;\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <View>\r\n                                <FormTextInput\r\n                                    field=\"email\"\r\n                                    placeholder={i18n.t(\"emailAddress\")}\r\n                                    accessibilityLabel={i18n.t(\"emailAddress\")}\r\n                                    error={errors.email}\r\n                                    value={values.email}\r\n                                    touched={touched.email}\r\n                                    isEmail={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdInputRef.current?.focus()}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"email\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdInputRef}\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    accessibilityLabel={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"done\"\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"lock\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <TouchableOpacity\r\n                                    accessibilityRole=\"link\"\r\n                                    accessibilityLabel={i18n.t(\"forgotPassword\")}\r\n                                    onPress={() => {\r\n                                        Keyboard.dismiss();\r\n                                        rootNavigate(\"ForgotPasswordScreen\");\r\n                                    }}\r\n                                    style={styles.forgotPwdLink}\r\n                                >\r\n                                    <Text style={styles.forgotPasswordText}>{i18n.t(\"forgotPassword\")}</Text>\r\n                                </TouchableOpacity>\r\n\r\n                                <View style={styles.actionsContainer}>\r\n                                    <FormSubmitButton\r\n                                        onPress={() => handleSubmit()}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"loginForm.logIn\")}\r\n                                        icon={<MaterialCommunityIcons name=\"login\" style={styles.loginButtonIcon} />}\r\n                                        submitting={submitting}\r\n                                    />\r\n                                    <View style={styles.separatorContainer}>\r\n                                        <View style={styles.separatorHbar} />\r\n                                        <Text style={styles.separatorText}>{i18n.t(\"loginForm.or\")}</Text>\r\n                                        <View style={styles.separatorHbar} />\r\n                                    </View>\r\n                                    <Button\r\n                                        onPress={() => rootNavigate(\"SignupScreen\")}\r\n                                        skin=\"rounded-hollow\"\r\n                                        text={i18n.t(\"loginForm.signUp\")}\r\n                                    />\r\n                                </View>\r\n                            </View>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsContainer: {\r\n            flexDirection: \"column\",\r\n            width: \"100%\",\r\n        },\r\n        loginButtonIcon: {\r\n            color: theme.textWhite,\r\n            fontSize: 20,\r\n            marginLeft: 5,\r\n        },\r\n        forgotPwdLink: {\r\n            height: 48,\r\n            justifyContent: \"center\",\r\n            paddingHorizontal: 8, // make the button larger to click on\r\n        },\r\n        forgotPasswordText: {\r\n            fontSize: 14,\r\n            letterSpacing: 0.5,\r\n            color: theme.textLight,\r\n            textAlign: \"center\",\r\n        },\r\n        separatorContainer: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        separatorHbar: {\r\n            flex: 1,\r\n            height: 1,\r\n            backgroundColor: theme.text,\r\n            opacity: 0.2,\r\n        },\r\n        separatorText: {\r\n            fontSize: 14,\r\n            color: theme.textLight,\r\n            paddingHorizontal: 10,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(LoginForm));\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet, StyleProp, ViewStyle, Keyboard} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {getLoginTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {VALIDATOR_EMAIL_LOGIN} from \"../../validators\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {forgotPassword} from \"../../state/auth/actions\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport FormError from \"./FormError\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {navigateBack} from \"../../navigation/utils\";\r\nimport Button from \"../Button\";\r\n\r\ntype FormState = {\r\n    email: string;\r\n};\r\n\r\n// Use Yup to create the validation schema\r\nconst ForgotPasswordFormSchema = Yup.object().shape({\r\n    email: VALIDATOR_EMAIL_LOGIN,\r\n});\r\n\r\n// Component props\r\nexport type ForgotPasswordFormProps = ThemeProps & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\n// Component state\r\nexport type ForgotPasswordFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass ForgotPasswordForm extends React.Component<ForgotPasswordFormProps, ForgotPasswordFormState> {\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: ForgotPasswordFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit({email}: FormState) {\r\n        this.setState({...this.state, submitting: true});\r\n        (store.dispatch as MyThunkDispatch)(forgotPassword(email)).then(({errors}: ValidatedActionReturn) => {\r\n            if (errors && errors.fields) {\r\n                const f = errors.fields;\r\n                Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n            }\r\n            this.setState({remoteErrors: errors, submitting: false});\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={[{width: \"100%\"}, containerStyle]}>\r\n                <View style={styles.titleWrapper}>\r\n                    <Text style={styles.title}>{i18n.t(\"newPassword\")}</Text>\r\n                    <Text style={styles.description}>{i18n.t(\"forgotPasswordExplanation\")}</Text>\r\n                </View>\r\n                <Formik\r\n                    initialValues={{email: \"\"} as FormState}\r\n                    validationSchema={ForgotPasswordFormSchema}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikCfg: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikCfg;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"email\"\r\n                                    placeholder={i18n.t(\"emailAddress\")}\r\n                                    error={errors.email}\r\n                                    value={values.email}\r\n                                    touched={touched.email}\r\n                                    isEmail={true}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <View style={styles.actionsContainer}>\r\n                                    <FormSubmitButton\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            handleSubmit();\r\n                                        }}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"send\")}\r\n                                        submitting={submitting}\r\n                                    />\r\n                                    <Button\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            navigateBack();\r\n                                        }}\r\n                                        skin=\"rounded-hollow\"\r\n                                        text={i18n.t(\"cancel\")}\r\n                                    />\r\n                                </View>\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsContainer: {\r\n            flexDirection: \"column\",\r\n            width: \"100%\",\r\n            marginTop: 40,\r\n        },\r\n        titleWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"flex-start\",\r\n            marginBottom: 20,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n        description: {\r\n            textAlign: \"justify\",\r\n            fontSize: 16,\r\n            marginTop: 10,\r\n            color: theme.textLight,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ForgotPasswordForm);\r\n","import * as React from \"react\";\r\nimport {ScrollView, LayoutChangeEvent, StyleProp, ViewStyle, Keyboard, KeyboardAvoidingView} from \"react-native\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\n\r\ntype ScrollFormWrapperProps = ThemeProps & {contentStyle?: StyleProp<ViewStyle>; notKeyboardReactive?: boolean};\r\n\r\ntype ScrollFormWrapperState = {height: number};\r\n\r\nclass ScrollFormWrapper extends React.Component<ScrollFormWrapperProps, ScrollFormWrapperState> {\r\n    keyboardShown = false;\r\n\r\n    constructor(props: ScrollFormWrapperProps) {\r\n        super(props);\r\n        this.state = {height: 0};\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.props.notKeyboardReactive) {\r\n            Keyboard.addListener(\"keyboardDidShow\", () => {\r\n                /*const coords = e.endCoordinates;\r\n                console.log(coords);\r\n                if (coords) this.setState({...this.state, height: coords.height, keyboardTopY: coords.screenY, keyboardOpen: true});*/\r\n                this.keyboardShown = true;\r\n            });\r\n            Keyboard.addListener(\"keyboardDidHide\", () => (this.keyboardShown = false));\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {notKeyboardReactive, contentStyle, theme} = this.props;\r\n        const {height} = this.state;\r\n\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScrollView\r\n                keyboardShouldPersistTaps=\"handled\"\r\n                style={styles.scrollView}\r\n                contentContainerStyle={[\r\n                    styles.scrollViewContent,\r\n                    {\r\n                        minHeight: notKeyboardReactive ? 0 : height,\r\n                    },\r\n                ]}\r\n                onLayout={(e: LayoutChangeEvent) => {\r\n                    if (!notKeyboardReactive || this.state.height == 0) {\r\n                        // Manually give a minimum height to the content\r\n                        if (!this.keyboardShown) this.setState({...this.state, height: e.nativeEvent.layout.height});\r\n                    }\r\n                }}\r\n            >\r\n                <KeyboardAvoidingView behavior=\"padding\" style={[styles.keyboardAvoidingView, contentStyle]}>\r\n                    {this.props.children}\r\n                </KeyboardAvoidingView>\r\n            </ScrollView>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => ({\r\n    keyboardAvoidingView: {\r\n        flex: 1,\r\n        width: \"80%\",\r\n        maxWidth: 400,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n    scrollView: {\r\n        flex: 1,\r\n        width: \"100%\",\r\n    },\r\n    scrollViewContent: {\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n}));\r\n\r\nexport default withTheme(ScrollFormWrapper);\r\n","import * as React from \"react\";\r\nimport {StyleProp, StyleSheet, Text, TextInput, View, ViewStyle, Keyboard} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {VALIDATOR_EMAIL_SIGNUP, VALIDATOR_PASSWORD_SIGNUP, VALIDATOR_PASSWORD_REPEAT} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps, formStyles} from \"../../styles/forms\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {requestRegister} from \"../../state/auth/actions\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport FormError from \"./FormError\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {navigateBack} from \"../../navigation/utils\";\r\nimport Button from \"../Button\";\r\n\r\ntype FormState = {\r\n    email: string;\r\n    password: string;\r\n    passwordRepeat: string;\r\n};\r\n\r\nconst initialState = (): FormState => ({\r\n    email: \"\",\r\n    password: \"\",\r\n    passwordRepeat: \"\",\r\n});\r\n\r\n// Use Yup to create the validation schema\r\nconst SignupFormSchema = Yup.object().shape({\r\n    email: VALIDATOR_EMAIL_SIGNUP,\r\n    password: VALIDATOR_PASSWORD_SIGNUP,\r\n    passwordRepeat: VALIDATOR_PASSWORD_REPEAT,\r\n});\r\n\r\n// Component props\r\ntype SignupFormProps = FormProps<FormState> & ThemeProps & {containerStyle?: StyleProp<ViewStyle>};\r\n\r\n// Component state\r\ntype SignupFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass SignupForm extends React.Component<SignupFormProps, SignupFormState> {\r\n    pwdField1Ref = React.createRef<FormTextInput>();\r\n    pwdField2Ref = React.createRef<FormTextInput>();\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: SignupFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        this.setState({...this.state, submitting: true});\r\n        (store.dispatch as MyThunkDispatch)(requestRegister(values.email, values.password)).then(\r\n            ({success, errors}: ValidatedActionReturn) => {\r\n                if (success && this.props.onSuccessfulSubmit) this.props.onSuccessfulSubmit(values);\r\n                if (errors && errors.fields) {\r\n                    const f = errors.fields;\r\n                    Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                }\r\n                this.setState({remoteErrors: errors, submitting: false});\r\n            },\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, containerStyle} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n        const fstyles = formStyles(theme);\r\n\r\n        return (\r\n            <View style={[{width: \"100%\"}, containerStyle]}>\r\n                <Text style={styles.title}>{i18n.t(\"signupWelcome\")}</Text>\r\n                <Formik\r\n                    initialValues={initialState()}\r\n                    validationSchema={SignupFormSchema}\r\n                    validateOnChange={true}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 5)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"email\"\r\n                                    placeholder={i18n.t(\"emailAddress\")}\r\n                                    accessibilityLabel={i18n.t(\"emailAddress\")}\r\n                                    error={errors.email}\r\n                                    value={values.email}\r\n                                    touched={touched.email}\r\n                                    isEmail={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdField1Ref.current?.focus()}\r\n                                    {...textInputProps}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"email\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdField1Ref}\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    accessibilityLabel={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdField2Ref.current?.focus()}\r\n                                    {...textInputProps}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"lock\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                />\r\n\r\n                                {/* TEMP This is a workaround for a bug on some iOS versions.\r\n                                    See https://github.com/facebook/react-native/issues/21572 */}\r\n                                <TextInput style={{width: 1, height: 1}} />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdField2Ref}\r\n                                    field=\"passwordRepeat\"\r\n                                    placeholder={i18n.t(\"passwordRepeat\")}\r\n                                    accessibilityLabel={i18n.t(\"passwordRepeat\")}\r\n                                    error={errors.passwordRepeat}\r\n                                    value={values.passwordRepeat}\r\n                                    touched={touched.passwordRepeat}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"done\"\r\n                                    {...textInputProps}\r\n                                    icon={(focused) => (\r\n                                        <MaterialIcons\r\n                                            name=\"lock\"\r\n                                            style={[\r\n                                                fstyles.inputFieldIcon,\r\n                                                focused ? fstyles.inputFieldIconFocused : {},\r\n                                            ]}\r\n                                        />\r\n                                    )}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <View style={styles.actionsContainer}>\r\n                                    <FormSubmitButton\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            handleSubmit();\r\n                                        }}\r\n                                        skin=\"rounded-filled\"\r\n                                        text={i18n.t(\"createAccount\")}\r\n                                        submitting={submitting}\r\n                                    />\r\n                                    <Button\r\n                                        onPress={() => {\r\n                                            Keyboard.dismiss();\r\n                                            navigateBack();\r\n                                        }}\r\n                                        skin=\"rounded-hollow\"\r\n                                        text={i18n.t(\"cancel\")}\r\n                                    />\r\n                                </View>\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsContainer: {\r\n            flexDirection: \"column\",\r\n            width: \"100%\",\r\n            marginTop: 10,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            marginBottom: 5,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SignupForm);\r\n","import * as React from \"react\";\r\nimport {SvgProps} from \"react-native-svg\";\r\n\r\n// Component props\r\nexport type SvgPlaceholderProps = SvgProps;\r\n\r\nfunction SvgPlaceholder(): JSX.Element {\r\n    return <></>;\r\n}\r\n\r\nexport default SvgPlaceholder;\r\n","import {SvgProps} from \"react-native-svg\";\r\nimport SvgPlaceholder from \"./components/SvgPlaceholder\";\r\nimport {SupportedLocale} from \"./localization\";\r\nimport store from \"./state/store\";\r\nimport {ThemeKey} from \"./types\";\r\n\r\nlet loaded: {[key: string]: number} = {};\r\nlet locale: SupportedLocale | null = null;\r\nlet theme: ThemeKey | null = null;\r\n\r\nasync function assetDictCommon(theme: ThemeKey, key: string): Promise<unknown> {\r\n    switch (key) {\r\n        case \"welcome\":\r\n            return import(\"@assets/images/welcome.svg\");\r\n        case \"login-header\":\r\n            return import(\"@assets/images/login.svg\");\r\n        case \"offers.categories.discover\":\r\n            return import(\"@assets/images/offers/discover.svg\");\r\n        case \"offers.categories.meet\":\r\n            return import(\"@assets/images/offers/meet.svg\");\r\n        case \"offers.categories.collaborate\":\r\n            return import(\"@assets/images/offers/collaborate.svg\");\r\n        case \"background.onboarding\":\r\n            return import(\"@assets/images/background.svg\");\r\n        case \"logos.junior-atlantique\":\r\n            return theme === \"light\"\r\n                ? import(\"@assets/images/logos/junior-atlantique-light.png\")\r\n                : import(\"@assets/images/logos/junior-atlantique-dark.png\");\r\n        case \"logos.sea-eu-around.small\":\r\n            return import(\"@assets/images/logos/sea-eu-around.small.png\");\r\n        default:\r\n            return import(\"@assets/images/placeholder.png\");\r\n    }\r\n}\r\n\r\nasync function assetDictEn(theme: ThemeKey, key: string): Promise<unknown> {\r\n    switch (key) {\r\n        case \"logos.erasmusLeft\":\r\n            return import(\"@assets/images/logos/logosbeneficaireserasmusleft_en_0.png\");\r\n        default:\r\n            return null;\r\n    }\r\n}\r\n\r\nasync function assetDictFr(theme: ThemeKey, key: string): Promise<unknown> {\r\n    switch (key) {\r\n        case \"logos.erasmusLeft\":\r\n            return import(\"@assets/images/logos/logosbeneficaireserasmusleft_fr_0.png\");\r\n        default:\r\n            return null;\r\n    }\r\n}\r\n\r\nexport function getLocalImage(key: string, onLoad?: () => void): number {\r\n    const settings = store.getState().settings.userSettings;\r\n    if (locale != settings.locale || theme != settings.theme) loaded = {};\r\n    locale = settings.locale;\r\n    theme = settings.theme;\r\n\r\n    if (loaded[key]) return loaded[key];\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const finish = (v: any) => {\r\n        loaded[key] = v.default;\r\n        if (onLoad) onLoad();\r\n    };\r\n\r\n    const localizedDict = locale === \"en\" ? assetDictEn : assetDictFr;\r\n\r\n    localizedDict(theme, key).then((v) => {\r\n        // Fallback to the common dict if needed\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        if (v === null) assetDictCommon(theme!, key).then((v) => finish(v));\r\n        else finish(v);\r\n    });\r\n\r\n    return 0;\r\n}\r\n\r\nexport function getLocalSvg(key: string, onLoad?: () => void): React.FC<SvgProps> {\r\n    const raw = getLocalImage(key, onLoad);\r\n    if (raw === 0) return SvgPlaceholder;\r\n    return (raw as unknown) as React.FC<SvgProps>;\r\n}\r\n","import * as React from \"react\";\r\nimport {Text, TouchableOpacity, StyleSheet, Dimensions, Keyboard, Platform} from \"react-native\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport {useSafeAreaInsets, EdgeInsets} from \"react-native-safe-area-context\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\ntype LoginHeaderProps = ThemeProps & {insets: EdgeInsets};\r\n\r\nexport const LOGIN_HEADER_WAVE_HEIGHT = 60;\r\nconst SVG_VIEWBOX_W = 620;\r\nconst SVG_VIEWBOX_H = 800;\r\n\r\nclass LoginHeaderClass extends React.Component<LoginHeaderProps> {\r\n    height = new ReAnimated.Value<number>(this.getFullHeight() - LOGIN_HEADER_WAVE_HEIGHT);\r\n    imageTop = new ReAnimated.Value<number>(this.getFullHeight() - this.getImageHeight());\r\n\r\n    back(): void {\r\n        Keyboard.dismiss();\r\n        rootNavigate(\"WelcomeScreen\");\r\n    }\r\n\r\n    getImageHeight(): number {\r\n        return (SVG_VIEWBOX_H / SVG_VIEWBOX_W) * Dimensions.get(\"window\").width;\r\n    }\r\n\r\n    getCollapsedHeight(): number {\r\n        return 280 + this.props.insets.top;\r\n    }\r\n\r\n    getFullHeight(): number {\r\n        const maxHeight = 530;\r\n        return Math.min(Dimensions.get(\"window\").height - 420 + this.props.insets.top, maxHeight);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Keyboard.addListener(\"keyboardDidShow\", () => {\r\n            const easing: ReAnimated.EasingFunction = Easing.cubic;\r\n            const duration = 100;\r\n\r\n            ReAnimated.timing(this.height, {\r\n                toValue: this.getCollapsedHeight() - LOGIN_HEADER_WAVE_HEIGHT,\r\n                duration,\r\n                easing,\r\n            }).start();\r\n            ReAnimated.timing(this.imageTop, {\r\n                toValue: this.getCollapsedHeight() - this.getImageHeight(),\r\n                duration,\r\n                easing,\r\n            }).start();\r\n        });\r\n\r\n        Keyboard.addListener(\"keyboardDidHide\", () => {\r\n            const easing: ReAnimated.EasingFunction = Easing.cubic;\r\n            const duration = 100;\r\n\r\n            ReAnimated.timing(this.height, {\r\n                toValue: this.getFullHeight() - LOGIN_HEADER_WAVE_HEIGHT,\r\n                duration,\r\n                easing,\r\n            }).start();\r\n            ReAnimated.timing(this.imageTop, {\r\n                toValue: this.getFullHeight() - this.getImageHeight(),\r\n                duration,\r\n                easing,\r\n            }).start();\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n\r\n        const styles = themedStyles(theme);\r\n        const Image = getLocalSvg(\"login-header\");\r\n\r\n        return Platform.OS === \"web\" ? (\r\n            <></>\r\n        ) : (\r\n            <>\r\n                <ReAnimated.View style={[styles.image, {top: this.imageTop}]}>\r\n                    <Image viewBox={`0 0 ${SVG_VIEWBOX_W} ${SVG_VIEWBOX_H}`} />\r\n                </ReAnimated.View>\r\n                <ReAnimated.View style={[styles.container, {height: this.height}]}>\r\n                    <TouchableOpacity style={styles.navigationButton} onPress={() => this.back()}>\r\n                        <MaterialIcons name=\"chevron-left\" style={styles.navigationIcon} />\r\n                    </TouchableOpacity>\r\n                    <Text style={styles.title}>{i18n.t(\"loginForm.title\")}</Text>\r\n                </ReAnimated.View>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            width: \"100%\",\r\n            padding: 40,\r\n            zIndex: 2,\r\n            //overflow: \"hidden\",\r\n        },\r\n        navigationButton: {\r\n            width: 50,\r\n            marginLeft: -15,\r\n        },\r\n        navigationIcon: {\r\n            color: theme.textWhite,\r\n            fontSize: 50,\r\n        },\r\n        title: {\r\n            color: theme.textWhite,\r\n            fontSize: 42,\r\n            maxWidth: 200,\r\n            fontFamily: \"RalewaySemiBold\",\r\n        },\r\n        image: {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            width: Dimensions.get(\"window\").width,\r\n            aspectRatio: SVG_VIEWBOX_W / SVG_VIEWBOX_H,\r\n            zIndex: 1,\r\n        },\r\n    });\r\n});\r\n\r\nexport default function LoginHeader(): JSX.Element {\r\n    const insets = useSafeAreaInsets();\r\n    return (\r\n        <ThemeConsumer>\r\n            {(themeProps: ThemeProps) => <LoginHeaderClass {...themeProps} insets={insets} />}\r\n        </ThemeConsumer>\r\n    );\r\n}\r\n","import * as React from \"react\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport LoginForm from \"../components/forms/LoginForm\";\r\nimport ForgotPasswordForm from \"../components/forms/ForgotPasswordForm\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {TabLoginSigninScreens} from \"../navigation/types\";\r\nimport ScrollFormWrapper from \"../components/forms/ScrollFormWrapper\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport SignupForm from \"../components/forms/SignupForm\";\r\nimport {LOGIN_HEADER_WAVE_HEIGHT} from \"../components/headers/LoginHeader\";\r\n\r\ntype TabLoginScreenProps = ThemeProps & StackScreenProps<TabLoginSigninScreens, \"LoginScreen\">;\r\n\r\nexport class LoginScreen extends React.Component<TabLoginScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper notKeyboardReactive={true}>\r\n                    {/* Add top padding to the form so the top is below the header wave */}\r\n                    <LoginForm containerStyle={{paddingTop: LOGIN_HEADER_WAVE_HEIGHT}} />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\ntype ForgotPasswordScreenProps = ThemeProps & StackScreenProps<TabLoginSigninScreens, \"ForgotPasswordScreen\">;\r\n\r\nexport class ForgotPasswordScreen extends React.Component<ForgotPasswordScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper notKeyboardReactive={true}>\r\n                    <ForgotPasswordForm containerStyle={{paddingTop: LOGIN_HEADER_WAVE_HEIGHT}} />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\ntype SignupScreenProps = ThemeProps;\r\n\r\nexport default class SignupScreen extends React.Component<SignupScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper>\r\n                    <SignupForm containerStyle={{paddingTop: LOGIN_HEADER_WAVE_HEIGHT}} />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\n// Component props\r\nexport type SemiHighlightedTextProps = {\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    text: string;\r\n    fontSize?: number;\r\n} & ThemeProps;\r\n\r\nclass SemiHighlightedText extends React.Component<SemiHighlightedTextProps> {\r\n    render(): JSX.Element {\r\n        const {theme, text, containerStyle, textStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fontSize = this.props.fontSize || 24;\r\n        const underlineHeight = fontSize * 0.55;\r\n        const underlineBottom = -1;\r\n        const underlineSides = fontSize * 0.4;\r\n\r\n        return (\r\n            <View style={[styles.textContainer, containerStyle]}>\r\n                <View style={[styles.underline, {height: underlineHeight, bottom: underlineBottom}]} />\r\n                <Text style={[styles.text, textStyle, {fontSize, paddingHorizontal: underlineSides}]}>{text}</Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        textContainer: {\r\n            alignItems: \"center\",\r\n        },\r\n        text: {\r\n            fontFamily: \"RalewaySemiBold\",\r\n            color: theme.accent,\r\n            zIndex: 2,\r\n\r\n            // Make it more readable with the dark theme\r\n            ...(theme.id === \"dark\"\r\n                ? {\r\n                      textShadowColor: \"rgba(0, 0, 0, 0.6)\",\r\n                      textShadowOffset: {width: 0, height: 1},\r\n                      textShadowRadius: 1,\r\n                  }\r\n                : {}),\r\n        },\r\n        underline: {\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            backgroundColor: theme.accentTernary,\r\n            zIndex: 1,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SemiHighlightedText);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport SemiHighlightedText from \"../components/SemiHighlightedText\";\r\nimport {getLocalSvg} from \"../assets\";\r\nimport Button from \"../components/Button\";\r\n\r\nexport type WelcomeScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass WelcomeScreen extends React.Component<WelcomeScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const WelcomeImage = getLocalSvg(\"welcome\", () => this.forceUpdate());\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <View style={styles.imageContainer}>\r\n                        <WelcomeImage />\r\n                    </View>\r\n                    <View style={styles.textContainer}>\r\n                        <SemiHighlightedText text={i18n.t(\"appName\")} fontSize={32} textStyle={styles.appName} />\r\n                        <Text style={styles.subtitle} numberOfLines={2}>\r\n                            {i18n.t(\"welcomeScreen.subtitle\")}\r\n                        </Text>\r\n                    </View>\r\n                    <View style={styles.actionsContainer}>\r\n                        <Button\r\n                            text={i18n.t(\"welcomeScreen.signIn\")}\r\n                            onPress={() => rootNavigate(\"SigninScreen\")}\r\n                            skin=\"rounded-filled\"\r\n                        />\r\n                        <Button\r\n                            text={i18n.t(\"welcomeScreen.signUp\")}\r\n                            onPress={() => rootNavigate(\"SignupScreen\")}\r\n                            skin=\"rounded-hollow\"\r\n                        />\r\n                    </View>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"85%\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n            paddingTop: \"20%\",\r\n        },\r\n        imageContainer: {\r\n            width: \"100%\",\r\n            height: 300,\r\n        },\r\n        textContainer: {},\r\n        appName: {\r\n            color: theme.accent,\r\n            fontFamily: \"RalewayBold\",\r\n        },\r\n        subtitle: {\r\n            color: theme.accent,\r\n            fontFamily: \"RalewaySemiBold\",\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n            alignSelf: \"center\",\r\n            maxWidth: 250,\r\n            marginTop: 10,\r\n        },\r\n\r\n        actionsContainer: {\r\n            width: \"100%\",\r\n            marginBottom: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(WelcomeScreen);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {StyleProp, TouchableOpacity, View, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ModalImplProps} from \"./ModalImpl.native\";\r\n\r\ntype ModalImplState = {\r\n    modalVisible: boolean;\r\n};\r\n\r\nexport class ModalImplClass extends React.Component<ModalImplProps, ModalImplState> {\r\n    el: HTMLDivElement;\r\n\r\n    constructor(props: ModalImplProps) {\r\n        super(props);\r\n        this.state = {modalVisible: props.visible || false};\r\n        this.el = document.createElement(\"div\");\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        document.body.appendChild(this.el);\r\n    }\r\n\r\n    componentDidUpdate(oldProps: ModalImplProps): void {\r\n        if (oldProps.visible && !this.props.visible) this.setModalVisible(false);\r\n        if (!oldProps.visible && this.props.visible) this.setModalVisible(true);\r\n    }\r\n\r\n    setModalVisible(b: boolean): void {\r\n        this.setState({...this.state, modalVisible: b});\r\n        if (!b && this.props.onHide) this.props.onHide();\r\n        if (b && this.props.onShow) this.props.onShow();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            modalViewStyle,\r\n            bottom,\r\n            fullWidth,\r\n            fullHeight,\r\n            nonDismissable,\r\n            noBackground,\r\n            backdropOpacity,\r\n        } = this.props;\r\n        const {modalVisible} = this.state;\r\n\r\n        const modal = modalVisible ? (\r\n            <>\r\n                <TouchableOpacity\r\n                    style={\r\n                        ({\r\n                            position: \"fixed\",\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            left: 0,\r\n                            top: 0,\r\n                            backgroundColor: `rgba(0,0,0,${backdropOpacity || 0.05})`,\r\n                            cursor: \"pointer\",\r\n                        } as unknown) as StyleProp<ViewStyle> // force typings to accept web-specific styling\r\n                    }\r\n                    activeOpacity={1.0}\r\n                    onPress={nonDismissable ? undefined : () => this.setModalVisible(false)}\r\n                />\r\n                <View\r\n                    style={[\r\n                        ({\r\n                            // Centering\r\n                            position: \"fixed\",\r\n                            left: 0,\r\n                            right: 0,\r\n                            ...(bottom ? {} : {top: 0}),\r\n                            bottom: 0,\r\n                            margin: \"auto\",\r\n                            // Actual styling\r\n                            width: \"50%\",\r\n                            height: \"fit-content\",\r\n                            maxWidth: 300,\r\n                            borderRadius: 3,\r\n                            paddingVertical: 20,\r\n                            paddingHorizontal: 30,\r\n                            alignItems: \"center\",\r\n                        } as unknown) as ViewStyle, // force typings to accept web-specific styling\r\n                        fullWidth ? {width: \"100%\", maxWidth: \"100%\"} : {},\r\n                        fullHeight ? {height: \"100%\"} : {},\r\n                        !noBackground\r\n                            ? (({\r\n                                  backgroundColor: theme.cardBackground,\r\n                                  boxShadow: \"0px 0px 8px 0px rgba(0,0,0,0.05)\",\r\n                              } as unknown) as ViewStyle)\r\n                            : {},\r\n                        modalViewStyle,\r\n                    ]}\r\n                >\r\n                    {this.props.renderContent(() => this.setModalVisible(false))}\r\n                </View>\r\n            </>\r\n        ) : (\r\n            <></>\r\n        );\r\n\r\n        // \"Teleport\" the modal to an element that we previously appended to the <body>\r\n        return ReactDOM.createPortal(modal, this.el);\r\n    }\r\n}\r\n\r\nexport default withTheme(ModalImplClass);\r\n","import React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ModalImpl, {ModalImplClass} from \"./ModalImpl\";\r\nimport {ModalImplProps} from \"./ModalImpl.native\";\r\n\r\nexport type ModalActivator = (show: () => void) => JSX.Element;\r\n\r\nexport type CustomModalProps = ModalImplProps & {activator?: ModalActivator};\r\n\r\nexport class CustomModalClass extends React.Component<CustomModalProps> {\r\n    modalRef = React.createRef<ModalImplClass>();\r\n\r\n    show(): void {\r\n        this.modalRef.current?.setModalVisible(true);\r\n    }\r\n\r\n    hide(): void {\r\n        this.modalRef.current?.setModalVisible(false);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {activator, ...otherProps} = this.props;\r\n\r\n        const activatorElement = activator ? activator(() => this.show()) : <></>;\r\n\r\n        return (\r\n            <>\r\n                {activatorElement}\r\n                <ModalImpl ref={this.modalRef} {...otherProps} />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(CustomModalClass);\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {TouchableOpacity, Platform} from \"react-native\";\r\nimport {BottomSheet, ListItem, withTheme} from \"react-native-elements\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport {debugConnect} from \"../state/auth/actions\";\r\nimport store from \"../state/store\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {ThemeProps} from \"../types\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\ntype DebugMenuProps = ThemeProps;\r\ntype DebugMenuState = {visible: boolean};\r\n\r\nclass DebugMenu extends React.Component<DebugMenuProps, DebugMenuState> {\r\n    ACTIONS = [\r\n        {\r\n            title: \"Access MainScreen\",\r\n            onPress: () => {\r\n                rootNavigate(\"MainScreen\");\r\n                this.hide();\r\n            },\r\n        },\r\n        {\r\n            title: \"Access OnBoardingScreen\",\r\n            onPress: () => {\r\n                rootNavigate(\"OnboardingScreen\");\r\n                this.hide();\r\n            },\r\n        },\r\n        {\r\n            title: \"Automatically create profile\",\r\n            onPress: () => {\r\n                (store.dispatch as MyThunkDispatch)(debugConnect());\r\n                this.hide();\r\n            },\r\n        },\r\n        {\r\n            title: \"Hide\",\r\n            containerStyle: {backgroundColor: \"red\"},\r\n            titleStyle: {color: \"white\"},\r\n            onPress: () => this.hide(),\r\n        },\r\n    ];\r\n\r\n    constructor(props: DebugMenuProps) {\r\n        super(props);\r\n        this.state = {visible: false};\r\n    }\r\n\r\n    show() {\r\n        this.setState({...this.state, visible: true});\r\n    }\r\n\r\n    hide() {\r\n        this.setState({...this.state, visible: false});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const {visible} = this.state;\r\n\r\n        const debugContent = (\r\n            <>\r\n                <ListItem>\r\n                    <ListItem.Content>\r\n                        <ListItem.Title style={{fontSize: 26, marginBottom: 10, color: theme.text}}>\r\n                            Debug Menu\r\n                        </ListItem.Title>\r\n                    </ListItem.Content>\r\n                </ListItem>\r\n                {this.ACTIONS.map((l, i) => (\r\n                    <ListItem key={`debug-action-${i}`} containerStyle={l.containerStyle} onPress={l.onPress}>\r\n                        <ListItem.Content>\r\n                            <ListItem.Title style={l.titleStyle}>{l.title}</ListItem.Title>\r\n                        </ListItem.Content>\r\n                    </ListItem>\r\n                ))}\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <TouchableOpacity\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        bottom: 50,\r\n                        right: 10,\r\n                        width: 36,\r\n                        height: 36,\r\n                        backgroundColor: theme.error,\r\n                        borderRadius: 20,\r\n                        justifyContent: \"center\",\r\n                        alignItems: \"center\",\r\n                    }}\r\n                    onPress={() => this.show()}\r\n                >\r\n                    <FontAwesome name=\"gear\" color=\"white\" style={{fontSize: 26}} />\r\n                </TouchableOpacity>\r\n                {Platform.OS !== \"web\" && (\r\n                    <BottomSheet modalProps={{statusBarTranslucent: true}} isVisible={visible}>\r\n                        {debugContent}\r\n                    </BottomSheet>\r\n                )}\r\n                {Platform.OS === \"web\" && (\r\n                    <CustomModal visible={visible} onHide={() => this.hide()} renderContent={() => debugContent} />\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(DebugMenu);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {APP_VERSION} from \"../constants/config\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type VersionInfoProps = ThemeProps;\r\n\r\nfunction VersionInfo(props: VersionInfoProps): JSX.Element {\r\n    const {theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    return (\r\n        <View style={styles.versionInfoContainer}>\r\n            <Text style={styles.versionText}>{APP_VERSION} </Text>\r\n            <Text style={[styles.versionText, styles.versionAlphaText]}> (Alpha)</Text>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        versionInfoContainer: {\r\n            position: \"absolute\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            bottom: 5,\r\n            left: 5,\r\n        },\r\n        versionText: {color: theme.textLight, fontSize: 12},\r\n        versionAlphaText: {color: theme.error},\r\n        versionDisclaimerIcon: {color: theme.error, fontSize: 13},\r\n    });\r\n});\r\n\r\nexport default withTheme(VersionInfo);\r\n","import {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, TouchableOpacity, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {toggleTheme} from \"../state/settings/actions\";\r\nimport store from \"../state/store\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type FloatingThemeToggleProps = ThemeProps;\r\n\r\nfunction FloatingThemeToggle(props: FloatingThemeToggleProps): JSX.Element {\r\n    const {theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    return (\r\n        <View style={styles.toggleThemeContainer}>\r\n            <TouchableOpacity style={styles.toggleThemeButton} onPress={() => store.dispatch(toggleTheme())}>\r\n                <MaterialCommunityIcons style={styles.toggleThemeIcon} name=\"theme-light-dark\" color=\"black\" />\r\n            </TouchableOpacity>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        toggleThemeContainer: {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n        },\r\n        toggleThemeButton: {\r\n            width: 48,\r\n            height: 48,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        toggleThemeIcon: {\r\n            fontSize: 26,\r\n            color: theme.textLight,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FloatingThemeToggle);\r\n","/* eslint-disable react/display-name */\r\nimport * as React from \"react\";\r\nimport {createMaterialTopTabNavigator} from \"@react-navigation/material-top-tabs\";\r\nimport SignupScreen, {LoginScreen, ForgotPasswordScreen} from \"../screens/TabLoginScreen\";\r\nimport {TabLoginRoot, TabLoginSigninScreens} from \"./types\";\r\nimport {screenTitle} from \"./utils\";\r\nimport WelcomeScreen from \"../screens/WelcomeScreen\";\r\nimport LoginHeader from \"../components/headers/LoginHeader\";\r\nimport DebugMenu from \"../components/DebugMenu\";\r\nimport {DEBUG_MODE} from \"../constants/config\";\r\nimport VersionInfo from \"../components/VersionInfo\";\r\nimport FloatingThemeToggle from \"../components/FloatingThemeToggle\";\r\n\r\nconst SigninRoot = createMaterialTopTabNavigator<TabLoginSigninScreens>();\r\nconst Tab = createMaterialTopTabNavigator<TabLoginRoot>();\r\n\r\nconst LoginNavigator = (): JSX.Element => (\r\n    <Tab.Navigator swipeEnabled={false} tabBar={() => <></>}>\r\n        <Tab.Screen name=\"WelcomeScreen\" component={WelcomeScreen} options={{title: screenTitle(\"WelcomeScreen\")}} />\r\n        <Tab.Screen name=\"SigninScreen\">\r\n            {() => (\r\n                <>\r\n                    <LoginHeader />\r\n                    <SigninRoot.Navigator tabBar={() => <></>} initialRouteName=\"LoginScreen\" swipeEnabled={false}>\r\n                        <SigninRoot.Screen\r\n                            name=\"ForgotPasswordScreen\"\r\n                            component={ForgotPasswordScreen}\r\n                            options={{\r\n                                title: screenTitle(\"ForgotPasswordScreen\"),\r\n                            }}\r\n                        />\r\n                        <SigninRoot.Screen\r\n                            name=\"LoginScreen\"\r\n                            component={LoginScreen}\r\n                            options={{title: screenTitle(\"LoginScreen\")}}\r\n                        />\r\n                        <SigninRoot.Screen\r\n                            name=\"SignupScreen\"\r\n                            component={SignupScreen}\r\n                            options={{title: screenTitle(\"SignupScreen\")}}\r\n                        />\r\n                    </SigninRoot.Navigator>\r\n\r\n                    <VersionInfo />\r\n                    <FloatingThemeToggle />\r\n                    {DEBUG_MODE && <DebugMenu />}\r\n                </>\r\n            )}\r\n        </Tab.Screen>\r\n    </Tab.Navigator>\r\n);\r\n\r\nexport default LoginNavigator;\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Text, TextStyle, TouchableOpacity, StyleSheet} from \"react-native\";\r\nimport {logout} from \"../state/auth/actions\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect();\r\n\r\n// Component props\r\nexport type LogOutButtonProps = {\r\n    onLogOut?: () => void;\r\n    style: TextStyle;\r\n} & ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps;\r\n\r\nclass LogOutButton extends React.Component<LogOutButtonProps> {\r\n    render(): JSX.Element {\r\n        const {dispatch, theme, onLogOut, style} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <TouchableOpacity\r\n                onPress={() => {\r\n                    dispatch(logout());\r\n                    if (onLogOut) onLogOut();\r\n                }}\r\n            >\r\n                <Text style={[styles.text, style]}>{i18n.t(\"logOut\")}</Text>\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            fontSize: 20,\r\n            color: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(LogOutButton));\r\n","import {FontAwesome5} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport LogOutButton from \"../components/LogOutButton\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nexport type TabNotImplementedScreenProps = ThemeProps;\r\n\r\nclass TabNotImplementedScreen extends React.Component<TabNotImplementedScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <FontAwesome5 style={styles.constructionIcon} name=\"hard-hat\"></FontAwesome5>\r\n                    <Text style={styles.title}>Under construction</Text>\r\n                    <View style={styles.separator} />\r\n                    <LogOutButton style={styles.logoutButton} />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        title: {\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n            fontSize: 20,\r\n            fontWeight: \"bold\",\r\n            color: theme.text,\r\n        },\r\n        constructionIcon: {\r\n            color: \"#eecc00\",\r\n            fontSize: 40,\r\n        },\r\n        separator: {\r\n            marginVertical: 30,\r\n            height: 1,\r\n            width: \"80%\",\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        logoutButton: {\r\n            marginVertical: 20,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(TabNotImplementedScreen);\r\n","import * as React from \"react\";\r\nimport {\r\n    TouchableOpacity,\r\n    View,\r\n    ViewStyle,\r\n    StyleSheet,\r\n    Platform,\r\n    StyleProp,\r\n    Dimensions,\r\n    Text,\r\n    ViewProps,\r\n} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport Swipeable, {SwipeableProperties} from \"react-native-gesture-handler/Swipeable\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\n\r\n// Theses style elements are defined this way because they have to be set in very specific ways\r\ntype SwipeableLooks = {\r\n    sideMargin: number;\r\n    borderRadius: number;\r\n    verticalSpacing: number;\r\n    minHeight: number;\r\n};\r\n\r\nconst DEFAULT_LOOKS: SwipeableLooks = {\r\n    sideMargin: 15,\r\n    borderRadius: 10,\r\n    verticalSpacing: 8,\r\n    minHeight: 150,\r\n};\r\n\r\n// Component props\r\nexport type SwipeableCardProps = ThemeProps &\r\n    SwipeableProperties & {\r\n        style?: ViewStyle;\r\n        onHidden?: () => void;\r\n        onPress?: () => void;\r\n        looks?: Partial<SwipeableLooks>;\r\n        leftActions?: (hideCard: (noAnimation?: boolean) => void) => JSX.Element;\r\n        rightActions?: (hideCard: (noAnimation?: boolean) => void) => JSX.Element;\r\n        wrapperProps?: ViewProps;\r\n    };\r\n\r\n// Component state\r\nexport type SwipeableCardState = {\r\n    minHeight: ReAnimated.Value<number>;\r\n    right: ReAnimated.Value<number>;\r\n    hidden: boolean;\r\n};\r\n\r\nexport class SwipeableCardClass extends React.Component<SwipeableCardProps, SwipeableCardState> {\r\n    swipeableRef = React.createRef<Swipeable>();\r\n\r\n    constructor(props: SwipeableCardProps) {\r\n        super(props);\r\n\r\n        const {minHeight} = {...DEFAULT_LOOKS, ...props.looks};\r\n\r\n        this.state = {\r\n            minHeight: new ReAnimated.Value(minHeight),\r\n            right: new ReAnimated.Value(0),\r\n            hidden: false,\r\n        };\r\n    }\r\n\r\n    hide(): void {\r\n        this.setState({...this.state, hidden: true});\r\n        if (this.props.onHidden) this.props.onHidden();\r\n    }\r\n\r\n    collapse(onFinish?: () => void, right?: boolean): void {\r\n        const duration = 200;\r\n        ReAnimated.timing(this.state.right, {\r\n            toValue: (right ? -1 : 1) * Dimensions.get(\"window\").width * 1.5,\r\n            duration,\r\n            easing: Easing.ease,\r\n        }).start();\r\n        setTimeout(() => {\r\n            if (onFinish) onFinish();\r\n            this.hide();\r\n        }, duration);\r\n    }\r\n\r\n    resetSwipe(): void {\r\n        this.swipeableRef.current?.close();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            children,\r\n            leftActions,\r\n            rightActions,\r\n            style,\r\n            looks,\r\n            onPress,\r\n            wrapperProps,\r\n            ...swipeableProps\r\n        } = this.props;\r\n        const {minHeight, right, hidden} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const {borderRadius, sideMargin, verticalSpacing} = {...DEFAULT_LOOKS, ...looks};\r\n        const hideCard = (noAnimation?: boolean) => {\r\n            if (noAnimation) this.hide();\r\n            else this.collapse();\r\n        };\r\n\r\n        return (\r\n            // Use flexBasis, acting as minHeight\r\n            <ReAnimated.View\r\n                style={[styles.wrapper, style, {flexBasis: minHeight, right}, hidden ? {display: \"none\"} : {}]}\r\n                {...wrapperProps}\r\n            >\r\n                <ReAnimated.View style={{}}>\r\n                    <Swipeable\r\n                        ref={this.swipeableRef}\r\n                        containerStyle={[\r\n                            styles.swipeableContainer,\r\n                            {paddingHorizontal: sideMargin, paddingVertical: verticalSpacing},\r\n                        ]}\r\n                        childrenContainerStyle={[styles.swipeable, {borderRadius}]}\r\n                        useNativeAnimations={Platform.OS !== \"web\"}\r\n                        friction={1}\r\n                        renderLeftActions={leftActions ? () => leftActions(hideCard) : swipeableProps.renderLeftActions}\r\n                        renderRightActions={\r\n                            rightActions ? () => rightActions(hideCard) : swipeableProps.renderRightActions\r\n                        }\r\n                        {...swipeableProps}\r\n                    >\r\n                        <TouchableOpacity activeOpacity={0.75} style={styles.touchable} {...(onPress ? {onPress} : {})}>\r\n                            {children}\r\n                        </TouchableOpacity>\r\n                    </Swipeable>\r\n                </ReAnimated.View>\r\n            </ReAnimated.View>\r\n        );\r\n    }\r\n}\r\n\r\nexport type SwipeActionProps = {\r\n    icon?: string;\r\n    text?: string;\r\n    backgroundColor?: string;\r\n    color?: string;\r\n    onPress?: () => void;\r\n    style?: StyleProp<ViewStyle>;\r\n};\r\n\r\nconst oneSidedBorderRadius = (side: \"left\" | \"right\", borderRadius: number) => {\r\n    return side === \"left\"\r\n        ? {borderTopLeftRadius: borderRadius, borderBottomLeftRadius: borderRadius}\r\n        : {borderTopRightRadius: borderRadius, borderBottomRightRadius: borderRadius};\r\n};\r\n\r\nconst SwipeActionButton = withTheme(\r\n    (props: SwipeActionProps & ThemeProps): JSX.Element => {\r\n        const {icon, text, backgroundColor, onPress, style, theme} = props;\r\n        const styles = buttonStyles(theme);\r\n        const color = props.color || theme.textWhite;\r\n\r\n        return (\r\n            <TouchableOpacity onPress={onPress} style={[styles.swipeActionButton, {backgroundColor}, style]}>\r\n                {icon && <MaterialIcons style={[styles.swipeActionButtonIcon, {color}]} name={icon} />}\r\n                {text && <Text style={[styles.swipeActionButtonText, {color}]}>{text}</Text>}\r\n            </TouchableOpacity>\r\n        );\r\n    },\r\n);\r\n\r\ntype SwipeActionsProps = ThemeProps & {\r\n    id: string;\r\n    side: \"left\" | \"right\";\r\n    actions: SwipeActionProps[];\r\n    looks?: Partial<SwipeableLooks>;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n};\r\n\r\nexport const SwipeActionButtons = withTheme(\r\n    (props: React.PropsWithChildren<SwipeActionsProps>): JSX.Element => {\r\n        const {id, actions, side, looks, buttonStyle} = props;\r\n\r\n        const {borderRadius} = {...DEFAULT_LOOKS, ...looks};\r\n\r\n        return (\r\n            <SwipeActionContainer side={side} looks={looks} contentStyle={{aspectRatio: actions.length}}>\r\n                {actions.map((properties: SwipeActionProps, i: number) => {\r\n                    const first = i === 0;\r\n                    const last = i === actions.length - 1;\r\n                    const isExteriorButton = (first && side === \"left\") || (last && side === \"right\");\r\n                    const isInteriorButton = (first && side === \"right\") || (last && side === \"left\");\r\n                    const {backgroundColor} = properties;\r\n\r\n                    // Add a small view to fill the empty area created by the card's border radius\r\n                    const interiorFiller = isInteriorButton ? (\r\n                        <View\r\n                            style={{\r\n                                width: borderRadius,\r\n                                height: \"100%\",\r\n                                position: \"absolute\",\r\n                                top: 0,\r\n                                ...(side === \"left\" ? {right: -borderRadius} : {left: -borderRadius}),\r\n                                backgroundColor,\r\n                            }}\r\n                        />\r\n                    ) : undefined;\r\n\r\n                    return (\r\n                        <React.Fragment key={`swipe-actions-${id}-${side}-${i}`}>\r\n                            {isInteriorButton && interiorFiller}\r\n                            <SwipeActionButton\r\n                                style={[isExteriorButton ? oneSidedBorderRadius(side, borderRadius) : {}, buttonStyle]}\r\n                                {...properties}\r\n                            />\r\n                        </React.Fragment>\r\n                    );\r\n                })}\r\n            </SwipeActionContainer>\r\n        );\r\n    },\r\n);\r\n\r\ntype SwipeActionContainerProps = ThemeProps & {\r\n    side: \"left\" | \"right\";\r\n    looks?: Partial<SwipeableLooks>;\r\n    contentStyle?: StyleProp<ViewStyle>;\r\n    fullCardWidth?: boolean;\r\n};\r\n\r\nexport const SwipeActionContainer = withTheme(\r\n    (props: React.PropsWithChildren<SwipeActionContainerProps>): JSX.Element => {\r\n        const {side, looks, fullCardWidth, contentStyle, theme} = props;\r\n        const styles = buttonStyles(theme);\r\n\r\n        const {borderRadius, sideMargin, verticalSpacing} = {...DEFAULT_LOOKS, ...looks};\r\n\r\n        return (\r\n            <View\r\n                style={[\r\n                    styles.swipeActionsContainer,\r\n                    {paddingVertical: verticalSpacing},\r\n                    side === \"left\"\r\n                        ? {\r\n                              marginLeft: sideMargin,\r\n                              marginRight: -sideMargin,\r\n                              justifyContent: \"flex-start\",\r\n                          }\r\n                        : {\r\n                              marginLeft: -sideMargin,\r\n                              marginRight: sideMargin,\r\n                              justifyContent: \"flex-end\",\r\n                          },\r\n                    fullCardWidth\r\n                        ? {\r\n                              width: \"100%\",\r\n                              marginHorizontal: sideMargin,\r\n                              ...(side === \"left\" ? {paddingRight: sideMargin * 2} : {paddingLeft: sideMargin * 2}),\r\n                          }\r\n                        : {},\r\n                ]}\r\n            >\r\n                <View\r\n                    style={[\r\n                        styles.swipeActionsContent,\r\n                        fullCardWidth ? {borderRadius} : oneSidedBorderRadius(side, borderRadius),\r\n                        contentStyle,\r\n                    ]}\r\n                >\r\n                    {props.children}\r\n                </View>\r\n            </View>\r\n        );\r\n    },\r\n);\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            width: \"100%\",\r\n            overflow: \"hidden\",\r\n        },\r\n        swipeableContainer: {\r\n            width: \"100%\",\r\n        },\r\n        swipeable: {\r\n            width: \"100%\",\r\n            overflow: \"hidden\",\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        touchable: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            overflow: \"hidden\",\r\n        },\r\n    });\r\n});\r\n\r\nconst buttonStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        swipeActionsContainer: {\r\n            height: \"100%\",\r\n        },\r\n        swipeActionsContent: {\r\n            justifyContent: \"flex-start\",\r\n            flexDirection: \"row\",\r\n            height: \"100%\",\r\n        },\r\n        swipeActionButton: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            aspectRatio: 1,\r\n        },\r\n        swipeActionButtonIcon: {\r\n            fontSize: 22,\r\n        },\r\n        swipeActionButtonText: {\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n        },\r\n        swipeActionText: {\r\n            fontSize: 24,\r\n            letterSpacing: 2,\r\n            ...styleTextThin,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SwipeableCardClass);\r\n","import {Theme} from \"../types\";\r\nimport {StyleSheet, ViewStyle} from \"react-native\";\r\nimport {preTheme} from \"./utils\";\r\n\r\nexport const pickerStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        overlay: {\r\n            width: \"90%\",\r\n            maxHeight: \"70%\",\r\n            overflow: \"hidden\",\r\n            paddingHorizontal: 0,\r\n            paddingVertical: 0,\r\n        },\r\n        dropdownWrapper: {\r\n            width: \"100%\",\r\n            flex: 1,\r\n        },\r\n        dropdownStyle: {backgroundColor: \"#fafafa\", height: \"100%\"},\r\n        dropdownItemStyle: {justifyContent: \"flex-start\"} as ViewStyle,\r\n        dropdownActiveItemStyle: {},\r\n        dropdownActiveLabelStyle: {color: theme.accentSecondary},\r\n        dropdownLabelStyle: {fontSize: 16},\r\n        okButton: {\r\n            width: \"100%\",\r\n            height: 50,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            borderRadius: 4,\r\n            backgroundColor: theme.accent,\r\n        },\r\n        okButtonText: {\r\n            fontSize: 20,\r\n            color: theme.textWhite,\r\n        },\r\n        openButton: {\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            paddingVertical: 10,\r\n            paddingHorizontal: 20,\r\n            borderWidth: 1,\r\n            borderRadius: 2,\r\n            backgroundColor: theme.background,\r\n            borderColor: theme.componentBorder,\r\n        },\r\n        openButtonText: {\r\n            fontSize: 14,\r\n            color: theme.text,\r\n        },\r\n        chipContainer: {\r\n            marginTop: 10,\r\n        },\r\n    });\r\n});\r\n","export enum ReportType {\r\n    VIOLENCE = \"violence\",\r\n    NUDITY = \"nudity\",\r\n    HARASSMENT = \"harassment\",\r\n    UNDESIRABLE_CONTENT = \"undesirable-content\",\r\n    HATE_SPEECH = \"hate-speech\",\r\n    VULGAR_CONTENT = \"vulgar-content\",\r\n    OTHER = \"other\",\r\n}\r\n\r\nexport const REPORT_TYPES = [\r\n    ReportType.VIOLENCE,\r\n    ReportType.NUDITY,\r\n    ReportType.HARASSMENT,\r\n    ReportType.UNDESIRABLE_CONTENT,\r\n    ReportType.HATE_SPEECH,\r\n    ReportType.VULGAR_CONTENT,\r\n    ReportType.OTHER,\r\n];\r\n\r\nexport enum ReportEntityType {\r\n    PROFILE_ENTITY = \"ProfileEntity\",\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, ScrollView, TouchableOpacity, TextStyle, ViewStyle, StyleProp} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport CustomModal, {CustomModalClass} from \"./modals/CustomModal\";\r\nimport {pickerStyles} from \"../styles/picker\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type PopUpSelectorProps = ThemeProps & {\r\n    values: string[];\r\n    selected: string[];\r\n    label: (value: string, i: number) => string;\r\n    icon?: (value: string, i: number) => JSX.Element;\r\n    onSelect?: (selected: string[]) => void;\r\n    multiple?: boolean;\r\n    atLeastOne?: boolean;\r\n    placeholder?: string;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    valueStyle?: StyleProp<TextStyle>;\r\n};\r\n\r\n// Component state\r\nexport type PopUpSelectorState = {\r\n    valueDict: {[key: string]: boolean};\r\n};\r\n\r\nclass PopUpSelector extends React.Component<PopUpSelectorProps, PopUpSelectorState> {\r\n    modalRef = React.createRef<CustomModalClass>();\r\n\r\n    constructor(props: PopUpSelectorProps) {\r\n        super(props);\r\n        this.state = {valueDict: {}};\r\n    }\r\n\r\n    private fromSelectedProp() {\r\n        const valueDict: {[key: string]: boolean} = {};\r\n        this.props.selected.forEach((v) => (valueDict[v] = true));\r\n        this.setState({...this.state, valueDict});\r\n    }\r\n\r\n    show(): void {\r\n        this.fromSelectedProp();\r\n        this.modalRef.current?.show();\r\n    }\r\n\r\n    hide(apply: boolean): void {\r\n        this.modalRef.current?.hide();\r\n        if (apply) this.apply();\r\n        else this.fromSelectedProp();\r\n    }\r\n\r\n    toggleValue(v: string) {\r\n        const dict = this.state.valueDict;\r\n        const newValue = !dict[v];\r\n\r\n        if (this.props.multiple) {\r\n            this.setState({...this.state, valueDict: {...dict, [v]: newValue}});\r\n        } else {\r\n            this.setState({...this.state, valueDict: {[v]: newValue}}, () => {\r\n                if (newValue) this.hide(true);\r\n            });\r\n        }\r\n    }\r\n\r\n    apply(): void {\r\n        const {onSelect} = this.props;\r\n        const valueDict = this.state.valueDict;\r\n        if (onSelect) {\r\n            const selected = Object.keys(valueDict).filter((val: string) => valueDict[val]);\r\n            onSelect(selected);\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            values,\r\n            selected,\r\n            label,\r\n            icon,\r\n            multiple,\r\n            atLeastOne,\r\n            placeholder,\r\n            buttonStyle,\r\n            valueStyle,\r\n            theme,\r\n        } = this.props;\r\n        const {valueDict} = this.state;\r\n        const styles = themedStyles(theme);\r\n        const pstyles = pickerStyles(theme);\r\n\r\n        return (\r\n            <>\r\n                <TouchableOpacity\r\n                    style={[styles.button, selected.length > 0 ? styles.buttonOk : {}, buttonStyle]}\r\n                    onPress={() => this.show()}\r\n                >\r\n                    {selected.length === 0 && (\r\n                        <Text style={[styles.value, styles.placeholderText, valueStyle]} numberOfLines={2}>\r\n                            {placeholder}\r\n                        </Text>\r\n                    )}\r\n                    {selected.length > 0 && (\r\n                        <Text style={[styles.value, valueStyle]} numberOfLines={2}>\r\n                            {selected.map(label).join(\", \")}\r\n                        </Text>\r\n                    )}\r\n                </TouchableOpacity>\r\n                <CustomModal\r\n                    ref={this.modalRef}\r\n                    modalViewStyle={{width: \"100%\", paddingHorizontal: 0, paddingVertical: 0}}\r\n                    renderContent={() => (\r\n                        <>\r\n                            <ScrollView style={styles.scroll} contentContainerStyle={styles.scrollContent}>\r\n                                {values.map((v: string, index: number) => (\r\n                                    <TouchableOpacity\r\n                                        key={`popup-selector-row-${v}`}\r\n                                        style={styles.rowContainer}\r\n                                        onPress={() => this.toggleValue(v)}\r\n                                        activeOpacity={0.5}\r\n                                    >\r\n                                        {icon && icon(v, index)}\r\n                                        <Text style={styles.label}>{label(v, index)}</Text>\r\n                                        <CheckBox\r\n                                            checked={valueDict[v]}\r\n                                            containerStyle={styles.checkboxContainer}\r\n                                            wrapperStyle={styles.checkboxWrapper}\r\n                                            onPress={() => this.toggleValue(v)}\r\n                                            size={26}\r\n                                            {...(multiple\r\n                                                ? {}\r\n                                                : {checkedIcon: \"check-circle\", uncheckedIcon: \"circle-o\"})}\r\n                                        />\r\n                                    </TouchableOpacity>\r\n                                ))}\r\n                            </ScrollView>\r\n                            {multiple && (!atLeastOne || Object.values(valueDict).some((v) => v === true)) && (\r\n                                <TouchableOpacity\r\n                                    onPress={() => this.hide(true)}\r\n                                    style={[pstyles.okButton, {width: \"100%\"}]}\r\n                                >\r\n                                    <Text style={pstyles.okButtonText}>{i18n.t(\"ok\")}</Text>\r\n                                </TouchableOpacity>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            height: 40,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n            backgroundColor: \"transparent\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"flex-end\",\r\n        },\r\n        buttonOk: {\r\n            borderBottomWidth: 2,\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        value: {color: theme.text},\r\n        placeholderText: {color: theme.textLight},\r\n        scroll: {\r\n            width: \"100%\",\r\n        },\r\n        scrollContent: {\r\n            paddingHorizontal: 15,\r\n            paddingVertical: 10,\r\n        },\r\n        rowContainer: {\r\n            flexDirection: \"row\",\r\n            width: \"100%\",\r\n            paddingVertical: 2,\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n        },\r\n        label: {\r\n            color: theme.text,\r\n            fontSize: 16,\r\n            flexGrow: 1,\r\n        },\r\n        checkboxContainer: {\r\n            padding: 0,\r\n            marginRight: 0,\r\n        },\r\n        checkboxWrapper: {\r\n            padding: 0,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(PopUpSelector);\r\n","import {AppThunk} from \"../types\";\r\nimport {requestBackend} from \"../../api/utils\";\r\nimport {HttpStatusCode} from \"../../constants/http-status\";\r\nimport {ReportEntityType, ReportType} from \"../../constants/reports\";\r\n\r\nexport enum REPORT_ACTION_TYPES {\r\n    REPORT_ENTITY_SUCCESS = \"REPORTS/REPORT_ENTITY_SUCCESS\",\r\n    REPORT_ENTITY_FAILURE = \"REPORTS/REPORT_ENTITY_FAILURE\",\r\n}\r\n\r\nexport type ReportEntitySuccessAction = {\r\n    type: string;\r\n    reportType: ReportType;\r\n    entityType: ReportEntityType;\r\n    entityId: string;\r\n};\r\n\r\nexport type ReportEntityFailureAction = {\r\n    type: string;\r\n    reportType: ReportType;\r\n    entityType: ReportEntityType;\r\n    entityId: string;\r\n};\r\n\r\nexport type ReportAction = ReportEntitySuccessAction | ReportEntityFailureAction;\r\n\r\nconst reportEntitySuccess = (\r\n    reportType: ReportType,\r\n    entityType: ReportEntityType,\r\n    entityId: string,\r\n): ReportEntitySuccessAction => ({\r\n    type: REPORT_ACTION_TYPES.REPORT_ENTITY_SUCCESS,\r\n    reportType,\r\n    entityType,\r\n    entityId,\r\n});\r\n\r\nconst reportEntityFailure = (\r\n    reportType: ReportType,\r\n    entityType: ReportEntityType,\r\n    entityId: string,\r\n): ReportEntityFailureAction => ({\r\n    type: REPORT_ACTION_TYPES.REPORT_ENTITY_FAILURE,\r\n    reportType,\r\n    entityType,\r\n    entityId,\r\n});\r\n\r\nexport const reportEntity = (\r\n    type: ReportType,\r\n    entityType: ReportEntityType,\r\n    entityId: string,\r\n): AppThunk<Promise<boolean>> => async (dispatch, getState) => {\r\n    const token = getState().auth.token;\r\n    const response = await requestBackend(\"reports\", \"POST\", {}, {type, entityType, entityId}, token, true);\r\n\r\n    if (response.status === HttpStatusCode.OK) {\r\n        dispatch(reportEntitySuccess(type, entityType, entityId));\r\n        return true;\r\n    } else {\r\n        dispatch(reportEntityFailure(type, entityType, entityId));\r\n        return false;\r\n    }\r\n};\r\n","import React from \"react\";\r\nimport {View, StyleSheet, Platform, Text} from \"react-native\";\r\nimport {BottomSheet, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport CustomModal from \"../modals/CustomModal\";\r\nimport i18n from \"i18n-js\";\r\nimport FormSubmitButton from \"../forms/FormSubmitButton\";\r\nimport {Icon} from \"expo\";\r\nimport Button from \"../Button\";\r\n\r\nexport type QuickFormProps = ThemeProps & {\r\n    activator?: (open: () => void) => JSX.Element;\r\n    submit: () => Promise<boolean>;\r\n    hideSubmit?: boolean;\r\n    title?: string;\r\n    titleIcon?: {component: Icon<string, unknown>; name: string};\r\n    confirmationTitle: string;\r\n    confirmationText: string;\r\n    failureTitle?: string;\r\n    failureText?: string;\r\n    submitText: string;\r\n};\r\n\r\ntype QuickFormState = {\r\n    open: boolean;\r\n    confirmationOpen: boolean;\r\n    failureOpen: boolean;\r\n    submitting: boolean;\r\n};\r\n\r\nexport class QuickFormClass extends React.Component<QuickFormProps, QuickFormState> {\r\n    constructor(props: QuickFormProps) {\r\n        super(props);\r\n        this.state = {open: false, confirmationOpen: false, failureOpen: false, submitting: false};\r\n    }\r\n\r\n    open(): void {\r\n        this.setState({...this.state, open: true});\r\n    }\r\n\r\n    close(): void {\r\n        this.setState({...this.state, open: false});\r\n    }\r\n\r\n    submit(): void {\r\n        const {submit} = this.props;\r\n\r\n        this.setState({...this.state, submitting: true});\r\n\r\n        submit().then((success: boolean) => {\r\n            if (success) {\r\n                this.setState({\r\n                    ...this.state,\r\n                    submitting: false,\r\n                    open: false,\r\n                    confirmationOpen: true,\r\n                    failureOpen: false,\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    ...this.state,\r\n                    submitting: false,\r\n                    open: false,\r\n                    confirmationOpen: false,\r\n                    failureOpen: true,\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            activator,\r\n            hideSubmit,\r\n            title,\r\n            titleIcon,\r\n            submitText,\r\n            confirmationTitle,\r\n            confirmationText,\r\n            failureTitle,\r\n            failureText,\r\n            theme,\r\n            children,\r\n        } = this.props;\r\n        const {open, confirmationOpen, failureOpen, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const actionButtons = (\r\n            <>\r\n                {!hideSubmit && (\r\n                    <FormSubmitButton\r\n                        text={submitText}\r\n                        submitting={submitting}\r\n                        onPress={() => this.submit()}\r\n                        skin=\"rounded-filled\"\r\n                        style={styles.actionButton}\r\n                        textStyle={styles.actionButtonText}\r\n                    />\r\n                )}\r\n                <Button\r\n                    text={i18n.t(\"cancel\")}\r\n                    onPress={() => this.close()}\r\n                    skin=\"rounded-hollow\"\r\n                    style={styles.actionButton}\r\n                    textStyle={styles.actionButtonText}\r\n                />\r\n            </>\r\n        );\r\n\r\n        const content = (\r\n            <>\r\n                {(title || titleIcon) && (\r\n                    <View style={styles.titleContainer}>\r\n                        {titleIcon && (\r\n                            <titleIcon.component name={titleIcon.name} style={[styles.title, styles.titleIcon]} />\r\n                        )}\r\n                        {title && <Text style={styles.title}>{title}</Text>}\r\n                    </View>\r\n                )}\r\n                {children}\r\n                {actionButtons}\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <>\r\n                {activator && activator(() => this.open())}\r\n                {Platform.OS === \"web\" ? (\r\n                    <CustomModal\r\n                        visible={open}\r\n                        onHide={() => this.close()}\r\n                        renderContent={() => <View style={styles.containerModal}>{content}</View>}\r\n                    />\r\n                ) : (\r\n                    <BottomSheet modalProps={{statusBarTranslucent: true}} isVisible={open}>\r\n                        <View style={styles.wrapperSheet}>\r\n                            <View style={styles.containerSheet}>{content}</View>\r\n                        </View>\r\n                    </BottomSheet>\r\n                )}\r\n                <CustomModal\r\n                    visible={confirmationOpen}\r\n                    onHide={() => this.setState({...this.state, confirmationOpen: false})}\r\n                    modalViewStyle={styles.feedbackModal}\r\n                    renderContent={() => (\r\n                        <View style={styles.containerModal}>\r\n                            <Text style={styles.feedbackTitle}>{confirmationTitle}</Text>\r\n                            <Text style={styles.feedbackText}>{confirmationText}</Text>\r\n                            <Button\r\n                                text={i18n.t(\"ok\")}\r\n                                onPress={() => this.setState({...this.state, confirmationOpen: false})}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionButtonText}\r\n                            />\r\n                        </View>\r\n                    )}\r\n                />\r\n                <CustomModal\r\n                    visible={failureOpen}\r\n                    onHide={() => this.setState({...this.state, failureOpen: false})}\r\n                    modalViewStyle={styles.feedbackModal}\r\n                    renderContent={() => (\r\n                        <View style={styles.containerModal}>\r\n                            <Text style={styles.feedbackTitle}>{failureTitle}</Text>\r\n                            <Text style={styles.feedbackText}>{failureText}</Text>\r\n                            <Button\r\n                                text={i18n.t(\"ok\")}\r\n                                onPress={() => this.setState({...this.state, failureOpen: false})}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionButtonText}\r\n                            />\r\n                        </View>\r\n                    )}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapperSheet: {\r\n            width: \"100%\",\r\n            paddingVertical: 20,\r\n            alignItems: \"center\",\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        containerSheet: {\r\n            width: \"90%\",\r\n        },\r\n        containerModal: {\r\n            width: \"100%\",\r\n        },\r\n\r\n        // Title\r\n        titleContainer: {\r\n            flexDirection: \"row\",\r\n            marginBottom: 20,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        titleIcon: {\r\n            marginRight: 5,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n\r\n        // Actions\r\n        actionButton: {\r\n            height: 44,\r\n            marginVertical: 0,\r\n            marginTop: 15,\r\n        },\r\n        actionButtonText: {\r\n            fontSize: 16,\r\n        },\r\n\r\n        feedbackModal: {\r\n            paddingVertical: 15,\r\n            paddingHorizontal: 20,\r\n        },\r\n        feedbackTitle: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n            marginBottom: 15,\r\n        },\r\n        feedbackText: {\r\n            fontSize: 15,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(QuickFormClass);\r\n","import React from \"react\";\r\nimport {View, StyleSheet, Text} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport PopUpSelector from \"../PopUpSelector\";\r\nimport {ReportEntityType, ReportType, REPORT_TYPES} from \"../../constants/reports\";\r\nimport InputLabel from \"../InputLabel\";\r\nimport {ChatRoomUser} from \"../../model/chat-room\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport store from \"../../state/store\";\r\nimport {reportEntity} from \"../../state/reports/actions\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport QuickForm, {QuickFormClass} from \"./QuickForm\";\r\n\r\nexport type QuickFormReportProps = ThemeProps & {\r\n    entityType: ReportEntityType;\r\n    entity: unknown;\r\n    activator?: (open: () => void) => JSX.Element;\r\n    onSubmit?: (success: boolean) => void;\r\n};\r\n\r\ntype QuickFormReportState = {\r\n    selectedType: ReportType | null;\r\n};\r\n\r\nexport class QuickFormReportClass extends React.Component<QuickFormReportProps, QuickFormReportState> {\r\n    quickFormRef = React.createRef<QuickFormClass>();\r\n\r\n    constructor(props: QuickFormReportProps) {\r\n        super(props);\r\n        this.state = {selectedType: null};\r\n    }\r\n\r\n    private getEntityInfo(): {id: string; name: string} | null {\r\n        const {entityType, entity} = this.props;\r\n\r\n        if (!entity) return null;\r\n\r\n        switch (entityType) {\r\n            case ReportEntityType.PROFILE_ENTITY:\r\n                if ((entity as ChatRoomUser)._id) {\r\n                    const u = entity as ChatRoomUser;\r\n                    return {name: u.name, id: u._id};\r\n                } else {\r\n                    const p = entity as UserProfile;\r\n                    return {name: `${p.firstName} ${p.lastName}`, id: p.id};\r\n                }\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    open(): void {\r\n        this.quickFormRef.current?.open();\r\n    }\r\n\r\n    close(): void {\r\n        this.quickFormRef.current?.close();\r\n    }\r\n\r\n    async submit(): Promise<boolean> {\r\n        const {entityType, onSubmit} = this.props;\r\n        const {selectedType} = this.state;\r\n\r\n        const info = this.getEntityInfo();\r\n\r\n        let success = false;\r\n        if (selectedType && info)\r\n            success = await (store.dispatch as MyThunkDispatch)(reportEntity(selectedType, entityType, info.id));\r\n\r\n        if (onSubmit) onSubmit(success);\r\n        return success;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {activator, theme} = this.props;\r\n        const {selectedType} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const info = this.getEntityInfo();\r\n\r\n        return (\r\n            <>\r\n                <QuickForm\r\n                    ref={this.quickFormRef}\r\n                    activator={activator}\r\n                    submit={() => this.submit()}\r\n                    titleIcon={{component: MaterialIcons, name: \"report\"}}\r\n                    title={i18n.t(\"report.title\")}\r\n                    submitText={i18n.t(\"report.send\")}\r\n                    confirmationTitle={i18n.t(\"report.confirmationTitle\")}\r\n                    confirmationText={i18n.t(\"report.confirmation\")}\r\n                    failureTitle={i18n.t(\"report.failureTitle\")}\r\n                    failureText={i18n.t(\"report.failure\")}\r\n                    hideSubmit={!selectedType}\r\n                >\r\n                    <View style={styles.inputItem}>\r\n                        <InputLabel>{i18n.t(\"report.what\")}</InputLabel>\r\n                        <Text style={styles.what}>{info ? info.name : \"unknown\"}</Text>\r\n                    </View>\r\n\r\n                    <View style={styles.inputItem}>\r\n                        <InputLabel>{i18n.t(\"report.why\")}</InputLabel>\r\n                        <PopUpSelector\r\n                            values={REPORT_TYPES}\r\n                            label={(t: string) => i18n.t(`report.types.${t}`)}\r\n                            placeholder={i18n.t(\"report.typePlaceholder\")}\r\n                            selected={selectedType ? [selectedType] : []}\r\n                            valueStyle={styles.selectorValue}\r\n                            //buttonStyle={[styles.button, buttonStyle]}\r\n                            onSelect={(values: string[]) => {\r\n                                if (values.length > 0)\r\n                                    this.setState({...this.state, selectedType: values[0] as ReportType});\r\n                            }}\r\n                        />\r\n                    </View>\r\n                </QuickForm>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        inputItem: {\r\n            marginBottom: 20,\r\n        },\r\n        what: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            textAlign: \"right\",\r\n        },\r\n        selectorValue: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(QuickFormReportClass);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ChatRoom, ChatRoomUser} from \"../../model/chat-room\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {GiftedAvatar} from \"react-native-gifted-chat\";\r\nimport {openChat} from \"../../navigation/utils\";\r\nimport SwipeableCard, {SwipeableCardClass, SwipeActionButtons, SwipeActionProps} from \"./SwipeableCard\";\r\nimport QuickFormReport, {QuickFormReportClass} from \"../forms/QuickFormReport\";\r\nimport {ReportEntityType} from \"../../constants/reports\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    localChatUser: state.messaging.localChatUser,\r\n}));\r\n\r\n// Component props\r\nexport type ChatRoomCardProps = {\r\n    room: ChatRoom;\r\n    onPress?: () => void;\r\n    onHidden?: () => void;\r\n} & ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps;\r\n\r\nconst LOOKS = {\r\n    sideMargin: 15,\r\n    verticalSpacing: 5,\r\n    borderRadius: 10,\r\n    minHeight: 75,\r\n};\r\n\r\nclass ChatRoomCard extends React.Component<ChatRoomCardProps> {\r\n    reportFormRef = React.createRef<QuickFormReportClass>();\r\n    swipeableCardRef = React.createRef<SwipeableCardClass>();\r\n\r\n    private getActions(hideCard: () => void): SwipeActionProps[] {\r\n        const {theme} = this.props;\r\n\r\n        return [\r\n            // TODO implement chat mute\r\n            /*{\r\n                icon: \"notifications-off\",\r\n                backgroundColor: \"#ccc\",\r\n            },*/\r\n            {\r\n                icon: \"report\",\r\n                backgroundColor: theme.error,\r\n                onPress: () => this.reportFormRef.current?.open(),\r\n            },\r\n        ];\r\n    }\r\n\r\n    render() {\r\n        const {theme, room, onPress, localChatUser} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const localUser = room.users.find((p: ChatRoomUser) => p._id === localChatUser?._id);\r\n        const user = room.users.filter((p: ChatRoomUser) => p._id !== localChatUser?._id)[0];\r\n\r\n        let lastMessageComponent = <></>;\r\n\r\n        if (room.lastMessage) {\r\n            const date = room.lastMessage.createdAt;\r\n            const isRead =\r\n                localUser &&\r\n                localUser.lastMessageSeenDate &&\r\n                (localUser.lastMessageSeenDate >= date || localUser.lastMessageSeenId == room.lastMessage._id);\r\n            const pad = (num: number) => (num + \"\").padStart(2, \"0\");\r\n            lastMessageComponent = (\r\n                <>\r\n                    <Text style={[styles.lastMessageText, isRead ? {} : styles.lastMessageTextNew]} numberOfLines={1}>\r\n                        {room.lastMessage.user.name.split(\" \")[0]}: {room.lastMessage.text}\r\n                    </Text>\r\n                    <Text style={styles.lastMessageTime}>\r\n                        {pad(date.getHours())}:{pad(date.getMinutes())}\r\n                    </Text>\r\n                </>\r\n            );\r\n        } else {\r\n            lastMessageComponent = (\r\n                <Text style={styles.noMessageText} numberOfLines={1}>\r\n                    {room.users.length === 2 ? `Say hi to ${user.name}!` : \"Say hi\"}\r\n                </Text>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SwipeableCard\r\n                ref={this.swipeableCardRef}\r\n                looks={LOOKS}\r\n                rightThreshold={100}\r\n                overshootRight={false}\r\n                rightActions={(hideCard) => (\r\n                    <SwipeActionButtons\r\n                        id={`room-${room.id}`}\r\n                        looks={LOOKS}\r\n                        side=\"right\"\r\n                        actions={this.getActions(hideCard)}\r\n                    />\r\n                )}\r\n                onPress={() => {\r\n                    if (onPress) onPress();\r\n                    openChat(room.id);\r\n                }}\r\n            >\r\n                <View style={styles.cardContent}>\r\n                    <View style={styles.avatarContainer}>\r\n                        <GiftedAvatar avatarStyle={styles.avatar} user={user}></GiftedAvatar>\r\n                    </View>\r\n                    <View style={styles.infoContainer}>\r\n                        <Text style={styles.name}>{user.name}</Text>\r\n                        <View style={styles.lastMessage}>{lastMessageComponent}</View>\r\n                    </View>\r\n                </View>\r\n                <QuickFormReport\r\n                    ref={this.reportFormRef}\r\n                    entityType={ReportEntityType.PROFILE_ENTITY}\r\n                    entity={user}\r\n                    onSubmit={() => this.swipeableCardRef.current?.resetSwipe()}\r\n                />\r\n            </SwipeableCard>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        cardContent: {\r\n            flexDirection: \"row\",\r\n            padding: 10,\r\n        },\r\n        avatarContainer: {\r\n            justifyContent: \"center\",\r\n        },\r\n        avatar: {\r\n            backgroundColor: theme.accentSecondary,\r\n            width: 45,\r\n            height: 45,\r\n            borderRadius: 50,\r\n        },\r\n        infoContainer: {\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            paddingLeft: 10,\r\n        },\r\n        name: {\r\n            fontSize: 18,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n        lastMessage: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            overflow: \"hidden\",\r\n        },\r\n        noMessageText: {\r\n            color: theme.textLight,\r\n            fontSize: 14,\r\n            flex: 1,\r\n        },\r\n        lastMessageText: {\r\n            color: theme.text,\r\n            fontSize: 14,\r\n            flex: 1,\r\n        },\r\n        lastMessageTextNew: {\r\n            fontWeight: \"bold\",\r\n        },\r\n        lastMessageTime: {\r\n            color: theme.textLight,\r\n            fontSize: 14,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ChatRoomCard));\r\n","import * as React from \"react\";\r\nimport {\r\n    ActivityIndicator,\r\n    NativeScrollEvent,\r\n    NativeSyntheticEvent,\r\n    RefreshControl,\r\n    ScrollView,\r\n    StyleProp,\r\n    StyleSheet,\r\n    View,\r\n    ViewStyle,\r\n} from \"react-native\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type InfiniteScrollerProps<T> = {\r\n    items: T[];\r\n    id: (item: T) => string;\r\n    fetchMore: () => void;\r\n    refresh: () => void;\r\n    fetching: boolean;\r\n    fetchLimit: number;\r\n    renderItem: (item: T, hide: () => void) => JSX.Element;\r\n    noResultsComponent: JSX.Element;\r\n    currentPage: number;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    navigation: {isFocused: () => boolean; addListener: (k: any, l: () => void) => void};\r\n    itemsContainerStyle?: StyleProp<ViewStyle>;\r\n    progressViewOffset?: number;\r\n    refreshOnFocus?: boolean;\r\n};\r\n\r\n// Component state\r\ntype InfiniteScrollerState = {\r\n    hiddenIds: {[key: string]: boolean};\r\n};\r\n\r\nconst SCROLL_DISTANCE_TO_LOAD = 50;\r\n\r\nexport default class InfiniteScroller<T> extends React.Component<InfiniteScrollerProps<T>, InfiniteScrollerState> {\r\n    scrollViewRef: React.RefObject<ScrollView> = React.createRef<ScrollView>();\r\n\r\n    constructor(props: InfiniteScrollerProps<T>) {\r\n        super(props);\r\n        this.state = {hiddenIds: {}};\r\n    }\r\n\r\n    fetchMore(): void {\r\n        const {fetching, fetchMore, navigation} = this.props;\r\n        if (!fetching && navigation.isFocused()) fetchMore();\r\n    }\r\n\r\n    getShownItems(): T[] {\r\n        const {items, id} = this.props;\r\n        return items.filter((it) => !this.state.hiddenIds[id(it)]);\r\n    }\r\n\r\n    hideItem(item: T): void {\r\n        const {fetchLimit, id} = this.props;\r\n        this.setState({...this.state, hiddenIds: {...this.state.hiddenIds, [id(item)]: true}});\r\n        if (this.getShownItems().length < fetchLimit) this.fetchMore();\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        const {items, navigation, id} = this.props;\r\n        const shown = items.filter((it) => !this.state.hiddenIds[id(it)]).length;\r\n        if (shown == 0) this.fetchMore();\r\n        navigation.addListener(\"focus\", () => this.onFocus());\r\n        this.onFocus();\r\n    }\r\n\r\n    onFocus(): void {\r\n        const {items, fetchLimit, fetching, refreshOnFocus, refresh} = this.props;\r\n        if (refreshOnFocus) refresh();\r\n        else if (items.length < fetchLimit && !fetching) this.fetchMore();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: InfiniteScrollerProps<T>): void {\r\n        const {fetchLimit, currentPage, navigation} = this.props;\r\n\r\n        const justRefreshed = oldProps.currentPage > 1 && currentPage === 1;\r\n\r\n        if (navigation.isFocused()) {\r\n            if (this.getShownItems().length < fetchLimit) this.fetchMore();\r\n            // Reset the hidden profiles when the user purposedly refreshes\r\n            if (justRefreshed) this.setState({...this.state, hiddenIds: {}});\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            items,\r\n            fetching,\r\n            refresh,\r\n            renderItem,\r\n            noResultsComponent,\r\n            itemsContainerStyle,\r\n            progressViewOffset,\r\n        } = this.props;\r\n\r\n        return (\r\n            <ThemeConsumer>\r\n                {({theme}: ThemeProps) => {\r\n                    const styles = themedStyles(theme);\r\n                    return (\r\n                        <ScrollView\r\n                            ref={this.scrollViewRef}\r\n                            style={styles.scroller}\r\n                            contentContainerStyle={[styles.itemsContainer, itemsContainerStyle]}\r\n                            refreshControl={\r\n                                <RefreshControl\r\n                                    progressViewOffset={progressViewOffset}\r\n                                    refreshing={fetching}\r\n                                    onRefresh={() => refresh()}\r\n                                />\r\n                            }\r\n                            onScroll={(e: NativeSyntheticEvent<NativeScrollEvent>) => {\r\n                                const {layoutMeasurement, contentOffset, contentSize} = e.nativeEvent;\r\n                                const distanceToBottom =\r\n                                    contentSize.height - contentOffset.y - layoutMeasurement.height;\r\n                                if (distanceToBottom < SCROLL_DISTANCE_TO_LOAD) this.fetchMore();\r\n                            }}\r\n                        >\r\n                            {this.getShownItems().map((it: T) => renderItem(it, () => this.hideItem(it)))}\r\n                            <View style={styles.loadingIndicatorContainer}>\r\n                                {fetching && items.length > 0 && (\r\n                                    <ActivityIndicator size=\"large\" color={theme.accentSecondary} />\r\n                                )}\r\n                            </View>\r\n                            {!fetching && items.length == 0 && (\r\n                                <View style={styles.noResultsContainer}>{noResultsComponent}</View>\r\n                            )}\r\n                        </ScrollView>\r\n                    );\r\n                }}\r\n            </ThemeConsumer>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((/*theme: Theme*/) => {\r\n    return StyleSheet.create({\r\n        scroller: {\r\n            width: \"100%\",\r\n        },\r\n        itemsContainer: {\r\n            //flex: 1,\r\n        },\r\n        loadingIndicatorContainer: {\r\n            marginVertical: 10,\r\n            height: 50,\r\n        },\r\n        noResultsContainer: {\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n        },\r\n    });\r\n});\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text} from \"react-native\";\r\nimport {AppState, MyThunkDispatch} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {fetchMatchRooms, refreshMatchRooms} from \"../../state/messaging/actions\";\r\nimport ChatRoomCard from \"../../components/cards/ChatRoomCard\";\r\nimport {ROOMS_FETCH_LIMIT} from \"../../constants/config\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {TabMessagingRoot} from \"../../navigation/types\";\r\nimport InfiniteScroller from \"../../components/InfiniteScroller\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    rooms: state.messaging.matchRooms,\r\n    roomIds: state.messaging.matchRoomsOrdered,\r\n    fetchingRooms: state.messaging.matchRoomsPagination.fetching,\r\n    currentPage: state.messaging.matchRoomsPagination.page,\r\n}));\r\n\r\ntype ChatRoomsScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & StackScreenProps<TabMessagingRoot>;\r\n\r\nclass ChatRoomsScreen extends React.Component<ChatRoomsScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme, rooms, roomIds, fetchingRooms, currentPage, navigation, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <InfiniteScroller\r\n                    navigation={navigation}\r\n                    fetchLimit={ROOMS_FETCH_LIMIT}\r\n                    fetchMore={() => (dispatch as MyThunkDispatch)(fetchMatchRooms())}\r\n                    fetching={fetchingRooms}\r\n                    currentPage={currentPage}\r\n                    items={roomIds}\r\n                    id={(roomId: string): string => roomId}\r\n                    noResultsComponent={<Text style={styles.noMatchesText}>{i18n.t(\"messaging.noMatches\")}</Text>}\r\n                    refresh={() => dispatch(refreshMatchRooms())}\r\n                    renderItem={(roomId: string) => (\r\n                        <ChatRoomCard key={`chat-room-card-${roomId}`} room={rooms[roomId]} />\r\n                    )}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        noMatchesText: {\r\n            color: theme.text,\r\n            letterSpacing: 0.5,\r\n            fontSize: 18,\r\n            lineHeight: 24,\r\n            textAlign: \"center\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ChatRoomsScreen));\r\n","import * as React from \"react\";\r\nimport {Avatar, AvatarProps} from \"react-native-elements\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\n\r\n// Component props\r\nexport type ProfileAvatarProps = {profile?: UserProfile} & AvatarProps;\r\n\r\nclass ProfileAvatar extends React.Component<ProfileAvatarProps> {\r\n    render(): JSX.Element {\r\n        const {children, profile, ...avatarProps} = this.props;\r\n\r\n        const avatarTitle =\r\n            avatarProps.title || (profile ? (profile.firstName[0] + profile.lastName[0]).toUpperCase() : undefined);\r\n\r\n        const avatarSourceProp = profile && profile.avatarUrl ? {source: {uri: profile.avatarUrl}} : {};\r\n\r\n        return (\r\n            <Avatar {...avatarProps} title={avatarTitle} {...avatarSourceProp}>\r\n                {children}\r\n            </Avatar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProfileAvatar;\r\n","import {Theme} from \"../types\";\r\nimport {preTheme} from \"./utils\";\r\nimport {StyleSheet} from \"react-native\";\r\n\r\nexport const headerStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            backgroundColor: theme.background,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            paddingHorizontal: 15,\r\n            paddingBottom: 10,\r\n            height: 100,\r\n        },\r\n        wrapperBlur: {\r\n            backgroundColor: \"transparent\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n        },\r\n        wrapperNoShadow: {\r\n            shadowColor: \"transparent\",\r\n            elevation: 0,\r\n        },\r\n        backButton: {\r\n            width: 40,\r\n            height: 40,\r\n            marginRight: 5,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        backButtonIcon: {\r\n            fontSize: 28,\r\n        },\r\n        avatarContainer: {\r\n            backgroundColor: theme.accentSecondary,\r\n            borderWidth: 1,\r\n            borderColor: theme.componentBorder,\r\n        },\r\n        avatarTitle: {\r\n            color: theme.textWhite,\r\n        },\r\n        title: {\r\n            flex: 1,\r\n            color: theme.text,\r\n            fontWeight: \"600\",\r\n            fontSize: 20,\r\n        },\r\n        rightButton: {\r\n            width: 36,\r\n            height: 36,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            borderRadius: 50,\r\n            marginLeft: 8,\r\n        },\r\n        rightIcon: {\r\n            fontSize: 22,\r\n        },\r\n    });\r\n});\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, TouchableOpacity, View, ViewStyle} from \"react-native\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {StackHeaderProps} from \"@react-navigation/stack\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport {headerTitle, navigateBack, rootNavigate} from \"../../navigation/utils\";\r\nimport {NavigatorRoute} from \"../../navigation/types\";\r\nimport {headerStyles} from \"../../styles/headers\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {BlurProps, BlurView} from \"expo-blur\";\r\nimport {useSafeAreaInsets, EdgeInsets} from \"react-native-safe-area-context\";\r\nimport {Route} from \"@react-navigation/native\";\r\nimport {BLUR_HEADER_INTENSITY} from \"../../styles/general\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    user: state.profile.user,\r\n}));\r\n\r\nexport type HeaderButtonProps = {\r\n    buttonStyle: StyleProp<ViewStyle>;\r\n    iconStyle: StyleProp<TextStyle>;\r\n};\r\n\r\ntype AdditionalProps = {\r\n    rightButtons?: ((props: HeaderButtonProps) => JSX.Element)[];\r\n    backButton?: boolean;\r\n    noAvatar?: boolean;\r\n    noShadow?: boolean;\r\n    noSettingsButton?: boolean;\r\n    blur?: boolean;\r\n    overrideAvatar?: JSX.Element;\r\n    overrideTitle?: string;\r\n    wrapperStyle?: StyleProp<ViewStyle>;\r\n    titleStyle?: StyleProp<TextStyle>;\r\n    color?: string;\r\n    buttonBackgroundColor?: string;\r\n};\r\n\r\nexport type MainHeaderStackProps = Partial<StackHeaderProps> & {route?: Route<string, undefined>};\r\n\r\n// Component props\r\nexport type MainHeaderProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps & {insets: EdgeInsets} & MainHeaderStackProps &\r\n    AdditionalProps;\r\n\r\nclass MainHeaderClass extends React.Component<MainHeaderProps> {\r\n    back(): void {\r\n        navigateBack(\"MainScreen\");\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            insets,\r\n            user,\r\n            rightButtons,\r\n            backButton,\r\n            noAvatar,\r\n            noShadow,\r\n            noSettingsButton,\r\n            blur,\r\n            overrideAvatar,\r\n            overrideTitle,\r\n            wrapperStyle,\r\n            titleStyle,\r\n            color,\r\n        } = this.props;\r\n\r\n        const styles = headerStyles(theme);\r\n\r\n        const routeName = (this.props.route || this.props.scene?.route || {name: \"undef\"}).name;\r\n        const title = headerTitle(routeName as NavigatorRoute);\r\n        const textColor = color || theme.text;\r\n        const buttonBackgroundColor = this.props.buttonBackgroundColor || theme.cardBackground;\r\n\r\n        const WrapperComponent = blur ? BlurView : View;\r\n        const blurProps: Partial<BlurProps> = blur\r\n            ? {\r\n                  tint: theme.id === \"dark\" ? \"dark\" : \"default\",\r\n                  intensity: BLUR_HEADER_INTENSITY,\r\n              }\r\n            : {};\r\n\r\n        return (\r\n            <WrapperComponent\r\n                style={[\r\n                    {paddingTop: insets.top},\r\n                    styles.wrapper,\r\n                    blur ? styles.wrapperBlur : {},\r\n                    noShadow ? styles.wrapperNoShadow : {},\r\n                    wrapperStyle,\r\n                ]}\r\n                {...blurProps}\r\n            >\r\n                {backButton && (\r\n                    <TouchableOpacity style={styles.backButton} onPress={() => this.back()}>\r\n                        <MaterialIcons style={[styles.backButtonIcon, {color: textColor}]} name=\"arrow-back\" />\r\n                    </TouchableOpacity>\r\n                )}\r\n                {!noAvatar &&\r\n                    (overrideAvatar || (\r\n                        <ProfileAvatar\r\n                            profile={user?.profile}\r\n                            rounded\r\n                            size={40}\r\n                            containerStyle={styles.avatarContainer}\r\n                            titleStyle={styles.avatarTitle}\r\n                            activeOpacity={0.75}\r\n                            onPress={() => rootNavigate(\"MyProfileScreen\")}\r\n                        />\r\n                    ))}\r\n                <Text style={[styles.title, {marginLeft: 12, color: textColor}, titleStyle]} numberOfLines={1}>\r\n                    {overrideTitle || title}\r\n                </Text>\r\n                {rightButtons?.map((ButtonComponent, i) => (\r\n                    <ButtonComponent\r\n                        key={`header-button-${routeName.toLowerCase()}-${i}`}\r\n                        buttonStyle={[styles.rightButton, {backgroundColor: buttonBackgroundColor}]}\r\n                        iconStyle={[styles.rightIcon, {color: textColor}]}\r\n                    />\r\n                ))}\r\n                {!noSettingsButton && (\r\n                    <TouchableOpacity\r\n                        style={[styles.rightButton, {backgroundColor: buttonBackgroundColor}]}\r\n                        onPress={() => rootNavigate(\"SettingsScreen\")}\r\n                    >\r\n                        <MaterialIcons name=\"settings\" style={styles.rightIcon} color={textColor} />\r\n                    </TouchableOpacity>\r\n                )}\r\n            </WrapperComponent>\r\n        );\r\n    }\r\n}\r\n\r\nconst MainHeaderComp = reduxConnector(withTheme(MainHeaderClass));\r\n\r\nexport default function MainHeader(props: MainHeaderStackProps & AdditionalProps): JSX.Element {\r\n    const insets = useSafeAreaInsets();\r\n    return <MainHeaderComp insets={insets} {...props} />;\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {GiftedAvatar} from \"react-native-gifted-chat\";\r\nimport {ChatRoomUser} from \"../../model/chat-room\";\r\nimport {headerStyles} from \"../../styles/headers\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport MainHeader, {MainHeaderStackProps} from \"./MainHeader\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    activeRoom: state.messaging.activeRoom,\r\n    profileId: state.profile.user?.profile?.id,\r\n}));\r\n\r\n// Component props\r\nexport type ChatScreenHeaderProps = ConnectedProps<typeof reduxConnector> & ThemeProps & MainHeaderStackProps;\r\n\r\nclass ChatScreenHeaderClass extends React.Component<ChatScreenHeaderProps> {\r\n    render(): JSX.Element {\r\n        const {theme, activeRoom, profileId, ...stackProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n        const hstyles = headerStyles(theme);\r\n\r\n        if (activeRoom) {\r\n            const user = activeRoom.users.filter((p: ChatRoomUser) => p._id != profileId)[0];\r\n            return (\r\n                <MainHeader\r\n                    {...stackProps}\r\n                    backButton={true}\r\n                    blur={true}\r\n                    overrideAvatar={\r\n                        <GiftedAvatar\r\n                            avatarStyle={hstyles.avatarContainer}\r\n                            user={user}\r\n                            onPress={() => rootNavigate(\"ProfileScreen\", {id: user._id})}\r\n                        />\r\n                    }\r\n                    overrideTitle={user.name}\r\n                    titleStyle={styles.name}\r\n                />\r\n            );\r\n        } else return <></>;\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        name: {\r\n            fontSize: 18,\r\n            fontWeight: \"600\",\r\n        },\r\n    });\r\n});\r\n\r\nconst ChatScreenHeaderComp = reduxConnector(withTheme(ChatScreenHeaderClass));\r\n\r\nexport default function ChatScreenHeader(props: MainHeaderStackProps): JSX.Element {\r\n    return <ChatScreenHeaderComp {...props} />;\r\n}\r\n","import {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, View} from \"react-native\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {\r\n    Actions,\r\n    ActionsProps,\r\n    Bubble,\r\n    BubbleProps,\r\n    GiftedAvatar,\r\n    GiftedAvatarProps,\r\n    GiftedChat,\r\n    IMessage,\r\n    InputToolbar,\r\n    InputToolbarProps,\r\n    Message,\r\n    MessageProps,\r\n    Send,\r\n    SendProps,\r\n} from \"react-native-gifted-chat\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport chatSocket from \"../../api/chat-socket\";\r\nimport {RootNavigatorScreens} from \"../../navigation/types\";\r\nimport {\r\n    connectToChat,\r\n    fetchEarlierMessages,\r\n    fetchMatchRoom,\r\n    joinChatRoom,\r\n    leaveChatRoom,\r\n    sendChatMessage,\r\n} from \"../../state/messaging/actions\";\r\nimport {AppState, MyThunkDispatch} from \"../../state/types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {TypingAnimation} from \"react-native-typing-animation\";\r\nimport {ChatRoomUser} from \"../../model/chat-room\";\r\nimport store from \"../../state/store\";\r\nimport {DEBUG_MODE, MESSAGES_FETCH_LIMIT} from \"../../constants/config\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    activeRoom: state.messaging.activeRoom,\r\n    localChatUser: state.messaging.localChatUser,\r\n    connected: state.messaging.socketState.connected,\r\n    connecting: state.messaging.socketState.connecting,\r\n}));\r\n\r\n// Component props\r\nexport type ChatScreenProps = ThemeProps &\r\n    ConnectedProps<typeof reduxConnector> &\r\n    StackScreenProps<RootNavigatorScreens>;\r\n\r\nconst MIN_INPUT_HEIGHT = 45;\r\nconst INPUT_VERTICAL_MARGIN = 10;\r\n\r\nclass ChatScreen extends React.Component<ChatScreenProps> {\r\n    ref = React.createRef<GiftedChat>();\r\n\r\n    connectToRoom() {\r\n        const {route} = this.props;\r\n        const dispatch = this.props.dispatch as MyThunkDispatch;\r\n\r\n        // Get the room ID from the route parameters\r\n        if (route.params) {\r\n            const params = route.params as {[key: string]: string};\r\n            const {roomId} = params;\r\n\r\n            // If a roomId parameter was given, we first ensure we have that room (in storage or we fetch it) before joining it.\r\n            if (roomId) {\r\n                const room = store.getState().messaging.matchRooms[roomId];\r\n                if (room) dispatch(joinChatRoom(room));\r\n                else {\r\n                    dispatch(fetchMatchRoom(roomId)).then((r) => {\r\n                        if (r) dispatch(joinChatRoom(r));\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {connected, connecting, dispatch} = this.props;\r\n\r\n        // If are already connected to the chat, connect to the room\r\n        if (connected) this.connectToRoom();\r\n        // If we are not connected nor connecting to the chat, connect to the chat first\r\n        else if (!connecting) (dispatch as MyThunkDispatch)(connectToChat());\r\n\r\n        this.props.navigation.addListener(\"blur\", () => this.onBlur());\r\n        this.props.navigation.addListener(\"focus\", () => this.onFocus());\r\n        this.onFocus();\r\n    }\r\n\r\n    onBlur() {\r\n        // Leave the room when navigating to another screen\r\n        const {dispatch, activeRoom} = this.props;\r\n        if (activeRoom) (dispatch as MyThunkDispatch)(leaveChatRoom(activeRoom));\r\n    }\r\n\r\n    onFocus() {\r\n        // Fetch earlier messages if we need to\r\n        const room = this.props.activeRoom;\r\n        if (room && room.messages.length < MESSAGES_FETCH_LIMIT) this.fetchEarlier();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: ChatScreenProps) {\r\n        const {activeRoom, connected} = this.props;\r\n        // If we've just connected to the chat, connect to the room\r\n        if (!oldProps.connected && connected) this.connectToRoom();\r\n        // If we're at the beginning of the messages pagination\r\n        if (!oldProps.activeRoom && activeRoom && activeRoom.messagePagination.page == 1) this.fetchEarlier();\r\n    }\r\n\r\n    fetchEarlier() {\r\n        const {dispatch, activeRoom} = this.props;\r\n        if (activeRoom && !activeRoom.messagePagination.fetching)\r\n            (dispatch as MyThunkDispatch)(fetchEarlierMessages(activeRoom));\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, localChatUser, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const room = this.props.activeRoom;\r\n        let chatComponent = <></>;\r\n        if (room && localChatUser) {\r\n            const isWritingId = Object.keys(room.writing).find((id: string) => room.writing[id] === true);\r\n            const userWriting = isWritingId ? room.users.find((u) => u._id == isWritingId) : undefined;\r\n\r\n            // Store in a messageId -> user map whether each message is the last seen message of a user\r\n            const lastMessageDict: {[key: string]: ChatRoomUser[]} = {};\r\n            if (room.messages.length > 0) {\r\n                room.users.forEach((u: ChatRoomUser) => {\r\n                    if (u._id != localChatUser._id && u.lastMessageSeenId) {\r\n                        if (lastMessageDict[u.lastMessageSeenId]) lastMessageDict[u.lastMessageSeenId].push(u);\r\n                        else lastMessageDict[u.lastMessageSeenId] = [u];\r\n                    }\r\n                });\r\n            }\r\n\r\n            chatComponent = (\r\n                <GiftedChat\r\n                    ref={this.ref}\r\n                    messages={room.messages}\r\n                    user={localChatUser}\r\n                    renderSend={(props: SendProps<IMessage>) => (\r\n                        <Send {...props} containerStyle={styles.sendContainer}>\r\n                            <MaterialIcons name=\"send\" style={styles.send} />\r\n                        </Send>\r\n                    )}\r\n                    renderBubble={(props: BubbleProps<IMessage>) => (\r\n                        <Bubble\r\n                            {...props}\r\n                            renderTicks={(currentMessage: IMessage) => (\r\n                                <View style={styles.messageTicksContainer}>\r\n                                    {currentMessage.received && (\r\n                                        <MaterialIcons name=\"check\" style={styles.messageTick} />\r\n                                    )}\r\n                                    {currentMessage.sent && <MaterialIcons name=\"check\" style={styles.messageTick} />}\r\n                                </View>\r\n                            )}\r\n                            textStyle={{left: styles.bubbleTextLeft, right: styles.bubbleTextRight}}\r\n                            wrapperStyle={{left: styles.bubbleWrapperLeft, right: styles.bubbleWrapperRight}}\r\n                        />\r\n                    )}\r\n                    renderMessage={(props: MessageProps<IMessage>) => {\r\n                        const lm = props.currentMessage ? lastMessageDict[props.currentMessage._id] : undefined;\r\n                        return lm ? (\r\n                            <View>\r\n                                <Message {...props} containerStyle={{right: {marginBottom: 0}, left: {}}} />\r\n                                <View style={styles.messageReadContainer}>\r\n                                    {lm.map((u: ChatRoomUser) => (\r\n                                        <GiftedAvatar\r\n                                            key={`read-message-${u._id}`}\r\n                                            user={u}\r\n                                            avatarStyle={styles.messageReadAvatar}\r\n                                            textStyle={styles.messageReadAvatarText}\r\n                                        />\r\n                                    ))}\r\n                                </View>\r\n                            </View>\r\n                        ) : (\r\n                            <Message {...props} />\r\n                        );\r\n                    }}\r\n                    renderInputToolbar={(props: InputToolbarProps) => (\r\n                        <InputToolbar\r\n                            {...props}\r\n                            containerStyle={styles.inputToolbarContainer}\r\n                            primaryStyle={styles.inputToolbarPrimary}\r\n                        />\r\n                    )}\r\n                    renderFooter={() => <ChatFooter userWriting={userWriting} theme={theme} />}\r\n                    renderActions={(props: ActionsProps) => <ChatActions actionsProps={props} theme={theme} />}\r\n                    //renderLoadEarlier={() => <></>}\r\n                    onInputTextChanged={(t) => {\r\n                        if (t.length > 0) chatSocket.setWriting(room);\r\n                    }}\r\n                    onSend={(messages) => {\r\n                        messages.forEach((m) =>\r\n                            (dispatch as MyThunkDispatch)(sendChatMessage(m._id + \"\", m.text, m.createdAt as Date)),\r\n                        );\r\n                    }}\r\n                    loadEarlier={room.messagePagination.canFetchMore && room.messagePagination.fetching}\r\n                    isLoadingEarlier={room.messagePagination.fetching}\r\n                    onLoadEarlier={() => {\r\n                        this.fetchEarlier();\r\n                    }}\r\n                    timeFormat={\"HH:mm\"}\r\n                    listViewProps={{\r\n                        onEndReached: () => this.fetchEarlier(),\r\n                        //onEndReachedThreshold: 1,\r\n                    }}\r\n                    textInputProps={{autoFocus: false, style: styles.textInput, multiline: true}}\r\n                    minInputToolbarHeight={MIN_INPUT_HEIGHT + INPUT_VERTICAL_MARGIN * 2}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>{chatComponent}</View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nfunction ChatFooter({userWriting, theme}: {userWriting?: ChatRoomUser; theme: Theme}): JSX.Element {\r\n    if (userWriting) {\r\n        return (\r\n            <View style={{height: 50, paddingTop: 10}}>\r\n                <Message\r\n                    key=\"isWriting\"\r\n                    user={userWriting}\r\n                    showUserAvatar={true}\r\n                    position=\"left\"\r\n                    renderAvatar={(props: GiftedAvatarProps) => <GiftedAvatar {...props} user={userWriting} />}\r\n                    renderBubble={(props: BubbleProps<IMessage>) => (\r\n                        <Bubble\r\n                            {...props}\r\n                            wrapperStyle={{\r\n                                left: {backgroundColor: \"transparent\"},\r\n                                right: {},\r\n                            }}\r\n                            renderCustomView={() => (\r\n                                <TypingAnimation\r\n                                    dotColor={theme.textLight}\r\n                                    dotAmplitude={3}\r\n                                    dotSpeed={0.16}\r\n                                    dotMargin={8}\r\n                                    dotRadius={4}\r\n                                    dotX={20}\r\n                                    dotY={-25}\r\n                                />\r\n                            )}\r\n                        />\r\n                    )}\r\n                ></Message>\r\n            </View>\r\n        );\r\n    } else return <></>;\r\n}\r\n\r\nfunction ChatActions({actionsProps, theme}: {actionsProps: ActionsProps; theme: Theme}): JSX.Element {\r\n    const styles = themedStyles(theme);\r\n    return (\r\n        <>\r\n            {DEBUG_MODE && (\r\n                <Actions\r\n                    {...actionsProps}\r\n                    containerStyle={styles.actionContainer}\r\n                    icon={() => <MaterialIcons style={styles.actionIcon} name=\"photo-camera\" />}\r\n                    options={{\r\n                        \"Send a picture\": async () => {\r\n                            await ImagePicker.launchImageLibraryAsync({\r\n                                mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n                                allowsEditing: true,\r\n                                aspect: [1, 1],\r\n                                //quality: AVATAR_QUALITY,\r\n                            });\r\n                        },\r\n                    }}\r\n                />\r\n            )}\r\n            {DEBUG_MODE && (\r\n                <Actions\r\n                    {...actionsProps}\r\n                    containerStyle={styles.actionContainer}\r\n                    icon={() => <MaterialIcons style={styles.actionIcon} name=\"build\" />}\r\n                    options={{\r\n                        \"Spam Lorem Ipsum\": async () => {\r\n                            const text =\r\n                                \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dosum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?\";\r\n                            const words = text.split(\" \");\r\n                            let i = 0;\r\n                            while (i < words.length) {\r\n                                const n = 1 + Math.min(Math.floor(Math.random() * 12), words.length - 1 - i);\r\n                                const msg = words.slice(i, i + n).join(\" \");\r\n                                const id = GiftedChat.defaultProps.messageIdGenerator();\r\n                                (store.dispatch as MyThunkDispatch)(sendChatMessage(id, msg, new Date()));\r\n                                i += n;\r\n                            }\r\n                        },\r\n                    }}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n        },\r\n        inputToolbarContainer: {\r\n            justifyContent: \"center\",\r\n            borderTopWidth: 0,\r\n            backgroundColor: theme.background,\r\n        },\r\n        inputToolbarPrimary: {\r\n            alignItems: \"flex-end\",\r\n        },\r\n        textInput: {\r\n            backgroundColor: theme.cardBackground,\r\n            //borderWidth: 1,\r\n            //borderColor: theme.cardBackground,\r\n            borderRadius: 20,\r\n            marginVertical: INPUT_VERTICAL_MARGIN,\r\n            marginHorizontal: 20,\r\n            paddingHorizontal: 15,\r\n            paddingTop: 10,\r\n            paddingBottom: 10,\r\n            fontSize: 15,\r\n            flex: 1,\r\n            alignItems: \"center\",\r\n            alignSelf: \"flex-end\",\r\n            color: theme.text,\r\n        },\r\n        send: {\r\n            fontSize: 30,\r\n            color: theme.accent,\r\n        },\r\n        sendContainer: {\r\n            height: MIN_INPUT_HEIGHT,\r\n            justifyContent: \"center\",\r\n            marginVertical: INPUT_VERTICAL_MARGIN,\r\n            marginRight: 10,\r\n        },\r\n        actionContainer: {\r\n            height: MIN_INPUT_HEIGHT,\r\n            justifyContent: \"center\",\r\n        },\r\n        actionIcon: {\r\n            fontSize: 28,\r\n            width: 28,\r\n            height: 28,\r\n            color: theme.text,\r\n        },\r\n        bubbleWrapperLeft: {\r\n            backgroundColor: theme.chatBubble,\r\n        },\r\n        bubbleWrapperRight: {},\r\n        bubbleTextLeft: {\r\n            color: theme.text,\r\n        },\r\n        bubbleTextRight: {},\r\n        messageReadContainer: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"flex-end\",\r\n            paddingRight: 8,\r\n            paddingTop: 2,\r\n            paddingBottom: 8,\r\n        },\r\n        messageReadAvatar: {\r\n            width: 20,\r\n            height: 20,\r\n        },\r\n        messageReadAvatarText: {\r\n            fontSize: 12,\r\n        },\r\n        messageTicksContainer: {\r\n            marginRight: 4,\r\n            minWidth: 15,\r\n        },\r\n        messageTick: {\r\n            fontSize: 14,\r\n            color: theme.textWhite,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(ChatScreen));\r\n","/* eslint-disable react/display-name */\r\nimport * as React from \"react\";\r\nimport ChatRoomsScreen from \"../screens/messaging/ChatRoomsScreen\";\r\nimport {TabMessagingRoot} from \"./types\";\r\nimport {screenTitle} from \"./utils\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\nimport {createStackNavigator, StackHeaderProps} from \"@react-navigation/stack\";\r\nimport ChatScreenHeader from \"../components/headers/ChatScreenHeader\";\r\nimport ChatScreen from \"../screens/messaging/ChatScreen\";\r\n\r\nconst Stack = createStackNavigator<TabMessagingRoot>();\r\n\r\nconst MessagingNavigator = (): JSX.Element => (\r\n    <Stack.Navigator headerMode=\"screen\">\r\n        <Stack.Screen\r\n            name=\"ChatRoomsScreen\"\r\n            component={ChatRoomsScreen}\r\n            options={{\r\n                title: screenTitle(\"ChatRoomsScreen\"),\r\n                headerShown: true,\r\n                header: (props: StackHeaderProps) => <MainHeader {...props} />,\r\n            }}\r\n        />\r\n        <Stack.Screen name=\"ChatScreen\" options={() => ({headerShown: false, title: screenTitle(\"ChatScreen\")})}>\r\n            {(props) => (\r\n                <>\r\n                    <ChatScreen {...props} />\r\n                    <ChatScreenHeader {...props} />\r\n                </>\r\n            )}\r\n        </Stack.Screen>\r\n    </Stack.Navigator>\r\n);\r\n\r\nexport default MessagingNavigator;\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport LogOutButton from \"../components/LogOutButton\";\r\nimport {styleTextLight} from \"../styles/general\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nexport type TabHomeScreenProps = ThemeProps;\r\n\r\nclass TabHomeScreen extends React.Component<TabHomeScreenProps> {\r\n    private async fetchPostEmbed(shortCode: string): Promise<Response> {\r\n        // seaEuAlliance profile ID: 32204624961\r\n        // url=\r\n        const BASE_URL = \"https://graph.facebook.com/v9.0/instagram_oembed\";\r\n        const CLIENT_TOKEN = \"80cd0bc3c132ad645a15d234ccd841bd\";\r\n        const POST_URL = `https://www.instagram.com/p/${shortCode}/`;\r\n        const url = `${BASE_URL}?url=${POST_URL}&access_token=${CLIENT_TOKEN}`;\r\n\r\n        const headers: {[key: string]: string} = {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n        };\r\n        console.log(url);\r\n        const response = await fetch(url, {method: \"GET\", headers});\r\n        return response;\r\n    }\r\n\r\n    fetchEmbed() {\r\n        this.fetchPostEmbed(\"CJQ-ZX_rZb8\").then((response) => console.log(JSON.stringify(response)));\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    {/*<TouchableOpacity onPress={() => this.fetchEmbed()}>\r\n                        <Text style={{fontSize: 22, padding: 20}}>Fetch</Text>\r\n                    </TouchableOpacity>*/}\r\n                    <FontAwesome style={styles.icon} name=\"heart\" />\r\n                    <Text style={styles.title}>Thank you for participating in the alpha program.</Text>\r\n                    <View style={styles.separator} />\r\n                    <Text style={[styles.alphaText, {fontWeight: \"bold\"}]}>\r\n                        Found a bug or have some feedback for us or ideas for the app?\r\n                    </Text>\r\n                    <Text style={styles.alphaText}>\r\n                        Get in touch with us on Slack and we would be happy to discuss it with you!\r\n                    </Text>\r\n                    <LogOutButton style={styles.logoutButton} />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            padding: 50,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        title: {\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n            fontSize: 24,\r\n            color: theme.text,\r\n            ...styleTextLight,\r\n        },\r\n        alphaText: {\r\n            width: \"100%\",\r\n            textAlign: \"left\",\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            marginVertical: 10,\r\n        },\r\n        icon: {\r\n            color: theme.accent,\r\n            fontSize: 48,\r\n            paddingBottom: 20,\r\n        },\r\n        separator: {\r\n            marginVertical: 30,\r\n            height: 1,\r\n            opacity: 0.1,\r\n            width: \"100%\",\r\n            backgroundColor: theme.text,\r\n        },\r\n        logoutButton: {\r\n            marginTop: 80,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(TabHomeScreen);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport {blockProfile} from \"../../state/matching/actions\";\r\nimport store from \"../../state/store\";\r\nimport CustomModal, {CustomModalClass, CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\nexport type BlockProfileModalProps = ThemeProps &\r\n    Partial<CustomModalProps> & {onBlock?: () => void; profile: UserProfile | null};\r\n\r\nexport class BlockProfileModalClass extends React.Component<BlockProfileModalProps> {\r\n    modalRef = React.createRef<CustomModalClass>();\r\n\r\n    show(): void {\r\n        this.modalRef.current?.show();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, profile, onBlock, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n        return (\r\n            <CustomModal\r\n                ref={this.modalRef}\r\n                {...otherProps}\r\n                renderContent={(hide: () => void) =>\r\n                    profile ? (\r\n                        <>\r\n                            <Text style={styles.text}>\r\n                                {i18n.t(\"block.warning\", {firstname: profile.firstName, lastname: profile.lastName})}\r\n                            </Text>\r\n                            <View style={styles.actionButtonsWrapper}>\r\n                                <Button\r\n                                    text={i18n.t(\"cancel\")}\r\n                                    onPress={() => hide()}\r\n                                    skin=\"rounded-hollow\"\r\n                                    style={styles.actionButton}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"block.action\")}\r\n                                    onPress={() => {\r\n                                        hide();\r\n                                        (store.dispatch as MyThunkDispatch)(blockProfile(profile.id));\r\n                                        if (onBlock) onBlock();\r\n                                    }}\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.actionButton, styles.redBackground]}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                            </View>\r\n                        </>\r\n                    ) : (\r\n                        <></>\r\n                    )\r\n                }\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(BlockProfileModalClass);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, View, ViewStyle} from \"react-native\";\r\nimport {Flag} from \"react-native-country-picker-modal\";\r\nimport i18n from \"i18n-js\";\r\nimport {University} from \"../constants/universities\";\r\n\r\n// Component props\r\nexport type FormattedUniversityProps = {\r\n    university: University | null;\r\n    containerStyle?: ViewStyle;\r\n    flagSize?: number;\r\n    flagEmoji?: boolean;\r\n} & TextProps;\r\n\r\nexport default class FormattedUniversity extends React.Component<FormattedUniversityProps> {\r\n    render(): JSX.Element {\r\n        const {university, containerStyle, flagSize, flagEmoji, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <View style={[{flexDirection: \"row\", alignItems: \"center\"}, containerStyle]}>\r\n                {university && (\r\n                    <>\r\n                        <Flag\r\n                            countryCode={university.country}\r\n                            flagSize={flagSize || 18}\r\n                            withEmoji={flagEmoji || false}\r\n                        />\r\n                        <Text {...otherProps} style={[{marginLeft: -5}, otherProps.style]}>\r\n                            {i18n.t(`universities.${university.key}`)}\r\n                        </Text>\r\n                    </>\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n","import {MaterialIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleProp, Text, View, ViewStyle, StyleSheet, TextStyle, TouchableOpacity} from \"react-native\";\r\nimport {ThemeConsumer, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type ChipsProps<T> = {\r\n    items: T[];\r\n    label?: (item: T) => string;\r\n    removable?: boolean;\r\n    onRemove?: (item: T) => void;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    chipStyle?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n};\r\n\r\nclass Chips<T> extends React.Component<ChipsProps<T>> {\r\n    render(): JSX.Element {\r\n        const {items, label, removable, onRemove, containerStyle, chipStyle, textStyle} = this.props;\r\n\r\n        return (\r\n            // Use a theme consumer instead of the withTheme() pattern because it breaks genericity\r\n            <ThemeConsumer>\r\n                {({theme}: ThemeProps) => {\r\n                    const styles = themedStyles(theme);\r\n                    return (\r\n                        <View style={[styles.container, containerStyle]}>\r\n                            {items.map((it: T, i: number) => (\r\n                                <Chip\r\n                                    key={`chips-${i}-${it}`}\r\n                                    text={label ? label(it) : typeof it === \"string\" ? it : JSON.stringify(it)}\r\n                                    removable={removable}\r\n                                    onRemove={() => {\r\n                                        if (onRemove) onRemove(it);\r\n                                    }}\r\n                                    chipStyle={chipStyle}\r\n                                    textStyle={textStyle}\r\n                                />\r\n                            ))}\r\n                        </View>\r\n                    );\r\n                }}\r\n            </ThemeConsumer>\r\n        );\r\n    }\r\n}\r\n\r\ntype ChipProps = {\r\n    text: string;\r\n    removable?: boolean;\r\n    onRemove?: () => void;\r\n    chipStyle: StyleProp<ViewStyle>;\r\n    textStyle: StyleProp<TextStyle>;\r\n} & ThemeProps;\r\n\r\nconst Chip = withTheme(\r\n    ({text, removable, onRemove, theme, chipStyle, textStyle}: ChipProps): JSX.Element => {\r\n        const styles = themedStyles(theme);\r\n        return (\r\n            <View style={[styles.chip, chipStyle]}>\r\n                <Text\r\n                    style={[\r\n                        styles.chipText,\r\n                        removable ? {marginRight: 20} /* depends on width of \"remove\" button */ : {},\r\n                        textStyle,\r\n                    ]}\r\n                    numberOfLines={1}\r\n                >\r\n                    {text}\r\n                </Text>\r\n                {removable && (\r\n                    <TouchableOpacity\r\n                        style={styles.chipRemoveButton}\r\n                        onPress={() => {\r\n                            if (onRemove) onRemove();\r\n                        }}\r\n                    >\r\n                        <MaterialIcons name=\"close\" style={styles.chipRemoveIcon} />\r\n                    </TouchableOpacity>\r\n                )}\r\n            </View>\r\n        );\r\n    },\r\n);\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flexDirection: \"row\",\r\n            flexWrap: \"wrap\",\r\n            justifyContent: \"flex-start\",\r\n        },\r\n        chip: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            backgroundColor: theme.accentSlight,\r\n            paddingVertical: 6,\r\n            paddingHorizontal: 10,\r\n            borderRadius: 20,\r\n            marginRight: 4,\r\n            marginBottom: 4,\r\n        },\r\n        chipText: {\r\n            fontSize: 14,\r\n            color: theme.textBlack,\r\n        },\r\n        chipRemoveButton: {\r\n            position: \"absolute\",\r\n            right: 0,\r\n            width: 32,\r\n            height: 32,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        chipRemoveIcon: {\r\n            fontSize: 22,\r\n            color: theme.textBlack,\r\n        },\r\n    });\r\n});\r\n\r\nexport default Chips;\r\n","import {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {StyleProp, TextStyle, View, ViewStyle} from \"react-native\";\r\nimport {useFocusEffect} from \"@react-navigation/native\";\r\n\r\nconst ANIMATION_AMPLITUDE = 25;\r\nconst DURATION = 400; // the animation duration (ms)\r\nconst PAUSE = 1000; // how much time to wait before looping the animation (ms)\r\n\r\n// Component props\r\nexport type SwipeTipProps = {direction: \"horizontal\"; style?: StyleProp<ViewStyle>; iconStyle?: StyleProp<TextStyle>};\r\n\r\n// Component props\r\nexport type SwipeTipState = {animating: boolean};\r\n\r\nfunction FocusAware({onFocus, onBlur}: {onFocus?: () => void; onBlur?: () => void}) {\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            if (onFocus) onFocus();\r\n            return () => {\r\n                if (onBlur) onBlur();\r\n            };\r\n        }, []),\r\n    );\r\n    return null;\r\n}\r\n\r\nclass SwipeTip extends React.Component<SwipeTipProps, SwipeTipState> {\r\n    offset = new ReAnimated.Value(0);\r\n\r\n    constructor(props: SwipeTipProps) {\r\n        super(props);\r\n        this.state = {animating: false};\r\n    }\r\n\r\n    setAnimating(b: boolean): void {\r\n        if (b === this.state.animating) return;\r\n\r\n        this.setState({...this.state, animating: b});\r\n\r\n        if (b) {\r\n            const animate = (even: boolean): void => {\r\n                ReAnimated.timing(this.offset, {\r\n                    toValue: even ? ANIMATION_AMPLITUDE / 2 : -ANIMATION_AMPLITUDE / 2,\r\n                    duration: DURATION,\r\n                    easing: Easing.inOut(Easing.circle),\r\n                }).start(() => {\r\n                    // Come back to initial position\r\n                    ReAnimated.timing(this.offset, {\r\n                        toValue: 0,\r\n                        duration: DURATION,\r\n                        easing: Easing.linear,\r\n                    }).start(() => {\r\n                        // Pause before animating again\r\n                        if (this.state.animating) {\r\n                            if (even) setTimeout(() => animate(!even), PAUSE);\r\n                            else animate(!even);\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n            animate(true);\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {direction, style, iconStyle} = this.props;\r\n\r\n        const iconName = direction === \"horizontal\" ? \"gesture-swipe-horizontal\" : undefined;\r\n\r\n        return (\r\n            <View style={[style]}>\r\n                <FocusAware onFocus={() => this.setAnimating(true)} onBlur={() => this.setAnimating(false)} />\r\n                <ReAnimated.View style={{left: this.offset}}>\r\n                    {iconName && <MaterialCommunityIcons name={iconName} style={iconStyle} />}\r\n                </ReAnimated.View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SwipeTip;\r\n","import * as React from \"react\";\r\nimport {LayoutChangeEvent, LayoutRectangle, Text, TouchableOpacity, View, StyleSheet, Platform} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {UserProfile, UserProfileStudent} from \"../../model/user-profile\";\r\nimport ReAnimated, {Easing} from \"react-native-reanimated\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport BlockProfileModal from \"../modals/BlockProfileModal\";\r\nimport FormattedUniversity from \"../FormattedUniversity\";\r\nimport {PARTNER_UNIVERSITIES, University} from \"../../constants/universities\";\r\nimport {OfferValueDto, SpokenLanguageDto} from \"../../api/dto\";\r\nimport {styleTextLight, styleTextThin} from \"../../styles/general\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport Chips from \"../Chips\";\r\nimport SwipeableCard, {SwipeableCardClass, SwipeActionContainer} from \"./SwipeableCard\";\r\nimport SwipeTip from \"../SwipeTip\";\r\n\r\n// Component props\r\nexport type MatchProfileCardProps = ThemeProps & {\r\n    profile: UserProfile;\r\n    onExpand?: (layout: LayoutRectangle) => void;\r\n    onSwipeLeft?: () => void;\r\n    onSwipeRight?: () => void;\r\n    onHidden?: () => void;\r\n    showSwipeTip?: boolean;\r\n};\r\n\r\n// Component state\r\nexport type MatchProfileCardState = {\r\n    expanded: boolean;\r\n    animating: boolean;\r\n    height: ReAnimated.Value<number>;\r\n};\r\n\r\nconst LOOKS = {\r\n    sideMargin: 15,\r\n    verticalSpacing: 10,\r\n    borderRadius: 20,\r\n};\r\n\r\nclass MatchProfileCard extends React.Component<MatchProfileCardProps, MatchProfileCardState> {\r\n    cardRef = React.createRef<SwipeableCardClass>();\r\n    layout: LayoutRectangle;\r\n\r\n    constructor(props: MatchProfileCardProps) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: false,\r\n            height: new ReAnimated.Value(PROFILE_PREVIEW_COLLAPSED_HEIGHT),\r\n            animating: false,\r\n        };\r\n        this.layout = {x: 0, y: 0, width: 0, height: 0};\r\n    }\r\n\r\n    expand() {\r\n        const duration = 200;\r\n        this.setState({...this.state, animating: true});\r\n        ReAnimated.timing(this.state.height, {\r\n            toValue: PROFILE_PREVIEW_EXPANDED_HEIGHT,\r\n            duration,\r\n            easing: Easing.elastic(1.0),\r\n        }).start();\r\n        setTimeout(() => this.setState({...this.state, animating: false, expanded: true}), duration);\r\n    }\r\n\r\n    collapse() {\r\n        const duration = 100;\r\n        this.setState({...this.state, animating: true, expanded: false});\r\n        ReAnimated.timing(this.state.height, {\r\n            toValue: PROFILE_PREVIEW_COLLAPSED_HEIGHT,\r\n            duration,\r\n            easing: Easing.out(Easing.linear),\r\n        }).start();\r\n        setTimeout(() => this.setState({...this.state, animating: false}), duration);\r\n    }\r\n\r\n    hide(onFinish?: () => void, right?: boolean) {\r\n        /*const duration = this.state.expanded ? 160 : 120;\r\n        this.setState({...this.state, animating: true, expanded: false});\r\n        ReAnimated.timing(this.state.height, {\r\n            toValue: 0,\r\n            duration,\r\n            easing: Easing.linear,\r\n        }).start();\r\n        setTimeout(() => {\r\n            if (onFinish) onFinish();\r\n            this.cardRef.current?.hide();\r\n            if (this.props.onHidden) this.props.onHidden();\r\n        }, duration);*/\r\n        this.cardRef.current?.collapse(onFinish, right);\r\n    }\r\n\r\n    toggleExpanded() {\r\n        if (!this.state.expanded) {\r\n            this.expand();\r\n            if (this.props.onExpand) this.props.onExpand(this.layout);\r\n        } else this.collapse();\r\n    }\r\n\r\n    render() {\r\n        const {theme, profile, showSwipeTip} = this.props;\r\n        const {expanded, animating, height} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const university = PARTNER_UNIVERSITIES.find((univ: University) => univ.key == profile.university);\r\n        const fullName = profile.firstName + \" \" + profile.lastName;\r\n\r\n        const chipStyleProps = {chipStyle: styles.chip};\r\n\r\n        return (\r\n            <SwipeableCard\r\n                ref={this.cardRef}\r\n                looks={LOOKS}\r\n                wrapperProps={{\r\n                    onLayout: (e: LayoutChangeEvent) => {\r\n                        this.layout = e.nativeEvent.layout;\r\n                    },\r\n                }}\r\n                useNativeAnimations={Platform.OS !== \"web\"}\r\n                friction={1}\r\n                leftThreshold={100}\r\n                rightThreshold={100}\r\n                onSwipeableRightWillOpen={() => {\r\n                    this.hide(() => {\r\n                        if (this.props.onSwipeLeft) this.props.onSwipeLeft();\r\n                    }, false);\r\n                }}\r\n                onSwipeableLeftWillOpen={() => {\r\n                    this.hide(() => {\r\n                        if (this.props.onSwipeRight) this.props.onSwipeRight();\r\n                    }, true);\r\n                }}\r\n                renderRightActions={() => (\r\n                    <SwipeActionContainer\r\n                        side=\"right\"\r\n                        looks={LOOKS}\r\n                        fullCardWidth\r\n                        contentStyle={styles.swipeActionContentRight}\r\n                    >\r\n                        <Text style={styles.swipeActionText}>{i18n.t(\"matching.actionHide\")}</Text>\r\n                    </SwipeActionContainer>\r\n                )}\r\n                renderLeftActions={() => (\r\n                    <SwipeActionContainer\r\n                        side=\"left\"\r\n                        looks={LOOKS}\r\n                        fullCardWidth\r\n                        contentStyle={styles.swipeActionContentLeft}\r\n                    >\r\n                        <Text style={styles.swipeActionText}>{i18n.t(\"matching.actionLike\")}</Text>\r\n                    </SwipeActionContainer>\r\n                )}\r\n                onPress={() => this.toggleExpanded()}\r\n            >\r\n                <ReAnimated.View style={[styles.cardContent, {height}]}>\r\n                    <View style={styles.collapsedContent}>\r\n                        <View style={styles.avatarContainer}>\r\n                            <ProfileAvatar profile={profile} size={120} rounded containerStyle={styles.avatar} />\r\n                        </View>\r\n                        <View style={styles.infoContainer}>\r\n                            <Text style={styles.name}>{fullName}</Text>\r\n                            {university && <FormattedUniversity style={styles.infoText} university={university} />}\r\n                            <Text style={styles.infoText}>\r\n                                {i18n.t(`genders.${profile.gender}`)}\r\n                                {\", \"}\r\n                                {i18n.t(`allRoles.${profile.type}`)}\r\n                                {profile.type == \"student\"\r\n                                    ? ` (${i18n.t(`degrees.${(profile as UserProfileStudent).degree}`)})`\r\n                                    : \"\"}\r\n                            </Text>\r\n                            {/*<Text style={styles.infoText}>{i18n.t(`genders.${profile.gender}`)}</Text>*/}\r\n                        </View>\r\n                        {showSwipeTip && (\r\n                            <SwipeTip direction=\"horizontal\" style={styles.swipeTip} iconStyle={styles.swipeTipIcon} />\r\n                        )}\r\n                    </View>\r\n                    {(expanded || animating) && (\r\n                        <View style={styles.expandedContent}>\r\n                            <Text style={styles.expandedSectionTitle}>{i18n.t(\"spokenLanguages\")}</Text>\r\n                            <Chips\r\n                                items={profile.languages}\r\n                                label={(v: SpokenLanguageDto) =>\r\n                                    `${i18n.t(`languageNames.${v.code}`)}${\r\n                                        v.level != \"native\" ? ` (${v.level.toUpperCase()})` : \"\"\r\n                                    }`\r\n                                }\r\n                                {...chipStyleProps}\r\n                            />\r\n                            <Text style={styles.expandedSectionTitle}>{i18n.t(\"offers\")}</Text>\r\n                            <Chips\r\n                                items={profile.profileOffers}\r\n                                label={(o: OfferValueDto) => i18n.t(`allOffers.${o.offerId}.name`)}\r\n                                {...chipStyleProps}\r\n                            />\r\n\r\n                            {/*<Text style={styles.expandedSectionTitle}>{i18n.t(\"fieldsOfEducation\")}</Text>\r\n                                <View style={styles.chipsContainer}>\r\n                                    {profile.educationFields.map((fieldId: string) => (\r\n                                        <ItemChip\r\n                                            key={`${profile.id}-${fieldId}`}\r\n                                            text={i18n.t(`educationFields.${fieldId}`)}\r\n                                        />\r\n                                    ))}\r\n                                </View>\r\n                                */}\r\n                            {/*\r\n                                <Text style={styles.expandedSectionTitle}>{i18n.t(\"interests\")}</Text>\r\n                                <View style={styles.chipsContainer}>\r\n                                    {profile.interests.map((interestId: string) => (\r\n                                        <ItemChip\r\n                                            key={`${profile.id}-${interestId}`}\r\n                                            text={i18n.t(`interests.${interestId}`)}\r\n                                        />\r\n                                    ))}\r\n                                </View>\r\n                                */}\r\n                            <BlockProfileModal\r\n                                profile={profile}\r\n                                activator={(open) => (\r\n                                    <TouchableOpacity style={styles.blockButton} onPress={() => open()}>\r\n                                        <MaterialIcons style={styles.blockButtonIcon} name=\"block\" />\r\n                                    </TouchableOpacity>\r\n                                )}\r\n                                onBlock={() => this.hide()}\r\n                            />\r\n                        </View>\r\n                    )}\r\n                </ReAnimated.View>\r\n            </SwipeableCard>\r\n        );\r\n    }\r\n}\r\n\r\nexport const Separator = withTheme(({theme}: ThemeProps) => {\r\n    return <View style={themedStyles(theme).separator}></View>;\r\n});\r\n\r\nconst PROFILE_PREVIEW_COLLAPSED_HEIGHT = 150;\r\nconst PROFILE_PREVIEW_EXPANDED_HEIGHT = 360;\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        swipeActionContentRight: {\r\n            backgroundColor: theme.accentTernary,\r\n            alignItems: \"center\",\r\n            justifyContent: \"flex-end\",\r\n            padding: 20,\r\n        },\r\n        swipeActionContentLeft: {\r\n            backgroundColor: theme.accentSlight,\r\n            alignItems: \"center\",\r\n            padding: 20,\r\n        },\r\n        swipeActionText: {\r\n            fontSize: 24,\r\n            letterSpacing: 2,\r\n            textTransform: \"uppercase\",\r\n            ...styleTextThin,\r\n        },\r\n\r\n        // Card content\r\n\r\n        cardContent: {\r\n            padding: 10,\r\n        },\r\n\r\n        collapsedContent: {\r\n            flexDirection: \"row\",\r\n        },\r\n\r\n        avatarContainer: {\r\n            justifyContent: \"center\",\r\n        },\r\n        avatar: {\r\n            backgroundColor: theme.accentSecondary,\r\n        },\r\n        infoContainer: {\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            paddingLeft: 10,\r\n        },\r\n        name: {\r\n            fontSize: 22,\r\n            letterSpacing: 0.8,\r\n            marginBottom: 5,\r\n            flexShrink: 1, // Ensures text wrapping\r\n            color: theme.text,\r\n        },\r\n        infoText: {\r\n            fontSize: 16,\r\n            letterSpacing: 0.5,\r\n            color: theme.textLight,\r\n            flexShrink: 1, // Ensures text wrapping\r\n        },\r\n\r\n        swipeTip: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            right: 5,\r\n        },\r\n        swipeTipIcon: {\r\n            fontSize: 22,\r\n            color: theme.textLight,\r\n        },\r\n\r\n        separator: {\r\n            height: 1,\r\n            width: \"100%\",\r\n            backgroundColor: \"#000\",\r\n            opacity: 0.1,\r\n            alignSelf: \"center\",\r\n            marginBottom: 5,\r\n        },\r\n\r\n        expandedContent: {\r\n            flex: 1,\r\n        },\r\n\r\n        chip: {\r\n            //borderRadius: 6,\r\n            paddingHorizontal: 5,\r\n            paddingVertical: 2,\r\n            flexGrow: 1,\r\n            justifyContent: \"center\",\r\n        },\r\n\r\n        expandedSectionTitle: {\r\n            ...styleTextLight,\r\n            fontSize: 14,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            marginTop: 5,\r\n            color: theme.text,\r\n        },\r\n        blockButton: {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n        },\r\n        blockButtonIcon: {\r\n            fontSize: 30,\r\n            color: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(MatchProfileCard);\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {LayoutRectangle, StyleSheet, Text} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport MatchProfileCard from \"../components/cards/MatchProfileCard\";\r\nimport {dislikeProfile, fetchProfiles, likeProfile, refreshFetchedProfiles} from \"../state/matching/actions\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {TabMatchingRoot} from \"../navigation/types\";\r\nimport {PROFILES_FETCH_LIMIT} from \"../constants/config\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport InfiniteScroller from \"../components/InfiniteScroller\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    profiles: state.matching.fetchedProfiles,\r\n    fetchingProfiles: state.matching.profilesPagination.fetching,\r\n    currentPage: state.matching.profilesPagination.page,\r\n}));\r\n\r\n// Component props\r\ntype TabMatchingScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<TabMatchingRoot, \"TabMatchingScreen\">;\r\n\r\nclass TabMatchingScreen extends React.Component<TabMatchingScreenProps> {\r\n    scrollerRef = React.createRef<InfiniteScroller<UserProfile>>();\r\n\r\n    render(): JSX.Element {\r\n        const {profiles, theme, fetchingProfiles, currentPage, navigation, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <InfiniteScroller\r\n                    ref={this.scrollerRef}\r\n                    navigation={navigation}\r\n                    fetchLimit={PROFILES_FETCH_LIMIT}\r\n                    fetchMore={() => (dispatch as MyThunkDispatch)(fetchProfiles())}\r\n                    fetching={fetchingProfiles}\r\n                    currentPage={currentPage}\r\n                    items={profiles}\r\n                    id={(profile: UserProfile): string => profile.id}\r\n                    noResultsComponent={\r\n                        <>\r\n                            <Text style={styles.noResultsText1}>{i18n.t(\"matching.noResults\")}</Text>\r\n                            <Text style={styles.noResultsText2}>{i18n.t(\"matching.noResultsAdvice\")}</Text>\r\n                        </>\r\n                    }\r\n                    refresh={() => dispatch(refreshFetchedProfiles())}\r\n                    renderItem={(profile: UserProfile, hide: () => void) => (\r\n                        <MatchProfileCard\r\n                            key={`match-profile-card-${profile.id}`}\r\n                            profile={profile}\r\n                            onExpand={(layout: LayoutRectangle) => {\r\n                                const scroll = this.scrollerRef.current?.scrollViewRef.current;\r\n                                if (scroll) scroll.scrollTo({y: layout.y - 100, animated: true});\r\n                            }}\r\n                            onSwipeRight={() => (dispatch as MyThunkDispatch)(likeProfile(profile.id))}\r\n                            onSwipeLeft={() => (dispatch as MyThunkDispatch)(dislikeProfile(profile.id))}\r\n                            onHidden={() => hide()}\r\n                            showSwipeTip={profile.id == profiles[0].id}\r\n                        />\r\n                    )}\r\n                    // Compensate for the header\r\n                    itemsContainerStyle={{paddingTop: 100, paddingBottom: 25}}\r\n                    progressViewOffset={100}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        noResultsText1: {\r\n            fontSize: 20,\r\n            letterSpacing: 0.75,\r\n            color: theme.text,\r\n            marginVertical: 5,\r\n        },\r\n        noResultsText2: {\r\n            fontSize: 16,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(TabMatchingScreen));\r\n","import * as React from \"react\";\r\nimport {TouchableOpacity} from \"react-native\";\r\nimport {FontAwesome, MaterialIcons} from \"@expo/vector-icons\";\r\nimport MainHeader, {MainHeaderStackProps} from \"./MainHeader\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\n\r\n// Component props\r\nexport type MatchScreenHeaderProps = MainHeaderStackProps & {\r\n    backButton?: boolean;\r\n    blur?: boolean;\r\n};\r\n\r\nclass MatchScreenHeaderClass extends React.Component<MatchScreenHeaderProps> {\r\n    render(): JSX.Element {\r\n        const {backButton, blur, ...stackProps} = this.props;\r\n\r\n        return (\r\n            <MainHeader\r\n                {...stackProps}\r\n                backButton={backButton || false}\r\n                blur={blur}\r\n                rightButtons={[\r\n                    ({buttonStyle, iconStyle}) => (\r\n                        <TouchableOpacity style={buttonStyle} onPress={() => rootNavigate(\"MatchFilteringScreen\")}>\r\n                            <FontAwesome name=\"sliders\" style={iconStyle} />\r\n                        </TouchableOpacity>\r\n                    ),\r\n                    ({buttonStyle, iconStyle}) => (\r\n                        <TouchableOpacity style={buttonStyle} onPress={() => rootNavigate(\"MatchHistoryScreen\")}>\r\n                            <MaterialIcons name=\"history\" style={iconStyle} />\r\n                        </TouchableOpacity>\r\n                    ),\r\n                ]}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default function MatchScreenHeader(props: MatchScreenHeaderProps): JSX.Element {\r\n    return <MatchScreenHeaderClass {...props} />;\r\n}\r\n","import * as React from \"react\";\r\nimport {View, ViewProps, LayoutChangeEvent, TouchableOpacity, Text} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport DropDownPicker from \"react-native-dropdown-picker\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {pickerStyles} from \"../styles/picker\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport Chips from \"./Chips\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\ntype PickerItem = {\r\n    value: string;\r\n    label: string;\r\n};\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    locale: state.settings.userSettings.locale,\r\n}));\r\n\r\n// Component props\r\nexport type MultiPickerProps = ConnectedProps<typeof reduxConnector> & {\r\n    values: string[];\r\n    genLabel?: (value: string) => string;\r\n    onChange?: (values: string[]) => void;\r\n    selected?: string[];\r\n    placeholder?: string;\r\n    multipleText?: string;\r\n    searchablePlaceholder?: string;\r\n    showChips?: boolean;\r\n    single?: boolean;\r\n} & ViewProps &\r\n    ThemeProps;\r\n\r\n// Component state\r\nexport type MultiPickerState = {\r\n    items: Map<SupportedLocale, PickerItem[]>;\r\n    open: boolean;\r\n    dropdownWrapperHeight: number;\r\n};\r\n\r\nclass MultiPicker extends React.Component<MultiPickerProps, MultiPickerState> {\r\n    static defaultProps = {\r\n        items: [],\r\n        showSelected: true,\r\n        selected: [],\r\n    };\r\n\r\n    tempSelected: string[] = [];\r\n\r\n    constructor(props: MultiPickerProps) {\r\n        super(props);\r\n        this.state = {\r\n            items: new Map(),\r\n            open: false,\r\n            dropdownWrapperHeight: 0,\r\n        };\r\n    }\r\n\r\n    updateItems() {\r\n        const locale = this.props.locale;\r\n        if (!this.state.items.has(locale) || this.state.items.get(locale)?.length != this.props.values.length) {\r\n            const items = new Map(this.state.items);\r\n            items.set(\r\n                locale,\r\n                this.props.values.map((value: string) => ({\r\n                    value,\r\n                    label: this.props.genLabel ? i18n.t(this.props.genLabel(value)) : value,\r\n                })),\r\n            );\r\n            this.setState({...this.state, items});\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateItems();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: MultiPickerProps) {\r\n        if (oldProps.locale != this.props.locale || oldProps.values.length != this.props.values.length) {\r\n            this.updateItems();\r\n        }\r\n    }\r\n\r\n    open() {\r\n        this.tempSelected = this.props.selected || [];\r\n        this.setState({...this.state, open: true});\r\n    }\r\n\r\n    close() {\r\n        this.setState({...this.state, open: false});\r\n        this.apply();\r\n    }\r\n\r\n    apply() {\r\n        if (this.props.onChange) this.props.onChange(this.tempSelected);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            locale,\r\n            selected,\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            onChange,\r\n            genLabel,\r\n            placeholder,\r\n            multipleText,\r\n            searchablePlaceholder,\r\n            showChips,\r\n            single,\r\n            ...viewProps\r\n        } = this.props;\r\n        const styles = pickerStyles(theme);\r\n\r\n        const selectedItems = selected || [];\r\n        const items = this.state.items.get(locale) || [];\r\n\r\n        return (\r\n            <View {...viewProps}>\r\n                <View>\r\n                    <TouchableOpacity onPress={() => this.open()} style={styles.openButton}>\r\n                        <Text style={styles.openButtonText}>\r\n                            {i18n.t(\"picker.callToAction\").replace(\"%d\", selectedItems.length.toString())}\r\n                        </Text>\r\n                    </TouchableOpacity>\r\n                    {showChips && (\r\n                        <Chips\r\n                            items={selectedItems}\r\n                            label={(v) => (genLabel ? i18n.t(genLabel(v)) : v)}\r\n                            containerStyle={styles.chipContainer}\r\n                            removable={true}\r\n                            onRemove={(item: string) => {\r\n                                this.tempSelected = this.tempSelected.filter((v) => v !== item);\r\n                                this.apply();\r\n                            }}\r\n                        />\r\n                    )}\r\n                    <View>\r\n                        {/*showChips &&\r\n                            selectedItems.map((val: string, i: number) => (\r\n                                <View key={i} style={styles.selectedItemView}>\r\n                                    <Text style={styles.selectedItemText} numberOfLines={1}>\r\n                                        {genLabel ? i18n.t(genLabel(val)) : val}\r\n                                    </Text>\r\n                                </View>\r\n                            ))*/}\r\n                    </View>\r\n                </View>\r\n                {this.state.open && (\r\n                    <CustomModal\r\n                        visible={this.state.open}\r\n                        onHide={() => this.close()}\r\n                        modalViewStyle={{\r\n                            height: 150 + items.length * 40,\r\n                            maxHeight: \"70%\",\r\n                            overflow: \"hidden\",\r\n                            paddingHorizontal: 0,\r\n                            paddingVertical: 0,\r\n                        }}\r\n                        renderContent={() => (\r\n                            <>\r\n                                <View\r\n                                    style={styles.dropdownWrapper}\r\n                                    onLayout={(e: LayoutChangeEvent) => {\r\n                                        this.setState({\r\n                                            ...this.state,\r\n                                            dropdownWrapperHeight: e.nativeEvent.layout.height,\r\n                                        });\r\n                                    }}\r\n                                >\r\n                                    <DropDownPicker\r\n                                        items={items}\r\n                                        multiple={!single}\r\n                                        searchable={true}\r\n                                        defaultValue={selected}\r\n                                        onChangeItem={(values: string[]) => {\r\n                                            this.tempSelected = values;\r\n                                        }}\r\n                                        placeholder={placeholder}\r\n                                        multipleText={multipleText}\r\n                                        searchablePlaceholder={searchablePlaceholder}\r\n                                        scrollViewProps={{keyboardShouldPersistTaps: \"handled\"}} // ensures items are clickable even when the keyboard is open\r\n                                        isVisible={true}\r\n                                        showArrow={false}\r\n                                        dropDownMaxHeight={this.state.dropdownWrapperHeight - 10}\r\n                                        // Style props\r\n                                        selectedLabelStyle={{display: \"none\"}}\r\n                                        style={styles.dropdownStyle}\r\n                                        itemStyle={styles.dropdownItemStyle}\r\n                                        activeItemStyle={styles.dropdownActiveItemStyle}\r\n                                        activeLabelStyle={styles.dropdownActiveLabelStyle}\r\n                                        labelStyle={styles.dropdownLabelStyle}\r\n                                    />\r\n                                </View>\r\n                                <TouchableOpacity onPress={() => this.close()} style={styles.okButton}>\r\n                                    <Text style={styles.okButtonText}>OK</Text>\r\n                                </TouchableOpacity>\r\n                            </>\r\n                        )}\r\n                    />\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(MultiPicker));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport MultiPicker, {MultiPickerProps} from \"./MultiPicker\";\r\nimport {PARTNER_UNIVERSITIES, University} from \"../constants/universities\";\r\n\r\nlet values: string[] = [];\r\n\r\n// Component props\r\nexport type MultiUniversityPickerProps = {\r\n    universities: string[];\r\n    onChange?: (unis: string[]) => void;\r\n} & Partial<MultiPickerProps>;\r\n\r\nclass MultiUniversityPicker extends React.Component<MultiUniversityPickerProps> {\r\n    componentDidMount(): void {\r\n        if (values.length == 0) values = PARTNER_UNIVERSITIES.map((uni: University) => uni.key);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {universities, onChange, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <MultiPicker\r\n                values={values}\r\n                genLabel={(univKey: string) => `universities.${univKey}`}\r\n                selected={universities}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                placeholder={i18n.t(\"universitiesPicker.placeholder\")}\r\n                multipleText={i18n.t(\"universitiesPicker.multiple\")}\r\n                searchablePlaceholder={i18n.t(\"universitiesPicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default MultiUniversityPicker;\r\n","import {ButtonGroupProps} from \"react-native-elements\";\r\nimport {Theme} from \"../types\";\r\n\r\nexport function getToggleStyleProps(nobuttonBariant: boolean, theme: Theme): Partial<ButtonGroupProps> {\r\n    if (nobuttonBariant) {\r\n        return {\r\n            containerStyle: {\r\n                backgroundColor: \"transparent\",\r\n                height: 28,\r\n                borderWidth: 0,\r\n                marginHorizontal: 0,\r\n                marginBottom: 5,\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-evenly\",\r\n            },\r\n            innerBorderStyle: {\r\n                width: 0,\r\n            },\r\n            buttonContainerStyle: {\r\n                marginHorizontal: 5,\r\n                flex: 0,\r\n            },\r\n            buttonStyle: {\r\n                paddingHorizontal: 10,\r\n            },\r\n            textStyle: {\r\n                color: theme.textLight,\r\n                opacity: 0.5,\r\n                fontSize: 15,\r\n                flexShrink: 1,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: \"transparent\",\r\n                borderColor: theme.accent,\r\n                borderBottomWidth: 0.5,\r\n            },\r\n            selectedTextStyle: {\r\n                color: theme.text,\r\n                opacity: 1,\r\n            },\r\n        };\r\n    } else {\r\n        return {\r\n            containerStyle: {\r\n                height: 35,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                borderColor: theme.componentBorder,\r\n            },\r\n            innerBorderStyle: {\r\n                color: theme.componentBorder,\r\n            },\r\n            buttonStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            textStyle: {\r\n                color: theme.text,\r\n            },\r\n            selectedButtonStyle: {\r\n                backgroundColor: theme.accent,\r\n            },\r\n            disabledStyle: {\r\n                backgroundColor: theme.cardBackground,\r\n            },\r\n            disabledSelectedStyle: {\r\n                backgroundColor: theme.background,\r\n            },\r\n            disabledSelectedTextStyle: {\r\n                fontWeight: \"bold\",\r\n            },\r\n        };\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Degree, DEGREES} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {ViewStyle} from \"react-native\";\r\n\r\nexport type GenderToggleMultiProps = {\r\n    degrees: Degree[];\r\n    onSelect?: (degrees: Degree[]) => void;\r\n    noButtonVariant?: boolean;\r\n    style?: ViewStyle;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction DegreeToggleMulti(props: GenderToggleMultiProps): JSX.Element {\r\n    const buttonLabels = DEGREES.map((r: string) => i18n.t(`degrees.${r}`));\r\n    const {theme, style, degrees, noButtonVariant, onSelect, ...otherProps} = props;\r\n\r\n    const styleProps = getToggleStyleProps(noButtonVariant || false, theme);\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) {\r\n                    const indices: number[] = typeof idx == \"object\" ? (idx as number[]) : [idx];\r\n                    onSelect(indices.map((i: number) => DEGREES[i]));\r\n                }\r\n            }}\r\n            selectMultiple={true}\r\n            selectedIndexes={degrees.map((degree: Degree) => DEGREES.indexOf(degree))}\r\n            buttons={buttonLabels}\r\n            {...styleProps}\r\n            containerStyle={[styleProps.containerStyle, style]}\r\n            buttonContainerStyle={[styleProps.buttonContainerStyle, {marginHorizontal: 2}]}\r\n            buttonStyle={[styleProps.buttonStyle, {paddingHorizontal: 0}]}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(DegreeToggleMulti);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport MultiPicker, {MultiPickerProps} from \"./MultiPicker\";\r\nimport {LANGUAGES_CODES} from \"../model/languages\";\r\n\r\n// Component props\r\nexport type LanguagePickerProps = {\r\n    languages?: string[];\r\n    onChange?: (languages: string[]) => void;\r\n    multiple?: boolean;\r\n} & Partial<MultiPickerProps>;\r\n\r\nconst values = LANGUAGES_CODES;\r\n\r\nclass LanguagePicker extends React.Component<LanguagePickerProps> {\r\n    render(): JSX.Element {\r\n        const {languages, onChange, multiple, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <MultiPicker\r\n                single={!multiple}\r\n                values={values}\r\n                genLabel={(languageId: string) => `languageNames.${languageId}`}\r\n                selected={languages}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                placeholder={i18n.t(\"languagePicker.placeholderMultiple\")}\r\n                multipleText={i18n.t(\"languagePicker.multiple\")}\r\n                searchablePlaceholder={i18n.t(\"languagePicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default LanguagePicker;\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Role, ROLES} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\nexport type RoleToggleMultiProps = {\r\n    roles: Role[];\r\n    onSelect?: (roles: Role[]) => void;\r\n    noButtonVariant?: boolean;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction RoleToggleMulti(props: RoleToggleMultiProps): JSX.Element {\r\n    const {theme, roles, noButtonVariant, onSelect, ...otherProps} = props;\r\n    const buttonLabels = ROLES.map((r: string) => i18n.t(`allRoles.${r}`));\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) {\r\n                    const indices: number[] = typeof idx == \"object\" ? (idx as number[]) : [idx];\r\n                    onSelect(indices.map((i: number) => ROLES[i]));\r\n                }\r\n            }}\r\n            selectMultiple={true}\r\n            selectedIndexes={roles.map((role: Role) => ROLES.indexOf(role))}\r\n            buttons={buttonLabels}\r\n            {...getToggleStyleProps(noButtonVariant || false, theme)}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(RoleToggleMulti);\r\n","import * as React from \"react\";\r\nimport {StyleProp, TextStyle, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {OfferCategory} from \"../api/dto\";\r\nimport {getLocalSvg} from \"../assets\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {SvgProps} from \"react-native-svg\";\r\nimport SemiHighlightedText from \"./SemiHighlightedText\";\r\n\r\n// Component props\r\nexport type FormattedOfferCategoryProps = {\r\n    category: OfferCategory;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    iconProps?: Partial<SvgProps>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    iconSize?: number;\r\n    fontSize?: number;\r\n} & ThemeProps;\r\n\r\nclass FormattedOfferCategory extends React.Component<FormattedOfferCategoryProps> {\r\n    render(): JSX.Element {\r\n        const {containerStyle, category, theme, textStyle, iconProps, iconSize, fontSize} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const translationKey = `onboarding.offers${category[0].toUpperCase() + category.slice(1)}.title`;\r\n        const SvgIcon = getLocalSvg(`offers.categories.${category}`, () => this.forceUpdate());\r\n\r\n        const size = iconSize || 75;\r\n\r\n        return (\r\n            <View style={[styles.container, containerStyle]}>\r\n                <SvgIcon width={size} height={size} {...iconProps} />\r\n                <SemiHighlightedText text={i18n.t(translationKey)} textStyle={textStyle} fontSize={fontSize} />\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            marginLeft: -10,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FormattedOfferCategory);\r\n","import * as React from \"react\";\r\nimport {ScrollView, StyleSheet, Switch, Text, TouchableOpacity, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {OfferCategory, OfferDto} from \"../api/dto\";\r\nimport MultiUniversityPicker from \"../components/MultiUniversityPicker\";\r\nimport {setMatchingFilters} from \"../state/matching/actions\";\r\nimport {AppState, MatchingFiltersState} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport DegreeToggleMulti from \"../components/DegreeToggleMulti\";\r\nimport LanguagePicker from \"../components/LanguagePicker\";\r\nimport {Degree, Role} from \"../constants/profile-constants\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport RoleToggleMulti from \"../components/RoleToggleMulti\";\r\nimport {defaultMatchingFilters} from \"../state/matching/reducer\";\r\nimport FormattedOfferCategory from \"../components/FormattedOfferCategory\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\n// Map props from state\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    offers: state.profile.offers,\r\n    filters: state.matching.filters,\r\n}));\r\n\r\n// Component props\r\ntype MatchFilteringScreenProps = ThemeProps & ConnectedProps<typeof reduxConnector>;\r\n\r\n// Component state\r\ntype MatchFilteringScreenState = {\r\n    localFilters: MatchingFiltersState;\r\n};\r\n\r\nexport const Separator = withTheme(({theme}: ThemeProps) => {\r\n    return <View style={themedStyles(theme).separator}></View>;\r\n});\r\n\r\nexport const filteringScreenRef = React.createRef<MatchFilteringScreen>();\r\n\r\nclass MatchFilteringScreen extends React.Component<MatchFilteringScreenProps, MatchFilteringScreenState> {\r\n    haveFiltersChanged: boolean;\r\n\r\n    constructor(props: MatchFilteringScreenProps) {\r\n        super(props);\r\n        this.state = {\r\n            localFilters: defaultMatchingFilters(),\r\n        };\r\n        this.haveFiltersChanged = false;\r\n    }\r\n\r\n    updateLocalOfferFilters(id: string, value: boolean) {\r\n        this.haveFiltersChanged = true;\r\n        this.setState({\r\n            ...this.state,\r\n            localFilters: {...this.state.localFilters, offers: {...this.state.localFilters.offers, [id]: value}},\r\n        });\r\n    }\r\n\r\n    updateLocalFilters(filters: Partial<MatchingFiltersState>) {\r\n        this.haveFiltersChanged = true;\r\n        this.setState({...this.state, localFilters: {...this.state.localFilters, ...filters}});\r\n    }\r\n\r\n    resetLocalFilters() {\r\n        this.updateLocalFilters(defaultMatchingFilters());\r\n    }\r\n\r\n    applyFilters() {\r\n        if (this.haveFiltersChanged) this.props.dispatch(setMatchingFilters(this.state.localFilters));\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Set filters from the store when mounting\r\n        this.updateLocalFilters(this.props.filters);\r\n        this.haveFiltersChanged = false;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, offers} = this.props;\r\n        const filters = this.state.localFilters;\r\n        const styles = themedStyles(theme);\r\n\r\n        const categories = Object.values(OfferCategory);\r\n\r\n        // <Text style={styles.sectionTitle}>{i18n.t(`offerCategories.${category}`)}</Text>\r\n        const offerSections = categories.map((category: OfferCategory) => (\r\n            <View key={category} style={styles.sectionContainer}>\r\n                <Separator />\r\n                <FormattedOfferCategory category={category} iconSize={60} fontSize={24} />\r\n                {offers\r\n                    .filter((o: OfferDto) => o.category == category)\r\n                    .map((o: OfferDto) => (\r\n                        <View key={o.id} style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(`allOffers.${o.id}.name`)}</Text>\r\n                            <Switch\r\n                                value={filters.offers[o.id] || false}\r\n                                onValueChange={(value: boolean) => this.updateLocalOfferFilters(o.id, value)}\r\n                            />\r\n                        </View>\r\n                    ))}\r\n            </View>\r\n        ));\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollView style={styles.scroll} contentContainerStyle={styles.scrollContainer}>\r\n                    <TouchableOpacity style={styles.resetButton} onPress={() => this.resetLocalFilters()}>\r\n                        <Text style={styles.resetButtonText}>{i18n.t(\"matching.filtering.buttonReset\")}</Text>\r\n                        <MaterialIcons name=\"refresh\" style={styles.resetButtonIcon} />\r\n                    </TouchableOpacity>\r\n                    <View style={styles.sectionContainer}>\r\n                        <Text style={styles.sectionTitle}>{i18n.t(\"matching.filtering.sectionGeneral\")}</Text>\r\n                        <View style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"university\")}</Text>\r\n                            <View style={styles.entryControls}>\r\n                                <MultiUniversityPicker\r\n                                    universities={filters.universities}\r\n                                    showChips={false}\r\n                                    onChange={(universities: string[]) => this.updateLocalFilters({universities})}\r\n                                />\r\n                                <ClearFilterButton onPress={() => this.updateLocalFilters({universities: []})} />\r\n                            </View>\r\n                        </View>\r\n                        <View style={styles.entryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"spokenLanguages\")}</Text>\r\n                            <View style={styles.entryControls}>\r\n                                <LanguagePicker\r\n                                    multiple={true}\r\n                                    languages={filters.languages}\r\n                                    showChips={false}\r\n                                    onChange={(languages: string[]) => this.updateLocalFilters({languages})}\r\n                                />\r\n                                <ClearFilterButton onPress={() => this.updateLocalFilters({languages: []})} />\r\n                            </View>\r\n                        </View>\r\n                        <View style={styles.twoLineEntryContainer}>\r\n                            <Text style={styles.entryLabel}>{i18n.t(\"profileTypes\")}</Text>\r\n                            <RoleToggleMulti\r\n                                roles={filters.types}\r\n                                onSelect={(types: Role[]) => this.updateLocalFilters({types})}\r\n                                noButtonVariant={true}\r\n                            />\r\n                        </View>\r\n                        {filters.types.indexOf(\"student\") != -1 && (\r\n                            <View style={styles.twoLineEntryContainer}>\r\n                                <Text style={styles.entryLabel}>{i18n.t(\"levelOfStudy\")}</Text>\r\n                                <DegreeToggleMulti\r\n                                    degrees={filters.degrees}\r\n                                    onSelect={(degrees: Degree[]) => this.updateLocalFilters({degrees})}\r\n                                    style={{width: \"100%\"}}\r\n                                    noButtonVariant={true}\r\n                                />\r\n                            </View>\r\n                        )}\r\n                    </View>\r\n                    {offerSections}\r\n                </ScrollView>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        scroll: {\r\n            width: \"100%\",\r\n        },\r\n        scrollContainer: {\r\n            flexDirection: \"column\",\r\n            padding: 40,\r\n            width: \"100%\",\r\n        },\r\n        sectionContainer: {\r\n            width: \"100%\",\r\n        },\r\n        sectionTitle: {\r\n            fontSize: 20,\r\n            letterSpacing: 1,\r\n            marginBottom: 5,\r\n            color: theme.text,\r\n        },\r\n        entryContainer: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n        },\r\n        twoLineEntryContainer: {\r\n            flexDirection: \"column\",\r\n        },\r\n        entryLabel: {\r\n            fontSize: 16,\r\n            marginVertical: 7,\r\n            marginRight: 10,\r\n            color: theme.textLight,\r\n        },\r\n        entryControls: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            marginVertical: 2,\r\n        },\r\n        separator: {\r\n            height: 1,\r\n            width: \"100%\",\r\n            backgroundColor: \"rgba(0, 0, 0, 0.1)\",\r\n            alignSelf: \"center\",\r\n            marginVertical: 15,\r\n        },\r\n        resetButton: {\r\n            width: \"100%\",\r\n            maxWidth: 200,\r\n            paddingVertical: 7,\r\n            marginBottom: 20,\r\n            backgroundColor: theme.accentSlight,\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            alignSelf: \"center\",\r\n            borderRadius: 10,\r\n            elevation: 1,\r\n        },\r\n        resetButtonText: {\r\n            fontSize: 14,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            color: theme.textBlack,\r\n        },\r\n        resetButtonIcon: {\r\n            fontSize: 16,\r\n            color: theme.textBlack,\r\n            marginLeft: 4,\r\n        },\r\n    });\r\n});\r\n\r\nexport const ClearFilterButton = withTheme(\r\n    ({theme, onPress}: ThemeProps & {onPress: () => void}): JSX.Element => (\r\n        <TouchableOpacity onPress={onPress}>\r\n            <MaterialIcons name=\"close\" style={{fontSize: 28, color: theme.text}} />\r\n        </TouchableOpacity>\r\n    ),\r\n);\r\n\r\nconst wrapper = (props: MatchFilteringScreenProps) => <MatchFilteringScreen ref={filteringScreenRef} {...props} />;\r\nexport default reduxConnector(withTheme(wrapper));\r\n","import * as React from \"react\";\r\nimport {Text, TouchableOpacity, View, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {StackHeaderProps} from \"@react-navigation/stack\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {headerStyles} from \"../../styles/headers\";\r\nimport {headerTitle} from \"../../navigation/utils\";\r\nimport {NavigatorRoute} from \"../../navigation/types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {filteringScreenRef} from \"../../screens/MatchFilteringScreen\";\r\nimport {refreshFetchedProfiles} from \"../../state/matching/actions\";\r\n\r\n// Component props\r\nexport type FilteringScreenHeaderProps = ThemeProps & StackHeaderProps;\r\n\r\nclass FilteringScreenHeaderClass extends React.Component<FilteringScreenHeaderProps> {\r\n    back() {\r\n        const nav = this.props.navigation;\r\n        if (nav.canGoBack()) nav.goBack();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, insets, scene, navigation} = this.props;\r\n        const styles = themedStyles(theme);\r\n        const hstyles = headerStyles(theme);\r\n\r\n        const title = headerTitle(scene.route.name as NavigatorRoute);\r\n\r\n        return (\r\n            <View style={[{paddingTop: insets.top}, hstyles.wrapper]}>\r\n                <TouchableOpacity style={{paddingVertical: 10}} onPress={() => this.back()}>\r\n                    <MaterialIcons name=\"close\" style={styles.actionIcon} />\r\n                </TouchableOpacity>\r\n                <Text style={[hstyles.title, {textAlign: \"center\"}]} numberOfLines={1}>\r\n                    {title}\r\n                </Text>\r\n                <TouchableOpacity\r\n                    style={{paddingVertical: 10}}\r\n                    onPress={() => {\r\n                        if (filteringScreenRef.current) filteringScreenRef.current.applyFilters();\r\n                        navigation.navigate(\"TabMatchingScreen\");\r\n                        store.dispatch(refreshFetchedProfiles());\r\n                    }}\r\n                >\r\n                    <MaterialIcons name=\"check\" style={styles.actionIcon} />\r\n                </TouchableOpacity>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionIcon: {\r\n            fontSize: 32,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nconst FilteringScreenHeaderComp = withTheme(FilteringScreenHeaderClass);\r\n\r\nexport default function FilteringScreenHeader(props: StackHeaderProps): JSX.Element {\r\n    return <FilteringScreenHeaderComp {...props} />;\r\n}\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextStyle, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {MatchActionStatus} from \"../api/dto\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\n\r\n// Component props\r\nexport type FormattedMatchStatusProps = {\r\n    status: MatchActionStatus;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    iconStyle?: StyleProp<TextStyle>;\r\n} & ThemeProps;\r\n\r\nclass FormattedMatchStatus extends React.Component<FormattedMatchStatusProps> {\r\n    render(): JSX.Element {\r\n        const {status, theme, containerStyle, textStyle, iconStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const text = i18n.t(`matching.history.status.${status}`);\r\n\r\n        let IconComponent;\r\n        let iconName;\r\n\r\n        switch (status) {\r\n            case MatchActionStatus.Blocked:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"block\";\r\n                break;\r\n            case MatchActionStatus.Declined:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"thumb-down\";\r\n                break;\r\n            case MatchActionStatus.Matched:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"people\";\r\n                break;\r\n            case MatchActionStatus.Requested:\r\n                IconComponent = MaterialIcons;\r\n                iconName = \"thumb-up\";\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <View style={[styles.container, containerStyle]}>\r\n                <IconComponent style={[styles.icon, iconStyle]} name={iconName} />\r\n                <Text style={[styles.text, textStyle]}>{text}</Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        icon: {\r\n            marginRight: 5,\r\n            paddingTop: 2,\r\n        },\r\n        text: {\r\n            fontSize: 20,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(FormattedMatchStatus);\r\n","import * as React from \"react\";\r\nimport {Text, View, ViewStyle, StyleSheet} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport FormattedUniversity from \"../FormattedUniversity\";\r\nimport {PARTNER_UNIVERSITIES, University} from \"../../constants/universities\";\r\nimport ProfileAvatar from \"../ProfileAvatar\";\r\nimport {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport {MatchHistoryItem} from \"../../model/matching\";\r\nimport FormattedMatchStatus from \"../FormattedMatchStatus\";\r\nimport SwipeableCard, {SwipeableCardClass, SwipeActionButtons, SwipeActionProps} from \"./SwipeableCard\";\r\nimport i18n from \"i18n-js\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport BlockProfileModal, {BlockProfileModalClass} from \"../modals/BlockProfileModal\";\r\nimport {MatchActionStatus} from \"../../api/dto\";\r\nimport QuickFormReport, {QuickFormReportClass} from \"../forms/QuickFormReport\";\r\nimport {ReportEntityType} from \"../../constants/reports\";\r\nimport {cancelMatchAction} from \"../../state/matching/actions\";\r\n\r\n// Component props\r\nexport type HistoryProfileCardProps = ThemeProps & {\r\n    item: MatchHistoryItem;\r\n    style?: ViewStyle;\r\n    onHidden?: () => void;\r\n};\r\n\r\nconst LOOKS = {\r\n    sideMargin: 10,\r\n    borderRadius: 10,\r\n    minHeight: 100,\r\n};\r\n\r\nclass HistoryProfileCard extends React.Component<HistoryProfileCardProps> {\r\n    swipeableCardRef = React.createRef<SwipeableCardClass>();\r\n    reportFormRef = React.createRef<QuickFormReportClass>();\r\n    blockModalRef = React.createRef<BlockProfileModalClass>();\r\n\r\n    private getActions(hideCard: () => void): SwipeActionProps[] {\r\n        const {\r\n            theme,\r\n            item: {id, status},\r\n        } = this.props;\r\n        const dispatch = store.dispatch as MyThunkDispatch;\r\n\r\n        const reportButton = {\r\n            icon: \"report\",\r\n            text: i18n.t(\"matching.history.actions.report\"),\r\n            backgroundColor: theme.error,\r\n            color: theme.textWhite,\r\n            onPress: () => this.reportFormRef.current?.open(),\r\n        };\r\n        const blockButton = {\r\n            icon: \"block\",\r\n            text: i18n.t(\"matching.history.actions.block\"),\r\n            backgroundColor: theme.error,\r\n            color: theme.textWhite,\r\n            onPress: () => this.blockModalRef.current?.show(),\r\n        };\r\n        const cancelButton = {\r\n            icon: \"close\",\r\n            text: i18n.t(`matching.history.actions.cancel.${status}`),\r\n            backgroundColor: theme.accent,\r\n            color: theme.textWhite,\r\n            onPress: () => {\r\n                hideCard();\r\n                dispatch(cancelMatchAction(id));\r\n            },\r\n        };\r\n\r\n        if (status === MatchActionStatus.Blocked) return [reportButton, cancelButton];\r\n        else return [reportButton, blockButton, cancelButton];\r\n    }\r\n\r\n    render() {\r\n        const {theme, item} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const profile = item.profile;\r\n        const university = PARTNER_UNIVERSITIES.find((univ: University) => univ.key == profile.university);\r\n        const fullName = profile.firstName + \" \" + profile.lastName;\r\n\r\n        return (\r\n            <>\r\n                <SwipeableCard\r\n                    ref={this.swipeableCardRef}\r\n                    looks={LOOKS}\r\n                    rightThreshold={100}\r\n                    overshootRight={false}\r\n                    rightActions={(hideCard) => (\r\n                        <SwipeActionButtons\r\n                            id={`${item.profile.id}-${item.status}`}\r\n                            looks={LOOKS}\r\n                            side=\"right\"\r\n                            actions={this.getActions(hideCard)}\r\n                            buttonStyle={styles.actionButton}\r\n                        />\r\n                    )}\r\n                >\r\n                    <View style={styles.cardContent}>\r\n                        <View style={styles.avatarContainer}>\r\n                            <ProfileAvatar\r\n                                profile={profile}\r\n                                size={60}\r\n                                rounded\r\n                                containerStyle={styles.avatar}\r\n                                onPress={() => rootNavigate(\"ProfileScreen\", {id: profile.id})}\r\n                            />\r\n                        </View>\r\n                        <View style={styles.infoContainer}>\r\n                            <Text style={styles.name}>{fullName}</Text>\r\n                            {university && (\r\n                                <FormattedUniversity\r\n                                    flagSize={14}\r\n                                    flagEmoji={true}\r\n                                    style={[styles.infoText, {marginLeft: -10}]}\r\n                                    university={university}\r\n                                />\r\n                            )}\r\n                            <FormattedMatchStatus\r\n                                status={item.status}\r\n                                textStyle={styles.infoText}\r\n                                iconStyle={styles.infoText}\r\n                            />\r\n                        </View>\r\n                        <MaterialCommunityIcons name=\"gesture-swipe-left\" style={styles.swipeLeftIcon} />\r\n                    </View>\r\n                </SwipeableCard>\r\n                <QuickFormReport\r\n                    ref={this.reportFormRef}\r\n                    entityType={ReportEntityType.PROFILE_ENTITY}\r\n                    entity={profile}\r\n                    onSubmit={() => this.swipeableCardRef.current?.resetSwipe()}\r\n                />\r\n                <BlockProfileModal\r\n                    ref={this.blockModalRef}\r\n                    profile={profile}\r\n                    onBlock={() => this.swipeableCardRef.current?.collapse()}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        cardContent: {\r\n            flexDirection: \"row\",\r\n            padding: 10,\r\n        },\r\n        avatarContainer: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        avatar: {\r\n            backgroundColor: theme.accentSecondary,\r\n        },\r\n        infoContainer: {\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-between\",\r\n            paddingLeft: 10,\r\n        },\r\n        name: {\r\n            fontSize: 18,\r\n            letterSpacing: 0.8,\r\n            color: theme.text,\r\n        },\r\n        infoText: {\r\n            fontSize: 15,\r\n            letterSpacing: 0.5,\r\n            color: theme.textLight,\r\n            flexShrink: 1, // Ensures text wrapping\r\n        },\r\n\r\n        swipeLeftIcon: {\r\n            color: theme.text,\r\n            opacity: 0.25,\r\n            fontSize: 20,\r\n        },\r\n\r\n        actionButton: {\r\n            paddingHorizontal: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(HistoryProfileCard);\r\n","import * as React from \"react\";\r\nimport {SearchBar, SearchBarProps} from \"react-native-elements\";\r\n\r\n// Component props\r\nexport type BufferedSearchBarProps = {\r\n    bufferDelay: number;\r\n    onBufferedUpdate?: (text: string) => void;\r\n} & SearchBarProps;\r\n\r\nclass BufferedSearchBar extends React.Component<BufferedSearchBarProps> {\r\n    private updateTimeout: NodeJS.Timeout | null = null;\r\n\r\n    private onChange(text: string) {\r\n        const {bufferDelay, onBufferedUpdate} = this.props;\r\n\r\n        if (this.updateTimeout) clearTimeout(this.updateTimeout);\r\n        this.updateTimeout = setTimeout(() => {\r\n            this.updateTimeout = null;\r\n            if (onBufferedUpdate) onBufferedUpdate(text);\r\n        }, bufferDelay);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        const {bufferDelay, onBufferedUpdate, onChangeText, ...searchBarProps} = this.props;\r\n\r\n        return (\r\n            <SearchBar\r\n                onChangeText={(search: string) => {\r\n                    if (onChangeText) onChangeText(search);\r\n                    this.onChange(search);\r\n                }}\r\n                {...searchBarProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default BufferedSearchBar;\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport {Button, withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {fetchHistory, refreshFetchedHistory, setHistoryFilters} from \"../state/matching/actions\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {TabMatchingRoot} from \"../navigation/types\";\r\nimport {HISTORY_FETCH_LIMIT, SEARCH_BUFFER_DELAY} from \"../constants/config\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport HistoryProfileCard from \"../components/cards/HistoryProfileCard\";\r\nimport InfiniteScroller from \"../components/InfiniteScroller\";\r\nimport {MATCH_ACTION_HISTORY_STATUSES} from \"../api/dto\";\r\nimport {MatchHistoryItem} from \"../model/matching\";\r\nimport BufferedSearchBar from \"../components/BufferedSearchBar\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    historyItems: state.matching.historyItems,\r\n    fetchingHistory: state.matching.historyPagination.fetching,\r\n    currentPage: state.matching.historyPagination.page,\r\n    historyFilters: state.matching.historyFilters,\r\n}));\r\n\r\n// Component props\r\ntype MatchHistoryScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<TabMatchingRoot, \"MatchHistoryScreen\">;\r\n\r\n// Component state\r\ntype MatchHistoryScreenState = {\r\n    search: string;\r\n};\r\n\r\nclass MatchHistoryScreen extends React.Component<MatchHistoryScreenProps, MatchHistoryScreenState> {\r\n    constructor(props: MatchHistoryScreenProps) {\r\n        super(props);\r\n        this.state = {search: \"\"};\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {historyItems, theme, historyFilters, fetchingHistory, currentPage, navigation, dispatch} = this.props;\r\n        const {search} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const filters = MATCH_ACTION_HISTORY_STATUSES;\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.filtersContainer}>\r\n                    {filters.map((key: string) => (\r\n                        <Filter\r\n                            theme={theme}\r\n                            key={`match-history-filter-${key}`}\r\n                            filterKey={key}\r\n                            selected={historyFilters[key]}\r\n                            onPress={() => {\r\n                                dispatch(setHistoryFilters({[key]: !historyFilters[key]}));\r\n                                dispatch(refreshFetchedHistory());\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </View>\r\n                <BufferedSearchBar\r\n                    onBufferedUpdate={() => dispatch(refreshFetchedHistory())}\r\n                    bufferDelay={SEARCH_BUFFER_DELAY}\r\n                    placeholder={i18n.t(\"search\")}\r\n                    onChangeText={(search: string) => this.setState({...this.state, search})}\r\n                    value={search}\r\n                    containerStyle={styles.searchBarContainer}\r\n                    inputContainerStyle={styles.searchBarInputContainer}\r\n                    inputStyle={styles.searchBarInput}\r\n                />\r\n                <InfiniteScroller\r\n                    navigation={navigation}\r\n                    fetchLimit={HISTORY_FETCH_LIMIT}\r\n                    fetchMore={() => (dispatch as MyThunkDispatch)(fetchHistory(search))}\r\n                    fetching={fetchingHistory}\r\n                    currentPage={currentPage}\r\n                    items={historyItems}\r\n                    id={(it: MatchHistoryItem): string => it.id}\r\n                    noResultsComponent={\r\n                        <>\r\n                            <Text style={styles.noResultsText1}>{i18n.t(\"matching.history.noResults\")}</Text>\r\n                            <Text style={styles.noResultsText2}>{i18n.t(\"matching.history.noResultsAdvice\")}</Text>\r\n                        </>\r\n                    }\r\n                    refresh={() => dispatch(refreshFetchedHistory())}\r\n                    refreshOnFocus\r\n                    renderItem={(item: MatchHistoryItem, hide: () => void) => (\r\n                        <HistoryProfileCard\r\n                            key={`history-card-${item.id}-${item.status}`}\r\n                            item={item}\r\n                            onHidden={hide}\r\n                        />\r\n                    )}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Filter({\r\n    theme,\r\n    selected,\r\n    filterKey,\r\n    onPress,\r\n}: {\r\n    theme: Theme;\r\n    selected: boolean;\r\n    filterKey: string;\r\n    onPress: () => void;\r\n}): JSX.Element {\r\n    const styles = themedStyles(theme);\r\n    return (\r\n        <Button\r\n            onPress={onPress}\r\n            title={i18n.t(`matching.history.status.${filterKey}`)}\r\n            containerStyle={styles.filterButtonContainer}\r\n            buttonStyle={[styles.filterButton, selected ? styles.filterButtonSelected : {}]}\r\n            titleStyle={[styles.filterLabel, selected ? styles.filterLabelSelected : {}]}\r\n            raised={false}\r\n        />\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        topBar: {\r\n            flexBasis: 90,\r\n            paddingTop: 40,\r\n            paddingHorizontal: 20,\r\n            width: \"100%\",\r\n        },\r\n        title: {\r\n            fontSize: 20,\r\n            fontWeight: \"bold\",\r\n        },\r\n        separator: {\r\n            marginVertical: 20,\r\n            height: 1,\r\n            width: \"100%\",\r\n        },\r\n        filtersIcon: {\r\n            paddingHorizontal: 5,\r\n            fontSize: 26,\r\n            color: theme.textLight,\r\n        },\r\n        headerContainer: {\r\n            flexDirection: \"row\",\r\n            paddingRight: 10,\r\n        },\r\n        noResultsText1: {\r\n            fontSize: 20,\r\n            letterSpacing: 0.75,\r\n            color: theme.text,\r\n            marginVertical: 5,\r\n        },\r\n        noResultsText2: {\r\n            fontSize: 16,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n        filtersContainer: {\r\n            width: \"100%\",\r\n            marginVertical: 10,\r\n            flexDirection: \"row\",\r\n        },\r\n        filterButtonContainer: {\r\n            flex: 1,\r\n            marginHorizontal: 15,\r\n            borderRadius: 25,\r\n        },\r\n        filterButton: {\r\n            height: 40,\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        filterButtonSelected: {\r\n            backgroundColor: theme.accent,\r\n        },\r\n        filterLabel: {\r\n            color: theme.text,\r\n            fontSize: 14,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 0.6,\r\n        },\r\n        filterLabelSelected: {\r\n            color: theme.textWhite,\r\n            fontWeight: \"600\",\r\n        },\r\n        filterIcon: {\r\n            fontSize: 18,\r\n            color: theme.text,\r\n            marginRight: 4,\r\n        },\r\n        filterIconSelected: {\r\n            color: theme.textWhite,\r\n        },\r\n        // Search bar\r\n        searchBarContainer: {\r\n            width: \"100%\",\r\n            marginBottom: 5,\r\n            paddingVertical: 0,\r\n            paddingHorizontal: 15,\r\n            backgroundColor: \"transparent\",\r\n            borderTopWidth: 0,\r\n            borderBottomWidth: 0,\r\n        },\r\n        searchBarInputContainer: {\r\n            height: 40,\r\n            backgroundColor: theme.cardBackground,\r\n            elevation: 2,\r\n            borderRadius: 25,\r\n        },\r\n        searchBarInput: {\r\n            fontSize: 14,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(MatchHistoryScreen));\r\n","/* eslint-disable react/display-name */\r\nimport * as React from \"react\";\r\nimport {createStackNavigator, StackHeaderProps} from \"@react-navigation/stack\";\r\nimport {TabMatchingRoot} from \"./types\";\r\nimport TabMatchingScreen from \"../screens/TabMatchingScreen\";\r\nimport {screenTitle} from \"./utils\";\r\nimport MatchScreenHeader from \"../components/headers/MatchScreenHeader\";\r\nimport MatchFilteringScreen from \"../screens/MatchFilteringScreen\";\r\nimport FilteringScreenHeader from \"../components/headers/FilteringScreenHeader\";\r\nimport MatchHistoryScreen from \"../screens/MatchHistoryScreen\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\n\r\nconst TabMatchingStack = createStackNavigator<TabMatchingRoot>();\r\n\r\nexport const TabMatchingNavigator = (): JSX.Element => (\r\n    <TabMatchingStack.Navigator>\r\n        <TabMatchingStack.Screen\r\n            name=\"TabMatchingScreen\"\r\n            options={() => ({\r\n                headerShown: false,\r\n                title: screenTitle(\"TabMatchingScreen\"),\r\n            })}\r\n        >\r\n            {(props) => (\r\n                <>\r\n                    <TabMatchingScreen {...props} />\r\n                    <MatchScreenHeader blur={true} {...props} />\r\n                </>\r\n            )}\r\n        </TabMatchingStack.Screen>\r\n        <TabMatchingStack.Screen\r\n            name=\"MatchFilteringScreen\"\r\n            component={MatchFilteringScreen}\r\n            options={{\r\n                headerShown: true,\r\n                title: screenTitle(\"MatchFilteringScreen\"),\r\n                header: FilteringScreenHeader,\r\n            }}\r\n        />\r\n        <TabMatchingStack.Screen\r\n            name=\"MatchHistoryScreen\"\r\n            component={MatchHistoryScreen}\r\n            options={{\r\n                headerShown: true,\r\n                title: screenTitle(\"MatchHistoryScreen\"),\r\n                header: (props: StackHeaderProps) => <MainHeader backButton={true} {...props} />,\r\n            }}\r\n        />\r\n    </TabMatchingStack.Navigator>\r\n);\r\n","import * as React from \"react\";\r\nimport {Text, StyleSheet} from \"react-native\";\r\nimport {BottomTabBar, BottomTabBarProps} from \"@react-navigation/bottom-tabs\";\r\nimport {BlurView} from \"expo-blur\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport {useSafeAreaInsets, EdgeInsets} from \"react-native-safe-area-context\";\r\nimport {LabelPosition} from \"@react-navigation/bottom-tabs/lib/typescript/src/types\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {BLUR_TAB_INTENSITY} from \"../../styles/general\";\r\n\r\n// Component props\r\nexport type MainTabBarProps = ThemeProps & BottomTabBarProps & {insets: EdgeInsets};\r\n\r\nclass MainTabBarClass extends React.Component<MainTabBarProps> {\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            insets: {bottom},\r\n            ...tabBarProps\r\n        } = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <BlurView\r\n                style={styles.blurViewStyle}\r\n                tint={theme.id === \"dark\" ? \"dark\" : \"default\"}\r\n                intensity={BLUR_TAB_INTENSITY}\r\n            >\r\n                <BottomTabBar\r\n                    {...tabBarProps}\r\n                    activeTintColor={theme.accent}\r\n                    style={[styles.tabBar, {paddingBottom: bottom}]}\r\n                    tabStyle={styles.tab}\r\n                    iconStyle={styles.icon}\r\n                    showLabel={false}\r\n                />\r\n            </BlurView>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        blurViewStyle: {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            left: 0,\r\n            right: 0,\r\n        },\r\n        tabBar: {\r\n            borderTopWidth: 0,\r\n            elevation: 0,\r\n            backgroundColor: \"transparent\",\r\n        },\r\n        tab: {\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n        },\r\n        icon: {\r\n            flex: 1,\r\n        },\r\n    });\r\n});\r\n\r\nfunction MainTabBar(props: BottomTabBarProps): JSX.Element {\r\n    const insets = useSafeAreaInsets();\r\n    return (\r\n        <ThemeConsumer>\r\n            {(themeProps: ThemeProps) => <MainTabBarClass insets={insets} {...themeProps} {...props} />}\r\n        </ThemeConsumer>\r\n    );\r\n}\r\n\r\nexport type MainTabBarIconProps = {\r\n    focused: boolean;\r\n    color: string;\r\n    size: number;\r\n};\r\nexport type MainTabBarLabelProps = {\r\n    focused: boolean;\r\n    color: string;\r\n    position: LabelPosition;\r\n};\r\n\r\nexport function MainTabBarIcon({name, color}: {name: string} & MainTabBarIconProps): JSX.Element {\r\n    return <MaterialIcons size={26} name={name} color={color} />;\r\n}\r\n\r\n// Unused\r\nexport function MainTabBarLabel({text, color}: {text: string} & MainTabBarLabelProps): JSX.Element {\r\n    return <Text style={{color, fontSize: 12}}>{text}</Text>;\r\n}\r\n\r\nexport default MainTabBar;\r\n","/* eslint-disable react/display-name */\r\nimport {createBottomTabNavigator} from \"@react-navigation/bottom-tabs\";\r\nimport {createStackNavigator, StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport TabNotImplementedScreen from \"../screens/TabNotImplementedScreen\";\r\nimport {MainNavigatorTabs, RootNavigatorScreens, TabHomeRoot, TabNotificationsRoot} from \"../navigation/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport MessagingNavigator from \"./MessagingNavigator\";\r\nimport {BottomTabBarProps} from \"@react-navigation/bottom-tabs/lib/typescript/src/types\";\r\nimport {ThemeProps} from \"../types\";\r\nimport TabHomeScreen from \"../screens/TabHomeScreen\";\r\nimport {screenTitle} from \"./utils\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\nimport {TabMatchingNavigator} from \"./TabMatchingNavigator\";\r\nimport MainTabBar, {MainTabBarIcon} from \"../components/tabs/MainTabBar\";\r\nimport {getFocusedRouteNameFromRoute} from \"@react-navigation/native\";\r\n\r\nconst TabNavigator = createBottomTabNavigator<MainNavigatorTabs>();\r\n\r\n// Component props\r\nexport type MainNavigatorProps = ThemeProps & StackScreenProps<RootNavigatorScreens, \"MainScreen\">;\r\n\r\nfunction MainNavigatorComponent(): JSX.Element {\r\n    return (\r\n        <TabNavigator.Navigator\r\n            initialRouteName=\"TabHome\"\r\n            tabBar={(props: BottomTabBarProps) => <MainTabBar {...props} />}\r\n        >\r\n            <TabNavigator.Screen\r\n                name=\"TabHome\"\r\n                component={TabHomeNavigator}\r\n                options={{\r\n                    //tabBarLabel: (props) => <MainTabBarLabel text={i18n.t(\"tabs.home\")} {...props} />,\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"home\" {...props} />,\r\n                }}\r\n            />\r\n            <TabNavigator.Screen\r\n                name=\"TabMatching\"\r\n                component={TabMatchingNavigator}\r\n                options={{\r\n                    //tabBarLabel: (props) => <MainTabBarLabel text={i18n.t(\"tabs.matching\")} {...props} />,\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"contacts\" {...props} />,\r\n                }}\r\n            />\r\n            <TabNavigator.Screen\r\n                name=\"TabMessaging\"\r\n                component={MessagingNavigator}\r\n                options={({route}) => ({\r\n                    tabBarVisible: getFocusedRouteNameFromRoute(route) !== \"ChatScreen\",\r\n                    //tabBarLabel: (props) => <MainTabBarLabel text={i18n.t(\"tabs.messaging\")} {...props} />,\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"message\" {...props} />,\r\n                })}\r\n            />\r\n            <TabNavigator.Screen\r\n                name=\"TabNotifications\"\r\n                component={TabNotificationsNavigator}\r\n                options={{\r\n                    //tabBarLabel: (props) => <MainTabBarLabel text={i18n.t(\"tabs.notifications\")} {...props} />,\r\n                    tabBarIcon: (props) => <MainTabBarIcon name=\"notifications\" {...props} />,\r\n                }}\r\n            />\r\n        </TabNavigator.Navigator>\r\n    );\r\n}\r\n\r\nconst TabHomeStack = createStackNavigator<TabHomeRoot>();\r\n\r\nconst TabHomeNavigator = (): JSX.Element => (\r\n    <TabHomeStack.Navigator screenOptions={{header: MainHeader}}>\r\n        <TabHomeStack.Screen\r\n            name=\"TabHomeScreen\"\r\n            component={TabHomeScreen}\r\n            options={{title: screenTitle(\"TabHomeScreen\")}}\r\n        />\r\n    </TabHomeStack.Navigator>\r\n);\r\n\r\nconst TabNotificationsStack = createStackNavigator<TabNotificationsRoot>();\r\n\r\nconst TabNotificationsNavigator = (): JSX.Element => (\r\n    <TabNotificationsStack.Navigator screenOptions={{header: MainHeader}}>\r\n        <TabNotificationsStack.Screen\r\n            name=\"TabNotificationsScreen\"\r\n            component={TabNotImplementedScreen}\r\n            options={{title: screenTitle(\"TabNotificationsScreen\")}}\r\n        />\r\n    </TabNotificationsStack.Navigator>\r\n);\r\n\r\nexport default withTheme(MainNavigatorComponent);\r\n","import {StyleSheet, TextStyle} from \"react-native\";\r\nimport {Theme} from \"../types\";\r\nimport {preTheme} from \"./utils\";\r\nimport {styleTextThin} from \"./general\";\r\n\r\nexport const onboardingStyle = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wavyHeader: {\r\n            height: 200,\r\n        },\r\n        header: {\r\n            marginBottom: 20,\r\n        },\r\n        slideScrollView: {\r\n            width: \"100%\",\r\n            marginBottom: 80, // leave some space for the navigation controls\r\n        },\r\n        slideContentWrapper: {\r\n            width: \"75%\",\r\n            flexDirection: \"column\",\r\n            alignSelf: \"center\",\r\n            paddingTop: 150,\r\n        },\r\n        slideNavWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-around\",\r\n            alignItems: \"center\",\r\n            position: \"absolute\",\r\n            bottom: 20,\r\n        },\r\n        navButton: {\r\n            padding: 10,\r\n        },\r\n        navButtonIcon: {\r\n            fontSize: 40,\r\n            color: theme.text,\r\n        },\r\n        finishButtonText: {\r\n            fontSize: 20,\r\n        },\r\n        title: {\r\n            ...styleTextThin,\r\n            fontSize: 40,\r\n            letterSpacing: 1.75,\r\n            marginBottom: 20,\r\n            color: theme.text,\r\n        } as TextStyle,\r\n        subtitle: {\r\n            fontSize: 18,\r\n            textAlign: \"justify\",\r\n            letterSpacing: 0.4,\r\n            lineHeight: 25,\r\n            color: theme.textLight,\r\n        } as TextStyle,\r\n    });\r\n});\r\n\r\nexport const onboardingOffersStyle = preTheme(() => {\r\n    return StyleSheet.create({\r\n        categoryTitleText: {},\r\n    });\r\n});\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Gender, GENDERS} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\nexport type GenderToggleMultiProps = {\r\n    genders: Gender[];\r\n    onSelect?: (genders: Gender[]) => void;\r\n    noButtonVariant?: boolean;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction GenderToggleMulti(props: GenderToggleMultiProps): JSX.Element {\r\n    const buttonLabels = GENDERS.map((r: string) => i18n.t(`genders.${r}`));\r\n    const {theme, genders, noButtonVariant, onSelect, ...otherProps} = props;\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) {\r\n                    const indices: number[] = typeof idx == \"object\" ? (idx as number[]) : [idx];\r\n                    onSelect(indices.map((i: number) => GENDERS[i]));\r\n                }\r\n            }}\r\n            selectMultiple={true}\r\n            selectedIndexes={genders.map((gender: Gender) => GENDERS.indexOf(gender))}\r\n            buttons={buttonLabels}\r\n            {...getToggleStyleProps(noButtonVariant || false, theme)}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(GenderToggleMulti);\r\n","import {StyleSheet} from \"react-native\";\r\nimport {preTheme} from \"./utils\";\r\n\r\nexport const tooltipStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            textAlign: \"justify\",\r\n            paddingVertical: 10,\r\n        },\r\n        container: {\r\n            alignContent: \"center\",\r\n            borderRadius: 4,\r\n            width: undefined, // override default width so it adjusts based on the content\r\n            maxWidth: 240,\r\n            paddingHorizontal: 10,\r\n        },\r\n    });\r\n});\r\n","import React from \"react\";\r\nimport {Text} from \"react-native\";\r\nimport {Tooltip, withTheme} from \"react-native-elements\";\r\nimport {tooltipStyles} from \"../styles/tooltips\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type CustomTooltipProps = {\r\n    text: string;\r\n} & ThemeProps;\r\n\r\n// Component state\r\nexport type CustomTooltipState = {\r\n    height: number | undefined;\r\n};\r\n\r\nclass CustomTooltip extends React.Component<CustomTooltipProps, CustomTooltipState> {\r\n    constructor(props: CustomTooltipProps) {\r\n        super(props);\r\n        this.state = {height: undefined};\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {height} = this.state;\r\n        const {theme, text} = this.props;\r\n        const styles = tooltipStyles(theme);\r\n\r\n        return (\r\n            <Tooltip\r\n                popover={\r\n                    <Text\r\n                        style={styles.text}\r\n                        onLayout={(e) => {\r\n                            this.setState({\r\n                                ...this.state,\r\n                                height: e.nativeEvent.layout.height,\r\n                            });\r\n                        }}\r\n                    >\r\n                        {text}\r\n                    </Text>\r\n                }\r\n                backgroundColor={theme.accentSlight}\r\n                containerStyle={styles.container}\r\n                height={height}\r\n            >\r\n                {this.props.children}\r\n            </Tooltip>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(CustomTooltip);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet, ViewStyle, TouchableOpacity} from \"react-native\";\r\nimport {initOfferValue, OfferDto, OfferValueDto} from \"../api/dto\";\r\nimport {Gender, Role} from \"../constants/profile-constants\";\r\nimport GenderToggleMulti from \"./GenderToggleMulti\";\r\nimport RoleToggleMulti from \"./RoleToggleMulti\";\r\nimport i18n from \"i18n-js\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport CustomTooltip from \"./CustomTooltip\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\nexport type OfferControlProps = {\r\n    offer: OfferDto;\r\n    value: OfferValueDto;\r\n    onChange?: (value: OfferValueDto) => void;\r\n    style?: ViewStyle;\r\n} & ThemeProps;\r\n\r\nclass OfferControl extends React.Component<OfferControlProps> {\r\n    offerValueChange(changed: Partial<OfferValueDto>): void {\r\n        const {onChange} = this.props;\r\n        if (onChange) onChange({...this.props.value, ...changed});\r\n    }\r\n\r\n    setAllValues(b: boolean) {\r\n        this.offerValueChange(initOfferValue(this.props.offer, b));\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, offer, value, style} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const genders: Gender[] = [];\r\n        if (offer.allowChooseGender) {\r\n            if (value.allowFemale) genders.push(\"female\");\r\n            if (value.allowMale) genders.push(\"male\");\r\n            if (value.allowOther) genders.push(\"other\");\r\n        }\r\n\r\n        const roles: Role[] = [];\r\n        if (offer.allowChooseProfileType) {\r\n            if (value.allowStaff) roles.push(\"staff\");\r\n            if (value.allowStudent) roles.push(\"student\");\r\n        }\r\n\r\n        const isSomethingSelected =\r\n            (!offer.allowChooseGender || genders.length > 0) && (!offer.allowInterRole || roles.length > 0);\r\n\r\n        return (\r\n            <View style={[styles.wrapper, style]}>\r\n                <View style={styles.titleWrapper}>\r\n                    <CheckBox\r\n                        checked={isSomethingSelected}\r\n                        onPress={() => this.setAllValues(!isSomethingSelected)}\r\n                        containerStyle={styles.checkboxContainer}\r\n                    />\r\n                    <TouchableOpacity\r\n                        style={styles.offerNameTouchable}\r\n                        onPress={() => this.setAllValues(!isSomethingSelected)}\r\n                    >\r\n                        <Text style={styles.offerName}>{i18n.t(`allOffers.${offer.id}.name`)}</Text>\r\n                    </TouchableOpacity>\r\n                    <CustomTooltip text={i18n.t(`allOffers.${offer.id}.help`)}>\r\n                        <MaterialIcons style={styles.helpIcon} name=\"help\" />\r\n                    </CustomTooltip>\r\n                </View>\r\n                {isSomethingSelected && (\r\n                    <View style={styles.buttonsWrapper}>\r\n                        {offer.allowChooseGender && (\r\n                            <GenderToggleMulti\r\n                                noButtonVariant={true}\r\n                                genders={genders}\r\n                                onSelect={(selected: Gender[]) =>\r\n                                    this.offerValueChange({\r\n                                        allowFemale: selected.indexOf(\"female\") != -1,\r\n                                        allowMale: selected.indexOf(\"male\") != -1,\r\n                                        allowOther: selected.indexOf(\"other\") != -1,\r\n                                    })\r\n                                }\r\n                            />\r\n                        )}\r\n                        {offer.allowChooseProfileType && (\r\n                            <RoleToggleMulti\r\n                                noButtonVariant={true}\r\n                                roles={roles}\r\n                                onSelect={(selected: Role[]) =>\r\n                                    this.offerValueChange({\r\n                                        allowStaff: selected.indexOf(\"staff\") != -1,\r\n                                        allowStudent: selected.indexOf(\"student\") != -1,\r\n                                    })\r\n                                }\r\n                            />\r\n                        )}\r\n                    </View>\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            flexDirection: \"column\",\r\n            alignItems: \"flex-start\",\r\n        },\r\n        titleWrapper: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        offerNameTouchable: {\r\n            flex: 1,\r\n        },\r\n        offerName: {\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            color: theme.text,\r\n        },\r\n        helpIcon: {\r\n            fontSize: 20,\r\n            marginLeft: 5,\r\n            color: theme.textLight,\r\n        },\r\n        buttonsWrapper: {\r\n            width: \"100%\",\r\n        },\r\n        checkboxContainer: {\r\n            padding: 0,\r\n            marginTop: 0,\r\n            marginBottom: 0,\r\n            marginLeft: 0,\r\n            marginRight: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OfferControl);\r\n","import * as React from \"react\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    CreateProfileDto,\r\n    CreateProfileDtoCommon,\r\n    CreateProfileDtoStaff,\r\n    CreateProfileDtoStudent,\r\n    initOfferValue,\r\n    OfferCategory,\r\n    OfferDto,\r\n    OfferValueDto,\r\n} from \"../../api/dto\";\r\nimport OfferControl from \"../../components/OfferControl\";\r\nimport {setOnboardingOfferValue} from \"../../state/auth/actions\";\r\nimport {createProfile} from \"../../state/profile/actions\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, OnboardingState} from \"../../state/types\";\r\n\r\nexport function createOfferControls(\r\n    offers: OfferDto[],\r\n    category: OfferCategory,\r\n    onboardingState: OnboardingState,\r\n    dispatch: React.Dispatch<AnyAction>,\r\n): JSX.Element[] {\r\n    return offers\r\n        .filter((offer: OfferDto) => offer.category == category)\r\n        .map((offer: OfferDto, i: number) => (\r\n            <OfferControl\r\n                key={i}\r\n                offer={offer}\r\n                value={onboardingState.offerValues[offer.id] || initOfferValue(offer)}\r\n                onChange={(value: OfferValueDto) => dispatch(setOnboardingOfferValue(offer.id, value))}\r\n                style={{marginVertical: 20}}\r\n            />\r\n        ));\r\n}\r\n\r\nfunction onboardingStateToDto(onboardingState: OnboardingState): CreateProfileDto | null {\r\n    /* eslint-disable @typescript-eslint/no-non-null-assertion */\r\n\r\n    const base: CreateProfileDtoCommon = {\r\n        type: onboardingState.type!,\r\n        firstName: onboardingState.firstname!,\r\n        lastName: onboardingState.lastname!,\r\n        gender: onboardingState.gender!,\r\n        birthdate: onboardingState.birthdate!.toJSON(),\r\n        nationality: onboardingState.nationality!,\r\n        languages: onboardingState.languages,\r\n        interests: onboardingState.interestIds.map((id) => ({id})),\r\n        profileOffers: Object.values(onboardingState.offerValues),\r\n        educationFields: onboardingState.educationFields.map((id) => ({id})),\r\n    };\r\n\r\n    if (onboardingState.type == \"student\") {\r\n        return {\r\n            ...base,\r\n            degree: onboardingState.degree,\r\n        } as CreateProfileDtoStudent;\r\n    } else if (onboardingState.type == \"staff\") {\r\n        return {\r\n            ...base,\r\n            staffRoles: Object.keys(onboardingState.staffRoles)\r\n                .filter((k) => onboardingState.staffRoles[k])\r\n                .map((id: string) => ({id})),\r\n        } as CreateProfileDtoStaff;\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function finishOnboarding(onboardingState: OnboardingState): void {\r\n    const createProfileDto = onboardingStateToDto(onboardingState);\r\n    if (createProfileDto) (store.dispatch as MyThunkDispatch)(createProfile(createProfileDto));\r\n}\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {\r\n    Text,\r\n    View,\r\n    TouchableOpacity,\r\n    ScrollView,\r\n    KeyboardAvoidingView,\r\n    ViewStyle,\r\n    StyleProp,\r\n    Alert,\r\n    Dimensions,\r\n} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {onboardingStyle} from \"../../styles/onboarding\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {finishOnboarding} from \"./helpers\";\r\nimport i18n from \"i18n-js\";\r\nimport store from \"../../state/store\";\r\nimport ScreenWrapper from \"../ScreenWrapper\";\r\nimport {logout} from \"../../state/auth/actions\";\r\nimport {getLocalSvg} from \"../../assets\";\r\nimport WavyHeader from \"../../components/headers/WavyHeader\";\r\n\r\nexport type OnboardingScreenProps = {\r\n    index: number;\r\n    previous: () => void;\r\n    next: () => void;\r\n    hasNext: boolean;\r\n    noKeyboardAvoidance?: boolean;\r\n};\r\n\r\nexport type OnboardingSlideProps = {\r\n    title?: string | JSX.Element;\r\n    subtitle?: string;\r\n    handleSubmit?: (e?: React.FormEvent<HTMLFormElement> | undefined) => void;\r\n    hideNavNext?: boolean;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n} & OnboardingScreenProps &\r\n    ThemeProps;\r\n\r\nclass OnboardingSlide extends React.Component<OnboardingSlideProps> {\r\n    render(): JSX.Element {\r\n        const {\r\n            title,\r\n            subtitle,\r\n            index,\r\n            hideNavNext,\r\n            hasNext,\r\n            handleSubmit,\r\n            next,\r\n            containerStyle,\r\n            noKeyboardAvoidance,\r\n            theme,\r\n        } = this.props;\r\n        const styles = onboardingStyle(theme);\r\n\r\n        const hasPrevious = index > 0;\r\n\r\n        const navigateRight = () => {\r\n            if (handleSubmit) handleSubmit();\r\n            else if (hasNext) next();\r\n        };\r\n\r\n        const Background = getLocalSvg(\"background.onboarding\", () => this.forceUpdate());\r\n        const {width, height} = Dimensions.get(\"screen\");\r\n        return (\r\n            <ScreenWrapper>\r\n                {/*<WavyHeader style={styles.wavyHeader} color={theme.accent} />*/}\r\n                <View style={{position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0, opacity: 1, zIndex: 0}}>\r\n                    <Background\r\n                        preserveAspectRatio={\"true\"}\r\n                        viewBox={`${50} ${50} ${width * 1.25} ${height * 1.25}`}\r\n                        style={{width, height}}\r\n                    />\r\n                </View>\r\n                <ScrollView\r\n                    style={styles.slideScrollView}\r\n                    contentContainerStyle={[containerStyle, styles.slideContentWrapper]}\r\n                >\r\n                    <KeyboardAvoidingView\r\n                        behavior=\"position\"\r\n                        keyboardVerticalOffset={70}\r\n                        enabled={!noKeyboardAvoidance}\r\n                    >\r\n                        <View style={styles.header}>\r\n                            {title && typeof title === \"string\" && <Text style={styles.title}>{title}</Text>}\r\n                            {title && typeof title !== \"string\" && title}\r\n                            {subtitle && <Text style={styles.subtitle}>{subtitle}</Text>}\r\n                        </View>\r\n                        {this.props.children}\r\n                    </KeyboardAvoidingView>\r\n                </ScrollView>\r\n                <View style={styles.slideNavWrapper}>\r\n                    {hasPrevious && (\r\n                        <TouchableOpacity style={styles.navButton} onPress={() => this.props.previous()}>\r\n                            <FontAwesome style={styles.navButtonIcon} name=\"arrow-circle-left\"></FontAwesome>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                    {!hasPrevious && (\r\n                        <TouchableOpacity style={styles.navButton} onPress={() => this.quitOnboarding()}>\r\n                            <FontAwesome style={styles.navButtonIcon} name=\"arrow-circle-left\"></FontAwesome>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                    {!hideNavNext && hasNext && (\r\n                        <TouchableOpacity style={styles.navButton} onPress={navigateRight}>\r\n                            <FontAwesome style={styles.navButtonIcon} name=\"arrow-circle-right\"></FontAwesome>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                    {!hasNext && (\r\n                        <TouchableOpacity\r\n                            style={styles.navButton}\r\n                            onPress={() => {\r\n                                if (handleSubmit) handleSubmit();\r\n                                finishOnboarding(store.getState().auth.onboarding);\r\n                            }}\r\n                        >\r\n                            <Text style={styles.finishButtonText}>{i18n.t(\"onboarding.submit\")}</Text>\r\n                        </TouchableOpacity>\r\n                    )}\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n\r\n    quitOnboarding() {\r\n        Alert.alert(i18n.t(\"onboarding.quit.title\"), i18n.t(\"onboarding.quit.text\"), [\r\n            {\r\n                text: i18n.t(\"onboarding.quit.cancel\"),\r\n                style: \"cancel\",\r\n            },\r\n            {text: i18n.t(\"onboarding.quit.yes\"), onPress: () => store.dispatch(logout()), style: \"destructive\"},\r\n        ]);\r\n    }\r\n}\r\n\r\nexport default withTheme(OnboardingSlide);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport {Keyboard} from \"react-native\";\r\nimport {FormTextInput} from \"../../components/forms/FormTextInput\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {VALIDATOR_FIRSTNAME, VALIDATOR_LASTNAME} from \"../../validators\";\r\nimport {getOnboardingTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\n\r\ntype OnboardingNameFormState = {\r\n    firstname: string;\r\n    lastname: string;\r\n};\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    firstname: VALIDATOR_FIRSTNAME,\r\n    lastname: VALIDATOR_LASTNAME,\r\n});\r\n\r\ntype OnboardingNameScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\nclass OnboardingNameScreen extends React.Component<OnboardingNameScreenProps> {\r\n    lastNameInputRef = React.createRef<FormTextInput>();\r\n\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingNameScreenProps>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.firstname != next.firstname || prev.lastname != next.lastname;\r\n    }\r\n\r\n    submit(values: OnboardingNameFormState) {\r\n        Keyboard.dismiss();\r\n        this.props.dispatch(setOnboardingValues(values));\r\n        this.props.next();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, onboardingState} = this.props;\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingNameFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingNameFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingNameFormState>) => {\r\n                    const {handleSubmit, values, errors, touched, handleChange, handleBlur} = formikProps;\r\n                    const textInputProps = (field: string) => ({\r\n                        field,\r\n                        value: (values as {[key: string]: string})[field],\r\n                        error: (errors as {[key: string]: string | undefined})[field],\r\n                        touched: (touched as {[key: string]: boolean | undefined})[field],\r\n                        handleChange,\r\n                        handleBlur,\r\n                        ...getOnboardingTextInputsStyleProps(theme),\r\n                    });\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.name.title\")}\r\n                            subtitle={i18n.t(\"onboarding.name.subtitle\")}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <FormTextInput\r\n                                {...textInputProps(\"firstname\")}\r\n                                label={i18n.t(\"firstname\")}\r\n                                autoCompleteType=\"name\"\r\n                                enablesReturnKeyAutomatically={true}\r\n                                returnKeyType=\"next\"\r\n                                blurOnSubmit={false}\r\n                                onSubmitEditing={() => this.lastNameInputRef.current?.focus()}\r\n                            />\r\n\r\n                            <FormTextInput\r\n                                {...textInputProps(\"lastname\")}\r\n                                ref={this.lastNameInputRef}\r\n                                label={i18n.t(\"lastname\")}\r\n                                autoCompleteType=\"name\"\r\n                                enablesReturnKeyAutomatically={true}\r\n                                returnKeyType=\"done\"\r\n                                onSubmitEditing={() => handleSubmit()}\r\n                            />\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingNameScreen));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {Gender, GENDERS} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\n\r\n// Component props\r\nexport type GenderToggleProps = {\r\n    gender?: Gender | null;\r\n    onSelect?: (gender: Gender) => void;\r\n    disabled?: boolean;\r\n};\r\n\r\nfunction GenderToggle(props: GenderToggleProps & ThemeProps): JSX.Element {\r\n    const buttonLabels = GENDERS.map((r: string) => i18n.t(`genders.${r}`));\r\n    const {gender, disabled, theme} = props;\r\n    const styleProps = getToggleStyleProps(false, theme);\r\n\r\n    const onUpdate = (idx: number) => {\r\n        if (props.onSelect) props.onSelect(GENDERS[idx]);\r\n    };\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={onUpdate}\r\n            selectedIndex={gender !== undefined && gender !== null ? GENDERS.indexOf(gender) : -1}\r\n            buttons={buttonLabels}\r\n            disabled={disabled}\r\n            {...styleProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default withTheme(GenderToggle);\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport CountryPicker, {\r\n    Country,\r\n    CountryCode,\r\n    DARK_THEME,\r\n    DEFAULT_THEME,\r\n    TranslationLanguageCode,\r\n} from \"react-native-country-picker-modal\";\r\nimport i18n from \"i18n-js\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\n// Component props\r\nexport type NationalityPickerProps = ThemeProps & {\r\n    nationality?: CountryCode;\r\n    open?: boolean;\r\n    onSelect?: (countryCode: CountryCode) => void;\r\n    onHide?: () => void;\r\n};\r\n\r\n// Component state\r\nexport type NationalityPickerState = {\r\n    open: boolean;\r\n};\r\n\r\nclass NationalityPicker extends React.Component<NationalityPickerProps, NationalityPickerState> {\r\n    constructor(props: NationalityPickerProps) {\r\n        super(props);\r\n        this.state = {\r\n            open: props.open === undefined ? true : props.open,\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(oldProps: NationalityPickerProps) {\r\n        if (!oldProps.open && this.props.open) this.showModal();\r\n        if (oldProps.open && !this.props.open) this.hideModal();\r\n    }\r\n\r\n    showModal(): void {\r\n        if (!this.state.open) this.setState({...this.state, open: true});\r\n    }\r\n\r\n    hideModal(): void {\r\n        if (this.state.open) {\r\n            this.setState({...this.state, open: false});\r\n            if (this.props.onHide !== undefined) this.props.onHide();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const {open} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CountryPicker\r\n                countryCode={this.props.nationality || \"FR\"}\r\n                filterProps={{placeholder: i18n.t(\"search\")}}\r\n                withFlag={true}\r\n                withFilter={true}\r\n                withEmoji={false}\r\n                onSelect={(country: Country) => {\r\n                    if (this.props.onSelect) this.props.onSelect(country.cca2);\r\n                }}\r\n                onClose={() => this.hideModal()}\r\n                translation={i18n.t(\"countryPickerLanguageCode\") as TranslationLanguageCode}\r\n                visible={open}\r\n                containerButtonStyle={styles.pickerContainerButton}\r\n                theme={theme.id === \"dark\" ? DARK_THEME : DEFAULT_THEME}\r\n            ></CountryPicker>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        pickerContainerButton: {\r\n            display: \"none\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(NationalityPicker);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps, View} from \"react-native\";\r\nimport {CountryCode, Flag, TranslationLanguageCode} from \"react-native-country-picker-modal\";\r\nimport {CountryInfo, getCountryInfoAsync} from \"react-native-country-picker-modal/lib/CountryService\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type FormattedNationalityProps = {\r\n    countryCode: CountryCode;\r\n    flagSize?: number;\r\n} & TextProps;\r\n\r\n// Component state\r\nexport type FormattedNationalityState = {\r\n    countryName: string;\r\n};\r\n\r\nclass FormattedNationality extends React.Component<FormattedNationalityProps, FormattedNationalityState> {\r\n    constructor(props: FormattedNationalityProps) {\r\n        super(props);\r\n        this.state = {\r\n            countryName: \"\",\r\n        };\r\n        this.updateCountryName();\r\n    }\r\n\r\n    updateCountryName(): void {\r\n        const {countryCode} = this.props;\r\n        const translation = i18n.t(\"countryPickerLanguageCode\") as TranslationLanguageCode;\r\n        getCountryInfoAsync({countryCode, translation}).then((info: CountryInfo) => {\r\n            this.setState({countryName: info.countryName});\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps: FormattedNationalityProps): void {\r\n        if (this.props.countryCode != prevProps.countryCode) {\r\n            this.updateCountryName();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {countryCode, ...otherProps} = this.props;\r\n        const {countryName} = this.state;\r\n\r\n        const flagSize = this.props.flagSize || 20;\r\n\r\n        return (\r\n            <View style={{flexDirection: \"row\"}}>\r\n                <Flag countryCode={countryCode} flagSize={flagSize} withEmoji={false}></Flag>\r\n                <Text {...otherProps}>{countryName}</Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FormattedNationality;\r\n","import * as React from \"react\";\r\nimport {TouchableOpacity, View, StyleSheet} from \"react-native\";\r\nimport NationalityPicker from \"./NationalityPicker\";\r\nimport FormattedNationality from \"./FormattedNationality\";\r\nimport {CountryCode} from \"../model/country-codes\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\n\r\n// Component props\r\nexport type NationalityControlProps = ThemeProps & {\r\n    nationality?: CountryCode;\r\n    onSelect?: (countryCode: CountryCode) => void;\r\n    onHide?: () => void;\r\n};\r\n\r\n// Component state\r\nexport type NationalityControlState = {\r\n    open: boolean;\r\n};\r\n\r\nclass NationalityControl extends React.Component<NationalityControlProps, NationalityControlState> {\r\n    constructor(props: NationalityControlProps) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n        };\r\n    }\r\n\r\n    showModal(): void {\r\n        if (!this.state.open) this.setState({...this.state, open: true});\r\n    }\r\n\r\n    hideModal(): void {\r\n        if (this.state.open) {\r\n            this.setState({...this.state, open: false});\r\n            if (this.props.onHide) this.props.onHide();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onSelect, onHide, nationality, theme} = this.props;\r\n        const {open} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={styles.wrapper}>\r\n                <TouchableOpacity\r\n                    style={[styles.button, nationality ? styles.buttonOk : {}]}\r\n                    onPress={() => this.showModal()}\r\n                >\r\n                    {nationality && <FormattedNationality countryCode={nationality} style={styles.nationality} />}\r\n                    {/*!date && <Text>Click to change value</Text>*/}\r\n                </TouchableOpacity>\r\n                <NationalityPicker\r\n                    nationality={this.props.nationality}\r\n                    open={open}\r\n                    onSelect={(country: CountryCode) => {\r\n                        if (onSelect) onSelect(country);\r\n                    }}\r\n                    onHide={() => {\r\n                        this.hideModal();\r\n                        if (onHide) onHide();\r\n                    }}\r\n                ></NationalityPicker>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        wrapper: {\r\n            width: \"100%\",\r\n        },\r\n        button: {\r\n            width: \"100%\",\r\n            height: 60,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n            backgroundColor: \"transparent\",\r\n            justifyContent: \"center\",\r\n        },\r\n        buttonOk: {\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        nationality: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(NationalityControl);\r\n","import * as React from \"react\";\r\nimport {View, ViewProps, TouchableOpacity, Text, StyleSheet, Platform, LayoutChangeEvent} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {pickerStyles} from \"../styles/picker\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport SectionedMultiSelect from \"react-native-sectioned-multi-select\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {styleTextLight, webFontFamily} from \"../styles/general\";\r\nimport Chips from \"./Chips\";\r\n\r\ntype PickerItem = {\r\n    id: string;\r\n    label: string;\r\n};\r\n\r\ntype PickerItemSection = {\r\n    id: string;\r\n    label: string;\r\n    children: PickerItem[];\r\n};\r\n\r\ntype SectionDescriptor = {id: string; items: string[]};\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    locale: state.settings.userSettings.locale,\r\n}));\r\n\r\n// Component props\r\nexport type SectionedMultiPickerProps = ConnectedProps<typeof reduxConnector> & {\r\n    values: SectionDescriptor[];\r\n    genLabel?: (value: string) => string;\r\n    genSectionLabel?: (id: string) => string;\r\n    onChange?: (values: string[]) => void;\r\n    selected?: string[];\r\n    searchablePlaceholder?: string;\r\n    showChips?: boolean;\r\n} & ViewProps &\r\n    ThemeProps;\r\n\r\n// Component state\r\nexport type SectionedMultiPickerState = {\r\n    items: Map<SupportedLocale, PickerItemSection[]>;\r\n    open: boolean;\r\n    tempSelected: string[];\r\n    width: number;\r\n};\r\n\r\nclass SectionedMultiPicker extends React.Component<SectionedMultiPickerProps, SectionedMultiPickerState> {\r\n    static defaultProps = {\r\n        items: [],\r\n        showSelected: true,\r\n        selected: [],\r\n    };\r\n\r\n    selectRef: React.RefObject<SectionedMultiSelect<PickerItem>>;\r\n\r\n    constructor(props: SectionedMultiPickerProps) {\r\n        super(props);\r\n        this.selectRef = React.createRef<SectionedMultiSelect<PickerItem>>();\r\n        this.state = {\r\n            items: new Map(),\r\n            open: false,\r\n            tempSelected: props.selected || [],\r\n            width: 0,\r\n        };\r\n    }\r\n\r\n    updateItems() {\r\n        const locale = this.props.locale;\r\n        if (!this.state.items.has(locale) || this.state.items.get(locale)?.length != this.props.values.length) {\r\n            const items = new Map(this.state.items);\r\n            items.set(\r\n                locale,\r\n                this.props.values.map((section: SectionDescriptor) => ({\r\n                    id: section.id,\r\n                    label: this.props.genSectionLabel ? i18n.t(this.props.genSectionLabel(section.id)) : section.id,\r\n                    children: section.items.map((value: string) => ({\r\n                        id: value,\r\n                        label: this.props.genLabel ? i18n.t(this.props.genLabel(value)) : value,\r\n                    })),\r\n                })),\r\n            );\r\n            this.setState({...this.state, items});\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateItems();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: SectionedMultiPickerProps) {\r\n        if (oldProps.locale != this.props.locale || oldProps.values.length != this.props.values.length) {\r\n            this.updateItems();\r\n        }\r\n    }\r\n\r\n    open() {\r\n        if (this.selectRef.current) this.selectRef.current._toggleSelector();\r\n        this.setState({...this.state, open: true, tempSelected: this.props.selected || this.state.tempSelected});\r\n    }\r\n\r\n    close(apply: boolean) {\r\n        if (this.state.open && this.selectRef.current) this.selectRef.current._toggleSelector();\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n            tempSelected: apply ? this.state.tempSelected : this.props.selected || [],\r\n        });\r\n        if (apply) this.apply(this.state.tempSelected);\r\n    }\r\n\r\n    apply(items: string[]) {\r\n        if (this.props.onChange) this.props.onChange(items);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            theme,\r\n            locale,\r\n            selected,\r\n            genLabel,\r\n            searchablePlaceholder,\r\n            showChips,\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            onChange,\r\n            ...viewProps\r\n        } = this.props;\r\n        const {tempSelected, width} = this.state;\r\n        const styles = pickerStyles(theme);\r\n        const multiSelectStyles = sectionedMultiSelectStyles(theme);\r\n        const miscStyles = themedStyles(theme);\r\n\r\n        const selectedItems = selected || [];\r\n\r\n        const select = this.state.items.get(locale) ? (\r\n            <SectionedMultiSelect\r\n                ref={this.selectRef}\r\n                items={this.state.items.get(locale)}\r\n                onSelectedItemsChange={(items) =>\r\n                    this.setState({...this.state, tempSelected: (items as unknown) as string[]})\r\n                }\r\n                selectedItems={tempSelected}\r\n                uniqueKey=\"id\"\r\n                displayKey=\"label\"\r\n                subKey=\"children\"\r\n                // Listeners\r\n                onCancel={() => this.close(false)}\r\n                onConfirm={() => this.close(true)}\r\n                // Dirty work-arounds to get the typing to work. This is due to a mistake in react-native-sectioned-multi-select\r\n                IconRenderer={(MaterialIcons as unknown) as JSX.Element}\r\n                icons={undefined as never}\r\n                // Customization\r\n                showDropDowns={true}\r\n                readOnlyHeadings={true}\r\n                showChips={false}\r\n                showCancelButton={true}\r\n                selectedIconOnLeft={true}\r\n                animateDropDowns={false}\r\n                hideSelect={true}\r\n                noResultsComponent={<Text style={miscStyles.noResultsText}>{i18n.t(\"noResultsFound\")}</Text>}\r\n                searchIconComponent={<MaterialIcons name=\"search\" style={miscStyles.searchIcon} />}\r\n                // Localization\r\n                confirmText={i18n.t(\"apply\")}\r\n                searchPlaceholderText={searchablePlaceholder}\r\n                // Styling\r\n                colors={{\r\n                    primary: theme.accent,\r\n                    cancel: theme.error,\r\n                    success: theme.okay,\r\n                    text: theme.text,\r\n                    subText: theme.textLight,\r\n                    searchPlaceholderTextColor: theme.textLight,\r\n                    selectToggleTextColor: theme.error,\r\n                    itemBackground: theme.cardBackground,\r\n                    subItemBackground: theme.cardBackground,\r\n                }}\r\n                confirmFontFamily={webFontFamily}\r\n                itemFontFamily={webFontFamily}\r\n                searchTextFontFamily={webFontFamily}\r\n                subItemFontFamily={webFontFamily}\r\n                styles={{\r\n                    ...multiSelectStyles,\r\n                    ...(Platform.OS === \"web\"\r\n                        ? {\r\n                              modalWrapper: {width},\r\n                              container: [multiSelectStyles.container, {width}],\r\n                          }\r\n                        : {}),\r\n                }}\r\n            />\r\n        ) : (\r\n            <></>\r\n        );\r\n\r\n        return (\r\n            <View\r\n                {...viewProps}\r\n                style={{position: \"relative\"}}\r\n                onLayout={(e: LayoutChangeEvent) => this.setState({...this.state, width: e.nativeEvent.layout.width})}\r\n            >\r\n                <View>\r\n                    <TouchableOpacity onPress={() => this.open()} style={styles.openButton}>\r\n                        <Text style={styles.openButtonText}>\r\n                            {i18n.t(\"picker.callToAction\").replace(\"%d\", selectedItems.length.toString())}\r\n                        </Text>\r\n                    </TouchableOpacity>\r\n                    {showChips && (\r\n                        <Chips\r\n                            items={selectedItems}\r\n                            label={(v) => (genLabel ? i18n.t(genLabel(v)) : v)}\r\n                            containerStyle={styles.chipContainer}\r\n                            removable={true}\r\n                            onRemove={(item: string) => {\r\n                                const selected = this.state.tempSelected.filter((v) => v !== item);\r\n                                this.setState({...this.state, tempSelected: selected});\r\n                                this.apply(selected);\r\n                            }}\r\n                        />\r\n                    )}\r\n                </View>\r\n                {(Platform.OS === \"android\" || Platform.OS === \"ios\") && <View>{select}</View>}\r\n                {Platform.OS === \"web\" && this.state.open && select}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        noResultsText: {\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n            fontSize: 16,\r\n            marginVertical: 20,\r\n        },\r\n        searchIcon: {\r\n            fontSize: 26,\r\n            marginHorizontal: 10,\r\n            color: theme.textLight,\r\n        },\r\n    });\r\n});\r\n\r\nconst sectionedMultiSelectStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            backgroundColor: theme.cardBackground,\r\n            ...(Platform.OS === \"web\"\r\n                ? {\r\n                      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                      position: \"fixed\" as any,\r\n                      top: 50,\r\n                      bottom: 50,\r\n                      alignSelf: \"center\",\r\n                      borderWidth: 0,\r\n                      maxWidth: 700,\r\n                      maxHeight: 600,\r\n                      boxShadow: \"0px 0px 8px 0px rgba(0,0,0,0.1)\",\r\n                  }\r\n                : {}),\r\n        },\r\n        scrollView: {paddingVertical: 10, ...(Platform.OS === \"web\" ? {overflowY: \"auto\"} : {})},\r\n        searchBar: {backgroundColor: theme.background},\r\n        searchTextInput: {color: theme.text},\r\n        toggleIcon: {backgroundColor: theme.cardBackground},\r\n        subItem: {\r\n            borderRadius: 4,\r\n            marginVertical: 2,\r\n        },\r\n        selectedItem: {backgroundColor: theme.background},\r\n        itemText: {\r\n            ...styleTextLight,\r\n            letterSpacing: 1.5,\r\n            fontSize: 14,\r\n            lineHeight: 18,\r\n            textTransform: \"uppercase\",\r\n        },\r\n        subItemText: {\r\n            marginLeft: 5,\r\n        },\r\n        separator: {marginVertical: 8},\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(SectionedMultiPicker));\r\n","/**\r\n * University education fields as specified by the International Standard Classification of Education (ISCED), 2013.\r\n * @see {@link https://ec.europa.eu/eurostat/statistics-explained/index.php/International_Standard_Classification_of_Education_(ISCED)}\r\n * See translations for the actual display name of each field.\r\n */\r\n\r\nexport enum EducationFieldCategory {\r\n    GPQ = \"generic-programmes-qualifications\",\r\n    EDU = \"education\",\r\n    AH = \"arts-humanities\",\r\n    SSJI = \"social-sciences-journalism-information\",\r\n    BAL = \"business-administration-law\",\r\n    NSMS = \"natural-sciences-mathematics-statistics\",\r\n    ICT = \"information-communication-technologies\",\r\n    EMC = \"engineering-manufacturing-construction\",\r\n    AFFV = \"agriculture-forestry-fisheries-veterinary\",\r\n    HW = \"health-welfare\",\r\n    SER = \"services\",\r\n}\r\n\r\nexport const EDUCATION_FIELD_CATEGORIES = Object.values(EducationFieldCategory) as EducationFieldCategory[];\r\n\r\nexport enum EducationFieldSubCategory {\r\n    \"basic-programmes-qualifications\",\r\n    \"literacy-numeracy\",\r\n    \"personal-skills-development\",\r\n    \"education\",\r\n    \"arts\",\r\n    \"humanities\",\r\n    \"languages\",\r\n    \"social-behavioural-sciences\",\r\n    \"journalism-information\",\r\n    \"business-administration\",\r\n    \"law\",\r\n    \"biological-related-sciences\",\r\n    \"environment\",\r\n    \"physical-sciences\",\r\n    \"mathematics-statistics\",\r\n    \"information-communication-technologies\",\r\n    \"engineering-engineering-trades\",\r\n    \"manufacturing-processing\",\r\n    \"architecture-construction\",\r\n    \"agriculture\",\r\n    \"forestry\",\r\n    \"fisheries\",\r\n    \"veterinary\",\r\n    \"health\",\r\n    \"personal-services\",\r\n    \"hygiene-occupational-health-services\",\r\n    \"security-services\",\r\n    \"transport-services\",\r\n}\r\n\r\nexport type EducationField = {\r\n    id: string;\r\n    category: EducationFieldCategory;\r\n    subCategory: EducationFieldSubCategory;\r\n};\r\n\r\nexport const EDUCATION_FIELDS: EducationField[] = [\r\n    {\r\n        id: \"basic-programmes-qualifications\",\r\n        category: EducationFieldCategory.GPQ,\r\n        subCategory: EducationFieldSubCategory[\"basic-programmes-qualifications\"],\r\n    },\r\n    {\r\n        id: \"literacy-numeracy\",\r\n        category: EducationFieldCategory.GPQ,\r\n        subCategory: EducationFieldSubCategory[\"literacy-numeracy\"],\r\n    },\r\n    {\r\n        id: \"personal-skills-development\",\r\n        category: EducationFieldCategory.GPQ,\r\n        subCategory: EducationFieldSubCategory[\"personal-skills-development\"],\r\n    },\r\n    {\r\n        id: \"education-science\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"training-for-pre-school-teachers\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"teacher-training-without-subject-specialisation\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"teacher-training-with-subject-specialisation\",\r\n        category: EducationFieldCategory.EDU,\r\n        subCategory: EducationFieldSubCategory[\"education\"],\r\n    },\r\n    {\r\n        id: \"audio-visual-techniques-media-production\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"fashion-interior-industrial-design\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"fine-arts\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"handicrafts\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"music-performing-arts\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"arts\"],\r\n    },\r\n    {\r\n        id: \"religion-theology\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"humanities\"],\r\n    },\r\n    {\r\n        id: \"history-archaeology\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"humanities\"],\r\n    },\r\n    {\r\n        id: \"philosophy-ethics\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"humanities\"],\r\n    },\r\n    {\r\n        id: \"language-acquisition\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"languages\"],\r\n    },\r\n    {\r\n        id: \"literature-linguistics\",\r\n        category: EducationFieldCategory.AH,\r\n        subCategory: EducationFieldSubCategory[\"languages\"],\r\n    },\r\n    {\r\n        id: \"economics\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"political-sciences-civics\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"psychology\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"sociology-cultural-studies\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"social-behavioural-sciences\"],\r\n    },\r\n    {\r\n        id: \"journalism-reporting\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"journalism-information\"],\r\n    },\r\n    {\r\n        id: \"library-information-archival-studies\",\r\n        category: EducationFieldCategory.SSJI,\r\n        subCategory: EducationFieldSubCategory[\"journalism-information\"],\r\n    },\r\n    {\r\n        id: \"accounting-taxation\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"finance-banking-insurance\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"management-administration\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"marketing-advertising\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"secretarial-office-work\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"wholesale-retail-sales\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"work-skills\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"business-administration\"],\r\n    },\r\n    {\r\n        id: \"law\",\r\n        category: EducationFieldCategory.BAL,\r\n        subCategory: EducationFieldSubCategory[\"law\"],\r\n    },\r\n    {\r\n        id: \"biology\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"biological-related-sciences\"],\r\n    },\r\n    {\r\n        id: \"biochemistry\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"biological-related-sciences\"],\r\n    },\r\n    {\r\n        id: \"environmental-sciences\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"environment\"],\r\n    },\r\n    {\r\n        id: \"natural-environments-wildlife\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"environment\"],\r\n    },\r\n    {\r\n        id: \"chemistry\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"physical-sciences\"],\r\n    },\r\n    {\r\n        id: \"earth-sciences\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"physical-sciences\"],\r\n    },\r\n    {\r\n        id: \"physics\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"physical-sciences\"],\r\n    },\r\n    {\r\n        id: \"mathematics\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"mathematics-statistics\"],\r\n    },\r\n    {\r\n        id: \"statistics\",\r\n        category: EducationFieldCategory.NSMS,\r\n        subCategory: EducationFieldSubCategory[\"mathematics-statistics\"],\r\n    },\r\n    {\r\n        id: \"computer-use\",\r\n        category: EducationFieldCategory.ICT,\r\n        subCategory: EducationFieldSubCategory[\"information-communication-technologies\"],\r\n    },\r\n    {\r\n        id: \"database-network-design-administration\",\r\n        category: EducationFieldCategory.ICT,\r\n        subCategory: EducationFieldSubCategory[\"information-communication-technologies\"],\r\n    },\r\n    {\r\n        id: \"software-applications-development-analysis\",\r\n        category: EducationFieldCategory.ICT,\r\n        subCategory: EducationFieldSubCategory[\"information-communication-technologies\"],\r\n    },\r\n    {\r\n        id: \"chemical-engineering-processes\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"environmental-protection-technology\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"electricity-energy\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"electronics-automation\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"mechanics-metal-trades\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"motor-vehicles-ships-aircraft\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"engineering-engineering-trades\"],\r\n    },\r\n    {\r\n        id: \"food-processing\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"materials\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"textiles\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"mining-extraction\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"manufacturing-processing\"],\r\n    },\r\n    {\r\n        id: \"architecture-town-planning\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"architecture-construction\"],\r\n    },\r\n    {\r\n        id: \"building-civil-engineering\",\r\n        category: EducationFieldCategory.EMC,\r\n        subCategory: EducationFieldSubCategory[\"architecture-construction\"],\r\n    },\r\n    {\r\n        id: \"crop-livestock-production\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"agriculture\"],\r\n    },\r\n    {\r\n        id: \"horticulture\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"agriculture\"],\r\n    },\r\n    {\r\n        id: \"forestry\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"forestry\"],\r\n    },\r\n    {\r\n        id: \"fisheries\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"fisheries\"],\r\n    },\r\n    {\r\n        id: \"veterinary\",\r\n        category: EducationFieldCategory.AFFV,\r\n        subCategory: EducationFieldSubCategory[\"veterinary\"],\r\n    },\r\n    {\r\n        id: \"dental-studies\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"medicine\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"nursing-midwifery\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"medical-diagnostic-treatment-technology\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"therapy-rehabilitation\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"pharmacy\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"traditional-complementary-medicine-therapy\",\r\n        category: EducationFieldCategory.HW,\r\n        subCategory: EducationFieldSubCategory[\"health\"],\r\n    },\r\n    {\r\n        id: \"domestic-services\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"hair-beauty-services\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"hotel-restaurants-catering\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"sports\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"travel-tourism-leisure\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"personal-services\"],\r\n    },\r\n    {\r\n        id: \"community-sanitation\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"hygiene-occupational-health-services\"],\r\n    },\r\n    {\r\n        id: \"occupational-health-safety\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"hygiene-occupational-health-services\"],\r\n    },\r\n    {\r\n        id: \"military-defence\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"security-services\"],\r\n    },\r\n    {\r\n        id: \"protection-of-persons-property\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"security-services\"],\r\n    },\r\n    {\r\n        id: \"transport-services\",\r\n        category: EducationFieldCategory.SER,\r\n        subCategory: EducationFieldSubCategory[\"transport-services\"],\r\n    },\r\n];\r\n\r\n/*const organized: Map<EducationFieldCategory, string[]> = new Map();\r\nEDUCATION_FIELD_CATEGORIES.forEach((cat: EducationFieldCategory) => organized.set(cat, []));\r\nEDUCATION_FIELDS.forEach((f) => organized.get(f.category)?.push(f.id));\r\n\r\nexport const EDUCATION_FIELDS_ORGANIZED = organized;*/\r\n\r\n// Pre-process the education fields to pass as the \"items\" prop of dropdowns\r\nconst sectioned: {[key: string]: {id: string; items: string[]}} = {};\r\nEDUCATION_FIELD_CATEGORIES.forEach((id: EducationFieldCategory) => (sectioned[id] = {id, items: []}));\r\nEDUCATION_FIELDS.forEach((f) => sectioned[f.category].items.push(f.id));\r\n\r\nexport const EDUCATION_FIELDS_SECTIONED = Object.values(sectioned);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport SectionedMultiPicker, {SectionedMultiPickerProps} from \"./SectionedMultiPicker\";\r\nimport {EDUCATION_FIELDS_SECTIONED} from \"../model/education-fields\";\r\n\r\n// Component props\r\nexport type EducationFieldPickerProps = {\r\n    fields?: string[];\r\n    onChange?: (fields: string[]) => void;\r\n} & Partial<SectionedMultiPickerProps>;\r\n\r\nclass EducationFieldPicker extends React.Component<EducationFieldPickerProps> {\r\n    render(): JSX.Element {\r\n        const {fields, onChange, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <SectionedMultiPicker\r\n                values={EDUCATION_FIELDS_SECTIONED}\r\n                genLabel={(field: string) => `educationFields.${field}`}\r\n                genSectionLabel={(section: string) => `educationFieldCategories.${section}`}\r\n                selected={fields}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                searchablePlaceholder={i18n.t(\"educationFieldsPicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default EducationFieldPicker;\r\n","import * as React from \"react\";\r\n\r\nimport {Text, TextProps} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type FormattedDateProps = {\r\n    date?: Date;\r\n} & TextProps;\r\n\r\nexport function FormattedDate(props: FormattedDateProps): JSX.Element {\r\n    const {date, ...otherProps} = props;\r\n\r\n    if (date) {\r\n        const localizedMonth = i18n.t(`months.${date.getMonth()}`);\r\n        //const day = ((date.getDate() + \"\").length == 1 ? \"0\" : \"\") + date.getDate();\r\n        const day = date.getDate() + \"\";\r\n        const formattedDate = `${day} ${localizedMonth} ${date.getFullYear()}`;\r\n\r\n        return <Text {...otherProps}>{formattedDate}</Text>;\r\n    } else return <></>;\r\n}\r\n","import * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {TextInput, TextInputProps, View, StyleSheet, StyleProp, TextStyle, ViewStyle} from \"react-native\";\r\nimport {preTheme} from \"../styles/utils\";\r\n\r\n// Component props\r\nexport type DateInputProps = {\r\n    date?: Date;\r\n    onChange?: (date?: Date, error?: string) => void;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    inputStyle?: StyleProp<TextStyle>;\r\n    inputStyleValid?: StyleProp<TextStyle>;\r\n    minimumDate?: Date;\r\n    maximumDate?: Date;\r\n    autoFocus?: boolean;\r\n} & ThemeProps;\r\n\r\n// Component state\r\ntype DateInputState = {\r\n    year: string;\r\n    month: string;\r\n    day: string;\r\n    touched: boolean;\r\n    error: string | undefined;\r\n};\r\n\r\nconst dateInputProps = (\r\n    ref: React.RefObject<TextInput>,\r\n    value: string,\r\n    maxLength: number,\r\n    next?: React.RefObject<TextInput>,\r\n    onChange?: (v: string) => void,\r\n): TextInputProps => ({\r\n    autoCorrect: false,\r\n    clearTextOnFocus: true,\r\n    keyboardType: \"number-pad\",\r\n    returnKeyType: next ? \"next\" : \"done\",\r\n    value,\r\n    maxLength,\r\n    onSubmitEditing: () => {\r\n        if (next) next.current?.focus();\r\n    },\r\n    onChangeText: (text: string) => {\r\n        text = text.replace(/\\D+/g, \"\"); // only keep numbers\r\n        if (onChange) onChange(text);\r\n        if (text.length == maxLength) {\r\n            if (next) next.current?.focus();\r\n            else ref.current?.blur();\r\n        }\r\n    },\r\n});\r\n\r\nexport class DateInputClass extends React.Component<DateInputProps, DateInputState> {\r\n    constructor(props: DateInputProps) {\r\n        super(props);\r\n        this.state = this.deriveStateFromDate(props.date);\r\n    }\r\n\r\n    input1Ref = React.createRef<TextInput>();\r\n    input2Ref = React.createRef<TextInput>();\r\n    input3Ref = React.createRef<TextInput>();\r\n\r\n    componentDidUpdate(oldProps: DateInputProps): void {\r\n        if (this.props.date != oldProps.date) {\r\n            this.setState({...this.state, ...this.deriveStateFromDate(this.props.date)});\r\n        }\r\n    }\r\n\r\n    focus(): void {\r\n        this.input1Ref.current?.focus();\r\n    }\r\n\r\n    private validDate(): {date?: Date; error?: string} {\r\n        const {year, month, day} = this.state;\r\n        const parsable = year.length >= 4 && month.length > 0 && day.length > 0;\r\n\r\n        if (parsable) {\r\n            try {\r\n                const pyear = parseInt(year);\r\n                const pmonth = parseInt(month) - 1;\r\n                const pday = parseInt(day);\r\n                // Verify that all individual parts of the date are correct.\r\n                if (pyear > 0 && pmonth >= 0 && pmonth < 12 && pday > 0 && pday <= 31) {\r\n                    const date = new Date(pyear, pmonth, pday);\r\n                    const error = this.getError(date);\r\n                    if (error) return {error};\r\n                    else return {date};\r\n                }\r\n            } catch (e) {}\r\n            return {error: \"validation.date.invalid\"};\r\n        } else if (this.state.touched) return {error: \"validation.date.invalid\"};\r\n\r\n        // If one of the fields is empty, we only output an error if the input was touched\r\n        // i.e. it was completed before\r\n        return {};\r\n    }\r\n\r\n    private getError(date: Date): string | undefined {\r\n        const {minimumDate, maximumDate} = this.props;\r\n        if (maximumDate && date > maximumDate) return \"validation.date.tooYoung\";\r\n        else if (minimumDate && date < minimumDate) return \"validation.date.invalid\";\r\n        else return undefined;\r\n    }\r\n\r\n    deriveStateFromDate(date?: Date): DateInputState {\r\n        const year = date?.getFullYear();\r\n        const month = date?.getMonth();\r\n        const day = date?.getDate();\r\n\r\n        return {\r\n            year: year === undefined ? \"\" : year + \"\",\r\n            month: month === undefined ? \"\" : month + 1 + \"\",\r\n            day: day === undefined ? \"\" : day + \"\",\r\n            touched: date !== undefined,\r\n            error: date ? this.getError(date) : undefined,\r\n        };\r\n    }\r\n\r\n    set(values: Partial<DateInputState>): void {\r\n        const {onChange} = this.props;\r\n        this.setState({...this.state, ...values}, () => {\r\n            if (onChange) {\r\n                const {date, error} = this.validDate();\r\n                if (date || error) {\r\n                    onChange(date, error);\r\n                    this.setState({...this.state, touched: true, error});\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {inputStyle, containerStyle, autoFocus, theme} = this.props;\r\n        const {year, month, day, touched, error} = this.state;\r\n        const styles = themedStyles(theme);\r\n        const valid = touched && !error;\r\n        const inputStyleValid = valid ? this.props.inputStyleValid : {};\r\n\r\n        return (\r\n            <View style={[styles.container, containerStyle]}>\r\n                <TextInput\r\n                    {...dateInputProps(this.input1Ref, day, 2, this.input2Ref, (day) => this.set({day}))}\r\n                    ref={this.input1Ref}\r\n                    style={[styles.input, styles.inputDay, inputStyle, inputStyleValid]}\r\n                    blurOnSubmit={false}\r\n                    returnKeyType=\"next\"\r\n                    placeholder={\"Day\"}\r\n                    autoFocus={autoFocus}\r\n                />\r\n                <TextInput\r\n                    {...dateInputProps(this.input2Ref, month, 2, this.input3Ref, (month) => this.set({month}))}\r\n                    ref={this.input2Ref}\r\n                    style={[styles.input, styles.inputMonth, inputStyle, inputStyleValid]}\r\n                    blurOnSubmit={false}\r\n                    onSubmitEditing={() => this.input3Ref.current?.focus()}\r\n                    returnKeyType=\"next\"\r\n                    placeholder={\"Month\"}\r\n                />\r\n                <TextInput\r\n                    {...dateInputProps(this.input3Ref, year, 4, undefined, (year) => this.set({year}))}\r\n                    ref={this.input3Ref}\r\n                    style={[styles.input, styles.inputYear, inputStyle, inputStyleValid]}\r\n                    returnKeyType=\"done\"\r\n                    placeholder={\"Year\"}\r\n                />\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n        },\r\n        input: {\r\n            borderWidth: 1,\r\n            borderColor: theme.componentBorder,\r\n            paddingHorizontal: 6,\r\n        },\r\n        inputDay: {flex: 1},\r\n        inputMonth: {flex: 1, marginLeft: 10},\r\n        inputYear: {flex: 2, marginLeft: 10},\r\n    });\r\n});\r\n\r\nexport default withTheme(DateInputClass);\r\n","import * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {MIN_AGE} from \"../constants/profile-constants\";\r\nimport DateInput, {DateInputClass, DateInputProps} from \"./DateInput\";\r\n\r\n// Component props\r\nexport type BirthDateInputProps = Omit<Omit<DateInputProps, \"minimumDate\">, \"maximumDate\">;\r\n\r\nconst minDate = new Date(1920, 0, 0);\r\nconst maxDate = new Date(Date.now());\r\nmaxDate.setFullYear(maxDate.getFullYear() - MIN_AGE);\r\n\r\nexport class BirthDateInputClass extends React.Component<BirthDateInputProps> {\r\n    dateInputRef = React.createRef<DateInputClass>();\r\n\r\n    focus(): void {\r\n        this.dateInputRef.current?.focus();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const dateInputProps = this.props;\r\n        return <DateInput ref={this.dateInputRef} minimumDate={minDate} maximumDate={maxDate} {...dateInputProps} />;\r\n    }\r\n}\r\n\r\nexport default withTheme(BirthDateInputClass);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {\r\n    VALIDATOR_ONBOARDING_BIRTHDATE,\r\n    VALIDATOR_ONBOARDING_GENDER,\r\n    VALIDATOR_ONBOARDING_NATIONALITY,\r\n} from \"../../validators\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport {Gender} from \"../../constants/profile-constants\";\r\nimport GenderToggle from \"../../components/GenderToggle\";\r\nimport NationalityControl from \"../../components/NationalityControl\";\r\nimport {CountryCode} from \"../../model/country-codes\";\r\nimport EducationFieldPicker from \"../../components/EducationFieldPicker\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport {FormattedDate} from \"../../components/FormattedDate\";\r\nimport BirthDateInput from \"../../components/BirthDateInput\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    birthdate: VALIDATOR_ONBOARDING_BIRTHDATE,\r\n    gender: VALIDATOR_ONBOARDING_GENDER,\r\n    nationality: VALIDATOR_ONBOARDING_NATIONALITY,\r\n});\r\n\r\ntype OnboardingPersonalInfoScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\ntype OnboardingPersonalInfoFormState = {\r\n    birthdate: Date | null;\r\n    gender: Gender | null;\r\n    nationality: CountryCode | null;\r\n    educationFields: string[];\r\n};\r\n\r\nclass OnboardingPersonalInfoScreen extends React.Component<OnboardingPersonalInfoScreenProps> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingPersonalInfoScreenProps>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return (\r\n            prev.birthdate != next.birthdate ||\r\n            prev.gender != next.gender ||\r\n            prev.nationality != next.nationality ||\r\n            prev.educationFields != next.educationFields\r\n        );\r\n    }\r\n\r\n    submit(values: OnboardingPersonalInfoFormState) {\r\n        if (values.birthdate && values.gender && values.nationality) {\r\n            this.props.next();\r\n            this.props.dispatch(\r\n                setOnboardingValues({\r\n                    birthdate: values.birthdate,\r\n                    gender: values.gender,\r\n                    nationality: values.nationality,\r\n                }),\r\n            );\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, theme} = this.props;\r\n\r\n        const spacing = 30;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingPersonalInfoFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingPersonalInfoFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingPersonalInfoFormState>) => {\r\n                    const {\r\n                        handleSubmit,\r\n                        values,\r\n                        errors,\r\n                        touched,\r\n                        setFieldValue,\r\n                        setFieldError,\r\n                        setFieldTouched,\r\n                    } = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.personalInfo.title\")}\r\n                            handleSubmit={handleSubmit}\r\n                            noKeyboardAvoidance={true}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel>{i18n.t(\"dateOfBirth\")}</InputLabel>\r\n                            <BirthDateInput\r\n                                inputStyle={styles.dateTextInput}\r\n                                inputStyleValid={styles.dateTextInputValid}\r\n                                onChange={(date, error) => {\r\n                                    if (error) setFieldError(\"birthdate\", error);\r\n                                    else setFieldValue(\"birthdate\", date);\r\n                                    setFieldTouched(\"birthdate\", true);\r\n                                }}\r\n                            />\r\n                            {values.birthdate && !errors.birthdate && (\r\n                                <FormattedDate style={styles.birthdateText} date={values.birthdate} />\r\n                            )}\r\n                            {touched.birthdate && <InputErrorText error={errors.birthdate}></InputErrorText>}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"nationality\")}</InputLabel>\r\n                            <NationalityControl\r\n                                nationality={values.nationality || undefined}\r\n                                onSelect={(nationality: CountryCode) => setFieldValue(\"nationality\", nationality)}\r\n                            />\r\n                            {touched.nationality && <InputErrorText error={errors.nationality}></InputErrorText>}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"gender\")}</InputLabel>\r\n                            <GenderToggle\r\n                                gender={values.gender}\r\n                                onSelect={(gender: Gender) => setFieldValue(\"gender\", gender)}\r\n                            />\r\n                            {touched.gender && <InputErrorText error={errors.gender}></InputErrorText>}\r\n\r\n                            <InputLabel style={{marginTop: spacing}}>{i18n.t(\"fieldsOfEducation\")}</InputLabel>\r\n                            <EducationFieldPicker\r\n                                fields={values.educationFields}\r\n                                onChange={(fields: string[]) => setFieldValue(\"educationFields\", fields)}\r\n                                showChips={true}\r\n                            />\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        dateTextInput: {\r\n            height: 44,\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            borderBottomWidth: 1,\r\n            borderBottomColor: theme.accentTernary,\r\n            backgroundColor: \"transparent\",\r\n            fontSize: 18,\r\n            color: theme.text,\r\n        },\r\n        dateTextInputValid: {\r\n            borderBottomColor: theme.okay,\r\n        },\r\n        birthdateText: {\r\n            textAlign: \"right\",\r\n            marginTop: 4,\r\n            fontSize: 12,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(OnboardingPersonalInfoScreen));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {StyleProp, StyleSheet, ViewStyle} from \"react-native\";\r\nimport {LanguageLevel, LANGUAGE_LEVELS} from \"../constants/profile-constants\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport PopUpSelector from \"./PopUpSelector\";\r\n\r\n// Component props\r\nexport type LanguageLevelPickerProps = {\r\n    level?: LanguageLevel;\r\n    onChange?: (level: LanguageLevel) => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n} & ThemeProps;\r\n\r\nclass LanguageLevelPicker extends React.Component<LanguageLevelPickerProps> {\r\n    render(): JSX.Element {\r\n        const {onChange, level, theme, buttonStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <PopUpSelector\r\n                values={LANGUAGE_LEVELS}\r\n                label={(l: string) => i18n.t(`languageLevels.${l}`)}\r\n                selected={level ? [level] : []}\r\n                valueStyle={styles.value}\r\n                buttonStyle={[styles.button, buttonStyle]}\r\n                onSelect={(values: string[]) => {\r\n                    if (values.length > 0 && onChange) onChange(values[0] as LanguageLevel);\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            width: 75,\r\n            height: 40,\r\n            alignItems: \"center\",\r\n        },\r\n        value: {\r\n            letterSpacing: 0.5,\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(LanguageLevelPicker);\r\n","import * as React from \"react\";\r\nimport {View, StyleSheet, ViewStyle, Text, Alert} from \"react-native\";\r\nimport LanguagePicker from \"./LanguagePicker\";\r\nimport LanguageLevelPicker from \"./LanguageLevelPicker\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {LanguageLevel} from \"../constants/profile-constants\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {SpokenLanguageDto} from \"../api/dto\";\r\nimport {MAX_SPOKEN_LANGUAGES} from \"../constants/config\";\r\nimport i18n from \"i18n-js\";\r\n\r\n// Component props\r\nexport type SpokenLanguagesInputProps = ThemeProps & {\r\n    languages: SpokenLanguageDto[];\r\n    onChange?: (languages: SpokenLanguageDto[], hasErrors: boolean) => void;\r\n    style?: ViewStyle;\r\n};\r\n\r\n// Component state\r\nexport type SpokenLanguagesInputState = {\r\n    languages: Partial<SpokenLanguageDto>[];\r\n};\r\n\r\nclass SpokenLanguagesInput extends React.Component<SpokenLanguagesInputProps, SpokenLanguagesInputState> {\r\n    constructor(props: SpokenLanguagesInputProps) {\r\n        super(props);\r\n        const languages = props.languages || [];\r\n        this.state = {languages};\r\n    }\r\n\r\n    onChange(languages: Partial<SpokenLanguageDto>[]) {\r\n        this.setState({...this.state, languages});\r\n        const hasErrors = languages.filter((l) => !l.level).length > 0;\r\n\r\n        if (this.props.onChange) {\r\n            this.props.onChange(\r\n                languages\r\n                    .filter((l: Partial<SpokenLanguageDto>) => l.code && l.level)\r\n                    .map((l: Partial<SpokenLanguageDto>) => l as SpokenLanguageDto),\r\n                hasErrors,\r\n            );\r\n        }\r\n    }\r\n\r\n    removeRow(idx: number) {\r\n        if (idx >= 0 && idx < this.state.languages.length)\r\n            this.onChange(this.state.languages.filter((v, i) => i !== idx));\r\n    }\r\n\r\n    setLanguages(codes: string[]) {\r\n        const levelDict = new Map(this.state.languages.map((l) => [l.code, l.level]));\r\n        const languages = codes.map((code: string) => ({code, level: levelDict.get(code)}));\r\n        this.onChange(languages);\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            languages,\r\n        });\r\n    }\r\n\r\n    setLanguageLevel(idx: number, level: LanguageLevel) {\r\n        const languages = this.state.languages.map((l, i) => (i === idx ? {...l, level} : l));\r\n        this.onChange(languages);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, style} = this.props;\r\n        const {languages} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const rows = languages.map((sl: Partial<SpokenLanguageDto>, i: number) => {\r\n            return (\r\n                <View key={`spoken-languages-input-${sl.code}`} style={styles.rowContainer}>\r\n                    <Text style={styles.languageLabel}>{i18n.t(`languageNames.${sl.code}`)}</Text>\r\n                    <LanguageLevelPicker\r\n                        level={sl.level}\r\n                        buttonStyle={styles.levelPicker}\r\n                        onChange={(level: LanguageLevel) => this.setLanguageLevel(i, level)}\r\n                    />\r\n                    <MaterialIcons onPress={() => this.removeRow(i)} style={styles.deleteIcon} name=\"delete\" />\r\n                </View>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <View style={style}>\r\n                <LanguagePicker\r\n                    multiple={true}\r\n                    languages={languages.map((l) => l.code || \"\")}\r\n                    style={styles.languagePicker}\r\n                    onChange={(languageCodes: string[]) => {\r\n                        if (languageCodes.length > MAX_SPOKEN_LANGUAGES)\r\n                            Alert.alert(`You cannot select more than ${MAX_SPOKEN_LANGUAGES} languages`);\r\n                        this.setLanguages(languageCodes.slice(0, MAX_SPOKEN_LANGUAGES));\r\n                    }}\r\n                    showChips={false}\r\n                />\r\n                {rows}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        rowContainer: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        deleteIcon: {\r\n            fontSize: 24,\r\n            color: theme.error,\r\n            paddingHorizontal: 4,\r\n        },\r\n        languagePicker: {},\r\n        languageLabel: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            flexGrow: 1,\r\n        },\r\n        levelPicker: {\r\n            marginHorizontal: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(SpokenLanguagesInput);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {VALIDATOR_ONBOARDING_LANGUAGES} from \"../../validators\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport SpokenLanguagesInput from \"../../components/SpokenLanguagesInput\";\r\nimport {SpokenLanguageDto} from \"../../api/dto\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    languages: VALIDATOR_ONBOARDING_LANGUAGES,\r\n});\r\n\r\ntype OnboardingLanguageScreenProps = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps;\r\n\r\ntype OnboardingLanguageScreenState = {\r\n    hasErrors: boolean;\r\n};\r\n\r\ntype OnboardingLanguageFormState = {\r\n    languages: SpokenLanguageDto[];\r\n};\r\n\r\nclass OnboardingLanguageScreen extends React.Component<OnboardingLanguageScreenProps, OnboardingLanguageScreenState> {\r\n    constructor(props: OnboardingLanguageScreenProps) {\r\n        super(props);\r\n        this.state = {hasErrors: false};\r\n    }\r\n\r\n    submit(values: OnboardingLanguageFormState) {\r\n        if (!this.state.hasErrors) {\r\n            this.props.dispatch(setOnboardingValues({languages: values.languages}));\r\n            this.props.next();\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState} = this.props;\r\n        const {hasErrors} = this.state;\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingLanguageFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingLanguageFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingLanguageFormState>) => {\r\n                    const {handleSubmit, values, touched, setFieldValue} = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.language.title\")}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel style={{marginBottom: 6}}>{i18n.t(\"spokenLanguages\")}</InputLabel>\r\n                            <SpokenLanguagesInput\r\n                                languages={values.languages}\r\n                                onChange={(languages: SpokenLanguageDto[], hasErrors: boolean) => {\r\n                                    setFieldValue(\"languages\", languages);\r\n                                    this.setState({...this.state, hasErrors});\r\n                                }}\r\n                            />\r\n                            {touched.languages && hasErrors && (\r\n                                <InputErrorText\r\n                                    error={\"validation.language.specifyLevel\"}\r\n                                    style={{marginBottom: 0, marginTop: 10}}\r\n                                />\r\n                            )}\r\n                            {touched.languages && !hasErrors && values.languages.length == 0 && (\r\n                                <InputErrorText\r\n                                    error={\"validation.language.atLeastOne\"}\r\n                                    style={{marginBottom: 0, marginTop: 10}}\r\n                                />\r\n                            )}\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(OnboardingLanguageScreen);\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport {InterestDto} from \"../api/dto\";\r\nimport MultiPicker, {MultiPickerProps} from \"./MultiPicker\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    allInterests: state.profile.interests,\r\n}));\r\n\r\nlet values: string[] = [];\r\n\r\n// Component props\r\nexport type InterestsPickerProps = ConnectedProps<typeof reduxConnector> & {\r\n    interests: string[];\r\n    onChange?: (interests: string[]) => void;\r\n} & Partial<MultiPickerProps>;\r\n\r\nclass InterestsPicker extends React.Component<InterestsPickerProps> {\r\n    componentDidMount() {\r\n        if (values.length == 0) this.updateValues();\r\n    }\r\n\r\n    componentDidUpdate(oldProps: InterestsPickerProps) {\r\n        if (oldProps.allInterests.length != this.props.allInterests.length) this.updateValues();\r\n    }\r\n\r\n    updateValues() {\r\n        values = this.props.allInterests.map((interest: InterestDto) => interest.id);\r\n        this.forceUpdate();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {interests, onChange, ...otherProps} = this.props;\r\n\r\n        return (\r\n            <MultiPicker\r\n                values={values}\r\n                genLabel={(interestId: string) => `interestNames.${interestId}`}\r\n                selected={interests}\r\n                onChange={(values: string[]) => {\r\n                    if (onChange) onChange(values);\r\n                }}\r\n                placeholder={i18n.t(\"interestsPicker.placeholder\")}\r\n                multipleText={i18n.t(\"interestsPicker.multiple\")}\r\n                searchablePlaceholder={i18n.t(\"interestsPicker.searchPlaceholder\")}\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(InterestsPicker);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {VALIDATOR_ONBOARDING_INTERESTS} from \"../../validators\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport InterestsPicker from \"../../components/InterestsPicker\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\ntype OnboardingInterestsScreenProps = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps;\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    interestIds: VALIDATOR_ONBOARDING_INTERESTS,\r\n});\r\n\r\ntype OnboardingInterestsFormState = {\r\n    interestIds: string[];\r\n};\r\n\r\nclass OnboardingInterestsScreen extends React.Component<OnboardingInterestsScreenProps> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingInterestsScreenProps>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.interestIds != next.interestIds;\r\n    }\r\n\r\n    submit(values: OnboardingInterestsFormState) {\r\n        this.props.dispatch(setOnboardingValues({interestIds: values.interestIds}));\r\n        this.props.next();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState} = this.props;\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingInterestsFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingInterestsFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingInterestsFormState>) => {\r\n                    const {handleSubmit, values, errors, touched, setFieldValue} = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(\"onboarding.interests.title\")}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel style={{marginBottom: 6}}>{i18n.t(\"chooseInterests\")}</InputLabel>\r\n                            <InterestsPicker\r\n                                interests={values.interestIds}\r\n                                onChange={(interestIds: string[]) => {\r\n                                    setFieldValue(\"interestIds\", interestIds);\r\n                                }}\r\n                                showChips={true}\r\n                            />\r\n                            {touched.interestIds && <InputErrorText error={errors.interestIds} />}\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(OnboardingInterestsScreen);\r\n","import * as React from \"react\";\r\nimport {Text, ViewStyle, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport {Role} from \"../../constants/profile-constants\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport store from \"../../state/store\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\n\r\ntype OnboardingRoleScreenProps = ThemeProps & OnboardingScreenProps;\r\n\r\ntype OnboardingRoleFormState = {\r\n    type: Role;\r\n};\r\n\r\nclass OnboardingRoleScreen extends React.Component<OnboardingRoleScreenProps> {\r\n    submit(values: OnboardingRoleFormState) {\r\n        store.dispatch(setOnboardingValues(values));\r\n        this.props.next();\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <OnboardingSlide title={i18n.t(\"onboarding.role.title\")} hideNavNext={true} {...this.props}>\r\n                <TouchableOpacity style={styles.roleButton} onPress={() => this.submit({type: \"student\"})}>\r\n                    <MaterialIcons name={\"school\"} style={styles.roleButtonIconStudent}></MaterialIcons>\r\n                    <Text style={styles.roleButtonTextStudent}>{i18n.t(\"allRoles.student\")}</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity style={styles.roleButton} onPress={() => this.submit({type: \"staff\"})}>\r\n                    <MaterialIcons name={\"group\"} style={styles.roleButtonIconStaff}></MaterialIcons>\r\n                    <Text style={styles.roleButtonTextStaff}>{i18n.t(\"allRoles.staff\")}</Text>\r\n                </TouchableOpacity>\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    const studentColor = theme.accent;\r\n    const staffColor = theme.okay;\r\n\r\n    const common = StyleSheet.create({\r\n        roleButtonText: {\r\n            ...styleTextThin,\r\n            fontSize: 40,\r\n            letterSpacing: 1.75,\r\n        },\r\n        roleButtonIcon: {\r\n            fontSize: 50,\r\n            marginRight: 15,\r\n        },\r\n    });\r\n\r\n    return StyleSheet.create({\r\n        roleButton: {\r\n            height: 100,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        } as ViewStyle,\r\n        roleButtonTextStaff: {\r\n            ...common.roleButtonText,\r\n            color: staffColor,\r\n        },\r\n        roleButtonTextStudent: {\r\n            ...common.roleButtonText,\r\n            color: studentColor,\r\n        },\r\n        roleButtonIconStaff: {\r\n            ...common.roleButtonIcon,\r\n            color: staffColor,\r\n        },\r\n        roleButtonIconStudent: {\r\n            ...common.roleButtonIcon,\r\n            color: studentColor,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OnboardingRoleScreen);\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {createOfferControls} from \"./helpers\";\r\nimport {OfferCategory} from \"../../api/dto\";\r\nimport FormattedOfferCategory from \"../../components/FormattedOfferCategory\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\n\r\n// State-linked props\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n    offers: state.profile.offers,\r\n}));\r\n\r\n// Component props\r\ntype OnboardingOfferScreen1Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps & ThemeProps;\r\n\r\nclass OnboardingOfferScreen1 extends React.Component<OnboardingOfferScreen1Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingOfferScreen1Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.offerValues != next.offerValues;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, offers, dispatch, theme} = this.props;\r\n        const styles = onboardingOffersStyle(theme);\r\n        const category = OfferCategory.Discover;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={\r\n                    <FormattedOfferCategory category={category} textStyle={styles.categoryTitleText} fontSize={24} />\r\n                }\r\n                subtitle={i18n.t(\"onboarding.offersDiscover.subtitle\")}\r\n                {...this.props}\r\n            >\r\n                {createOfferControls(offers, category, onboardingState, dispatch)}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingOfferScreen1));\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {createOfferControls} from \"./helpers\";\r\nimport {OfferCategory} from \"../../api/dto\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport FormattedOfferCategory from \"../../components/FormattedOfferCategory\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\n\r\n// State-linked props\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n    offers: state.profile.offers,\r\n}));\r\n\r\n// Component props\r\ntype OnboardingOfferScreen2Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps & ThemeProps;\r\n\r\nclass OnboardingOfferScreen2 extends React.Component<OnboardingOfferScreen2Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingOfferScreen2Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.offerValues != next.offerValues;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, offers, dispatch, theme} = this.props;\r\n        const styles = onboardingOffersStyle(theme);\r\n        const category = OfferCategory.Collaborate;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={\r\n                    <FormattedOfferCategory category={category} textStyle={styles.categoryTitleText} fontSize={24} />\r\n                }\r\n                subtitle={i18n.t(\"onboarding.offersCollaborate.subtitle\")}\r\n                {...this.props}\r\n            >\r\n                {createOfferControls(offers, category, onboardingState, dispatch)}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingOfferScreen2));\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {createOfferControls} from \"./helpers\";\r\nimport {OfferCategory} from \"../../api/dto\";\r\nimport {onboardingOffersStyle} from \"../../styles/onboarding\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../../types\";\r\nimport FormattedOfferCategory from \"../../components/FormattedOfferCategory\";\r\n\r\n// State-linked props\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n    offers: state.profile.offers,\r\n}));\r\n\r\n// Component props\r\ntype OnboardingOfferScreen3Props = ConnectedProps<typeof reduxConnector> & OnboardingScreenProps & ThemeProps;\r\n\r\nclass OnboardingOfferScreen3 extends React.Component<OnboardingOfferScreen3Props> {\r\n    shouldComponentUpdate(nextProps: Readonly<OnboardingOfferScreen3Props>) {\r\n        const prev = this.props.onboardingState;\r\n        const next = nextProps.onboardingState;\r\n        return prev.offerValues != next.offerValues;\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState, offers, dispatch, theme} = this.props;\r\n        const styles = onboardingOffersStyle(theme);\r\n        const category = OfferCategory.Meet;\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={\r\n                    <FormattedOfferCategory category={category} textStyle={styles.categoryTitleText} fontSize={24} />\r\n                }\r\n                subtitle={i18n.t(\"onboarding.offersMeet.subtitle\")}\r\n                {...this.props}\r\n            >\r\n                {createOfferControls(offers, category, onboardingState, dispatch)}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(OnboardingOfferScreen3));\r\n","import * as React from \"react\";\r\nimport {ButtonGroup, withTheme} from \"react-native-elements\";\r\nimport i18n from \"i18n-js\";\r\nimport {Degree, DEGREES} from \"../constants/profile-constants\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\n\r\nexport type DegreeToggleProps = {\r\n    degree?: Degree;\r\n    onUpdate?: (degree?: Degree) => void;\r\n} & ThemeProps;\r\n\r\nclass DegreeToggle extends React.Component<DegreeToggleProps> {\r\n    render(): JSX.Element {\r\n        const buttonLabels = DEGREES.map((d: string) => i18n.t(`degrees.${d}`));\r\n        const {degree, theme} = this.props;\r\n        const styleProps = getToggleStyleProps(false, theme);\r\n\r\n        return (\r\n            <ButtonGroup\r\n                onPress={(idx: number) => {\r\n                    if (this.props.onUpdate) this.props.onUpdate(idx == -1 ? undefined : DEGREES[idx]);\r\n                }}\r\n                selectedIndex={degree ? DEGREES.indexOf(degree) : -1}\r\n                buttons={buttonLabels}\r\n                {...styleProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(DegreeToggle);\r\n","import {Formik, FormikProps} from \"formik\";\r\nimport * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {AppState} from \"../../state/types\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {setOnboardingValues} from \"../../state/auth/actions\";\r\nimport InputLabel from \"../../components/InputLabel\";\r\nimport InputErrorText from \"../../components/InputErrorText\";\r\nimport {Degree, StaffRole, STAFF_ROLES, STAFF_ROLE_ICONS} from \"../../constants/profile-constants\";\r\nimport DegreeToggle from \"../../components/DegreeToggle\";\r\nimport {TouchableOpacity, Text, StyleSheet, Switch} from \"react-native\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {VALIDATOR_ONBOARDING_DEGREE} from \"../../validators\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    onboardingState: state.auth.onboarding,\r\n}));\r\n\r\nconst VALIDATION_SCHEMA = Yup.object().shape({\r\n    degree: VALIDATOR_ONBOARDING_DEGREE,\r\n});\r\n\r\ntype OnboardingRoleSpecificScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & OnboardingScreenProps;\r\n\r\ntype OnboardingRoleSpecificScreenFormState = {\r\n    degree: Degree;\r\n};\r\n\r\nclass OnboardingRoleSpecificScreen extends React.Component<OnboardingRoleSpecificScreenProps> {\r\n    submit(values: Partial<OnboardingRoleSpecificScreenFormState>) {\r\n        this.props.dispatch(setOnboardingValues(values));\r\n        this.props.next();\r\n    }\r\n\r\n    studentRender(): JSX.Element {\r\n        const {onboardingState, theme} = this.props;\r\n        const styles = studentThemedStyles(theme);\r\n\r\n        return (\r\n            <Formik\r\n                initialValues={onboardingState as OnboardingRoleSpecificScreenFormState}\r\n                validationSchema={VALIDATION_SCHEMA}\r\n                validateOnChange={true}\r\n                validateOnBlur={false}\r\n                onSubmit={(values: OnboardingRoleSpecificScreenFormState) => this.submit(values)}\r\n            >\r\n                {(formikProps: FormikProps<OnboardingRoleSpecificScreenFormState>) => {\r\n                    const {handleSubmit, values, errors, touched, setFieldValue} = formikProps;\r\n\r\n                    return (\r\n                        <OnboardingSlide\r\n                            title={i18n.t(`onboarding.roleSpecific1.student.title`)}\r\n                            handleSubmit={handleSubmit}\r\n                            {...this.props}\r\n                        >\r\n                            <InputLabel style={styles.label}>{i18n.t(\"levelOfStudy\")}</InputLabel>\r\n                            <DegreeToggle\r\n                                degree={values.degree}\r\n                                onUpdate={(degree?: Degree) => setFieldValue(\"degree\", degree)}\r\n                            />\r\n                            {touched.degree && <InputErrorText error={errors.degree}></InputErrorText>}\r\n                        </OnboardingSlide>\r\n                    );\r\n                }}\r\n            </Formik>\r\n        );\r\n    }\r\n\r\n    staffRender(): JSX.Element {\r\n        const {theme, onboardingState, dispatch} = this.props;\r\n        const styles = staffThemedStyles(theme);\r\n        const staffRoles = onboardingState.staffRoles;\r\n        const atLeastOne = Object.values(staffRoles).some((v) => v === true);\r\n\r\n        const setValue = (sr: StaffRole, b: boolean) =>\r\n            dispatch(setOnboardingValues({staffRoles: {...staffRoles, [sr]: b}}));\r\n\r\n        const buttons = STAFF_ROLES.map((sr: StaffRole, i: number) => (\r\n            <TouchableOpacity\r\n                key={i}\r\n                style={styles.button}\r\n                activeOpacity={0.6}\r\n                onPress={() => setValue(sr, !staffRoles[sr])}\r\n            >\r\n                <MaterialIcons name={STAFF_ROLE_ICONS[i]} style={styles.buttonIcon} />\r\n                <Text style={styles.buttonText}>{i18n.t(`staffRoles.${sr}`)}</Text>\r\n                <Switch\r\n                    value={staffRoles[sr]}\r\n                    thumbColor={theme.accent}\r\n                    trackColor={{true: theme.accentTernary, false: theme.accentSlight}}\r\n                    onValueChange={(b: boolean) => setValue(sr, b)}\r\n                />\r\n            </TouchableOpacity>\r\n        ));\r\n\r\n        return (\r\n            <OnboardingSlide\r\n                title={i18n.t(\"onboarding.roleSpecific1.staff.title\")}\r\n                hideNavNext={!atLeastOne}\r\n                {...this.props}\r\n            >\r\n                {buttons}\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {onboardingState} = this.props;\r\n        return (\r\n            <>\r\n                {onboardingState.type === \"student\" && this.studentRender()}\r\n                {onboardingState.type === \"staff\" && this.staffRender()}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const studentThemedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        label: {\r\n            marginTop: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport const staffThemedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            height: 60,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        buttonText: {\r\n            ...styleTextThin,\r\n            fontSize: 25,\r\n            letterSpacing: 1.25,\r\n            color: theme.text,\r\n            flexGrow: 1,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 30,\r\n            marginRight: 10,\r\n            color: theme.accent,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(OnboardingRoleSpecificScreen));\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\nexport type TOSDeclinedModalProps = ThemeProps & Partial<CustomModalProps>;\r\n\r\nclass TOSDeclinedModal extends React.Component<TOSDeclinedModalProps> {\r\n    render() {\r\n        const {theme, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                renderContent={(hide: () => void) => (\r\n                    <>\r\n                        <Text style={styles.text}>\r\n                            {i18n.t(\"legal.modal.disclaimer1\")}\r\n                            {\"\\n\\n\"}\r\n                            {i18n.t(\"legal.modal.disclaimer2\")}\r\n                        </Text>\r\n                        <View style={styles.actionButtonsWrapper}>\r\n                            <Button\r\n                                text={i18n.t(\"cancel\")}\r\n                                onPress={() => hide()}\r\n                                skin=\"rounded-hollow\"\r\n                                style={styles.actionButton}\r\n                                textStyle={styles.actionText}\r\n                            />\r\n                            <Button\r\n                                text={i18n.t(\"legal.decline\")}\r\n                                onPress={() => {\r\n                                    hide();\r\n                                    rootNavigate(\"LoginScreen\");\r\n                                }}\r\n                                skin=\"rounded-filled\"\r\n                                style={[styles.actionButton, styles.redBackground]}\r\n                                textStyle={styles.actionText}\r\n                            />\r\n                        </View>\r\n                    </>\r\n                )}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(TOSDeclinedModal);\r\n","import * as React from \"react\";\r\nimport {Text, TextProps} from \"react-native\";\r\n\r\n// Component props\r\nexport type TextLinkProps = {\r\n    text: string;\r\n} & TextProps;\r\n\r\nfunction TextLink(props: React.PropsWithChildren<TextLinkProps>): JSX.Element {\r\n    const {text, ...textProps} = props;\r\n\r\n    return (\r\n        <Text {...textProps} style={[textProps ? textProps.style : {}, {color: \"#2e78b7\"}]}>\r\n            {text}\r\n        </Text>\r\n    );\r\n}\r\n\r\nexport default TextLink;\r\n","import * as React from \"react\";\r\nimport OnboardingSlide, {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport {Text, TouchableOpacity, View, StyleSheet} from \"react-native\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport TOSDeclinedModal from \"../../components/modals/TOSDeclinedModal\";\r\nimport i18n from \"i18n-js\";\r\nimport TextLink from \"../../components/TextLink\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\n\r\n// Component props\r\ntype OnboardingLegalSlideProps = ThemeProps & OnboardingScreenProps & {title: string; text: string};\r\n\r\nclass OnboardingLegalSlide extends React.Component<OnboardingLegalSlideProps> {\r\n    render(): JSX.Element {\r\n        const {theme, title, text, next, ...otherProps} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <OnboardingSlide title={title} hideNavNext={true} next={next} {...otherProps}>\r\n                <Text style={styles.legalText}>{text}</Text>\r\n                <Text style={styles.readMoreText}>\r\n                    {i18n.t(\"legal.readMore\")[0]}\r\n                    <TextLink onPress={() => console.log(\"press\")} text={i18n.t(\"legal.readMore\")[1]} />\r\n                    {i18n.t(\"legal.readMore\")[2]}\r\n                </Text>\r\n\r\n                <View style={styles.actionsWrapper}>\r\n                    <TOSDeclinedModal\r\n                        activator={(show) => (\r\n                            <TouchableOpacity style={styles.actionButton} onPress={show}>\r\n                                <Text style={styles.actionButtonTextDecline}>{i18n.t(\"legal.decline\")}</Text>\r\n                                <MaterialIcons name=\"close\" style={styles.actionButtonTextDecline} />\r\n                            </TouchableOpacity>\r\n                        )}\r\n                    />\r\n                    <TouchableOpacity style={styles.actionButton} onPress={() => next()}>\r\n                        <Text style={styles.actionButtonTextAccept}>{i18n.t(\"legal.accept\")}</Text>\r\n                        <MaterialIcons name=\"check\" style={styles.actionButtonTextAccept} />\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </OnboardingSlide>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        actionsWrapper: {\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-around\",\r\n        },\r\n        actionButton: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            padding: 20,\r\n        },\r\n        actionButtonTextDecline: {\r\n            fontSize: 16,\r\n            paddingHorizontal: 2,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            color: theme.error,\r\n        },\r\n        actionButtonTextAccept: {\r\n            fontSize: 16,\r\n            paddingHorizontal: 2,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            color: theme.okay,\r\n        },\r\n        readMoreText: {\r\n            fontSize: 16,\r\n            lineHeight: 20,\r\n            textAlign: \"justify\",\r\n            marginVertical: 30,\r\n            letterSpacing: 0.4,\r\n            color: theme.textLight,\r\n        },\r\n        legalText: {\r\n            textAlign: \"justify\",\r\n            fontSize: 16,\r\n            lineHeight: 22,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OnboardingLegalSlide);\r\n","import {OnboardingScreens} from \"../../navigation/types\";\r\nimport OnboardingNameScreen from \"./OnboardingNameScreen\";\r\nimport OnboardingPersonalInfoScreen from \"./OnboardingPersonalInfoScreen\";\r\nimport OnboardingLanguageScreen from \"./OnboardingLanguageScreen\";\r\nimport OnboardingInterestsScreen from \"./OnboardingInterestsScreen\";\r\nimport OnboardingRoleScreen from \"./OnboardingRoleScreen\";\r\nimport OnboardingOffersScreen1 from \"./OnboardingOffersScreen1\";\r\nimport OnboardingOffersScreen2 from \"./OnboardingOffersScreen2\";\r\nimport OnboardingOffersScreen3 from \"./OnboardingOffersScreen3\";\r\nimport OnboardingRoleSpecificScreen from \"./OnboardingRoleSpecificScreen\";\r\nimport OnboardingLegalScreen1 from \"./OnboardingLegalScreen1\";\r\nimport OnboardingLegalScreen2 from \"./OnboardingLegalScreen2\";\r\nimport OnboardingLegalScreen3 from \"./OnboardingLegalScreen3\";\r\n\r\nexport const ONBOARDING_SCREENS = {\r\n    OnboardingNameScreen,\r\n    OnboardingPersonalInfoScreen,\r\n    OnboardingLanguageScreen,\r\n    OnboardingInterestsScreen,\r\n    OnboardingRoleScreen,\r\n    OnboardingRoleSpecificScreen,\r\n    OnboardingOffersScreen1,\r\n    OnboardingOffersScreen2,\r\n    OnboardingOffersScreen3,\r\n    OnboardingLegalScreen1,\r\n    OnboardingLegalScreen2,\r\n    OnboardingLegalScreen3,\r\n};\r\n\r\nexport const ONBOARDING_ORDER: (keyof OnboardingScreens)[] = [\r\n    \"OnboardingNameScreen\",\r\n    \"OnboardingLegalScreen1\",\r\n    \"OnboardingLegalScreen2\",\r\n    \"OnboardingLegalScreen3\",\r\n    \"OnboardingPersonalInfoScreen\",\r\n    \"OnboardingLanguageScreen\",\r\n    \"OnboardingInterestsScreen\",\r\n    \"OnboardingRoleScreen\",\r\n    \"OnboardingRoleSpecificScreen\",\r\n    \"OnboardingOffersScreen1\",\r\n    \"OnboardingOffersScreen2\",\r\n    \"OnboardingOffersScreen3\",\r\n];\r\n","import * as React from \"react\";\r\nimport {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingLegalSlide from \"./OnboardingLegalSlide\";\r\n\r\nclass OnboardingLegalScreen1 extends React.Component<OnboardingScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <OnboardingLegalSlide\r\n                title={i18n.t(\"onboarding.legal1.title\")}\r\n                text={i18n.t(\"onboarding.legal1.text\")}\r\n                {...this.props}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default OnboardingLegalScreen1;\r\n","import * as React from \"react\";\r\nimport {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingLegalSlide from \"./OnboardingLegalSlide\";\r\n\r\nclass OnboardingLegalScreen1 extends React.Component<OnboardingScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <OnboardingLegalSlide\r\n                title={i18n.t(\"onboarding.legal2.title\")}\r\n                text={i18n.t(\"onboarding.legal2.text\")}\r\n                {...this.props}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default OnboardingLegalScreen1;\r\n","import * as React from \"react\";\r\nimport {OnboardingScreenProps} from \"./OnboardingSlide\";\r\nimport i18n from \"i18n-js\";\r\nimport OnboardingLegalSlide from \"./OnboardingLegalSlide\";\r\n\r\nclass OnboardingLegalScreen1 extends React.Component<OnboardingScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <OnboardingLegalSlide\r\n                title={i18n.t(\"onboarding.legal3.title\")}\r\n                text={i18n.t(\"onboarding.legal3.text\")}\r\n                {...this.props}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default OnboardingLegalScreen1;\r\n","import * as React from \"react\";\r\nimport {OnboardingScreens} from \"../navigation/types\";\r\nimport {createMaterialTopTabNavigator} from \"@react-navigation/material-top-tabs\";\r\nimport {ONBOARDING_ORDER, ONBOARDING_SCREENS} from \"../screens/onboarding\";\r\nimport {rootNavigate, screenTitle} from \"./utils\";\r\n\r\nconst OnboardingStack = createMaterialTopTabNavigator<OnboardingScreens>();\r\n\r\nconst screens = ONBOARDING_ORDER.map((name: keyof OnboardingScreens, i: number) => {\r\n    const ComponentClass = ONBOARDING_SCREENS[name];\r\n    const hasNext = i < ONBOARDING_ORDER.length - 1;\r\n    const next = () => {\r\n        if (hasNext) rootNavigate(ONBOARDING_ORDER[i + 1]);\r\n    };\r\n    const previous = () => {\r\n        if (i > 0) rootNavigate(ONBOARDING_ORDER[i - 1]);\r\n    };\r\n\r\n    class temp extends React.Component {\r\n        render(): JSX.Element {\r\n            return <ComponentClass next={next} previous={previous} index={i} hasNext={hasNext} />;\r\n        }\r\n    }\r\n\r\n    return <OnboardingStack.Screen key={i} name={name} component={temp} options={{title: screenTitle(name)}} />;\r\n});\r\n\r\nexport default function OnboardingNavigator(): JSX.Element {\r\n    return (\r\n        <OnboardingStack.Navigator\r\n            initialRouteName={ONBOARDING_ORDER[0]}\r\n            tabBarOptions={{showLabel: false, showIcon: false}}\r\n            tabBar={() => <></>}\r\n            springConfig={{\r\n                stiffness: 500,\r\n                damping: 2000,\r\n                mass: 5,\r\n            }}\r\n            swipeEnabled={false}\r\n            lazy={true}\r\n            lazyPreloadDistance={0}\r\n        >\r\n            {screens}\r\n        </OnboardingStack.Navigator>\r\n    );\r\n}\r\n","import {FontAwesome} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport {StyleSheet, Text, TouchableOpacity, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {rootNavigate} from \"../../navigation/utils\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {styleTextThin} from \"../../styles/general\";\r\n\r\nexport type OnboardingSuccessfulScreenProps = ThemeProps;\r\n\r\nclass OnboardingSuccessfulScreen extends React.Component<OnboardingSuccessfulScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={styles.container}>\r\n                <FontAwesome style={styles.icon} name=\"home\"></FontAwesome>\r\n                <Text style={styles.title}>{i18n.t(\"onboarding.profileCreated\")}</Text>\r\n                <View style={styles.separator} />\r\n                <TouchableOpacity style={styles.button} onPress={() => rootNavigate(\"MainScreen\")}>\r\n                    <Text style={styles.buttonText}>{i18n.t(\"onboarding.getStarted\")}</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            backgroundColor: theme.background,\r\n        },\r\n        title: {\r\n            width: \"85%\",\r\n            textAlign: \"center\",\r\n            fontSize: 20,\r\n            letterSpacing: 0.5,\r\n            color: theme.text,\r\n        },\r\n        icon: {\r\n            color: theme.text,\r\n            fontSize: 40,\r\n            marginVertical: 20,\r\n        },\r\n        separator: {\r\n            marginVertical: 30,\r\n            height: 1,\r\n            width: \"80%\",\r\n            backgroundColor: theme.cardBackground,\r\n        },\r\n        button: {\r\n            marginVertical: 20,\r\n            padding: 5,\r\n            borderBottomWidth: 0.75,\r\n            borderBottomColor: theme.textLight,\r\n        },\r\n        buttonText: {\r\n            ...styleTextThin,\r\n            fontSize: 20,\r\n            letterSpacing: 1.5,\r\n            textTransform: \"uppercase\",\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(OnboardingSuccessfulScreen);\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, StyleProp, Text, TextStyle, TouchableOpacity, ViewStyle} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type AsyncButtonProps = {\r\n    onPress: () => Promise<unknown>;\r\n    style?: StyleProp<ViewStyle>;\r\n    textStyle?: StyleProp<TextStyle>;\r\n    loadingIndicatorStyle?: StyleProp<ViewStyle>;\r\n    color?: string;\r\n    text: string;\r\n} & ThemeProps;\r\n\r\n// Component state\r\ntype AsyncButtonState = {\r\n    loading: boolean;\r\n};\r\n\r\nclass AsyncButton extends React.Component<AsyncButtonProps, AsyncButtonState> {\r\n    constructor(props: AsyncButtonProps) {\r\n        super(props);\r\n        this.state = {loading: false};\r\n    }\r\n\r\n    onPress() {\r\n        if (!this.state.loading) {\r\n            this.setState({...this.state, loading: true});\r\n            this.props.onPress().then(() => this.setState({...this.state, loading: false}));\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {text, style, textStyle, loadingIndicatorStyle, color, theme} = this.props;\r\n        const {loading} = this.state;\r\n\r\n        return (\r\n            <TouchableOpacity\r\n                accessibilityRole=\"button\"\r\n                accessibilityLabel={text}\r\n                {...{onPress: loading ? undefined : () => this.onPress()}}\r\n                style={style}\r\n            >\r\n                {loading && (\r\n                    <ActivityIndicator\r\n                        color={color || theme.accentTernary}\r\n                        style={[\r\n                            {position: \"absolute\", top: 0, right: 0, bottom: 0, left: 0, margin: \"auto\"},\r\n                            loadingIndicatorStyle,\r\n                        ]}\r\n                    />\r\n                )}\r\n                <Text style={[{opacity: loading ? 0 : 1}, textStyle]}>{text}</Text>\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(AsyncButton);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View, TouchableOpacity} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {openChat, rootNavigate} from \"../navigation/utils\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport i18n from \"i18n-js\";\r\nimport {styleTextThin} from \"../styles/general\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport AsyncButton from \"../components/AsyncButton\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nexport type MatchSuccessScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass MatchSuccessScreen extends React.Component<MatchSuccessScreenProps> {\r\n    getRoomId(): string | null {\r\n        const params = this.props.route.params;\r\n        if (params) {\r\n            const roomId = (params as {[key: string]: string}).roomId;\r\n            return roomId || null;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    async chat(): Promise<void> {\r\n        const roomId = this.getRoomId();\r\n        if (roomId) openChat(roomId);\r\n        else rootNavigate(\"TabMessaging\");\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.title}>{i18n.t(\"matching.success.title\")}</Text>\r\n                    <View style={styles.separator} />\r\n                    <AsyncButton\r\n                        text={i18n.t(\"matching.success.chat\")}\r\n                        textStyle={styles.actionText}\r\n                        style={styles.actionButton}\r\n                        onPress={async () => await this.chat()}\r\n                    />\r\n                    <TouchableOpacity\r\n                        style={[styles.actionButton, {backgroundColor: theme.actionNeutral}]}\r\n                        onPress={() => rootNavigate(\"TabMatchingScreen\")}\r\n                    >\r\n                        <Text style={styles.actionText}>{i18n.t(\"matching.success.continue\")}</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            backgroundColor: theme.okay,\r\n        },\r\n        title: {\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n            ...styleTextThin,\r\n            fontSize: 32,\r\n            color: theme.text,\r\n            letterSpacing: 1,\r\n            textTransform: \"uppercase\",\r\n        },\r\n        separator: {\r\n            marginVertical: 30,\r\n            height: 1,\r\n            width: \"80%\",\r\n            backgroundColor: theme.cardBackground,\r\n            opacity: 0.3,\r\n        },\r\n        actionButton: {\r\n            backgroundColor: theme.accent,\r\n            paddingHorizontal: 30,\r\n            paddingVertical: 10,\r\n            marginVertical: 20,\r\n            borderRadius: 20,\r\n        },\r\n        actionText: {\r\n            color: theme.textWhite,\r\n            fontSize: 18,\r\n            letterSpacing: 1,\r\n            textTransform: \"uppercase\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(MatchSuccessScreen);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, TextInput} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {VALIDATOR_PASSWORD_SIGNUP, VALIDATOR_PASSWORD_REPEAT} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport {resetPassword} from \"../../state/auth/actions\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport FormError from \"./FormError\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\n\r\ntype FormState = {\r\n    password: string;\r\n    passwordRepeat: string;\r\n};\r\n\r\nconst initialState = (): FormState => ({\r\n    password: \"\",\r\n    passwordRepeat: \"\",\r\n});\r\n\r\n// Use Yup to create the validation schema\r\nconst ResetPasswordFormSchema = Yup.object().shape({\r\n    password: VALIDATOR_PASSWORD_SIGNUP,\r\n    passwordRepeat: VALIDATOR_PASSWORD_REPEAT,\r\n});\r\n\r\n// Component props\r\ntype ResetPasswordFormProps = {token?: string} & FormProps<FormState> & ThemeProps;\r\n\r\n// Component state\r\ntype ResetPasswordFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass ResetPasswordForm extends React.Component<ResetPasswordFormProps, ResetPasswordFormState> {\r\n    pwdRepeatRef = React.createRef<FormTextInput>();\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: ResetPasswordFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        const {token, onSuccessfulSubmit} = this.props;\r\n        this.setState({...this.state, submitting: true});\r\n\r\n        if (token) {\r\n            (store.dispatch as MyThunkDispatch)(resetPassword(token, values.password)).then(\r\n                ({success, errors}: ValidatedActionReturn) => {\r\n                    if (success && onSuccessfulSubmit) onSuccessfulSubmit(values);\r\n                    if (errors && errors.fields) {\r\n                        const f = errors.fields;\r\n                        Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                    }\r\n                    this.setState({remoteErrors: errors, submitting: false});\r\n                },\r\n            );\r\n        } else {\r\n            this.setState({remoteErrors: {general: \"error.reset_password_no_token\", fields: {}}, submitting: false});\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <>\r\n                <Text style={styles.title}>{i18n.t(\"resetPassword.title\")}</Text>\r\n                <Formik\r\n                    initialValues={initialState()}\r\n                    validationSchema={ResetPasswordFormSchema}\r\n                    validateOnChange={true}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 15)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <React.Fragment>\r\n                                <FormTextInput\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"next\"\r\n                                    blurOnSubmit={false}\r\n                                    onSubmitEditing={() => this.pwdRepeatRef.current?.focus()}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                {/* TEMP This is a workaround for a bug on some iOS versions.\r\n                                    See https://github.com/facebook/react-native/issues/21572 */}\r\n                                <TextInput style={{width: 1, height: 1}} />\r\n\r\n                                <FormTextInput\r\n                                    ref={this.pwdRepeatRef}\r\n                                    field=\"passwordRepeat\"\r\n                                    placeholder={i18n.t(\"passwordRepeat\")}\r\n                                    error={errors.passwordRepeat}\r\n                                    value={values.passwordRepeat}\r\n                                    touched={touched.passwordRepeat}\r\n                                    isPassword={true}\r\n                                    returnKeyType=\"done\"\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <FormSubmitButton\r\n                                    onPress={() => handleSubmit()}\r\n                                    style={styles.button}\r\n                                    skin=\"rounded-filled\"\r\n                                    text={i18n.t(\"resetPassword.button\")}\r\n                                    submitting={submitting}\r\n                                />\r\n                            </React.Fragment>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        title: {\r\n            width: \"100%\",\r\n            fontSize: 22,\r\n            color: theme.text,\r\n            marginBottom: 20,\r\n        },\r\n        button: {\r\n            marginTop: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ResetPasswordForm);\r\n","import * as React from \"react\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ResetPasswordForm from \"../components/forms/ResetPasswordForm\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ScrollFormWrapper from \"../components/forms/ScrollFormWrapper\";\r\n\r\ntype ResetPasswordScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\ntype ResetPasswordScreenState = {token?: string};\r\n\r\nclass ResetPasswordScreen extends React.Component<ResetPasswordScreenProps, ResetPasswordScreenState> {\r\n    constructor(props: ResetPasswordScreenProps) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Attempt to extract a token out of the route parameters\r\n        const params = this.props.route.params as {[key: string]: string};\r\n        if (params && params.token) this.setState({...this.state, token: params.token});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {token} = this.state;\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper>\r\n                    <ResetPasswordForm token={token} />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(ResetPasswordScreen);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport i18n from \"i18n-js\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\ntype ForgotPasswordEmailSentScreenProps = ThemeProps;\r\n\r\nclass ForgotPasswordEmailSentScreen extends React.Component<ForgotPasswordEmailSentScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <FontAwesome name=\"envelope-o\" style={styles.mailIcon}></FontAwesome>\r\n                    <Text style={styles.description}>{i18n.t(\"resetPassword.instructions\")}</Text>\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"75%\",\r\n        },\r\n        description: {\r\n            fontSize: 16,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        mailIcon: {\r\n            marginVertical: 30,\r\n            fontSize: 50,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ForgotPasswordEmailSentScreen);\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport Button from \"../components/Button\";\r\n\r\ntype ResetPasswordSuccessScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass ResetPasswordSuccessScreen extends React.Component<ResetPasswordSuccessScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.successText}>{i18n.t(\"resetPassword.success\")}</Text>\r\n                    <Button\r\n                        text={i18n.t(\"login\")}\r\n                        icon={<MaterialCommunityIcons name=\"login\" style={styles.buttonIcon} />}\r\n                        onPress={() => rootNavigate(\"LoginScreen\")}\r\n                        skin=\"rounded-filled\"\r\n                        style={styles.button}\r\n                    />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"75%\",\r\n        },\r\n        successText: {\r\n            fontSize: 18,\r\n            lineHeight: 40,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        button: {\r\n            marginTop: 30,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 20,\r\n            color: theme.textWhite,\r\n            marginLeft: 4,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ResetPasswordSuccessScreen);\r\n","import * as React from \"react\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Role, ROLES} from \"../constants/profile-constants\";\r\nimport {ButtonGroup, ButtonGroupProps, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {getToggleStyleProps} from \"../styles/toggles\";\r\n\r\nexport type RoleToggleProps = {\r\n    role: Role;\r\n    onSelect?: (role: Role) => void;\r\n} & Partial<ButtonGroupProps> &\r\n    ThemeProps;\r\n\r\nfunction RoleToggle(props: RoleToggleProps): JSX.Element {\r\n    const {role, onSelect, theme, ...otherProps} = props;\r\n    const styles = themedStyles(theme);\r\n    const styleProps = getToggleStyleProps(false, theme);\r\n\r\n    const buttonLabels = ROLES.map((r: string) => i18n.t(`allRoles.${r}`));\r\n\r\n    return (\r\n        <ButtonGroup\r\n            onPress={(idx: number) => {\r\n                if (onSelect) onSelect(ROLES[idx]);\r\n            }}\r\n            selectedIndex={ROLES.indexOf(role)}\r\n            buttons={buttonLabels}\r\n            containerStyle={styles.container}\r\n            {...styleProps}\r\n            {...otherProps}\r\n        />\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            height: 35,\r\n            marginLeft: 0,\r\n            marginRight: 0,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(RoleToggle);\r\n","import * as React from \"react\";\r\nimport {StyleProp, ViewStyle, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {StaffRole, STAFF_ROLES, STAFF_ROLE_ICONS} from \"../constants/profile-constants\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport PopUpSelector from \"./PopUpSelector\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\n\r\n// Component props\r\nexport type StaffRoleToggleProps = {\r\n    staffRoles: StaffRole[];\r\n    onChange?: (staffRoles: StaffRole[]) => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    multiple?: boolean;\r\n    atLeastOne?: boolean;\r\n};\r\n\r\nfunction StaffRolePicker(props: StaffRoleToggleProps & ThemeProps): JSX.Element {\r\n    const {staffRoles, multiple, atLeastOne, buttonStyle, onChange, theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    return (\r\n        <PopUpSelector\r\n            values={STAFF_ROLES}\r\n            label={(r: string) => i18n.t(`staffRoles.${r}`)}\r\n            icon={(_, i: number) => <MaterialIcons name={STAFF_ROLE_ICONS[i]} style={styles.icon} />}\r\n            selected={staffRoles}\r\n            valueStyle={styles.value}\r\n            buttonStyle={[styles.button, buttonStyle]}\r\n            onSelect={(values: string[]) => {\r\n                if (onChange) onChange(values as StaffRole[]);\r\n            }}\r\n            multiple={multiple}\r\n            atLeastOne={atLeastOne}\r\n        />\r\n    );\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            height: 40,\r\n            alignItems: \"center\",\r\n        },\r\n        value: {\r\n            letterSpacing: 0.5,\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n        icon: {\r\n            fontSize: 20,\r\n            marginRight: 6,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(StaffRolePicker);\r\n","import {MaterialIcons} from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport {Platform, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ImageInfo} from \"expo-image-picker/build/ImagePicker.types\";\r\nimport {AVATAR_QUALITY} from \"../constants/config\";\r\n\r\n// Component props\r\nexport type AvatarEditButtonProps = ThemeProps & {\r\n    onPictureSelected?: (imageInfo: ImageInfo) => void;\r\n};\r\n\r\nclass AvatarEditButton extends React.Component<AvatarEditButtonProps> {\r\n    ensurePermission = async () => {\r\n        if (Platform.OS !== \"web\") {\r\n            let {status} = await Permissions.getAsync(Permissions.CAMERA_ROLL);\r\n            if (status !== \"granted\") {\r\n                status = await (await Permissions.askAsync(Permissions.CAMERA_ROLL)).status;\r\n                /*if (status !== \"granted\") {\r\n                    alert(\"Sorry, we need camera roll permissions to make this work!\");\r\n                }*/\r\n                return status === \"granted\";\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    showPicker = async () => {\r\n        const authorized = this.ensurePermission();\r\n\r\n        if (authorized) {\r\n            try {\r\n                const result = await ImagePicker.launchImageLibraryAsync({\r\n                    mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n                    allowsEditing: true,\r\n                    aspect: [1, 1],\r\n                    quality: AVATAR_QUALITY,\r\n                });\r\n                if (!result.cancelled) {\r\n                    const info: ImageInfo = result;\r\n                    if (this.props.onPictureSelected) this.props.onPictureSelected(info);\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Could not get image. Check console for error.\");\r\n                console.log(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <TouchableOpacity style={styles.button} onPress={() => this.showPicker()}>\r\n                <MaterialIcons style={styles.buttonIcon} name=\"edit\" />\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        button: {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n            borderRadius: 20,\r\n            padding: 4,\r\n            backgroundColor: theme.cardBackground,\r\n\r\n            shadowColor: \"#000\",\r\n            shadowOffset: {width: 0, height: 1},\r\n            shadowOpacity: 0.2,\r\n            shadowRadius: 1.41,\r\n            elevation: 2,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 20,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(AvatarEditButton);\r\n","import * as React from \"react\";\r\nimport {Text, TouchableOpacity, TouchableOpacityProps, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {ArraySchema, Schema, ValidationError} from \"yup\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ThemeConsumer} from \"react-native-elements\";\r\nimport CustomModal from \"../modals/CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\n// Component props\r\ntype ValueCardProps<T> = {\r\n    label: string;\r\n    icon?: JSX.Element;\r\n    display?: JSX.Element;\r\n    noModal?: boolean;\r\n    overrideModal?: (hide: () => void) => JSX.Element;\r\n    renderInput?: (value: T, error: string | null, onChange: (value: T, error?: string | null) => void) => JSX.Element;\r\n    validator?: Schema<unknown> | ArraySchema<unknown>;\r\n    initialValue?: T;\r\n    apply?: (value: T) => void;\r\n    locked?: boolean;\r\n    oneLine?: boolean;\r\n    onPress?: () => void;\r\n    onModalShown?: () => void;\r\n    blank?: boolean;\r\n} & TouchableOpacityProps;\r\n\r\n// Component state\r\ntype ValueCardState<T> = {\r\n    modalOpen: boolean;\r\n    error: string | null;\r\n    value: T | undefined;\r\n};\r\n\r\nclass ValueCard<T> extends React.Component<ValueCardProps<T>, ValueCardState<T>> {\r\n    constructor(props: ValueCardProps<T>) {\r\n        super(props);\r\n        this.state = {\r\n            modalOpen: false,\r\n            error: null,\r\n            value: props.initialValue,\r\n        };\r\n    }\r\n\r\n    setModal(modalOpen: boolean): void {\r\n        const {initialValue} = this.props;\r\n        // Reset to initial value when opening the modal\r\n        this.setState({...this.state, modalOpen, value: initialValue, error: null});\r\n    }\r\n\r\n    setError(error: string | null): void {\r\n        this.setState({...this.state, error});\r\n    }\r\n\r\n    onChange(value: T, error?: string | null): void {\r\n        if (error === undefined) error = this.state.error;\r\n        this.setState({...this.state, value, error}, () => this.validate());\r\n    }\r\n\r\n    validate(): boolean {\r\n        const {validator} = this.props;\r\n        if (!validator) return true;\r\n        try {\r\n            validator.validateSync(this.state.value);\r\n            this.setError(null);\r\n            return true;\r\n        } catch (err) {\r\n            this.setError((err as ValidationError).errors[0]);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    apply(): void {\r\n        if (this.validate()) {\r\n            if (this.props.apply && this.state.value) this.props.apply(this.state.value);\r\n            this.setModal(false);\r\n        }\r\n    }\r\n\r\n    renderModalContent = (theme: Theme): JSX.Element => {\r\n        const {label, renderInput, oneLine} = this.props;\r\n        const {value, error} = this.state;\r\n\r\n        const styles = themedStyles(oneLine)(theme);\r\n\r\n        return (\r\n            <>\r\n                <Text style={styles.modalLabel}>{label}</Text>\r\n                {renderInput && value ? (\r\n                    renderInput(value, error, (value: T, error?: string | null) => this.onChange(value, error))\r\n                ) : (\r\n                    <></>\r\n                )}\r\n                <Text style={styles.modalErrorText}>{/*touched && */ error ? i18n.t(error) : \"\"}</Text>\r\n                <View style={styles.modalButtonsContainer}>\r\n                    <Button\r\n                        onPress={() => this.apply()}\r\n                        style={styles.modalButton}\r\n                        text={i18n.t(\"apply\")}\r\n                        skin=\"rounded-filled\"\r\n                    />\r\n                    <Button\r\n                        onPress={() => this.setModal(false)}\r\n                        style={styles.modalButton}\r\n                        text={i18n.t(\"cancel\")}\r\n                        skin=\"rounded-hollow\"\r\n                    />\r\n                </View>\r\n            </>\r\n        );\r\n    };\r\n\r\n    render(): JSX.Element {\r\n        const {\r\n            label,\r\n            icon,\r\n            display,\r\n            overrideModal,\r\n            noModal,\r\n            style,\r\n            locked,\r\n            oneLine,\r\n            blank,\r\n            onPress,\r\n            onModalShown,\r\n            ...otherProps\r\n        } = this.props;\r\n        const {modalOpen} = this.state;\r\n\r\n        const onShow = () => {\r\n            if (onModalShown) onModalShown();\r\n        };\r\n\r\n        return (\r\n            // We have to use a ThemeConsumer here instead of the standard withTheme(...) pattern so our generic typing doesn't break.\r\n            <ThemeConsumer>\r\n                {({theme}: ThemeProps) => {\r\n                    const styles = themedStyles(oneLine)(theme);\r\n                    return (\r\n                        <>\r\n                            <TouchableOpacity\r\n                                style={[styles.cardWrapper, style]}\r\n                                activeOpacity={0.9}\r\n                                disabled={noModal && !onPress}\r\n                                onPress={() => {\r\n                                    if (!noModal) {\r\n                                        if (!locked) this.setModal(true);\r\n                                    } else if (onPress) onPress();\r\n                                }}\r\n                                {...otherProps}\r\n                            >\r\n                                <View style={styles.cardContent}>\r\n                                    <View style={styles.cardLabelContainer}>\r\n                                        {!blank && icon}\r\n                                        <Text style={styles.cardLabel}>{!blank && label}</Text>\r\n                                    </View>\r\n                                    <View>\r\n                                        {!blank && display !== undefined && display}\r\n                                        {!blank && display === undefined && this.props.children}\r\n                                    </View>\r\n                                </View>\r\n                                {!noModal && (\r\n                                    <View style={styles.rightIconContainer}>\r\n                                        <MaterialIcons\r\n                                            name={locked ? \"lock\" : \"keyboard-arrow-right\"}\r\n                                            size={locked ? 30 : 40}\r\n                                            style={styles.rightIcon}\r\n                                        />\r\n                                    </View>\r\n                                )}\r\n                            </TouchableOpacity>\r\n                            {!noModal && (\r\n                                <>\r\n                                    {overrideModal !== undefined &&\r\n                                        modalOpen &&\r\n                                        overrideModal(() => this.setModal(false))}\r\n                                    {overrideModal === undefined && modalOpen && (\r\n                                        <CustomModal\r\n                                            visible={modalOpen}\r\n                                            modalViewStyle={styles.modalContent}\r\n                                            animationType=\"slide\"\r\n                                            renderContent={() => this.renderModalContent(theme)}\r\n                                            onShow={onShow}\r\n                                            onHide={() => this.setModal(false)}\r\n                                        />\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </>\r\n                    );\r\n                }}\r\n            </ThemeConsumer>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = (oneLine?: boolean) =>\r\n    preTheme((theme: Theme) => {\r\n        return StyleSheet.create({\r\n            modalContent: {\r\n                alignItems: \"flex-start\",\r\n                paddingHorizontal: 20,\r\n            },\r\n            modalErrorText: {\r\n                fontSize: 12,\r\n                color: theme.error,\r\n            },\r\n            modalLabel: {\r\n                color: theme.textLight,\r\n                textTransform: \"uppercase\",\r\n                letterSpacing: 1.5,\r\n                fontSize: 13,\r\n                marginBottom: 12,\r\n            },\r\n            modalButtonsContainer: {\r\n                flexDirection: \"column\",\r\n                width: \"100%\",\r\n            },\r\n            modalButton: {\r\n                marginVertical: 0,\r\n                marginTop: 15,\r\n            },\r\n            cardWrapper: {\r\n                width: \"100%\",\r\n                flexDirection: \"row\",\r\n                backgroundColor: theme.cardBackground,\r\n                paddingHorizontal: 10,\r\n                justifyContent: \"space-evenly\",\r\n                paddingVertical: 15,\r\n                minHeight: oneLine ? 0 : 80,\r\n                borderRadius: 10,\r\n            },\r\n            cardContent: {\r\n                flex: 1,\r\n                flexDirection: oneLine ? \"row\" : \"column\",\r\n                ...(oneLine ? {alignItems: \"center\"} : {}),\r\n                justifyContent: \"space-between\",\r\n            },\r\n            cardLabelContainer: {\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n                marginBottom: oneLine ? 0 : 10,\r\n            },\r\n            cardLabel: {\r\n                color: theme.textLight,\r\n                textTransform: \"uppercase\",\r\n                letterSpacing: 1,\r\n                fontSize: 11,\r\n            },\r\n            rightIconContainer: {justifyContent: \"center\"},\r\n            rightIcon: {color: theme.textLight},\r\n        });\r\n    });\r\n\r\nexport default ValueCard;\r\n","import * as React from \"react\";\r\nimport {AvatarProps, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport ProfileAvatar from \"./ProfileAvatar\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\n\r\n// Component props\r\nexport type EnlargeableAvatarProps = {profile?: UserProfile} & AvatarProps & ThemeProps;\r\n\r\n// Component state\r\nexport type EnlargeableAvatarState = {\r\n    enlarged: boolean;\r\n};\r\n\r\nclass EnlargeableAvatar extends React.Component<EnlargeableAvatarProps, EnlargeableAvatarState> {\r\n    constructor(props: EnlargeableAvatarProps) {\r\n        super(props);\r\n        this.state = {enlarged: false};\r\n    }\r\n\r\n    showEnlarged() {\r\n        this.setState({...this.state, enlarged: true});\r\n    }\r\n\r\n    hideEnlarged() {\r\n        this.setState({...this.state, enlarged: false});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, children, profile, ...avatarProps} = this.props;\r\n        const {enlarged} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const onPress = () => {\r\n            if (avatarProps.onPress) avatarProps.onPress();\r\n            this.showEnlarged();\r\n        };\r\n\r\n        return (\r\n            <>\r\n                <ProfileAvatar\r\n                    profile={profile}\r\n                    {...avatarProps}\r\n                    {...(avatarProps.source || profile?.avatarUrl ? {onPress} : {})}\r\n                >\r\n                    {children}\r\n                </ProfileAvatar>\r\n                <CustomModal\r\n                    visible={enlarged}\r\n                    onHide={() => this.hideEnlarged()}\r\n                    fullWidth\r\n                    noBackground\r\n                    backdropOpacity={0.5}\r\n                    modalViewStyle={styles.modal}\r\n                    renderContent={() => (\r\n                        <ProfileAvatar\r\n                            profile={profile}\r\n                            source={avatarProps.source}\r\n                            containerStyle={styles.enlargedAvatarContainer}\r\n                            avatarStyle={styles.enlargedAvatar}\r\n                            activeOpacity={0.8}\r\n                            onPress={() => this.hideEnlarged()}\r\n                            rounded\r\n                        />\r\n                    )}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const themedStyles = preTheme(() => {\r\n    return StyleSheet.create({\r\n        modal: {\r\n            aspectRatio: 1,\r\n            paddingHorizontal: 20,\r\n            paddingVertical: 20,\r\n            maxWidth: 400,\r\n            maxHeight: 400,\r\n        },\r\n        enlargedAvatar: {\r\n            borderRadius: 300,\r\n        },\r\n        enlargedAvatarContainer: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(EnlargeableAvatar);\r\n","import React from \"react\";\r\nimport {StyleProp, View, ViewStyle} from \"react-native\";\r\nimport Svg, {Path} from \"react-native-svg\";\r\n\r\nexport type WavyHeaderProps = {\r\n    style: StyleProp<ViewStyle>;\r\n    color: string;\r\n    wavePattern?: string;\r\n};\r\n\r\ntype WavyHeaderState = {\r\n    waveTop: number;\r\n    wavePatternIdx: number;\r\n};\r\n\r\nconst WAVE_PATTERNS = [\r\n    \"M0,160L48,154.7C96,149,192,139,288,165.3C384,192,480,256,576,245.3C672,235,768,149,864,101.3C960,53,1056,43,1152,64C1248,85,1344,139,1392,165.3L1440,192L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,224L48,197.3C96,171,192,117,288,128C384,139,480,213,576,218.7C672,224,768,160,864,144C960,128,1056,160,1152,181.3C1248,203,1344,213,1392,218.7L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,96L48,106.7C96,117,192,139,288,160C384,181,480,203,576,213.3C672,224,768,224,864,192C960,160,1056,96,1152,85.3C1248,75,1344,117,1392,138.7L1440,160L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,192L48,197.3C96,203,192,213,288,197.3C384,181,480,139,576,122.7C672,107,768,117,864,128C960,139,1056,149,1152,133.3C1248,117,1344,75,1392,53.3L1440,32L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,128L48,138.7C96,149,192,171,288,160C384,149,480,107,576,122.7C672,139,768,213,864,202.7C960,192,1056,96,1152,64C1248,32,1344,64,1392,80L1440,96L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,64L48,90.7C96,117,192,171,288,170.7C384,171,480,117,576,96C672,75,768,85,864,101.3C960,117,1056,139,1152,160C1248,181,1344,203,1392,213.3L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,160L48,154.7C96,149,192,139,288,122.7C384,107,480,85,576,96C672,107,768,149,864,138.7C960,128,1056,64,1152,53.3C1248,43,1344,85,1392,106.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n    \"M0,32L60,69.3C120,107,240,181,360,186.7C480,192,600,128,720,90.7C840,53,960,43,1080,48C1200,53,1320,75,1380,85.3L1440,96L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,128L60,117.3C120,107,240,85,360,64C480,43,600,21,720,64C840,107,960,213,1080,250.7C1200,288,1320,256,1380,240L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,288L60,245.3C120,203,240,117,360,101.3C480,85,600,139,720,176C840,213,960,235,1080,240C1200,245,1320,235,1380,229.3L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    \"M0,96L60,117.3C120,139,240,181,360,181.3C480,181,600,139,720,138.7C840,139,960,181,1080,202.7C1200,224,1320,224,1380,224L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z\",\r\n    // EditProfileForm\r\n    \"M0,160L48,181.3C96,203,192,245,288,261.3C384,277,480,267,576,224C672,181,768,107,864,106.7C960,107,1056,181,1152,202.7C1248,224,1344,192,1392,176L1440,160L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z\",\r\n];\r\n\r\nexport default class WavyHeader extends React.Component<WavyHeaderProps, WavyHeaderState> {\r\n    constructor(props: WavyHeaderProps) {\r\n        super(props);\r\n        this.state = {\r\n            waveTop: -1,\r\n            // Assign a random wave pattern\r\n            wavePatternIdx: Math.floor(Math.random() * WAVE_PATTERNS.length),\r\n        };\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {style, color, children} = this.props;\r\n        const {waveTop} = this.state;\r\n\r\n        const wavePattern = this.props.wavePattern || WAVE_PATTERNS[this.state.wavePatternIdx];\r\n        console.log(this.state.wavePatternIdx);\r\n\r\n        return (\r\n            <>\r\n                <View\r\n                    style={[{backgroundColor: color, width: \"100%\", zIndex: 10}, style]}\r\n                    onLayout={(layout) => {\r\n                        const {y, height} = layout.nativeEvent.layout;\r\n                        this.setState({...this.state, waveTop: y + height});\r\n                    }}\r\n                >\r\n                    {children}\r\n                </View>\r\n                {waveTop !== -1 && (\r\n                    <View style={{position: \"absolute\", top: waveTop, width: \"100%\", height: 100, zIndex: 10}}>\r\n                        <Svg viewBox=\"0 20 1440 320\">\r\n                            <Path fill={color} d={wavePattern} />\r\n                        </Svg>\r\n                    </View>\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, Text, View} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport EducationFieldPicker from \"../EducationFieldPicker\";\r\nimport {StyleSheet} from \"react-native\";\r\nimport DegreeToggle from \"../DegreeToggle\";\r\nimport {CountryCode} from \"../../model/country-codes\";\r\nimport RoleToggle from \"../RoleToggle\";\r\nimport {Degree, Gender, StaffRole} from \"../../constants/profile-constants\";\r\nimport StaffRolePicker from \"../StaffRolePicker\";\r\nimport GenderToggle from \"../GenderToggle\";\r\nimport AvatarEditButton from \"../AvatarEditButton\";\r\nimport ValueCard from \"../cards/ValueCard\";\r\nimport {FormattedDate} from \"../FormattedDate\";\r\nimport NationalityPicker from \"../NationalityPicker\";\r\nimport FormattedNationality from \"../FormattedNationality\";\r\nimport {getUniversityFromEmail} from \"../../model/utils\";\r\nimport FormattedUniversity from \"../FormattedUniversity\";\r\nimport InterestsPicker from \"../InterestsPicker\";\r\nimport {initOfferValue, OfferCategory, OfferDto, OfferValueDto, SpokenLanguageDto} from \"../../api/dto\";\r\nimport {UserProfile, UserProfileStaff, UserProfileStudent} from \"../../model/user-profile\";\r\nimport {User} from \"../../model/user\";\r\nimport {VALIDATOR_ONBOARDING_LANGUAGES} from \"../../validators\";\r\nimport SpokenLanguagesInput from \"../SpokenLanguagesInput\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {ImageInfo} from \"expo-image-picker/build/ImagePicker.types\";\r\nimport store from \"../../state/store\";\r\nimport {AppState, MyThunkDispatch} from \"../../state/types\";\r\nimport {setAvatar} from \"../../state/profile/actions\";\r\nimport EnlargeableAvatar from \"../EnlargeableAvatar\";\r\nimport OfferControl from \"../OfferControl\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport Chips from \"../Chips\";\r\nimport WavyHeader from \"../headers/WavyHeader\";\r\nimport BirthDateInput, {BirthDateInputClass} from \"../BirthDateInput\";\r\nimport ScrollFormWrapper from \"./ScrollFormWrapper\";\r\n\r\n// Component props\r\nexport type EditProfileFormProps = ThemeProps & {\r\n    user: User | null;\r\n    onChange?: (fields: Partial<UserProfile>) => void;\r\n};\r\n\r\nfunction Spacer(): JSX.Element {\r\n    return <View style={{height: 25}}></View>;\r\n}\r\n\r\nclass EditProfileForm extends React.Component<EditProfileFormProps> {\r\n    birthDateInputRef = React.createRef<BirthDateInputClass>();\r\n\r\n    onFieldChanged(fields: Partial<UserProfile>): void {\r\n        if (this.props.onChange !== undefined) this.props.onChange(fields);\r\n    }\r\n\r\n    render() {\r\n        const {theme, user} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fullName = user && user.profile ? user.profile.firstName + \" \" + user.profile.lastName : \"\";\r\n\r\n        const profile = user?.profile;\r\n\r\n        const profileFieldComponents = (\r\n            <>\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"emailAddress\")}\r\n                    initialValue={user?.email}\r\n                    display={(user && <Text style={styles.cardText}>{user.email}</Text>) || undefined}\r\n                    locked={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"dateOfBirth\")}\r\n                    initialValue={profile?.birthdate}\r\n                    display={profile && <FormattedDate style={styles.cardText} date={profile.birthdate} />}\r\n                    renderInput={(value: Date, _error, onChange) => (\r\n                        <BirthDateInput\r\n                            ref={this.birthDateInputRef}\r\n                            date={value}\r\n                            containerStyle={styles.birthdateInputContainer}\r\n                            inputStyle={styles.birthdateInput}\r\n                            onChange={(birthdate?: Date, inputError?: string) => {\r\n                                onChange(birthdate || value, inputError || null);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    onModalShown={() => this.birthDateInputRef.current?.focus()}\r\n                    apply={(birthdate: Date) => this.onFieldChanged({birthdate})}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"nationality\")}\r\n                    initialValue={profile?.nationality}\r\n                    display={\r\n                        profile && <FormattedNationality style={styles.cardText} countryCode={profile.nationality} />\r\n                    }\r\n                    overrideModal={\r\n                        profile &&\r\n                        ((hide: () => void) => (\r\n                            <NationalityPicker\r\n                                nationality={profile.nationality}\r\n                                onSelect={(cc: CountryCode) => this.onFieldChanged({nationality: cc})}\r\n                                onHide={hide}\r\n                            />\r\n                        ))\r\n                    }\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"gender\")}\r\n                    initialValue={profile?.gender}\r\n                    display={\r\n                        profile && (\r\n                            <GenderToggle\r\n                                gender={profile.gender}\r\n                                onSelect={(gender: Gender) => this.onFieldChanged({gender})}\r\n                            />\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"profileType\")}\r\n                    initialValue={profile?.type}\r\n                    display={\r\n                        profile && (\r\n                            <>\r\n                                <RoleToggle role={profile.type} disabled={true} />\r\n                                {profile.type == \"staff\" && (\r\n                                    <StaffRolePicker\r\n                                        staffRoles={(profile as UserProfileStaff).staffRoles}\r\n                                        onChange={(staffRoles: StaffRole[]) => this.onFieldChanged({staffRoles})}\r\n                                        multiple={true}\r\n                                        atLeastOne={true}\r\n                                        buttonStyle={styles.staffRoleButton}\r\n                                    />\r\n                                )}\r\n                                {profile.type == \"student\" && (\r\n                                    <DegreeToggle\r\n                                        degree={(profile as UserProfileStudent).degree}\r\n                                        onUpdate={(degree?: Degree) => this.onFieldChanged({degree})}\r\n                                    />\r\n                                )}\r\n                            </>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"fieldsOfEducation\")}\r\n                    initialValue={profile?.educationFields}\r\n                    display={\r\n                        <EducationFieldPicker\r\n                            fields={profile?.educationFields}\r\n                            onChange={(educationFields: string[]) => this.onFieldChanged({educationFields})}\r\n                            showChips={true}\r\n                        />\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"interests\")}\r\n                    initialValue={profile?.interests}\r\n                    display={\r\n                        profile && (\r\n                            <InterestsPicker\r\n                                interests={profile.interests}\r\n                                onChange={(interests: string[]) => this.onFieldChanged({interests})}\r\n                                showChips={true}\r\n                            />\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!user}\r\n                    label={i18n.t(\"spokenLanguages\")}\r\n                    initialValue={profile?.languages}\r\n                    validator={VALIDATOR_ONBOARDING_LANGUAGES}\r\n                    display={\r\n                        profile && (\r\n                            <Chips\r\n                                items={profile?.languages}\r\n                                label={(item: SpokenLanguageDto) =>\r\n                                    `${i18n.t(`languageNames.${item.code}`)} (${i18n.t(\r\n                                        `languageLevels.${item.level}`,\r\n                                    )})`\r\n                                }\r\n                            />\r\n                        )\r\n                    }\r\n                    renderInput={(\r\n                        value: SpokenLanguageDto[],\r\n                        error: string | null,\r\n                        onChange: (value: SpokenLanguageDto[]) => void,\r\n                    ) => (\r\n                        <SpokenLanguagesInput\r\n                            languages={value}\r\n                            onChange={(languages: SpokenLanguageDto[]) => onChange(languages)}\r\n                            style={{width: \"100%\"}}\r\n                        />\r\n                    )}\r\n                    apply={(languages: SpokenLanguageDto[]) => this.onFieldChanged({languages})}\r\n                />\r\n                <Spacer />\r\n                <OfferCategoryRow\r\n                    category={OfferCategory.Discover}\r\n                    profileOffers={profile?.profileOffers}\r\n                    onApply={(profileOffers: OfferValueDto[]) => this.onFieldChanged({profileOffers})}\r\n                    theme={theme}\r\n                />\r\n                <Spacer />\r\n                <OfferCategoryRow\r\n                    category={OfferCategory.Collaborate}\r\n                    profileOffers={profile?.profileOffers}\r\n                    onApply={(profileOffers: OfferValueDto[]) => this.onFieldChanged({profileOffers})}\r\n                    theme={theme}\r\n                />\r\n                <Spacer />\r\n                <OfferCategoryRow\r\n                    category={OfferCategory.Meet}\r\n                    profileOffers={profile?.profileOffers}\r\n                    onApply={(profileOffers: OfferValueDto[]) => this.onFieldChanged({profileOffers})}\r\n                    theme={theme}\r\n                />\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <WavyHeader style={styles.header} color={theme.accent}>\r\n                    <EnlargeableAvatar\r\n                        profile={user?.profile}\r\n                        size={140}\r\n                        rounded\r\n                        containerStyle={styles.avatarContainer}\r\n                        activeOpacity={0.8}\r\n                    >\r\n                        {user && (\r\n                            <AvatarEditButton\r\n                                onPictureSelected={(imageInfo: ImageInfo) => {\r\n                                    (store.dispatch as MyThunkDispatch)(setAvatar(imageInfo));\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </EnlargeableAvatar>\r\n                    <Text style={styles.name}>{fullName}</Text>\r\n                    {user && (\r\n                        <FormattedUniversity\r\n                            containerStyle={styles.universityContainer}\r\n                            style={styles.university}\r\n                            university={getUniversityFromEmail(user.email)}\r\n                        />\r\n                    )}\r\n                </WavyHeader>\r\n                <ScrollFormWrapper contentStyle={styles.content}>\r\n                    <Text style={styles.title}>{i18n.t(\"myProfile\")}</Text>\r\n                    {profileFieldComponents}\r\n                    {!user && <ActivityIndicator size=\"large\" color={theme.accent} />}\r\n                </ScrollFormWrapper>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n// Map props from the store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    offers: state.profile.offers,\r\n    offerIdToCategory: state.profile.offerIdToCategory,\r\n}));\r\n\r\ntype OfferCategoryRowProps = {\r\n    category: OfferCategory;\r\n    profileOffers: OfferValueDto[] | undefined;\r\n    onApply: (offerValues: OfferValueDto[]) => void;\r\n    theme: Theme;\r\n} & ConnectedProps<typeof reduxConnector>;\r\n\r\nconst OfferCategoryRow = reduxConnector(\r\n    ({category, profileOffers, onApply, offers, offerIdToCategory, theme}: OfferCategoryRowProps): JSX.Element => {\r\n        const items = profileOffers?.filter((o) => offerIdToCategory.get(o.offerId) == category) || [];\r\n        return (\r\n            <ValueCard\r\n                blank={!profileOffers}\r\n                label={i18n.t(`offerCategories.${category}`)}\r\n                initialValue={profileOffers}\r\n                display={\r\n                    items.length > 0 ? (\r\n                        <Chips\r\n                            items={items}\r\n                            label={(item: OfferValueDto) => i18n.t(`allOffers.${item.offerId}.name`)}\r\n                        />\r\n                    ) : (\r\n                        <Text style={{color: theme.textLight}}>{i18n.t(\"profile.noOffersSelected\")}</Text>\r\n                    )\r\n                }\r\n                renderInput={(value: OfferValueDto[], error, onChange) => (\r\n                    <>\r\n                        {offers\r\n                            .filter((o) => o.category == category)\r\n                            .map((offer: OfferDto) => (\r\n                                <OfferControl\r\n                                    key={`profile-${offer.id}`}\r\n                                    offer={offer}\r\n                                    value={value.find((o) => o.offerId == offer.id) || initOfferValue(offer)}\r\n                                    onChange={(offerVal: OfferValueDto) => {\r\n                                        const updatedVal = value\r\n                                            .filter((o) => o.offerId != offer.id)\r\n                                            .concat([offerVal]);\r\n                                        onChange(updatedVal);\r\n                                    }}\r\n                                    style={{marginVertical: 10, width: \"100%\"}}\r\n                                />\r\n                            ))}\r\n                    </>\r\n                )}\r\n                apply={(profileOffers: OfferValueDto[]) => onApply(profileOffers)}\r\n            />\r\n        );\r\n    },\r\n);\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        // Header-related styles\r\n        header: {\r\n            alignItems: \"center\",\r\n        },\r\n        name: {\r\n            fontSize: 30,\r\n            color: theme.textWhite,\r\n            marginTop: 15,\r\n        },\r\n        university: {\r\n            fontSize: 14,\r\n            color: theme.textWhite,\r\n        },\r\n        universityContainer: {\r\n            marginVertical: 5,\r\n        },\r\n        avatarContainer: {\r\n            backgroundColor: theme.accentSecondary,\r\n            borderColor: theme.cardBackground,\r\n            borderWidth: 2,\r\n        },\r\n        avatarAccessory: {\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: 20,\r\n            borderWidth: 0,\r\n            borderColor: \"transparent\",\r\n            shadowRadius: 0,\r\n            textShadowRadius: 0,\r\n            color: \"#444\",\r\n        },\r\n\r\n        // Content-related style\r\n        content: {\r\n            width: \"90%\",\r\n            paddingTop: 85,\r\n            marginBottom: 40,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n            marginBottom: 20,\r\n            width: \"100%\",\r\n        },\r\n\r\n        cardText: {\r\n            color: theme.text,\r\n        },\r\n        staffRoleButton: {\r\n            marginTop: 10,\r\n        },\r\n        birthdateInputContainer: {\r\n            marginTop: 20,\r\n            marginBottom: 50,\r\n        },\r\n        birthdateInput: {\r\n            height: 50,\r\n            fontSize: 16,\r\n            borderRadius: 10,\r\n            backgroundColor: theme.cardBackground,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(EditProfileForm);\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport EditProfileForm from \"../components/forms/EditProfileForm\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {fetchUser, setProfileFields} from \"../state/profile/actions\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    user: state.profile.user,\r\n}));\r\n\r\ntype MyProfileScreenProps = ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps &\r\n    StackScreenProps<RootNavigatorScreens, \"MyProfileScreen\">;\r\n\r\nclass MyProfileScreen extends React.Component<MyProfileScreenProps> {\r\n    componentDidMount() {\r\n        this.props.navigation.addListener(\"focus\", () => this.onFocus());\r\n        this.onFocus();\r\n    }\r\n\r\n    onFocus() {\r\n        (this.props.dispatch as MyThunkDispatch)(fetchUser());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {user, dispatch} = this.props;\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <EditProfileForm\r\n                    user={user}\r\n                    onChange={(fields) => (dispatch as MyThunkDispatch)(setProfileFields(fields))}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(MyProfileScreen));\r\n","import * as React from \"react\";\r\nimport {StyleProp, Text, TextProps, TextStyle, View, ViewStyle} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Gender} from \"../constants/profile-constants\";\r\nimport {FontAwesome} from \"@expo/vector-icons\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\n\r\n// Component props\r\nexport type FormattedGenderProps = {\r\n    gender: Gender;\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    iconStyle?: StyleProp<TextStyle>;\r\n} & TextProps &\r\n    ThemeProps;\r\n\r\nclass FormattedGender extends React.Component<FormattedGenderProps> {\r\n    render(): JSX.Element {\r\n        const {gender, containerStyle, iconStyle, theme, ...otherProps} = this.props;\r\n\r\n        const icon = gender === \"female\" ? \"female\" : gender === \"male\" ? \"male\" : undefined;\r\n        return (\r\n            <View style={[{flexDirection: \"row\", alignItems: \"center\"}, containerStyle]}>\r\n                {icon && <FontAwesome name={icon} size={24} color={theme.textLight} style={iconStyle} />}\r\n                <Text {...otherProps} style={[{marginLeft: icon ? 10 : 0}, otherProps.style]}>\r\n                    {i18n.t(`genders.${gender}`)}\r\n                </Text>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(FormattedGender);\r\n","import * as React from \"react\";\r\nimport {ActivityIndicator, StyleSheet, Text, View} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ScrollView} from \"react-native\";\r\nimport {FormattedDate} from \"./FormattedDate\";\r\nimport FormattedNationality from \"./FormattedNationality\";\r\nimport FormattedUniversity from \"./FormattedUniversity\";\r\nimport {UserProfile, UserProfileStaff, UserProfileStudent} from \"../model/user-profile\";\r\nimport {PARTNER_UNIVERSITIES} from \"../constants/universities\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {StaffRole} from \"../constants/profile-constants\";\r\nimport ValueCard from \"./cards/ValueCard\";\r\nimport EnlargeableAvatar from \"./EnlargeableAvatar\";\r\nimport {OfferCategory, OfferValueDto, SpokenLanguageDto} from \"../api/dto\";\r\nimport FormattedGender from \"./FormattedGender\";\r\nimport Chips from \"./Chips\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../state/types\";\r\nimport WavyHeader from \"./headers/WavyHeader\";\r\n\r\n// Component props\r\nexport type ProfileViewProps = ThemeProps & {\r\n    profile: UserProfile | null;\r\n    actionBar?: JSX.Element;\r\n};\r\n\r\nfunction Spacer(): JSX.Element {\r\n    return <View style={{height: 25}}></View>;\r\n}\r\n\r\nclass ProfileView extends React.Component<ProfileViewProps> {\r\n    render() {\r\n        const {theme, profile, actionBar} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        const fullName = profile ? profile.firstName + \" \" + profile.lastName : \"\";\r\n        const university = profile ? PARTNER_UNIVERSITIES.find((u) => u.key === profile.university) : undefined;\r\n\r\n        const profileFieldComponents = (\r\n            <>\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"dateOfBirth\")}\r\n                    display={profile ? <FormattedDate style={styles.cardText} date={profile.birthdate} /> : <></>}\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"nationality\")}\r\n                    display={\r\n                        profile ? (\r\n                            <FormattedNationality style={styles.cardText} countryCode={profile.nationality} />\r\n                        ) : (\r\n                            <></>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"gender\")}\r\n                    display={profile ? <FormattedGender style={styles.cardText} gender={profile.gender} /> : <></>}\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"profileType\")}\r\n                    display={\r\n                        profile ? (\r\n                            <>\r\n                                <Text style={styles.cardText}>{i18n.t(`allRoles.${profile.type}`)}</Text>\r\n                                {profile.type == \"staff\" && (\r\n                                    <>\r\n                                        {(profile as UserProfileStaff).staffRoles.map((sr: StaffRole) => (\r\n                                            <Text key={`profile-staff-role-${sr}`}>{i18n.t(`staffRoles.${sr}`)}</Text>\r\n                                        ))}\r\n                                    </>\r\n                                )}\r\n                                {profile.type == \"student\" && (\r\n                                    <Text style={styles.cardText}>\r\n                                        {i18n.t(`degrees.${(profile as UserProfileStudent).degree}`)}\r\n                                    </Text>\r\n                                )}\r\n                            </>\r\n                        ) : (\r\n                            <></>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"fieldsOfEducation\")}\r\n                    display={\r\n                        profile ? (\r\n                            <Chips\r\n                                items={profile.educationFields}\r\n                                label={(item: string) => i18n.t(`educationFields.${item}`)}\r\n                            />\r\n                        ) : (\r\n                            <></>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"interests\")}\r\n                    display={\r\n                        profile ? (\r\n                            <Chips\r\n                                items={profile.interests}\r\n                                label={(item: string) => i18n.t(`interestNames.${item}`)}\r\n                            />\r\n                        ) : (\r\n                            <></>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <ValueCard\r\n                    blank={!profile}\r\n                    label={i18n.t(\"spokenLanguages\")}\r\n                    display={\r\n                        profile ? (\r\n                            <Chips\r\n                                items={profile.languages}\r\n                                label={(item: SpokenLanguageDto) =>\r\n                                    `${i18n.t(`languageNames.${item.code}`)} (${i18n.t(\r\n                                        `languageLevels.${item.level}`,\r\n                                    )})`\r\n                                }\r\n                            />\r\n                        ) : (\r\n                            <></>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n                <Spacer />\r\n                <OfferCategoryRow category={OfferCategory.Discover} profileOffers={profile?.profileOffers || null} />\r\n                <Spacer />\r\n                <OfferCategoryRow category={OfferCategory.Collaborate} profileOffers={profile?.profileOffers || null} />\r\n                <Spacer />\r\n                <OfferCategoryRow category={OfferCategory.Meet} profileOffers={profile?.profileOffers || null} />\r\n            </>\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <WavyHeader style={styles.header} color={theme.accent}>\r\n                    <EnlargeableAvatar\r\n                        profile={profile || undefined}\r\n                        size={120}\r\n                        rounded\r\n                        containerStyle={styles.avatarContainer}\r\n                        activeOpacity={0.8}\r\n                    />\r\n                    {!profile && (\r\n                        <ActivityIndicator size=\"large\" color={theme.textWhite} style={styles.loadingIndicator} />\r\n                    )}\r\n                    <Text style={styles.name}>{fullName}</Text>\r\n                    <FormattedUniversity\r\n                        containerStyle={styles.universityContainer}\r\n                        style={styles.university}\r\n                        university={university || null}\r\n                    />\r\n                    {actionBar}\r\n                </WavyHeader>\r\n                <ScrollView\r\n                    style={styles.scrollWrapper}\r\n                    contentContainerStyle={styles.formWrapper}\r\n                    keyboardShouldPersistTaps=\"handled\"\r\n                >\r\n                    {profileFieldComponents}\r\n                </ScrollView>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n// Map props from the store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    offerIdToCategory: state.profile.offerIdToCategory,\r\n}));\r\n\r\ntype OfferCategoryRowProps = {\r\n    category: OfferCategory;\r\n    profileOffers: OfferValueDto[] | null;\r\n} & ConnectedProps<typeof reduxConnector> &\r\n    ThemeProps;\r\n\r\nconst OfferCategoryRow = reduxConnector(\r\n    withTheme(\r\n        ({category, profileOffers, offerIdToCategory, theme}: OfferCategoryRowProps): JSX.Element => {\r\n            const items = profileOffers?.filter((o) => offerIdToCategory.get(o.offerId) == category) || [];\r\n            const styles = themedStyles(theme);\r\n\r\n            return (\r\n                <ValueCard\r\n                    blank={!profileOffers}\r\n                    label={i18n.t(`offerCategories.${category}`)}\r\n                    display={\r\n                        items.length > 0 ? (\r\n                            <Chips\r\n                                items={items}\r\n                                label={(item: OfferValueDto) => i18n.t(`allOffers.${item.offerId}.name`)}\r\n                            />\r\n                        ) : (\r\n                            <Text style={styles.cardText}>{i18n.t(\"profile.noOffersSelected\")}</Text>\r\n                        )\r\n                    }\r\n                    noModal={true}\r\n                />\r\n            );\r\n        },\r\n    ),\r\n);\r\n\r\nexport const themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        titleWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"flex-start\",\r\n            marginBottom: 20,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n        buttonSend: {\r\n            flex: 1,\r\n            backgroundColor: theme.accent,\r\n            marginLeft: 6,\r\n        },\r\n        header: {\r\n            alignItems: \"center\",\r\n        },\r\n        scrollWrapper: {\r\n            width: \"100%\",\r\n        },\r\n        formWrapper: {\r\n            width: \"90%\",\r\n            maxWidth: 600,\r\n            alignSelf: \"center\",\r\n            paddingTop: 80,\r\n            paddingBottom: 20,\r\n        },\r\n        loadingIndicator: {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            right: 0,\r\n            top: 140,\r\n        },\r\n        name: {\r\n            fontSize: 24,\r\n            color: theme.textWhite,\r\n            marginTop: 10,\r\n            height: 30,\r\n        },\r\n        university: {\r\n            fontSize: 14,\r\n            color: theme.textWhite,\r\n        },\r\n        universityContainer: {\r\n            height: 25,\r\n        },\r\n        avatarContainer: {\r\n            borderColor: theme.cardBackground,\r\n            borderWidth: 2,\r\n            backgroundColor: theme.accentSecondary,\r\n        },\r\n        cardText: {\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ProfileView);\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {UserProfile} from \"../../model/user-profile\";\r\nimport {MyThunkDispatch} from \"../../state/types\";\r\nimport {blockProfile, cancelMatchAction} from \"../../state/matching/actions\";\r\nimport store from \"../../state/store\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport Button from \"../Button\";\r\n\r\nexport type UnmatchProfileModalProps = ThemeProps &\r\n    Partial<CustomModalProps> & {\r\n        onSubmit?: (block: boolean) => void;\r\n        profile: UserProfile | null;\r\n        roomId: string | null;\r\n    };\r\n\r\ntype UnmatchProfileModalState = {block: boolean};\r\n\r\nclass UnmatchProfileModal extends React.Component<UnmatchProfileModalProps, UnmatchProfileModalState> {\r\n    constructor(props: UnmatchProfileModalProps) {\r\n        super(props);\r\n        this.state = {block: false};\r\n    }\r\n\r\n    render() {\r\n        const {theme, profile, roomId, onSubmit, ...otherProps} = this.props;\r\n        const {block} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                renderContent={(hide: () => void) =>\r\n                    profile ? (\r\n                        <>\r\n                            <Text style={styles.text}>\r\n                                {i18n.t(\"unmatch.text\", {firstname: profile.firstName, lastname: profile.lastName})}\r\n                            </Text>\r\n                            <Text style={styles.text}>\r\n                                {i18n.t(\"unmatch.blockQuestion\", {\r\n                                    firstname: profile.firstName,\r\n                                    lastname: profile.lastName,\r\n                                })}\r\n                            </Text>\r\n                            <TouchableOpacity\r\n                                style={styles.blockTouchable}\r\n                                onPress={() => this.setState({...this.state, block: !block})}\r\n                            >\r\n                                <CheckBox\r\n                                    containerStyle={styles.checkboxContainer}\r\n                                    checked={block}\r\n                                    onPress={() => this.setState({...this.state, block: !block})}\r\n                                />\r\n                                <Text style={styles.text}>{i18n.t(\"block.action\")}</Text>\r\n                            </TouchableOpacity>\r\n                            <View style={styles.actionButtonsWrapper}>\r\n                                <Button\r\n                                    text={i18n.t(\"cancel\")}\r\n                                    onPress={() => hide()}\r\n                                    skin=\"rounded-hollow\"\r\n                                    style={styles.actionButton}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"unmatch.action\")}\r\n                                    onPress={() => {\r\n                                        hide();\r\n                                        if (roomId) (store.dispatch as MyThunkDispatch)(cancelMatchAction(roomId));\r\n                                        if (block) (store.dispatch as MyThunkDispatch)(blockProfile(profile.id));\r\n                                        if (onSubmit) onSubmit(block);\r\n                                    }}\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.actionButton, styles.redBackground]}\r\n                                    textStyle={styles.actionText}\r\n                                />\r\n                            </View>\r\n                        </>\r\n                    ) : (\r\n                        <></>\r\n                    )\r\n                }\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        text: {\r\n            fontSize: 16,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n        blockTouchable: {\r\n            width: \"100%\",\r\n            marginTop: 5,\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        checkboxContainer: {\r\n            padding: 0,\r\n            marginLeft: 0,\r\n            marginRight: 5,\r\n        },\r\n\r\n        actionButtonsWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n        },\r\n        actionButton: {\r\n            flex: 1,\r\n            marginHorizontal: 7,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(UnmatchProfileModal);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View, TouchableOpacity} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {styleTextLight} from \"../styles/general\";\r\nimport BlockProfileModal from \"./modals/BlockProfileModal\";\r\nimport QuickFormReport from \"./forms/QuickFormReport\";\r\nimport {ReportEntityType} from \"../constants/reports\";\r\nimport UnmatchProfileModal from \"./modals/UnmatchProfileModal\";\r\nimport i18n from \"i18n-js\";\r\nimport {navigateBack, openChat} from \"../navigation/utils\";\r\n\r\nexport type ProfileActionBarProps = {\r\n    profile: UserProfile | null;\r\n    isMatched: boolean;\r\n    roomId: string | null;\r\n} & ThemeProps;\r\n\r\nfunction ProfileActionBar(props: ProfileActionBarProps): JSX.Element {\r\n    const {profile, isMatched, roomId, theme} = props;\r\n    const styles = themedStyles(theme);\r\n\r\n    let buttons;\r\n\r\n    const buttonBlock = (\r\n        <BlockProfileModal\r\n            profile={profile}\r\n            activator={(open) => (\r\n                <ActionButton blank={!profile} text={i18n.t(\"profile.action.block\")} icon=\"block\" onPress={open} />\r\n            )}\r\n        />\r\n    );\r\n\r\n    const buttonReport = (\r\n        <QuickFormReport\r\n            entity={profile}\r\n            entityType={ReportEntityType.PROFILE_ENTITY}\r\n            activator={(open) => (\r\n                <ActionButton blank={!profile} text={i18n.t(\"profile.action.report\")} icon=\"report\" onPress={open} />\r\n            )}\r\n        />\r\n    );\r\n\r\n    if (isMatched) {\r\n        const buttonChat = (\r\n            <ActionButton\r\n                blank={!profile}\r\n                text={i18n.t(\"profile.action.chat\")}\r\n                icon=\"chat\"\r\n                onPress={() => roomId && openChat(roomId)}\r\n            />\r\n        );\r\n\r\n        // TODO implement chat mute\r\n        /*const buttonMute = (\r\n            <ActionButton blank={!profile} text={i18n.t(\"profile.action.mute\")} icon=\"notifications-off\" />\r\n        );*/\r\n        const buttonMute = <></>;\r\n\r\n        const buttonUnmatch = (\r\n            <UnmatchProfileModal\r\n                profile={profile}\r\n                roomId={roomId}\r\n                onSubmit={(block: boolean) => {\r\n                    if (block) navigateBack();\r\n                }}\r\n                activator={(open) => (\r\n                    <ActionButton\r\n                        blank={!profile}\r\n                        text={i18n.t(\"profile.action.unmatch\")}\r\n                        icon=\"close\"\r\n                        onPress={open}\r\n                    />\r\n                )}\r\n            />\r\n        );\r\n\r\n        buttons = (\r\n            <>\r\n                {buttonChat}\r\n                {buttonMute}\r\n                {buttonUnmatch}\r\n                {buttonReport}\r\n            </>\r\n        );\r\n    } else {\r\n        buttons = (\r\n            <>\r\n                {buttonBlock}\r\n                {buttonReport}\r\n            </>\r\n        );\r\n    }\r\n\r\n    return <View style={styles.container}>{buttons}</View>;\r\n}\r\n\r\ntype ActionButtonProps = ThemeProps & {\r\n    text: string;\r\n    icon?: string;\r\n    onPress?: () => void;\r\n    blank?: boolean;\r\n};\r\n\r\nconst ActionButton = withTheme(\r\n    ({text, icon, onPress, blank, theme}: ActionButtonProps): JSX.Element => {\r\n        const styles = themedStyles(theme);\r\n        return (\r\n            <TouchableOpacity style={styles.button} activeOpacity={0.75} onPress={blank ? undefined : onPress}>\r\n                {icon && (\r\n                    <View style={[styles.buttonTop, blank ? styles.buttonTopBlank : {}]}>\r\n                        {!blank && <MaterialIcons name={icon} style={styles.buttonTopIcon} />}\r\n                    </View>\r\n                )}\r\n                <Text style={styles.buttonText}>{text}</Text>\r\n            </TouchableOpacity>\r\n        );\r\n    },\r\n);\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            width: \"100%\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n            marginTop: 20,\r\n        },\r\n        button: {\r\n            width: 75,\r\n            marginHorizontal: 10,\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n        },\r\n        buttonText: {\r\n            fontSize: 12,\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 0.5,\r\n            color: theme.textWhite,\r\n            ...styleTextLight,\r\n        },\r\n        buttonTop: {\r\n            fontSize: 24,\r\n            width: 36,\r\n            height: 36,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            borderRadius: 60,\r\n            marginBottom: 5,\r\n            backgroundColor: \"#fff4\",\r\n        },\r\n        buttonTopBlank: {\r\n            opacity: 0.4,\r\n            backgroundColor: \"transparent\",\r\n            borderColor: theme.textWhite,\r\n            borderWidth: 1,\r\n        },\r\n        buttonTopIcon: {\r\n            fontSize: 24,\r\n            color: theme.textInverted,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(ProfileActionBar);\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ProfileView from \"../components/ProfileView\";\r\nimport {UserProfile} from \"../model/user-profile\";\r\nimport {fetchProfile} from \"../state/profile/actions\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ProfileActionBar from \"../components/ProfileActionBar\";\r\n\r\nconst reduxConnector = connect(() => ({}));\r\n\r\n// Component props\r\ntype ProfileScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\n// Component state\r\ntype ProfileScreenState = {profile: UserProfile | null; isMatched: boolean; roomId: string | null};\r\n\r\nclass ProfileScreen extends React.Component<ProfileScreenProps, ProfileScreenState> {\r\n    constructor(props: ProfileScreenProps) {\r\n        super(props);\r\n        this.state = {profile: null, isMatched: false, roomId: null};\r\n    }\r\n\r\n    getRouteParams(): {[key: string]: string | boolean | number} {\r\n        const params = this.props.route.params;\r\n        return params ? (params as {[key: string]: string | boolean | number}) : {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {dispatch} = this.props;\r\n\r\n        this.props.navigation.addListener(\"focus\", () => {\r\n            const {id} = this.getRouteParams();\r\n            if (id && (!this.state.profile || this.state.profile.id !== id)) {\r\n                (dispatch as MyThunkDispatch)(fetchProfile(id as string)).then((profileWithMatchInfo) => {\r\n                    if (profileWithMatchInfo) {\r\n                        const {profile, isMatched, roomId} = profileWithMatchInfo;\r\n                        this.setState({...this.state, profile, isMatched, roomId});\r\n                    } else this.setState({...this.state, profile: null, isMatched: false, roomId: null});\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {profile, isMatched, roomId} = this.state;\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ProfileView\r\n                    profile={profile}\r\n                    actionBar={<ProfileActionBar profile={profile} isMatched={isMatched} roomId={roomId} />}\r\n                />\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(withTheme(ProfileScreen));\r\n","import * as React from \"react\";\r\nimport i18n from \"i18n-js\";\r\nimport {StyleProp, StyleSheet, TextStyle, ViewStyle} from \"react-native\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport PopUpSelector from \"./PopUpSelector\";\r\nimport {SupportedLocale, SUPPORTED_LOCALES} from \"../localization\";\r\n\r\n// Component props\r\nexport type LocalePickerProps = {\r\n    locale?: SupportedLocale;\r\n    onChange?: (locale: SupportedLocale) => void;\r\n    buttonStyle?: StyleProp<ViewStyle>;\r\n    valueStyle?: StyleProp<TextStyle>;\r\n} & ThemeProps;\r\n\r\nclass LocalePicker extends React.Component<LocalePickerProps> {\r\n    render(): JSX.Element {\r\n        const {onChange, locale, theme, buttonStyle, valueStyle} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <PopUpSelector\r\n                values={SUPPORTED_LOCALES}\r\n                label={(l: string) => i18n.t(`locales.${l}`)}\r\n                selected={locale ? [locale] : []}\r\n                valueStyle={[styles.value, valueStyle]}\r\n                buttonStyle={buttonStyle}\r\n                onSelect={(values: string[]) => {\r\n                    if (values.length > 0 && onChange) onChange(values[0] as SupportedLocale);\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        value: {\r\n            letterSpacing: 0.5,\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(LocalePicker);\r\n","import * as React from \"react\";\r\nimport {ImageProps, Image} from \"react-native\";\r\nimport {getLocalImage} from \"../assets\";\r\n\r\n// Component props\r\nexport type LocalImageProps = Partial<ImageProps> & {imageKey: string};\r\n\r\nclass LocalImage extends React.Component<LocalImageProps> {\r\n    render(): JSX.Element {\r\n        const {imageKey, ...otherProps} = this.props;\r\n        const img = getLocalImage(imageKey, () => this.forceUpdate());\r\n        return img ? <Image source={img} {...otherProps} /> : <></>;\r\n    }\r\n}\r\n\r\nexport default LocalImage;\r\n","import {SupportedLocale} from \"../localization\";\r\nimport {ThemeKey} from \"../types\";\r\n\r\nexport type CookiesPreferences = {\r\n    auth: boolean;\r\n    cache: boolean;\r\n    settings: boolean;\r\n};\r\n\r\nexport const COOKIES_PREFERENCES_KEYS = [\"auth\", \"cache\", \"settings\"];\r\n\r\nexport type UserSettings = {\r\n    theme: ThemeKey;\r\n    locale: SupportedLocale;\r\n    cookies: CookiesPreferences;\r\n    cookieConsentDate: Date | null;\r\n};\r\n","import React from \"react\";\r\nimport {Text, View, StyleSheet, TouchableOpacity} from \"react-native\";\r\nimport CustomModal, {CustomModalProps} from \"./CustomModal\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../../types\";\r\nimport {CheckBox, withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport {AppState} from \"../../state/types\";\r\nimport store from \"../../state/store\";\r\nimport {CookiesPreferences, COOKIES_PREFERENCES_KEYS} from \"../../model/user-settings\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {saveCookiesPreferences} from \"../../state/settings/actions\";\r\nimport Button from \"../Button\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    cookies: state.settings.userSettings.cookies,\r\n}));\r\n\r\n// Component props\r\nexport type CustomizeCookiesModalProps = ThemeProps & Partial<CustomModalProps> & ConnectedProps<typeof reduxConnector>;\r\n\r\n// Component state\r\nexport type CustomizeCookiesModalState = {cookies: CookiesPreferences};\r\n\r\nclass CustomizeCookiesModal extends React.Component<CustomizeCookiesModalProps, CustomizeCookiesModalState> {\r\n    constructor(props: CustomizeCookiesModalProps) {\r\n        super(props);\r\n        this.state = {cookies: props.cookies};\r\n    }\r\n\r\n    private onShow(): void {\r\n        const storeCookies = this.props.cookies as {[key: string]: boolean};\r\n        const localCookies = this.state.cookies as {[key: string]: boolean};\r\n\r\n        // Update component cookies state with the state from the store if it is different\r\n        const changed = Object.keys(storeCookies).some((key: string) => storeCookies[key] != localCookies[key]);\r\n        if (changed) this.setState({...this.state, cookies: this.props.cookies});\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, ...otherProps} = this.props;\r\n        const {cookies} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        const cookieDict = this.state.cookies as {[key: string]: boolean};\r\n\r\n        const toggleCookie = (key: string) =>\r\n            this.setState({...this.state, cookies: {...cookies, [key]: !cookieDict[key]}});\r\n\r\n        return (\r\n            <CustomModal\r\n                {...otherProps}\r\n                modalViewStyle={[{paddingHorizontal: 20, alignItems: \"flex-start\"}, otherProps.modalViewStyle]}\r\n                onShow={() => {\r\n                    this.onShow();\r\n                    if (otherProps.onShow) otherProps.onShow();\r\n                }}\r\n                renderContent={(hide: () => void) => (\r\n                    <>\r\n                        <Text style={styles.title}>Cookies</Text>\r\n                        <Text style={styles.text}>\r\n                            We offer you the ability to choose what information will be stored on your device when using\r\n                            SEA-EU Around.\r\n                        </Text>\r\n                        {COOKIES_PREFERENCES_KEYS.map((k) => (\r\n                            <View style={styles.preferenceRow} key={`cookie-preference-${k}`}>\r\n                                <TouchableOpacity style={styles.preferenceRowButton} onPress={() => toggleCookie(k)}>\r\n                                    <CheckBox\r\n                                        checked={cookieDict[k]}\r\n                                        containerStyle={styles.checkBoxContainer}\r\n                                        onPress={() => toggleCookie(k)}\r\n                                    />\r\n                                    <Text style={styles.preferenceName}>{i18n.t(`cookies.preferences.${k}.name`)}</Text>\r\n                                </TouchableOpacity>\r\n                                <Text style={styles.preferenceDescription}>\r\n                                    {i18n.t(`cookies.preferences.${k}.description`)}\r\n                                </Text>\r\n                            </View>\r\n                        ))}\r\n                        <View style={styles.actions}>\r\n                            <Button\r\n                                text={i18n.t(\"save\")}\r\n                                onPress={() => {\r\n                                    hide();\r\n                                    store.dispatch(saveCookiesPreferences(cookies));\r\n                                }}\r\n                                skin=\"rounded-filled\"\r\n                                textStyle={styles.buttonText}\r\n                                style={styles.button}\r\n                            />\r\n                            <Button\r\n                                text={i18n.t(\"cancel\")}\r\n                                onPress={() => {\r\n                                    hide();\r\n                                    this.setState({...this.state, cookies: this.props.cookies});\r\n                                }}\r\n                                skin=\"rounded-hollow\"\r\n                                textStyle={styles.buttonText}\r\n                                style={styles.button}\r\n                            />\r\n                        </View>\r\n                    </>\r\n                )}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        title: {\r\n            fontSize: 20,\r\n            textAlign: \"left\",\r\n            marginBottom: 10,\r\n            color: theme.text,\r\n        },\r\n        text: {\r\n            fontSize: 14,\r\n            lineHeight: 18,\r\n            textAlign: \"justify\",\r\n            color: theme.text,\r\n        },\r\n\r\n        preferenceRow: {\r\n            marginTop: 10,\r\n        },\r\n        preferenceRowButton: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n        },\r\n        checkBoxContainer: {\r\n            marginLeft: 0,\r\n            marginRight: 5,\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            paddingVertical: 0,\r\n        },\r\n        preferenceName: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n        },\r\n        preferenceDescription: {\r\n            fontSize: 14,\r\n            color: theme.textLight,\r\n        },\r\n\r\n        actions: {\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n            width: \"100%\",\r\n            maxWidth: 350,\r\n        },\r\n        button: {\r\n            flex: 1,\r\n            height: 40,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        buttonText: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(CustomizeCookiesModal));\r\n","import {StackScreenProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport {Alert, ScrollView, StyleSheet, Switch, Text, View} from \"react-native\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ValueCard from \"../components/cards/ValueCard\";\r\nimport i18n from \"i18n-js\";\r\nimport {FontAwesome, MaterialCommunityIcons, MaterialIcons} from \"@expo/vector-icons\";\r\nimport {AppState} from \"../state/types\";\r\nimport {setLocale, toggleTheme} from \"../state/settings/actions\";\r\nimport LocalePicker from \"../components/LocalePicker\";\r\nimport {SupportedLocale} from \"../localization\";\r\nimport {APP_VERSION} from \"../constants/config\";\r\nimport LocalImage from \"../components/LocalImage\";\r\nimport {logout} from \"../state/auth/actions\";\r\nimport {rootNavigate} from \"../navigation/utils\";\r\nimport CustomizeCookiesModal from \"../components/modals/CustomizeCookiesModal\";\r\nimport Button from \"../components/Button\";\r\n\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    settings: state.settings.userSettings,\r\n}));\r\n\r\n// Component props\r\ntype SettingsScreenProps = ConnectedProps<typeof reduxConnector> & ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nlet versionClickCount = 0;\r\n\r\nclass SettingsScreen extends React.Component<SettingsScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme, settings, dispatch} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollView style={styles.scroll} contentContainerStyle={styles.container}>\r\n                    <Section theme={theme} title={i18n.t(\"settings.sections.general\")}>\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.language\")}\r\n                            icon={<FontAwesome name=\"language\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            display={\r\n                                <LocalePicker\r\n                                    locale={settings.locale}\r\n                                    onChange={(l: SupportedLocale) => {\r\n                                        if (l == \"fr\") {\r\n                                            // TEMP FR Translation disclaimer\r\n                                            Alert.alert(\r\n                                                \"Disclaimer\",\r\n                                                \"The application has not been translated to french yet.\",\r\n                                            );\r\n                                        }\r\n                                        dispatch(setLocale(l));\r\n                                    }}\r\n                                    buttonStyle={styles.localeButton}\r\n                                    valueStyle={styles.localButtonValue}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.darkTheme\")}\r\n                            icon={<MaterialCommunityIcons name=\"theme-light-dark\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            onPress={() => dispatch(toggleTheme())}\r\n                            display={\r\n                                <Switch\r\n                                    value={settings.theme === \"dark\"}\r\n                                    onValueChange={() => dispatch(toggleTheme())}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.logOut\")}\r\n                            icon={<MaterialCommunityIcons name=\"logout\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            display={\r\n                                <Button\r\n                                    text={i18n.t(\"settings.logOut\")}\r\n                                    onPress={() => dispatch(logout())}\r\n                                    skin=\"rounded-filled\"\r\n                                    textStyle={styles.cardButtonText}\r\n                                    style={[styles.oneLineCardButton, styles.redBackground]}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.customizeCookies\")}\r\n                            icon={<MaterialCommunityIcons name=\"cookie\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            overrideModal={(hide) => <CustomizeCookiesModal visible={true} onHide={hide} />}\r\n                        />\r\n                    </Section>\r\n                    <Section\r\n                        theme={theme}\r\n                        title={i18n.t(\"settings.sections.about\")}\r\n                        icon={{name: \"info\", color: theme.accent}}\r\n                    >\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.version\")}\r\n                            oneLine={true}\r\n                            onPress={() => {\r\n                                // Easter-egg trigger\r\n                                versionClickCount++;\r\n                                if (versionClickCount === 7) {\r\n                                    versionClickCount = 0;\r\n                                    Alert.alert(\"Insert easter egg here\");\r\n                                }\r\n                                setTimeout(() => (versionClickCount = Math.max(0, versionClickCount - 1)), 3000);\r\n                            }}\r\n                            display={<Text style={styles.infoText}>{APP_VERSION}</Text>}\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.termsOfService\")}\r\n                            oneLine={true}\r\n                            onPress={() => Alert.alert(\"Not implemented\")} // TODO Implement TOS link\r\n                            display={<Text style={styles.infoText}>{\"\"}</Text>}\r\n                            noModal={true}\r\n                        />\r\n                        <ValueCard\r\n                            style={styles.card}\r\n                            label={i18n.t(\"settings.reportABug\")}\r\n                            icon={<MaterialIcons name=\"bug-report\" style={styles.cardIcon} />}\r\n                            oneLine={true}\r\n                            onPress={() => Alert.alert(\"Not implemented\")} // TODO Implement bug reports\r\n                            display={<Text style={styles.infoText}>{\"\"}</Text>}\r\n                            noModal={true}\r\n                        />\r\n                    </Section>\r\n                    <Section\r\n                        theme={theme}\r\n                        title={i18n.t(\"settings.sections.danger\")}\r\n                        icon={{name: \"warning\", color: theme.warn}}\r\n                    >\r\n                        <ValueCard\r\n                            style={[styles.card, {height: 100}]}\r\n                            label={i18n.t(\"settings.deleteAccount\")}\r\n                            display={\r\n                                <Button\r\n                                    text={i18n.t(\"settings.deleteMyAccount\")}\r\n                                    onPress={() => rootNavigate(\"DeleteAccountScreen\")}\r\n                                    skin=\"rounded-filled\"\r\n                                    style={[styles.cardButton, styles.redBackground]}\r\n                                    textStyle={styles.cardButtonText}\r\n                                />\r\n                            }\r\n                            noModal={true}\r\n                        />\r\n                    </Section>\r\n                    <View style={styles.logosContainer}>\r\n                        <LocalImage\r\n                            imageKey=\"logos.sea-eu-around.small\"\r\n                            resizeMode=\"contain\"\r\n                            style={[styles.logo, styles.logoSeaEuAround]}\r\n                        />\r\n                        <LocalImage\r\n                            imageKey=\"logos.erasmusLeft\"\r\n                            resizeMode=\"contain\"\r\n                            style={[styles.logo, styles.logoErasmus]}\r\n                        />\r\n                    </View>\r\n                </ScrollView>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\ntype SectionProps = {\r\n    theme: Theme;\r\n    title: string;\r\n    icon?: {name: string; color: string};\r\n};\r\n\r\nclass Section extends React.Component<SectionProps> {\r\n    render(): JSX.Element {\r\n        const {title, icon, theme, children} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <View style={styles.section}>\r\n                <View style={styles.sectionTitleContainer}>\r\n                    {icon && <MaterialIcons name={icon.name} color={icon.color} style={styles.sectionIcon} />}\r\n                    <Text style={styles.sectionTitle}>{title}</Text>\r\n                </View>\r\n                {children}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        scroll: {\r\n            flex: 1,\r\n            width: \"100%\",\r\n        },\r\n        container: {\r\n            width: \"100%\",\r\n            maxWidth: 700,\r\n            alignSelf: \"center\",\r\n            paddingTop: 10,\r\n            paddingBottom: 50,\r\n            paddingHorizontal: 20,\r\n        },\r\n        section: {\r\n            paddingVertical: 10,\r\n            justifyContent: \"flex-start\",\r\n        },\r\n        sectionTitleContainer: {\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            marginBottom: 10,\r\n        },\r\n        sectionTitle: {\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: 1,\r\n            fontSize: 11,\r\n            color: theme.textLight,\r\n        },\r\n        sectionIcon: {\r\n            fontSize: 16,\r\n            marginRight: 5,\r\n        },\r\n        card: {\r\n            marginVertical: 6,\r\n            height: 60,\r\n        },\r\n        cardIcon: {\r\n            marginRight: 6,\r\n            padding: 0,\r\n            fontSize: 18,\r\n            color: theme.textLight,\r\n        },\r\n        localeButton: {\r\n            height: 30,\r\n        },\r\n        localButtonValue: {\r\n            fontSize: 14,\r\n            marginHorizontal: 10,\r\n        },\r\n        cardButton: {\r\n            height: 42,\r\n            marginVertical: 0,\r\n        },\r\n        oneLineCardButton: {\r\n            width: 120,\r\n            height: 40,\r\n            marginVertical: 0,\r\n        },\r\n        cardButtonText: {\r\n            fontSize: 16,\r\n        },\r\n        redBackground: {\r\n            backgroundColor: theme.error,\r\n        },\r\n\r\n        infoText: {\r\n            color: theme.text,\r\n            fontSize: 16,\r\n        },\r\n        logosContainer: {},\r\n        logo: {\r\n            marginTop: 30,\r\n            width: \"100%\",\r\n        },\r\n        logoErasmus: {height: 40},\r\n        logoSeaEuAround: {height: 60},\r\n        /*logoJA: {height: 40},\r\n        developedBy: {\r\n            textTransform: \"uppercase\",\r\n            textAlign: \"center\",\r\n            letterSpacing: 1,\r\n            fontSize: 11,\r\n            color: theme.textLight,\r\n            marginTop: 40,\r\n        },*/\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(SettingsScreen));\r\n","import * as React from \"react\";\r\nimport {Text, View, StyleSheet} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport store from \"../state/store\";\r\nimport {logout} from \"../state/auth/actions\";\r\nimport {MaterialCommunityIcons} from \"@expo/vector-icons\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport Button from \"../components/Button\";\r\n\r\ntype DeleteAccountSuccessScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass DeleteAccountSuccessScreen extends React.Component<DeleteAccountSuccessScreenProps> {\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <ScreenWrapper>\r\n                <View style={styles.container}>\r\n                    <Text style={styles.successText}>{i18n.t(\"deleteAccount.success1\")}</Text>\r\n                    <Text style={styles.successText}>{i18n.t(\"deleteAccount.success2\")}</Text>\r\n                    <Button\r\n                        text={i18n.t(\"deleteAccount.leave\")}\r\n                        icon={<MaterialCommunityIcons name=\"logout\" style={styles.buttonIcon} />}\r\n                        onPress={() => store.dispatch(logout())}\r\n                        skin=\"rounded-filled\"\r\n                        style={styles.button}\r\n                    />\r\n                </View>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"75%\",\r\n        },\r\n        successText: {\r\n            fontSize: 18,\r\n            lineHeight: 25,\r\n            marginTop: 20,\r\n            textAlign: \"center\",\r\n            color: theme.text,\r\n        },\r\n        button: {\r\n            marginTop: 30,\r\n            backgroundColor: theme.error,\r\n        },\r\n        buttonIcon: {\r\n            fontSize: 20,\r\n            color: theme.textWhite,\r\n            marginLeft: 5,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(DeleteAccountSuccessScreen);\r\n","import * as React from \"react\";\r\nimport {StyleSheet, Text, View} from \"react-native\";\r\nimport i18n from \"i18n-js\";\r\nimport * as Yup from \"yup\";\r\nimport {Formik, FormikProps} from \"formik\";\r\nimport {FormTextInput} from \"../forms/FormTextInput\";\r\nimport {VALIDATOR_PASSWORD_LOGIN} from \"../../validators\";\r\nimport {getLoginTextInputsStyleProps} from \"../../styles/forms\";\r\nimport {FormProps, Theme, ThemeProps} from \"../../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {preTheme} from \"../../styles/utils\";\r\nimport store from \"../../state/store\";\r\nimport {MyThunkDispatch, ValidatedActionReturn} from \"../../state/types\";\r\nimport FormSubmitButton from \"./FormSubmitButton\";\r\nimport FormError from \"./FormError\";\r\nimport {generalError, localizeError} from \"../../api/errors\";\r\nimport {RemoteValidationErrors} from \"../../api/dto\";\r\nimport {MaterialIcons} from \"@expo/vector-icons\";\r\nimport {deleteAccount} from \"../../state/auth/actions\";\r\n\r\ntype FormState = {password: string};\r\n\r\nconst initialState = (): FormState => ({password: \"\"});\r\n\r\n// Use Yup to create the validation schema\r\nconst DeleteAccountFormSchema = Yup.object().shape({\r\n    password: VALIDATOR_PASSWORD_LOGIN,\r\n});\r\n\r\n// Component props\r\ntype DeleteAccountFormProps = FormProps<FormState> & ThemeProps;\r\n\r\n// Component state\r\ntype DeleteAccountFormState = {remoteErrors?: RemoteValidationErrors; submitting: boolean};\r\n\r\nclass DeleteAccountForm extends React.Component<DeleteAccountFormProps, DeleteAccountFormState> {\r\n    setFieldError?: (field: string, message: string) => void;\r\n\r\n    constructor(props: DeleteAccountFormProps) {\r\n        super(props);\r\n        this.state = {submitting: false};\r\n    }\r\n\r\n    submit(values: FormState) {\r\n        const {onSuccessfulSubmit} = this.props;\r\n        this.setState({...this.state, submitting: true});\r\n        (store.dispatch as MyThunkDispatch)(deleteAccount(values.password)).then(\r\n            ({success, errors}: ValidatedActionReturn) => {\r\n                if (success && onSuccessfulSubmit) onSuccessfulSubmit(values);\r\n                if (errors && errors.fields) {\r\n                    const f = errors.fields;\r\n                    Object.keys(f).forEach((e) => this.setFieldError && this.setFieldError(e, localizeError(f[e])));\r\n                }\r\n                this.setState({remoteErrors: errors, submitting: false});\r\n            },\r\n        );\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const {remoteErrors, submitting} = this.state;\r\n        const styles = themedStyles(theme);\r\n\r\n        return (\r\n            <>\r\n                <View style={styles.titleWrapper}>\r\n                    <Text style={styles.title}>{i18n.t(\"deleteAccount.title\")}</Text>\r\n                    <MaterialIcons name=\"warning\" style={styles.warningIcon} />\r\n                    <Text style={styles.warning}>{i18n.t(\"deleteAccount.warning\")}</Text>\r\n                </View>\r\n                <Formik\r\n                    initialValues={initialState()}\r\n                    validationSchema={DeleteAccountFormSchema}\r\n                    validateOnChange={true}\r\n                    validateOnBlur={false}\r\n                    onSubmit={(values) => this.submit(values)}\r\n                >\r\n                    {(formikProps: FormikProps<FormState>) => {\r\n                        const {\r\n                            handleSubmit,\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            setFieldError,\r\n                        } = formikProps;\r\n                        const textInputProps = {handleChange, handleBlur, ...getLoginTextInputsStyleProps(theme, 15)};\r\n                        this.setFieldError = setFieldError;\r\n\r\n                        return (\r\n                            <>\r\n                                <FormTextInput\r\n                                    field=\"password\"\r\n                                    placeholder={i18n.t(\"password\")}\r\n                                    error={errors.password}\r\n                                    value={values.password}\r\n                                    touched={touched.password}\r\n                                    label={i18n.t(\"deleteAccount.inputLabel\")}\r\n                                    isPassword={true}\r\n                                    {...textInputProps}\r\n                                />\r\n\r\n                                <FormError error={generalError(remoteErrors)} />\r\n\r\n                                <FormSubmitButton\r\n                                    onPress={() => handleSubmit()}\r\n                                    style={styles.button}\r\n                                    skin=\"rounded-filled\"\r\n                                    text={i18n.t(\"deleteAccount.button\")}\r\n                                    submitting={submitting}\r\n                                />\r\n                            </>\r\n                        );\r\n                    }}\r\n                </Formik>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        titleWrapper: {\r\n            width: \"100%\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"flex-start\",\r\n            marginBottom: 20,\r\n        },\r\n        title: {\r\n            fontSize: 22,\r\n            color: theme.text,\r\n        },\r\n        warning: {\r\n            fontSize: 16,\r\n            color: theme.text,\r\n            textAlign: \"justify\",\r\n        },\r\n        warningIcon: {\r\n            color: theme.warn,\r\n            fontSize: 32,\r\n            marginTop: 20,\r\n        },\r\n        button: {\r\n            backgroundColor: theme.error,\r\n            marginTop: 30,\r\n        },\r\n    });\r\n});\r\n\r\nexport default withTheme(DeleteAccountForm);\r\n","import * as React from \"react\";\r\nimport {ThemeProps} from \"../types\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport {StackScreenProps} from \"@react-navigation/stack\";\r\nimport DeleteAccountForm from \"../components/forms/DeleteAccountForm\";\r\nimport ScreenWrapper from \"./ScreenWrapper\";\r\nimport ScrollFormWrapper from \"../components/forms/ScrollFormWrapper\";\r\n\r\ntype DeleteAccountScreenProps = ThemeProps & StackScreenProps<RootNavigatorScreens>;\r\n\r\nclass DeleteAccountScreen extends React.Component<DeleteAccountScreenProps> {\r\n    render(): JSX.Element {\r\n        return (\r\n            <ScreenWrapper>\r\n                <ScrollFormWrapper>\r\n                    <DeleteAccountForm />\r\n                </ScrollFormWrapper>\r\n            </ScreenWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTheme(DeleteAccountScreen);\r\n","/* eslint-disable react/display-name */\r\nimport {NavigationContainer, DefaultTheme, DarkTheme} from \"@react-navigation/native\";\r\nimport {CardStyleInterpolators, createStackNavigator, StackHeaderProps} from \"@react-navigation/stack\";\r\nimport * as React from \"react\";\r\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\r\nimport ValidateEmailScreen from \"../screens/ValidateEmailScreen\";\r\nimport ValidationEmailSentScreen from \"../screens/ValidationEmailSentScreen\";\r\nimport {RootNavigatorScreens} from \"../navigation/types\";\r\nimport LinkingConfiguration from \"./linking-config\";\r\nimport LoginNavigator from \"./LoginNavigator\";\r\nimport MainNavigator from \"./MainNavigator\";\r\nimport OnboardingNavigator from \"./OnboardingNavigator\";\r\nimport {rootNavigationRef, screenTitle} from \"./utils\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {ThemeProps} from \"../types\";\r\nimport OnboardingSuccessfulScreen from \"../screens/onboarding/OnboardingSuccessfulScreen\";\r\nimport MatchSuccessScreen from \"../screens/MatchSuccessScreen\";\r\nimport {AppState, AppStateStatus, Platform} from \"react-native\";\r\nimport ResetPasswordScreen from \"../screens/ResetPasswordScreen\";\r\nimport ForgotPasswordEmailSentScreen from \"../screens/ForgotPasswordEmailSentScreen\";\r\nimport ResetPasswordSuccessScreen from \"../screens/ResetPasswordSuccessScreen\";\r\nimport MyProfileScreen from \"../screens/MyProfileScreen\";\r\nimport ProfileScreen from \"../screens/ProfileScreen\";\r\nimport {CHAT_CONNECTED_ROUTES} from \"../constants/config\";\r\nimport {MyThunkDispatch} from \"../state/types\";\r\nimport {connectToChat, disconnectFromChat} from \"../state/messaging/actions\";\r\nimport store from \"../state/store\";\r\nimport MainHeader from \"../components/headers/MainHeader\";\r\nimport SettingsScreen from \"../screens/SettingsScreen\";\r\nimport DeleteAccountSuccessScreen from \"../screens/DeleteAccountSuccessScreen\";\r\nimport DeleteAccountScreen from \"../screens/DeleteAccountScreen\";\r\n\r\ntype RootNavigationProps = React.PropsWithRef<ThemeProps & {initialRoute?: keyof RootNavigatorScreens}> & {\r\n    onReady?: () => void;\r\n};\r\n\r\n// The root stack navigator\r\nconst Stack = createStackNavigator<RootNavigatorScreens>();\r\n\r\nlet consumedInitialRoute = false;\r\nlet previousRoute: string | undefined = undefined;\r\nlet previousAppStatus: AppStateStatus;\r\n\r\n// Handle route changes\r\nfunction onStateChange() {\r\n    const route = rootNavigationRef.current?.getCurrentRoute();\r\n    if (route) {\r\n        const toChat = CHAT_CONNECTED_ROUTES.find((r) => r === route.name);\r\n        const fromChat = previousRoute && CHAT_CONNECTED_ROUTES.find((r) => r === previousRoute);\r\n        if (!fromChat && toChat) (store.dispatch as MyThunkDispatch)(connectToChat());\r\n        if (fromChat && !toChat) (store.dispatch as MyThunkDispatch)(disconnectFromChat());\r\n        previousRoute = route.name;\r\n    }\r\n}\r\n\r\n// Handle app state changes (active / inactive)\r\nfunction onAppStateChange(status: AppStateStatus) {\r\n    const state = store.getState();\r\n    const dispatch = store.dispatch as MyThunkDispatch;\r\n    const connectedToChat = state.messaging.socketState.connected;\r\n\r\n    // If the app is now active\r\n    if (previousAppStatus !== \"active\" && status === \"active\") {\r\n        // Reconnect to chat if needed\r\n        const isChat = CHAT_CONNECTED_ROUTES.find((r) => r === previousRoute);\r\n        if (isChat && !connectedToChat) dispatch(connectToChat());\r\n    }\r\n\r\n    // If the app is no longer active\r\n    if (previousAppStatus === \"active\" && status !== \"active\") {\r\n        // Disconnect from the chat\r\n        if (connectedToChat) dispatch(disconnectFromChat());\r\n    }\r\n    previousAppStatus = status;\r\n}\r\n\r\nfunction Navigation({theme, initialRoute, onReady}: RootNavigationProps): JSX.Element {\r\n    // Ensure we do not go back to the initial route when the navigation container updates (e.g. on theme change)\r\n    const initialRouteName = consumedInitialRoute ? (previousRoute as keyof RootNavigatorScreens) : initialRoute;\r\n    consumedInitialRoute = true;\r\n\r\n    const reactNavigationTheme = {\r\n        dark: theme.id === \"dark\",\r\n        colors: {\r\n            ...(theme.id === \"dark\" ? DarkTheme : DefaultTheme).colors,\r\n            background: theme.background,\r\n        },\r\n    };\r\n\r\n    return (\r\n        <NavigationContainer\r\n            ref={rootNavigationRef}\r\n            linking={LinkingConfiguration}\r\n            theme={reactNavigationTheme}\r\n            onReady={() => {\r\n                AppState.addEventListener(\"change\", onAppStateChange);\r\n                onStateChange();\r\n                if (onReady) onReady();\r\n            }}\r\n            onStateChange={onStateChange}\r\n        >\r\n            <Stack.Navigator screenOptions={{headerShown: false}} initialRouteName={initialRouteName}>\r\n                <Stack.Screen name=\"LoginScreen\" component={LoginNavigator} />\r\n                <Stack.Screen\r\n                    name=\"ForgotPasswordEmailSentScreen\"\r\n                    component={ForgotPasswordEmailSentScreen}\r\n                    options={{title: screenTitle(\"ForgotPasswordEmailSentScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ValidationEmailSentScreen\"\r\n                    component={ValidationEmailSentScreen}\r\n                    options={{title: screenTitle(\"ValidationEmailSentScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ValidateEmailScreen\"\r\n                    component={ValidateEmailScreen}\r\n                    options={{title: screenTitle(\"ValidateEmailScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ResetPasswordScreen\"\r\n                    component={ResetPasswordScreen}\r\n                    options={{title: screenTitle(\"ResetPasswordScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ResetPasswordSuccessScreen\"\r\n                    component={ResetPasswordSuccessScreen}\r\n                    options={{title: screenTitle(\"ResetPasswordSuccessScreen\")}}\r\n                />\r\n                <Stack.Screen name=\"MainScreen\" component={MainNavigator} />\r\n                <Stack.Screen\r\n                    name=\"MyProfileScreen\"\r\n                    component={MyProfileScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"MyProfileScreen\"),\r\n                        header: (props: StackHeaderProps) => (\r\n                            <MainHeader\r\n                                {...props}\r\n                                backButton={true}\r\n                                noAvatar={true}\r\n                                noShadow={true}\r\n                                buttonBackgroundColor={theme.accent}\r\n                                wrapperStyle={{backgroundColor: theme.accent}}\r\n                                color={theme.textWhite}\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"ProfileScreen\"\r\n                    component={ProfileScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"ProfileScreen\"),\r\n                        header: (props: StackHeaderProps) => (\r\n                            <MainHeader\r\n                                {...props}\r\n                                backButton={true}\r\n                                noShadow={true}\r\n                                buttonBackgroundColor={theme.accent}\r\n                                wrapperStyle={{backgroundColor: theme.accent}}\r\n                                color={theme.textWhite}\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"SettingsScreen\"\r\n                    component={SettingsScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"SettingsScreen\"),\r\n                        header: (props: StackHeaderProps) => (\r\n                            <MainHeader {...props} backButton={true} noSettingsButton={true} />\r\n                        ),\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"DeleteAccountScreen\"\r\n                    component={DeleteAccountScreen}\r\n                    options={{\r\n                        headerShown: true,\r\n                        title: screenTitle(\"DeleteAccountScreen\"),\r\n                        header: (props: StackHeaderProps) => <MainHeader {...props} backButton={true} />,\r\n                    }}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"DeleteAccountSuccessScreen\"\r\n                    component={DeleteAccountSuccessScreen}\r\n                    options={{title: screenTitle(\"DeleteAccountSuccessScreen\")}}\r\n                />\r\n                <Stack.Screen name=\"OnboardingScreen\" component={OnboardingNavigator} />\r\n                <Stack.Screen\r\n                    name=\"OnboardingSuccessfulScreen\"\r\n                    component={OnboardingSuccessfulScreen}\r\n                    options={{title: screenTitle(\"OnboardingSuccessfulScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"NotFoundScreen\"\r\n                    component={NotFoundScreen}\r\n                    options={{title: screenTitle(\"NotFoundScreen\")}}\r\n                />\r\n                <Stack.Screen\r\n                    name=\"MatchSuccessScreen\"\r\n                    component={MatchSuccessScreen}\r\n                    options={{\r\n                        headerShown: false,\r\n                        cardStyleInterpolator:\r\n                            Platform.OS == \"ios\"\r\n                                ? CardStyleInterpolators.forVerticalIOS\r\n                                : CardStyleInterpolators.forFadeFromBottomAndroid,\r\n                        title: screenTitle(\"MatchSuccessScreen\"),\r\n                    }}\r\n                />\r\n            </Stack.Navigator>\r\n        </NavigationContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(Navigation);\r\n","import React from \"react\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {AppState} from \"../../state/types\";\r\nimport themes from \"../../constants/themes\";\r\nimport {ThemeProvider} from \"react-native-elements\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    currentTheme: state.settings.userSettings.theme,\r\n}));\r\n\r\nexport type ConnectedThemeProviderProps = React.PropsWithChildren<ConnectedProps<typeof reduxConnector>>;\r\n\r\n/**\r\n * This provider receives the current theme from the store and passes it down to all\r\n * children (direct or indirect) that are exported using withTheme(<component>).\r\n */\r\nclass ConnectedThemeProvider extends React.Component<ConnectedThemeProviderProps> {\r\n    render(): JSX.Element {\r\n        const {children, currentTheme} = this.props;\r\n        return (\r\n            <ThemeProvider key={currentTheme} theme={themes[currentTheme]}>\r\n                {children}\r\n            </ThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default reduxConnector(ConnectedThemeProvider);\r\n","import {NavigatorRoute} from \"../navigation/types\";\r\nimport {ThemeKey} from \"../types\";\r\n\r\n// TODO add status bar theme overrides\r\n// Override the status bar theme for certain screens\r\nexport const STATUS_BAR_THEME_OVERRIDES: {[key in NavigatorRoute]?: ThemeKey} = {\r\n    LoginScreen: \"light\",\r\n    SignupScreen: \"light\",\r\n    ForgotPasswordScreen: \"light\",\r\n};\r\n","import {StatusBar} from \"expo-status-bar\";\r\nimport * as React from \"react\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {STATUS_BAR_THEME_OVERRIDES} from \"../constants/status-bar-theming\";\r\nimport {NavigatorRoute} from \"../navigation/types\";\r\nimport {rootNavigationRef} from \"../navigation/utils\";\r\nimport {ThemeKey, ThemeProps} from \"../types\";\r\n\r\n// Component props\r\nexport type ThemedStatusBarProps = ThemeProps;\r\n\r\nclass ThemedStatusBar extends React.Component<ThemedStatusBarProps> {\r\n    previousThemeOverride: ThemeKey | undefined;\r\n\r\n    getThemeOverride(): ThemeKey | undefined {\r\n        const routeName = rootNavigationRef.current?.getCurrentRoute()?.name as NavigatorRoute;\r\n        return STATUS_BAR_THEME_OVERRIDES[routeName];\r\n    }\r\n\r\n    componentDidMount() {\r\n        const nav = rootNavigationRef.current;\r\n\r\n        if (nav) {\r\n            // Ensure we update the status bar theme when needed\r\n            nav.addListener(\"state\", () => {\r\n                const override = this.getThemeOverride();\r\n                if (override !== this.previousThemeOverride) this.forceUpdate();\r\n                this.previousThemeOverride = override;\r\n            });\r\n        }\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme} = this.props;\r\n        const defaultStyle: ThemeKey = theme.id == \"dark\" ? \"light\" : \"dark\";\r\n\r\n        return <StatusBar style={this.getThemeOverride() || defaultStyle} />;\r\n    }\r\n}\r\n\r\nexport default withTheme(ThemedStatusBar);\r\n","import React from \"react\";\r\nimport {Text, StyleSheet, View} from \"react-native\";\r\nimport {withTheme} from \"react-native-elements\";\r\nimport {connect, ConnectedProps} from \"react-redux\";\r\nimport {acceptAllCookies} from \"../state/settings/actions\";\r\nimport store from \"../state/store\";\r\nimport {AppState, MyThunkDispatch} from \"../state/types\";\r\nimport {preTheme} from \"../styles/utils\";\r\nimport {Theme, ThemeProps} from \"../types\";\r\nimport CustomModal from \"./modals/CustomModal\";\r\nimport i18n from \"i18n-js\";\r\nimport CustomizeCookiesModal from \"./modals/CustomizeCookiesModal\";\r\nimport {hasUserGivenCookieConsent} from \"../state/static-storage-middleware\";\r\nimport Button from \"./Button\";\r\n\r\n// Map props from store\r\nconst reduxConnector = connect((state: AppState) => ({\r\n    cookies: state.settings.userSettings.cookies,\r\n    consentDate: state.settings.userSettings.cookieConsentDate,\r\n}));\r\n\r\n// Component props\r\nexport type CookieBannerProps = ThemeProps & ConnectedProps<typeof reduxConnector>;\r\n\r\n// Component state\r\nexport type CookieBannerState = {showCustomize: boolean};\r\n\r\nclass CookieBanner extends React.Component<CookieBannerProps, CookieBannerState> {\r\n    constructor(props: CookieBannerProps) {\r\n        super(props);\r\n        this.state = {showCustomize: false};\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        const {theme, consentDate} = this.props;\r\n        const {showCustomize} = this.state;\r\n\r\n        const styles = themedStyles(theme);\r\n\r\n        if (hasUserGivenCookieConsent(consentDate)) return <></>;\r\n\r\n        return (\r\n            <>\r\n                <CustomModal\r\n                    visible={!showCustomize}\r\n                    animationType=\"slide\"\r\n                    fullWidth\r\n                    bottom\r\n                    nonDismissable\r\n                    modalViewStyle={styles.modalView}\r\n                    renderContent={() => (\r\n                        <>\r\n                            <Text style={styles.cookieText}>{i18n.t(\"cookies.bannerText\")}</Text>\r\n                            <View style={styles.actions}>\r\n                                <Button\r\n                                    text={i18n.t(\"cookies.acceptAll\")}\r\n                                    onPress={() => (store.dispatch as MyThunkDispatch)(acceptAllCookies())}\r\n                                    style={styles.action}\r\n                                    textStyle={styles.actionText}\r\n                                    skin=\"rounded-filled\"\r\n                                />\r\n                                <Button\r\n                                    text={i18n.t(\"cookies.customize\")}\r\n                                    onPress={() => this.setState({...this.state, showCustomize: true})}\r\n                                    style={styles.action}\r\n                                    textStyle={styles.actionText}\r\n                                    skin=\"rounded-hollow\"\r\n                                />\r\n                            </View>\r\n                        </>\r\n                    )}\r\n                />\r\n                <CustomizeCookiesModal\r\n                    visible={showCustomize}\r\n                    onHide={() => this.setState({...this.state, showCustomize: false})}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst themedStyles = preTheme((theme: Theme) => {\r\n    return StyleSheet.create({\r\n        modalView: {\r\n            paddingHorizontal: 20,\r\n            paddingVertical: 20,\r\n            justifyContent: \"center\",\r\n        },\r\n        cookieText: {\r\n            fontSize: 14,\r\n            lineHeight: 20,\r\n            color: theme.text,\r\n            textAlign: \"justify\",\r\n        },\r\n        actions: {\r\n            flexDirection: \"row\",\r\n            marginTop: 20,\r\n            width: \"100%\",\r\n            maxWidth: 350,\r\n        },\r\n        action: {\r\n            flex: 1,\r\n            height: 40,\r\n            marginHorizontal: 10,\r\n            marginVertical: 0,\r\n        },\r\n        actionText: {\r\n            fontSize: 16,\r\n        },\r\n    });\r\n});\r\n\r\nexport default reduxConnector(withTheme(CookieBanner));\r\n","import {registerRootComponent} from \"expo\";\r\nimport React, {useState} from \"react\";\r\nimport useCachedResources from \"./hooks/useCachedResources\";\r\nimport Navigation from \"./navigation\";\r\nimport {Provider} from \"react-redux\";\r\nimport configureLocalization from \"./localization\";\r\nimport {SafeAreaProvider} from \"react-native-safe-area-context\";\r\nimport ConnectedThemeProvider from \"./components/providers/ConnectedThemeProvider\";\r\nimport store from \"./state/store\";\r\nimport ThemedStatusBar from \"./components/ThemedStatusBar\";\r\nimport {configureNotifications} from \"./notifications\";\r\nimport {initPolyfills} from \"./state/polyfills\";\r\nimport CookieBanner from \"./components/CookieBanner\";\r\n\r\nfunction App() {\r\n    initPolyfills();\r\n    const {isLoadingComplete, initialRoute} = useCachedResources();\r\n    configureLocalization();\r\n    configureNotifications();\r\n\r\n    const [navigationReady, setNavigationReady] = useState<boolean>(false);\r\n\r\n    if (!isLoadingComplete) {\r\n        return null;\r\n    } else {\r\n        return (\r\n            <SafeAreaProvider>\r\n                <Provider store={store}>\r\n                    <ConnectedThemeProvider>\r\n                        <Navigation onReady={() => setNavigationReady(true)} initialRoute={initialRoute} />\r\n                        {navigationReady && <ThemedStatusBar />}\r\n                        <CookieBanner />\r\n                    </ConnectedThemeProvider>\r\n                </Provider>\r\n            </SafeAreaProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default registerRootComponent(App);\r\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\r\nimport {colors} from \"react-native-elements\";\r\n\r\nexport function initPolyfills(): void {\r\n    // FIXME: https://github.com/react-native-elements/react-native-elements/pull/2561\r\n\r\n    // @ts-ignore react-native-elements typings are missing \"web\"\r\n    if (!colors.platform.web) {\r\n        // @ts-ignore react-native-elements typings are missing \"web\"\r\n        colors.platform.web = {\r\n            primary: \"#2089dc\",\r\n            secondary: \"#ca71eb\",\r\n            grey: \"#393e42\",\r\n            searchBg: \"#303337\",\r\n            success: \"#52c41a\",\r\n            error: \"#ff190c\",\r\n            warning: \"#faad14\",\r\n        };\r\n    }\r\n}\r\n"],"sourceRoot":""}